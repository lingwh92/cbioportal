webpackJsonp([0],Array(774).concat([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":u(t))&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":u(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){var t=window.serverVars,n=t.theQuery,r=window.oql_parser.parse(n),o=new k.ResultsViewPageStore,i=[];if(["-1","all"].indexOf(t.caseSetProperties.case_set_id)>-1)for(var a=t.studySampleObj,s=Object.keys(a),l=0;l<s.length;l++){var u=s[l];i=i.concat(a[u].map(function(e){return{sampleId:e,studyId:u}}))}else for(var s=Object.keys(t.studySampleListMap),l=0;l<s.length;l++)i.push({sampleListId:t.studySampleListMap[s[l]],studyId:s[l]});return o.samplesSpecification=i,o.hugoGeneSymbols=v.map(r,function(e){return e.gene}),o.selectedMolecularProfileIds=t.molecularProfiles,o.rppaScoreThreshold=t.rppaScoreThreshold,o.zScoreThreshold=t.zScoreThreshold,o.oqlQuery=n,o.queryStore=e,o}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p="function"==typeof Symbol&&"symbol"===u(Symbol.iterator)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":u(e)},f=n(1),d=o(f),h=n(19),m=o(h),g=n(3),v=o(g),y=n(84),b=r(y),w=n(10),x=n(891),_=r(x),S=n(287),C=r(S),k=n(177),A=n(962),E=r(A),M=n(967),T=r(M),O=n(998),I=r(O),P=n(1003),j=r(P),D=n(275),N=r(D),R=n(51),F=r(R),L=n(1016),z=r(L),B=n(1019),q=r(B);n(1020);var V=n(178),U=n(1021),H=r(U),G=n(1064),W=r(G),Z=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":p(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};N.default.plugins.register({beforeDraw:function(e){var t=e.chart.ctx;t.fillStyle="white",t.fillRect(0,0,e.chart.width,e.chart.height)}});var Y=window,X=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.showTwitter=!0===F.default.showTwitter;var r=l(e.queryStore);return n.resultsViewPageStore=r,window.resultsViewPageStore=r,n.exposeComponentRenderersToParentScript(e),Y.renderQuerySummary(document.getElementById("main_smry_info_div")),(0,b.default)(document).ready(function(){(0,V.genes)(window.serverVars.theQuery).length<=1&&(0,b.default)("a#mutex-result-tab").parent().hide()}),n}return s(t,e),c(t,[{key:"componentDidMount",value:function(){this.mountOverlappingStudiesWarning()}},{key:"mountOverlappingStudiesWarning",value:function(){var e=this,t=(0,b.default)('<div class="cbioportal-frontend"></div>').insertBefore("#tabs");m.render(d.createElement(w.Observer,null,function(){return e.resultsViewPageStore.studies.isComplete,d.createElement("span",null)}),t[0])}},{key:"exposeComponentRenderersToParentScript",value:function(e){var t=this;(0,C.default)("renderOncoprint",function(e){function n(e){(0,b.default)("#oncoprint-result-tab").click(e)}return d.createElement(H.default,{divId:e.divId,store:t.resultsViewPageStore,routing:t.props.routing,addOnBecomeVisibleListener:n})}),(0,C.default)("renderCNSegments",function(){return d.createElement(q.default,{store:t.resultsViewPageStore})}),(0,C.default)("renderQuerySummary",function(){return d.createElement(W.default,{queryStore:e.queryStore,store:t.resultsViewPageStore})}),(0,C.default)("renderMutationsTab",function(){return d.createElement("div",null,d.createElement(_.default,{show:t.resultsViewPageStore.ajaxErrors.length>0,onHide:function(){t.resultsViewPageStore.clearErrors()}}),d.createElement(T.default,{store:t.resultsViewPageStore}))}),(0,C.default)("renderCancerTypeSummary",function(e){return d.createElement("div",null,d.createElement(_.default,{show:t.resultsViewPageStore.ajaxErrors.length>0,onHide:function(){t.resultsViewPageStore.clearErrors()}}),d.createElement(E.default,{store:t.resultsViewPageStore}))}),(0,C.default)("renderMutExTab",function(){return d.createElement("div",null,d.createElement(I.default,{store:t.resultsViewPageStore}))}),(0,C.default)("renderBookmark",function(){return d.createElement("div",null,d.createElement(z.default,{store:t.resultsViewPageStore,getParameters:t.addThisParameters}))}),(0,C.default)("renderSurvivalTab",function(){return d.createElement("div",{className:"cbioportal-frontend"},d.createElement(j.default,{store:t.resultsViewPageStore}))})}},{key:"render",value:function(){return null}},{key:"addThisParameters",get:function(){var e=this.showTwitter?{twitter:{hashtags:"cbioportal"}}:{};return{setup:function(t){return{url:t,passthrough:e}},className:"addthis_inline_share_toolbox"+(this.showTwitter?"":"_ubww")}}}]),t}(d.Component);X=Z([(0,w.inject)("routing"),(0,w.inject)("queryStore"),w.observer],X),t.default=X},,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.TableCellStatus=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s),u=n(50),c=function(e){return e&&e.__esModule?e:{default:e}}(u),p=t.TableCellStatus=void 0;!function(e){e[e.LOADING=0]="LOADING",e[e.ERROR=1]="ERROR",e[e.NA=2]="NA"}(p||(t.TableCellStatus=p={}));var f=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"render",value:function(){var e="",t="";switch(this.props.status){case p.LOADING:e=this.props.loadingAlt||"Querying server for data.",t="LOADING";break;case p.ERROR:e=this.props.errorAlt||"Error retrieving data.",t="ERROR";break;case p.NA:e=this.props.naAlt||"Data not available.",t=""}return l.createElement(c.default,{placement:"left",overlay:l.createElement("span",null,e)},l.createElement("span",{style:{color:"gray",fontSize:"xx-small",textAlign:"center"}},t))}}]),t}(l.Component);t.default=f},function(e,t){e.exports={portalWidth:"annotation-module__portalWidth__1ONSd","annotation-item":"annotation-module__annotation-item__1YzCz","annotation-item-text":"annotation-module__annotation-item-text__2FRXN","annotation-item-error":"annotation-module__annotation-item-error__1XUY_"}},function(e,t,n){"use strict";function r(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]="number"==typeof e[n]?e[n]:e[n].val);return t}t.__esModule=!0,t.default=r,e.exports=t.default},function(e,t,n){(function(t){(function(){var n,r,o;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:void 0!==t&&null!==t&&t.hrtime?(e.exports=function(){return(n()-o)/1e6},r=t.hrtime,n=function(){var e;return e=r(),1e9*e[0]+e[1]},o=n()):Date.now?(e.exports=function(){return Date.now()-o},o=Date.now()):(e.exports=function(){return(new Date).getTime()-o},o=(new Date).getTime())}).call(this)}).call(t,n(843))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n){return null!=e&&e.length>t+(n||0)}function l(e,t,n,r){return s(e,n,r)?e.substring(0,n)+t:e}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.isTooLong=s,t.truncateText=l;var p=n(1),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(p),d=n(18),h=r(d),m=n(10),g=n(8),v=n(50),y=r(v),b=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},w=x=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"render",value:function(){var e=this,t=f.createElement("span",{style:{whiteSpace:"nowrap"},className:(0,h.default)(this.props.className)},this.truncatedText);return this.needsTooltip&&(t=f.createElement(y.default,{overlay:function(){return e.props.tooltip||f.createElement("span",null)},placement:"right",destroyTooltipOnHide:!0},t)),t}},{key:"needsTooltip",get:function(){return void 0!==this.props.tooltip&&("always"===this.props.addTooltip||"truncated"===this.props.addTooltip&&this.isTooLong)}},{key:"isTooLong",get:function(){return s(this.props.text,this.props.maxLength||x.defaultProps.maxLength,this.props.buffer)}},{key:"truncatedText",get:function(){return l(this.props.text,this.props.suffix||x.defaultProps.suffix,this.props.maxLength||x.defaultProps.maxLength,this.props.buffer)}}]),t}(f.Component);w.defaultProps={maxLength:50,buffer:2,suffix:"...",addTooltip:"truncated"},b([g.computed],w.prototype,"needsTooltip",null),b([g.computed],w.prototype,"isTooLong",null),b([g.computed],w.prototype,"truncatedText",null),w=x=b([m.observer],w),t.default=w;var x},function(e,t){e.exports={portalWidth:"styles-module__portalWidth__1w8-Y","integer-data":"styles-module__integer-data__1Bn0H"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.default=function(e){return(0,s.default)(i.default.findDOMNode(e))};var o=n(19),i=r(o),a=n(895),s=r(a);e.exports=t.default},function(e,t,n){"use strict";function r(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=0);return t}t.__esModule=!0,t.default=r,e.exports=t.default},function(e,t,n){"use strict";function r(e,t,n,r,i,a,s){var l=-i*(t-r),u=-a*n,c=l+u,p=n+c*e,f=t+p*e;return Math.abs(p)<s&&Math.abs(f-r)<s?(o[0]=r,o[1]=0,o):(o[0]=f,o[1]=p,o)}t.__esModule=!0,t.default=r;var o=[0,0];e.exports=t.default},function(e,t,n){(function(t){for(var r=n(793),o="undefined"==typeof window?t:window,i=["moz","webkit"],a="AnimationFrame",s=o["request"+a],l=o["cancel"+a]||o["cancelRequest"+a],u=0;!s&&u<i.length;u++)s=o[i[u]+"Request"+a],l=o[i[u]+"Cancel"+a]||o[i[u]+"CancelRequest"+a];if(!s||!l){var c=0,p=0,f=[];s=function(e){if(0===f.length){var t=r(),n=Math.max(0,1e3/60-(t-c));c=n+t,setTimeout(function(){var e=f.slice(0);f.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(c)}catch(e){setTimeout(function(){throw e},0)}},Math.round(n))}return f.push({handle:++p,callback:e,cancelled:!1}),p},l=function(e){for(var t=0;t<f.length;t++)f[t].handle===e&&(f[t].cancelled=!0)}}e.exports=function(e){return s.call(o,e)},e.exports.cancel=function(){l.apply(o,arguments)},e.exports.polyfill=function(){o.requestAnimationFrame=s,o.cancelAnimationFrame=l}}).call(t,n(172))},function(e,t,n){"use strict";function r(e,t,n){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(0!==n[r])return!1;var o="number"==typeof t[r]?t[r]:t[r].val;if(e[r]!==o)return!1}return!0}t.__esModule=!0,t.default=r,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a),l=n(50),u=r(l),c=n(790),p=r(c),f=function(){function e(){o(this,e)}return i(e,null,[{key:"mainContent",value:function(e,t,n){var r=s.createElement("span",null,s.createElement("b",null,t)," variant reads out of ",s.createElement("b",null,t+n)," total");return s.createElement(u.default,{placement:"left",overlay:r,arrowContent:s.createElement("div",{className:"rc-tooltip-arrow-inner"}),destroyTooltipOnHide:!0},s.createElement("span",null,e.toFixed(2)))}},{key:"renderFunction",value:function(t){var n=e.getSortValue(t);if(n){var r=t[0].tumorAltCount,o=t[0].tumorRefCount;return e.mainContent(n,r,o)}return s.createElement(p.default,{status:c.TableCellStatus.NA})}},{key:"getSortValue",value:function(e){var t=e[0];if(!t)return null;var n=t.tumorAltCount,r=t.tumorRefCount;return n<0||r<0?null:n/(n+r)}},{key:"isVisible",value:function(e){if(e){var t=!0,n=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;if(this.getSortValue(a))return!0}}catch(e){n=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw r}}}return!1}}]),e}();t.default=f},function(e,t,n){"use strict";var r=n(840).default;e.exports=r},function(e,t,n){"use strict";t.__esModule=!0,t.default={noWobble:{stiffness:170,damping:26},gentle:{stiffness:120,damping:14},wobbly:{stiffness:180,damping:12},stiff:{stiffness:210,damping:20}},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a),l=n(794),u=r(l),c=n(805),p=r(c),f=n(871),d=r(f),h=function(){function e(){o(this,e)}return i(e,null,[{key:"getSortValue",value:function(t){return e.extractSortValue(e.getTextValue(t))}},{key:"extractNonNumerical",value:function(e){var t=/[^0-9]+/g,n=e[0].match(t),r=[];if(n&&n.length>0)for(var o=n.join(""),i=0;i<o.length;i++)r.push(o.charCodeAt(i));return r}},{key:"extractSortValue",value:function(t){var n=/[A-Za-z][0-9]+./g,r=/[0-9]+/g,o=t.match(n),i=[];if(o&&0!==o.length?(i=e.extractNonNumerical(o),o=o[0].match(r)):o=t.match(r),o&&o.length>0){var a=o[0];return i&&i.length>0&&(a+="."+i.join("")),parseFloat(a)}return null}},{key:"getTextValue",value:function(t){var n="",r=e.getData(t);return r&&(n=r.toString()),n}},{key:"getDisplayValue",value:function(t){return e.getTextValue(t)}},{key:"getData",value:function(e){return e.length>0?e[0].proteinChange:null}},{key:"renderPlainText",value:function(t){var n=e.getDisplayValue(t);return s.createElement("span",null,n)}},{key:"renderWithMutationStatus",value:function(t){var n=e.getDisplayValue(t),r=p.default.getData(t),o=s.createElement(u.default,{text:n,tooltip:s.createElement("span",null,n),className:d.default.proteinChange,maxLength:20});return r&&r.toLowerCase().indexOf("germline")>-1&&(o=s.createElement("span",null,o,s.createElement("span",{className:d.default.germline},"Germline"))),o}}]),e}();t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a),l=n(870),u=r(l),c=n(50),p=r(c),f=function(){function e(){o(this,e)}return i(e,null,[{key:"getData",value:function(e){var t=null;return e.length>0&&(t=e[0].mutationStatus),t}},{key:"sortValue",value:function(t){return e.getData(t)}},{key:"download",value:function(t){return e.getData(t)||""}},{key:"renderFunction",value:function(t){var n=e.getData(t),r=void 0,o=!1;return n?n.toLowerCase().indexOf("somatic")>-1?(r=s.createElement("span",{className:u.default.somatic},"S"),o=!0):n.toLowerCase().indexOf("germline")>-1?(r=s.createElement("span",{className:u.default.germline},"G"),o=!0):r=s.createElement("span",{className:u.default.unknown},n):r=s.createElement("span",null),o&&(r=s.createElement(p.default,{overlay:s.createElement("span",null,n),placement:"right"},r)),r}}]),e}();t.default=f},function(e,t){e.exports={portalWidth:"mutationAssessorColumn-module__portalWidth__3YkFm","ma-high":"mutationAssessorColumn-module__ma-high__gHJA0","ma-medium":"mutationAssessorColumn-module__ma-medium__3fKlP","ma-low":"mutationAssessorColumn-module__ma-low__VwQXC","ma-neutral":"mutationAssessorColumn-module__ma-neutral__2oq-W"}},function(e,t){e.exports={portalWidth:"siftTooltip-module__portalWidth__24Oa2","sift-deleterious":"siftTooltip-module__sift-deleterious__1aA2Z","sift-deleterious_low_confidence":"siftTooltip-module__sift-deleterious_low_confidence__2fL6l","sift-tolerated_low_confidence":"siftTooltip-module__sift-tolerated_low_confidence__1u4Hk","sift-tolerated":"siftTooltip-module__sift-tolerated__xqt6g","sift-tooltip-table":"siftTooltip-module__sift-tooltip-table__2KTtP"}},function(e,t){e.exports={portalWidth:"polyPhen2Tooltip-module__portalWidth__CFsKD","polyPhen2-probably_damaging":"polyPhen2Tooltip-module__polyPhen2-probably_damaging__EBbPS","polyPhen2-possibly_damaging":"polyPhen2Tooltip-module__polyPhen2-possibly_damaging__1fyF8","polyPhen2-benign":"polyPhen2Tooltip-module__polyPhen2-benign__36nqJ","polyPhen2-unknown":"polyPhen2Tooltip-module__polyPhen2-unknown__3KRAw","polyPhen2-tooltip-table":"polyPhen2Tooltip-module__polyPhen2-tooltip-table__2WGNf"}},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAT5QTFRF/Pz8/////P396urqzMzMxsbGxsbGxsbGxsbGxsbGycnJ19fX9vb2/v7+2NjYwsLC+Pr69Pf38PT18fT19ff4+fr79PT0p7GzZ4CGXnuCYX+GZIWNaYqSbo+XZYWNZIKJYXyDbYWLs7m7SHiEAERVcpag+vv7gqavFFhpIWJytsvQgKeyLW5/IWd4Qn2Mv9PYfLTDKoOZKoWbTJqt9/r79Pj5c7zOM5u2MZq0WrDE5/H00+zyodfkVrjPRbHMRbHLULXOm9TjyOfv1OzypNjlndXkz+rx+vz8rdzopNjl7Pb56vX45/T36/b45vT36/b45/T36vX45PP3AENUAEBQAD1MADtKADpIDVJjCU5fB0xdBktcCExdDlJjIWd4KH6TJ3yRJ3qPJ3uQKHyRKYCVMJixMJawMJavMJex////SLEDvgAAAFN0Uk5TAAAAEzVMYW51e0l7fn57Z4OHi4qHggdcu9zu+Pr8+OvXtFC1/YwDhfjrS47u/ddHmv391gcKq/z9yxozdeX9/e19Q0KUo0oGqr0kPEc6SjhGPk2mXRMZAAAAAWJLR0QB/wIt3gAAAAlwSFlzAAAASAAAAEgARslrPgAAALpJREFUGNNjYGBmYWVj5+Dk5GBnY2VhZmDg4ubhhQMePi4GfhBfQFBIWEQUJMLPICYuISklLSMrKyMnr6CoJMbAoKwSHBIaFh4eFhoSrKLKyMCopq4RERkVHR0TGaupxQAUYNTWiYMAXT19RpAAg4FhfEJiUnKKkbEJWIDR1Mw8NS09w8LSihEiwGhtY2tn7+DoxAQTYGRydnF1YwIzIQKM7h6eXozIAozePoyoAr5+aAL+AWgCgUFQBgBUGxvs9K2IRwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNy0wOS0xNFQwMDoxMTowNSswMzowMPy1TyEAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTctMDktMTRUMDA6MTE6MDQrMDM6MDArn/wpAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAklQTFRF+/z+////dJ7j///+9Pv/a5TdqL7k4+v6eKDjsMnvtM75X5Hkp77ou9H33+j4vtT4wdf7cp/p3u3/ja/oaaP2ytjsZ47V/f//0N71wc3jKnft0OH8GmbeO3fcQHTSMW7VkbbyuNX/FWDcc5TS///6////2+X4z9zs1NviPoLihbT4/f7+bJ/umLLWyNTnNHzt/P3+1OP7wM7o0dznVoPMob3sY4zVR4jukLb0/v7+SILhz9vr//z0pb7gM3rlzeD9E17aWY/q/f3+R4Lhztnq///2jrfxG2rozd35RYHlgaHX0Nzw///+4+39cZrgtMXjqsn1GGjnf6nwkbTvd53iwtDjXIbOq8Pt/v39obrkN3PXLXnvfaju/v//8/j+gajrk7Hl//72sMTiPnrdt9D5+/z+qcz7AE/dcZzn8ff+iari9vf0+vnxTIfjZprvSo71QHradZjT4en2YIrV+fn03+jxOH/qeqnzKG7eY4rNVH/PiLPzxd37mbHe///3x9ToMWfIpL3roLjiT33PNnzrjLX1ibX04er1+vj18/PvXorWU4be9fj+8/X5NnfiGmjn5/D9+fv+WJTv3OLo5eru7e/vhazoL3Pk2ub6s8/6K3buPnTSm7Tja5zpQnDH7fH1/Pz6///4ga/xM3np4Or6SIboYJPmvszjRnXLp8LvlLvzLmnRydjs///8+Pr6UIjkSYTmwNX3LnLhrcXtjKnZS33V2eb70+P8gaLW///5pMj4CmHqnr31Lm7dztvu9/fy4unwQHTSe6HnW+6dZAAAACF0Uk5T+/7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+EjK2AQAAAAFiS0dEAf8CLd4AAAAJcEhZcwAAAEgAAABIAEbJaz4AAAEOSURBVBjTDcyDQkRRFAXQc7Nta6fJtt3Ltm3brsl2k227vqzWBywiZmhkbAKYCpmZW1iCR8IiVqLWYgziEjaStlLMjmAv7eDo5AzIuLi6Ae4EWQ9PL28fX8j5+QMBIMgHBgWHhIZBITwiEhyPEBUdExsXzyEhMSk5BRylIi09IzML2Tm5efkFhaAiVlxSCqBMsbyisqoaxCnV1NbVg4NyQ2NTcwuIqbSqtqmpg2m0a3ZoaYM6dbq6e3r7wLH+gcGh/3RYd2R0bHyCDzY5NT2DWZrTm19YXFpeAVtdW98AaHNre0ewu7eP7IPDo+MT0OnZ+cXl1TUfN7d3gvuHR3rSf355fXsHDD4+v75/fv8AgKdToRrTqZIAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTctMDktMTRUMDA6MjI6NDErMDM6MDD+ZbjKAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE3LTA5LTE0VDAwOjIyOjI2KzAzOjAwjPA3fwAAAABJRU5ErkJggg=="},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.MSKTabs=t.MSKTab=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=o(u),p=n(3),f=o(p),d=n(18),h=r(d),m=n(96),g=n(887),v=r(g);n(890);t.MSKTab=function(e){function t(e){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return s(t,e),l(t,[{key:"render",value:function(){return c.createElement("div",{className:(0,h.default)({"msk-tab":!0,hiddenByPosition:!!this.props.inactive},this.props.className)},this.props.children)}}]),t}(c.Component),t.MSKTabs=function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.shownTabs=[],e.tabRefs=[],e.state={currentPage:1,pageBreaks:[]},e}return s(t,e),l(t,[{key:"cloneTab",value:function(e,t,n){return n?c.cloneElement(e,{inactive:t},c.createElement(m.ThreeBounce,{className:"default-spinner center-block text-center"})):c.cloneElement(e,{inactive:t})}},{key:"setActiveTab",value:function(e){this.props.onTabClick&&this.props.onTabClick(e)}},{key:"navTabsRefHandler",value:function(e){this.navTabsRef=e}},{key:"tabRefHandler",value:function(e,t){e&&t&&this.tabRefs.push({id:e,element:t})}},{key:"nextPage",value:function(){this.setState({currentPage:this.state.currentPage+1})}},{key:"prevPage",value:function(){this.setState({currentPage:this.state.currentPage-1})}},{key:"initOnResize",value:function(e,t){var n=this,r=null;return function(e){null!==r&&(window.clearTimeout(r),r=null),r=window.setTimeout(function(){n.setState({currentPage:1,pageBreaks:[]})},600)}}},{key:"render",value:function(){var e=this;if(this.props.children&&c.Children.count(this.props.children)){var t=this.props.children,n=!1,r="",o=c.Children.toArray(t),i=f.reduce(o,function(t,o){return o.props.hide||(o.props.id===e.props.activeTabId?(n=!0,r=e.props.activeTabId,e.shownTabs.push(o.props.id),t.push(e.cloneTab(o,!1,!!o.props.loading))):e.props.unmountOnHide||!f.includes(e.shownTabs,o.props.id)||o.props.loading||t.push(e.cloneTab(o,!0,!!o.props.loading))),t},[]);if(!1===n){var a=o[0];this.shownTabs.push(a.props.id),i[0]=this.cloneTab(a,!1,!!a.props.loading),r=a.props.id}return c.createElement("div",{id:this.props.id?this.props.id:"",className:(0,h.default)("msk-tabs",this.props.className)},this.navTabs(t,r),c.createElement("div",{className:"tab-content"},i))}return null}},{key:"navTabs",value:function(e,t){this.tabRefs=[];var n=this.tabPages(e,t),r=this.state.pageBreaks.length+1,o=this.props.enablePagination?{border:0,overflow:"hidden"}:{},i=this.state.currentPage>1?c.createElement("li",{key:"prevPage",style:{cursor:"pointer"}},c.createElement("a",{onClick:this.prevPage.bind(this)},c.createElement("i",{className:"fa fa-chevron-left",style:this.props.arrowStyle}))):null,a=this.state.currentPage<r?c.createElement("li",{key:"nextPage",style:{cursor:"pointer"}},c.createElement("a",{onClick:this.nextPage.bind(this)},c.createElement("i",{className:"fa fa-chevron-right",style:this.props.arrowStyle}))):null,s=this.props.tabButtonStyle||"tabs";return c.createElement("ul",{ref:this.navTabsRefHandler.bind(this),className:(0,h.default)("nav","nav-"+s),style:o},i,n[this.state.currentPage-1],a,this.props.enablePagination&&c.createElement(v.default,{handleWidth:!0,onResize:this.initOnResize.bind(this)()}))}},{key:"tabPages",value:function(e,t){var n=this,r=[[]],o=1;return c.Children.forEach(e,function(e){if(!(!e||e.props.hide||e.props.loading&&t!==e.props.id)){var i=t===e.props.id?"active":"";n.props.enablePagination&&n.state.pageBreaks.length>0&&n.state.pageBreaks[o-1]===e.props.id&&(o++,r[o-1]=[]),r[o-1].push(c.createElement("li",{key:e.props.id,style:{cursor:"pointer"},ref:n.tabRefHandler.bind(n,e.props.id),className:i},c.createElement("a",{onClick:n.setActiveTab.bind(n,e.props.id),style:e.props.anchorStyle},e.props.linkText)))}}),r}},{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){if(e.props.enablePagination&&0===e.state.pageBreaks.length){var t=e.findPageBreaks(),n=e.findCurrentPage(t);e.setState({currentPage:n,pageBreaks:t})}},1)}},{key:"findCurrentPage",value:function(e){var t=this,n=1,r=!1;return this.props.activeTabId&&e.length>0&&f.each(this.tabRefs,function(o){if(o.id===e[n-1]&&n++,o.id===t.props.activeTabId)return r=!0,!1}),r?n:1}},{key:"findPageBreaks",value:function(){var e=[],t=this.navTabsRef&&this.navTabsRef.offsetWidth||0;if(t>0){var n=0;f.each(this.tabRefs,function(r){n+=r.element.offsetWidth;var o=e.length>0?160:100;n>t-o&&(e.push(r.id),n=r.element.offsetWidth)})}return e}}]),t}(c.Component)},function(e,t,n){e.exports=n(4)(178)},function(e,t,n){"use strict";function r(e,t){return e="function"==typeof e?e():e,i.default.findDOMNode(e)||t}t.__esModule=!0,t.default=r;var o=n(19),i=function(e){return e&&e.__esModule?e:{default:e}}(o);e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a),l=n(50),u=r(l);n(267);var c=n(790),p=r(c),f=function(){function e(){o(this,e)}return i(e,null,[{key:"getCircleX",value:function(e,t,n){var r=e/100;return t*(1-r)+n*r}},{key:"getCircleFill",value:function(e){return e<25?"blue":e>75?"red":"gray"}},{key:"getTooltipContents",value:function(e){return e&&"complete"===e.status&&null!==e.data?s.createElement("div",null,s.createElement("span",null,"mRNA level of the gene in this tumor"),s.createElement("br",null),s.createElement("span",null,s.createElement("b",null,"mRNA z-score: "),e.data.zScore),s.createElement("br",null),s.createElement("span",null,s.createElement("b",null,"Percentile: "),e.data.percentile),s.createElement("br",null)):e&&"complete"===e.status&&null===e.data?s.createElement("span",null,"mRNA data is not available for this gene."):e&&"error"===e.status?s.createElement("span",null,"Error retrieving data."):s.createElement("span",null,"Querying server for data.")}},{key:"getTdContents",value:function(t){var n=null;return t&&"complete"===t.status&&null!==t.data?s.createElement("svg",{width:63,height:12},s.createElement("text",{x:33,y:11,textAnchor:"start",fontSize:10},Math.round(t.data.percentile)+"%"),s.createElement("g",null,s.createElement("line",{x1:0,y1:8,x2:30,y2:8,style:{stroke:"gray",strokeWidth:2}}),s.createElement("circle",{cx:e.getCircleX(t.data.percentile,3,27),cy:8,r:3,fill:e.getCircleFill(t.data.percentile)}))):(n=t&&"complete"===t.status&&null===t.data?c.TableCellStatus.NA:t&&"error"===t.status?c.TableCellStatus.ERROR:c.TableCellStatus.LOADING,null!==n?s.createElement(p.default,{status:n,naAlt:"mRNA data is not available for this gene."}):void 0)}},{key:"getData",value:function(e,t){if(0===e.length)return null;var n=e[0].sampleId,r=e[0].entrezGeneId;return t.get({sampleId:n,entrezGeneId:r})}},{key:"getDataFromCNA",value:function(e,t){var n=e[0].sampleId,r=e[0].entrezGeneId;return t.get({sampleId:n,entrezGeneId:r})}},{key:"renderFromCacheDatum",value:function(t){return s.createElement(u.default,{placement:"left",overlay:e.getTooltipContents(t),arrowContent:s.createElement("div",{className:"rc-tooltip-arrow-inner"})},e.getTdContents(t))}},{key:"renderFunction",value:function(t,n){var r=e.getData(t,n);return e.renderFromCacheDatum(r)}},{key:"cnaRenderFunction",value:function(t,n){var r=e.getDataFromCNA(t,n);return e.renderFromCacheDatum(r)}}]),e}();t.default=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s),u=n(50),c=function(e){return e&&e.__esModule?e:{default:e}}(u),p=n(171),f=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),a(t,[{key:"mainContent",value:function(){var e=this,n=this.props,r=n.barWidth,o=n.barHeight,i=n.barColor,a=n.totalCount,s=n.counts,u=n.textMargin,c=this.props.freqColors||t.defaultProps.freqColors,f=this.props.mainCountIndex&&this.props.mainCountIndex>=0&&this.props.mainCountIndex<s.length?this.props.mainCountIndex:0,d=s[f]/a,h=(r||0)+(u||0),m=h+t.TEXT_WIDTH,g=[];return s.forEach(function(t,n){var r=n%c.length,o=r>=0?c[r]:c[0];g.push(e.frequencyRectangle(t,a,o))}),l.createElement("svg",{width:m,height:"12"},l.createElement("text",{x:h,y:"9.5",textAnchor:"start",fontSize:"10"},(0,p.getPercentage)(d)),l.createElement("rect",{y:"2",width:r,height:o,fill:i}),g)}},{key:"frequencyRectangle",value:function(e,t,n){var r=e/t,o=this.props,i=o.barWidth,a=o.barHeight;return l.createElement("rect",{y:"2",width:r*(i||0),height:a,fill:n})}},{key:"render",value:function(){var e=this.mainContent();return this.props.tooltip&&(e=l.createElement(c.default,{placement:"left",overlay:this.props.tooltip,arrowContent:l.createElement("div",{className:"rc-tooltip-arrow-inner"})},e)),e}}],[{key:"TEXT_WIDTH",get:function(){return 35}}]),t}(l.Component);t.default=f,f.defaultProps={freqColors:["lightgreen","green"],barColor:"#ccc",textMargin:6,barWidth:30,barHeight:8}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s),u=n(50),c=function(e){return e&&e.__esModule?e:{default:e}}(u),p=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"render",value:function(){var e=l.createElement("svg",{width:"12",height:"12"},l.createElement("circle",{r:"5",cx:"6",cy:"6",stroke:this.props.stroke,fill:this.props.circleFill}),l.createElement("text",{x:"3",y:"8.5",fontSize:this.props.fontSize,fill:this.props.textFill},this.props.text.slice(0,1)));return this.props.tooltip&&(e=l.createElement(c.default,{placement:"right",overlay:this.props.tooltip,arrowContent:l.createElement("div",{className:"rc-tooltip-arrow-inner"})},e)),e}}]),t}(l.Component);t.default=p,p.defaultProps={stroke:"#55C",circleFill:"none",fontSize:7,textFill:"#66C"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=o(l),c=n(85),p=n(3),f=o(p),d=n(830),h=r(d),m=n(834),g=r(m),v=n(818),y=r(v),b=n(819),w=r(b),x=n(119),_=n(274),S=n(269),C=function(){function e(){a(this,e)}return s(e,null,[{key:"getData",value:function(t,n,r,o,i,a,s){var l=void 0;if(t){var u=t[0],c=void 0,p=u.gene.hugoGeneSymbol,f=!!n[u.entrezGeneId];l={hugoGeneSymbol:p,oncoKbGeneExist:f,civicEntry:a&&a.result&&s&&s.result?e.getCivicEntry(u,a.result,s.result):void 0,civicStatus:a&&a.status&&s&&s.status?e.getCivicStatus(a.status,s.status):"pending",hasCivicVariants:!0,myCancerGenomeLinks:o?e.getMyCancerGenomeLinks(u,o):[],isHotspot:!!r&&(0,_.isHotspot)(u,r.single),is3dHotspot:!!r&&(0,_.is3dHotspot)(u,r.clustered)},f?(i&&i.result&&"complete"===i.status&&(c=e.getIndicatorData(u,i.result)),l=Object.assign({},l,{oncoKbStatus:i?i.status:"pending",oncoKbIndicator:c})):l=Object.assign({},l,{oncoKbStatus:"complete",oncoKbIndicator:void 0})}else l=e.DEFAULT_ANNOTATION_DATA;return l}},{key:"getCivicEntry",value:function(e,t,n){var r=e.gene.hugoGeneSymbol,o=null;if(n[r]&&n[r][e.proteinChange]){var a=i({},e.proteinChange,n[r][e.proteinChange]),s=t[r];o=(0,S.buildCivicEntry)(s,a)}return o}},{key:"getCivicStatus",value:function(e,t){return"error"==e||"error"==t?"error":"complete"==e&&"complete"==t?"complete":"pending"}},{key:"getIndicatorData",value:function(e,t){if(null!==t.uniqueSampleKeyToTumorType&&null!==t.indicatorMap){var n=(0,x.generateQueryVariantId)(e.gene.entrezGeneId,t.uniqueSampleKeyToTumorType[e.uniqueSampleKey],e.proteinChange,e.mutationType);return t.indicatorMap[n]}}},{key:"getEvidenceQuery",value:function(e,t){return t.uniqueSampleKeyToTumorType?(0,x.generateQueryVariant)(e.gene.entrezGeneId,t.uniqueSampleKeyToTumorType[e.uniqueSampleKey],e.proteinChange,e.mutationType,e.proteinPosStart,e.proteinPosEnd):void 0}},{key:"getMyCancerGenomeLinks",value:function(t,n){var r=n[t.gene.hugoGeneSymbol],o=[];return r&&(o=e.filterByAlteration(t,r).map(function(e){return e.linkHTML})),o}},{key:"filterByAlteration",value:function(e,t){return t.filter(function(t){var n=/^[A-Za-z][0-9]+[A-Za-z]/,r=/[0-9]+/;if(t.alteration.trim().match(n)&&e.proteinChange){var o=e.proteinChange.match(r),i=t.alteration.match(r);return o&&i&&o[0]===i[0]}return!1})}},{key:"sortValue",value:function(t,n,r,o,i,a,s){var l=e.getData(t,n,r,o,i,a,s);return f.flatten([y.default.sortValue(l.oncoKbIndicator),w.default.sortValue(l.civicEntry),g.default.sortValue(l.myCancerGenomeLinks),h.default.sortValue(l.isHotspot,l.is3dHotspot)])}},{key:"download",value:function(t,n,r,o,i,a,s){var l=e.getData(t,n,r,o,i,a,s);return["OncoKB: "+y.default.download(l.oncoKbIndicator),"CIViC: "+w.default.download(l.civicEntry),"MyCancerGenome: "+g.default.download(l.myCancerGenomeLinks),"CancerHotspot: "+(l.isHotspot?"yes":"no"),"3DHotspot: "+(l.is3dHotspot?"yes":"no")].join(";")}},{key:"renderFunction",value:function(t,n){var r=e.getData(t,n.oncoKbAnnotatedGenes,n.hotspots,n.myCancerGenomeData,n.oncoKbData,n.civicGenes,n.civicVariants),o=void 0;return n.oncoKbData&&n.oncoKbData.result&&(o=this.getEvidenceQuery(t[0],n.oncoKbData.result)),e.mainContent(r,n,n.oncoKbEvidenceCache,o,n.pubMedCache)}},{key:"mainContent",value:function(e,t,n,r,o){return u.createElement("span",{style:{display:"inline-block",minWidth:100}},u.createElement(c.If,{condition:t.enableOncoKb||!1},u.createElement(y.default,{hugoGeneSymbol:e.hugoGeneSymbol,geneNotExist:!e.oncoKbGeneExist,status:e.oncoKbStatus,indicator:e.oncoKbIndicator,evidenceCache:n,evidenceQuery:r,pubMedCache:o,userEmailAddress:t.userEmailAddress})),u.createElement(c.If,{condition:t.enableCivic||!1},u.createElement(w.default,{civicEntry:e.civicEntry,civicStatus:e.civicStatus,hasCivicVariants:e.hasCivicVariants})),u.createElement(c.If,{condition:t.enableMyCancerGenome||!1},u.createElement(g.default,{linksHTML:e.myCancerGenomeLinks})),u.createElement(c.If,{condition:t.enableHotspot||!1},u.createElement(h.default,{isHotspot:e.isHotspot,is3dHotspot:e.is3dHotspot})))}},{key:"DEFAULT_ANNOTATION_DATA",get:function(){return{oncoKbStatus:"complete",oncoKbGeneExist:!1,myCancerGenomeLinks:[],isHotspot:!1,is3dHotspot:!1,hasCivicVariants:!0,hugoGeneSymbol:"",civicStatus:"complete"}}}]),e}();t.default=C},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){e.querySelector(".rc-tooltip-arrow").style.display="none"}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.hideArrow=s;var c=n(1),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),f=n(28),d=n(10),h=n(96),m=n(50),g=r(m),v=n(791),y=r(v),b=n(837),w=r(b),x=n(119),_=n(8),S=n(838),C=r(S),k=n(790),A=r(k),E=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},M=T=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.showFeedback=!1,n.tooltipDataLoadComplete=!1,n.handleFeedbackOpen=n.handleFeedbackOpen.bind(n),n.handleFeedbackClose=n.handleFeedbackClose.bind(n),n.handleLoadComplete=n.handleLoadComplete.bind(n),n.tooltipContent=n.tooltipContent.bind(n),n}return a(t,e),l(t,[{key:"render",value:function(){var e=p.createElement("span",{className:""+y.default["annotation-item"]});return"error"===this.props.status?e=this.errorIcon():"pending"===this.props.status?e=this.loaderIcon():(e=p.createElement("span",{className:""+y.default["annotation-item"]},p.createElement("i",{className:w.default["oncogenic-icon-image"]+" "+this.oncogenicImageClassNames(this.props.indicator),style:T.ONCOGENIC_ICON_STYLE,"data-test":"oncogenic-icon-image"})),this.showFeedback?e=p.createElement("span",null,e,this.feedbackModal(this.props.hugoGeneSymbol,this.props.evidenceQuery&&this.props.evidenceQuery.alteration)):(this.tooltipDataLoadComplete||this.props.evidenceCache&&this.props.evidenceQuery)&&(e=p.createElement(g.default,{overlay:this.tooltipContent,placement:"right",trigger:["hover","focus"],onPopupAlign:s,destroyTooltipOnHide:!1},e))),e}},{key:"loaderIcon",value:function(){return p.createElement(h.Circle,{size:18,scaleEnd:.5,scaleStart:.2,color:"#aaa",className:"pull-left"})}},{key:"errorIcon",value:function(){return p.createElement(g.default,{overlay:p.createElement("span",null,"Error fetching OncoKB data"),placement:"right",trigger:["hover","focus"],destroyTooltipOnHide:!0},p.createElement("span",{className:""+y.default["annotation-item-error"]},p.createElement("i",{className:"fa fa-exclamation-triangle text-danger"})))}},{key:"feedbackModal",value:function(e,t){var n="entry.1744186665="+(e||""),r="entry.1671960263="+(t||""),o="entry.1381123986="+(this.props.userEmailAddress||""),i="entry.1083850662="+encodeURIComponent(window.location.href);return p.createElement(f.Modal,{show:this.showFeedback,onHide:this.handleFeedbackClose},p.createElement(f.Modal.Header,{closeButton:!0},p.createElement(f.Modal.Title,null,"OncoKB Annotation Feedback")),p.createElement(f.Modal.Body,null,p.createElement("iframe",{src:"https://docs.google.com/forms/d/1lt6TtecxHrhIE06gAKVF_JW4zKFoowNFzxn6PJv4g7A/viewform?"+n+"&"+r+"&entry.118699694&entry.1568641202&"+o+"&"+i+"&embedded=true",style:{width:550,height:500,border:"none",marginLeft:"10px"},marginHeight:0,marginWidth:0},p.createElement(A.default,{status:k.TableCellStatus.LOADING}))))}},{key:"tooltipContent",value:function(){return p.createElement(C.default,{geneNotExist:this.props.geneNotExist,indicator:this.props.indicator||void 0,evidenceCache:this.props.evidenceCache,evidenceQuery:this.props.evidenceQuery,pubMedCache:this.props.pubMedCache,handleFeedbackOpen:this.handleFeedbackOpen,onLoadComplete:this.handleLoadComplete})}},{key:"handleLoadComplete",value:function(){this.tooltipDataLoadComplete||(this.tooltipDataLoadComplete=!0)}},{key:"handleFeedbackOpen",value:function(){this.showFeedback=!0}},{key:"handleFeedbackClose",value:function(){this.showFeedback=!1}},{key:"oncogenicImageClassNames",value:function(e){var t=void 0;return t=e&&null!=e.oncogenic?(0,x.oncogenicImageClassNames)(e.oncogenic,e.vus,e.highestSensitiveLevel,e.highestResistanceLevel):(0,x.oncogenicImageClassNames)("N/A",!1,"",""),t=t.map(function(e){return w.default[e]}),t.join(" ")}}],[{key:"sortValue",value:function(e){if(!e)return[];var t=[];return t[0]=(0,x.calcOncogenicScore)(e.oncogenic,e.vus),t[1]=(0,x.calcSensitivityLevelScore)(e.highestSensitiveLevel),t[2]=(0,x.calcResistanceLevelScore)(e.highestResistanceLevel),t[3]=e.geneExist?1:0,t}},{key:"download",value:function(e){return e?(e.oncogenic?e.oncogenic:"Unknown")+", "+(e.highestSensitiveLevel?e.highestSensitiveLevel.toLowerCase():"level NA"):"NA"}},{key:"ONCOGENIC_ICON_STYLE",get:function(){return{backgroundImage:"url("+n(857)+")"}}}]),t}(p.Component);E([_.observable],M.prototype,"showFeedback",void 0),E([_.observable],M.prototype,"tooltipDataLoadComplete",void 0),M=T=E([d.observer],M),t.default=M;var T},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){e.querySelector(".rc-tooltip-arrow").style.display="none"}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.hideArrow=l;var p=n(1),f=o(p),d=n(3),h=o(d),m=n(10),g=n(96),v=n(50),y=r(v),b=n(791),w=r(b),x=n(8),_=n(858),S=r(_),C=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},k=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.tooltipDataLoadComplete=!1,n.cardContent=n.cardContent.bind(n),n}return s(t,e),u(t,[{key:"render",value:function(){var e=f.createElement("span",{className:""+w.default["annotation-item"]}),t=n(861);if(this.props.hasCivicVariants||(t=n(862)),"error"==this.props.civicStatus)e=this.errorIcon();else if(void 0!==this.props.civicEntry){if(null!==this.props.civicEntry&&"complete"==this.props.civicStatus){e=f.createElement("span",{className:""+w.default["annotation-item"]},f.createElement("img",{width:14,height:14,src:t,alt:"Civic Variant Entry"}));var r=f.createElement("div",{className:"rc-tooltip-arrow-inner"});e=f.createElement(y.default,{overlay:this.cardContent.bind(this,this.props.civicEntry),placement:"right",trigger:["hover","focus"],arrowContent:r,onPopupAlign:l,destroyTooltipOnHide:!1},e)}}else e=this.loaderIcon();return e}},{key:"loaderIcon",value:function(){return f.createElement(g.Circle,{size:18,scaleEnd:.5,scaleStart:.2,color:"#aaa",className:"pull-left"})}},{key:"errorIcon",value:function(){return f.createElement(y.default,{overlay:f.createElement("span",null,"Error fetching Civic data"),placement:"right",trigger:["hover","focus"],destroyTooltipOnHide:!0},f.createElement("span",{className:""+w.default["annotation-item-error"]},f.createElement("i",{className:"fa fa-exclamation-triangle text-danger"})))}},{key:"cardContent",value:function(e){return f.createElement(S.default,{title:"CIViC Variants",geneName:e.name,geneDescription:e.description,geneUrl:e.url,variants:e.variants})}}],[{key:"sortValue",value:function(e){var t=0;return e&&(t=1),t}},{key:"download",value:function(e){if(!e)return"NA";var t=h.values(e.variants),n=[];return t&&t.length>0&&t[0].evidence&&h.toPairs(t[0].evidence).forEach(function(e){n.push(e[0]+": "+e[1])}),0===n.length?"NA":n.join(", ")}}]),t}(f.Component);C([x.observable],k.prototype,"tooltipDataLoadComplete",void 0),k=C([m.observer],k),t.default=k},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i),s=n(795),l=function(e){return e&&e.__esModule?e:{default:e}}(s),u=function(){function e(){r(this,e)}return o(e,null,[{key:"getValues",value:function(e,t,n){var r={},o=!0,i=!1,a=void 0;try{for(var s,l=e[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var u=s.value;r[u.sampleId]=u[n]}}catch(e){i=!0,a=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw a}}var c=t.filter(function(e){return r.hasOwnProperty(e)});return 1===c.length?[r[c[0]]]:c.map(function(e){return e+": "+r[e]})}},{key:"getTextValue",value:function(t,n,r){return e.getValues(t,n,r).join(";")}},{key:"getDisplayValue",value:function(t,n,r){return e.getValues(t,n,r).join("\n")}},{key:"renderFunction",value:function(t,n,r){return a.createElement("div",{className:l.default["integer-data"]},e.getDisplayValue(t,n,r))}},{key:"getReads",value:function(e,t){var n=[];if(e){var r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;n.push(l[t])}}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}}return 1==n.length?n[0]:n}}]),e}();t.default=u},function(e,t,n){"use strict";function r(e,t,n){return function(r){var o=e(r);return null===o?i.createElement(s.default,{status:a.TableCellStatus.LOADING}):"error"===o.status?i.createElement(s.default,{status:a.TableCellStatus.ERROR}):null===o.data?i.createElement(s.default,{status:a.TableCellStatus.NA,naAlt:n}):t(o.data,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(1),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(o),a=n(790),s=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),l=o(s),u=n(3),c=o(u),p=n(790),f=r(p),d=n(794),h=r(d),m=function(){function e(){i(this,e)}return a(e,null,[{key:"getData",value:function(e,t){var n=null;return t&&(n=t[e[0].uniqueSampleKey]||null),n}},{key:"sortBy",value:function(t,n){var r=e.getData(t,n);return r||null}},{key:"filter",value:function(t,n,r){var o=e.getData(t,r);return null!==o&&o.toUpperCase().indexOf(n)>-1}},{key:"isVisible",value:function(t,n){if(!t||!n)return!1;var r={};return t.forEach(function(t){var o=e.getData(t,n);o&&(r[o]=t[0].sampleId)}),c.keys(r).length>1}},{key:"download",value:function(t,n){return e.getData(t,n)||""}},{key:"render",value:function(t,n){var r=e.getData(t,n);return r?l.createElement(h.default,{maxLength:30,text:r||"",tooltip:l.createElement("div",{style:{maxWidth:300}},r)}):l.createElement(f.default,{status:p.TableCellStatus.NA,naAlt:"Cancer type not available for this sample."})}}]),e}();t.default=m},function(e,t){},function(e,t,n){e.exports=n(4)(608)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.default=function(e,t,n,r){return(0,i.default)(e,t,n,r),{remove:function(){(0,s.default)(e,t,n,r)}}};var o=n(914),i=r(o),a=n(1035),s=r(a);e.exports=t.default},,,,function(e,t){e.exports=function e(t,n){"use strict";var r,o,i=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,a=/(^[ ]*|[ ]*$)/g,s=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,l=/^0x[0-9a-f]+$/i,u=/^0/,c=function(t){return e.insensitive&&(""+t).toLowerCase()||""+t},p=c(t).replace(a,"")||"",f=c(n).replace(a,"")||"",d=p.replace(i,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),h=f.replace(i,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),m=parseInt(p.match(l),16)||1!==d.length&&p.match(s)&&Date.parse(p),g=parseInt(f.match(l),16)||m&&f.match(s)&&Date.parse(f)||null;if(g){if(m<g)return-1;if(m>g)return 1}for(var v=0,y=Math.max(d.length,h.length);v<y;v++){if(r=!(d[v]||"").match(u)&&parseFloat(d[v])||d[v]||0,o=!(h[v]||"").match(u)&&parseFloat(h[v])||h[v]||0,isNaN(r)!==isNaN(o))return isNaN(r)?1:-1;if(typeof r!=typeof o&&(r+="",o+=""),r<o)return-1;if(r>o)return 1}return 0}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){e.querySelector(".rc-tooltip-arrow").style.left="10px"}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.placeArrow=s;var u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),p=n(50),f=r(p),d=n(791),h=r(d),m=n(831),g=r(m),v=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n}return a(t,e),l(t,null,[{key:"sortValue",value:function(e,t){var n=0;return e&&(n+=1),t&&(n+=.5),n}},{key:"hotspotInfo",value:function(e,n){return c.createElement("span",{className:g.default["hotspot-info"]},t.title(e,n),c.createElement("br",null),t.publication(e,n),c.createElement("br",null),c.createElement("br",null),t.link(e,n))}},{key:"title",value:function(e,t){var n=e?c.createElement("b",null,"Recurrent Hotspot"):"",r=e&&t?"and":"",o=t?c.createElement("b",null,"3D Clustered Hotspot"):"";return c.createElement("span",null,n," ",r," ",o)}},{key:"publication",value:function(e,t){var n=e?"a recurrent hotspot (statistically significant)":"",r=e&&t?"and":"",o=t?"a 3D clustered hotspot":"",i=e?c.createElement("a",{href:"http://www.ncbi.nlm.nih.gov/pubmed/26619011",target:"_blank"},"Chang et al., Nat Biotechnol, 2016"):"",a=t?c.createElement("a",{href:"http://genomemedicine.biomedcentral.com/articles/10.1186/s13073-016-0393-x",target:"_blank"},"Gao et al., Genome Medicine, 2017"):"";return c.createElement("span",null,"This mutated amino acid was identified as ",n," ",r," ",o," in a population-scale cohort of tumor samples of various cancer types using methodology based in part on ",i," ",r," ",a,".")}},{key:"link",value:function(e,t){var n=e?c.createElement("a",{href:"http://cancerhotspots.org/",target:"_blank"},"http://cancerhotspots.org/"):"",r=e&&t?"and":"",o=t?c.createElement("a",{href:"http://3dhotspots.org/",target:"_blank"},"http://3dhotspots.org/"):"";return c.createElement("span",null,"Explore all mutations at ",n," ",r," ",o,".")}}]),l(t,[{key:"render",value:function(){var e=this.props,r=e.isHotspot,o=e.is3dHotspot,i=c.createElement("span",{className:""+h.default["annotation-item"]});if(r||o){var a=14,l=n(832);r||(l=n(833),a=18);var u=c.createElement("div",{className:"rc-tooltip-arrow-inner"}),p=t.hotspotInfo(r,o);i=c.createElement(f.default,{overlay:p,placement:"topLeft",trigger:["hover","focus"],arrowContent:u,onPopupAlign:s},c.createElement("span",{className:h.default["annotation-item"]+" chang_hotspot"},c.createElement("img",{width:14,height:a,src:l,alt:"Recurrent Hotspot Symbol"})))}return i}}]),t}(c.Component);t.default=v},function(e,t){e.exports={portalWidth:"cancerHotspots-module__portalWidth__2IjLk","hotspot-info":"cancerHotspots-module__hotspot-info__1GI2v"}},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0ZWQgYnkgSWNvTW9vbi5pbyAtLT4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIxMDI0IiBoZWlnaHQ9IjEwMjQiIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiPgogICAgPGcgaWQ9Imljb21vb24taWdub3JlIj4KICAgIDwvZz4KICAgIDxwYXRoIGZpbGw9IiNmZjk5MDAiIGQ9Ik0zMjEuMDA4IDEwNDUuMzMzYy02OC4yNDUtMTQyLjAwOC0zMS45MDEtMjIzLjM3OSAyMC41NTEtMzAwLjA0NCA1Ny40NC04My45NTYgNzIuMjQ0LTE2Ny4wNjUgNzIuMjQ0LTE2Ny4wNjVzNDUuMTUzIDU4LjcgMjcuMDkyIDE1MC41MDhjNzkuNzcyLTg4LjggOTQuODI0LTIzMC4yOCA4Mi43ODMtMjg0LjQ2NCAxODAuMzE1IDEyNi4wMTIgMjU3LjM3NiAzOTguODU2IDE1My41MjMgNjAxLjA2NSA1NTIuMzcyLTMxMi41MzIgMTM3LjM5OS03ODAuMTcyIDY1LjE1NS04MzIuODUxIDI0LjA4MSA1Mi42NzYgMjguNjQ4IDE0MS44NTEtMjAgMTg1LjEyNy04Mi4zNTItMzEyLjI3Ni0yODUuOTcyLTM3Ni4yNzYtMjg1Ljk3Mi0zNzYuMjc2IDI0LjA4MyAxNjEuMDQ0LTg3LjI5NiAzMzcuMTQ0LTE5NC42OTYgNDY4LjczMS0zLjc3NS02NC4yMTYtNy43ODMtMTA4LjUyOC00MS41NDktMTY5Ljk4LTcuNTggMTE2LjY1Ni05Ni43MzIgMjExLjc0OC0xMjAuODczIDMyOC42MjgtMzIuNzAxIDE1OC4yODcgMjQuNDk2IDI3NC4xOCAyNDEuNzQ4IDM5Ni42MjN6Ij48L3BhdGg+Cjwvc3ZnPgo="},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE2LjAuNCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHdpZHRoPSIyNC4yNjNweCIgaGVpZ2h0PSIzNi4zNjZweCIgdmlld0JveD0iMCAwIDI0LjI2MyAzNi4zNjYiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDI0LjI2MyAzNi4zNjYiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8Zz4KCTxwYXRoIGZpbGw9IiNGRjk5MDAiIGQ9Ik02LjgyOCwyNy45NDdjLTEuODU5LTMuODcyLTAuODY5LTYuMDk0LDAuNTY0LTguMTg0YzEuNTY1LTIuMjk2LDEuOTY4LTQuNTU4LDEuOTY4LTQuNTU4CgkJczEuMjMxLDEuNiwwLjc0Miw0LjEwNGMyLjE4MS0yLjQyMywyLjU5MS02LjI4NiwyLjI1Ni03Ljc2NGM0LjkyMSwzLjQzNiw3LjAyNywxMC44ODksNC4xOSwxNi40MDEKCQlDMzEuNjI3LDE5LjQxOSwyMC4zLDYuNjYsMTguMzI2LDUuMjIxYzAuNjU2LDEuNDM5LDAuNzgzLDMuODczLTAuNTQ2LDUuMDUzQzE1LjUzNiwxLjc1LDkuOTgsMCw5Ljk4LDAKCQljMC42NTcsNC4zOTctMi4zODgsOS4yMDgtNS4zMTYsMTIuOEM0LjU2LDExLjA0Niw0LjQ1MSw5LjgzMSwzLjUzLDguMTU1Yy0wLjIwMSwzLjE4My0yLjYzNiw1Ljc4NS0zLjI5OCw4Ljk3NAoJCUMtMC42NTksMjEuNDQ1LDAuOSwyNC42MSw2LjgyOCwyNy45NDdMNi44MjgsMjcuOTQ3eiIvPgoJPHRleHQgdHJhbnNmb3JtPSJtYXRyaXgoMC41ODMgMCAwIDAuNTgzIDMuNzMyNCAzNi4xOTYzKSIgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IidBcmlhbC1Cb2xkSXRhbGljTVQnIiBmb250LXNpemU9IjIwLjY4MDIiPjNEPC90ZXh0Pgo8L2c+Cjwvc3ZnPgo="},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){e.querySelector(".rc-tooltip-arrow").style.left="10px"}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.placeArrow=l;var c=n(1),p=o(c),f=n(3),d=o(f),h=n(50),m=r(h),g=n(791),v=r(g),y=n(835),b=r(y),w=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n}return s(t,e),u(t,null,[{key:"sortValue",value:function(e){return e.length>0?1:0}},{key:"download",value:function(e){return e.length>0?"present":"not present"}},{key:"myCancerGenomeLinks",value:function(e){var t=[];return d.each(e,function(e,n){t.push(p.createElement("li",{key:n,dangerouslySetInnerHTML:{__html:e}}))}),p.createElement("span",null,p.createElement("b",null,"My Cancer Genome links:"),p.createElement("br",null),p.createElement("ul",{className:b.default["link-list"]},t))}}]),u(t,[{key:"render",value:function(){var e=p.createElement("span",{className:""+v.default["annotation-item"]});if(this.props.linksHTML.length>0){var r=p.createElement("div",{className:"rc-tooltip-arrow-inner"}),o=t.myCancerGenomeLinks(this.props.linksHTML);e=p.createElement(m.default,{overlay:o,placement:"topLeft",trigger:["hover","focus"],arrowContent:r,onPopupAlign:l},p.createElement("span",{className:v.default["annotation-item"]+" mcg"},p.createElement("img",{width:"14",height:"14",src:n(836),alt:"My Cancer Genome Symbol"})))}return e}}]),t}(p.Component);t.default=w},function(e,t){e.exports={portalWidth:"myCancerGenome-module__portalWidth__m3pyZ","link-list":"myCancerGenome-module__link-list__2ZNFI"}},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIsAAACACAYAAAA73po8AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAADvNJREFUeNrsXT1y4koXPaacj94KPnkFIwfEI0eEg1dgWIFNkVJFu4qUwrMCMyswExIZxwTWrMB6Kxi9FfAFuhq3Zf20Wt2tFuJWuZ7rDZaa1tG95/722eFwQCJnZ2fogvSn2yEAj/tfm/1yEGi4jwvAB+AC+EL3fKF/3gEI9stB1IY9OxwOOOsSWPrTrQfgiR5eWnYAJipA059uRwBuU4DMkzWAn/vlYHcCi13a5Engo+P9crCWuL4D4I5A4kgscU1gjU5gaV6jPFd4iMKAIVMzBzBSsNQQwLUOk3gCizhYnok7iEoE4KroofWnW59A4itebum9T2DRBxSftIrMW37JmwUyNUMCiatx2RGAC5tM0uFwwHkHnJ+55N+5AFb96XZCAPmmyNSIiEP86sqmjbRCsxD5/M65mem3LKCff8nd3Ale1wXwJrmsgDykkSRhVSHX++Vgc9Is8cNMvAe35C3zeW7Qn24TMxFS3CIEEGaA6FbQ3IR5YOxPty+CXpQurbjptGYh7+RRMA4ha/MTbfRfKpbyFyT75SAUXO+K3OIm5NIGstsIwZVwY6UBs18O/lG47leN4C6Mv+yXg7ENYOlZHu+otcmq+QNpLNMytMUM9QwCJWH4psjiD5UXI5M1aeAZOeQAdAcsBmITvGxE+UhFwKw1aCwRuekMWMiFNUkQf2q89oSIs1FTRJq5E5rl1uB3CnXGJiiqOm6Avwy7AhaTX/SH7huQK2vaQ7k9erCQB+Qa/E5GOAVpL5OA8cicH7VmMQoUk8k3IrxXBk3S7bGDxTP4fe5NbyClBi4Nkd5RV1xnE1olbOLG++Ug3C8HlwRWnVrGoZLNowXLNwP3iNBMwCwNGkZaRidvmjf1/bTnhiSq1GTEmlQ+971d4hgjqI9aj/fLwZoKu5Da3x0qJElFxUgisT/dvmkmuQ/75WACi4VMxzcKIcgAJyJOFCIuo/gqEI7YQVG3gkmwHDTzlDFaJBRKSMIJXzPA88KBI8p72BVeQqluBeNgoRD1nxNQtIDOh3htce2aGBMlCt4JKFpddlGepoQUt9F1vu86UHgTI+iqD9sAFpVeUIi4n4bZ9sQYW3iMLTzT9+WSmqJcqROa5YHs7s7S9b0CeGVs8dgAYDa0P2Xi2A6WugG5HeJmK2t7gBlb8A9hxNhi1IRpRnm6obYLrdsb+iOB6IiI231T4XsJwKS/5yVjs8DkGkrqm2sXr2vtG6LFO4LgCOjnxbZIrKBs8DHJ94g47G/SHAX96XaM7B4nJXt6rgkoLsfAd5wa/A/vTV1hWzSHgPxKgcVjbHHH2OzBMGA2BJg0d1JSZlrbDJEGuUEcU+G1SadiIRmmKGRsdtHEWvrT7SMH3nC/HNReR62gXH+69Snk/Iq4GNtPbdZLx2Ie6XJOl7GF28RC6CVdc+RXifQkgTIiMuWW2PEuyQM+B8jcphZDgNngY8uuWbBQw1NZPGHTlsF66szQLEJcYrkh0EQw3zKSFg/Ak6o2ksqcRTDbqSTTeZJavMXHe6IxQBz9ln6BK7vOgpX60TGbIOIhiacXMDbbWbrU25SGeetPt7XGj1U1QyLq7NhN0Ir7eWZs8cbYYmiZVuEBzT+7V5qJY47gVvQKjk1+Z5DYJ8YWzFKt8gns/en2WYbHVAVLmcYIbBzLqcHryfqO86Zc5ZRWcVDeMuKTWfK1gYWAEHVYq6S9nipvtCkZCdIFB8AzTbXSZobyABF2xQNibBYxNrtGXEsSpoikzSYoS+760+2rSGusDFgecrTLPTomjM3WiBOGY9DBDQ2boCHkAoEekd9C8yWVG8qYg68k/3CS2mB5Qv0SysycnnRuiMoI1l3WKhYCxYGaWtsRJSLVuc6EvgDA7hSttUJ8hdcaZcVj6sZZ7nHE2eW4JsV8IbakqF7nKk1664JlDuBWReW4pXKDuBD7tQWg+arhmh/MkXSlXH+6ZRyaHynvELVQe3jkbvrkSQQA7hmbbRDPvk2GJa9g2cELKXF0mLb+dOsmFY3nkkDx8LHLzSMUXtd8cAzAF8ZmE4HPOogDUN9oo14Ym7EK93JozcMMdf4E4IyxWcjY4oKA8m/HzFAit6BxJjIlCg69bVn+/GS/HDzUAEsynmPN2Gxc8Lm8Wfr/UIRVBCjPRRvM2KxVhy9pHEAQ7JeDS1nXuahCblWTvyQPelTSsHVX8+3ySj67OTlXn/e0VxG9Iid5PNeozOJTCTINW6rcxx+MLVzyhpyuoyXxinoV/uAOYgPwHEiez0OFRAGvqSpmcv+XY3ZcxhZ+6j4h95Ed4iDjGMAF/XtEfMhvyTMNNV7bFSa4FN5fVXnD+9Mtk2xin+C9HNDhCVZqY9y8L5UhrwAcxhaTpJenrE2DuM91ixRACM0F4j0BoHgoL9DOjMHI8Bd6q3clPOSnYY+gDaItbJEMJOgJeD51jn1ZSf7dhPvyLxmAYsjO8Oat8xLAlekOQcPyWzcIyzRLWW+QiDmqbPOpqfwCcToh7wFnHhbFcxPueqHFhdXKXFxN1/27b+c1PR8RuYFEoxNxBlbw7yFji2vIndl8jKLrZfiV/JIZlMuoV6kr/+hKBZB7/ciB6KyraNFwjuPfUR1FQbmV4u8x1LVBVK2WzFZ7QLdF9aFcH+qUPmkWKq1TPe5qs18OrnES3ZrFhfyh5584EJ1HgCLN8l3D9/Db/BAYW6wYWzzb1kyW4eKGirhLhIwYU5Zm0ZWQurSxp4ixRdK7vcP7uPOIfvfwOYp7JeNZccnPCHGidKJJu/gKSP9VetjjJ80i4+ZWENdyBeIjTmfMibM90e/pPbmVAIqH9+SnA+BO12RLesh1tMs4bypo2gw5Gh+GZylIqpJCGVOU5QmOsmJCBC6HsQWrkcSU1VrronrqXkseqE55QLWAloQJmoU595gXvFhz2fAFmfuqgNmVjXUzOTT5m41Ioe7CpFEsrGpOqYzhQATYr6jB/JKsul9yzSLAPEC8LieAQNL0POOtmXdQuyTxmjU9nHmBB+cytrijvRpyHManh7sBMM6o2NsgO341RHF86LYGBxkTuL0SEzkWCZr2BGxr10CzY2x2hbg4O888rRCXPcwzeN4wi9eQKcqSm6w11ORIiXaJUH4YhPCAn16Gres8YLgHJmL3A8QFU2fcTx5JzAKMl0NkN5yp82sApoi/VDrprFe0SMUSthAz3wWAclWgNUTJcZaZ+KXQnV7j8yGfm6rF9ec5RGykYeP/tV+bfHiD+dhIEVCqaOJ70b1lbLZmbDGHovjUfjkYc0fuJeapkvQ0BHVaqVkolP/M/awUAyXhLQ8518uSawA7hbU411UIrajrLHpCVhUJLFcsnsBnItIOlYHCAWbCmYQwx3NKPhsQ2VZljkK8pzUqS26TmeLsc+0jTAxolqLzpzcAfhUQ11YIlzcKUHEubuEcXDpkGooAs2vBXkap3zeI6383slrEQplzWrRyu/F5GYsmwKxQL2/0swUbOUFc9BwhzgofVQiBLAWvOYf96fauikck1OvMtYN4Euu0YoQYNy3h9zGCQQAsWWP0I8THCpbuhXCv8345SKqmHiTWacu40yG5rSsAb5YNOTbBVbJccKdKmKTqHNwJclowCniALaQwTG3SnJJ/TgfwUpTvu9ECFgLMBnHTlghptWmOf9Z6fajtYrBRq3goLmv1tIEl8df3y8EVyqdUWjPFkgJimYChksdjFWVTv2vVs1Dj+1WOWdpZeGBmnld2VydZZ7FWcaCwDad28ROlBy7wOUJr3WxcCqrlAfjxCPnLUCDkERoDCwEmIg2z5tzlnaUbmJdAc1GcOGyjiJBX4RiY8hPjqUf6xeZBylTptsrx3i6OIQYj2HD2oZGsSGod1VsgL4hn4zr2gmX2kOPSOzieovUyDrZBxVGtOsBySxv+bDlgxnjPrgcEnqsjGs3xvSCEcL1fDq6rhjWUmqGMbrhOnRpvielxSUPO6UV44UASyMa9Kp++KkGoRv3pNqLIbxPcxCHSGra9vIB7GXlTmbTXeBlej/IxJ6o1y58cV62Rc55TRLZwELPFmmJIJsWv8KfCxLWKZulpQH1mDKOhwyD4GMKIwNMKDUIHTb0R2P2Klwh0rEslwXVL/v2pAcK7w8fo8nfbNUl/uk1qgIc1LvW77WBxoX5IUJnHE+Fja4trMVAYaRJfweWs1ywiCxzSvDqTYvWRfKRNku5GVRIdA1gS/mLMHFG2eZ3BYWzxblQPDYSuoUk9hQsMIVbj4pg2R3gfwhxYBJQRcRMHLRHVrrNXYQOuRJONpImSty+UKX2ID3uYhRYBRdcLs6NaI6VyOBy0JBI9xNVnZWTyQyF3KuD0Be+BJq/ALgeII5QBVfC1wS0eQm91XnvAwmmCEbKDSSH340BdcU7i+fyyFTgVNa+saEmxaAOLBeo4BHBvW5mEhgnYmd6f5NE9pWDpNbl59DB18AiXvK63Blz1ojiKZ+BWka4L9yzYR51xEBdx5Pg5faC16VgKzI1fC44ZLBvonzblA3htUMscxZy+RjkL9+Y9Qs8AoSwxmgEnsv/HoGnX8hAb5yycmGxxfSRibUpM3ivQeXErwELh6fBIAXNr8Hvtjh4sJKbHcmivsSGOZJJY/+gKWNYN3FN3jc2Nyf3T3QFqDVjoiwaGb+tCU46GK4k0IREMlGLYpFlME91Ehv3p9q7lxHZioq/cNrBsGrrvSgN/MUVs16ZCAVaBhVoX1g3dXllRFnlajoE135vsyzqHffLLsApPxENcST8uAIFPvyb//ZoDijDFIb5BbWtsiIITx3SJFRHcjIfyhuaKq8c0pdMnUHylh1xlPRd5HILMnUvXrHrtEA1l0xsvUSiJTzQxvisk3lSH8EoVH3FDAt2Uxnohb2fX5IGk1oKFNu/JkOuZAORn8jD60+2qBmDGNo8bOVawOIiryjxNt9gRQNY595cpVLJi5q8usPRsXRw3TUq16l0jLha/KtEAVUa4/tUqOGKxVrOkNMwT6nXqJS75jyrBq4o1sw9NTYvovBnKiV1UPawpcWGl5/EKdisc/RyaVoElBZqkayAvxrGDwip/0m53iBODPGgCcmU3OHJpJVgyHiJPQgPdE7256UqBRdPDzYPlJCcpkv8PAHSv/QtFBkyYAAAAAElFTkSuQmCC"},function(e,t){e.exports={portalWidth:"oncogenicIcon-module__portalWidth__3lDXV","oncogenic-icon-image":"oncogenicIcon-module__oncogenic-icon-image__3ptbU",level1:"oncogenicIcon-module__level1__2I59M",oncogenic:"oncogenicIcon-module__oncogenic__1PXxv",level2A:"oncogenicIcon-module__level2A__2fiNZ",level2B:"oncogenicIcon-module__level2B__2Q7_L",level3A:"oncogenicIcon-module__level3A__1you4",level3B:"oncogenicIcon-module__level3B__2B8Jp",level4:"oncogenicIcon-module__level4__2XZHD",levelR1:"oncogenicIcon-module__levelR1__3_5T8",levelR2:"oncogenicIcon-module__levelR2__3Qirw",levelR3:"oncogenicIcon-module__levelR3__2H4x5",level1R:"oncogenicIcon-module__level1R__30RSu",level2AR:"oncogenicIcon-module__level2AR__2oYQp",level2BR:"oncogenicIcon-module__level2BR__2yX9i",level3AR:"oncogenicIcon-module__level3AR__3KUvC",level3BR:"oncogenicIcon-module__level3BR__3Gitf",level4R:"oncogenicIcon-module__level4R__CLk5P","likely-neutral":"oncogenicIcon-module__likely-neutral__32Yau","unknown-oncogenic":"oncogenicIcon-module__unknown-oncogenic__Fb5Ww","no-info-oncogenic":"oncogenicIcon-module__no-info-oncogenic__3eAEd",vus:"oncogenicIcon-module__vus__3nQPW"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),p=n(839),f=r(p),d=n(10),h=n(119),m=n(790),g=r(m),v=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},y=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"render",value:function(){var e=c.createElement("span",null),t=this.evidenceCacheData;if(this.props.geneNotExist&&(e=c.createElement(f.default,{geneNotExist:!0,pmidData:{},handleFeedbackOpen:this.props.handleFeedbackOpen})),!t||!this.props.indicator)return e;if("complete"===t.status&&t.data&&!this.props.geneNotExist){var n=t.data,r=this.pmidData;e=c.createElement(f.default,{geneNotExist:this.props.geneNotExist,title:this.props.indicator.query.hugoSymbol+" "+this.props.indicator.query.alteration+" in "+this.props.indicator.query.tumorType,gene:this.props.indicator.geneExist?this.props.indicator.query.hugoSymbol:"",oncogenicity:this.props.indicator.oncogenic,oncogenicityPmids:(0,h.generateOncogenicCitations)(n.oncogenicRefs),mutationEffect:n.mutationEffect.knownEffect,mutationEffectPmids:(0,h.generateMutationEffectCitations)(n.mutationEffect.refs),geneSummary:this.props.indicator.geneSummary,variantSummary:this.props.indicator.variantSummary,tumorTypeSummary:this.props.indicator.tumorTypeSummary,biologicalSummary:n.mutationEffect.description,treatments:(0,h.generateTreatments)(n.treatments),pmidData:r,handleFeedbackOpen:this.props.handleFeedbackOpen})}else"pending"===t.status?e=c.createElement(g.default,{status:m.TableCellStatus.LOADING}):"error"===t.status&&(e=c.createElement(g.default,{status:m.TableCellStatus.ERROR}));return e}},{key:"componentDidUpdate",value:function(){this.evidenceCacheData&&"complete"===this.evidenceCacheData.status&&this.evidenceCacheData.data&&this.props.onLoadComplete&&this.props.onLoadComplete()}},{key:"evidenceCacheData",get:function(){var e=void 0;if(!this.props.geneNotExist&&this.props.evidenceCache&&this.props.evidenceQuery){var t=this.props.evidenceCache.getData([this.props.evidenceQuery.id],[this.props.evidenceQuery]);t&&(e=t[this.props.evidenceQuery.id])}return e}},{key:"pmidData",get:function(){if(this.props.pubMedCache&&this.evidenceCacheData){var e=(0,h.extractPmids)(this.evidenceCacheData.data),t=!0,n=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;this.props.pubMedCache.get(a)}}catch(e){n=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw r}}}return this.props.pubMedCache&&this.props.pubMedCache.cache||{}}}]),t}(c.Component);y=v([d.observer],y),t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=o(u),p=n(3),f=o(p),d=n(802),h=r(d),m=n(85),g=n(50),v=r(g),y=n(119);n(853),n(854);var b=function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={activeTab:"oncogenicity",levelsCollapsed:!0},e.handleOncogenicityTabSelect=e.handleOncogenicityTabSelect.bind(e),e.handleMutationEffectTabSelect=e.handleMutationEffectTabSelect.bind(e),e.handleLevelCollapse=e.handleLevelCollapse.bind(e),e}return s(t,e),l(t,null,[{key:"LEVELS",get:function(){return["1","2A","2B","3A","3B","4","R1"]}},{key:"LEVEL_ICON_STYLE",get:function(){return{backgroundImage:"url("+n(855)+")"}}},{key:"LEVEL_DESC",get:function(){return{1:c.createElement("span",null,c.createElement("b",null,"FDA-recognized")," biomarker predictive of response to an ",c.createElement("b",null,"FDA-approved")," drug ",c.createElement("b",null,"in this indication")),"2A":c.createElement("span",null,c.createElement("b",null,"Standard care")," biomarker predictive of response to an ",c.createElement("b",null,"FDA-approved")," drug ",c.createElement("b",null,"in this indication")),"2B":c.createElement("span",null,c.createElement("b",null,"Standard care")," biomarker predictive of response to an ",c.createElement("b",null,"FDA-approved")," drug ",c.createElement("b",null,"in another indication"),", but not standard care for this indication"),"3A":c.createElement("span",null,c.createElement("b",null,"Compelling clinical evidence")," supports the biomarker as being predictive of response to a drug ",c.createElement("b",null,"in this indication"),", but neither biomarker and drug are standard care"),"3B":c.createElement("span",null,c.createElement("b",null,"Compelling clinical evidence")," supports the biomarker as being predictive of response to a drug ",c.createElement("b",null,"in another indication"),", but neither biomarker and drug are standard care"),4:c.createElement("span",null,c.createElement("b",null,"Compelling biological evidence")," supports the biomarker as being predictive of response to a drug, but neither biomarker and drug are standard care"),R1:c.createElement("span",null,c.createElement("b",null,"Standard care")," biomarker predictive of ",c.createElement("b",null,"resistance")," to an ",c.createElement("b",null,"FDA-approved")," drug ",c.createElement("b",null,"in this indication"))}}}]),l(t,[{key:"treatmentRow",value:function(e,n,r,o,i,a,s,l,u){var p=this,f=function(){return c.createElement("div",{style:{maxWidth:"200px"}},r)},d=u.length>0||l.length>0?function(){return c.createElement("div",{style:{maxWidth:"400px",maxHeight:"200px",overflowY:"auto"}},c.createElement("ul",{className:"list-group",style:{marginBottom:0}},p.abstractList(u),p.pmidList(l,s)))}:c.createElement("span",null);return c.createElement("tr",{key:e},c.createElement("td",{key:"level"},c.createElement(v.default,{overlay:f,placement:"left",trigger:["hover","focus"],destroyTooltipOnHide:!0},c.createElement("i",{className:"level-icon level-"+n,style:t.LEVEL_ICON_STYLE}))),c.createElement("td",{key:"alterations"},(0,y.mergeAlterations)(o)),c.createElement("td",{key:"treatment"},i),c.createElement("td",{key:"cancerType"},a),c.createElement("td",{key:"citations"},c.createElement(m.If,{condition:u.length>0||l.length>0},c.createElement(v.default,{overlay:d,placement:"right",trigger:["hover","focus"],destroyTooltipOnHide:!0},c.createElement("i",{className:"fa fa-book"})))))}},{key:"levelListItem",value:function(e,n){return c.createElement("li",{key:e},c.createElement("i",{className:"level-icon level-"+e,style:t.LEVEL_ICON_STYLE}),n)}},{key:"pmidList",value:function(e,t){var n=this,r=[];return t&&e.forEach(function(e){var o=t[e.toString()],i=o?o.data:null;i&&r.push(n.pmidItem(i.title,f.isArray(i.authors)&&i.authors.length>0?i.authors[0].name+" et al.":"Unknown",i.source,new Date(i.pubdate).getFullYear().toString(),i.uid))}),r}},{key:"pmidItem",value:function(e,t,n,r,o){return c.createElement("li",{key:o,className:"list-group-item",style:{width:"100%"}},c.createElement("a",{href:"http://www.ncbi.nlm.nih.gov/pubmed/"+o,target:"_blank"},c.createElement("b",null,e)),c.createElement("br",null),c.createElement("div",{style:{width:"100%"}},t," ",n,". ",r," ",c.createElement("span",{style:{float:"right"}},"PMID: ",o)))}},{key:"abstractList",value:function(e){var t=this,n=[];return e.forEach(function(e,r){n.push(t.abstractItem(r,e.abstract,e.link))}),n}},{key:"abstractItem",value:function(e,t,n){var r=c.createElement("b",null,t);return n&&(r=c.createElement("a",{href:n,target:"_blank"},r)),c.createElement("li",{key:"abstract_"+e,className:"list-group-item",style:{width:"100%"}},r)}},{key:"generateLevelRows",value:function(e,t){var n=this,r=[];return e.forEach(function(e){r.push(n.levelListItem(e,t[e]))}),r}},{key:"generateTreatmentRows",value:function(e,t,n){var r=this,o=[];return e.forEach(function(e,i){o.push(r.treatmentRow(i,e.level,t[e.level],e.variant,e.treatment,e.cancerType,n,e.pmids,e.abstracts))}),o}},{key:"render",value:function(){return c.createElement("div",{className:"oncokb-card","data-test":"oncokb-card"},c.createElement("div",{className:"z-depth-2"},!this.props.geneNotExist&&c.createElement("span",null,c.createElement("div",{className:"item tabs-wrapper"},c.createElement("div",{className:"col s12 tip-header"},this.props.title),c.createElement("div",{className:"col s12"},c.createElement("ul",{className:"tabs"},c.createElement("li",{key:"oncogenicity",className:"tab col s6 enable-hover"},c.createElement("a",{className:"oncogenicity",onClick:this.handleOncogenicityTabSelect},c.createElement("span",{className:"title"},"clinical implications"),c.createElement("span",{className:"title-content"},this.props.oncogenicity||"Unknown"))),c.createElement("li",{key:"mutationEffect",className:"tab col s6 enable-hover"},c.createElement("a",{className:"mutation-effect",onClick:this.handleMutationEffectTabSelect},c.createElement("span",{className:"title"},"Biological Effect"),c.createElement("span",{className:"title-content"},this.props.mutationEffect||"Unknown"))),c.createElement("div",{className:"indicator"}))),c.createElement(m.If,{condition:"oncogenicity"===this.state.activeTab},c.createElement("div",{className:"col s12 oncogenicity"},c.createElement("div",{className:"summary",style:{padding:"10px 0"}},c.createElement("p",null,this.props.geneSummary),c.createElement("p",null,this.insertLink(this.props.variantSummary,{keyword:"Chang et al. 2016",link:"https://www.ncbi.nlm.nih.gov/pubmed/26619011"})),c.createElement("p",null,this.props.tumorTypeSummary)),c.createElement(m.If,{condition:this.props.treatments.length>0},c.createElement("div",{className:"treatments-wrapper"},c.createElement("table",{className:"table",style:{marginTop:6}},c.createElement("thead",null,c.createElement("tr",null,c.createElement("th",{key:"level",scope:"col"},"Level"),c.createElement("th",{key:"alterations",scope:"col"},"Alteration(s)"),c.createElement("th",{key:"drugs",scope:"col"},"Drug(s)"),c.createElement("th",{key:"cancerTypes",scope:"col"},"Level-associated",c.createElement("br",null),"cancer type(s)"),c.createElement("th",{key:"citations",scope:"col"},"Citation(s)"))),c.createElement("tbody",null,this.generateTreatmentRows(this.props.treatments,t.LEVEL_DESC,this.props.pmidData))))))),c.createElement(m.If,{condition:"mutationEffect"===this.state.activeTab},c.createElement("div",{className:"col s12 tab-pane mutation-effect"},c.createElement(m.If,{condition:void 0!==this.props.biologicalSummary&&this.props.biologicalSummary.length>0},c.createElement(m.Then,null,c.createElement("div",null,this.summaryWithRefs(this.props.biologicalSummary,"tooltip"))),c.createElement(m.Else,null,c.createElement(m.If,{condition:this.props.mutationEffectPmids.length>0},c.createElement(m.Then,null,c.createElement("div",{className:"refs"},c.createElement("ul",{className:"list-group",style:{marginBottom:0}},this.pmidList(this.props.mutationEffectPmids,this.props.pmidData)))),c.createElement(m.Else,null,c.createElement("span",null,"Mutation effect information is not available.")))))))),c.createElement("div",{className:"item disclaimer"},c.createElement("span",null,"The information above is intended for research purposes only and should not be used as a substitute for professional diagnosis and treatment.")),c.createElement("div",{className:"item-list levels-wrapper"},c.createElement("div",{className:"collapsible-header",onClick:this.handleLevelCollapse},"Levels",c.createElement("span",{className:"secondary-content"},c.createElement(m.If,{condition:this.state.levelsCollapsed},c.createElement("i",{className:"fa fa-chevron-down"})),c.createElement(m.If,{condition:!this.state.levelsCollapsed},c.createElement("i",{className:"fa fa-chevron-up"})))),c.createElement(h.default,{isOpened:!this.state.levelsCollapsed},c.createElement("div",{className:"levels oncokb-card-levels-collapse"},c.createElement("ul",null,this.generateLevelRows(t.LEVELS,t.LEVEL_DESC)))))),this.props.geneNotExist&&c.createElement("div",{className:"additional-info"},"There is currently no information about this gene in OncoKB."),c.createElement("div",{className:"item footer"},c.createElement("a",{href:"http://oncokb.org/#/gene/"+this.props.gene,target:"_blank"},c.createElement("img",{src:n(856),className:"oncokb-logo",alt:"OncoKB"})),c.createElement("span",{className:"pull-right feedback"},c.createElement("button",{className:"btn btn-default btn-sm",onClick:this.props.handleFeedbackOpen},"Feedback")))))}},{key:"handleOncogenicityTabSelect",value:function(){this.handleTabSelect("oncogenicity")}},{key:"handleMutationEffectTabSelect",value:function(){this.handleTabSelect("mutationEffect")}},{key:"handleTabSelect",value:function(e){this.setState({activeTab:e})}},{key:"handleLevelCollapse",value:function(){this.setState({levelsCollapsed:!this.state.levelsCollapsed})}},{key:"insertLink",value:function(e,t){if(!e)return e;var n=[],r=e.split(t.keyword);n.push(r[0]);for(var o=c.createElement("a",{href:t.link,target:t.target||"_blank"},t.keyword),i=1;i<r.length;i++)n.push(o),n.push(r[i]);return n}},{key:"refComponent",value:function(e,t){var n=this,r=e.split(/pmid|nct/i);if(r.length<2)return null;var o=r[1].match(/[0-9]+/g);if(!o)return null;var i=void 0,a=void 0;e.toLowerCase().indexOf("pmid")>=0?(i="http://www.ncbi.nlm.nih.gov/pubmed/",a="PMID: "):e.toLowerCase().indexOf("nct")>=0&&(i="http://www.ncbi.nlm.nih.gov/pubmed/",a="NCT");var s=void 0;if(i&&a&&(s=c.createElement("a",{target:"_blank",href:""+i+o.join(",")},""+a+o.join(","))),"tooltip"===t){var l=function(){return c.createElement("div",{style:{maxWidth:"400px",maxHeight:"200px",overflowY:"auto"}},c.createElement("ul",{className:"list-group",style:{marginBottom:0}},n.pmidList(o.map(function(e){return parseInt(e)}),n.props.pmidData)))};return c.createElement("span",null,r[0],c.createElement(v.default,{overlay:l,placement:"right",trigger:["hover","focus"],destroyTooltipOnHide:!0},c.createElement("i",{className:"fa fa-book",style:{color:"black"}})),")")}return s?c.createElement("span",null,r[0],s,")"):null}},{key:"summaryWithRefs",value:function(e,t){var n=this;if(!e)return e;var r=[],o=/(\(.*?[PMID|NCT].*?\))/i;return e.split(o).forEach(function(e){if(e.match(o)){var i=n.refComponent(e,t);i&&r.push(i)}else r.push(e)}),r}}]),t}(c.Component);t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),p=r(c),f=n(841),d=n(849),h=r(d),m=function(e){return Math.max(0,parseFloat(e)).toFixed(1)},g=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onHeightReady=function(e){var t=n.props,r=t.isOpened,o=t.onHeightReady;n.renderStatic&&r&&(n.height=m(e)),n.setState({height:r||!n.renderStatic?e:0});var i=r?e:0;n.state.height!==i&&o(i)},n.state={height:-1,isOpenedChanged:!1},n}return s(t,e),u(t,[{key:"componentWillMount",value:function(){this.height=m(0),this.renderStatic=!0}},{key:"componentWillReceiveProps",value:function(e){var t=e.isOpened;this.setState({isOpenedChanged:t!==this.props.isOpened})}},{key:"componentDidUpdate",value:function(e){if(e.isOpened!==this.props.isOpened){var t=this.props.isOpened?this.state.height:0;this.props.onHeightReady(t)}}},{key:"getMotionHeight",value:function(e){var t=this.props,n=t.isOpened,r=t.springConfig,o=t.fixedHeight,i=this.state.isOpenedChanged,a=n?Math.max(0,parseFloat(e)).toFixed(1):m(0),s=!i&&!n||this.height===a&&-1===o,u=(0,f.spring)(n?Math.max(0,e):0,l({precision:.5},r)),c=n?Math.max(0,e):0;return s?c:u}},{key:"renderFixed",value:function(){var e=this,t=this.props,n=(t.springConfig,t.onHeightReady,t.onRest,t.isOpened),r=t.style,i=t.children,a=t.fixedHeight,s=t.keepCollapsedContent,u=o(t,["springConfig","onHeightReady","onRest","isOpened","style","children","fixedHeight","keepCollapsedContent"]);if(this.renderStatic){this.renderStatic=!1;var c={overflow:"hidden",height:n?a:0};return s||n?(this.height=m(a),p.default.createElement("div",l({style:l({},c,r)},u),i)):null}return p.default.createElement(f.Motion,{defaultStyle:{height:n?0:a},style:{height:this.getMotionHeight(a)}},function(t){var o=t.height;if(e.height=m(o),!s&&!n&&e.height===m(0))return null;var a={overflow:"hidden",height:o};return p.default.createElement("div",l({style:l({},a,r)},u),i)})}},{key:"render",value:function(){var e=this,t=this.props,n=(t.springConfig,t.onHeightReady,t.isOpened),r=t.style,i=t.children,a=t.fixedHeight,s=t.keepCollapsedContent,u=t.onRest,c=o(t,["springConfig","onHeightReady","isOpened","style","children","fixedHeight","keepCollapsedContent","onRest"]);if(a>-1)return this.renderFixed();var d=this.renderStatic,g=this.state.height,v=parseFloat(g).toFixed(1);g>-1&&d&&(this.renderStatic=!1);var y=p.default.createElement(h.default,{onHeightReady:this.onHeightReady},i);if(d){var b=n?{height:"auto"}:{overflow:"hidden",height:0};return!n&&g>-1?s?p.default.createElement("div",l({style:l({height:0,overflow:"hidden"},r)},c),y):null:p.default.createElement(f.Motion,{defaultStyle:{height:Math.max(0,g)},style:{height:Math.max(0,g)},onRest:u},function(){return p.default.createElement("div",l({style:l({},b,r)},c),y)})}return p.default.createElement(f.Motion,{defaultStyle:{height:Math.max(0,g)},onRest:u,style:{height:this.getMotionHeight(g)}},function(t){if(e.height=m(t.height),!n&&"0.0"===e.height)return s?p.default.createElement("div",l({style:l({height:0,overflow:"hidden"},r)},c),y):null;var o=n&&e.height===v?{height:"auto"}:{height:t.height,overflow:"hidden"};return p.default.createElement("div",l({style:l({},o,r)},c),y)})}}]),t}(p.default.Component);g.defaultProps={fixedHeight:-1,style:{},keepCollapsedContent:!1,onHeightReady:function(){}},t.default=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e.default:e}t.__esModule=!0;var o=n(842);t.Motion=r(o);var i=n(844);t.StaggeredMotion=r(i);var a=n(845);t.TransitionMotion=r(a);var s=n(847);t.spring=r(s);var l=n(803);t.presets=r(l);var u=n(792);t.stripStyle=r(u);var c=n(848);t.reorderKeys=r(c)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(797),a=r(i),s=n(792),l=r(s),u=n(798),c=r(u),p=n(793),f=r(p),d=n(799),h=r(d),m=n(800),g=r(m),v=n(1),y=r(v),b=n(2),w=r(b),x=n(39),_=r(x),S=_.default({propTypes:{defaultStyle:w.default.objectOf(w.default.number),style:w.default.objectOf(w.default.oneOfType([w.default.number,w.default.object])).isRequired,children:w.default.func.isRequired,onRest:w.default.func},getInitialState:function(){var e=this.props,t=e.defaultStyle,n=e.style,r=t||l.default(n),o=a.default(r);return{currentStyle:r,currentVelocity:o,lastIdealStyle:r,lastIdealVelocity:o}},wasAnimating:!1,animationID:null,prevTime:0,accumulatedTime:0,unreadPropStyle:null,clearUnreadPropStyle:function(e){var t=!1,n=this.state,r=n.currentStyle,i=n.currentVelocity,a=n.lastIdealStyle,s=n.lastIdealVelocity;for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){var u=e[l];"number"==typeof u&&(t||(t=!0,r=o({},r),i=o({},i),a=o({},a),s=o({},s)),r[l]=u,i[l]=0,a[l]=u,s[l]=0)}t&&this.setState({currentStyle:r,currentVelocity:i,lastIdealStyle:a,lastIdealVelocity:s})},startAnimationIfNecessary:function(){var e=this;this.animationID=h.default(function(t){var n=e.props.style;if(g.default(e.state.currentStyle,n,e.state.currentVelocity))return e.wasAnimating&&e.props.onRest&&e.props.onRest(),e.animationID=null,e.wasAnimating=!1,void(e.accumulatedTime=0);e.wasAnimating=!0;var r=t||f.default(),o=r-e.prevTime;if(e.prevTime=r,e.accumulatedTime=e.accumulatedTime+o,e.accumulatedTime>1e3/60*10&&(e.accumulatedTime=0),0===e.accumulatedTime)return e.animationID=null,void e.startAnimationIfNecessary();var i=(e.accumulatedTime-Math.floor(e.accumulatedTime/(1e3/60))*(1e3/60))/(1e3/60),a=Math.floor(e.accumulatedTime/(1e3/60)),s={},l={},u={},p={};for(var d in n)if(Object.prototype.hasOwnProperty.call(n,d)){var h=n[d];if("number"==typeof h)u[d]=h,p[d]=0,s[d]=h,l[d]=0;else{for(var m=e.state.lastIdealStyle[d],v=e.state.lastIdealVelocity[d],y=0;y<a;y++){var b=c.default(1e3/60/1e3,m,v,h.val,h.stiffness,h.damping,h.precision);m=b[0],v=b[1]}var w=c.default(1e3/60/1e3,m,v,h.val,h.stiffness,h.damping,h.precision),x=w[0],_=w[1];u[d]=m+(x-m)*i,p[d]=v+(_-v)*i,s[d]=m,l[d]=v}}e.animationID=null,e.accumulatedTime-=a*(1e3/60),e.setState({currentStyle:u,currentVelocity:p,lastIdealStyle:s,lastIdealVelocity:l}),e.unreadPropStyle=null,e.startAnimationIfNecessary()})},componentDidMount:function(){this.prevTime=f.default(),this.startAnimationIfNecessary()},componentWillReceiveProps:function(e){null!=this.unreadPropStyle&&this.clearUnreadPropStyle(this.unreadPropStyle),this.unreadPropStyle=e.style,null==this.animationID&&(this.prevTime=f.default(),this.startAnimationIfNecessary())},componentWillUnmount:function(){null!=this.animationID&&(h.default.cancel(this.animationID),this.animationID=null)},render:function(){var e=this.props.children(this.state.currentStyle);return e&&y.default.Children.only(e)}});t.default=S,e.exports=t.default},function(e,t,n){e.exports=n(4)(545)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){for(var r=0;r<e.length;r++)if(!v.default(e[r],t[r],n[r]))return!1;return!0}t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(797),s=r(a),l=n(792),u=r(l),c=n(798),p=r(c),f=n(793),d=r(f),h=n(799),m=r(h),g=n(800),v=r(g),y=n(1),b=r(y),w=n(2),x=r(w),_=n(39),S=r(_),C=S.default({propTypes:{defaultStyles:x.default.arrayOf(x.default.objectOf(x.default.number)),styles:x.default.func.isRequired,children:x.default.func.isRequired},getInitialState:function(){var e=this.props,t=e.defaultStyles,n=e.styles,r=t||n().map(u.default),o=r.map(function(e){return s.default(e)});return{currentStyles:r,currentVelocities:o,lastIdealStyles:r,lastIdealVelocities:o}},animationID:null,prevTime:0,accumulatedTime:0,unreadPropStyles:null,clearUnreadPropStyle:function(e){for(var t=this.state,n=t.currentStyles,r=t.currentVelocities,o=t.lastIdealStyles,a=t.lastIdealVelocities,s=!1,l=0;l<e.length;l++){var u=e[l],c=!1;for(var p in u)if(Object.prototype.hasOwnProperty.call(u,p)){var f=u[p];"number"==typeof f&&(c||(c=!0,s=!0,n[l]=i({},n[l]),r[l]=i({},r[l]),o[l]=i({},o[l]),a[l]=i({},a[l])),n[l][p]=f,r[l][p]=0,o[l][p]=f,a[l][p]=0)}}s&&this.setState({currentStyles:n,currentVelocities:r,lastIdealStyles:o,lastIdealVelocities:a})},startAnimationIfNecessary:function(){var e=this;this.animationID=m.default(function(t){var n=e.props.styles(e.state.lastIdealStyles);if(o(e.state.currentStyles,n,e.state.currentVelocities))return e.animationID=null,void(e.accumulatedTime=0);var r=t||d.default(),i=r-e.prevTime;if(e.prevTime=r,e.accumulatedTime=e.accumulatedTime+i,e.accumulatedTime>1e3/60*10&&(e.accumulatedTime=0),0===e.accumulatedTime)return e.animationID=null,void e.startAnimationIfNecessary();for(var a=(e.accumulatedTime-Math.floor(e.accumulatedTime/(1e3/60))*(1e3/60))/(1e3/60),s=Math.floor(e.accumulatedTime/(1e3/60)),l=[],u=[],c=[],f=[],h=0;h<n.length;h++){var m=n[h],g={},v={},y={},b={};for(var w in m)if(Object.prototype.hasOwnProperty.call(m,w)){var x=m[w];if("number"==typeof x)g[w]=x,v[w]=0,y[w]=x,b[w]=0;else{for(var _=e.state.lastIdealStyles[h][w],S=e.state.lastIdealVelocities[h][w],C=0;C<s;C++){var k=p.default(1e3/60/1e3,_,S,x.val,x.stiffness,x.damping,x.precision);_=k[0],S=k[1]}var A=p.default(1e3/60/1e3,_,S,x.val,x.stiffness,x.damping,x.precision),E=A[0],M=A[1];g[w]=_+(E-_)*a,v[w]=S+(M-S)*a,y[w]=_,b[w]=S}}c[h]=g,f[h]=v,l[h]=y,u[h]=b}e.animationID=null,e.accumulatedTime-=s*(1e3/60),e.setState({currentStyles:c,currentVelocities:f,lastIdealStyles:l,lastIdealVelocities:u}),e.unreadPropStyles=null,e.startAnimationIfNecessary()})},componentDidMount:function(){this.prevTime=d.default(),this.startAnimationIfNecessary()},componentWillReceiveProps:function(e){null!=this.unreadPropStyles&&this.clearUnreadPropStyle(this.unreadPropStyles),this.unreadPropStyles=e.styles(this.state.lastIdealStyles),null==this.animationID&&(this.prevTime=d.default(),this.startAnimationIfNecessary())},componentWillUnmount:function(){null!=this.animationID&&(m.default.cancel(this.animationID),this.animationID=null)},render:function(){var e=this.props.children(this.state.currentStyles);return e&&b.default.Children.only(e)}});t.default=C,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){var r=t;return null==r?e.map(function(e,t){return{key:e.key,data:e.data,style:n[t]}}):e.map(function(e,t){for(var o=0;o<r.length;o++)if(r[o].key===e.key)return{key:r[o].key,data:r[o].data,style:n[t]};return{key:e.key,data:e.data,style:n[t]}})}function i(e,t,n,r){if(r.length!==t.length)return!1;for(var o=0;o<r.length;o++)if(r[o].key!==t[o].key)return!1;for(var o=0;o<r.length;o++)if(!x.default(e[o],t[o].style,n[o]))return!1;return!0}function a(e,t,n,r,o,i,a,s,l){for(var c=m.default(r,o,function(e,r){var o=t(r);return null==o?(n({key:r.key,data:r.data}),null):x.default(i[e],o,a[e])?(n({key:r.key,data:r.data}),null):{key:r.key,data:r.data,style:o}}),p=[],f=[],d=[],h=[],g=0;g<c.length;g++){for(var v=c[g],y=null,b=0;b<r.length;b++)if(r[b].key===v.key){y=b;break}if(null==y){var w=e(v);p[g]=w,d[g]=w;var _=u.default(v.style);f[g]=_,h[g]=_}else p[g]=i[y],d[g]=s[y],f[g]=a[y],h[g]=l[y]}return[c,p,f,d,h]}t.__esModule=!0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=n(797),u=r(l),c=n(792),p=r(c),f=n(798),d=r(f),h=n(846),m=r(h),g=n(793),v=r(g),y=n(799),b=r(y),w=n(800),x=r(w),_=n(1),S=r(_),C=n(2),k=r(C),A=n(39),E=r(A),M=E.default({propTypes:{defaultStyles:k.default.arrayOf(k.default.shape({key:k.default.string.isRequired,data:k.default.any,style:k.default.objectOf(k.default.number).isRequired})),styles:k.default.oneOfType([k.default.func,k.default.arrayOf(k.default.shape({key:k.default.string.isRequired,data:k.default.any,style:k.default.objectOf(k.default.oneOfType([k.default.number,k.default.object])).isRequired}))]).isRequired,children:k.default.func.isRequired,willEnter:k.default.func,willLeave:k.default.func,didLeave:k.default.func},getDefaultProps:function(){return{willEnter:function(e){return p.default(e.style)},willLeave:function(){return null},didLeave:function(){}}},getInitialState:function(){var e=this.props,t=e.defaultStyles,n=e.styles,r=e.willEnter,o=e.willLeave,i=e.didLeave,s="function"==typeof n?n(t):n,l=void 0;l=null==t?s:t.map(function(e){for(var t=0;t<s.length;t++)if(s[t].key===e.key)return s[t];return e});var c=null==t?s.map(function(e){return p.default(e.style)}):t.map(function(e){return p.default(e.style)}),f=null==t?s.map(function(e){return u.default(e.style)}):t.map(function(e){return u.default(e.style)}),d=a(r,o,i,l,s,c,f,c,f),h=d[0];return{currentStyles:d[1],currentVelocities:d[2],lastIdealStyles:d[3],lastIdealVelocities:d[4],mergedPropsStyles:h}},unmounting:!1,animationID:null,prevTime:0,accumulatedTime:0,unreadPropStyles:null,clearUnreadPropStyle:function(e){for(var t=a(this.props.willEnter,this.props.willLeave,this.props.didLeave,this.state.mergedPropsStyles,e,this.state.currentStyles,this.state.currentVelocities,this.state.lastIdealStyles,this.state.lastIdealVelocities),n=t[0],r=t[1],o=t[2],i=t[3],l=t[4],u=0;u<e.length;u++){var c=e[u].style,p=!1;for(var f in c)if(Object.prototype.hasOwnProperty.call(c,f)){var d=c[f];"number"==typeof d&&(p||(p=!0,r[u]=s({},r[u]),o[u]=s({},o[u]),i[u]=s({},i[u]),l[u]=s({},l[u]),n[u]={key:n[u].key,data:n[u].data,style:s({},n[u].style)}),r[u][f]=d,o[u][f]=0,i[u][f]=d,l[u][f]=0,n[u].style[f]=d)}}this.setState({currentStyles:r,currentVelocities:o,mergedPropsStyles:n,lastIdealStyles:i,lastIdealVelocities:l})},startAnimationIfNecessary:function(){var e=this;this.unmounting||(this.animationID=b.default(function(t){if(!e.unmounting){var n=e.props.styles,r="function"==typeof n?n(o(e.state.mergedPropsStyles,e.unreadPropStyles,e.state.lastIdealStyles)):n;if(i(e.state.currentStyles,r,e.state.currentVelocities,e.state.mergedPropsStyles))return e.animationID=null,void(e.accumulatedTime=0);var s=t||v.default(),l=s-e.prevTime;if(e.prevTime=s,e.accumulatedTime=e.accumulatedTime+l,e.accumulatedTime>1e3/60*10&&(e.accumulatedTime=0),0===e.accumulatedTime)return e.animationID=null,void e.startAnimationIfNecessary();for(var u=(e.accumulatedTime-Math.floor(e.accumulatedTime/(1e3/60))*(1e3/60))/(1e3/60),c=Math.floor(e.accumulatedTime/(1e3/60)),p=a(e.props.willEnter,e.props.willLeave,e.props.didLeave,e.state.mergedPropsStyles,r,e.state.currentStyles,e.state.currentVelocities,e.state.lastIdealStyles,e.state.lastIdealVelocities),f=p[0],h=p[1],m=p[2],g=p[3],y=p[4],b=0;b<f.length;b++){var w=f[b].style,x={},_={},S={},C={};for(var k in w)if(Object.prototype.hasOwnProperty.call(w,k)){var A=w[k];if("number"==typeof A)x[k]=A,_[k]=0,S[k]=A,C[k]=0;else{for(var E=g[b][k],M=y[b][k],T=0;T<c;T++){var O=d.default(1e3/60/1e3,E,M,A.val,A.stiffness,A.damping,A.precision);E=O[0],M=O[1]}var I=d.default(1e3/60/1e3,E,M,A.val,A.stiffness,A.damping,A.precision),P=I[0],j=I[1];x[k]=E+(P-E)*u,_[k]=M+(j-M)*u,S[k]=E,C[k]=M}}g[b]=S,y[b]=C,h[b]=x,m[b]=_}e.animationID=null,e.accumulatedTime-=c*(1e3/60),e.setState({currentStyles:h,currentVelocities:m,lastIdealStyles:g,lastIdealVelocities:y,mergedPropsStyles:f}),e.unreadPropStyles=null,e.startAnimationIfNecessary()}}))},componentDidMount:function(){this.prevTime=v.default(),this.startAnimationIfNecessary()},componentWillReceiveProps:function(e){this.unreadPropStyles&&this.clearUnreadPropStyle(this.unreadPropStyles);var t=e.styles;this.unreadPropStyles="function"==typeof t?t(o(this.state.mergedPropsStyles,this.unreadPropStyles,this.state.lastIdealStyles)):t,null==this.animationID&&(this.prevTime=v.default(),this.startAnimationIfNecessary())},componentWillUnmount:function(){this.unmounting=!0,null!=this.animationID&&(b.default.cancel(this.animationID),this.animationID=null)},render:function(){var e=o(this.state.mergedPropsStyles,this.unreadPropStyles,this.state.currentStyles),t=this.props.children(e);return t&&S.default.Children.only(t)}});t.default=M,e.exports=t.default},function(e,t,n){"use strict";function r(e,t,n){for(var r={},o=0;o<e.length;o++)r[e[o].key]=o;for(var i={},o=0;o<t.length;o++)i[t[o].key]=o;for(var a=[],o=0;o<t.length;o++)a[o]=t[o];for(var o=0;o<e.length;o++)if(!Object.prototype.hasOwnProperty.call(i,e[o].key)){var s=n(o,e[o]);null!=s&&a.push(s)}return a.sort(function(e,n){var o=i[e.key],a=i[n.key],s=r[e.key],l=r[n.key];if(null!=o&&null!=a)return i[e.key]-i[n.key];if(null!=s&&null!=l)return r[e.key]-r[n.key];if(null!=o){for(var u=0;u<t.length;u++){var c=t[u].key;if(Object.prototype.hasOwnProperty.call(r,c)){if(o<i[c]&&l>r[c])return-1;if(o>i[c]&&l<r[c])return 1}}return 1}for(var u=0;u<t.length;u++){var c=t[u].key;if(Object.prototype.hasOwnProperty.call(r,c)){if(a<i[c]&&s>r[c])return 1;if(a>i[c]&&s<r[c])return-1}}return-1})}t.__esModule=!0,t.default=r,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){return o({},s,t,{val:e})}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var i=n(803),a=function(e){return e&&e.__esModule?e:{default:e}}(i),s=o({},a.default.noWobble,{precision:.01});e.exports=t.default},function(e,t,n){"use strict";function r(){}t.__esModule=!0,t.default=r;e.exports=t.default},function(e,t,n){"use strict";var r=n(850).default;e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(1),s=r(a),l=n(2),u=r(l),c=n(39),p=r(c),f=n(851),d=function(e){return e.clientHeight},h=(0,p.default)({propTypes:{children:u.default.node.isRequired,onHeightReady:u.default.func.isRequired,hidden:u.default.bool,dirty:u.default.bool,getElementHeight:u.default.func},getDefaultProps:function(){return{hidden:!1,dirty:!0,getElementHeight:d}},getInitialState:function(){return{height:0,dirty:this.props.dirty}},componentDidMount:function(){var e=this,t=this.props.getElementHeight(this.wrapper);this.setState({height:t,dirty:!1},function(){return e.props.onHeightReady(e.state.height)})},componentWillReceiveProps:function(e){var t=e.children,n=e.dirty;(t!==this.props.children||n)&&this.setState({dirty:!0})},shouldComponentUpdate:f.shouldComponentUpdate,componentDidUpdate:function(){var e=this,t=this.props.getElementHeight(this.wrapper);t===this.state.height?this.setState({dirty:!1}):this.setState({height:t,dirty:!1},function(){return e.props.onHeightReady(e.state.height)})},setWrapperRef:function(e){this.wrapper=e},render:function(){var e=this.props,t=(e.onHeightReady,e.getElementHeight,e.dirty,e.hidden),n=e.children,r=o(e,["onHeightReady","getElementHeight","dirty","hidden","children"]),a=this.state.dirty;return t&&!a?null:t?s.default.createElement("div",{style:{height:0,overflow:"hidden"}},s.default.createElement("div",i({ref:this.setWrapperRef},r),n)):s.default.createElement("div",i({ref:this.setWrapperRef},r),n)}});t.default=h},function(e,t,n){"use strict";var r=n(852),o={shouldComponentUpdate:function(e,t){return r(this,e,t)}};e.exports=o},function(e,t,n){"use strict";function r(e,t,n){return!o(e.props,t)||!o(e.state,n)}var o=n(122);e.exports=r},function(e,t){},function(e,t){},function(e,t,n){e.exports=n.p+"reactapp/images/34306b402bf488d807a92babe7055d39.png"},function(e,t,n){e.exports=n.p+"reactapp/images/ac30afc0653ff15c1ea9fd9cbae0414a.png"},function(e,t,n){e.exports=n.p+"reactapp/images/069a019b10e7aa07f55618e44ea3e787.png"},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l);n(859);var c=n(3),p=r(c),f=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return a(t,e),s(t,[{key:"generateVariants",value:function(e){var t=[];if(e)if(p.isEmpty(e))t.push(this.variantItem());else for(var n in e){var r=e[n],o="";for(var i in r.evidence)o+=i.toLowerCase()+": "+r.evidence[i]+", ";o=o.slice(0,-2)+".",t.push(this.variantItem(r.url,r.name,o,r.description))}else t.push(this.variantItem());return t}},{key:"variantItem",value:function(e,t,n,r){return e||t||n||r?u.createElement("div",{className:"civic-card-variant"},u.createElement("div",{className:"civic-card-variant-header"},u.createElement("span",{className:"civic-card-variant-name"},u.createElement("a",{href:e,target:"_blank"},t)),u.createElement("span",{className:"civic-card-variant-entry-types"}," Entries: ",n)),u.createElement("div",{className:"civic-card-variant-description summary"},r)):u.createElement("div",{className:"civic-card-variant"},u.createElement("div",{className:"civic-card-variant-description summary"},"Information about the oncogenic activity of this alteration is not yet available in CIViC."))}},{key:"render",value:function(){return u.createElement("div",{className:"civic-card"},u.createElement("span",null,u.createElement("div",{className:"col s12 tip-header"},this.props.title),u.createElement("div",{className:"col s12 civic-card-content"},u.createElement("div",{className:"col s12 civic-card-gene"},u.createElement("p",null,u.createElement("span",{className:"civic-card-gene-name"},u.createElement("a",{href:this.props.geneUrl,target:"_blank"},u.createElement("b",null,this.props.geneName)))," - ",this.props.geneDescription)),u.createElement("div",{className:"col s12"},u.createElement("ul",null,this.generateVariants(this.props.variants))),u.createElement("div",{className:"item disclaimer"},u.createElement("span",null,"Disclaimer: This resource is intended for purely research purposes. It should not be used for emergencies or medical or professional advice.")))),u.createElement("div",{className:"item footer"},u.createElement("a",{href:this.props.geneUrl,target:"_blank"},u.createElement("img",{src:n(860),className:"civic-logo",alt:"CIViC"}))))}}]),t}(u.Component);t.default=f},function(e,t){},function(e,t,n){e.exports=n.p+"reactapp/images/71fb7f0a5b1cf694468e7ba7e69bd939.png"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4QETDRgRjnOYvgAAFfVJREFUeNrlW3mUVNWd/u6979XSCxRNA9INCIgii0TBqAi4EKISxTVRnKgxLkedyGQkxiTujkYxaswomkSdxETjIUhYXVDMSNTYqElABQZbAQVBoOnq7lreu/udP97romibpRUyMVN93qk6VW+53/fbf7/bwP/zF/l7P7Ai0QvDMsf7dXTM4Opkv68CJFOQmxZvlx+sagxfDrcHH/zzEnBC7bQeI2unLqtO1B/i0RScE3BwcA6QJoe8asL67JIRr7Q9tJqr/D8PASk/g7Pqf3HRoO7jf+MRCus0aPxwBwfrNIxTsM5CO4NNheXzl4a3nLNl23r7T0HA+Qc+ceOQmpNvhw3BiIcE9eGBwcFBOQPtFIxV0I5DmRAGwJZgDRY2XUmLxZzbn2tj+xv8xD7TDxrV66L5sAE86qOCplFdU4HKnikwyuAkYCM9AAA4Z2EcR9LLoEp342uD117bn+uj+/Pm1RUZMqLmvA/gOAihSBAfqe5JpHsmkaxMwEt6oKCgICCEgYCAEg8UDMRJ9K4ac1f/nod6X1gCDqs6s3eFXwtnFSgIKKGgDrChhSpqWGlBABCQki0SAIRQAA4JVonB9oSLv7AE9EuOuxNuhx8zzkLkJYpNHLKoQD2HZA+KJCPwYhIcykzeKXRL9n80XVFNvnAEeF6CpL3upzqn0G7l2mlwq6CkAjyDRA1BZZ2HinoPHmuHb+CcBpyFcwaUpFCVzLAvGgGkMlVNCPH7GCtgnYF1CtYpaKdgnQZJOiSqAL8C8CocSFLDxb9Zp6GdhLUClHio9DLJ/RWx9oeDIQAghIYwOVhnYJwCdTu41hbQikAIgHmAkhJaRaHQWAXjFLSVcDCwToNrbsru7f5RCdhJQly1uaLKNmonDiHWgIDAIw4gDpJoBNsNDBQoA3ieg4ccyikYJ6JcwHI4Z2GdRFE0606e4/6RCOhUPbeJ5Tf31sNngSWjFRMDRj1YR+G4gtxEAWYhlYKwHMpySBNCOwEHCw2HQDU1FsIWs4tnuv9rH0B2Z5tr7dKFObkFykpoK2L7bk97HJxzgGtPh22ZrzCwVkFajo30jdOcc/stk6X7WurlxDS1bBCbcw1PKmdLmV4U81mUElf68KujtDiK/YiLIw0NICc+xtrssnV7IJp8HiLoPgb/qcUsV09c1srXw4HCwZTOIiBgSQaW8naAd7akJYHJYY2Z09cY47pA+t+FALKX3xMApFgsmlXy90cHlsO58jSHgPkeEkkvMmbnYGITkHD4JGy4f0Pz/2zvhFTShTXscwL25sHlCyQAsGbb0uWb2l593RIG50xEAiGgCQovFRXGFu3SB3J8I1YU51zf4d6dEfG5SaD7AXz5YkuLbhAPntrCP4ID4BxgHcAoA/MZLByM09BOoGjyWGWeGsU5N53dZ1+TQPcT+I7vNNfWGq7MPfUNDbuzqlDEpFhY57At/7f565vebtwF6H1Owi4JqKmpIYMGDSGZTKYrar+rAwBIs/zwbWclCCGx0wPgdlSCIAwB3b50T/fZlyTslAil02l86/xLK8/9xjcvPGjg4O8kU+mRhWKh8b3GNQ8+9vjPn1j03Lyc1nqPNt/JdwQAGE1Wguy8po6OkRDrlV2zu0THdTin9Ll//4Hs9K+d0XP8+ImTajM9Dm7NtXz8zqoVLy5ZsnjTsrcaTKcEHD7qy+SXMx+776gJo64p/WqBPqg+5KChfR885aQTH3ztzw2/uvDyqf+6YcMGtZfgafl3johI6u1r/hQ8C+OMjq9znYDd1ecSCVdfeU2/a797/Ud9etWCCwVjNRgBJk08GZd+60o8/YdZR19/y7VvKqV2LLCurg6LF7yUPWrCqGsigyxbPgWgAauB48aNveT5+X/kvXr18vcAnsRXlr8TDU3b5e0ifqNMMM4OnZWwhprd3WM3Wob77p456bYbZ3yU8Hx8sm0rcoUWFIM8coUctjc3QSmJC86/8I1fP/LEd3fyAT+b8fPz+gzsloHdRZRNAZ4HFAoSQwYPwZ23333PXnj+jmRQy2QpCrSz4DqoggHnZdR3Br7TcHjB1IsPPf+cC1/IZrdDaoGE78NnPnzPA6UUHqOw2mBb01Yce8z4n93wgxuPAQA6btxx9KwzTp8FtYeYwADP99CWa8GEY4+bduToI2t3A552BA+AEo2oF0DipNe5WPo7tMASIcuv2RsHW1lZ6V1/3a2rtNVIp1NIpdJI+D48j4FSBsaid8KiqLM9ux0nTTq5YcSIEYyee9b5o71KAGYv+sfOwliDZMLHlNOmXLUb8OgEBFXap87JMsu2sfBdqRlmqDSdELhLAlKpFPuvmU9e07dPX6QSSaTTaSQTCXgJD8zzQBkBoQAh8QHAaAXqUUyaOOkIOqBf/TgT7l1haZ2DsxYhDzBw4MArd6OaHdWXRe+8NAlqD4NRFIirQwDWKV12ze40ARNPOLnvG0vf/cs5Z595F2UE6XQKCT8Bz6PwWQSelkKuLXuehRAcNTU1x9NiEBSdBbQCoHaD3gBKKyglUAyKqKmp6TN69Oghu7F/2uHwLLW0vbR1kfeLzWDHYxQNTRydOvqBEgmDBg2umPnTx65+fv7iD0eNGjJSKhfZfILB86IDsdQjR2OB9gmU0dBaQkkJP+HXe9uy2z4QSgEOIPDBSCdtEgdIbhGKAgpBAUpJCCFw3rlT/7x69er+HdJWugsfQJxTsZzdDg2Iw180EFEwZkf2uFN8BEh1dSZ56YWXjb/t5rvnd6ulMMVIcKlkJGVro6u0Lo+T8b2thtEaykgIKQAAUshNtHHN6lW5XCuKQR6hkNBFB/AykzCAzlm05VuRL+QgJYcUEm25NtT17Zu54Uc3PrULSdFPHyoOg2SHxbU7QVgYE8IJis7uccHUi49Y3rDmg/tn3jO/W3cKcIAlAC8BUA+gLDocQUnDrDWw1kJbDa01lJYQIoRWCsxnyG7PrqCz587evn7DOnARIlfIoq2YR6EtBM9K8GaJtqY8tjVvRWsuCy5CGGvRmm+NxlrWYfiwYVNuv/Wu73fiAzraL7MwcGUOoH2BUeNUwzqFUBdQZv9kyuQzhr/8fMPCJ37365cPGt4nAxH/mgLglxlL/GTiEHWUjInU3WgorSCVABcBlI7snHOOt5a/tYxms1n3h7mzTwx5Ea1tLWhpbcL21m3Ylt2CLds/QVN2K/LFHLRW0FqjOdsMKSQqKyuRSqaglcIxRx91y803/sePO5E8KXdoBlEYdDAl1VRGQlsJayUCU0RWbmoCQI4bd9yBT/92wSMLn5m/9IRTjjkWJtbKduBsZ+CxS4GJCdVWQRsFrQSE4BF4pWCMQSKZwOZPNvOGhobAA4DHn3z8T2OPHYu6vnVI+AkkE0kwFnsRR2C0QsBD5PI5cMGRTqdj5+VgjAHnASZ/dfK0XjU9e99w2w3X5dpawzIySku1gsE5EfX/oKG1AnES2nFsFJuxvtjIRx9x9GHnXTD5xOnTpt8Cvz1djEHvqiKw0WGMiyUuoZSElBKhCGPwEkZHGqiUwmO/eqzPTkXNlClTBlx95dUfWWORTqfgeT4IIXDOQcY3gwMooyXwzkbNTEIokokUevaoxdamJj79e/82btV7Kz/pGMoqk736fL3uoddr00PACEG3mgTa8nm827wG1TbXevYNIzD1qomZve5Q2Dh/0YCWDjJW9UjdBcKwgJCHkDJaPxccjDHMXTD3nJkPzZy303i8sbGxbeTIkT3r6+uPLhaD2GlEah+Nujwwj0UDTkrBKAOl8WfmwfcSMEajZ02td8bpZ12Ry7WtWrn63fVlWsASLFFxaPXXLq3wMgitwtZ8K2iyjZ80ta7ww8dPSY05bmhVl/pTJnbSChF4zSGkgAhDBLwIISW0VhEBKirDG95ouGvGT2Y81Gm9nMlk6KO/eNRkumeglILv+2CUgVBSquHbO7ulIGMdCAh8PwGP+SCUIuGnUFFRiSUvLV508x033drc3NQGgKUrqnuf2euhV6XXG8QJfvzJtfzs7x+cqhvUK9XlzqQFIAEtAaEkpOLgPEDIQwjJoZWCVAqccxhjYKzBC0temHbf/fc9rLV2u2xkDh06NHnn7XeG1VXVsNZGkmc7JF86sZRhORBCwKgHz/NBiQcQgBKKyspqZFuymHHvHZfPXzj3VQBsTO87Vp02+ESceltd65hJA1KU0q6DdwAEoIUFVxxcROCFFJCx1IWMchUQIJvNYvac2WOefOrJFR1z3o5TV9Lc3Gw+2vDRz8YdO+6HyUQSWuuSuhNCSmpPCS2RQgkFZV5EConST0IIhBSoqqzCSZMmn96nb22vte9v3HzVhReO/cGsSZn6gzIpQoj3WcELrhGIIgIegPMiuIgdn9Lggkfx32i8s/Kd12fcM2PkH//7jxv2tpUNABg7dmyP6d+d3lzTowbGGPieD8ZYSRsIjTY8uLimJaSdIAYS56GUeDBWIygG6F7dGwcPGQivm+Ge53Vd6rHNWw6EnCPkAbgIIaWI/JVUEFLAxLnFho83YNbTs8Y899xz73DObQcK90wAADJixIiqW2+6ta1nTc+IBOaD+WwnjQAAZxxACShhMQlRr18qCaOA2p59MXhAPbwen2MOpQAZaARhgFAUoaSEVCoGL6GtgTEGW7ZuweIli6fOfnr2wqamJrmLQarbKwIAoL6+Pvm9a77368NHHX5eexj0PA+MsLIqMapgGfNBCYGzgJQCyWQV+vcdiAPqu0UJzGd5WcCEFmHAUeQFSCmgYuBSSjhrYZzF5i2b8eJLL14+b/68ORs2bCiWauzPSwAA4vs+vfyyy88/47QzfpNOpWGMAWNRdEB7iekcPM+HMRpKGfTsUY8hAw9CZU/6mfeiOQ6IIkchCMBVAK0VlNZQUkfps7HY1rQVC55ZMG3hooW/37hxY64sddp3BLQf48ePH3jFZVe82a++X8a0l22ElG7HRQhGExg8YAQGH1gHVoXPBl4CPBAIggChCGC0hlQKSqtS9vnxpo8xd/7cq5557pl5W7ZsyZUB3mcEoLNGR01NTeLbF3/72q+c8JVbEokEpJSglCKfb0XCr8IRh41F//qaSOW7Cl4DsqhQDIoIRQCtYolrBUY9cBFi3fp1fNbTs6YtWbLk2eZsc2FHIlwCbjsB/rkJQMcW1ejRowdfdMG3fnvIkIPHbG/ehky3Pjh6zAT07lMZAfe7CDxQCIph5OC0hNYGSikEYRFCCrzX+F7jH+bN/fHSPy19OZ/PF8oS4bJqoCR114kWdDkK7LHd7XmeN2bMEaOnX/3Dead8dUqmWzc/+mVvtzRpQBc1imGAgAdQWsIYA60NWnNZtLRkobTFI489cvnCRQuejUHqMsCfmwD2GQgoaYW1Fs6geN9PHvhOJpNKlao2uhsCXBzSChqFXAG5YhsCXizF89a2LD7cuB651gIq0z3Qp3YAYPHJ2g/XNmazzfkyoHYPQPfqxT7jtJcAIHUH1Hd7f+XGzd0yiZQRUWdm51lQh9xdRLG8kC8gHwMXUkAKCZpWaAubsWH9FtR0OwBDBh+GA2rr4HkMXzrsiCMv+uYlV1hrtvzlb2+udM7prkp6XxLQ7v3ZijdWL+/dr3uG54GE30kXz+7I3mSoUCwUPwXcMgGRaMHrL67k8x95ozDu+PE46stjPI8moI0GpYCxGh5lmDRx8kkTjp1w4lt/XfZ8NpstdqLye5NI75s9Qr984Fc3DB5af2CxxcDzYhdsdtTnkIDmDrwokSvk0JJrQVuhFUEYgIdRE0Slt2PN++/x3928onXmTW/jb681pyq6JVAIC5BaIplKIpVKI5WsAGVRFBg39vgxixcsbTxp0inD98Uusc9kAl85buKB/3n//bNzLTLqHFEC4kjkkbSDMgZSaoQiQDEoIORFCMEhpYy2yVbnsWHzh/zl335cePXhQK9b52UYoV6vSqLHTD4QFam0RxxAKQMlBJQRMBbtK9dKoaqyGlNOPfOyllz2zeUr/rq2KxLvKgGd2v+cp55t7NG9Z0oZBUoJiLOwsDDaQJm4AcmLcQjjkFJDCAlCHFSyBX9auKp14Q+yesP7mVR3UltVRX0oK+ERoUd/rR/SFRWec5GTjRqdBISSqBijBNoaJPwETpo4eaqy+t2GZa+9txfO0O1xf8DeMPn1M88bPHTo0Ey+mIPneTAmjkXEwBoLrSWEElBKQhsNraLeH2UUK9et+GjBI2+t+3jFoLE9Uv1TByYzSPbw0NYEeDQFDz6MVVBKwmnA6KjASfoJMOdHGsEIPEqhjQYIwU3X3jxr3foPJsxfMOfNfbVLbHdqQy675Mo5RmtYY2GNhTIKSnMIwRGEBRSCIkIeRD04HrWouBB49oVFi/7l3EumLH7prRf7pPqnerMq+DQJn6Tg0xQ86oNSCm1kpDVKwlgNIQVCySFkCG0UjLawACilUevbOcy89xevHjzk4B5djQBd0QAAwMgRI9PDDhk2si3XAs+jUMYAJsrNjZIQRsb9eAchOZx1UFrh7p/efe28efPmA6C90rV1FTQFSn34rAI+88CIBIEH5rMU1wUUCwVUpCicAxil8VQnCeuAhGcBRINPxjxIFXWpH3348Q9PPHl8d+dcZ+mv2yfb5IYPO6xvIulDGwmlIlWVQiDkAQIRQsV9uCAsRklNrhXX/ei6C+bNmzenPXnxkjqgxIukDx8M0UZJn3pozm1ZuWLlX1bmii0IwjwKhRxCzsF5lCKHYQghZdT7Nw6ERM3aMAwxbOjI1NlTzhm1X/cJjvnSkRNKHRgTdWACHkRNSKOhlAbnkbcvBkVMv276ma+89sorOxcpzjKaAG0fGMdjrBRJYFuwbcUdN9979v0P33fVhxvXQhmBQiGHfD4PzkU81tJwsXOkQMkvWGtw3vkX/K6rkYB2wQG6nr16jZJKQhsJKSPJKCVgTVS4CMERhiGkknjg4Qeuffvtt9/skKxYUC3Lg0+7xhJCkKTJ7gDUyy++8vz066Z/6bkXFy0q8jy4ECgUCuChhHEmnk8QEMbA4n+0klJiyKDBhwwbNqxqX2hAp6wZIyqdM5AymrBGxYuFUro0eDDW4PVlr/913rx5T3bI2R0AZwzhDro0ddpp74FTQft52eZs9t777r3ioV8+cHlzy1YUgzyEEqCEgcYdKUYJiMdAWaRgyUQKIw4dMaArTrBLJqCNUUJGkxelos6rsSbeN6AgYkk1LGt4rJPqLNoJI6HgdNQ4bd8m176bnGjVobHhXnjhhUX33D9jStP2bWCMIZVKIZlIgHkeCGVgZOeZRV3/+sO6EA1clwhobm5a2d6JNdZGBBgTl7CRFuQLefi+n+nQmWkvW53ylSCgKB+zuPjPwMiO5wOwK1asaHh+ybPTBg4YhMqKCvi+Dz9BwWj5ZNRG/5BBaI+9NGvXFQ1wALBq9eolUgloo+GsKyUqxsRaIBWstRg+bPi/x/e2HSVK3Y7tC9F2GRvvFrdw3k4asFMY+/Lhx/TrWdMDqXQaySQFo4h6kvG12hpwHiJfyDV2pSD6X4wYFk47H4gBAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAQAAAAAYLlVAAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfhAgILACGBOQbTAAAKjklEQVRo3sWYe4xV1RXGf3ufcx/zwJnh6eBUFOyAKFDFB9WSlooaRZIi9RlrrUpQW6Ik1KTW1CaNmtjal7F/1KYWpYrGlFcMojGiVsRRi1ixcXyL4oPXMHPn3nvO2Y/+cfY999zLzDBjir0398zjnrO+b6+19lrf2vB/fokv+2CeqzK5ybmzaQ2eCHY8VOr9agnc0DZ2a7bTwwAWQ8j+E+57M/xqCGS56cqWlRLjHjaAwdK/dvfi+81XQODmW9t+ZZBIACwWg8FgKbJTPmxHZs0bKfxPpoxba/CQNNGMRCffWDxEueufh9UDl4lOkwU8GhmFoEwfGus+hpDPM/erkViUIyPQOj6DRSCAiBBVtxZJ7qqRWRwhgcY7rHN3QIEQSQNejSNz910qDhuB74vMggoBjULSyBG0IF0yWiyCrHeYCCwSWcGESsZbLB45smTwscl+EPi5ReIwEFgkQFHZ5gaLQROhUChHKi5LWsd3D+/lDxccILJRt+mME84gKGCRlIkcndgzoao8s8b+TzyQXk3xF8qVHYMhpIceCmgHDhB1B3qgJ79kHag3MSo/vphHujooAQ+FduvXaA507n0n/cShvCBHAC8QfUHfKlP9kxxZVxXAAiE97yX/cDaG9oMcJnxitPfaIOU8n0zSESyKQru2B3t2KApymPAJjbLuPV1jk1aSSdWA/t/17Emo1vlhhDkwAHz1Kjo2jzlDIPFoJcPnKCI0JT5rCJWLRe11iGyQI4AX7s3+BWVnXeK5qqDomxnq6j01tIfwghwBfOUj+0v7LrI1Biz9a/d3p6CHTaGmEF0pGinQfzB8vVlR3m4RLvquMG2uCadFuA/u6ijUB8IRaODupjN+MP7HmROD7l33PP3gq716IPjkKpuqSIklkYZK0XAUxnqzx0yff+vXix9/9OT2T+7SKQLLxdK7py535jrb7/nGPf/567037I4GgJeV32xi3b0UMkk8UXO1gDiv44IPW4gwCGbyXeacfklXFBucyC37pi63jqrAoDn+6p+VWzJ18ALpPqI+dwxG192R9hk/nH/Rhx49lAicipr70pM3uhxafcnYVpvatj4eZY7k8l8flP8VGgOkri0ja+Cr9YC5087Y1IfGR+IhkGgO0Pn7B+eAvEWetlpTX3M9ikxbNmVsDbxM4KVJgmwriRi6FiHq3uT9C3cYcmTwHHxspsCsF2/05JyTs9iDqpPF4HPK9TXwJBDSOAq2+qxOLNcQyHpLl7eSIYuPj5eKj0Yy4yQ55sxogPJgsYSMv67GnRUHe1WHVcudVQi8Oi8wo/32V+bcKdzq469IvBYx6tt+0G/RiJoBIZYXAc0TJh/33rt10RdJN06EGIDV+G5IkvG4NKFhwVXzf+MT4LutYFK+NmgU3lF+3zvK5b9M4CNCAhQRZ77w8ddCnQIXyTJqtqHBVk0YRENu3rcuXjuKEO3aFckIU1FPClCfyE92lAidxrdOcJcoo1CUGN26+KFk1ZW1SyTSplQAsbnkjrkn3fXONWsbUYnjZSq0sXAJUfj0via37vmCkBJlihTpp49eikQYSggMHQsv/WmSA5UIe4njnUmLJs6w2dNvW3/TMxNbNSJJuurKY3BNhAFC3tsqH7Bb50UU6XfgfQRoNH1E5Mig6Lzt4tuT1Ys41WySAdpJkWA34vhJy/98y+ZZZxhXTaodySY6WhMRoTBk2F9+q+jDs89OpQ2fjHOUJqSEIpvM/rOWNY9/5Ob+ErEIkAhdkeBYDCX6ysfOmDtvwW0etm7itcn8rNGoBN5ieHqCI3jH0ed+aMjiIdzMY11hj3d7hmYOlP925sefVkKam3DMljySJkrsg57zOauVAbdzrBU0Ck1ESIgiQiF5afHGNY7s0wfOHTPm9MDJa1IVK972HoZm/9SlpR0730fi4XmNrddk0BTxyqcVrs5Pax5YWVmsi7oiIiRyVARv37nm3pRcuEJep5tQrqfWNnbwkQh8sry+4dFf9h3Ay40/+nmJLc8on5Mflx9M71kHXQE3KEIMlu3L1v8plq+iIhSOyl1eymOTTKt8aV3g44TK0c/aJV3P47XvmMT5PSfkxZDwykU9jntEhKDAltnPvVYpIaIqljpbFu/PYNzWkSk1JZO+aski2frIUw/P/8PFk4bS+9blewweU7Eodm7ZdN5HhaqSEWm1NrXtgr3NjoKsCUa1vRsCGmgnV/byQ8Erghpwg2UvL8z+1+uhSUupGk34Vk+p5aIDozA1qtIkAYnz+QjG0QBDwGsiAgeuHfgBtl+6Zf2BsKbl1nsAAWNyC+8/5hKbxJ1kZ1sUGUbTNuRIbZPNptyGtuxn+5Kux3b3u85l0630IAIIX86/7JSVWQzS0bR4GDTNTKBpyHlWERCgMG5kNfTyyrKXH9nT6yrXcAggEMcfc3bX6FaTeEohGcd4skPAawK30zUKMOyl6/pX1+zvdcVwGASoio9R2XkrTrzNRyEp4TOJMfiDwhtC10E1GknE5+Uty7Y/3ldwRwkVMTAsAlSk1eTJ33ngyNl9NDGFljrRUgseuJVrAhS7urfevuOZUgHjmoVJRJCthR+IQI0E9/wpJy9YM6u1EdJKrAY8JHTHE0UKGJ5a8vLjGHdwdEgCQx/RWK13d8+kcYAbLZoyBQqUCFEU+JR9+LQx/ZT29vqxaRhHNPVpGFeitpY/fppHJcJCpIpsvHKNJkOJz2hmNBkUGSzrV2xapYPk8Myk9HudB5KwHl9PABDeXdtGt5Zd8lVsaEICt26FQPBGeXPhBI7zJYb4GH/GOdPmvbux0F8dGw5y4HDOiJb8fOKkfleE4p2kCChRpERIiEWyq7yu5x+8nc8ToMmQIYtEMW32Ld2zph86CIN7QJww6epH+xMlb1xPr1b4DHvLLxaeV1+0Cr9BzSDrk5rcFHlOubbY9f67A698MAKpOXBFd1PeIFKSKnJujxBItvWsU7vzfrOHQagZ5HzrRuKYhsFj5qXm391v1Y5QtTT8weIzZ/LE1jKeE2XGFddYMwl2ffjse7u+mc/naaTPTSIKicHgJ/LZIFi0+ou5L3UN45Ss7uRCnPWYdkUszvggUXMh2zb8duHrTzbkM6mRwbimq5z4MIDEYPnR8+1tg2/KQZLw6IajTixBEvcQ5apcxLoVDy5X5exEz+lFAfh5lS878MgdYWtAosmy9AMhBj45G5RAR7vv5GNsUKMI0BRZdcXWx7AYr0giWiT9b3z0Rnz4ECaDXXx4LwnpyJ86c4QHlcfOrYiJipINUQSs/N6bz1VO62VSliTF11ZfuPH6PRjKlNz6jQOQGOb+fbB9IAdMQXvETOU0rE7qnuKJFR90VUqCCKu3C7wWou0bV87atiEkokSAdeCxSpjQ2dF8SA+k09A02WQd8cazdL+6dZWbNCzWlElNfbaIxfbtW7d005ICAbrmQAV8Oo4eURLqSDkdWylAZd76S6qmWx2lDicgqkyp2zasX9iLJOOmw4qwHTNjoACssYMQKLxRgTeuBpTwW1MDoRVBTXMOkznVvP/i9mXjyLnZuFLdZFs9xhq7xg7sAQs7n4qSKmCcuOy4yW3sysCXWpCIUm3HHtvRTJZMUsY1IaXuevj4538BBXB1HeF6wqkAAAAASUVORK5CYII="},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t,n){var r=u(e,t);return h.createElement("div",{className:(0,ae.default)(n?oe.default["integer-data"]:void 0)},r)}function u(e,t){var n="";return e.length>0&&e[0].hasOwnProperty(t)&&(n=e[0][t]),n}function c(e,t,n){return e.length>0&&e.reduce(function(e,r){var o=r[t];return o?e||o.toUpperCase().indexOf(n)>-1:e},!1)}Object.defineProperty(t,"__esModule",{value:!0}),t.MutationTableComponent=t.MutationTableColumnType=void 0;var p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.getDivForDataField=l,t.getTextForDataField=u,t.defaultFilter=c;var d=n(1),h=o(d),m=n(10),g=n(8),v=n(3),y=o(v),b=n(169),w=r(b),x=n(864),_=r(x),S=n(801),C=r(S),k=n(865),A=r(k),E=n(814),M=r(E),T=n(866),O=r(T),I=n(867),P=r(I),j=n(820),D=r(j),N=n(868),R=r(N),F=n(869),L=r(F),z=n(804),B=r(z),q=n(872),V=r(q),U=n(874),H=r(U),G=n(880),W=r(G),Z=n(883),Y=r(Z),X=n(822),K=r(X),Q=n(805),J=r(Q),$=n(884),ee=r($),te=n(817),ne=r(te),re=n(795),oe=r(re),ie=n(18),ae=r(ie),se=n(886),le=r(se),ue=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":f(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ce=t.MutationTableColumnType=void 0;!function(e){e[e.STUDY=0]="STUDY",e[e.SAMPLE_ID=1]="SAMPLE_ID",e[e.TUMORS=2]="TUMORS",e[e.GENE=3]="GENE",e[e.PROTEIN_CHANGE=4]="PROTEIN_CHANGE",e[e.CHROMOSOME=5]="CHROMOSOME",e[e.START_POS=6]="START_POS",e[e.END_POS=7]="END_POS",e[e.REF_ALLELE=8]="REF_ALLELE",e[e.VAR_ALLELE=9]="VAR_ALLELE",e[e.MUTATION_STATUS=10]="MUTATION_STATUS",e[e.VALIDATION_STATUS=11]="VALIDATION_STATUS",e[e.MUTATION_TYPE=12]="MUTATION_TYPE",e[e.CENTER=13]="CENTER",e[e.TUMOR_ALLELE_FREQ=14]="TUMOR_ALLELE_FREQ",e[e.NORMAL_ALLELE_FREQ=15]="NORMAL_ALLELE_FREQ",e[e.FUNCTIONAL_IMPACT=16]="FUNCTIONAL_IMPACT",e[e.ANNOTATION=17]="ANNOTATION",e[e.COSMIC=18]="COSMIC",e[e.COPY_NUM=19]="COPY_NUM",e[e.MRNA_EXPR=20]="MRNA_EXPR",e[e.COHORT=21]="COHORT",e[e.REF_READS_N=22]="REF_READS_N",e[e.VAR_READS_N=23]="VAR_READS_N",e[e.REF_READS=24]="REF_READS",e[e.VAR_READS=25]="VAR_READS",e[e.CANCER_TYPE=26]="CANCER_TYPE",e[e.NUM_MUTATIONS=27]="NUM_MUTATIONS"}(ce||(t.MutationTableColumnType=ce={}));var pe=t.MutationTableComponent=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),t}(w.default),fe=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._columns={},n.generateColumns(),n}return s(t,e),p(t,[{key:"generateColumns",value:function(){var e=this;this._columns={},this._columns[ce.STUDY]={name:"Study",render:function(t){return le.default.renderFunction(t,e.props.molecularProfileIdToMolecularProfile,e.props.studyIdToStudy)},download:function(t){return le.default.getTextValue(t,e.props.molecularProfileIdToMolecularProfile,e.props.studyIdToStudy)},sortBy:function(t){return le.default.getTextValue(t,e.props.molecularProfileIdToMolecularProfile,e.props.studyIdToStudy)},filter:function(t,n,r){return le.default.filter(t,r,e.props.molecularProfileIdToMolecularProfile,e.props.studyIdToStudy)},visible:!1},this._columns[ce.SAMPLE_ID]={name:"Sample ID",render:function(t){return _.default.renderFunction(t,e.props.molecularProfileIdToMolecularProfile)},download:_.default.getTextValue,sortBy:_.default.getTextValue,filter:function(e,t,n){return c(e,"sampleId",n)},visible:!0},this._columns[ce.TUMOR_ALLELE_FREQ]={name:"Allele Freq (T)",render:C.default.renderFunction,headerRender:function(e){return h.createElement("span",{style:{display:"inline-block",maxWidth:55}},e)},sortBy:C.default.getSortValue,tooltip:h.createElement("span",null,"Variant allele frequency in the tumor sample"),visible:!0},this._columns[ce.NORMAL_ALLELE_FREQ]={name:"Allele Freq (N)",render:A.default.renderFunction,headerRender:function(e){return h.createElement("span",{style:{display:"inline-block",maxWidth:55}},e)},sortBy:A.default.getSortValue,tooltip:h.createElement("span",null,"Variant allele frequency in the normal sample"),visible:!1},this._columns[ce.MRNA_EXPR]={name:"mRNA Expr.",render:function(t){return e.props.mrnaExprRankCache?M.default.renderFunction(t,e.props.mrnaExprRankCache):h.createElement("span",null)}},this._columns[ce.COHORT]={name:"Cohort",render:function(t){return e.props.variantCountCache?O.default.renderFunction(t,e.props.mutSigData,e.props.variantCountCache):h.createElement("span",null)},sortBy:function(t){var n=e.props.variantCountCache;return n?O.default.getSortValue(t,n):0},tooltip:h.createElement("span",null,"Mutation frequency in cohort"),defaultSortDirection:"desc"},this._columns[ce.COPY_NUM]={name:"Copy #",render:function(t){return e.props.discreteCNACache&&e.props.molecularProfileIdToMolecularProfile?P.default.renderFunction(t,e.props.molecularProfileIdToMolecularProfile,e.props.discreteCNACache):h.createElement("span",null)},sortBy:function(t){return e.props.discreteCNACache&&e.props.molecularProfileIdToMolecularProfile?P.default.getSortValue(t,e.props.molecularProfileIdToMolecularProfile,e.props.discreteCNACache):0},filter:function(t,n){return!(!e.props.discreteCNACache||!e.props.molecularProfileIdToMolecularProfile)&&P.default.filter(t,e.props.molecularProfileIdToMolecularProfile,e.props.discreteCNACache,n)},visible:P.default.isVisible(this.props.discreteCNACache)},this._columns[ce.REF_READS_N]={name:"Ref Reads (N)",render:function(e){return D.default.renderFunction(e,[e[0].sampleId],"normalRefCount")},download:function(e){return D.default.getTextValue(e,[e[0].sampleId],"normalRefCount")},sortBy:function(e){return e.map(function(e){return e.normalRefCount})},visible:!1,align:"right"},this._columns[ce.VAR_READS_N]={name:"Variant Reads (N)",render:function(e){return D.default.renderFunction(e,[e[0].sampleId],"normalAltCount")},download:function(e){return D.default.getTextValue(e,[e[0].sampleId],"normalAltCount")},sortBy:function(e){return e.map(function(e){return e.normalAltCount})},visible:!1,align:"right"},this._columns[ce.REF_READS]={name:"Ref Reads",render:function(e){return D.default.renderFunction(e,[e[0].sampleId],"tumorRefCount")},download:function(e){return D.default.getTextValue(e,[e[0].sampleId],"tumorRefCount")},sortBy:function(e){return e.map(function(e){return e.tumorRefCount})},visible:!1,align:"right"},this._columns[ce.VAR_READS]={name:"Variant Reads",render:function(e){return D.default.renderFunction(e,[e[0].sampleId],"tumorAltCount")},download:function(e){return D.default.getTextValue(e,[e[0].sampleId],"tumorAltCount")},sortBy:function(e){return e.map(function(e){return e.tumorAltCount})},visible:!1,align:"right"},this._columns[ce.START_POS]={name:"Start Pos",render:function(e){return l(e,"startPosition",!0)},download:function(e){return u(e,"startPosition")},sortBy:function(e){return e.map(function(e){return e.startPosition})},visible:!1,align:"right"},this._columns[ce.END_POS]={name:"End Pos",render:function(e){return l(e,"endPosition",!0)},download:function(e){return u(e,"endPosition")},sortBy:function(e){return e.map(function(e){return e.endPosition})},visible:!1,align:"right"},this._columns[ce.REF_ALLELE]={name:"Ref",render:function(e){return l(e,"referenceAllele")},download:function(e){return u(e,"referenceAllele")},sortBy:function(e){return e.map(function(e){return e.referenceAllele})},visible:!1},this._columns[ce.VAR_ALLELE]={name:"Var",render:function(e){return l(e,"variantAllele")},download:function(e){return u(e,"variantAllele")},sortBy:function(e){return e.map(function(e){return e.variantAllele})},visible:!1},this._columns[ce.MUTATION_STATUS]={name:"MS",tooltip:h.createElement("span",null,"Mutation Status"),render:J.default.renderFunction,download:J.default.download,sortBy:J.default.sortValue,filter:function(e,t,n){return c(e,"mutationStatus",n)},visible:!1},this._columns[ce.VALIDATION_STATUS]={name:"VS",tooltip:h.createElement("span",null,"Validation Status"),render:ee.default.renderFunction,download:ee.default.download,sortBy:ee.default.sortValue,filter:function(e,t,n){return c(e,"validationStatus",n)},visible:!1},this._columns[ce.CENTER]={name:"Center",render:function(e){return l(e,"center")},download:function(e){return u(e,"center")},sortBy:function(e){return e.map(function(e){return e.center})},filter:function(e,t,n){return c(e,"center",n)},visible:!1},this._columns[ce.GENE]={name:"Gene",render:function(e){return R.default.renderFunction(e)},download:function(e){return R.default.getTextValue(e)},sortBy:function(e){return R.default.getSortValue(e)},filter:function(e,t,n){return R.default.getTextValue(e).toUpperCase().indexOf(n)>-1}},this._columns[ce.CHROMOSOME]={name:"Chromosome",render:function(e){return h.createElement("div",{className:oe.default["integer-data"]},L.default.getData(e))},download:function(e){return L.default.getData(e)||""},sortBy:function(e){return L.default.getSortValue(e)},filter:function(e,t,n){return(L.default.getData(e)+"").toUpperCase().indexOf(n)>-1},visible:!1,align:"right"},this._columns[ce.PROTEIN_CHANGE]={name:"Protein Change",render:B.default.renderWithMutationStatus,download:B.default.getTextValue,sortBy:function(e){return B.default.getSortValue(e)},filter:function(e,t,n){return B.default.getTextValue(e).toUpperCase().indexOf(n)>-1}},this._columns[ce.MUTATION_TYPE]={name:"Mutation Type",render:V.default.renderFunction,download:V.default.getTextValue,sortBy:function(e){return V.default.getDisplayValue(e)},filter:function(e,t,n){return V.default.getDisplayValue(e).toUpperCase().indexOf(n)>-1}},this._columns[ce.FUNCTIONAL_IMPACT]={name:"Functional Impact",render:function(t){return e.props.genomeNexusEnrichmentCache?H.default.renderFunction(t,e.props.genomeNexusEnrichmentCache):h.createElement("span",null)},download:function(t){return H.default.download(t,e.props.genomeNexusEnrichmentCache)},headerRender:H.default.headerRender,visible:!1,shouldExclude:function(){return!e.props.enableFunctionalImpact}},this._columns[ce.COSMIC]={name:"COSMIC",render:function(t){return W.default.renderFunction(t,e.props.cosmicData)},sortBy:function(t){return W.default.getSortValue(t,e.props.cosmicData)},download:function(t){return W.default.getDownloadValue(t,e.props.cosmicData)},tooltip:h.createElement("span",null,"COSMIC occurrences"),defaultSortDirection:"desc",align:"right"},this._columns[ce.ANNOTATION]={name:"Annotation",render:function(t){return ne.default.renderFunction(t,{hotspots:e.props.hotspots,myCancerGenomeData:e.props.myCancerGenomeData,oncoKbData:e.props.oncoKbData,oncoKbEvidenceCache:e.props.oncoKbEvidenceCache,oncoKbAnnotatedGenes:e.props.oncoKbAnnotatedGenes,pubMedCache:e.props.pubMedCache,civicGenes:e.props.civicGenes,civicVariants:e.props.civicVariants,enableCivic:e.props.enableCivic,enableOncoKb:e.props.enableOncoKb,enableMyCancerGenome:e.props.enableMyCancerGenome,enableHotspot:e.props.enableHotspot,userEmailAddress:e.props.userEmailAddress})},download:function(t){return ne.default.download(t,e.props.oncoKbAnnotatedGenes,e.props.hotspots,e.props.myCancerGenomeData,e.props.oncoKbData,e.props.civicGenes,e.props.civicVariants)},sortBy:function(t){return ne.default.sortValue(t,e.props.oncoKbAnnotatedGenes,e.props.hotspots,e.props.myCancerGenomeData,e.props.oncoKbData,e.props.civicGenes,e.props.civicVariants)}},this._columns[ce.CANCER_TYPE]={name:"Cancer Type",render:function(t){return K.default.render(t,e.props.uniqueSampleKeyToTumorType)},download:function(t){return K.default.download(t,e.props.uniqueSampleKeyToTumorType)},sortBy:function(t){return K.default.sortBy(t,e.props.uniqueSampleKeyToTumorType)},filter:function(t,n,r){return K.default.filter(t,r,e.props.uniqueSampleKeyToTumorType)},tooltip:h.createElement("span",null,"Cancer Type")},this._columns[ce.NUM_MUTATIONS]={name:"# Mut in Sample",render:Y.default.makeRenderFunction(this),headerRender:function(e){return h.createElement("span",{style:{display:"inline-block",maxWidth:55}},e)},sortBy:function(t){return Y.default.sortBy(t,e.props.mutationCountCache)},download:function(t){return Y.default.download(t,e.props.mutationCountCache)},tooltip:h.createElement("span",null,"Total number of nonsynonymous mutations in the sample"),align:"right"}}},{key:"render",value:function(){return h.createElement(pe,{columns:this.columns,data:this.props.data,dataStore:this.props.dataStore,downloadDataFetcher:this.props.downloadDataFetcher,initialItemsPerPage:this.props.initialItemsPerPage,initialSortColumn:this.props.initialSortColumn,initialSortDirection:this.props.initialSortDirection,itemsLabel:this.props.itemsLabel,itemsLabelPlural:this.props.itemsLabelPlural,paginationProps:this.props.paginationProps,showCountHeader:this.props.showCountHeader})}},{key:"orderedColumns",get:function(){var e=this,t=this.props.columns||[];return y.sortBy(t,function(t){var n=-1;return e._columns[t]&&e._columns[t].order&&(n=e._columns[t].order),n})}},{key:"columns",get:function(){var e=this;return this.orderedColumns.reduce(function(t,n){var r=e._columns[n];return!r||r.shouldExclude&&r.shouldExclude()||t.push(r),t},[])}}]),t}(h.Component);fe.defaultProps={initialItemsPerPage:25,showCountHeader:!0,paginationProps:{itemsPerPageOptions:[25,50,100]},initialSortColumn:"Annotation",initialSortDirection:"desc",itemsLabel:"Mutation",itemsLabelPlural:"Mutations",enableOncoKb:!0,enableMyCancerGenome:!0,enableHotspot:!0,enableCivic:!1},ue([g.observable],fe.prototype,"_columns",void 0),ue([g.computed],fe.prototype,"orderedColumns",null),ue([g.computed],fe.prototype,"columns",null),fe=ue([m.observer],fe),t.default=fe},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i),s=n(794),l=function(e){return e&&e.__esModule?e:{default:e}}(s),u=function(){function e(){r(this,e)}return o(e,null,[{key:"getTextValue",value:function(t){return e.getData(t)||""}},{key:"getData",value:function(e){return e.length>0?e[0].sampleId:null}},{key:"renderFunction",value:function(t,n){var r=e.getTextValue(t),o=a.createElement(l.default,{text:r,tooltip:a.createElement("div",{style:{maxWidth:300}},r),maxLength:16});if(n){var i=n[t[0].molecularProfileId],s=i&&i.studyId;if(s){var u="#/patient?sampleId="+r+"&studyId="+s,c=window.location.href.search("index.do");c>-1&&(u=window.location.href.substring(0,c)+"case.do"+u),o=a.createElement("a",{href:u,target:"_blank"},o)}}return o}}]),e}();t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a),l=n(790),u=r(l),c=n(801),p=r(c),f=function(){function e(){o(this,e)}return i(e,null,[{key:"renderFunction",value:function(t){var n=e.getSortValue(t);if(n){var r=t[0].normalAltCount,o=t[0].normalRefCount;return p.default.mainContent(n,r,o)}return s.createElement(u.default,{status:l.TableCellStatus.NA})}},{key:"getSortValue",value:function(e){var t=e[0];if(!t)return null;var n=t.normalAltCount,r=t.normalRefCount;return n<0||r<0?null:n/(n+r)}}]),e}();t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a);n(267);var l=n(815),u=r(l),c=n(816),p=r(c),f=n(171),d=n(790),h=r(d),m=function(){function e(){o(this,e)}return i(e,null,[{key:"renderFunction",value:function(t,n,r){var o=e.getMutSigQValue(t,n),i=e.getVariantCountData(t,r),a=e.makeCohortFrequencyViz(i);return s.createElement("div",null,null!==a&&a,null!==o&&e.makeMutSigIcon(o))}},{key:"getSortValue",value:function(t,n){var r=e.getVariantCountData(t,n);return r&&r.data?r.data.numberOfSamplesWithMutationInGene:null}},{key:"getVariantCountData",value:function(e,t){if(0===e.length)return null;var n=e[0].entrezGeneId,r=e[0].keyword,o=t.get({entrezGeneId:n,keyword:r});return o?Object.assign({hugoGeneSymbol:e[0].gene.hugoGeneSymbol},o):null}},{key:"getMutSigQValue",value:function(e,t){if(!t||0===e.length)return null;var n=t[e[0].entrezGeneId];return n?n.qValue:null}},{key:"makeCohortFrequencyViz",value:function(t){var n=null;if(null===t)n=d.TableCellStatus.LOADING;else if("error"===t.status)n=d.TableCellStatus.ERROR;else{if(null!==t.data){var r=[t.data.numberOfSamplesWithMutationInGene];return t.data.keyword&&r.push(t.data.numberOfSamplesWithKeyword),s.createElement(u.default,{counts:r,totalCount:t.data.numberOfSamples,tooltip:e.getCohortFrequencyTooltip(t)})}n=d.TableCellStatus.NA}if(null!==n)return s.createElement(h.default,{status:n})}},{key:"makeMutSigIcon",value:function(t){var n=function(){return e.getMutSigTooltip(t)};return s.createElement(p.default,{text:"M",tooltip:n})}},{key:"getBoldPercentage",value:function(e){return s.createElement("b",null,(0,f.getPercentage)(e))}},{key:"getCohortFrequencyTooltip",value:function(t){return null===t?s.createElement("span",null,"Querying server for data."):"error"===t.status?s.createElement("span",null,"Error retrieving data."):null===t.data?s.createElement("span",null,"Count data is not available for this gene."):s.createElement("div",null,s.createElement("span",null,t.data.numberOfSamplesWithMutationInGene," samples (",e.getBoldPercentage(t.data.numberOfSamplesWithMutationInGene/t.data.numberOfSamples),") in this study have mutated ",t.hugoGeneSymbol,void 0!==t.data.keyword&&s.createElement("span",null,", out of which ",t.data.numberOfSamplesWithKeyword," (",e.getBoldPercentage(t.data.numberOfSamplesWithKeyword/t.data.numberOfSamples),") have ",t.data.keyword," mutations"),"."))}},{key:"getMutSigTooltip",value:function(e){return s.createElement("div",null,s.createElement("b",null,"MutSig"),s.createElement("br",null),s.createElement("span",null," Q-value: ",(e||0).toExponential(3)))}}]),e}();t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a),l=n(50),u=r(l);n(267);var c=n(790),p=r(c),f=function(){function e(){o(this,e)}return i(e,null,[{key:"renderFunction",value:function(t,n,r){var o=e.getData(t,n,r);return s.createElement(u.default,{placement:"left",overlay:e.getTooltipContents(o),arrowContent:s.createElement("div",{className:"rc-tooltip-arrow-inner"})},e.getTdContents(o))}},{key:"getSortValue",value:function(t,n,r){return e.getTdValue(e.getData(t,n,r))}},{key:"filter",value:function(t,n,r,o){var i=e.getData(t,n,r);return!(!i||!i.data)&&(!!e.altToFilterString[i.data.alteration]&&e.altToFilterString[i.data.alteration].indexOf(o.toLowerCase())>-1)}},{key:"getData",value:function(e,t,n){if(!e||0===e.length||!n.isActive)return null;var r=e[0].sampleId,o=e[0].entrezGeneId,i=t[e[0].molecularProfileId];return i?n.get({sampleId:r,entrezGeneId:o,studyId:i.studyId}):null}},{key:"getTdValue",value:function(e){return null!==e&&"complete"===e.status&&null!==e.data?e.data.alteration:null}},{key:"getTdContents",value:function(e){var t=null;if(null!==e&&"complete"===e.status&&null!==e.data){var n=e.data.alteration;return 2===n?s.createElement("span",{style:{color:"red",textAlign:"center",fontSize:"12px"}},s.createElement("b",null,"Amp")):1===n?s.createElement("span",{style:{color:"red",textAlign:"center",fontSize:"smaller"}},s.createElement("b",null,"Gain")):0===n?s.createElement("span",{style:{color:"black",textAlign:"center",fontSize:"xx-small"}},"Diploid"):-1===n?s.createElement("span",{style:{color:"blue",textAlign:"center",fontSize:"smaller"}},s.createElement("b",null,"ShallowDel")):s.createElement("span",{style:{color:"blue",textAlign:"center",fontSize:"12px"}},s.createElement("b",null,"DeepDel"))}if(null!==(t=e&&"complete"===e.status&&null===e.data?c.TableCellStatus.NA:e&&"error"===e.status?c.TableCellStatus.ERROR:c.TableCellStatus.NA))return s.createElement(p.default,{status:t,naAlt:"CNA data is not available for this gene."})}},{key:"getTooltipContents",value:function(e){var t={"-2":"Deep deletion","-1":"Shallow deletion",0:"Diploid / normal",1:"Low-level gain",2:"High-level amplification"};return e&&"complete"===e.status&&null!==e.data?s.createElement("div",null,s.createElement("span",null,t[e.data.alteration])):e&&"complete"===e.status&&null===e.data?s.createElement("span",null,"CNA data is not available for this gene."):e&&"error"===e.status?s.createElement("span",null,"Error retrieving data."):s.createElement("span",null,"Querying server for data.")}},{key:"isVisible",value:function(e){return e&&e.isActive}}]),e}();t.default=f,f.altToFilterString={2:"amp",1:"gain",0:"diploid","-1":"shallowdel","-2":"deepdel"}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i),s=function(){function e(){r(this,e)}return o(e,null,[{key:"getTextValue",value:function(t){return e.getData(t)||""}},{key:"getDisplayValue",value:function(t){return e.getTextValue(t)}},{key:"getData",value:function(e){return e.length>0?e[0].gene.hugoGeneSymbol:null}},{key:"getSortValue",value:function(t){return e.getTextValue(t)}},{key:"renderFunction",value:function(t){var n=e.getDisplayValue(t);return a.createElement("span",null,n)}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e)}return o(e,null,[{key:"getSortValue",value:function(t){var n=e.getData(t);return n?e.extractSortValue(n):null}},{key:"extractSortValue",value:function(e){var t=/[0-9]+/g,n=e.match(t),r=-1;return n?r=parseInt(n[0]):e.toLowerCase().indexOf("x")>-1?r=23:e.toLowerCase().indexOf("y")>-1&&(r=24),r}},{key:"getData",value:function(e){return e.length>0?e[0].gene.chromosome:null}}]),e}();t.default=i},function(e,t){e.exports={portalWidth:"mutationStatus-module__portalWidth__2s2Qx",germline:"mutationStatus-module__germline__3PooJ",somatic:"mutationStatus-module__somatic__1ieJL",unknown:"mutationStatus-module__unknown__mbYor"}},function(e,t){e.exports={portalWidth:"proteinChange-module__portalWidth__1U76x",proteinChange:"proteinChange-module__proteinChange__2xJ_V",germline:"proteinChange-module__germline__1c0ww"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a),l=n(50),u=r(l),c=n(873),p=r(c),f=n(270),d=r(f),h=function(){function e(){o(this,e)}return i(e,null,[{key:"getDisplayValue",value:function(t){var n=e.getMapEntry(t);return n&&n.label?n.label:e.getTextValue(t)}},{key:"getTextValue",value:function(t){var n="",r=e.getData(t);return r&&(n=r.toString()),n}},{key:"getClassName",value:function(t){var n=e.getMapEntry(t);return n&&n.className?n.className:e.MAIN_MUTATION_TYPE_MAP.other.className}},{key:"getMapEntry",value:function(t){var n=e.getData(t);return n?e.MAIN_MUTATION_TYPE_MAP[(0,d.default)(n)]:void 0}},{key:"getData",value:function(e){return e.length>0?e[0].mutationType:null}},{key:"renderFunction",value:function(t){var n=e.getDisplayValue(t),r=e.getClassName(t),o=e.getTextValue(t),i=s.createElement("span",{className:p.default[r]},n);if(o.toLowerCase()!==n.toLowerCase()){var a=s.createElement("div",{className:"rc-tooltip-arrow-inner"});i=s.createElement(u.default,{overlay:s.createElement("span",null,o),placement:"left",arrowContent:a},i)}return i}},{key:"MAIN_MUTATION_TYPE_MAP",get:function(){return{missense:{label:"Missense",longName:"Missense",className:"missense-mutation",mainType:"missense",priority:1},inframe:{label:"IF",longName:"In-frame",className:"inframe-mutation",mainType:"inframe",priority:2},truncating:{label:"Truncating",longName:"Truncating",className:"trunc-mutation",mainType:"truncating",priority:4},nonsense:{label:"Nonsense",longName:"Nonsense",className:"trunc-mutation",mainType:"truncating",priority:6},nonstop:{label:"Nonstop",longName:"Nonstop",className:"trunc-mutation",mainType:"truncating",priority:7},nonstart:{label:"Nonstart",longName:"Nonstart",className:"trunc-mutation",mainType:"truncating",priority:8},frameshift:{label:"FS",longName:"Frame Shift",className:"trunc-mutation",mainType:"truncating",priority:4},frame_shift_del:{label:"FS del",longName:"Frame Shift Deletion",className:"trunc-mutation",mainType:"truncating",priority:4},frame_shift_ins:{label:"FS ins",longName:"Frame Shift Insertion",className:"trunc-mutation",mainType:"truncating",priority:5},in_frame_ins:{label:"IF ins",longName:"In-frame Insertion",className:"inframe-mutation",mainType:"inframe",priority:3},in_frame_del:{label:"IF del",longName:"In-frame Deletion",className:"inframe-mutation",mainType:"inframe",priority:2},splice_site:{label:"Splice",longName:"Splice site",className:"trunc-mutation",mainType:"truncating",priority:9},fusion:{label:"Fusion",longName:"Fusion",className:"fusion",mainType:"other",priority:10},silent:{label:"Silent",longName:"Silent",className:"other-mutation",mainType:"other",priority:11},other:{label:"Other",longName:"Other",className:"other-mutation",mainType:"other",priority:11}}}}]),e}();t.default=h},function(e,t){e.exports={portalWidth:"mutationType-module__portalWidth__2MF0M","missense-mutation":"mutationType-module__missense-mutation__2vEO9","trunc-mutation":"mutationType-module__trunc-mutation__1fMqq","inframe-mutation":"mutationType-module__inframe-mutation__3PeGf","other-mutation":"mutationType-module__other-mutation__3NGsA","default-mutation":"mutationType-module__default-mutation__27MBJ"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){e.querySelector(".rc-tooltip-arrow").style.left="10px"}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.placeArrow=s;var u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),p=n(96),f=n(18),d=r(f),h=n(50),m=r(h);n(267);var g=n(790),v=r(g),y=n(875),b=r(y),w=n(878),x=r(w),_=n(879),S=r(_),C=n(807),k=r(C),A=n(808),E=r(A),M=n(806),T=r(M),O=n(791),I=r(O),P=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={active:n.props.active},n}return a(t,e),l(t,[{key:"legend",value:function(){var e=this;return c.createElement("div",null,c.createElement("table",{className:"table table-striped table-border-top"},c.createElement("thead",null,c.createElement("tr",null,c.createElement("th",null,"Legend"),c.createElement("th",null,c.createElement("span",{style:{display:"inline-block",width:22},title:"SIFT",onMouseOver:function(){return e.setState({active:"sift"})}},c.createElement("img",{height:14,width:14,src:n(809),alt:"SIFT"}))),c.createElement("th",null,c.createElement("span",{style:{display:"inline-block",width:22},title:"PolyPhen-2",onMouseOver:function(){return e.setState({active:"polyPhen2"})}},c.createElement("img",{height:14,width:14,src:n(810),alt:"PolyPhen-2"}))))),c.createElement("tbody",null,c.createElement("tr",null,c.createElement("td",null,c.createElement("span",{className:(0,d.default)(I.default["annotation-item-text"],T.default["ma-high"])},c.createElement("i",{className:"fa fa-circle","aria-hidden":"true"}))),c.createElement("td",{className:k.default["sift-deleterious"]},"deleterious"),c.createElement("td",{className:E.default["polyPhen2-probably_damaging"]},"probably_damaging")),c.createElement("tr",null,c.createElement("td",null,c.createElement("span",{className:(0,d.default)(I.default["annotation-item-text"],T.default["ma-low"])},c.createElement("i",{className:"fa fa-circle","aria-hidden":"true"}))),c.createElement("td",{className:k.default["sift-deleterious_low_confidence"]},"deleterious_low_confidence"),c.createElement("td",{className:E.default["polyPhen2-possibly_damaging"]},"possibly_damaging")),c.createElement("tr",null,c.createElement("td",null,c.createElement("span",{className:(0,d.default)(I.default["annotation-item-text"],T.default["ma-neutral"])},c.createElement("i",{className:"fa fa-circle","aria-hidden":"true"}))),c.createElement("td",{className:k.default["sift-tolerated_low_confidence"]},"tolerated_low_confidence"),c.createElement("td",{className:E.default["polyPhen2-benign"]},"benign")),c.createElement("tr",null,c.createElement("td",null),c.createElement("td",{className:k.default["sift-tolerated"]},"tolerated"),c.createElement("td",null,"-")))))}},{key:"render",value:function(){return c.createElement("div",null,"mutationAssessor"===this.state.active&&t.mutationAssessorText(),"sift"===this.state.active&&t.siftText(),"polyPhen2"===this.state.active&&t.polyPhen2Text(),this.legend())}}],[{key:"mutationAssessorText",value:function(){return c.createElement("div",{style:{width:450,height:100}},c.createElement("a",{href:b.default.MUTATION_ASSESSOR_URL,target:"_blank"},"Mutation Assessor")," predicts the functional impact of amino-acid substitutions in proteins, such as mutations discovered in cancer or missense polymorphisms. The functional impact is assessed based on evolutionary conservation of the affected amino acid in protein homologs. The method has been validated on a large set (60k) of disease associated (OMIM) and polymorphic variants.")}},{key:"siftText",value:function(){return c.createElement("div",{style:{width:450,height:100}},c.createElement("a",{href:x.default.SIFT_URL,target:"_blank"},"SIFT")," predicts whether an amino acid substitution affects protein function based on sequence homology and the physical properties of amino acids. SIFT can be applied to naturally occurring nonsynonymous polymorphisms and laboratory-induced missense mutations.")}},{key:"polyPhen2Text",value:function(){return c.createElement("div",{style:{width:450,height:100}},c.createElement("a",{href:S.default.POLYPHEN2_URL,target:"_blank"},"PolyPhen-2")," (Polymorphism Phenotyping v2) is a tool which predicts possible impact of an amino acid substitution on the structure and function of a human protein using straightforward physical and comparative considerations.")}}]),t}(c.Component),j=function(){function e(){o(this,e)}return l(e,null,[{key:"headerRender",value:function(e){var t=c.createElement("div",{className:"rc-tooltip-arrow-inner"});return c.createElement("div",null,e,c.createElement("br",null),c.createElement("div",{style:{height:14}},c.createElement(m.default,{overlay:c.createElement(P,{active:"sift"}),placement:"topLeft",trigger:["hover","focus"],arrowContent:t,destroyTooltipOnHide:!0,onPopupAlign:s},c.createElement("span",{style:{display:"inline-block",width:22}},c.createElement("img",{height:14,width:14,src:n(809),alt:"SIFT"}))),c.createElement(m.default,{overlay:c.createElement(P,{active:"polyPhen2"}),placement:"topLeft",trigger:["hover","focus"],arrowContent:t,destroyTooltipOnHide:!0,onPopupAlign:s},c.createElement("span",{style:{display:"inline-block",width:22}},c.createElement("img",{height:14,width:14,src:n(810),alt:"PolyPhen-2"})))))}},{key:"getData",value:function(e){return null===e||"error"===e.status||null===e.data?null:{mutationAssessor:e.data.mutation_assessor&&e.data.mutation_assessor.annotation,siftScore:parseFloat(e.data.transcript_consequences[0].sift_score),siftPrediction:e.data.transcript_consequences[0].sift_prediction,polyPhenScore:parseFloat(e.data.transcript_consequences[0].polyphen_score),polyPhenPrediction:e.data.transcript_consequences[0].polyphen_prediction}}},{key:"renderFunction",value:function(t,n){var r=e.getGenomeNexusData(t,n);return c.createElement("div",null,e.makeFuncionalImpactViz(r))}},{key:"download",value:function(t,n){var r=e.getGenomeNexusData(t,n),o=e.getData(r);return o?["MutationAssessor: "+b.default.download(o.mutationAssessor),"SIFT: "+x.default.download(o.siftScore,o.siftPrediction),"Polyphen-2: "+S.default.download(o.polyPhenScore,o.polyPhenPrediction)].join(";"):""}},{key:"getGenomeNexusData",value:function(e,t){return 0===e.length?null:t.get(e[0])}},{key:"makeFuncionalImpactViz",value:function(t){var n=null;if(null===t)n=g.TableCellStatus.LOADING;else if("error"===t.status)n=g.TableCellStatus.ERROR;else{if(null!==t.data){var r=e.getData(t);return r&&c.createElement("div",null,c.createElement(x.default,{siftScore:r.siftScore,siftPrediction:r.siftPrediction}),c.createElement(S.default,{polyPhenScore:r.polyPhenScore,polyPhenPrediction:r.polyPhenPrediction}))}n=g.TableCellStatus.NA}if(null!==n)return n===g.TableCellStatus.LOADING?c.createElement(p.Circle,{size:18,scaleEnd:.5,scaleStart:.2,color:"#aaa",className:"pull-left"}):c.createElement(v.default,{status:n})}}]),e}();t.default=j},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){e.querySelector(".rc-tooltip-arrow").style.display="none"}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.hideArrow=s;var u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),p=n(50),f=r(p),d=n(791),h=r(d),m=n(18),g=r(m),v=n(876),y=r(v),b=n(806),w=r(b),x=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.tooltipContent=n.tooltipContent.bind(n),n}return a(t,e),l(t,[{key:"render",value:function(){var e=c.createElement("span",{className:""+h.default["annotation-item-text"]});if(this.props.mutationAssessor&&null!==this.props.mutationAssessor.functionalImpact){var t=this.props.mutationAssessor;e=c.createElement("span",{className:(0,g.default)(h.default["annotation-item-text"],w.default["ma-"+t.functionalImpact])},c.createElement("i",{className:"fa fa-circle","aria-hidden":"true"}));var n=c.createElement("div",{className:"rc-tooltip-arrow-inner"});e=c.createElement(f.default,{overlay:this.tooltipContent,placement:"right",trigger:["hover","focus"],arrowContent:n,onPopupAlign:s,destroyTooltipOnHide:!1},e)}return e}},{key:"tooltipContent",value:function(){var e=this.props.mutationAssessor,r=t.maLink("http://mutationassessor.org/r3/?cm=var&p="+e.uniprotId+"&var="+e.variant),o=t.maLink(e.msaLink),i=t.maLink(e.pdbLink),a=e.functionalImpact?c.createElement("div",null,c.createElement("table",{className:y.default["ma-tooltip-table"]},c.createElement("tr",null,c.createElement("td",null,"Source"),c.createElement("td",null,c.createElement("a",{href:"http://mutationassessor.org/r3"},"MutationAssessor"))),c.createElement("tr",null,c.createElement("td",null,"Impact"),c.createElement("td",null,c.createElement("span",{className:w.default["ma-"+e.functionalImpact]},e.functionalImpact))),(e.functionalImpactScore||0===e.functionalImpactScore)&&c.createElement("tr",null,c.createElement("td",null,"Score"),c.createElement("td",null,c.createElement("b",null,e.functionalImpactScore.toFixed(2)))))):null,s=r?c.createElement("div",{className:y.default["mutation-assessor-link"]},c.createElement("a",{href:r,target:"_blank"},c.createElement("img",{height:"15",width:"19",src:n(877),className:y.default["mutation-assessor-main-img"],alt:"Mutation Assessor"}),"Go to Mutation Assessor")):null,l=o?c.createElement("div",{className:y.default["mutation-assessor-link"]},c.createElement("a",{href:o,target:"_blank"},c.createElement("span",{className:y.default["ma-icon"]+" "+y.default["ma-msa-icon"]},"msa"),"Multiple Sequence Alignment")):null,u=i?c.createElement("div",{className:y.default["mutation-assessor-link"]},c.createElement("a",{href:i,target:"_blank"},c.createElement("span",{className:y.default["ma-icon"]+" "+y.default["ma-3d-icon"]},"3D"),"Mutation Assessor 3D View")):null;return c.createElement("span",null,a,l,u,s)}}],[{key:"download",value:function(e){return e?"impact: "+e.functionalImpact+", score: "+e.functionalImpactScore:"Error"}},{key:"maLink",value:function(e){var t=null;return e&&(t=e.replace("getma.org","mutationassessor.org/r3"),0!==t.indexOf("http://")&&(t="http://"+t)),t}}]),t}(c.Component);t.default=x,x.MUTATION_ASSESSOR_URL="http://mutationassessor.org/r3/"},function(e,t){e.exports={portalWidth:"mutationAssessorTooltip-module__portalWidth__15gd3","ma-link":"mutationAssessorTooltip-module__ma-link__3QpML","mutation-assessor-link":"mutationAssessorTooltip-module__mutation-assessor-link__3XLsB","ma-icon":"mutationAssessorTooltip-module__ma-icon__GqjUA","ma-msa-icon":"mutationAssessorTooltip-module__ma-msa-icon__2yT6h","ma-3d-icon":"mutationAssessorTooltip-module__ma-3d-icon__166M3","mutation-assessor-main-img":"mutationAssessorTooltip-module__mutation-assessor-main-img__2QlLP","ma-tooltip-table":"mutationAssessorTooltip-module__ma-tooltip-table__3tyG8"}},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFsAAABJCAIAAADdSs1eAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAdMSURBVHhe7VpdTFdlGA/jS5AARUTDkC/RIlfQ5mbkFisuaH2MNusit6Zrulbroq1uWhdetNVNX5vTNb2xC7rQlW2skcMiZrilFTKQDwEVFJAiFRAFpR97Dw8P53/+5z3nPe/5/4/bOTsXcM778by/9/k9v+d9zj9hbm7ugfBiCCwL0TAhECJidokQkRARWZgIfcSMUEIctab90uS+oxfJoj3PrX2qOCMzLTHaLp7pu3ni3PiZvgnRYOf2NS9WrrJsPHBt+oNv++jVhy+vryzKkDmH8T6ePsLhgDkHT1xt7rweze6xGzOf/nCZ4ECzI80j16dmLdu39tzgz4GjQzjQLJ6IRFqJRU7dvmtpfdfVqcjnM7MWyRRGOHZ6jDcGjvAah6AEApHnt2STuX0j1qZ/2TAk2tRtzbFfW+eQgV1l0QpqeWH41v2ESF5WMoKCsPj3pQ4vHtIOY5Hl+en2azvbbwSaqk2ZBB8o6RARr5F19L/pr453tg84Iur3H1dzs3Z83iH+BRyPP5JOsfCbPRtN8bX+1Kggwnu1D2cuT6QAtH93ac5DSXxMRJa3DnaLJ1+8WTwxffej+gHx72dvFG1YnSrFxStrDjR0OYTD3hRua+9SD+dxoWxtmv041BfetC47JX9lilvieEJkfOKOFjiE0VBf8YdJGiguINyYPCISHU4ZvE1LeZATJ1rY5uN4QqSlfeTO7D0MV74hG4yQ3vbbW5y3XDSANFwZv02NaZEVhYuR0nIo9Pq5zeBvYa5BEN5r8N/FYaMZ4wmRprZhMW71ljwpP6UNOHH6Rw3F4YssWYAs2lDUS1BGNOPEIXBtjFFHpH/4Jm4MnZy4bOum1dIFO2lAxCGt7Rw0pBTOb5POisFbzhsJHlSGpuPEQXiWEkcdEXIQwJGeGjX1dgIEtSHi4IlQXFJNJ5ShjBZ6hByX7vWrFuOrlDiKiCB8IIiIlTyrgzJiKBCH0qpzlya7WZ7Knd8SZaIM3kKe3z7UQzd5HF5JiaOIyJ+9/0BoMEH2iuSKEuvjlivvoMbk8Mjof+0wWICEBc5vPyBRxr4ZiBPtNCQ6KiLS0jEq+lc/YUim2voje5FG4BUJB/I3+/FBMaIMIg4QNN38oGDKd0wjqyAyOT17+vy1BcpoRgQawc8jxCZ7RPix5fVtuagSmO4XKlbSCPbEUUHkt4U0pCw/Mz9HkkQq+A5XCnQnAbIZigIwnY9MjTnQcD0b4qggcnIhDdEYU/kCOHHwfHO+BHR+0i9bZ6R5kfBxoG2I4xqRwbGprsH5gIc05Jly48Cq4AjoQuxIS15iBvaTaM9zLTFLclICTZeUOP/3xC2jpILGNpLEz0RXxudlwfJyffY90nThaMt8KRBwvF/3mBoWQe7l2kea/jIKDVWP5gZ5Ycq2uUPkLEtDntSahigvQHtHd4hQGlJVvgZxRLs1QRjQxap45q7lsBuE9Ufa4AIRqoYU5mXgDuZ6vFvlAhG91RDvpvs0glNEUGEWBUSEDwQRn6wJwrBOEWn62xBdSAzOu0Ew3ScbXCMSwJgK/31lXxPuHZ/8ImoUXi5HiIAvmBXTwDsCmIbkZqWi9A3zuBoqg+IIEV5ADGYaQgk0ZUw+IgLgWTVEQ81d2Vabjjhkia3CKRRnUS9TyH0EcKBEhDlQCkFBxMtk/vVF6Zu+B5xsc/qJ19IeOSKsGqK5XKYXICrW0FlUbXwJIgjdON2JobWXVNUsjtYLBXCRFnCbFaaQIEJ403wKc8SsC+0Z+bXC1BJEeOgW0eS+uEgKFKyVIELpKbjzzv5WLzMpGOe8CyQG5oniHq4sD1m1pKoIvzjU2MNjFejz7kubg5PIw8L65v4fWy8TfLBwb20Z0jbngPKWjuqscJDDjT2k85C6um0Fr1YVqE2psRcM+/p4J2XuMGx3TalHBXCECNaAPO275n5ySzxBbrK3dmO8CiVAAViQDgop3Fld7N15nSIiNhY/jzjQ0C2+TogLnvLa9sIYp/Y//TGETwIU6YECiKzr87M7RAQK8BT4i/h1ES7ksrtqSnUZZM8pMBeu4euWqCACoy2dFhzW9UOSSFwEbRFBaSdAWNBW+8FCERFhMT4AI+LqDWyWPoJyBH4USaEdJAVVfQrtnhCB9Zby7EX8TIhYjg+S+vEFXkztFRExik97GDMf5NugBxGMGCnPXnjun7jaR25tPkLTWGoB0jlXEdekZcg+QcPYaJl+REiej526qJAvQFYPN/b6Kq6x9hGaL9LtUfhDRIyWU1rmxLtqSrSLa9wQcSXPSMYhrqLcj8tXcY0zIpbyjG1H0i3kE66EfNx0ttYo3tL1RzbQpjX2cyM0IPvmKVbd0wVZ6cn8eKLl5KoAgalLjBAheeZpODcFJ1dfDwHOkYodIsKmSHmOsbhKoYk1IsIgeAoKX5DnuBQT7EGJDyKCRDOz91xlbtLt1dIgbohosd6PQeTf9PyYNchjhoiYdydEJERExtjQR0IfCX1EhkDoIzKE/gco765KHggW0QAAAABJRU5ErkJggg=="},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){e.querySelector(".rc-tooltip-arrow").style.display="none"}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.hideArrow=s;var u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),p=n(50),f=r(p),d=n(791),h=r(d),m=n(18),g=r(m),v=n(807),y=r(v),b=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.tooltipContent=n.tooltipContent.bind(n),n}return a(t,e),l(t,[{key:"render",value:function(){var e=c.createElement("span",{className:""+h.default["annotation-item-text"]});if(this.props.siftPrediction&&this.props.siftPrediction.length>0){e=c.createElement("span",{className:(0,g.default)(h.default["annotation-item-text"],y.default["sift-"+this.props.siftPrediction])},c.createElement("i",{className:"fa fa-circle","aria-hidden":"true"}));var t=c.createElement("div",{className:"rc-tooltip-arrow-inner"});e=c.createElement(f.default,{overlay:this.tooltipContent,placement:"right",trigger:["hover","focus"],arrowContent:t,onPopupAlign:s,destroyTooltipOnHide:!1},e)}return e}},{key:"tooltipContent",value:function(){var e=this.props.siftPrediction?c.createElement("div",null,c.createElement("table",{className:y.default["sift-tooltip-table"]},c.createElement("tr",null,c.createElement("td",null,"Source"),c.createElement("td",null,c.createElement("a",{href:"http://sift.bii.a-star.edu.sg/"},"SIFT"))),c.createElement("tr",null,c.createElement("td",null,"Impact"),c.createElement("td",null,c.createElement("span",{className:y.default["sift-"+this.props.siftPrediction]},this.props.siftPrediction))),(this.props.siftScore||0===this.props.siftScore)&&c.createElement("tr",null,c.createElement("td",null,"Score"),c.createElement("td",null,c.createElement("b",null,this.props.siftScore.toFixed(2)))))):null;return c.createElement("span",null,e)}}],[{key:"download",value:function(e,t){return"impact: "+t+", score: "+e}}]),t}(c.Component);t.default=b,b.SIFT_URL="http://sift.bii.a-star.edu.sg/"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){e.querySelector(".rc-tooltip-arrow").style.display="none"}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.hideArrow=s;var u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),p=n(50),f=r(p),d=n(791),h=r(d),m=n(18),g=r(m),v=n(808),y=r(v),b=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.tooltipContent=n.tooltipContent.bind(n),n}return a(t,e),l(t,[{key:"render",value:function(){var e=c.createElement("span",{className:""+h.default["annotation-item-text"]});if(this.props.polyPhenPrediction&&this.props.polyPhenPrediction.length>0){e=c.createElement("span",{className:(0,g.default)(h.default["annotation-item-text"],y.default["polyPhen2-"+this.props.polyPhenPrediction])},c.createElement("i",{className:"fa fa-circle","aria-hidden":"true"}));var t=c.createElement("div",{className:"rc-tooltip-arrow-inner"});e=c.createElement(f.default,{overlay:this.tooltipContent,placement:"right",trigger:["hover","focus"],arrowContent:t,onPopupAlign:s,destroyTooltipOnHide:!1},e)}return e}},{key:"tooltipContent",value:function(){var e=this.props.polyPhenPrediction?c.createElement("div",null,c.createElement("table",{className:y.default["polyPhen2-tooltip-table"]},c.createElement("tr",null,c.createElement("td",null,"Source"),c.createElement("td",null,c.createElement("a",{href:"http://genetics.bwh.harvard.edu/pph2/"},"PolyPhen-2"))),c.createElement("tr",null,c.createElement("td",null,"Impact"),c.createElement("td",null,c.createElement("span",{className:y.default["polyPhen2-"+this.props.polyPhenPrediction]},this.props.polyPhenPrediction))),(this.props.polyPhenScore||0===this.props.polyPhenScore)&&c.createElement("tr",null,c.createElement("td",null,"Score"),c.createElement("td",null,c.createElement("b",null,this.props.polyPhenScore.toFixed(2)))))):null;return c.createElement("span",null,e)}}],[{key:"download",value:function(e,t){return"impact: "+t+", score: "+e}}]),t}(c.Component);t.default=b,b.POLYPHEN2_URL="http://genetics.bwh.harvard.edu/pph2/"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){e.querySelector(".rc-tooltip-arrow").style.left="10px"}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.placeArrow=a;var l=n(1),u=o(l),c=n(50),p=r(c),f=n(3),d=o(f),h=n(881),m=r(h),g=n(882),v=r(g),y=n(795),b=r(y),w=function(){function e(){i(this,e)}return s(e,null,[{key:"getData",value:function(t,n){var r=null;if(t&&n){var o=t[0],i=n[o.keyword];if(i){var a=e.extractPosition(o.proteinChange);r=i.filter(function(t){var n=e.extractPosition(t.proteinChange);return a&&n&&a===n})}}return r}},{key:"extractPosition",value:function(e){var t=/[0-9]+/g,n=e.match(t);return n?n[0]:null}},{key:"getSortValue",value:function(t,n){var r=e.getData(t,n),o=null;return r&&(o=r.length>0?d.reduce(d.map(r,"count"),function(e,t){return e+t},0):0),0===o&&(o=null),o}},{key:"getDownloadValue",value:function(t,n){var r=e.getSortValue(t,n);return r?""+r:""}},{key:"renderFunction",value:function(t,n){var r=e.getData(t,n),o=-1,i="",s=null,l=void 0;return r&&r.length>0&&(o=d.reduce(d.map(r,"count"),function(e,t){return e+t},0),s=function(){return u.createElement("span",{className:v.default["cosmic-table"]},u.createElement("b",null,o)," occurrences of ",u.createElement("b",null,r[0].keyword)," mutations in COSMIC",u.createElement(m.default,{data:r}))},i=o.toString()),l=u.createElement("div",{className:b.default["integer-data"]},i),s&&(l=u.createElement(p.default,{overlay:s,placement:"topLeft",onPopupAlign:a,trigger:["hover","focus"],destroyTooltipOnHide:!0},l)),l}}]),e}();t.default=w},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l),c=n(804),p=r(c),f=n(169),d=r(f),h=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),t}(d.default),m=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n}return a(t,e),s(t,[{key:"render",value:function(){var e=this.props,n=e.data,r=e.columns,o=e.initialSortColumn,i=e.initialSortDirection,a=e.initialItemsPerPage,s=n.length>(this.props.initialItemsPerPage||t.defaultProps.initialItemsPerPage);return u.createElement("div",{className:"cbioportal-frontend"},u.createElement(h,{data:n,columns:r||t.defaultProps.columns,initialSortColumn:o,initialSortDirection:i,initialItemsPerPage:a,showCopyDownload:!1,showColumnVisibility:!1,showFilter:!1,showPagination:s,showPaginationAtTop:!0,paginationProps:{showMoreButton:!1}}))}}]),t}(u.Component);t.default=m,m.defaultProps={data:[],columns:[{name:"COSMIC ID",order:1,render:function(e){return u.createElement("span",null,u.createElement("a",{href:"http://cancer.sanger.ac.uk/cosmic/mutation/overview?id="+e.cosmicMutationId,target:"_blank"},e.cosmicMutationId))},sortBy:function(e){return e.cosmicMutationId}},{name:"Protein Change",order:2,render:function(e){return u.createElement("span",null,e.proteinChange)},sortBy:function(e){return p.default.extractSortValue(e.proteinChange)}},{name:"Occurrence",order:3,render:function(e){return u.createElement("span",null,e.count)},sortBy:function(e){return e.count}}],initialSortColumn:"Occurrence",initialSortDirection:"desc",initialItemsPerPage:10}},function(e,t){e.exports={portalWidth:"cosmic-module__portalWidth__3eF_t","cosmic-table":"cosmic-module__cosmic-table__2ms15"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a),l=n(821),u=r(l),c=n(795),p=r(c),f=function(){function e(){o(this,e)}return i(e,null,[{key:"makeRenderFunction",value:function(e){return(0,u.default)(function(t){var n=e.props.mutationCountCache;return n?n.get({sampleId:t[0].sampleId,molecularProfileId:t[0].molecularProfileId}):{status:"error",data:null}},function(e){return s.createElement("div",{className:p.default["integer-data"]},e.mutationCount)},"Mutation count not available for this sample.")}},{key:"sortBy",value:function(e,t){var n=void 0;if(t){var r=t.get({sampleId:e[0].sampleId,molecularProfileId:e[0].molecularProfileId});n=r&&r.data?r.data.mutationCount:null}else n=null;return n}},{key:"download",value:function(t,n){var r=e.sortBy(t,n);return r?""+r:""}}]),e}();t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a),l=n(885),u=r(l),c=n(50),p=r(c),f=function(){function e(){o(this,e)}return i(e,null,[{key:"getData",value:function(e){var t=null;return e.length>0&&(t=e[0].validationStatus),t}},{key:"sortValue",value:function(t){return e.getData(t)}},{key:"download",value:function(t){return e.getData(t)||""}},{key:"renderFunction",value:function(t){var n=e.getData(t),r=void 0,o=!1;if(n){var i=e.VALIDATION_STATUS_FORMAT[n.toLowerCase()];i?(r=s.createElement("span",{className:u.default[i.className]},i.text),o=!0):r=s.createElement("span",{className:u.default.other},n)}else r=s.createElement("span",null);return o&&(r=s.createElement(p.default,{overlay:s.createElement("span",null,n),placement:"right"},r)),r}},{key:"VALIDATION_STATUS_FORMAT",get:function(){var e={text:"U",className:"unknown",tooltip:"Unknown"},t={text:"V",className:"valid",tooltip:"Valid"};return{valid:t,validated:t,wildtype:{text:"W",className:"wildtype",tooltip:"Wildtype"},unknown:e,not_tested:e,"not tested":e,none:e,na:e,"n/a":e}}}]),e}();t.default=f},function(e,t){e.exports={portalWidth:"validationStatus-module__portalWidth__yrVHU",unknown:"validationStatus-module__unknown__1XsWI",valid:"validationStatus-module__valid__Ziu-a",wildtype:"validationStatus-module__wildtype__14GJI",other:"validationStatus-module__other__3oLt_"}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i),s=n(794),l=function(e){return e&&e.__esModule?e:{default:e}}(s),u=n(16),c=function(){function e(){r(this,e)}return o(e,null,[{key:"getStudy",value:function(e,t,n){if(!t||!n)return null;var r=e[0].molecularProfileId,o=t[r];return o?n[o.studyId]||null:null}},{key:"renderFunction",value:function(t,n,r){var o=e.getStudy(t,n,r);return o?a.createElement("a",{href:(0,u.getStudySummaryUrl)(o.studyId),target:"_blank"},a.createElement(l.default,{text:o.name,tooltip:a.createElement("div",{style:{maxWidth:300},dangerouslySetInnerHTML:{__html:o.name+": "+o.description}}),maxLength:16})):a.createElement("span",null)}},{key:"getTextValue",value:function(t,n,r){var o=e.getStudy(t,n,r);return o?o.name:""}},{key:"filter",value:function(t,n,r,o){var i=e.getStudy(t,r,o);return!!i&&i.name.toUpperCase().indexOf(n)>-1}}]),e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(888),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=o.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),p=r(c),f=n(2),d=r(f),h=n(889),m=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={expandChildHeight:0,expandChildWidth:0,expandScrollLeft:0,expandScrollTop:0,shrinkScrollTop:0,shrinkScrollLeft:0,lastWidth:0,lastHeight:0},e.reset=e.reset.bind(e),e.handleScroll=e.handleScroll.bind(e),e}return a(t,e),u(t,[{key:"componentWillMount",value:function(){this.forceUpdate()}},{key:"componentDidMount",value:function(){var e=this.containerSize(),t=l(e,2),n=t[0],r=t[1];this.reset(n,r)}},{key:"shouldComponentUpdate",value:function(e,t){return this.props!==e||this.state!==t}},{key:"componentDidUpdate",value:function(){this.expand.scrollLeft=this.expand.scrollWidth,this.expand.scrollTop=this.expand.scrollHeight,this.shrink.scrollLeft=this.shrink.scrollWidth,this.shrink.scrollTop=this.shrink.scrollHeight}},{key:"containerSize",value:function(){return[this.props.handleWidth&&this.container.parentElement.offsetWidth,this.props.handleHeight&&this.container.parentElement.offsetHeight]}},{key:"reset",value:function(e,t){if("undefined"!=typeof window){var n=this.container.parentElement,r="static";n.currentStyle?r=n.currentStyle.position:window.getComputedStyle&&(r=window.getComputedStyle(n).position),"static"===r&&(n.style.position="relative"),this.setState({expandChildHeight:this.expand.offsetHeight+10,expandChildWidth:this.expand.offsetWidth+10,lastWidth:e,lastHeight:t})}}},{key:"handleScroll",value:function(){if("undefined"!=typeof window){var e=this.state,t=this.containerSize(),n=l(t,2),r=n[0],o=n[1];r===e.lastWidth&&o===e.lastHeight||this.props.onResize(r,o),this.reset(r,o)}}},{key:"render",value:function(){var e=this,t=this.state,n=s({},h.expandChildStyle,{width:t.expandChildWidth,height:t.expandChildHeight});return p.default.createElement("div",{style:h.parentStyle,ref:function(t){e.container=t}},p.default.createElement("div",{style:h.parentStyle,onScroll:this.handleScroll,ref:function(t){e.expand=t}},p.default.createElement("div",{style:n})),p.default.createElement("div",{style:h.parentStyle,onScroll:this.handleScroll,ref:function(t){e.shrink=t}},p.default.createElement("div",{style:h.shrinkChildStyle})))}}]),t}(c.Component);t.default=m,m.propTypes={handleWidth:d.default.bool,handleHeight:d.default.bool,onResize:d.default.func},m.defaultProps={handleWidth:!1,handleHeight:!1,onResize:function(e){return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.parentStyle={position:"absolute",left:0,top:0,right:0,bottom:0,overflow:"scroll",zIndex:-1,visibility:"hidden"},t.shrinkChildStyle={position:"absolute",left:0,top:0,width:"200%",height:"200%"},t.expandChildStyle={position:"absolute",left:0,top:0,width:"100%",height:"100%"}},function(e,t){},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s),u=n(28),c=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.defaultTitle="Sorry, something went wrong!",e.defaultTroubleshooting=["Check that your URL parameters are valid.","Make sure you are connected to the internet."],e}return i(t,e),a(t,[{key:"render",value:function(){return l.createElement(u.Modal,{show:this.props.show,onHide:this.props.onHide},l.createElement(u.Modal.Header,{closeButton:!0},l.createElement(u.Modal.Title,null,void 0===this.props.title?this.defaultTitle:this.props.title)),l.createElement(u.Modal.Body,null,l.createElement("p",null,"Troubleshooting:"),l.createElement("ul",null,(this.props.troubleshooting||this.defaultTroubleshooting).map(function(e){return l.createElement("li",null,e)}))))}}]),t}(l.Component);t.default=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.MutationColor=t.SideChain=t.ProteinColor=t.ProteinScheme=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(904),a=t.ProteinScheme=void 0;!function(e){e[e.CARTOON=0]="CARTOON",e[e.SPACE_FILLING=1]="SPACE_FILLING",e[e.TRACE=2]="TRACE",e[e.BALL_AND_STICK=3]="BALL_AND_STICK",e[e.RIBBON=4]="RIBBON"}(a||(t.ProteinScheme=a={}));var s=t.ProteinColor=void 0;!function(e){e[e.UNIFORM=0]="UNIFORM",e[e.SECONDARY_STRUCTURE=1]="SECONDARY_STRUCTURE",e[e.NC_RAINBOW=2]="NC_RAINBOW",e[e.ATOM_TYPE=3]="ATOM_TYPE"}(s||(t.ProteinColor=s={}));var l=t.SideChain=void 0;!function(e){e[e.ALL=0]="ALL",e[e.SELECTED=1]="SELECTED",e[e.NONE=2]="NONE"}(l||(t.SideChain=l={}));var u=t.MutationColor=void 0;!function(e){e[e.UNIFORM=0]="UNIFORM",e[e.MUTATION_TYPE=1]="MUTATION_TYPE",e[e.NONE=2]="NONE"}(u||(t.MutationColor=u={}));var c=function(){function e(){r(this,e)}return o(e,[{key:"updateVisualStyle",value:function(e,t,n){var r=this.updateScheme(n);this.updateBaseVisualStyle(r,n),this.updateChainVisualStyle(t,r,n),this.updateResidueStyle(e,t,n,r),this.updateBoundMolecules(n)}},{key:"updateScheme",value:function(e){var t=this.selectAll();return this.setScheme(e.proteinScheme,t)}},{key:"updateBaseVisualStyle",value:function(t,n){var r=e.defaultProps,o=this.selectAll();this.setColor(n.baseColor||r.baseColor,o,t),this.setTransparency(n.baseTranslucency||r.baseTranslucency,o,t)}},{key:"updateChainVisualStyle",value:function(t,n,r){var o=e.defaultProps,i=this.selectChain(t);this.setColor(r.chainColor||o.chainColor,i,n),this.setTransparency(r.chainTranslucency||o.chainTranslucency,i,n),r.proteinColor===s.ATOM_TYPE?(i=this.selectChain(t),this.cpkColor(i,n)):r.proteinColor===s.SECONDARY_STRUCTURE?(i=this.selectAlphaHelix(t),this.setColor((r.structureColors||o.structureColors).alphaHelix,i,n),i=this.selectBetaSheet(t),this.setColor((r.structureColors||o.structureColors).betaSheet,i,n)):r.proteinColor===s.NC_RAINBOW&&(i=this.selectChain(t),this.rainbowColor(i,n))}},{key:"updateBoundMolecules",value:function(e){e.displayBoundMolecules||this.hideBoundMolecules()}},{key:"convertPositionsToResCode",value:function(e){var t=[];return e.forEach(function(e){t=t.concat((0,i.convertPdbPosToResCode)(e))}),t}}]),e}();c.defaultProps={pdbUri:"https://files.rcsb.org/view/",proteinScheme:a.CARTOON,displayBoundMolecules:!0,backgroundColor:"#FFFFFF",baseColor:"#DDDDDD",structureColors:{alphaHelix:"#FFA500",betaSheet:"#0000FF",loop:"#DDDDDD"},baseTranslucency:5,chainColor:"#888888",chainTranslucency:0,proteinColor:s.UNIFORM,mutationColor:u.MUTATION_TYPE,uniformMutationColor:"#8A2BE2",highlightColor:"#FFDD00",sideChain:l.SELECTED},t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),p=n(10),f=n(790),d=r(f),h=n(173),m=n(974),g=r(m),v=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},y=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"render",value:function(){var e=null,t=null;if(this.props.cache){var n=this.props.cache.get(this.props.pdbId);if(null===n)e=c.createElement(d.default,{status:f.TableCellStatus.LOADING}),t=c.createElement(d.default,{status:f.TableCellStatus.LOADING});else if("error"===n.status)e=c.createElement(d.default,{status:f.TableCellStatus.ERROR}),t=c.createElement(d.default,{status:f.TableCellStatus.ERROR});else if(null===n.data)e=c.createElement(d.default,{status:f.TableCellStatus.NA}),t=c.createElement(d.default,{status:f.TableCellStatus.NA});else{var r=(0,h.generatePdbInfoSummary)(n.data,this.props.chainId);e=r.pdbInfo,t=r.moleculeInfo}}return c.createElement("div",{className:this.props.truncateText?"col col-sm-12":""},c.createElement("div",{className:this.props.truncateText?"row":""},c.createElement("div",{className:"pull-left",style:{paddingRight:5}},c.createElement("span",{style:{fontWeight:this.props.summaryFormat?"bold":"normal"}},c.createElement("span",null,this.props.summaryFormat?"pdb":"PDB"),!this.props.summaryFormat&&c.createElement("span",{style:{paddingLeft:5}},c.createElement("a",{href:"http://www.rcsb.org/pdb/explore/explore.do?structureId="+this.props.pdbId,target:"_blank"},c.createElement("b",null,this.props.pdbId))),c.createElement("span",null,":"))),c.createElement("div",null,this.props.truncateText?c.createElement(g.default,{text:e}):c.createElement("span",null,e))),c.createElement("div",{className:this.props.truncateText?"row":""},c.createElement("div",{className:"pull-left",style:{paddingRight:5}},c.createElement("span",{style:{fontWeight:this.props.summaryFormat?"bold":"normal"}},c.createElement("span",null,this.props.summaryFormat?"chain":"Chain"),!this.props.summaryFormat&&c.createElement("span",{style:{paddingLeft:3}},c.createElement("b",null,this.props.chainId)),c.createElement("span",null,":"))),c.createElement("div",null,this.props.truncateText?c.createElement(g.default,{text:t}):c.createElement("span",null,t))))}}]),t}(c.Component);y=v([p.observer],y),t.default=y},function(e,t,n){"use strict";function r(e){return new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}")}function o(e,t){var n=r(e);return function(r,o){return t(n(r),o,e)}}function i(e){var t=Object.create(null),n=[];return e.forEach(function(e){for(var r in e)r in t||n.push(t[r]=r)}),n}var a={},s={},l=34,u=10,c=13;t.a=function(e){function t(e,t){var i,a,s=n(e,function(e,n){if(i)return i(e,n-1);a=e,i=t?o(e,t):r(e)});return s.columns=a||[],s}function n(e,t){function n(){if(d)return s;if(h)return h=!1,a;var t,n,r=p;if(e.charCodeAt(r)===l){for(;p++<i&&e.charCodeAt(p)!==l||e.charCodeAt(++p)===l;);return(t=p)>=i?d=!0:(n=e.charCodeAt(p++))===u?h=!0:n===c&&(h=!0,e.charCodeAt(p)===u&&++p),e.slice(r+1,t-1).replace(/""/g,'"')}for(;p<i;){if((n=e.charCodeAt(t=p++))===u)h=!0;else if(n===c)h=!0,e.charCodeAt(p)===u&&++p;else if(n!==g)continue;return e.slice(r,t)}return d=!0,e.slice(r,i)}var r,o=[],i=e.length,p=0,f=0,d=i<=0,h=!1;for(e.charCodeAt(i-1)===u&&--i,e.charCodeAt(i-1)===c&&--i;(r=n())!==s;){for(var m=[];r!==a&&r!==s;)m.push(r),r=n();t&&null==(m=t(m,f++))||o.push(m)}return o}function p(t,n){return null==n&&(n=i(t)),[n.map(h).join(e)].concat(t.map(function(t){return n.map(function(e){return h(t[e])}).join(e)})).join("\n")}function f(e){return e.map(d).join("\n")}function d(t){return t.map(h).join(e)}function h(e){return null==e?"":m.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}var m=new RegExp('["'+e+"\n\r]"),g=e.charCodeAt(0);return{parse:t,parseRows:n,format:p,formatRows:f}}},function(e,t,n){e.exports=n(4)(90)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=n(2),l=r(s),u=n(812),c=r(u),p=n(1),f=r(p),d=n(19),h=r(d),m=n(813),g=r(m),v=n(796),y=r(v),b=n(1047),w=r(b),x=function(e){function t(){var n,r,a;o(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=i(this,e.call.apply(e,[this].concat(l))),r.setContainer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.props;r._portalContainerNode=(0,g.default)(e.container,(0,y.default)(r).body)},r.getMountNode=function(){return r._portalContainerNode},a=n,i(r,a)}return a(t,e),t.prototype.componentDidMount=function(){this.setContainer(),this.forceUpdate(this.props.onRendered)},t.prototype.componentWillReceiveProps=function(e){e.container!==this.props.container&&this.setContainer(e)},t.prototype.componentWillUnmount=function(){this._portalContainerNode=null},t.prototype.render=function(){return this.props.children&&this._portalContainerNode?h.default.createPortal(this.props.children,this._portalContainerNode):null},t}(f.default.Component);x.displayName="Portal",x.propTypes={container:l.default.oneOfType([c.default,l.default.func]),onRendered:l.default.func},t.default=h.default.createPortal?x:w.default,e.exports=t.default},,,,,,function(e,t,n){e.exports=n(4)(1073)},function(e,t){},function(e,t,n){"use strict";function r(e){for(var t=[],n=e.start.position,r=e.end.position,o=n;o<=r;o++)t.push(""+o);return e.start.insertionCode&&(t[0]+="^"+e.start.insertionCode),t.length>1&&e.end.insertionCode&&(t[t.length-1]+="^"+e.end.insertionCode),t}function o(e){for(var t=[],n=e.start.position,r=e.end.position,o=n;o<=r;o++)t.push({resi:o});return e.start.insertionCode&&(t[0].icode=e.start.insertionCode),t.length>1&&e.end.insertionCode&&(t[t.length-1].icode=e.end.insertionCode),t}function i(e){var t={};return e.forEach(function(e){var n=o(e.positionRange),r=l.groupBy(n,"resi");l.each(l.keys(r),function(n){t[n]||(t[n]=[]),l.each(r[n],function(r){t[n].push({selector:r,residue:e})})})}),t}function a(e,t){var n=[];return l.each(l.keys(e),function(r){l.isEqual(e[r],t[r])||(n=n.concat(e[r]))}),n}Object.defineProperty(t,"__esModule",{value:!0}),t.convertPdbPosToResCode=r,t.convertPdbPosToResAndInsCode=o,t.generateResiduePosToSelectorMap=i,t.findUpdatedResidues=a;var s=n(3),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.HitZone=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s),u=t.HitZone=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handlers={onMouseOver:function(){n.props.onMouseOver&&n.props.onMouseOver(),n.props.onMouseEnter&&n.props.onMouseEnter()},onMouseOut:function(){n.props.onMouseOut&&n.props.onMouseOut(),n.props.onMouseLeave&&n.props.onMouseLeave()}},n}return i(t,e),a(t,[{key:"render",value:function(){return l.createElement("svg",{width:this.props.width,height:this.props.height,style:{position:"absolute",top:this.props.y,left:this.props.x,cursor:this.props.cursor},onMouseOver:this.handlers.onMouseOver,onClick:this.props.onClick,onMouseOut:this.handlers.onMouseOut})}}]),t}(l.Component);t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){for(var t=window.atob(e),n=t.length,r=new Uint8Array(n),o=0;o<n;o++){var i=t.charCodeAt(o);r[o]=i}return r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n="<?xml version='1.0'?>"+(new XMLSerializer).serializeToString(t);if(n.length>2e6)return!1;return l.default.post("svgtopdf.do").type("form").send({filetype:"pdf_data",svgelement:n}).end(function(t,n){!t&&n.ok&&(0,a.default)(o(n.text),e)}),!0};var i=n(170),a=r(i),s=n(20),l=r(s)},function(e,t,n){"use strict";function r(e){return e>0?"Co-occurrence":"Mutual exclusivity"}function o(e,t){var n=0,r=0,o=0,i=0;return e.forEach(function(e,a){var s=t[a];e||s?!e&&s?r++:e&&!s?o++:i++:n++}),[n,r,o,i]}function i(e,t,n,r){return(0,g.getCumulativePValue)(e,t,n,r)}function a(e,t,n,r){return e*r==0&&t*n==0?1/0:Math.log(e*r/(t*n))}function s(e,t){var n=null,r=null,o=e.filter(function(e){return t(e.logOddsRatio)}),i=o.filter(function(e){return e.pValue<.05}),a=o.length,s=i.length;return n=0===a?m.createElement("span",null,m.createElement("b",null,"no")," gene pair"):1===a?m.createElement("span",null,m.createElement("b",null,"1")," gene pair"):m.createElement("span",null,m.createElement("b",null,a)," gene pairs"),a>0&&(r=0===s?m.createElement("span",null," (none significant)"):m.createElement("span",null," (",m.createElement("b",null,s)," significant)")),[n,r]}function l(e){var t=s(e,function(e){return e<=0}),n=s(e,function(e){return e>0});return m.createElement("p",null,"The query contains ",t[0]," with mutually exclusive alterations",t[1],", and ",n[0]," with co-occurrent alterations",n[1],".")}function u(e){var t=[];return y.default.bigCombination(Object.keys(e),2).toArray().forEach(function(n){var s=n[0],l=n[1],u=o(e[s],e[l]),c=i(u[0],u[1],u[2],u[3]),p=a(u[0],u[1],u[2],u[3]),f=r(p);t.push({geneA:s,geneB:l,pValue:c,logOddsRatio:p,association:f,neitherCount:u[0],bNotACount:u[1],aNotBCount:u[2],bothCount:u[3]})}),t}function c(e,t,n,r){return e.filter(function(e){var o=!1;return t&&(o=o||e.logOddsRatio<=0),n&&(o=o||e.logOddsRatio>0),r&&(o=o&&e.pValue<.05),o})}function p(e){return e<.001?"<0.001":e.toFixed(3)}function f(e){var t=m.createElement("span",null,p(e));return e<.05&&(t=m.createElement("b",null,t)),t}function d(e){return e<-3?"<-3":e>3?">3":e.toFixed(3)}Object.defineProperty(t,"__esModule",{value:!0}),t.calculateAssociation=r,t.countOccurences=o,t.calculatePValue=i,t.calculateLogOddsRatio=a,t.getMutuallyExclusiveCounts=s,t.getCountsText=l,t.getData=u,t.getFilteredData=c,t.formatPValue=p,t.formatPValueWithStyle=f,t.formatLogOddsRatio=d;var h=n(1),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(h),g=n(1e3),v=n(1001),y=function(e){return e&&e.__esModule?e:{default:e}}(v)},function(e,t){e.exports={portalWidth:"styles-module__portalWidth__1kueS",SurvivalTable:"styles-module__SurvivalTable__2NKCT",Tooltip:"styles-module__Tooltip__1I-Ty",NotAvailable:"styles-module__NotAvailable__1Zx5R"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CLINICAL_TRACK_GROUP_INDEX=t.GENETIC_TRACK_GROUP_INDEX=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),p=n(1022),f=r(p),d=n(10),h=n(8),m=n(1023),g=n(3),v=r(g),y=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},b=t.GENETIC_TRACK_GROUP_INDEX=1,w=t.CLINICAL_TRACK_GROUP_INDEX=0,x=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.trackSpecKeyToTrackId={},e.divRefHandler=e.divRefHandler.bind(e),e.refreshOncoprint=v.default.debounce(e.refreshOncoprint,50),e}return a(t,e),s(t,[{key:"divRefHandler",value:function(e){this.div=e}},{key:"refreshOncoprint",value:function(e){var t=this;this.oncoprint||(this.oncoprint=new f.default("#"+e.divId,e.width),this.oncoprint.setTrackGroupLegendOrder([b,w]),window.frontendOnc=this.oncoprint,e.oncoprintRef&&e.oncoprintRef(this.oncoprint)),this.oncoprint.webgl_unavailable||((0,m.transition)(e,this.lastTransitionProps||{},this.oncoprint,function(){return t.trackSpecKeyToTrackId}),this.lastTransitionProps=v.default.clone(this.props))}},{key:"componentWillReceiveProps",value:function(e){this.refreshOncoprint(e)}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"componentDidMount",value:function(){this.refreshOncoprint(this.props)}},{key:"render",value:function(){return c.createElement("div",{id:this.props.divId,ref:this.divRefHandler})}},{key:"sortByMutationType",get:function(){return this.props.distinguishMutationType&&this.props.sortConfig&&this.props.sortConfig.sortByMutationType}},{key:"sortByDrivers",get:function(){return this.props.distinguishDrivers&&this.props.sortConfig&&this.props.sortConfig.sortByDrivers}}]),t}(c.Component);y([h.computed],x.prototype,"sortByMutationType",null),y([h.computed],x.prototype,"sortByDrivers",null),x=y([d.observer],x),t.default=x},function(e,t,n){"use strict";function r(e,t){e.suppressRendering(),e.keepSorted(!1),t(),e.keepSorted(!0),e.releaseRendering()}function o(){return{type:"gradient",legend_label:"Heatmap",value_key:"profile_data",value_range:[-3,3],colors:[[0,0,255,1],[0,0,0,1],[255,0,0,1]],value_stop_points:[-3,0,3],null_color:"rgba(224,224,224,1)"}}function i(e,t){return e||t?!e&&t?p.genetic_rule_set_same_color_for_all_recurrence:e&&!t?p.genetic_rule_set_different_colors_no_recurrence:p.genetic_rule_set_different_colors_recurrence:p.genetic_rule_set_same_color_for_all_no_recurrence}function a(e){return"number"===e.datatype?{type:"bar",value_key:"attr_val",value_range:e.numberRange,log_scale:e.numberLogScale}:"counts"===e.datatype?{type:"stacked_bar",value_key:"attr_val",categories:e.countsCategoryLabels,fills:e.countsCategoryFills}:{type:"categorical",category_key:"attr_val"}}function s(e,t){var n=e/t,r=100*n,o=void 0;return n<.03?(o=r.toFixed(1),"0"===o[o.length-1]&&(o=r.toFixed())):o=r.toFixed(),o+"%"}function l(e,t){var n=this;return(0,f.remoteData)({await:function(){return[e.props.store.genes,e.props.store.samples,e.props.store.patients,e.props.store.putativeDriverFilteredCaseAggregatedDataByOQLLine,e.props.store.molecularProfileIdToMolecularProfile,e.props.store.genePanelInformation,e.props.store.alteredSampleKeys,e.props.store.sequencedSampleKeysByGene,e.props.store.alteredPatientKeys,e.props.store.sequencedPatientKeysByGene]},invoke:function(){return y(n,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",e.props.store.putativeDriverFilteredCaseAggregatedDataByOQLLine.result.map(function(n,r){var o=(0,d.makeGeneticTrackData)(t?n.cases.samples:n.cases.patients,n.oql.gene,t?e.props.store.samples.result:e.props.store.patients.result,e.props.store.genePanelInformation.result),i=t?e.props.store.sequencedSampleKeysByGene.result[n.oql.gene].length:e.props.store.sequencedPatientKeysByGene.result[n.oql.gene].length,a=t?Object.keys(n.cases.samples).filter(function(e){return!!n.cases.samples[e].length}).length:Object.keys(n.cases.patients).filter(function(e){return!!n.cases.patients[e].length}).length,l=void 0;return l=0===i?"N/S":s(a,i),{key:"GENETICTRACK_"+r,label:n.oql.gene,oql:n.oql.oql_line,info:l,data:o}}));case 1:case"end":return n.stop()}},n,this)}))},default:[]})}function u(e,t){var n=this;return(0,f.remoteData)({await:function(){return[e.props.store.samples,e.props.store.patients,e.clinicalAttributesById]},invoke:function(){return y(n,void 0,void 0,regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(0!==e.selectedClinicalAttributeIds.keys().length){n.next=2;break}return n.abrupt("return",[]);case 2:return r=e.selectedClinicalAttributeIds.keys().map(function(t){return e.clinicalAttributesById.result[t]}).filter(function(e){return!!e}),n.next=5,e.props.store.clinicalDataCache.getPromise(r,!0);case 5:return n.abrupt("return",r.map(function(n){var r=e.props.store.clinicalDataCache.get(n).data,o={key:e.clinicalAttributeIdToTrackKey(n.clinicalAttributeId),label:n.displayName,description:n.description,data:(0,d.makeClinicalTrackData)(n,t?e.props.store.samples.result:e.props.store.patients.result,r)};return"NUMBER"===n.datatype?(o.datatype="number",n.clinicalAttributeId===v.SpecialAttribute.FractionGenomeAltered?o.numberRange=[0,1]:n.clinicalAttributeId===v.SpecialAttribute.MutationCount&&(o.numberLogScale=!0)):"STRING"===n.datatype?o.datatype="string":n.clinicalAttributeId===v.SpecialAttribute.MutationSpectrum&&(o.datatype="counts",o.countsCategoryLabels=["C>A","C>G","C>T","T>A","T>C","T>G"],o.countsCategoryFills=["#3D6EB1","#8EBFDC","#DFF1F8","#FCE08E","#F78F5E","#D62B23"]),o}));case 6:case"end":return n.stop()}},n,this)}))},default:[]})}function c(e,t){var n=this;return(0,f.remoteData)({await:function(){return[e.props.store.samples,e.props.store.patients,e.props.store.molecularProfileIdToMolecularProfile,e.props.store.geneMolecularDataCache]},invoke:function(){return y(n,void 0,void 0,regeneratorRuntime.mark(function n(){var r,o,i,a,s,l,u;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props.store.molecularProfileIdToMolecularProfile.result,o=e.molecularProfileIdToHeatmapTracks,i=m.default.flatten(o.values().map(function(e){return e.genes.keys()})),n.next=5,e.props.store.geneCache.getPromise(i.map(function(e){return{hugoGeneSymbol:e}}),!0);case 5:return a=n.sent,s=m.default.flatten(o.entries().map(function(t){return t[1].genes.keys().map(function(n){return{molecularProfileId:t[0],entrezGeneId:e.props.store.geneCache.get({hugoGeneSymbol:n}).data.entrezGeneId,hugoGeneSymbol:n.toUpperCase()}})})),n.next=9,e.props.store.geneMolecularDataCache.result.getPromise(s,!0);case 9:return l=e.props.store.samples.result,u=e.props.store.patients.result,n.abrupt("return",s.map(function(n){var i=n.molecularProfileId,a=n.hugoGeneSymbol,s=e.props.store.geneMolecularDataCache.result.get(n).data;return{key:"HEATMAPTRACK_"+i+","+a,label:a,molecularProfileId:i,molecularAlterationType:r[i].molecularAlterationType,datatype:r[i].datatype,data:(0,d.makeHeatmapTrackData)(a,t?l:u,s),trackGroupIndex:o.get(i).trackGroupIndex,onRemove:(0,g.action)(function(){var t=o.get(i);t&&(t.genes.delete(a),t.genes.size||(o.delete(i),"heatmap"===e.sortMode.type&&e.sortMode.clusteredHeatmapProfile===i&&e.sortByData()))})}}));case 12:case"end":return n.stop()}},n,this)}))},default:[]})}Object.defineProperty(t,"__esModule",{value:!0}),t.doWithRenderingSuppressedAndSortingOff=r,t.getHeatmapTrackRuleSetParams=o,t.getGeneticTrackRuleSetParams=i,t.getClinicalTrackRuleSetParams=a,t.percentAltered=s,t.makeGeneticTracksMobxPromise=l,t.makeClinicalTracksMobxPromise=u,t.makeHeatmapTracksMobxPromise=c;var p=n(1024),f=n(86),d=n(1025),h=n(3),m=function(e){return e&&e.__esModule?e:{default:e}}(h),g=n(8),v=n(271),y=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}l((r=r.apply(e,t||[])).next())})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=n(18),u=r(l),c=n(1033),p=r(c),f=n(824),d=r(f),h=n(1034),m=r(h),g=n(913),v=r(g),y=n(276),b=r(y),w=n(2),x=r(w),_=n(1),S=r(_),C=n(19),k=r(C),A=n(825),E=r(A),M=n(915),T=r(M),O=n(796),I=r(O),P=n(916),j=r(P),D=function(e){function t(n,r){o(this,t);var a=i(this,e.call(this,n,r));return a.onWindowScroll=function(){a.onUpdate()},a.onDocumentClick=function(){(0,b.default)(function(){return a.onUpdate()})},a.onUpdate=function(){if(a._isMounted){var e=a.props,t=e.offsetTop,n=e.viewportOffsetTop,r=(0,v.default)((0,j.default)(a)),o=r+(n||0);return o<=t?void a.updateState("top",null,null):o>a.getPositionTopMax()?void("bottom"===a.state.affixed?a.updateStateAtBottom():a.setState({affixed:"bottom",position:"absolute",top:null},function(){a._isMounted&&a.updateStateAtBottom()})):void a.updateState("affix","fixed",n)}},a.getPositionTopMax=function(){return(0,T.default)((0,I.default)(a))-(0,p.default)(k.default.findDOMNode(a))-a.props.offsetBottom},a.updateState=function(e,t,n){if(e!==a.state.affixed||t!==a.state.position||n!==a.state.top){var r="affix"===e?"":e.charAt(0).toUpperCase()+e.substr(1);a.props["onAffix"+r]&&a.props["onAffix"+r](),a.setState({affixed:e,position:t,top:n},function(){a.props["onAffixed"+r]&&a.props["onAffixed"+r]()})}},a.updateStateAtBottom=function(){var e=a.getPositionTopMax(),t=(0,m.default)(k.default.findDOMNode(a)),n=(0,d.default)(t).top;a.updateState("bottom","absolute",e-n)},a.state={affixed:"top",position:null,top:null},a._needPositionUpdate=!1,a}return a(t,e),t.prototype.componentDidMount=function(){var e=this;this._isMounted=!0,this._windowScrollListener=(0,E.default)((0,j.default)(this),"scroll",function(){return e.onWindowScroll()}),this._documentClickListener=(0,E.default)((0,I.default)(this),"click",function(){return e.onDocumentClick()}),this.onUpdate()},t.prototype.componentWillReceiveProps=function(){this._needPositionUpdate=!0},t.prototype.componentDidUpdate=function(){this._needPositionUpdate&&(this._needPositionUpdate=!1,this.onUpdate())},t.prototype.componentWillUnmount=function(){this._isMounted=!1,this._windowScrollListener&&this._windowScrollListener.remove(),this._documentClickListener&&this._documentClickListener.remove()},t.prototype.render=function(){var e=S.default.Children.only(this.props.children),t=e.props,n=t.className,r=t.style,o=this.state,i=o.affixed,a=o.position,l=o.top,c={position:a,top:l},p=void 0,f=void 0;return"top"===i?(p=this.props.topClassName,f=this.props.topStyle):"bottom"===i?(p=this.props.bottomClassName,f=this.props.bottomStyle):(p=this.props.affixClassName,f=this.props.affixStyle),S.default.cloneElement(e,{className:(0,u.default)(p,n),style:s({},c,f,r)})},t}(S.default.Component);D.propTypes={offsetTop:x.default.number,viewportOffsetTop:x.default.number,offsetBottom:x.default.number,topClassName:x.default.string,topStyle:x.default.object,affixClassName:x.default.string,affixStyle:x.default.object,bottomClassName:x.default.string,bottomStyle:x.default.object,onAffix:x.default.func,onAffixed:x.default.func,onAffixTop:x.default.func,onAffixedTop:x.default.func,onAffixBottom:x.default.func,onAffixedBottom:x.default.func},D.defaultProps={offsetTop:0,viewportOffsetTop:null,offsetBottom:0},t.default=D,e.exports=t.default},function(e,t,n){e.exports=n(4)(179)},function(e,t,n){e.exports=n(4)(609)},function(e,t,n){e.exports=n(4)(172)},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return Math.max(e.documentElement.offsetHeight||0,e.height||0,e.body.scrollHeight||0,e.body.offsetHeight||0)},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.default=function(e){return(0,s.default)(i.default.findDOMNode(e))};var o=n(19),i=r(o),a=n(1036),s=r(a);e.exports=t.default},function(e,t,n){e.exports=n(4)(91)},function(e,t,n){e.exports=n(4)(16)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=n(18),c=r(u),p=n(2),f=r(p),d=n(812),h=r(d),m=n(1),g=r(m),v=n(19),y=r(v),b=n(1051),w=r(b),x=n(813),_=r(x),S=n(796),C=r(S),k=function(e){function t(n,r){i(this,t);var o=a(this,e.call(this,n,r));return o.getTarget=function(){var e=o.props.target,t="function"==typeof e?e():e;return t&&y.default.findDOMNode(t)||null},o.maybeUpdatePosition=function(e){var t=o.getTarget();(o.props.shouldUpdatePosition||t!==o._lastTarget||e)&&o.updatePosition(t)},o.state={positionLeft:0,positionTop:0,arrowOffsetLeft:null,arrowOffsetTop:null},o._needsFlush=!1,o._lastTarget=null,o}return s(t,e),t.prototype.componentDidMount=function(){this.updatePosition(this.getTarget())},t.prototype.componentWillReceiveProps=function(){this._needsFlush=!0},t.prototype.componentDidUpdate=function(e){this._needsFlush&&(this._needsFlush=!1,this.maybeUpdatePosition(this.props.placement!==e.placement))},t.prototype.render=function(){var e=this.props,t=e.children,n=e.className,r=o(e,["children","className"]),i=this.state,a=i.positionLeft,s=i.positionTop,u=o(i,["positionLeft","positionTop"]);delete r.target,delete r.container,delete r.containerPadding,delete r.shouldUpdatePosition;var p=g.default.Children.only(t);return(0,m.cloneElement)(p,l({},r,u,{positionLeft:a,positionTop:s,className:(0,c.default)(n,p.props.className),style:l({},p.props.style,{left:a,top:s})}))},t.prototype.updatePosition=function(e){if(this._lastTarget=e,!e)return void this.setState({positionLeft:0,positionTop:0,arrowOffsetLeft:null,arrowOffsetTop:null});var t=y.default.findDOMNode(this),n=(0,_.default)(this.props.container,(0,C.default)(this).body);this.setState((0,w.default)(this.props.placement,t,e,n,this.props.containerPadding))},t}(g.default.Component);k.propTypes={target:f.default.oneOfType([h.default,f.default.func]),container:f.default.oneOfType([h.default,f.default.func]),containerPadding:f.default.number,placement:f.default.oneOf(["top","right","bottom","left"]),shouldUpdatePosition:f.default.bool},k.displayName="Position",k.defaultProps={containerPadding:0,placement:"right",shouldUpdatePosition:!1},t.default=k,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return 0===e.button}function l(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}t.__esModule=!0;var u=n(917),c=r(u),p=n(2),f=r(p),d=n(1),h=r(d),m=n(19),g=r(m),v=n(825),y=r(v),b=n(796),w=r(b),x=27,_=function(e){function t(n,r){o(this,t);var a=i(this,e.call(this,n,r));return a.addEventListeners=function(){var e=a.props.event,t=(0,w.default)(a);a.documentMouseCaptureListener=(0,y.default)(t,e,a.handleMouseCapture,!0),a.documentMouseListener=(0,y.default)(t,e,a.handleMouse),a.documentKeyupListener=(0,y.default)(t,"keyup",a.handleKeyUp)},a.removeEventListeners=function(){a.documentMouseCaptureListener&&a.documentMouseCaptureListener.remove(),a.documentMouseListener&&a.documentMouseListener.remove(),a.documentKeyupListener&&a.documentKeyupListener.remove()},a.handleMouseCapture=function(e){a.preventMouseRootClose=l(e)||!s(e)||(0,c.default)(g.default.findDOMNode(a),e.target)},a.handleMouse=function(e){!a.preventMouseRootClose&&a.props.onRootClose&&a.props.onRootClose(e)},a.handleKeyUp=function(e){e.keyCode===x&&a.props.onRootClose&&a.props.onRootClose(e)},a.preventMouseRootClose=!1,a}return a(t,e),t.prototype.componentDidMount=function(){this.props.disabled||this.addEventListeners()},t.prototype.componentDidUpdate=function(e){!this.props.disabled&&e.disabled?this.addEventListeners():this.props.disabled&&!e.disabled&&this.removeEventListeners()},t.prototype.componentWillUnmount=function(){this.props.disabled||this.removeEventListeners()},t.prototype.render=function(){return this.props.children},t}(h.default.Component);_.displayName="RootCloseWrapper",_.propTypes={onRootClose:f.default.func,children:f.default.element,disabled:f.default.bool,event:f.default.oneOf(["click","mousedown"])},_.defaultProps={event:"click"},t.default=_,e.exports=t.default},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1),c=r(u),p=n(3),f=r(p),d=n(8),h=n(10),m=n(811),g=n(963),v=n(168),y=function(e){return e&&e.__esModule?e:{default:e}}(v),b=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},w=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.activeTab="all",e.resultsViewPageWidth=1150,e.handleTabClick=e.handleTabClick.bind(e),e.pivotData=e.pivotData.bind(e),e.mapStudyIdToShortName=e.mapStudyIdToShortName.bind(e),e}return a(t,e),s(t,[{key:"handleTabClick",value:function(e){this.activeTab=e}},{key:"pivotData",value:function(e){this.groupAlterationsBy=e}},{key:"mapStudyIdToShortName",value:function(e){return e in this.props.store.studyMap?this.props.store.studyMap[e].shortName:e}},{key:"render",value:function(){var e=this,t=this.props.store.samplesExtendedWithClinicalData.isComplete&&this.props.store.alterationsByGeneBySampleKey.isComplete,n=this.props.store.samplesExtendedWithClinicalData.isPending&&this.props.store.alterationsByGeneBySampleKey.isPending;if(t){if(void 0===this.groupAlterationsBy)if(this.props.store.studies.result.length>1)this.groupAlterationsBy="studyId";else{var r=f.chain(this.props.store.samplesExtendedWithClinicalData.result).map(function(e){return e.cancerType}).uniq().value();this.groupAlterationsBy=1===r.length?"cancerTypeDetailed":"cancerType"}return c.createElement("div",{ref:function(t){return e.resultsViewPageContent=t}},c.createElement(m.MSKTabs,{onTabClick:this.handleTabClick,enablePagination:!0,unmountOnHide:!0,arrowStyle:{"line-height":.8},tabButtonStyle:"pills",activeTabId:this.activeTab,className:"secondaryTabs"},this.tabs))}return n?c.createElement(y.default,{isLoading:!0}):null}},{key:"defaultTabId",get:function(){return"all"}},{key:"tabs",get:function(){var e=this,t="studyId"===this.groupAlterationsBy?this.mapStudyIdToShortName:void 0,n=this.props.store.getAlterationCountsForCancerTypesByGene(this.props.store.alterationsByGeneBySampleKey.result,this.props.store.samplesExtendedWithClinicalData.result,this.groupAlterationsBy),r=f.map(n,function(r,o){var i=f.reduce(r,function(e,t){return e+t.alterationTotal},0),a=0===i?{color:"#bbb"}:{};return c.createElement(m.MSKTab,{key:o,id:"summaryTab"+o,linkText:o,anchorStyle:a},c.createElement(g.CancerSummaryContent,{groupedAlterationData:n[o],groupAlterationsBy:e.groupAlterationsBy,gene:o,labelTransformer:t,handlePivotChange:e.pivotData,width:e.resultsViewPageWidth}))});if(r.length>1){var o=this.props.store.getAlterationCountsForCancerTypesForAllGenes(this.props.store.alterationsByGeneBySampleKey.result,this.props.store.samplesExtendedWithClinicalData.result,this.groupAlterationsBy);r.unshift(c.createElement(m.MSKTab,{key:"all",id:"allGenes",linkText:"All Queried Genes"},c.createElement(g.CancerSummaryContent,{gene:"all",width:this.resultsViewPageWidth,groupedAlterationData:o,handlePivotChange:this.pivotData,labelTransformer:t,groupAlterationsBy:this.groupAlterationsBy})))}return r}}]),t}(c.Component);b([d.observable],w.prototype,"activeTab",void 0),b([d.observable],w.prototype,"resultsViewPageWidth",void 0),b([d.observable],w.prototype,"groupAlterationsBy",void 0),b([d.computed],w.prototype,"tabs",null),w=b([h.observer],w),t.default=w},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CancerSummaryContent=void 0;var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=n(1),d=o(f),h=n(3),m=o(h),g=n(28),v=n(8),y=n(10),b=n(902),w=r(b),x=n(964),_=r(x),S=n(85),C=n(18),k=r(C);n(823),n(903);var A=n(965),E=r(A),M=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":p(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},T={multiple:"Multiple Alterations",protExpressionDown:"Protein Downregulation",protExpressionUp:"Protein Upregulation",mrnaExpressionDown:"mRNA Downregulation",mrnaExpressionUp:"mRNA Upregulation",hetloss:"Shallow Deletion",homdel:"Deep Deletion",gain:"Gain",amp:"Amplification",fusion:"Fusion",mutated:"Mutation"},O=[{value:"studyId",label:"Cancer Study"},{value:"cancerType",label:"Cancer Type"},{value:"cancerTypeDetailed",label:"Cancer Type Detailed"}],I=function(t){function n(e){s(this,n);var t=l(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.tempAltCasesInputValue=0,t.tempTotalCasesInputValue=0,t.pngAnchor="",t.pdf={anchor:"",width:0,height:0},t.showControls=!1,t.showGenomicAlt=!0,t.yAxis="alt-freq",t.xAxis="y-axis",t.multiSelectValue=t.cancerTypes[0].value,t.multiSelectOptions=t.cancerTypes,t.altCasesValue=0,t.totalCasesValue=0,t.tempTotalCasesValue=0,t.tempAltCasesValue=0,t.viewCountsByCancerSubType=!1,t.handleYAxisChange=t.handleYAxisChange.bind(t),t.handleXAxisChange=t.handleXAxisChange.bind(t),t.handleGenomicCheckboxChange=t.handleGenomicCheckboxChange.bind(t),t.handleCancerTypeCheckboxChange=t.handleCancerTypeCheckboxChange.bind(t),t.handleSelectChange=t.handleSelectChange.bind(t),t.handleAltSliderChange=t.handleAltSliderChange.bind(t),t.handleTotalSliderChange=t.handleTotalSliderChange.bind(t),t.handleAltSliderChangeComplete=t.handleAltSliderChangeComplete.bind(t),t.handleTotalSliderChangeComplete=t.handleTotalSliderChangeComplete.bind(t),t.handleAltInputChange=t.handleAltInputChange.bind(t),t.handleAltInputKeyPress=t.handleAltInputKeyPress.bind(t),t.handleTotalInputChange=t.handleTotalInputChange.bind(t),t.handleTotalInputKeyPress=t.handleTotalInputKeyPress.bind(t),t.toggleShowControls=t.toggleShowControls.bind(t),t.setPngAnchor=t.setPngAnchor.bind(t),t.setPdfProperties=t.setPdfProperties.bind(t),t.downloadPdf=t.downloadPdf.bind(t),t.resetSliders=t.resetSliders.bind(t),t}return u(n,t),c(n,[{key:"componentWillMount",value:function(){}},{key:"transformLabel",value:function(e){return this.props.labelTransformer?this.props.labelTransformer(e):e}},{key:"handleYAxisChange",value:function(e){this.yAxis=e.target.value,this.resetSliders()}},{key:"handleXAxisChange",value:function(e){this.xAxis=e.target.value,this.resetSliders()}},{key:"resetSliders",value:function(){this.altCasesValue=0,this.totalCasesValue=0,this.handleAltSliderChange(0),this.handleTotalSliderChange(0)}},{key:"handleCancerTypeCheckboxChange",value:function(){this.viewCountsByCancerSubType=!1===this.viewCountsByCancerSubType}},{key:"handleGenomicCheckboxChange",value:function(){this.showGenomicAlt=!this.showGenomicAlt}},{key:"handleAltSliderChange",value:function(e){this.tempAltCasesValue=e,this.tempAltCasesInputValue=e}},{key:"handleTotalSliderChange",value:function(e){this.tempTotalCasesValue=e,this.tempTotalCasesInputValue=e}},{key:"handleAltInputKeyPress",value:function(e){if(13===e.charCode){if(isNaN(this.tempAltCasesInputValue))return void(this.tempAltCasesInputValue=0);this.tempAltCasesInputValue=Number(this.tempAltCasesInputValue),this.tempAltCasesValue=this.tempAltCasesInputValue,this.handleAltSliderChangeComplete()}}},{key:"handleTotalInputKeyPress",value:function(e){if(13===e.charCode){if(isNaN(this.tempTotalCasesInputValue))return void(this.tempTotalCasesInputValue=0);this.tempTotalCasesInputValue=Number(this.tempTotalCasesInputValue),this.tempTotalCasesValue=this.tempTotalCasesInputValue,this.handleTotalSliderChangeComplete()}}},{key:"handleAltInputChange",value:function(e){this.tempAltCasesInputValue=e.target.value.replace(/[^0-9\.]/g,"")}},{key:"handleTotalInputChange",value:function(e){this.tempTotalCasesInputValue=e.target.value.replace(/[^0-9\.]/g,"")}},{key:"handleAltSliderChangeComplete",value:function(){this.altCasesValue=this.tempAltCasesValue}},{key:"handleTotalSliderChangeComplete",value:function(){this.totalCasesValue=this.tempTotalCasesValue}},{key:"toggleShowControls",value:function(){this.showControls=!this.showControls}},{key:"getColors",value:function(e){var t={mutated:"#008000",amp:"#ff0000",homdel:"rgb(0,0,255)",hetloss:"#000",gain:"rgb(255,182,193)",fusion:"#8B00C9",mrnaExpressionUp:"#FF989A",mrnaExpressionDown:"#529AC8",protExpressionUp:"#FF989A",protExpressionDown:"#E0FFFF",multiple:"#666"};return this.showGenomicAlt?t[e]||"#000000":"#aaaaaa"}},{key:"handleSelectChange",value:function(e){var t=e.split(",");return"all"===m.last(t)?void(this.multiSelectValue="all"):"all"===t[0]&&t.length>1?void(this.multiSelectValue=t.slice(1).join(",")):(this.multiSelectValue=e,void this.resetSliders())}},{key:"setPngAnchor",value:function(e){this.pngAnchor=e}},{key:"setPdfProperties",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:600;this.pdf={anchor:e,width:t,height:n}}},{key:"downloadPdf",value:function(){var e=this.pdf,t=e.anchor,n=e.width,r=e.height,o="p";n>r&&(o="l");var i=new _.default({orientation:o,unit:"mm",format:[.264583*n,.264583*r]});i.addImage(t,"JPEG",0,0,i.internal.pageSize.width,i.internal.pageSize.height).save("cBioPortalCancerSummary.pdf")}},{key:"render",value:function(){var t=this,n=this.totalCasesMax,r=this.altCasesMax,o=this.yAxis,i=r,s="alt-freq"===o?"%":"",l=d.createElement("div",{style:{display:"flex"},className:"cancer--summary-form-controls"},d.createElement("div",null,d.createElement(g.FormGroup,null,d.createElement(g.ControlLabel,null,"Y Axis Value:"),d.createElement(g.FormControl,{componentClass:"select",onChange:this.handleYAxisChange,ref:function(e){return t.inputYAxisEl=e}},d.createElement("option",{value:"alt-freq"},"Alteration Frequency"),d.createElement("option",{value:"abs-count"},"Absolute Counts"))),d.createElement(g.FormGroup,null,d.createElement(g.ControlLabel,null,"Sort X Axis By:"),d.createElement(g.FormControl,{componentClass:"select",onChange:this.handleXAxisChange,ref:function(e){return t.inputXAxisEl=e}},d.createElement("option",{value:"y-axis"},"Y-Axis Values"),d.createElement("option",{value:"x-axis"},"X-Axis Values")))),d.createElement("div",{style:{width:400}},d.createElement("div",{className:"slider-holder"},d.createElement(g.FormGroup,null,d.createElement(g.ControlLabel,null,"Min. "+("alt-freq"===o?"%":"#")+" Altered Cases:"),d.createElement("div",{className:"slider custom-labels"},d.createElement(w.default,{min:0,max:i,value:this.tempAltCasesValue,labels:a({0:0+s},i,Math.ceil(i)+s),format:function(e){return e+s},onChange:this.handleAltSliderChange,onChangeComplete:this.handleAltSliderChangeComplete}))),d.createElement(g.FormGroup,null,d.createElement(g.ControlLabel,{className:"invisible"},"Hidden"),d.createElement(g.FormControl,{type:"text",value:this.tempAltCasesInputValue+s,onChange:this.handleAltInputChange,onKeyPress:this.handleAltInputKeyPress}))),d.createElement("div",{className:"slider-holder"},d.createElement(g.FormGroup,null,d.createElement(g.ControlLabel,null,"Min. # Total Cases:"),d.createElement("div",{className:"slider custom-labels"},d.createElement(w.default,{min:0,max:n,value:this.tempTotalCasesValue,labels:a({0:0},n,n),onChange:this.handleTotalSliderChange,onChangeComplete:this.handleTotalSliderChangeComplete}))),d.createElement(g.FormGroup,null,d.createElement(g.ControlLabel,{className:"invisible"},"Hidden"),d.createElement(g.FormControl,{type:"text",value:this.tempTotalCasesInputValue,onChange:this.handleTotalInputChange,onKeyPress:this.handleTotalInputKeyPress})))),d.createElement("div",null,d.createElement(g.Checkbox,{checked:this.showGenomicAlt,onChange:this.handleGenomicCheckboxChange},"Show Genomic Alteration Types")));return d.createElement(S.If,{condition:this.hasAlterations},d.createElement(S.Then,null,d.createElement("div",null,d.createElement("div",{className:"cancer-summary-main-options"},d.createElement(g.ButtonGroup,null,O.map(function(n,r){return d.createElement(g.Radio,{checked:n.value===t.props.groupAlterationsBy,onChange:function(n){t.props.handlePivotChange(e(n.target).attr("data-value"))},inline:!0,"data-value":n.value},n.label)}))),d.createElement("div",{role:"group",className:"btn-group cancer-summary-"},d.createElement("button",{onClick:this.toggleShowControls,className:"btn btn-default btn-xs"},"Customize ",d.createElement("i",{className:"fa fa-cog","aria-hidden":"true"})),d.createElement("a",{className:"btn btn-default btn-xs "+(this.pngAnchor?"":" disabled"),href:this.pngAnchor,download:"cBioPortalCancerSummary.png"},"PNG ",d.createElement("i",{className:"fa fa-cloud-download","aria-hidden":"true"}))),d.createElement(g.Panel,{className:(0,k.default)({hidden:!this.showControls},"cancer-summary-secondary-options")},d.createElement("button",{type:"button",onClick:this.toggleShowControls,className:"close"},""),l),d.createElement(E.default,{data:this.chartData,yAxis:this.yAxis,xAxis:this.xAxis,gene:this.props.gene,width:this.props.width,setPdfProperties:this.setPdfProperties,setPngAnchor:this.setPngAnchor,legend:this.showGenomicAlt,title:this.barChartTitle,orderedLabels:T,altCasesMax:this.altCasesMax}))),d.createElement(S.Else,null,d.createElement("div",{className:"alert alert-info"},"There are no alterations in this gene.")))}},{key:"onlyOneSelected",get:function(){return"all"!==this.multiSelectValue}},{key:"countsData",get:function(){return this.props.groupedAlterationData}},{key:"barChartTitle",get:function(){return m.find(O,{value:this.props.groupAlterationsBy}).label+" Summary"}},{key:"barChartDatasets",get:function(){var e=this,t=m.reduce(this.countsData,function(t,n,r){var o=n.alterationTypeCounts,i=n.alteredSampleCount/n.sampleTotal*100;if(n.sampleTotal>=e.totalCasesValue){var a=m.reduce(o,function(t,r,o){var a=r/n.sampleTotal*100,s="abs-count"===e.yAxis?r:a;return t.push({label:o,totalCases:n.sampleTotal,altTotalPercent:i,total:s,count:r,percent:a,backgroundColor:e.getColors(o)}),t},[]),s=m.keys(T),l=a.sort(function(e,t){return s.indexOf(e.label)-s.indexOf(t.label)});t.push({label:e.transformLabel(r),sortBy:e.yAxis,symbol:"abs-count"===e.yAxis?"":"%",sortCount:"abs-count"===e.yAxis?n.alteredSampleCount:i,data:l})}return t},[]);return m.chain(t).orderBy(function(e){return e.sortCount},["desc"]).value().slice(0,50)}},{key:"cancerTypes",get:function(){return[{label:"All",value:"all"}].concat(i(Object.keys(this.countsData).map(function(e){return{label:e,value:e}}).sort()))}},{key:"altCasesMax",get:function(){return Math.max.apply(Math,i(this.barChartDatasets.map(function(e){return e.sortCount})))}},{key:"totalCasesMax",get:function(){return Math.max.apply(Math,i(m.map(this.countsData,function(e){return e.sampleTotal})))}},{key:"chartData",get:function(){var e=this,t=this.barChartDatasets,n=this.xAxis,r=this.altCasesValue,o=m.orderBy(t,["y-axis"===n?"sortCount":"label"],["y-axis"===n?"desc":"asc"]),a=m.flatten(o.filter(function(e){return e.sortCount&&e.sortCount>=r}).map(function(e,t){return e.data.map(function(e){return Object.assign({},e,{data:0===t?[e.total]:[].concat(i(Array(t).fill(0)),[e.total])})})}));return{labels:m.reduce(o,function(t,n){return n.sortCount>=e.altCasesValue&&t.push(n.label),t},[]),datasets:a}}},{key:"hasAlterations",get:function(){return m.reduce(this.countsData,function(e,t){return e+t.alterationTotal},0)>0}}]),n}(d.Component);M([v.observable],I.prototype,"tempAltCasesInputValue",void 0),M([v.observable],I.prototype,"tempTotalCasesInputValue",void 0),M([v.observable],I.prototype,"pngAnchor",void 0),M([v.observable],I.prototype,"pdf",void 0),M([v.observable],I.prototype,"showControls",void 0),M([v.observable],I.prototype,"showGenomicAlt",void 0),M([v.observable],I.prototype,"yAxis",void 0),M([v.observable],I.prototype,"xAxis",void 0),M([v.observable],I.prototype,"multiSelectValue",void 0),M([v.observable],I.prototype,"multiSelectOptions",void 0),M([v.observable],I.prototype,"altCasesValue",void 0),M([v.observable],I.prototype,"totalCasesValue",void 0),M([v.observable],I.prototype,"tempTotalCasesValue",void 0),M([v.observable],I.prototype,"tempAltCasesValue",void 0),M([v.observable],I.prototype,"viewCountsByCancerSubType",void 0),M([v.computed],I.prototype,"onlyOneSelected",null),M([v.computed],I.prototype,"countsData",null),M([v.computed],I.prototype,"barChartTitle",null),M([v.computed],I.prototype,"barChartDatasets",null),M([v.computed],I.prototype,"cancerTypes",null),M([v.computed],I.prototype,"altCasesMax",null),M([v.computed],I.prototype,"totalCasesMax",null),M([v.computed],I.prototype,"chartData",null),M([v.computed],I.prototype,"hasAlterations",null),t.CancerSummaryContent=I=M([y.observer],I),t.CancerSummaryContent=I}).call(t,n(84))},function(e,t){!function(n,r){"object"==typeof t&&void 0!==e?e.exports=r():"function"==typeof define&&define.amd?define(r):n.jspdf=r()}(this,function(){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=(function(){function e(e){this.value=e}function t(t){function n(o,i){try{var a=t[o](i),s=a.value;s instanceof e?Promise.resolve(s.value).then(function(e){n("next",e)},function(e){n("throw",e)}):r(a.done?"return":"normal",a.value)}catch(e){r("throw",e)}}function r(e,t){switch(e){case"return":o.resolve({value:t,done:!0});break;case"throw":o.reject(t);break;default:o.resolve({value:t,done:!1})}(o=o.next)?n(o.key,o.arg):i=null}var o,i;this._invoke=function(e,t){return new Promise(function(r,a){var s={key:e,arg:t,resolve:r,reject:a,next:null};i?i=i.next=s:(o=i=s,n(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}(),function(t){function r(e){var n={};this.subscribe=function(e,t,r){if("function"!=typeof t)return!1;n.hasOwnProperty(e)||(n[e]={});var o=Math.random().toString(35);return n[e][o]=[t,!!r],o},this.unsubscribe=function(e){for(var t in n)if(n[t][e])return delete n[t][e],!0;return!1},this.publish=function(r){if(n.hasOwnProperty(r)){var o=Array.prototype.slice.call(arguments,1),i=[];for(var a in n[r]){var s=n[r][a];try{s[0].apply(e,o)}catch(e){t.console&&console.error("jsPDF PubSub Error",e.message,e)}s[1]&&i.push(a)}i.length&&i.forEach(this.unsubscribe)}}}function o(e,u,c,p){var f={};"object"===(void 0===e?"undefined":n(e))&&(e=(f=e).orientation,u=f.unit||u,c=f.format||c,p=f.compress||f.compressPdf||p),u=u||"mm",c=c||"a4",e=(""+(e||"P")).toLowerCase(),(""+c).toLowerCase();var d,h,m,g,v,y,b,w,x,_=!!p&&"function"==typeof Uint8Array,S=f.textColor||"0 g",C=f.drawColor||"0 G",k=f.fontSize||16,A=f.lineHeight||1.15,E=f.lineWidth||.200025,M=2,T=!1,O=[],I={},P={},j=0,D=[],N=[],R=[],F=[],L=[],z=0,B=0,q=0,V={title:"",subject:"",author:"",keywords:"",creator:""},U={},H=new r(U),G=f.hotfixes||[],W=function(e){return e.toFixed(2)},Z=function(e){return e.toFixed(3)},Y=function(e){return("0"+parseInt(e)).slice(-2)},X=function(e){T?D[g].push(e):(q+=e.length+1,F.push(e))},K=function(){return M++,O[M]=q,X(M+" 0 obj"),M},Q=function(e){X("stream"),X(e),X("endstream")},J=function(){var e,n,r,i,a,l,u,c,p,f=[];for(u=t.adler32cs||o.adler32cs,_&&void 0===u&&(_=!1),e=1;e<=j;e++){if(f.push(K()),c=(v=R[e].width)*h,p=(y=R[e].height)*h,X("<</Type /Page"),X("/Parent 1 0 R"),X("/Resources 2 0 R"),X("/MediaBox [0 0 "+W(c)+" "+W(p)+"]"),H.publish("putPage",{pageNumber:e,page:D[e]}),X("/Contents "+(M+1)+" 0 R"),X(">>"),X("endobj"),n=D[e].join("\n"),K(),_){for(r=[],i=n.length;i--;)r[i]=n.charCodeAt(i);l=u.from(n),(a=new s(6)).append(new Uint8Array(r)),n=a.flush(),(r=new Uint8Array(n.length+6)).set(new Uint8Array([120,156])),r.set(n,2),r.set(new Uint8Array([255&l,l>>8&255,l>>16&255,l>>24&255]),n.length+2),n=String.fromCharCode.apply(null,r),X("<</Length "+n.length+" /Filter [/FlateDecode]>>")}else X("<</Length "+n.length+">>");Q(n),X("endobj")}O[1]=q,X("1 0 obj"),X("<</Type /Pages");var d="/Kids [";for(i=0;i<j;i++)d+=f[i]+" 0 R ";X(d+"]"),X("/Count "+j),X(">>"),X("endobj"),H.publish("postPutPages")},$=function(e){e.objectNumber=K(),X("<</BaseFont/"+e.PostScriptName+"/Type/Font"),"string"==typeof e.encoding&&X("/Encoding/"+e.encoding),X("/Subtype/Type1>>"),X("endobj")},ee=function(){for(var e in I)I.hasOwnProperty(e)&&$(I[e])},te=function(){H.publish("putXobjectDict")},ne=function(){X("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),X("/Font <<");for(var e in I)I.hasOwnProperty(e)&&X("/"+e+" "+I[e].objectNumber+" 0 R");X(">>"),X("/XObject <<"),te(),X(">>")},re=function(){ee(),H.publish("putResources"),O[2]=q,X("2 0 obj"),X("<<"),ne(),X(">>"),X("endobj"),H.publish("postPutResources")},oe=function(){H.publish("putAdditionalObjects");for(var e=0;e<L.length;e++){var t=L[e];O[t.objId]=q,X(t.objId+" 0 obj"),X(t.content),X("endobj")}M+=L.length,H.publish("postPutAdditionalObjects")},ie=function(e,t,n){P.hasOwnProperty(t)||(P[t]={}),P[t][n]=e},ae=function(e,t,n,r){var o="F"+(Object.keys(I).length+1).toString(10),i=I[o]={id:o,PostScriptName:e,fontName:t,fontStyle:n,encoding:r,metadata:{}};return ie(o,t,n),H.publish("addFont",i),o},se=function(e,t){var n,r,o,i,a,s,l,u,c;if(t=t||{},o=t.sourceEncoding||"Unicode",a=t.outputEncoding,(t.autoencode||a)&&I[d].metadata&&I[d].metadata[o]&&I[d].metadata[o].encoding&&(i=I[d].metadata[o].encoding,!a&&I[d].encoding&&(a=I[d].encoding),!a&&i.codePages&&(a=i.codePages[0]),"string"==typeof a&&(a=i[a]),a)){for(l=!1,s=[],n=0,r=e.length;n<r;n++)(u=a[e.charCodeAt(n)])?s.push(String.fromCharCode(u)):s.push(e[n]),s[n].charCodeAt(0)>>8&&(l=!0);e=s.join("")}for(n=e.length;void 0===l&&0!==n;)e.charCodeAt(n-1)>>8&&(l=!0),n--;if(!l)return e;for(s=t.noBOM?[]:[254,255],n=0,r=e.length;n<r;n++){if(u=e.charCodeAt(n),(c=u>>8)>>8)throw new Error("Character at position "+n+" of string '"+e+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");s.push(c),s.push(u-(c<<8))}return String.fromCharCode.apply(void 0,s)},le=function(e,t){return se(e,t).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ue=function(){X("/Producer (jsPDF "+o.version+")");for(var e in V)V.hasOwnProperty(e)&&V[e]&&X("/"+e.substr(0,1).toUpperCase()+e.substr(1)+" ("+le(V[e])+")");var t=new Date,n=t.getTimezoneOffset(),r=n<0?"+":"-",i=Math.floor(Math.abs(n/60)),a=Math.abs(n%60),s=[r,Y(i),"'",Y(a),"'"].join("");X(["/CreationDate (D:",t.getFullYear(),Y(t.getMonth()+1),Y(t.getDate()),Y(t.getHours()),Y(t.getMinutes()),Y(t.getSeconds()),s,")"].join(""))},ce=function(){switch(X("/Type /Catalog"),X("/Pages 1 0 R"),w||(w="fullwidth"),w){case"fullwidth":X("/OpenAction [3 0 R /FitH null]");break;case"fullheight":X("/OpenAction [3 0 R /FitV null]");break;case"fullpage":X("/OpenAction [3 0 R /Fit]");break;case"original":X("/OpenAction [3 0 R /XYZ null null 1]");break;default:var e=""+w;"%"===e.substr(e.length-1)&&(w=parseInt(w)/100),"number"==typeof w&&X("/OpenAction [3 0 R /XYZ null null "+W(w)+"]")}switch(x||(x="continuous"),x){case"continuous":X("/PageLayout /OneColumn");break;case"single":X("/PageLayout /SinglePage");break;case"two":case"twoleft":X("/PageLayout /TwoColumnLeft");break;case"tworight":X("/PageLayout /TwoColumnRight")}b&&X("/PageMode /"+b),H.publish("putCatalog")},pe=function(){X("/Size "+(M+1)),X("/Root "+M+" 0 R"),X("/Info "+(M-1)+" 0 R")},fe=function(e,t){var n="string"==typeof t&&t.toLowerCase();if("string"==typeof e){var r=e.toLowerCase();l.hasOwnProperty(r)&&(e=l[r][0]/h,t=l[r][1]/h)}if(Array.isArray(e)&&(t=e[1],e=e[0]),n){switch(n.substr(0,1)){case"l":t>e&&(n="s");break;case"p":e>t&&(n="s")}"s"===n&&(m=e,e=t,t=m)}T=!0,D[++j]=[],R[j]={width:Number(e)||v,height:Number(t)||y},N[j]={},me(j)},de=function(){fe.apply(this,arguments),X(W(E*h)+" w"),X(C),0!==z&&X(z+" J"),0!==B&&X(B+" j"),H.publish("addPage",{pageNumber:j})},he=function(e){e>0&&e<=j&&(D.splice(e,1),R.splice(e,1),g>--j&&(g=j),this.setPage(g))},me=function(e){e>0&&e<=j&&(g=e,v=R[e].width,y=R[e].height)},ge=function(e,t){var n;switch(e=void 0!==e?e:I[d].fontName,t=void 0!==t?t:I[d].fontStyle,void 0!==e&&(e=e.toLowerCase()),e){case"sans-serif":case"verdana":case"arial":case"helvetica":e="helvetica";break;case"fixed":case"monospace":case"terminal":case"courier":e="courier";break;case"serif":case"cursive":case"fantasy":default:e="times"}try{n=P[e][t]}catch(e){}return n||null==(n=P.times[t])&&(n=P.times.normal),n},ve=function(){T=!1,M=2,q=0,F=[],O=[],L=[],H.publish("buildDocument"),X("%PDF-"+a),J(),oe(),re(),K(),X("<<"),ue(),X(">>"),X("endobj"),K(),X("<<"),ce(),X(">>"),X("endobj");var e,t=q,n="0000000000";for(X("xref"),X("0 "+(M+1)),X(n+" 65535 f "),e=1;e<=M;e++){var r=O[e];X("function"==typeof r?(n+O[e]()).slice(-10)+" 00000 n ":(n+O[e]).slice(-10)+" 00000 n ")}return X("trailer"),X("<<"),pe(),X(">>"),X("startxref"),X(""+t),X("%%EOF"),T=!0,F.join("\n")},ye=function(e){var t="S";return"F"===e?t="f":"FD"===e||"DF"===e?t="B":"f"!==e&&"f*"!==e&&"B"!==e&&"B*"!==e||(t=e),t},be=function(){for(var e=ve(),t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n);t--;)r[t]=e.charCodeAt(t);return n},we=function(){return new Blob([be()],{type:"application/pdf"})},xe=function(e){return e.foo=function(){try{return e.apply(this,arguments)}catch(e){var n=e.stack||"";~n.indexOf(" at ")&&(n=n.split(" at ")[1]);var r="Error in function "+n.split("\n")[0].split("<")[0]+": "+e.message;if(!t.console)throw new Error(r);t.console.error(r,e),t.alert&&alert(r)}},e.foo.bar=e,e.foo}(function(e,n){var r="dataur"===(""+e).substr(0,6)?"data:application/pdf;base64,"+btoa(ve()):0;switch(e){case void 0:return ve();case"save":if(navigator.getUserMedia&&(void 0===t.URL||void 0===t.URL.createObjectURL))return U.output("dataurlnewwindow");i(we(),n),"function"==typeof i.unload&&t.setTimeout&&setTimeout(i.unload,911);break;case"arraybuffer":return be();case"blob":return we();case"bloburi":case"bloburl":return t.URL&&t.URL.createObjectURL(we())||void 0;case"datauristring":case"dataurlstring":return r;case"dataurlnewwindow":var o=t.open(r);if(o||"undefined"==typeof safari)return o;case"datauri":case"dataurl":return t.document.location.href=r;default:throw new Error('Output type "'+e+'" is not supported.')}}),_e=function(e){return!0===Array.isArray(G)&&G.indexOf(e)>-1};switch(u){case"pt":h=1;break;case"mm":h=72/25.4000508;break;case"cm":h=72/2.54000508;break;case"in":h=72;break;case"px":h=1==_e("px_scaling")?.75:96/72;break;case"pc":case"em":h=12;break;case"ex":h=6;break;default:throw"Invalid unit: "+u}U.internal={pdfEscape:le,getStyle:ye,getFont:function(){return I[ge.apply(U,arguments)]},getFontSize:function(){return k},getLineHeight:function(){return k*A},write:function(e){X(1===arguments.length?e:Array.prototype.join.call(arguments," "))},getCoordinateString:function(e){return W(e*h)},getVerticalCoordinateString:function(e){return W((y-e)*h)},collections:{},newObject:K,newAdditionalObject:function(){var e=2*D.length+1,t={objId:e+=L.length,content:""};return L.push(t),t},newObjectDeferred:function(){return M++,O[M]=function(){return q},M},newObjectDeferredBegin:function(e){O[e]=q},putStream:Q,events:H,scaleFactor:h,pageSize:{get width(){return v},get height(){return y}},output:function(e,t){return xe(e,t)},getNumberOfPages:function(){return D.length-1},pages:D,out:X,f2:W,getPageInfo:function(e){return{objId:2*(e-1)+3,pageNumber:e,pageContext:N[e]}},getCurrentPageInfo:function(){return{objId:2*(g-1)+3,pageNumber:g,pageContext:N[g]}},getPDFVersion:function(){return a},hasHotfix:_e},U.addPage=function(){return de.apply(this,arguments),this},U.setPage=function(){return me.apply(this,arguments),this},U.insertPage=function(e){return this.addPage(),this.movePage(g,e),this},U.movePage=function(e,t){if(e>t){for(var n=D[e],r=R[e],o=N[e],i=e;i>t;i--)D[i]=D[i-1],R[i]=R[i-1],N[i]=N[i-1];D[t]=n,R[t]=r,N[t]=o,this.setPage(t)}else if(e<t){for(var n=D[e],r=R[e],o=N[e],i=e;i<t;i++)D[i]=D[i+1],R[i]=R[i+1],N[i]=N[i+1];D[t]=n,R[t]=r,N[t]=o,this.setPage(t)}return this},U.deletePage=function(){return he.apply(this,arguments),this},U.setDisplayMode=function(e,t,n){if(w=e,x=t,b=n,-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(n))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+n+'" is not recognized.');return this},U.text=function(e,t,n,r,o,i){function a(e){return e=e.split("\t").join(Array(f.TabLen||9).join(" ")),le(e,r)}"number"==typeof e&&(m=n,n=t,t=e,e=m),"string"==typeof e&&(e=e.match(/[\n\r]/)?e.split(/\r\n|\r|\n/g):[e]),"string"==typeof o&&(i=o,o=null),"string"==typeof r&&(i=r,r=null),"number"==typeof r&&(o=r,r=null);var s="",l="Td";if(o){o*=Math.PI/180;var u=Math.cos(o),c=Math.sin(o);s=[W(u),W(c),W(-1*c),W(u),""].join(" "),l="Tm"}"noBOM"in(r=r||{})||(r.noBOM=!0),"autoencode"in r||(r.autoencode=!0);var p="",g=this.internal.getCurrentPageInfo().pageContext;if(!0===r.stroke?!0!==g.lastTextWasStroke&&(p="1 Tr\n",g.lastTextWasStroke=!0):(g.lastTextWasStroke&&(p="0 Tr\n"),g.lastTextWasStroke=!1),void 0===this._runningPageHeight&&(this._runningPageHeight=0),"string"==typeof e)e=a(e);else{if("[object Array]"!==Object.prototype.toString.call(e))throw new Error('Type of text must be string or Array. "'+e+'" is not recognized.');for(var v=e.concat(),b=[],w=v.length;w--;)b.push(a(v.shift()));if(i){var x,_,C,E=k*A,M=e.map(function(e){return this.getStringUnitWidth(e)*k/h},this);if(C=Math.max.apply(Math,M),"center"===i)x=t-C/2,t-=M[0]/2;else{if("right"!==i)throw new Error('Unrecognized alignment option, use "center" or "right".');x=t-C,t-=M[0]}_=t,e=b[0];for(var T=1,w=b.length;T<w;T++){var O=C-M[T];"center"===i&&(O/=2),e+=") Tj\n"+(x-_+O)+" -"+E+" Td ("+b[T],_=x+O}}else e=b.join(") Tj\nT* (")}var I;return I=W((y-n)*h),X("BT\n/"+d+" "+k+" Tf\n"+k*A+" TL\n"+p+S+"\n"+s+W(t*h)+" "+I+" "+l+"\n("+e+") Tj\nET"),this},U.lstext=function(e,t,n,r){console.warn("jsPDF.lstext is deprecated");for(var o=0,i=e.length;o<i;o++,t+=r)this.text(e[o],t,n);return this},U.line=function(e,t,n,r){return this.lines([[n-e,r-t]],e,t)},U.clip=function(){X("W"),X("S")},U.clip_fixed=function(e){X("evenodd"===e?"W*":"W"),X("n")},U.lines=function(e,t,n,r,o,i){var a,s,l,u,c,p,f,d,g,v,b;for("number"==typeof e&&(m=n,n=t,t=e,e=m),r=r||[1,1],X(Z(t*h)+" "+Z((y-n)*h)+" m "),a=r[0],s=r[1],u=e.length,v=t,b=n,l=0;l<u;l++)2===(c=e[l]).length?(v=c[0]*a+v,b=c[1]*s+b,X(Z(v*h)+" "+Z((y-b)*h)+" l")):(p=c[0]*a+v,f=c[1]*s+b,d=c[2]*a+v,g=c[3]*s+b,v=c[4]*a+v,b=c[5]*s+b,X(Z(p*h)+" "+Z((y-f)*h)+" "+Z(d*h)+" "+Z((y-g)*h)+" "+Z(v*h)+" "+Z((y-b)*h)+" c"));return i&&X(" h"),null!==o&&X(ye(o)),this},U.rect=function(e,t,n,r,o){return ye(o),X([W(e*h),W((y-t)*h),W(n*h),W(-r*h),"re"].join(" ")),null!==o&&X(ye(o)),this},U.triangle=function(e,t,n,r,o,i,a){return this.lines([[n-e,r-t],[o-n,i-r],[e-o,t-i]],e,t,[1,1],a,!0),this},U.roundedRect=function(e,t,n,r,o,i,a){var s=4/3*(Math.SQRT2-1);return this.lines([[n-2*o,0],[o*s,0,o,i-i*s,o,i],[0,r-2*i],[0,i*s,-o*s,i,-o,i],[2*o-n,0],[-o*s,0,-o,-i*s,-o,-i],[0,2*i-r],[0,-i*s,o*s,-i,o,-i]],e+o,t,[1,1],a),this},U.ellipse=function(e,t,n,r,o){var i=4/3*(Math.SQRT2-1)*n,a=4/3*(Math.SQRT2-1)*r;return X([W((e+n)*h),W((y-t)*h),"m",W((e+n)*h),W((y-(t-a))*h),W((e+i)*h),W((y-(t-r))*h),W(e*h),W((y-(t-r))*h),"c"].join(" ")),X([W((e-i)*h),W((y-(t-r))*h),W((e-n)*h),W((y-(t-a))*h),W((e-n)*h),W((y-t)*h),"c"].join(" ")),X([W((e-n)*h),W((y-(t+a))*h),W((e-i)*h),W((y-(t+r))*h),W(e*h),W((y-(t+r))*h),"c"].join(" ")),X([W((e+i)*h),W((y-(t+r))*h),W((e+n)*h),W((y-(t+a))*h),W((e+n)*h),W((y-t)*h),"c"].join(" ")),null!==o&&X(ye(o)),this},U.circle=function(e,t,n,r){return this.ellipse(e,t,n,n,r)},U.setProperties=function(e){for(var t in V)V.hasOwnProperty(t)&&e[t]&&(V[t]=e[t]);return this},U.setFontSize=function(e){return k=e,this},U.setFont=function(e,t){return d=ge(e,t),this},U.setFontStyle=U.setFontType=function(e){return d=ge(void 0,e),this},U.getFontList=function(){var e,t,n,r={};for(e in P)if(P.hasOwnProperty(e)){r[e]=n=[];for(t in P[e])P[e].hasOwnProperty(t)&&n.push(t)}return r},U.addFont=function(e,t,n){ae(e,t,n,"StandardEncoding")},U.setLineWidth=function(e){return X((e*h).toFixed(2)+" w"),this},U.setDrawColor=function(e,t,n,r){var o;return o=void 0===t||void 0===r&&e===t===n?"string"==typeof e?e+" G":W(e/255)+" G":void 0===r?"string"==typeof e?[e,t,n,"RG"].join(" "):[W(e/255),W(t/255),W(n/255),"RG"].join(" "):"string"==typeof e?[e,t,n,r,"K"].join(" "):[W(e),W(t),W(n),W(r),"K"].join(" "),X(o),this},U.setFillColor=function(e,t,r,o){var i;return void 0===t||void 0===o&&e===t===r?i="string"==typeof e?e+" g":W(e/255)+" g":void 0===o||"object"===(void 0===o?"undefined":n(o))?(i="string"==typeof e?[e,t,r,"rg"].join(" "):[W(e/255),W(t/255),W(r/255),"rg"].join(" "),o&&0===o.a&&(i=["255","255","255","rg"].join(" "))):i="string"==typeof e?[e,t,r,o,"k"].join(" "):[W(e),W(t),W(r),W(o),"k"].join(" "),X(i),this},U.setTextColor=function(e,t,n){if("string"==typeof e&&/^#[0-9A-Fa-f]{6}$/.test(e)){var r=parseInt(e.substr(1),16);e=r>>16&255,t=r>>8&255,n=255&r}return S=0===e&&0===t&&0===n||void 0===t?Z(e/255)+" g":[Z(e/255),Z(t/255),Z(n/255),"rg"].join(" "),this},U.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},U.setLineCap=function(e){var t=this.CapJoinStyles[e];if(void 0===t)throw new Error("Line cap style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return z=t,X(t+" J"),this},U.setLineJoin=function(e){var t=this.CapJoinStyles[e];if(void 0===t)throw new Error("Line join style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return B=t,X(t+" j"),this},U.output=xe,U.save=function(e){U.output("save",e)};for(var Se in o.API)o.API.hasOwnProperty(Se)&&("events"===Se&&o.API.events.length?function(e,t){var n,r,o;for(o=t.length-1;-1!==o;o--)n=t[o][0],r=t[o][1],e.subscribe.apply(e,[n].concat("function"==typeof r?[r]:r))}(H,o.API.events):U[Se]=o.API[Se]);return function(){for(var e=[["Helvetica","helvetica","normal"],["Helvetica-Bold","helvetica","bold"],["Helvetica-Oblique","helvetica","italic"],["Helvetica-BoldOblique","helvetica","bolditalic"],["Courier","courier","normal"],["Courier-Bold","courier","bold"],["Courier-Oblique","courier","italic"],["Courier-BoldOblique","courier","bolditalic"],["Times-Roman","times","normal"],["Times-Bold","times","bold"],["Times-Italic","times","italic"],["Times-BoldItalic","times","bolditalic"],["ZapfDingbats","zapfdingbats"]],t=0,n=e.length;t<n;t++){var r=ae(e[t][0],e[t][1],e[t][2],"StandardEncoding"),o=e[t][0].split("-");ie(r,o[0],o[1]||"")}H.publish("addFonts",{fonts:I,dictionary:P})}(),d="F1",de(c,e),H.publish("initialized"),U}var a="1.3",l={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};return o.API={events:[]},o.version="1.x-master","function"==typeof define&&define.amd?define("jsPDF",function(){return o}):void 0!==e&&e.exports?e.exports=o:t.jsPDF=o,o}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||void 0));(window.AcroForm=function(e){var t=window.AcroForm;t.scale=function(e){return e*(n.internal.scaleFactor/1)},t.antiScale=function(e){return 1/n.internal.scaleFactor*e};var n={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null};r.API.acroformPlugin=n;var o=function(){for(var e in this.acroformPlugin.acroFormDictionaryRoot.Fields){var t=this.acroformPlugin.acroFormDictionaryRoot.Fields[e];t.hasAnnotation&&a.call(this,t)}},i=function(){if(this.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");this.acroformPlugin.acroFormDictionaryRoot=new t.AcroFormDictionary,this.acroformPlugin.internal=this.internal,this.acroformPlugin.acroFormDictionaryRoot._eventID=this.internal.events.subscribe("postPutResources",u),this.internal.events.subscribe("buildDocument",o),this.internal.events.subscribe("putCatalog",l),this.internal.events.subscribe("postPutPages",c)},a=function(e){var t={type:"reference",object:e};r.API.annotationPlugin.annotations[this.internal.getPageInfo(e.page).pageNumber].push(t)},s=function(e){this.acroformPlugin.printedOut&&(this.acroformPlugin.printedOut=!1,this.acroformPlugin.acroFormDictionaryRoot=null),this.acroformPlugin.acroFormDictionaryRoot||i.call(this),this.acroformPlugin.acroFormDictionaryRoot.Fields.push(e)},l=function(){void 0!==this.acroformPlugin.acroFormDictionaryRoot?this.internal.write("/AcroForm "+this.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R"):console.log("Root missing...")},u=function(){this.internal.events.unsubscribe(this.acroformPlugin.acroFormDictionaryRoot._eventID),delete this.acroformPlugin.acroFormDictionaryRoot._eventID,this.acroformPlugin.printedOut=!0},c=function(e){var n=!e;e||(this.internal.newObjectDeferredBegin(this.acroformPlugin.acroFormDictionaryRoot.objId),this.internal.out(this.acroformPlugin.acroFormDictionaryRoot.getString()));var e=e||this.acroformPlugin.acroFormDictionaryRoot.Kids;for(var r in e){var o=e[r],i=o.Rect;o.Rect&&(o.Rect=t.internal.calculateCoordinates.call(this,o.Rect)),this.internal.newObjectDeferredBegin(o.objId);var a="";if(a+=o.objId+" 0 obj\n",a+="<<\n"+o.getContent(),o.Rect=i,o.hasAppearanceStream&&!o.appearanceStreamContent){var s=t.internal.calculateAppearanceStream.call(this,o);a+="/AP << /N "+s+" >>\n",this.acroformPlugin.xForms.push(s)}if(o.appearanceStreamContent){a+="/AP << ";for(var l in o.appearanceStreamContent){var u=o.appearanceStreamContent[l];if(a+="/"+l+" ",a+="<< ",Object.keys(u).length>=1||Array.isArray(u))for(var r in u)"function"==typeof(c=u[r])&&(c=c.call(this,o)),a+="/"+r+" "+c+" ",this.acroformPlugin.xForms.indexOf(c)>=0||this.acroformPlugin.xForms.push(c);else{var c=u;"function"==typeof c&&(c=c.call(this,o)),a+="/"+r+" "+c+" \n",this.acroformPlugin.xForms.indexOf(c)>=0||this.acroformPlugin.xForms.push(c)}a+=" >>\n"}a+=">>\n"}a+=">>\nendobj\n",this.internal.out(a)}n&&p.call(this,this.acroformPlugin.xForms)},p=function(e){for(var t in e){var n=t,r=e[t];this.internal.newObjectDeferredBegin(r&&r.objId);var o="";o+=r?r.getString():"",this.internal.out(o),delete e[n]}};e.addField=function(e){return e instanceof t.TextField?d.call(this,e):e instanceof t.ChoiceField?h.call(this,e):e instanceof t.Button?f.call(this,e):e instanceof t.ChildClass?s.call(this,e):e&&s.call(this,e),e.page=this.acroformPlugin.internal.getCurrentPageInfo().pageNumber,this};var f=function(e){(e=e||new t.Field).FT="/Btn";var n=e.Ff||0;e.pushbutton&&(n=t.internal.setBitPosition(n,17),delete e.pushbutton),e.radio&&(n=t.internal.setBitPosition(n,16),delete e.radio),e.noToggleToOff&&(n=t.internal.setBitPosition(n,15)),e.Ff=n,s.call(this,e)},d=function(e){(e=e||new t.Field).FT="/Tx";var n=e.Ff||0;e.multiline&&(n|=4096),e.password&&(n|=8192),e.fileSelect&&(n|=1<<20),e.doNotSpellCheck&&(n|=1<<22),e.doNotScroll&&(n|=1<<23),e.Ff=e.Ff||n,s.call(this,e)},h=function(e){var n=e||new t.Field;n.FT="/Ch";var r=n.Ff||0;n.combo&&(r=t.internal.setBitPosition(r,18),delete n.combo),n.edit&&(r=t.internal.setBitPosition(r,19),delete n.edit),n.sort&&(r=t.internal.setBitPosition(r,20),delete n.sort),n.multiSelect&&this.internal.getPDFVersion()>=1.4&&(r=t.internal.setBitPosition(r,22),delete n.multiSelect),n.doNotSpellCheck&&this.internal.getPDFVersion()>=1.4&&(r=t.internal.setBitPosition(r,23),delete n.doNotSpellCheck),n.Ff=r,s.call(this,n)}})(r.API);var o=window.AcroForm;o.internal={},o.createFormXObject=function(e){var t=new o.FormXObject,n=o.Appearance.internal.getHeight(e)||0,r=o.Appearance.internal.getWidth(e)||0;return t.BBox=[0,0,r,n],t},o.Appearance={CheckBox:{createAppearanceStream:function(){return{N:{On:o.Appearance.CheckBox.YesNormal},D:{On:o.Appearance.CheckBox.YesPushDown,Off:o.Appearance.CheckBox.OffPushDown}}},createMK:function(){return"<< /CA (3)>>"},YesPushDown:function(e){var t=o.createFormXObject(e),n="";e.Q=1;var r=o.internal.calculateX(e,"3","ZapfDingbats",50);return n+="0.749023 g\n             0 0 "+o.Appearance.internal.getWidth(e)+" "+o.Appearance.internal.getHeight(e)+" re\n             f\n             BMC\n             q\n             0 0 1 rg\n             /F13 "+r.fontSize+" Tf 0 g\n             BT\n",n+=r.text,n+="ET\n             Q\n             EMC\n",t.stream=n,t},YesNormal:function(e){var t=o.createFormXObject(e),n="";e.Q=1;var r=o.internal.calculateX(e,"3","ZapfDingbats",.9*o.Appearance.internal.getHeight(e));return n+="1 g\n0 0 "+o.Appearance.internal.getWidth(e)+" "+o.Appearance.internal.getHeight(e)+" re\nf\nq\n0 0 1 rg\n0 0 "+(o.Appearance.internal.getWidth(e)-1)+" "+(o.Appearance.internal.getHeight(e)-1)+" re\nW\nn\n0 g\nBT\n/F13 "+r.fontSize+" Tf 0 g\n",n+=r.text,n+="ET\n             Q\n",t.stream=n,t},OffPushDown:function(e){var t=o.createFormXObject(e),n="";return n+="0.749023 g\n            0 0 "+o.Appearance.internal.getWidth(e)+" "+o.Appearance.internal.getHeight(e)+" re\n            f\n",t.stream=n,t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:o.Appearance.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=o.Appearance.RadioButton.Circle.YesNormal,t.D[e]=o.Appearance.RadioButton.Circle.YesPushDown,t},createMK:function(){return"<< /CA (l)>>"},YesNormal:function(e){var t=o.createFormXObject(e),n="",r=o.Appearance.internal.getWidth(e)<=o.Appearance.internal.getHeight(e)?o.Appearance.internal.getWidth(e)/4:o.Appearance.internal.getHeight(e)/4;r*=.9;var i=o.Appearance.internal.Bezier_C;return n+="q\n1 0 0 1 "+o.Appearance.internal.getWidth(e)/2+" "+o.Appearance.internal.getHeight(e)/2+" cm\n"+r+" 0 m\n"+r+" "+r*i+" "+r*i+" "+r+" 0 "+r+" c\n-"+r*i+" "+r+" -"+r+" "+r*i+" -"+r+" 0 c\n-"+r+" -"+r*i+" -"+r*i+" -"+r+" 0 -"+r+" c\n"+r*i+" -"+r+" "+r+" -"+r*i+" "+r+" 0 c\nf\nQ\n",t.stream=n,t},YesPushDown:function(e){var t=o.createFormXObject(e),n="",r=o.Appearance.internal.getWidth(e)<=o.Appearance.internal.getHeight(e)?o.Appearance.internal.getWidth(e)/4:o.Appearance.internal.getHeight(e)/4,i=2*(r*=.9),a=i*o.Appearance.internal.Bezier_C,s=r*o.Appearance.internal.Bezier_C;return n+="0.749023 g\n            q\n           1 0 0 1 "+o.Appearance.internal.getWidth(e)/2+" "+o.Appearance.internal.getHeight(e)/2+" cm\n"+i+" 0 m\n"+i+" "+a+" "+a+" "+i+" 0 "+i+" c\n-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c\n-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c\n"+a+" -"+i+" "+i+" -"+a+" "+i+" 0 c\n            f\n            Q\n            0 g\n            q\n            1 0 0 1 "+o.Appearance.internal.getWidth(e)/2+" "+o.Appearance.internal.getHeight(e)/2+" cm\n"+r+" 0 m\n"+r+" "+s+" "+s+" "+r+" 0 "+r+" c\n-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c\n-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c\n"+s+" -"+r+" "+r+" -"+s+" "+r+" 0 c\n            f\n            Q\n",t.stream=n,t},OffPushDown:function(e){var t=o.createFormXObject(e),n="",r=o.Appearance.internal.getWidth(e)<=o.Appearance.internal.getHeight(e)?o.Appearance.internal.getWidth(e)/4:o.Appearance.internal.getHeight(e)/4,i=2*(r*=.9),a=i*o.Appearance.internal.Bezier_C;return n+="0.749023 g\n            q\n 1 0 0 1 "+o.Appearance.internal.getWidth(e)/2+" "+o.Appearance.internal.getHeight(e)/2+" cm\n"+i+" 0 m\n"+i+" "+a+" "+a+" "+i+" 0 "+i+" c\n-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c\n-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c\n"+a+" -"+i+" "+i+" -"+a+" "+i+" 0 c\n            f\n            Q\n",t.stream=n,t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:o.Appearance.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=o.Appearance.RadioButton.Cross.YesNormal,t.D[e]=o.Appearance.RadioButton.Cross.YesPushDown,t},createMK:function(){return"<< /CA (8)>>"},YesNormal:function(e){var t=o.createFormXObject(e),n="",r=o.Appearance.internal.calculateCross(e);return n+="q\n            1 1 "+(o.Appearance.internal.getWidth(e)-2)+" "+(o.Appearance.internal.getHeight(e)-2)+" re\n            W\n            n\n            "+r.x1.x+" "+r.x1.y+" m\n            "+r.x2.x+" "+r.x2.y+" l\n            "+r.x4.x+" "+r.x4.y+" m\n            "+r.x3.x+" "+r.x3.y+" l\n            s\n            Q\n",t.stream=n,t},YesPushDown:function(e){var t=o.createFormXObject(e),n=o.Appearance.internal.calculateCross(e),r="";return r+="0.749023 g\n            0 0 "+o.Appearance.internal.getWidth(e)+" "+o.Appearance.internal.getHeight(e)+" re\n            f\n            q\n            1 1 "+(o.Appearance.internal.getWidth(e)-2)+" "+(o.Appearance.internal.getHeight(e)-2)+" re\n            W\n            n\n            "+n.x1.x+" "+n.x1.y+" m\n            "+n.x2.x+" "+n.x2.y+" l\n            "+n.x4.x+" "+n.x4.y+" m\n            "+n.x3.x+" "+n.x3.y+" l\n            s\n            Q\n",t.stream=r,t},OffPushDown:function(e){var t=o.createFormXObject(e),n="";return n+="0.749023 g\n            0 0 "+o.Appearance.internal.getWidth(e)+" "+o.Appearance.internal.getHeight(e)+" re\n            f\n",t.stream=n,t}}},createDefaultAppearanceStream:function(e){var t="";return t+="/Helv 0 Tf 0 g"}},o.Appearance.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=o.Appearance.internal.getWidth(e),n=o.Appearance.internal.getHeight(e),r=function(e,t){return e>t?t:e}(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},o.Appearance.internal.getWidth=function(e){return e.Rect[2]},o.Appearance.internal.getHeight=function(e){return e.Rect[3]},o.internal.inherit=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},o.internal.arrayToPdfArray=function(e){if(Array.isArray(e)){var t=" [";for(var n in e)t+=e[n].toString(),t+=n<e.length-1?" ":"";return t+="]"}},o.internal.toPdfString=function(e){return 0!==(e=e||"").indexOf("(")&&(e="("+e),")"!=e.substring(e.length-1)&&(e+="("),e},o.PDFObject=function(){var e;Object.defineProperty(this,"objId",{get:function(){return e||(this.internal?e=this.internal.newObjectDeferred():r.API.acroformPlugin.internal&&(e=r.API.acroformPlugin.internal.newObjectDeferred())),e||console.log("Couldn't create Object ID"),e},configurable:!1})},o.PDFObject.prototype.toString=function(){return this.objId+" 0 R"},o.PDFObject.prototype.getString=function(){var e=this.objId+" 0 obj\n<<";return e+=this.getContent()+">>\n",this.stream&&(e+="stream\n",e+=this.stream,e+="endstream\n"),e+="endobj\n"},o.PDFObject.prototype.getContent=function(){var e="";return e+=function(e){var t="",n=Object.keys(e).filter(function(e){return"content"!=e&&"appearanceStreamContent"!=e&&"_"!=e.substring(0,1)});for(var r in n){var i=n[r],a=e[i];a&&(Array.isArray(a)?t+="/"+i+" "+o.internal.arrayToPdfArray(a)+"\n":a instanceof o.PDFObject?t+="/"+i+" "+a.objId+" 0 R\n":t+="/"+i+" "+a+"\n")}return t}(this)},o.FormXObject=function(){o.PDFObject.call(this),this.Type="/XObject",this.Subtype="/Form",this.FormType=1,this.BBox,this.Matrix,this.Resources="2 0 R",this.PieceInfo;var e;Object.defineProperty(this,"Length",{enumerable:!0,get:function(){return void 0!==e?e.length:0}}),Object.defineProperty(this,"stream",{enumerable:!1,set:function(t){e=t},get:function(){return e||null}})},o.internal.inherit(o.FormXObject,o.PDFObject),o.AcroFormDictionary=function(){o.PDFObject.call(this);var e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!0,configurable:!0,get:function(){return e}}),this.DA},o.internal.inherit(o.AcroFormDictionary,o.PDFObject),o.Field=function(){o.PDFObject.call(this);var e;Object.defineProperty(this,"Rect",{enumerable:!0,configurable:!1,get:function(){if(e)return e},set:function(t){e=t}});var t="";Object.defineProperty(this,"FT",{enumerable:!0,set:function(e){t=e},get:function(){return t}});var n;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,set:function(e){n=e},get:function(){if(!n||n.length<1){if(this instanceof o.ChildClass)return;return"(FieldObject"+o.Field.FieldNum+++")"}return"("==n.substring(0,1)&&n.substring(n.length-1)?n:"("+n+")"}});var r;Object.defineProperty(this,"DA",{enumerable:!0,get:function(){if(r)return"("+r+")"},set:function(e){r=e}});var i;Object.defineProperty(this,"DV",{enumerable:!0,configurable:!0,get:function(){if(i)return i},set:function(e){i=e}}),Object.defineProperty(this,"Type",{enumerable:!0,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,get:function(){return this.hasAnnotation?"/Widget":null}}),this.BG,Object.defineProperty(this,"hasAnnotation",{enumerable:!1,get:function(){return!!(this.Rect||this.BC||this.BG)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!1,configurable:!0,writable:!0}),Object.defineProperty(this,"page",{enumerable:!1,configurable:!0,writable:!0})},o.Field.FieldNum=0,o.internal.inherit(o.Field,o.PDFObject),o.ChoiceField=function(){o.Field.call(this),this.FT="/Ch",this.Opt=[],this.V="()",this.TI=0,this.combo=!1,Object.defineProperty(this,"edit",{enumerable:!0,set:function(e){1==e?(this._edit=!0,this.combo=!0):this._edit=!1},get:function(){return!!this._edit&&this._edit},configurable:!1}),this.hasAppearanceStream=!0,Object.defineProperty(this,"V",{get:function(){o.internal.toPdfString()}})},o.internal.inherit(o.ChoiceField,o.Field),window.ChoiceField=o.ChoiceField,o.ListBox=function(){o.ChoiceField.call(this)},o.internal.inherit(o.ListBox,o.ChoiceField),window.ListBox=o.ListBox,o.ComboBox=function(){o.ListBox.call(this),this.combo=!0},o.internal.inherit(o.ComboBox,o.ListBox),window.ComboBox=o.ComboBox,o.EditBox=function(){o.ComboBox.call(this),this.edit=!0},o.internal.inherit(o.EditBox,o.ComboBox),window.EditBox=o.EditBox,o.Button=function(){o.Field.call(this),this.FT="/Btn"},o.internal.inherit(o.Button,o.Field),window.Button=o.Button,o.PushButton=function(){o.Button.call(this),this.pushbutton=!0},o.internal.inherit(o.PushButton,o.Button),window.PushButton=o.PushButton,o.RadioButton=function(){o.Button.call(this),this.radio=!0;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,get:function(){if(e.length>0)return e}}),Object.defineProperty(this,"__Kids",{get:function(){return e}});var t;Object.defineProperty(this,"noToggleToOff",{enumerable:!1,get:function(){return t},set:function(e){t=e}})},o.internal.inherit(o.RadioButton,o.Button),window.RadioButton=o.RadioButton,o.ChildClass=function(e,t){o.Field.call(this),this.Parent=e,this._AppearanceType=o.Appearance.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(t),this.F=o.internal.setBitPosition(this.F,3,1),this.MK=this._AppearanceType.createMK(),this.AS="/Off",this._Name=t},o.internal.inherit(o.ChildClass,o.Field),o.RadioButton.prototype.setAppearance=function(e){if("createAppearanceStream"in e&&"createMK"in e)for(var t in this.__Kids){var n=this.__Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n._Name),n.MK=e.createMK()}else console.log("Couldn't assign Appearance to RadioButton. Appearance was Invalid!")},o.RadioButton.prototype.createOption=function(e){var t=this,n=new o.ChildClass(t,e);return this.__Kids.push(n),r.API.addField(n),n},o.CheckBox=function(){Button.call(this),this.appearanceStreamContent=o.Appearance.CheckBox.createAppearanceStream(),this.MK=o.Appearance.CheckBox.createMK(),this.AS="/On",this.V="/On"},o.internal.inherit(o.CheckBox,o.Button),window.CheckBox=o.CheckBox,o.TextField=function(){o.Field.call(this),this.DA=o.Appearance.createDefaultAppearanceStream(),this.F=4;var e;Object.defineProperty(this,"V",{get:function(){return e?"("+e+")":e},enumerable:!0,set:function(t){e=t}});var t;Object.defineProperty(this,"DV",{get:function(){return t?"("+t+")":t},enumerable:!0,set:function(e){t=e}});var n=!1;Object.defineProperty(this,"multiline",{enumerable:!1,get:function(){return n},set:function(e){n=e}});var r=!1;Object.defineProperty(this,"MaxLen",{enumerable:!0,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!1,get:function(){return this.V||this.DV}})},o.internal.inherit(o.TextField,o.Field),window.TextField=o.TextField,o.PasswordField=function(){TextField.call(this),Object.defineProperty(this,"password",{value:!0,enumerable:!1,configurable:!1,writable:!1})},o.internal.inherit(o.PasswordField,o.TextField),window.PasswordField=o.PasswordField,o.internal.calculateFontSpace=function(e,t,n){var n=n||"helvetica",r=o.internal.calculateFontSpace.canvas||(o.internal.calculateFontSpace.canvas=document.createElement("canvas"));(s=r.getContext("2d")).save();var i=t+" "+n;s.font=i;var a=s.measureText(e);s.fontcolor="black";var s=r.getContext("2d");return a.height=1.5*s.measureText("3").width,s.restore(),a},o.internal.calculateX=function(e,t,n,r){var r=r||12,n=n||"helvetica",i={text:"",fontSize:""},a=(t=")"==(t="("==t.substr(0,1)?t.substr(1):t).substr(t.length-1)?t.substr(0,t.length-1):t).split(" "),s=r,l=o.Appearance.internal.getHeight(e)||0;l=l<0?-l:l;var u=o.Appearance.internal.getWidth(e)||0;u=u<0?-u:u,s++;e:for(;;){var t="";s--;var c=o.internal.calculateFontSpace("3",s+"px",n).height,p=e.multiline?l-s:(l-c)/2,f=-2,d=p+=2,h=0,m=0,g=0;if(0==s){s=12,t="(...) Tj\n",t+="% Width of Text: "+o.internal.calculateFontSpace(t,"1px").width+", FieldWidth:"+u+"\n";break}g=o.internal.calculateFontSpace(a[0]+" ",s+"px",n).width;var v="",y=0;for(var b in a){v=" "==(v+=a[b]+" ").substr(v.length-1)?v.substr(0,v.length-1):v;var w=parseInt(b);g=o.internal.calculateFontSpace(v+" ",s+"px",n).width;var x=function(e,t,r){if(e+1<a.length){var i=t+" "+a[e+1];return o.internal.calculateFontSpace(i,r+"px",n).width<=u-4}return!1}(w,v,s),_=b>=a.length-1;if(!x||_){if(x||_){if(_)m=w;else if(e.multiline&&(c+2)*(y+2)+2>l)continue e}else{if(!e.multiline)continue e;if((c+2)*(y+2)+2>l)continue e;m=w}for(var S="",C=h;C<=m;C++)S+=a[C]+" ";switch(S=" "==S.substr(S.length-1)?S.substr(0,S.length-1):S,g=o.internal.calculateFontSpace(S,s+"px",n).width,e.Q){case 2:f=u-g-2;break;case 1:f=(u-g)/2;break;case 0:default:f=2}t+=f+" "+d+" Td\n",t+="("+S+") Tj\n",t+=-f+" 0 Td\n",d=-(s+2),g=0,h=m+1,y++,v=""}else v+=" "}break}return i.text=t,i.fontSize=s,i},o.internal.calculateAppearanceStream=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t="",n=e.V||e.DV,r=o.internal.calculateX(e,n);t+="/Tx BMC\nq\n/F1 "+r.fontSize+" Tf\n1 0 0 1 0 0 Tm\n",t+="BT\n",t+=r.text,t+="ET\n",t+="Q\nEMC\n";var i=new o.createFormXObject(e);return i.stream=t,i}},o.internal.calculateCoordinates=function(e,t,n,r){var i={};if(this.internal){var a=function(e){return e*this.internal.scaleFactor};Array.isArray(e)?(e[0]=o.scale(e[0]),e[1]=o.scale(e[1]),e[2]=o.scale(e[2]),e[3]=o.scale(e[3]),i.lowerLeft_X=e[0]||0,i.lowerLeft_Y=a.call(this,this.internal.pageSize.height)-e[3]-e[1]||0,i.upperRight_X=e[0]+e[2]||0,i.upperRight_Y=a.call(this,this.internal.pageSize.height)-e[1]||0):(e=o.scale(e),t=o.scale(t),n=o.scale(n),r=o.scale(r),i.lowerLeft_X=e||0,i.lowerLeft_Y=this.internal.pageSize.height-t||0,i.upperRight_X=e+n||0,i.upperRight_Y=this.internal.pageSize.height-t+r||0)}else Array.isArray(e)?(i.lowerLeft_X=e[0]||0,i.lowerLeft_Y=e[1]||0,i.upperRight_X=e[0]+e[2]||0,i.upperRight_Y=e[1]+e[3]||0):(i.lowerLeft_X=e||0,i.lowerLeft_Y=t||0,i.upperRight_X=e+n||0,i.upperRight_Y=t+r||0);return[i.lowerLeft_X,i.lowerLeft_Y,i.upperRight_X,i.upperRight_Y]},o.internal.calculateColor=function(e,t,n){var r=new Array(3);return r.r=0|e,r.g=0|t,r.b=0|n,r},o.internal.getBitPosition=function(e,t){var n=1;return n<<=t-1,(e=e||0)|n},o.internal.setBitPosition=function(e,t,n){e=e||0;var r=1;if(r<<=t-1,1==(n=n||1))e|=r;else var e=e&~r;return e},r.API.addHTML=function(e,t,n,r,o){if("undefined"==typeof html2canvas&&"undefined"==typeof rasterizeHTML)throw new Error("You need either https://github.com/niklasvh/html2canvas or https://github.com/cburgmer/rasterizeHTML.js");"number"!=typeof t&&(r=t,o=n),"function"==typeof r&&(o=r,r=null);var i=this.internal,a=i.scaleFactor,s=i.pageSize.width,l=i.pageSize.height;if(r=r||{},r.onrendered=function(e){t=parseInt(t)||0,n=parseInt(n)||0;var i=r.dim||{},u=i.h||0,c=i.w||Math.min(s,e.width/a)-t,p="JPEG";if(r.format&&(p=r.format),e.height>l&&r.pagesplit){var f=function(){for(var r=0;;){var i=document.createElement("canvas");i.width=Math.min(s*a,e.width),i.height=Math.min(l*a,e.height-r),i.getContext("2d").drawImage(e,0,r,e.width,i.height,0,0,i.width,i.height);var u=[i,t,r?0:n,i.width/a,i.height/a,p,null,"SLOW"];if(this.addImage.apply(this,u),(r+=i.height)>=e.height)break;this.addPage()}o(c,r,null,u)}.bind(this);if("CANVAS"===e.nodeName){var d=new Image;d.onload=f,d.src=e.toDataURL("image/png"),e=d}else f()}else{var h=Math.random().toString(35),m=[e,t,n,c,u,p,h,"SLOW"];this.addImage.apply(this,m),o(c,u,h,m)}}.bind(this),"undefined"!=typeof html2canvas&&!r.rstz)return html2canvas(e,r);if("undefined"!=typeof rasterizeHTML){var u="drawDocument";return"string"==typeof e&&(u=/^http/.test(e)?"drawURL":"drawHTML"),r.width=r.width||s*a,rasterizeHTML[u](e,void 0,r).then(function(e){r.onrendered(e.image)},function(e){o(null,e)})}return null},function(e){var t=["jpeg","jpg","png"],r=function e(t){var n=this.internal.newObject(),r=this.internal.write,o=this.internal.putStream;if(t.n=n,r("<</Type /XObject"),r("/Subtype /Image"),r("/Width "+t.w),r("/Height "+t.h),t.cs===this.color_spaces.INDEXED?r("/ColorSpace [/Indexed /DeviceRGB "+(t.pal.length/3-1)+" "+("smask"in t?n+2:n+1)+" 0 R]"):(r("/ColorSpace /"+t.cs),t.cs===this.color_spaces.DEVICE_CMYK&&r("/Decode [1 0 1 0 1 0 1 0]")),r("/BitsPerComponent "+t.bpc),"f"in t&&r("/Filter /"+t.f),"dp"in t&&r("/DecodeParms <<"+t.dp+">>"),"trns"in t&&t.trns.constructor==Array){for(var i="",a=0,s=t.trns.length;a<s;a++)i+=t.trns[a]+" "+t.trns[a]+" ";r("/Mask ["+i+"]")}if("smask"in t&&r("/SMask "+(n+1)+" 0 R"),r("/Length "+t.data.length+">>"),o(t.data),r("endobj"),"smask"in t){var l="/Predictor "+t.p+" /Colors 1 /BitsPerComponent "+t.bpc+" /Columns "+t.w,u={w:t.w,h:t.h,cs:"DeviceGray",bpc:t.bpc,dp:l,data:t.smask};"f"in t&&(u.f=t.f),e.call(this,u)}t.cs===this.color_spaces.INDEXED&&(this.internal.newObject(),r("<< /Length "+t.pal.length+">>"),o(this.arrayBufferToBinaryString(new Uint8Array(t.pal))),r("endobj"))},o=function(){var e=this.internal.collections.addImage_images;for(var t in e)r.call(this,e[t])},i=function(){var e,t=this.internal.collections.addImage_images,n=this.internal.write;for(var r in t)n("/I"+(e=t[r]).i,e.n,"0","R")},a=function(t){return t&&"string"==typeof t&&(t=t.toUpperCase()),t in e.image_compression?t:e.image_compression.NONE},s=function(){var e=this.internal.collections.addImage_images;return e||(this.internal.collections.addImage_images=e={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",i)),e},l=function(e){var t=0;return e&&(t=Object.keys?Object.keys(e).length:function(e){var t=0;for(var n in e)e.hasOwnProperty(n)&&t++;return t}(e)),t},u=function(e){return void 0===e||null===e},c=function(t){return"string"==typeof t&&e.sHashCode(t)},p=function(e){return-1===t.indexOf(e)},f=function(t){return"function"!=typeof e["process"+t.toUpperCase()]},d=function(e){return"object"===(void 0===e?"undefined":n(e))&&1===e.nodeType},h=function(e,t,r){if("IMG"===e.nodeName&&e.hasAttribute("src")){var o=""+e.getAttribute("src");if(!r&&0===o.indexOf("data:image/"))return o;!t&&/\.png(?:[?#].*)?$/i.test(o)&&(t="png")}if("CANVAS"===e.nodeName)var i=e;else{(i=document.createElement("canvas")).width=e.clientWidth||e.width,i.height=e.clientHeight||e.height;var a=i.getContext("2d");if(!a)throw"addImage requires canvas to be supported by browser.";if(r){var s,l,u,c,p,f,d,h,m=Math.PI/180;"object"===(void 0===r?"undefined":n(r))&&(s=r.x,l=r.y,u=r.bg,r=r.angle),h=r*m,c=Math.abs(Math.cos(h)),p=Math.abs(Math.sin(h)),f=i.width,d=i.height,i.width=d*p+f*c,i.height=d*c+f*p,isNaN(s)&&(s=i.width/2),isNaN(l)&&(l=i.height/2),a.clearRect(0,0,i.width,i.height),a.fillStyle=u||"white",a.fillRect(0,0,i.width,i.height),a.save(),a.translate(s,l),a.rotate(h),a.drawImage(e,-f/2,-d/2),a.rotate(-h),a.translate(-s,-l),a.restore()}else a.drawImage(e,0,0,i.width,i.height)}return i.toDataURL("png"==(""+t).toLowerCase()?"image/png":"image/jpeg")},m=function(e,t){var n;if(t)for(var r in t)if(e===t[r].alias){n=t[r];break}return n},g=function(e,t,n){return e||t||(e=-96,t=-96),e<0&&(e=-1*n.w*72/e/this.internal.scaleFactor),t<0&&(t=-1*n.h*72/t/this.internal.scaleFactor),0===e&&(e=t*n.w/n.h),0===t&&(t=e*n.h/n.w),[e,t]},v=function(e,t,n,r,o,i,a){var s=g.call(this,n,r,o),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;n=s[0],r=s[1],a[i]=o,this.internal.write("q",l(n),"0 0",l(r),l(e),u(t+r),"cm /I"+o.i,"Do Q")};e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"},e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"},e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},e.sHashCode=function(e){return Array.prototype.reduce&&e.split("").reduce(function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e},0)},e.isString=function(e){return"string"==typeof e},e.extractInfoFromBase64DataURI=function(e){return/^data:([\w]+?\/([\w]+?));base64,(.+?)$/g.exec(e)},e.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array},e.isArrayBuffer=function(e){return!!this.supportsArrayBuffer()&&e instanceof ArrayBuffer},e.isArrayBufferView=function(e){return!!this.supportsArrayBuffer()&&"undefined"!=typeof Uint32Array&&(e instanceof Int8Array||e instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)},e.binaryStringToUint8Array=function(e){for(var t=e.length,n=new Uint8Array(t),r=0;r<t;r++)n[r]=e.charCodeAt(r);return n},e.arrayBufferToBinaryString=function(e){if("function"==typeof window.atob)return atob(this.arrayBufferToBase64(e));for(var t=this.isArrayBuffer(e)?e:new Uint8Array(e),n="",r=Math.round(t.byteLength/20480),o=0;o<r;o++)n+=String.fromCharCode.apply(null,t.slice(20480*o,20480*o+20480));return n},e.arrayBufferToBase64=function(e){for(var t,n,r,o,i="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=new Uint8Array(e),l=s.byteLength,u=l%3,c=l-u,p=0;p<c;p+=3)t=(258048&(o=s[p]<<16|s[p+1]<<8|s[p+2]))>>12,n=(4032&o)>>6,r=63&o,i+=a[(16515072&o)>>18]+a[t]+a[n]+a[r];return 1==u?(t=(3&(o=s[c]))<<4,i+=a[(252&o)>>2]+a[t]+"=="):2==u&&(t=(1008&(o=s[c]<<8|s[c+1]))>>4,n=(15&o)<<2,i+=a[(64512&o)>>10]+a[t]+a[n]+"="),i},e.createImageInfo=function(e,t,n,r,o,i,a,s,l,u,c,p,f){var d={alias:s,w:t,h:n,cs:r,bpc:o,i:a,data:e};return i&&(d.f=i),l&&(d.dp=l),u&&(d.trns=u),c&&(d.pal=c),p&&(d.smask=p),f&&(d.p=f),d},e.addImage=function(e,r,o,i,g,y,b,w,x){if("string"!=typeof r){var _=y;y=g,g=i,i=o,o=r,r=_}if("object"===(void 0===e?"undefined":n(e))&&!d(e)&&"imageData"in e){var S=e;e=S.imageData,r=S.format||r,o=S.x||o||0,i=S.y||i||0,g=S.w||g,y=S.h||y,b=S.alias||b,w=S.compression||w,x=S.rotation||S.angle||x}if(isNaN(o)||isNaN(i))throw console.error("jsPDF.addImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addImage");var C,k=s.call(this);if(!(C=m(e,k))){var A;if(d(e)&&(e=h(e,r,x)),u(b)&&(b=c(e)),!(C=m(b,k))){if(this.isString(e)){var E=this.extractInfoFromBase64DataURI(e);E?(r=E[2],e=atob(E[3])):137===e.charCodeAt(0)&&80===e.charCodeAt(1)&&78===e.charCodeAt(2)&&71===e.charCodeAt(3)&&(r="png")}if(r=(r||"JPEG").toLowerCase(),p(r))throw new Error("addImage currently only supports formats "+t+", not '"+r+"'");if(f(r))throw new Error("please ensure that the plugin for '"+r+"' support is added");if(this.supportsArrayBuffer()&&(e instanceof Uint8Array||(A=e,e=this.binaryStringToUint8Array(e))),!(C=this["process"+r.toUpperCase()](e,l(k),b,a(w),A)))throw new Error("An unkwown error occurred whilst processing the image")}}return v.call(this,o,i,g,y,C,C.i,k),this};var y=function(e){var t,n,r;if(255===!e.charCodeAt(0)||216===!e.charCodeAt(1)||255===!e.charCodeAt(2)||224===!e.charCodeAt(3)||!e.charCodeAt(6)==="J".charCodeAt(0)||!e.charCodeAt(7)==="F".charCodeAt(0)||!e.charCodeAt(8)==="I".charCodeAt(0)||!e.charCodeAt(9)==="F".charCodeAt(0)||0===!e.charCodeAt(10))throw new Error("getJpegSize requires a binary string jpeg file");for(var o=256*e.charCodeAt(4)+e.charCodeAt(5),i=4,a=e.length;i<a;){if(i+=o,255!==e.charCodeAt(i))throw new Error("getJpegSize could not find the size of the image");if(192===e.charCodeAt(i+1)||193===e.charCodeAt(i+1)||194===e.charCodeAt(i+1)||195===e.charCodeAt(i+1)||196===e.charCodeAt(i+1)||197===e.charCodeAt(i+1)||198===e.charCodeAt(i+1)||199===e.charCodeAt(i+1))return n=256*e.charCodeAt(i+5)+e.charCodeAt(i+6),t=256*e.charCodeAt(i+7)+e.charCodeAt(i+8),r=e.charCodeAt(i+9),[t,n,r];i+=2,o=256*e.charCodeAt(i)+e.charCodeAt(i+1)}},b=function(e){if(65496!=(e[0]<<8|e[1]))throw new Error("Supplied data is not a JPEG");for(var t,n,r,o,i=e.length,a=(e[4]<<8)+e[5],s=4;s<i;){if(s+=a,t=w(e,s),a=(t[2]<<8)+t[3],(192===t[1]||194===t[1])&&255===t[0]&&a>7)return t=w(e,s+5),n=(t[2]<<8)+t[3],r=(t[0]<<8)+t[1],o=t[4],{width:n,height:r,numcomponents:o};s+=2}throw new Error("getJpegSizeFromBytes could not find the size of the image")},w=function(e,t){return e.subarray(t,t+5)};e.processJPEG=function(e,t,n,r,o){var i,a=this.color_spaces.DEVICE_RGB,s=this.decode.DCT_DECODE;return this.isString(e)?(i=y(e),this.createImageInfo(e,i[0],i[1],1==i[3]?this.color_spaces.DEVICE_GRAY:a,8,s,t,n)):(this.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.isArrayBufferView(e)?(i=b(e),e=o||this.arrayBufferToBinaryString(e),this.createImageInfo(e,i.width,i.height,1==i.numcomponents?this.color_spaces.DEVICE_GRAY:a,8,s,t,n)):null)},e.processJPG=function(){return this.processJPEG.apply(this,arguments)}}(r.API),function(e){var t={annotations:[],f2:function(e){return e.toFixed(2)},notEmpty:function(e){if(void 0!==e&&""!=e)return!0}};r.API.annotationPlugin=t,r.API.events.push(["addPage",function(e){this.annotationPlugin.annotations[e.pageNumber]=[]}]),e.events.push(["putPage",function(e){for(var n=this.annotationPlugin.annotations[e.pageNumber],r=!1,o=0;o<n.length&&!r;o++)switch((u=n[o]).type){case"link":if(t.notEmpty(u.options.url)||t.notEmpty(u.options.pageNumber)){r=!0;break}case"reference":case"text":case"freetext":r=!0}if(0!=r){this.internal.write("/Annots [");for(var i=this.annotationPlugin.f2,a=this.internal.scaleFactor,s=this.internal.pageSize.height,l=this.internal.getPageInfo(e.pageNumber),o=0;o<n.length;o++){var u=n[o];switch(u.type){case"reference":this.internal.write(" "+u.object.objId+" 0 R ");break;case"text":var c=this.internal.newAdditionalObject(),p=this.internal.newAdditionalObject(),f=u.title||"Note";v="<</Type /Annot /Subtype /Text "+(h="/Rect ["+i(u.bounds.x*a)+" "+i(s-(u.bounds.y+u.bounds.h)*a)+" "+i((u.bounds.x+u.bounds.w)*a)+" "+i((s-u.bounds.y)*a)+"] ")+"/Contents ("+u.contents+")",v+=" /Popup "+p.objId+" 0 R",v+=" /P "+l.objId+" 0 R",v+=" /T ("+f+") >>",c.content=v;var d=c.objId+" 0 R";v="<</Type /Annot /Subtype /Popup "+(h="/Rect ["+i((u.bounds.x+30)*a)+" "+i(s-(u.bounds.y+u.bounds.h)*a)+" "+i((u.bounds.x+u.bounds.w+30)*a)+" "+i((s-u.bounds.y)*a)+"] ")+" /Parent "+d,u.open&&(v+=" /Open true"),v+=" >>",p.content=v,this.internal.write(c.objId,"0 R",p.objId,"0 R");break;case"freetext":var h="/Rect ["+i(u.bounds.x*a)+" "+i((s-u.bounds.y)*a)+" "+i(u.bounds.x+u.bounds.w*a)+" "+i(s-(u.bounds.y+u.bounds.h)*a)+"] ",m=u.color||"#000000";v="<</Type /Annot /Subtype /FreeText "+h+"/Contents ("+u.contents+")",v+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+m+")",v+=" /Border [0 0 0]",v+=" >>",this.internal.write(v);break;case"link":if(u.options.name){var g=this.annotations._nameMap[u.options.name];u.options.pageNumber=g.page,u.options.top=g.y}else u.options.top||(u.options.top=0);var h="/Rect ["+i(u.x*a)+" "+i((s-u.y)*a)+" "+i((u.x+u.w)*a)+" "+i((s-(u.y+u.h))*a)+"] ",v="";if(u.options.url)v="<</Type /Annot /Subtype /Link "+h+"/Border [0 0 0] /A <</S /URI /URI ("+u.options.url+") >>";else if(u.options.pageNumber)switch(v="<</Type /Annot /Subtype /Link "+h+"/Border [0 0 0] /Dest ["+(e=this.internal.getPageInfo(u.options.pageNumber)).objId+" 0 R",u.options.magFactor=u.options.magFactor||"XYZ",u.options.magFactor){case"Fit":v+=" /Fit]";break;case"FitH":v+=" /FitH "+u.options.top+"]";break;case"FitV":u.options.left=u.options.left||0,v+=" /FitV "+u.options.left+"]";break;case"XYZ":default:var y=i((s-u.options.top)*a);u.options.left=u.options.left||0,void 0===u.options.zoom&&(u.options.zoom=0),v+=" /XYZ "+u.options.left+" "+y+" "+u.options.zoom+"]"}""!=v&&(v+=" >>",this.internal.write(v))}}this.internal.write("]")}}]),e.createAnnotation=function(e){switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":this.annotationPlugin.annotations[this.internal.getCurrentPageInfo().pageNumber].push(e)}},e.link=function(e,t,n,r,o){this.annotationPlugin.annotations[this.internal.getCurrentPageInfo().pageNumber].push({x:e,y:t,w:n,h:r,options:o,type:"link"})},e.textWithLink=function(e,t,n,r){var o=this.getTextWidth(e),i=this.internal.getLineHeight()/this.internal.scaleFactor;return this.text(e,t,n),n+=.2*i,this.link(t,n-i,o,i,r),o},e.getTextWidth=function(e){var t=this.internal.getFontSize();return this.getStringUnitWidth(e)*t/this.internal.scaleFactor},e.getLineHeight=function(){return this.internal.getLineHeight()}}(r.API),r.API.autoPrint=function(){var e;return this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.write("<< /S/Named /Type/Action /N/Print >>","endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.write("/OpenAction "+e+" 0 R")}),this},function(e){e.events.push(["initialized",function(){this.canvas.pdf=this}]),e.canvas={getContext:function(e){return this.pdf.context2d._canvas=this,this.pdf.context2d},style:{}},Object.defineProperty(e.canvas,"width",{get:function(){return this._width},set:function(e){this._width=e,this.getContext("2d").pageWrapX=e+1}}),Object.defineProperty(e.canvas,"height",{get:function(){return this._height},set:function(e){this._height=e,this.getContext("2d").pageWrapY=e+1}})}(r.API),function(e){var t,n,r,o,i={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0},a=1,s=function(e,t,n,r,o){i={x:e,y:t,w:n,h:r,ln:o}},l=function(){return i},u={left:0,top:0,bottom:0};e.setHeaderFunction=function(e){o=e},e.getTextDimensions=function(e){t=this.internal.getFont().fontName,n=this.table_font_size||this.internal.getFontSize(),r=this.internal.getFont().fontStyle;var o,i;(i=document.createElement("font")).id="jsPDFCell";try{i.style.fontStyle=r}catch(e){i.style.fontWeight=r}i.style.fontName=t,i.style.fontSize=n+"pt";try{i.textContent=e}catch(t){i.innerText=e}return document.body.appendChild(i),o={w:(i.offsetWidth+1)*(19.049976/25.4),h:(i.offsetHeight+1)*(19.049976/25.4)},document.body.removeChild(i),o},e.cellAddPage=function(){var e=this.margins||u;this.addPage(),s(e.left,e.top,void 0,void 0),a+=1},e.cellInitialize=function(){i={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0},a=1},e.cell=function(e,t,n,r,o,i,a){var c=l(),p=!1;if(void 0!==c.ln)if(c.ln===i)e=c.x+c.w,t=c.y;else{var f=this.margins||u;c.y+c.h+r+13>=this.internal.pageSize.height-f.bottom&&(this.cellAddPage(),p=!0,this.printHeaders&&this.tableHeaderRow&&this.printHeaderRow(i,!0)),t=l().y+l().h,p&&(t=23)}if(void 0!==o[0])if(this.printingHeaderRow?this.rect(e,t,n,r,"FD"):this.rect(e,t,n,r),"right"===a){o instanceof Array||(o=[o]);for(var d=0;d<o.length;d++){var h=o[d],m=this.getStringUnitWidth(h)*this.internal.getFontSize();this.text(h,e+n-m-3,t+this.internal.getLineHeight()*(d+1))}}else this.text(o,e+3,t+this.internal.getLineHeight());return s(e,t,n,r,i),this},e.arrayMax=function(e,t){var n,r,o,i=e[0];for(n=0,r=e.length;n<r;n+=1)o=e[n],t?-1===t(i,o)&&(i=o):o>i&&(i=o);return i},e.table=function(t,n,r,o,s){if(!r)throw"No data for PDF table";var l,c,p,f,d,h,m,g,v,y,b=[],w=[],x={},_={},S=[],C=[],k=!1,A=!0,E=12,M=u;if(M.width=this.internal.pageSize.width,s&&(!0===s.autoSize&&(k=!0),!1===s.printHeaders&&(A=!1),s.fontSize&&(E=s.fontSize),s.css&&void 0!==s.css["font-size"]&&(E=16*s.css["font-size"]),s.margins&&(M=s.margins)),this.lnMod=0,i={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0},a=1,this.printHeaders=A,this.margins=M,this.setFontSize(E),this.table_font_size=E,void 0===o||null===o)b=Object.keys(r[0]);else if(o[0]&&"string"!=typeof o[0])for(c=0,p=o.length;c<p;c+=1)l=o[c],b.push(l.name),w.push(l.prompt),_[l.name]=l.width*(19.049976/25.4);else b=o;if(k)for(y=function(e){return e[l]},c=0,p=b.length;c<p;c+=1){for(x[l=b[c]]=r.map(y),S.push(this.getTextDimensions(w[c]||l).w),m=0,f=(h=x[l]).length;m<f;m+=1)d=h[m],S.push(this.getTextDimensions(d).w);_[l]=e.arrayMax(S),S=[]}if(A){for(T=this.calculateLineHeight(b,_,w.length?w:b),c=0,p=b.length;c<p;c+=1)l=b[c],C.push([t,n,_[l],T,String(w.length?w[c]:l)]);this.setTableHeaderRow(C),this.printHeaderRow(1,!1)}for(c=0,p=r.length;c<p;c+=1){var T;for(g=r[c],T=this.calculateLineHeight(b,_,g),m=0,v=b.length;m<v;m+=1)l=b[m],this.cell(t,n,_[l],T,g[l],c+2,l.align)}return this.lastCellPos=i,this.table_x=t,this.table_y=n,this},e.calculateLineHeight=function(e,t,n){for(var r,o=0,i=0;i<e.length;i++){n[r=e[i]]=this.splitTextToSize(String(n[r]),t[r]-3);var a=this.internal.getLineHeight()*n[r].length+3;a>o&&(o=a)}return o},e.setTableHeaderRow=function(e){this.tableHeaderRow=e},e.printHeaderRow=function(e,t){if(!this.tableHeaderRow)throw"Property tableHeaderRow does not exist.";var n,r,i,l;if(this.printingHeaderRow=!0,void 0!==o){var u=o(this,a);s(u[0],u[1],u[2],u[3],-1)}this.setFontStyle("bold");var c=[];for(i=0,l=this.tableHeaderRow.length;i<l;i+=1)this.setFillColor(200,200,200),n=this.tableHeaderRow[i],t&&(this.margins.top=13,n[1]=this.margins&&this.margins.top||0,c.push(n)),r=[].concat(n),this.cell.apply(this,r.concat(e));c.length>0&&this.setTableHeaderRow(c),this.setFontStyle("normal"),this.printingHeaderRow=!1}}(r.API),function(e){function t(){this._isStrokeTransparent=!1,this._strokeOpacity=1,this.strokeStyle="#000000",this.fillStyle="#000000",this._isFillTransparent=!1,this._fillOpacity=1,this.font="12pt times",this.textBaseline="alphabetic",this.textAlign="start",this.lineWidth=1,this.lineJoin="miter",this.lineCap="butt",this._transform=[1,0,0,1,0,0],this.globalCompositeOperation="normal",this.globalAlpha=1,this._clip_path=[],this.ignoreClearRect=!1,this.copy=function(e){this._isStrokeTransparent=e._isStrokeTransparent,this._strokeOpacity=e._strokeOpacity,this.strokeStyle=e.strokeStyle,this._isFillTransparent=e._isFillTransparent,this._fillOpacity=e._fillOpacity,this.fillStyle=e.fillStyle,this.font=e.font,this.lineWidth=e.lineWidth,this.lineJoin=e.lineJoin,this.lineCap=e.lineCap,this.textBaseline=e.textBaseline,this.textAlign=e.textAlign,this._fontSize=e._fontSize,this._transform=e._transform.slice(0),this.globalCompositeOperation=e.globalCompositeOperation,this.globalAlpha=e.globalAlpha,this._clip_path=e._clip_path.slice(0),this.ignoreClearRect=e.ignoreClearRect}}e.events.push(["initialized",function(){this.context2d.pdf=this,this.context2d.internal.pdf=this,this.context2d.ctx=new t,this.context2d.ctxStack=[],this.context2d.path=[]}]),e.context2d={pageWrapXEnabled:!1,pageWrapYEnabled:!1,pageWrapX:9999999,pageWrapY:9999999,ctx:new t,f2:function(e){return e.toFixed(2)},fillRect:function(e,t,n,r){if(!this._isFillTransparent()){e=this._wrapX(e),t=this._wrapY(t);var o=this._matrix_map_rect(this.ctx._transform,{x:e,y:t,w:n,h:r});this.pdf.rect(o.x,o.y,o.w,o.h,"f")}},strokeRect:function(e,t,n,r){if(!this._isStrokeTransparent()){e=this._wrapX(e),t=this._wrapY(t);var o=this._matrix_map_rect(this.ctx._transform,{x:e,y:t,w:n,h:r});this.pdf.rect(o.x,o.y,o.w,o.h,"s")}},clearRect:function(e,t,n,r){if(!this.ctx.ignoreClearRect){e=this._wrapX(e),t=this._wrapY(t);var o=this._matrix_map_rect(this.ctx._transform,{x:e,y:t,w:n,h:r});this.save(),this.setFillStyle("#ffffff"),this.pdf.rect(o.x,o.y,o.w,o.h,"f"),this.restore()}},save:function(){this.ctx._fontSize=this.pdf.internal.getFontSize();var e=new t;e.copy(this.ctx),this.ctxStack.push(this.ctx),this.ctx=e},restore:function(){this.ctx=this.ctxStack.pop(),this.setFillStyle(this.ctx.fillStyle),this.setStrokeStyle(this.ctx.strokeStyle),this.setFont(this.ctx.font),this.pdf.setFontSize(this.ctx._fontSize),this.setLineCap(this.ctx.lineCap),this.setLineWidth(this.ctx.lineWidth),this.setLineJoin(this.ctx.lineJoin)},rect:function(e,t,n,r){this.moveTo(e,t),this.lineTo(e+n,t),this.lineTo(e+n,t+r),this.lineTo(e,t+r),this.lineTo(e,t),this.closePath()},beginPath:function(){this.path=[]},closePath:function(){this.path.push({type:"close"})},_getRGBA:function(e){var t,n,r,o;if(!e)return{r:0,g:0,b:0,a:0,style:e};if(this.internal.rxTransparent.test(e))t=0,n=0,r=0,o=0;else{var i=this.internal.rxRgb.exec(e);null!=i?(t=parseInt(i[1]),n=parseInt(i[2]),r=parseInt(i[3]),o=1):null!=(i=this.internal.rxRgba.exec(e))?(t=parseInt(i[1]),n=parseInt(i[2]),r=parseInt(i[3]),o=parseFloat(i[4])):(o=1,"#"!=e.charAt(0)&&((e=a.colorNameToHex(e))||(e="#000000")),4===e.length?(t=e.substring(1,2),t+=t,n=e.substring(2,3),n+=n,r=e.substring(3,4),r+=r):(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7)),t=parseInt(t,16),n=parseInt(n,16),r=parseInt(r,16))}return{r:t,g:n,b:r,a:o,style:e}},setFillStyle:function(e){var t=this._getRGBA(e);this.ctx.fillStyle=e,this.ctx._isFillTransparent=0===t.a,this.ctx._fillOpacity=t.a,this.pdf.setFillColor(t.r,t.g,t.b,{a:t.a}),this.pdf.setTextColor(t.r,t.g,t.b,{a:t.a})},setStrokeStyle:function(e){var t=this._getRGBA(e);this.ctx.strokeStyle=t.style,this.ctx._isStrokeTransparent=0===t.a,this.ctx._strokeOpacity=t.a,0===t.a?this.pdf.setDrawColor(255,255,255):(t.a,this.pdf.setDrawColor(t.r,t.g,t.b))},fillText:function(e,t,n,r){if(!this._isFillTransparent()){t=this._wrapX(t),n=this._wrapY(n);var o=this._matrix_map_point(this.ctx._transform,[t,n]);t=o[0],n=o[1];var i=57.2958*this._matrix_rotation(this.ctx._transform);if(this.ctx._clip_path.length>0){var a;(a=window.outIntercept?"group"===window.outIntercept.type?window.outIntercept.stream:window.outIntercept:this.internal.getCurrentPage()).push("q");var s=this.path;this.path=this.ctx._clip_path,this.ctx._clip_path=[],this._fill(null,!0),this.ctx._clip_path=this.path,this.path=s}var l=1;try{l=this._matrix_decompose(this._getTransform()).scale[0]}catch(e){console.warn(e)}if(l<.01)this.pdf.text(e,t,this._getBaseline(n),null,i);else{var u=this.pdf.internal.getFontSize();this.pdf.setFontSize(u*l),this.pdf.text(e,t,this._getBaseline(n),null,i),this.pdf.setFontSize(u)}this.ctx._clip_path.length>0&&a.push("Q")}},strokeText:function(e,t,n,r){if(!this._isStrokeTransparent()){t=this._wrapX(t),n=this._wrapY(n);var o=this._matrix_map_point(this.ctx._transform,[t,n]);t=o[0],n=o[1];var i=57.2958*this._matrix_rotation(this.ctx._transform);if(this.ctx._clip_path.length>0){var a;(a=window.outIntercept?"group"===window.outIntercept.type?window.outIntercept.stream:window.outIntercept:this.internal.getCurrentPage()).push("q");var s=this.path;this.path=this.ctx._clip_path,this.ctx._clip_path=[],this._fill(null,!0),this.ctx._clip_path=this.path,this.path=s}var l=1;try{l=this._matrix_decompose(this._getTransform()).scale[0]}catch(e){console.warn(e)}if(1===l)this.pdf.text(e,t,this._getBaseline(n),{stroke:!0},i);else{var u=this.pdf.internal.getFontSize();this.pdf.setFontSize(u*l),this.pdf.text(e,t,this._getBaseline(n),{stroke:!0},i),this.pdf.setFontSize(u)}this.ctx._clip_path.length>0&&a.push("Q")}},setFont:function(e){this.ctx.font=e;var t=/\s*(\w+)\s+(\w+)\s+(\w+)\s+([\d\.]+)(px|pt|em)\s+(.*)?/;if(null!=(c=t.exec(e))){var n=c[1],r=c[3],o=c[4],i=c[5],a=c[6];o="px"===i?Math.floor(parseFloat(o)):"em"===i?Math.floor(parseFloat(o)*this.pdf.getFontSize()):Math.floor(parseFloat(o)),this.pdf.setFontSize(o),"bold"===r||"700"===r?this.pdf.setFontStyle("bold"):"italic"===n?this.pdf.setFontStyle("italic"):this.pdf.setFontStyle("normal");var s,l=(f=a).toLowerCase().split(/\s*,\s*/);s=-1!=l.indexOf("arial")?"Arial":-1!=l.indexOf("verdana")?"Verdana":-1!=l.indexOf("helvetica")?"Helvetica":-1!=l.indexOf("sans-serif")?"sans-serif":-1!=l.indexOf("fixed")?"Fixed":-1!=l.indexOf("monospace")?"Monospace":-1!=l.indexOf("terminal")?"Terminal":-1!=l.indexOf("courier")?"Courier":-1!=l.indexOf("times")?"Times":-1!=l.indexOf("cursive")?"Cursive":-1!=l.indexOf("fantasy")?"Fantasy":(l.indexOf("serif"),"Serif");var u;u="bold"===r?"bold":"normal",this.pdf.setFont(s,u)}else{var c=(t=/\s*(\d+)(pt|px|em)\s+([\w "]+)\s*([\w "]+)?/).exec(e);if(null!=c){var p=c[1],f=c[3];(u=c[4])||(u="normal"),p="em"===i?Math.floor(parseFloat(o)*this.pdf.getFontSize()):Math.floor(parseFloat(p)),this.pdf.setFontSize(p),this.pdf.setFont(f,u)}}},setTextBaseline:function(e){this.ctx.textBaseline=e},getTextBaseline:function(){return this.ctx.textBaseline},setTextAlign:function(e){this.ctx.textAlign=e},getTextAlign:function(){return this.ctx.textAlign},setLineWidth:function(e){this.ctx.lineWidth=e,this.pdf.setLineWidth(e)},setLineCap:function(e){this.ctx.lineCap=e,this.pdf.setLineCap(e)},setLineJoin:function(e){this.ctx.lineJoin=e,this.pdf.setLineJoin(e)},moveTo:function(e,t){e=this._wrapX(e),t=this._wrapY(t);var n=this._matrix_map_point(this.ctx._transform,[e,t]),r={type:"mt",x:e=n[0],y:t=n[1]};this.path.push(r)},_wrapX:function(e){return this.pageWrapXEnabled?e%this.pageWrapX:e},_wrapY:function(e){return this.pageWrapYEnabled?(this._gotoPage(this._page(e)),(e-this.lastBreak)%this.pageWrapY):e},transform:function(e,t,n,r,o,i){this.ctx._transform=[e,t,n,r,o,i]},setTransform:function(e,t,n,r,o,i){this.ctx._transform=[e,t,n,r,o,i]},_getTransform:function(){return this.ctx._transform},lastBreak:0,pageBreaks:[],_page:function(e){if(this.pageWrapYEnabled){this.lastBreak=0;for(var t=0,n=0,r=0;r<this.pageBreaks.length;r++)if(e>=this.pageBreaks[r]){t++,0===this.lastBreak&&n++;var o=this.pageBreaks[r]-this.lastBreak;this.lastBreak=this.pageBreaks[r],n+=i=Math.floor(o/this.pageWrapY)}if(0===this.lastBreak){var i=Math.floor(e/this.pageWrapY)+1;n+=i}return n+t}return this.pdf.internal.getCurrentPageInfo().pageNumber},_gotoPage:function(e){},lineTo:function(e,t){e=this._wrapX(e),t=this._wrapY(t);var n=this._matrix_map_point(this.ctx._transform,[e,t]),r={type:"lt",x:e=n[0],y:t=n[1]};this.path.push(r)},bezierCurveTo:function(e,t,n,r,o,i){e=this._wrapX(e),t=this._wrapY(t),n=this._wrapX(n),r=this._wrapY(r),o=this._wrapX(o),i=this._wrapY(i);var a;o=(a=this._matrix_map_point(this.ctx._transform,[o,i]))[0],i=a[1];var s={type:"bct",x1:e=(a=this._matrix_map_point(this.ctx._transform,[e,t]))[0],y1:t=a[1],x2:n=(a=this._matrix_map_point(this.ctx._transform,[n,r]))[0],y2:r=a[1],x:o,y:i};this.path.push(s)},quadraticCurveTo:function(e,t,n,r){e=this._wrapX(e),t=this._wrapY(t),n=this._wrapX(n),r=this._wrapY(r);var o;n=(o=this._matrix_map_point(this.ctx._transform,[n,r]))[0],r=o[1];var i={type:"qct",x1:e=(o=this._matrix_map_point(this.ctx._transform,[e,t]))[0],y1:t=o[1],x:n,y:r};this.path.push(i)},arc:function(e,t,n,r,o,i){if(e=this._wrapX(e),t=this._wrapY(t),!this._matrix_is_identity(this.ctx._transform)){var a=this._matrix_map_point(this.ctx._transform,[e,t]);e=a[0],t=a[1];var s=this._matrix_map_point(this.ctx._transform,[0,0]),l=this._matrix_map_point(this.ctx._transform,[0,n]);n=Math.sqrt(Math.pow(l[0]-s[0],2)+Math.pow(l[1]-s[1],2))}var u={type:"arc",x:e,y:t,radius:n,startAngle:r,endAngle:o,anticlockwise:i};this.path.push(u)},drawImage:function(e,t,n,r,o,i,a,s,l){void 0!==i&&(t=i,n=a,r=s,o=l),t=this._wrapX(t),n=this._wrapY(n);var u,c=this._matrix_map_rect(this.ctx._transform,{x:t,y:n,w:r,h:o}),p=(this._matrix_map_rect(this.ctx._transform,{x:i,y:a,w:s,h:l}),/data:image\/(\w+).*/i.exec(e));u=null!=p?p[1]:"png",this.pdf.addImage(e,u,c.x,c.y,c.w,c.h)},_matrix_multiply:function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],l=n*e[0]+r*e[2],u=o*e[0]+i*e[2],c=a*e[0]+s*e[2]+e[4];return r=n*e[1]+r*e[3],i=o*e[1]+i*e[3],s=a*e[1]+s*e[3]+e[5],n=l,o=u,a=c,[n,r,o,i,a,s]},_matrix_rotation:function(e){return Math.atan2(e[2],e[0])},_matrix_decompose:function(e){var t=e[0],n=e[1],r=e[2],o=e[3],i=Math.sqrt(t*t+n*n),a=(t/=i)*r+(n/=i)*o;r-=t*a,o-=n*a;var s=Math.sqrt(r*r+o*o);return r/=s,o/=s,a/=s,t*o<n*r&&(t=-t,n=-n,a=-a,i=-i),{scale:[i,0,0,s,0,0],translate:[1,0,0,1,e[4],e[5]],rotate:[t,n,-n,t,0,0],skew:[1,0,a,1,0,0]}},_matrix_map_point:function(e,t){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],s=e[5],l=t[0],u=t[1];return[l*n+u*o+a,l*r+u*i+s]},_matrix_map_point_obj:function(e,t){var n=this._matrix_map_point(e,[t.x,t.y]);return{x:n[0],y:n[1]}},_matrix_map_rect:function(e,t){var n=this._matrix_map_point(e,[t.x,t.y]),r=this._matrix_map_point(e,[t.x+t.w,t.y+t.h]);return{x:n[0],y:n[1],w:r[0]-n[0],h:r[1]-n[1]}},_matrix_is_identity:function(e){return 1==e[0]&&0==e[1]&&0==e[2]&&1==e[3]&&0==e[4]&&0==e[5]},rotate:function(e){var t=[Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0];this.ctx._transform=this._matrix_multiply(this.ctx._transform,t)},scale:function(e,t){var n=[e,0,0,t,0,0];this.ctx._transform=this._matrix_multiply(this.ctx._transform,n)},translate:function(e,t){var n=[1,0,0,1,e,t];this.ctx._transform=this._matrix_multiply(this.ctx._transform,n)},stroke:function(){if(this.ctx._clip_path.length>0){var e;(e=window.outIntercept?"group"===window.outIntercept.type?window.outIntercept.stream:window.outIntercept:this.internal.getCurrentPage()).push("q");var t=this.path;this.path=this.ctx._clip_path,this.ctx._clip_path=[],this._stroke(!0),this.ctx._clip_path=this.path,this.path=t,this._stroke(!1),e.push("Q")}else this._stroke(!1)},_stroke:function(e){if(e||!this._isStrokeTransparent()){for(var t=[],n=this.path,r=0;r<n.length;r++){var o=n[r];switch(o.type){case"mt":t.push({start:o,deltas:[],abs:[]});break;case"lt":p=[o.x-n[r-1].x,o.y-n[r-1].y],t[t.length-1].deltas.push(p),t[t.length-1].abs.push(o);break;case"bct":p=[o.x1-n[r-1].x,o.y1-n[r-1].y,o.x2-n[r-1].x,o.y2-n[r-1].y,o.x-n[r-1].x,o.y-n[r-1].y],t[t.length-1].deltas.push(p);break;case"qct":var i=n[r-1].x+2/3*(o.x1-n[r-1].x),a=n[r-1].y+2/3*(o.y1-n[r-1].y),s=o.x+2/3*(o.x1-o.x),l=o.y+2/3*(o.y1-o.y),u=o.x,c=o.y,p=[i-n[r-1].x,a-n[r-1].y,s-n[r-1].x,l-n[r-1].y,u-n[r-1].x,c-n[r-1].y];t[t.length-1].deltas.push(p);break;case"arc":0==t.length&&t.push({start:{x:0,y:0},deltas:[],abs:[]}),t[t.length-1].arc=!0,t[t.length-1].abs.push(o)}}for(r=0;r<t.length;r++){var f;if(f=r==t.length-1?"s":null,t[r].arc)for(var d=t[r].abs,h=0;h<d.length;h++){var m=d[h],g=360*m.startAngle/(2*Math.PI),v=360*m.endAngle/(2*Math.PI),y=m.x,b=m.y;this.internal.arc2(this,y,b,m.radius,g,v,m.anticlockwise,f,e)}else{var y=t[r].start.x,b=t[r].start.y;e?(this.pdf.lines(t[r].deltas,y,b,null,null),this.pdf.clip_fixed()):this.pdf.lines(t[r].deltas,y,b,null,f)}}}},_isFillTransparent:function(){return this.ctx._isFillTransparent||0==this.globalAlpha},_isStrokeTransparent:function(){return this.ctx._isStrokeTransparent||0==this.globalAlpha},fill:function(e){if(this.ctx._clip_path.length>0){var t;(t=window.outIntercept?"group"===window.outIntercept.type?window.outIntercept.stream:window.outIntercept:this.internal.getCurrentPage()).push("q");var n=this.path;this.path=this.ctx._clip_path,this.ctx._clip_path=[],this._fill(e,!0),this.ctx._clip_path=this.path,this.path=n,this._fill(e,!1),t.push("Q")}else this._fill(e,!1)},_fill:function(e,t){if(!this._isFillTransparent()){var r,o="function"==typeof this.pdf.internal.newObject2;r=window.outIntercept?"group"===window.outIntercept.type?window.outIntercept.stream:window.outIntercept:this.internal.getCurrentPage();var i=[],a=window.outIntercept;if(o)switch(this.ctx.globalCompositeOperation){case"normal":case"source-over":break;case"destination-in":case"destination-out":var s=this.pdf.internal.newStreamObject(),l=this.pdf.internal.newObject2();l.push("<</Type /ExtGState"),l.push("/SMask <</S /Alpha /G "+s.objId+" 0 R>>"),l.push(">>"),d="MASK"+l.objId,this.pdf.internal.addGraphicsState(d,l.objId);var u="/"+d+" gs";r.splice(0,0,"q"),r.splice(1,0,u),r.push("Q"),window.outIntercept=s;break;default:var c="/"+this.pdf.internal.blendModeMap[this.ctx.globalCompositeOperation.toUpperCase()];c&&this.pdf.internal.out(c+" gs")}var p=this.ctx.globalAlpha;if(this.ctx._fillOpacity<1&&(p=this.ctx._fillOpacity),o){var f=this.pdf.internal.newObject2();f.push("<</Type /ExtGState"),f.push("/CA "+p),f.push("/ca "+p),f.push(">>");var d="GS_O_"+f.objId;this.pdf.internal.addGraphicsState(d,f.objId),this.pdf.internal.out("/"+d+" gs")}for(var h=this.path,m=0;m<h.length;m++){var g=h[m];switch(g.type){case"mt":i.push({start:g,deltas:[],abs:[]});break;case"lt":S=[g.x-h[m-1].x,g.y-h[m-1].y],i[i.length-1].deltas.push(S),i[i.length-1].abs.push(g);break;case"bct":S=[g.x1-h[m-1].x,g.y1-h[m-1].y,g.x2-h[m-1].x,g.y2-h[m-1].y,g.x-h[m-1].x,g.y-h[m-1].y],i[i.length-1].deltas.push(S);break;case"qct":var v=h[m-1].x+2/3*(g.x1-h[m-1].x),y=h[m-1].y+2/3*(g.y1-h[m-1].y),b=g.x+2/3*(g.x1-g.x),w=g.y+2/3*(g.y1-g.y),x=g.x,_=g.y,S=[v-h[m-1].x,y-h[m-1].y,b-h[m-1].x,w-h[m-1].y,x-h[m-1].x,_-h[m-1].y];i[i.length-1].deltas.push(S);break;case"arc":0===i.length&&i.push({deltas:[],abs:[]}),i[i.length-1].arc=!0,i[i.length-1].abs.push(g);break;case"close":i.push({close:!0})}}for(m=0;m<i.length;m++){var C;if(m==i.length-1?(C="f","evenodd"===e&&(C+="*")):C=null,i[m].close)this.pdf.internal.out("h"),this.pdf.internal.out("f");else if(i[m].arc){i[m].start&&this.internal.move2(this,i[m].start.x,i[m].start.y);for(var k=i[m].abs,A=0;A<k.length;A++){var E=k[A];if(void 0!==E.startAngle){var M=360*E.startAngle/(2*Math.PI),T=360*E.endAngle/(2*Math.PI),O=E.x,I=E.y;if(0===A&&this.internal.move2(this,O,I),this.internal.arc2(this,O,I,E.radius,M,T,E.anticlockwise,null,t),A===k.length-1&&i[m].start){var O=i[m].start.x,I=i[m].start.y;this.internal.line2(n,O,I)}}else this.internal.line2(n,E.x,E.y)}}else{var O=i[m].start.x,I=i[m].start.y;t?(this.pdf.lines(i[m].deltas,O,I,null,null),this.pdf.clip_fixed()):this.pdf.lines(i[m].deltas,O,I,null,C)}}window.outIntercept=a}},pushMask:function(){if("function"==typeof this.pdf.internal.newObject2){var e=this.pdf.internal.newStreamObject(),t=this.pdf.internal.newObject2();t.push("<</Type /ExtGState"),t.push("/SMask <</S /Alpha /G "+e.objId+" 0 R>>"),t.push(">>");var n="MASK"+t.objId;this.pdf.internal.addGraphicsState(n,t.objId);var r="/"+n+" gs";this.pdf.internal.out(r)}else console.log("jsPDF v2 not enabled")},clip:function(){if(this.ctx._clip_path.length>0)for(var e=0;e<this.path.length;e++)this.ctx._clip_path.push(this.path[e]);else this.ctx._clip_path=this.path;this.path=[]},measureText:function(e){var t=this.pdf;return{getWidth:function(){var n=t.internal.getFontSize(),r=t.getStringUnitWidth(e)*n/t.internal.scaleFactor;return r*=1.3333},get width(){return this.getWidth(e)}}},_getBaseline:function(e){var t=parseInt(this.pdf.internal.getFontSize()),n=.25*t;switch(this.ctx.textBaseline){case"bottom":return e-n;case"top":return e+t;case"hanging":return e+t-n;case"middle":return e+t/2-n;case"ideographic":return e;case"alphabetic":default:return e}}};var n=e.context2d;Object.defineProperty(n,"fillStyle",{set:function(e){this.setFillStyle(e)},get:function(){return this.ctx.fillStyle}}),Object.defineProperty(n,"strokeStyle",{set:function(e){this.setStrokeStyle(e)},get:function(){return this.ctx.strokeStyle}}),Object.defineProperty(n,"lineWidth",{set:function(e){this.setLineWidth(e)},get:function(){return this.ctx.lineWidth}}),Object.defineProperty(n,"lineCap",{set:function(e){this.setLineCap(e)},get:function(){return this.ctx.lineCap}}),Object.defineProperty(n,"lineJoin",{set:function(e){this.setLineJoin(e)},get:function(){return this.ctx.lineJoin}}),Object.defineProperty(n,"miterLimit",{set:function(e){this.ctx.miterLimit=e},get:function(){return this.ctx.miterLimit}}),Object.defineProperty(n,"textBaseline",{set:function(e){this.setTextBaseline(e)},get:function(){return this.getTextBaseline()}}),Object.defineProperty(n,"textAlign",{set:function(e){this.setTextAlign(e)},get:function(){return this.getTextAlign()}}),Object.defineProperty(n,"font",{set:function(e){this.setFont(e)},get:function(){return this.ctx.font}}),Object.defineProperty(n,"globalCompositeOperation",{set:function(e){this.ctx.globalCompositeOperation=e},get:function(){return this.ctx.globalCompositeOperation}}),Object.defineProperty(n,"globalAlpha",{set:function(e){this.ctx.globalAlpha=e},get:function(){return this.ctx.globalAlpha}}),Object.defineProperty(n,"ignoreClearRect",{set:function(e){this.ctx.ignoreClearRect=e},get:function(){return this.ctx.ignoreClearRect}}),n.internal={},n.internal.rxRgb=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,n.internal.rxRgba=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d\.]+)\s*\)/,n.internal.rxTransparent=/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/,n.internal.arc=function(e,t,n,r,o,i,a,s){for(var l=this.pdf.internal.scaleFactor,u=this.pdf.internal.pageSize.height,c=this.pdf.internal.f2,p=o*(Math.PI/180),f=i*(Math.PI/180),d=this.createArc(r,p,f,a),h=0;h<d.length;h++){var m=d[h];0===h?this.pdf.internal.out([c((m.x1+t)*l),c((u-(m.y1+n))*l),"m",c((m.x2+t)*l),c((u-(m.y2+n))*l),c((m.x3+t)*l),c((u-(m.y3+n))*l),c((m.x4+t)*l),c((u-(m.y4+n))*l),"c"].join(" ")):this.pdf.internal.out([c((m.x2+t)*l),c((u-(m.y2+n))*l),c((m.x3+t)*l),c((u-(m.y3+n))*l),c((m.x4+t)*l),c((u-(m.y4+n))*l),"c"].join(" ")),e._lastPoint={x:t,y:n}}null!==s&&this.pdf.internal.out(this.pdf.internal.getStyle(s))},n.internal.arc2=function(e,t,n,r,o,i,a,s,l){var u=t,c=n;l?(this.arc(e,u,c,r,o,i,a,null),this.pdf.clip_fixed()):this.arc(e,u,c,r,o,i,a,s)},n.internal.move2=function(e,t,n){var r=this.pdf.internal.scaleFactor,o=this.pdf.internal.pageSize.height,i=this.pdf.internal.f2;this.pdf.internal.out([i(t*r),i((o-n)*r),"m"].join(" ")),e._lastPoint={x:t,y:n}},n.internal.line2=function(e,t,n){var r=this.pdf.internal.scaleFactor,o=this.pdf.internal.pageSize.height,i=this.pdf.internal.f2,a={x:t,y:n};this.pdf.internal.out([i(a.x*r),i((o-a.y)*r),"l"].join(" ")),e._lastPoint=a},n.internal.createArc=function(e,t,n,r){var o=2*Math.PI,i=Math.PI/2,a=t;for((a<o||a>o)&&(a%=o),a<0&&(a=o+a);t>n;)t-=o;var s=Math.abs(n-t);s<o&&r&&(s=o-s);for(var l=[],u=r?-1:1,c=a;s>1e-5;){var p=c+u*Math.min(s,i);l.push(this.createSmallArc(e,c,p)),s-=Math.abs(p-c),c=p}return l},n.internal.getCurrentPage=function(){return this.pdf.internal.pages[this.pdf.internal.getCurrentPageInfo().pageNumber]},n.internal.createSmallArc=function(e,t,n){var r=(n-t)/2,o=e*Math.cos(r),i=e*Math.sin(r),a=o,s=-i,l=a*a+s*s,u=l+a*o+s*i,c=4/3*(Math.sqrt(2*l*u)-u)/(a*i-s*o),p=a-c*s,f=s+c*a,d=p,h=-f,m=r+t,g=Math.cos(m),v=Math.sin(m);return{x1:e*Math.cos(t),y1:e*Math.sin(t),x2:p*g-f*v,y2:p*v+f*g,x3:d*g-h*v,y3:d*v+h*g,x4:e*Math.cos(n),y4:e*Math.sin(n)}}}(r.API),function(e){var t,r,o,i,s,l,u,c,p,f,d,h,m,g,v,y,b,w,x,_;t=function(){function e(){}return function(t){return e.prototype=t,new e}}(),f=function(e){var t,n,r,o,i,a,s;for(n=0,r=e.length,t=void 0,o=!1,a=!1;!o&&n!==r;)(t=e[n]=e[n].trimLeft())&&(o=!0),n++;for(n=r-1;r&&!a&&-1!==n;)(t=e[n]=e[n].trimRight())&&(a=!0),n--;for(i=/\s+$/g,s=!0,n=0;n!==r;)"\u2028"!=e[n]&&(t=e[n].replace(/\s+/g," "),s&&(t=t.trimLeft()),t&&(s=i.test(t)),e[n]=t),n++;return e},h=function(e){var t,n,r;for(t=void 0,n=(r=e.split(",")).shift();!t&&n;)t=o[n.trim().toLowerCase()],n=r.shift();return t},m=function(e){(e="auto"===e?"0px":e).indexOf("em")>-1&&!isNaN(Number(e.replace("em","")))&&(e=18.719*Number(e.replace("em",""))+"px"),e.indexOf("pt")>-1&&!isNaN(Number(e.replace("pt","")))&&(e=1.333*Number(e.replace("pt",""))+"px");var t;return(t=g[e])?t:void 0!==(t={"xx-small":9,"x-small":11,small:13,medium:16,large:19,"x-large":23,"xx-large":28,auto:0}[{css_line_height_string:e}])?g[e]=t/16:(t=parseFloat(e))?g[e]=t/16:3===(t=e.match(/([\d\.]+)(px)/)).length?g[e]=parseFloat(t[1])/16:g[e]=1},p=function(e){var t,n,r;return r=function(t){var n;return n=function(e){return document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(e,null):e.currentStyle?e.currentStyle:e.style}(e),function(e){return e=e.replace(/-\D/g,function(e){return e.charAt(1).toUpperCase()}),n[e]}}(),t={},n=void 0,t["font-family"]=h(r("font-family"))||"times",t["font-style"]=i[r("font-style")]||"normal",t["text-align"]=s[r("text-align")]||"left","bold"===(n=l[r("font-weight")]||"normal")&&("normal"===t["font-style"]?t["font-style"]=n:t["font-style"]=n+t["font-style"]),t["font-size"]=m(r("font-size"))||1,t["line-height"]=m(r("line-height"))||1,t.display="inline"===r("display")?"inline":"block",n="block"===t.display,t["margin-top"]=n&&m(r("margin-top"))||0,t["margin-bottom"]=n&&m(r("margin-bottom"))||0,t["padding-top"]=n&&m(r("padding-top"))||0,t["padding-bottom"]=n&&m(r("padding-bottom"))||0,t["margin-left"]=n&&m(r("margin-left"))||0,t["margin-right"]=n&&m(r("margin-right"))||0,t["padding-left"]=n&&m(r("padding-left"))||0,t["padding-right"]=n&&m(r("padding-right"))||0,t["page-break-before"]=r("page-break-before")||"auto",t.float=u[r("cssFloat")]||"none",t.clear=c[r("clear")]||"none",t.color=r("color"),t},v=function(e,t,n){var r,o,i,a,s;if(i=!1,o=void 0,a=void 0,r=n["#"+e.id])if("function"==typeof r)i=r(e,t);else for(o=0,a=r.length;!i&&o!==a;)i=r[o](e,t),o++;if(r=n[e.nodeName],!i&&r)if("function"==typeof r)i=r(e,t);else for(o=0,a=r.length;!i&&o!==a;)i=r[o](e,t),o++;for(s=e.className?e.className.split(" "):[],o=0;o<s.length;o++)if(r=n["."+s[o]],!i&&r)if("function"==typeof r)i=r(e,t);else for(o=0,a=r.length;!i&&o!==a;)i=r[o](e,t),o++;return i},_=function(e,t){var n,r,o,i,a,s,l,u,c;for(n=[],r=[],o=0,c=e.rows[0].cells.length,l=e.clientWidth;o<c;)u=e.rows[0].cells[o],r[o]={name:u.textContent.toLowerCase().replace(/\s+/g,""),prompt:u.textContent.replace(/\r?\n/g,""),width:u.clientWidth/l*t.pdf.internal.pageSize.width},o++;for(o=1;o<e.rows.length;){for(s=e.rows[o],a={},i=0;i<s.cells.length;)a[r[i].name]=s.cells[i].textContent.replace(/\r?\n/g,""),i++;n.push(a),o++}return{rows:n,headers:r}};var S={SCRIPT:1,STYLE:1,NOSCRIPT:1,OBJECT:1,EMBED:1,SELECT:1},C=1;r=function(e,o,i){var a,s,l,u,c,f,d,h;for(s=e.childNodes,a=void 0,(c="block"===(l=p(e)).display)&&(o.setBlockBoundary(),o.setBlockStyle(l)),u=0,f=s.length;u<f;){if("object"===(void 0===(a=s[u])?"undefined":n(a))){if(o.executeWatchFunctions(a),1===a.nodeType&&"HEADER"===a.nodeName){var m=a,g=o.pdf.margins_doc.top;o.pdf.internal.events.subscribe("addPage",function(e){o.y=g,r(m,o,i),o.pdf.margins_doc.top=o.y+10,o.y+=10},!1)}if(8===a.nodeType&&"#comment"===a.nodeName)~a.textContent.indexOf("ADD_PAGE")&&(o.pdf.addPage(),o.y=o.pdf.margins_doc.top);else if(1!==a.nodeType||S[a.nodeName])if(3===a.nodeType){var b=a.nodeValue;if(a.nodeValue&&"LI"===a.parentNode.nodeName)if("OL"===a.parentNode.parentNode.nodeName)b=C+++". "+b;else{var w=l["font-size"],x=(3-.75*w)*o.pdf.internal.scaleFactor,k=.75*w*o.pdf.internal.scaleFactor,A=1.74*w/o.pdf.internal.scaleFactor;h=function(e,t){this.pdf.circle(e+x,t+k,A,"FD")}}16&a.ownerDocument.body.compareDocumentPosition(a)&&o.addText(b,l)}else"string"==typeof a&&o.addText(a,l);else{var E;if("IMG"===a.nodeName){var M=a.getAttribute("src");E=y[o.pdf.sHashCode(M)||M]}if(E){o.pdf.internal.pageSize.height-o.pdf.margins_doc.bottom<o.y+a.height&&o.y>o.pdf.margins_doc.top&&(o.pdf.addPage(),o.y=o.pdf.margins_doc.top,o.executeWatchFunctions(a));var T=p(a),O=o.x,I=12/o.pdf.internal.scaleFactor,P=(T["margin-left"]+T["padding-left"])*I,j=(T["margin-right"]+T["padding-right"])*I,D=(T["margin-top"]+T["padding-top"])*I,N=(T["margin-bottom"]+T["padding-bottom"])*I;void 0!==T.float&&"right"===T.float?O+=o.settings.width-a.width-j:O+=P,o.pdf.addImage(E,O,o.y+D,a.width,a.height),E=void 0,"right"===T.float||"left"===T.float?(o.watchFunctions.push(function(e,t,n,r){return o.y>=t?(o.x+=e,o.settings.width+=n,!0):!!(r&&1===r.nodeType&&!S[r.nodeName]&&o.x+r.width>o.pdf.margins_doc.left+o.pdf.margins_doc.width)&&(o.x+=e,o.y=t,o.settings.width+=n,!0)}.bind(this,"left"===T.float?-a.width-P-j:0,o.y+a.height+D+N,a.width)),o.watchFunctions.push(function(e,t,n){return!(o.y<e&&t===o.pdf.internal.getNumberOfPages())||1===n.nodeType&&"both"===p(n).clear&&(o.y=e,!0)}.bind(this,o.y+a.height,o.pdf.internal.getNumberOfPages())),o.settings.width-=a.width+P+j,"left"===T.float&&(o.x+=a.width+P+j)):o.y+=a.height+D+N}else if("TABLE"===a.nodeName)d=_(a,o),o.y+=10,o.pdf.table(o.x,o.y,d.rows,d.headers,{autoSize:!1,printHeaders:i.printHeaders,margins:o.pdf.margins_doc,css:p(a)}),o.y=o.pdf.lastCellPos.y+o.pdf.lastCellPos.h+20;else if("OL"===a.nodeName||"UL"===a.nodeName)C=1,v(a,o,i)||r(a,o,i),o.y+=10;else if("LI"===a.nodeName){var R=o.x;o.x+=20/o.pdf.internal.scaleFactor,o.y+=3,v(a,o,i)||r(a,o,i),o.x=R}else"BR"===a.nodeName?(o.y+=l["font-size"]*o.pdf.internal.scaleFactor,o.addText("\u2028",t(l))):v(a,o,i)||r(a,o,i)}}u++}if(i.outY=o.y,c)return o.setBlockBoundary(h)},y={},b=function(e,t,n,r){function o(){t.pdf.internal.events.publish("imagesLoaded"),r(i)}for(var i,a=e.getElementsByTagName("img"),s=a.length,l=0;s--;)!function(e,n,r){if(e){var a=new Image;i=++l,a.crossOrigin="",a.onerror=a.onload=function(){if(a.complete&&(0===a.src.indexOf("data:image/")&&(a.width=n||a.width||0,a.height=r||a.height||0),a.width+a.height)){var i=t.pdf.sHashCode(e)||e;y[i]=y[i]||a}--l||o()},a.src=e}}(a[s].getAttribute("src"),a[s].width,a[s].height);return l||o()},w=function(e,t,n){var o=e.getElementsByTagName("footer");if(o.length>0){o=o[0];var i=t.pdf.internal.write,a=t.y;t.pdf.internal.write=function(){},r(o,t,n);var s=Math.ceil(t.y-a)+5;t.y=a,t.pdf.internal.write=i,t.pdf.margins_doc.bottom+=s;for(var l=function(e){var i=void 0!==e?e.pageNumber:1,a=t.y;t.y=t.pdf.internal.pageSize.height-t.pdf.margins_doc.bottom,t.pdf.margins_doc.bottom-=s;for(var l=o.getElementsByTagName("span"),u=0;u<l.length;++u)(" "+l[u].className+" ").replace(/[\n\t]/g," ").indexOf(" pageCounter ")>-1&&(l[u].innerHTML=i),(" "+l[u].className+" ").replace(/[\n\t]/g," ").indexOf(" totalPages ")>-1&&(l[u].innerHTML="###jsPDFVarTotalPages###");r(o,t,n),t.pdf.margins_doc.bottom+=s,t.y=a},u=o.getElementsByTagName("span"),c=0;c<u.length;++c)(" "+u[c].className+" ").replace(/[\n\t]/g," ").indexOf(" totalPages ")>-1&&t.pdf.internal.events.subscribe("htmlRenderingFinished",t.pdf.putTotalPages.bind(t.pdf,"###jsPDFVarTotalPages###"),!0);t.pdf.internal.events.subscribe("addPage",l,!1),l(),S.FOOTER=1}},x=function(e,t,n,o,i,a){if(!t)return!1;"string"==typeof t||t.parentNode||(t=""+t.innerHTML),"string"==typeof t&&(t=function(e){var t,n,r,o;return r="jsPDFhtmlText"+Date.now().toString()+(1e3*Math.random()).toFixed(0),o="position: absolute !important;clip: rect(1px 1px 1px 1px); /* IE6, IE7 */clip: rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height: 1px !important;width: 1px !important; top:auto;left:-100px;overflow: hidden;",n=document.createElement("div"),n.style.cssText=o,n.innerHTML='<iframe style="height:1px;width:1px" name="'+r+'" />',document.body.appendChild(n),(t=window.frames[r]).document.open(),t.document.writeln(e),t.document.close(),t.document.body}(t.replace(/<\/?script[^>]*?>/gi,"")));var s,l=new d(e,n,o,i);return b.call(this,t,l,i.elementHandlers,function(e){w(t,l,i.elementHandlers),r(t,l,i.elementHandlers),l.pdf.internal.events.publish("htmlRenderingFinished"),s=l.dispose(),"function"==typeof a?a(s):e&&console.error("jsPDF Warning: rendering issues? provide a callback to fromHTML!")}),s||{x:l.x,y:l.y}},(d=function(e,t,n,r){return this.pdf=e,this.x=t,this.y=n,this.settings=r,this.watchFunctions=[],this.init(),this}).prototype.init=function(){return this.paragraph={text:[],style:[]},this.pdf.internal.write("q")},d.prototype.dispose=function(){return this.pdf.internal.write("Q"),{x:this.x,y:this.y,ready:!0}},d.prototype.executeWatchFunctions=function(e){var t=!1,n=[];if(this.watchFunctions.length>0){for(var r=0;r<this.watchFunctions.length;++r)!0===this.watchFunctions[r](e)?t=!0:n.push(this.watchFunctions[r]);this.watchFunctions=n}return t},d.prototype.splitFragmentsIntoLines=function(e,n){var r,o,i,a,s,l,u,c,p,f,d,h,m,g;for(f=this.pdf.internal.scaleFactor,a={},o=void 0,p=void 0,i=void 0,s=void 0,g=void 0,c=void 0,u=void 0,l=void 0,h=[d=[]],r=0,m=this.settings.width;e.length;)if(s=e.shift(),g=n.shift(),s)if(o=g["font-family"],p=g["font-style"],(i=a[o+p])||(i=this.pdf.internal.getFont(o,p).metadata.Unicode,a[o+p]=i),c={widths:i.widths,kerning:i.kerning,fontSize:12*g["font-size"],textIndent:r},u=this.pdf.getStringUnitWidth(s,c)*c.fontSize/f,"\u2028"==s)d=[],h.push(d);else if(r+u>m){for(l=this.pdf.splitTextToSize(s,m,c),d.push([l.shift(),g]);l.length;)d=[[l.shift(),g]],h.push(d);r=this.pdf.getStringUnitWidth(d[0][0],c)*c.fontSize/f}else d.push([s,g]),r+=u;if(void 0!==g["text-align"]&&("center"===g["text-align"]||"right"===g["text-align"]||"justify"===g["text-align"]))for(var v=0;v<h.length;++v){var y=this.pdf.getStringUnitWidth(h[v][0][0],c)*c.fontSize/f;v>0&&(h[v][0][1]=t(h[v][0][1]));var b=m-y;if("right"===g["text-align"])h[v][0][1]["margin-left"]=b;else if("center"===g["text-align"])h[v][0][1]["margin-left"]=b/2;else if("justify"===g["text-align"]){var w=h[v][0][0].split(" ").length-1;h[v][0][1]["word-spacing"]=b/w,v===h.length-1&&(h[v][0][1]["word-spacing"]=0)}}return h},d.prototype.RenderTextFragment=function(e,t){var n,r;r=0,this.pdf.internal.pageSize.height-this.pdf.margins_doc.bottom<this.y+this.pdf.internal.getFontSize()&&(this.pdf.internal.write("ET","Q"),this.pdf.addPage(),this.y=this.pdf.margins_doc.top,this.pdf.internal.write("q","BT 0 g",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),t.color,"Td"),r=Math.max(r,t["line-height"],t["font-size"]),this.pdf.internal.write(0,(-12*r).toFixed(2),"Td")),n=this.pdf.internal.getFont(t["font-family"],t["font-style"]);var o=this.getPdfColor(t.color);o!==this.lastTextColor&&(this.pdf.internal.write(o),this.lastTextColor=o),void 0!==t["word-spacing"]&&t["word-spacing"]>0&&this.pdf.internal.write(t["word-spacing"].toFixed(2),"Tw"),this.pdf.internal.write("/"+n.id,(12*t["font-size"]).toFixed(2),"Tf","("+this.pdf.internal.pdfEscape(e)+") Tj"),void 0!==t["word-spacing"]&&this.pdf.internal.write(0,"Tw")},d.prototype.getPdfColor=function(e){var t,n,r,o=/rgb\s*\(\s*(\d+),\s*(\d+),\s*(\d+\s*)\)/.exec(e);if(null!=o?(t=parseInt(o[1]),n=parseInt(o[2]),r=parseInt(o[3])):("#"!=e.charAt(0)&&((e=a.colorNameToHex(e))||(e="#000000")),t=e.substring(1,3),t=parseInt(t,16),n=e.substring(3,5),n=parseInt(n,16),r=e.substring(5,7),r=parseInt(r,16)),"string"==typeof t&&/^#[0-9A-Fa-f]{6}$/.test(t)){var i=parseInt(t.substr(1),16);t=i>>16&255,n=i>>8&255,r=255&i}var s=this.f3;return 0===t&&0===n&&0===r||void 0===n?s(t/255)+" g":[s(t/255),s(n/255),s(r/255),"rg"].join(" ")},d.prototype.f3=function(e){return e.toFixed(3)},d.prototype.renderParagraph=function(e){var t,n,r,o,i,a,s,l,u,c,p,d,h;if(r=f(this.paragraph.text),d=this.paragraph.style,t=this.paragraph.blockstyle,this.paragraph={text:[],style:[],blockstyle:{},priorblockstyle:t},r.join("").trim()){s=this.splitFragmentsIntoLines(r,d),a=void 0,l=void 0,n=12/this.pdf.internal.scaleFactor,this.priorMarginBottom=this.priorMarginBottom||0,p=(Math.max((t["margin-top"]||0)-this.priorMarginBottom,0)+(t["padding-top"]||0))*n,c=((t["margin-bottom"]||0)+(t["padding-bottom"]||0))*n,this.priorMarginBottom=t["margin-bottom"]||0,"always"===t["page-break-before"]&&(this.pdf.addPage(),this.y=0,p=((t["margin-top"]||0)+(t["padding-top"]||0))*n),u=this.pdf.internal.write,o=void 0,i=void 0,this.y+=p,u("q","BT 0 g",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td");for(var m=0;s.length;){for(l=0,o=0,i=(a=s.shift()).length;o!==i;)a[o][0].trim()&&(l=Math.max(l,a[o][1]["line-height"],a[o][1]["font-size"]),h=7*a[o][1]["font-size"]),o++;var g=0,v=0;for(void 0!==a[0][1]["margin-left"]&&a[0][1]["margin-left"]>0&&(g=(v=this.pdf.internal.getCoordinateString(a[0][1]["margin-left"]))-m,m=v),u(g+Math.max(t["margin-left"]||0,0)*n,(-12*l).toFixed(2),"Td"),o=0,i=a.length;o!==i;)a[o][0]&&this.RenderTextFragment(a[o][0],a[o][1]),o++;if(this.y+=l*n,this.executeWatchFunctions(a[0][1])&&s.length>0){var y=[],b=[];s.forEach(function(e){for(var t=0,n=e.length;t!==n;)e[t][0]&&(y.push(e[t][0]+" "),b.push(e[t][1])),++t}),s=this.splitFragmentsIntoLines(f(y),b),u("ET","Q"),u("q","BT 0 g",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td")}}return e&&"function"==typeof e&&e.call(this,this.x-9,this.y-h/2),u("ET","Q"),this.y+=c}},d.prototype.setBlockBoundary=function(e){return this.renderParagraph(e)},d.prototype.setBlockStyle=function(e){return this.paragraph.blockstyle=e},d.prototype.addText=function(e,t){return this.paragraph.text.push(e),this.paragraph.style.push(t)},o={helvetica:"helvetica","sans-serif":"helvetica","times new roman":"times",serif:"times",times:"times",monospace:"courier",courier:"courier"},l={100:"normal",200:"normal",300:"normal",400:"normal",500:"bold",600:"bold",700:"bold",800:"bold",900:"bold",normal:"normal",bold:"bold",bolder:"bold",lighter:"normal"},i={normal:"normal",italic:"italic",oblique:"italic"},s={left:"left",right:"right",center:"center",justify:"justify"},u={none:"none",right:"right",left:"left"},c={none:"none",both:"both"},g={normal:1},e.fromHTML=function(e,t,n,r,o,i){return this.margins_doc=i||{top:0,bottom:0},r||(r={}),r.elementHandlers||(r.elementHandlers={}),x(this,e,isNaN(t)?4:t,isNaN(n)?4:n,r,o)}}(r.API),function(e){var t,n,o;r.API.addJS=function(e){return o=e,this.internal.events.subscribe("postPutResources",function(e){t=this.internal.newObject(),this.internal.write("<< /Names [(EmbeddedJS) "+(t+1)+" 0 R] >>","endobj"),n=this.internal.newObject(),this.internal.write("<< /S /JavaScript /JS (",o,") >>","endobj")}),this.internal.events.subscribe("putCatalog",function(){void 0!==t&&void 0!==n&&this.internal.write("/Names <</JavaScript "+t+" 0 R>>")}),this}}(),function(e){e.events.push(["postPutResources",function(){var e=this,t=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var n=e.outline.render().split(/\r\n/),r=0;r<n.length;r++){var o=n[r],i=t.exec(o);if(null!=i){var a=i[1];e.internal.newObjectDeferredBegin(a)}e.internal.write(o)}if(this.outline.createNamedDestinations){for(var s=this.internal.pages.length,l=[],r=0;r<s;r++){var u=e.internal.newObject();l.push(u);var c=e.internal.getPageInfo(r+1);e.internal.write("<< /D["+c.objId+" 0 R /XYZ null null null]>> endobj")}var p=e.internal.newObject();for(e.internal.write("<< /Names [ "),r=0;r<l.length;r++)e.internal.write("(page_"+(r+1)+")"+l[r]+" 0 R");e.internal.write(" ] >>","endobj"),e.internal.newObject(),e.internal.write("<< /Dests "+p+" 0 R"),e.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var e=this;e.outline.root.children.length>0&&(e.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&e.internal.write("/Names "+namesOid+" 0 R"))}]),e.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(e,t,n){var r={title:t,options:n,children:[]};return null==e&&(e=this.root),e.children.push(r),r},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(t){t.id=e.internal.newObjectDeferred();for(var n=0;n<t.children.length;n++)this.genIds_r(t.children[n])},e.outline.renderRoot=function(e){this.objStart(e),this.line("/Type /Outlines"),e.children.length>0&&(this.line("/First "+this.makeRef(e.children[0])),this.line("/Last "+this.makeRef(e.children[e.children.length-1]))),this.line("/Count "+this.count_r({count:0},e)),this.objEnd()},e.outline.renderItems=function(t){for(o=0;o<t.children.length;o++){i=t.children[o],this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(t)),o>0&&this.line("/Prev "+this.makeRef(t.children[o-1])),o<t.children.length-1&&this.line("/Next "+this.makeRef(t.children[o+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var n=this.count=this.count_r({count:0},i);if(n>0&&this.line("/Count "+n),i.options&&i.options.pageNumber){var r=e.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+r.objId+" 0 R /XYZ 0 "+this.ctx.pdf.internal.pageSize.height+" 0]")}this.objEnd()}for(var o=0;o<t.children.length;o++){var i=t.children[o];this.renderItems(i)}},e.outline.line=function(e){this.ctx.val+=e+"\r\n"},e.outline.makeRef=function(e){return e.id+" 0 R"},e.outline.makeString=function(t){return"("+e.internal.pdfEscape(t)+")"},e.outline.objStart=function(e){this.ctx.val+="\r\n"+e.id+" 0 obj\r\n<<\r\n"},e.outline.objEnd=function(e){this.ctx.val+=">> \r\nendobj\r\n"},e.outline.count_r=function(e,t){for(var n=0;n<t.children.length;n++)e.count++,this.count_r(e,t.children[n]);return e.count}}])}(r.API),function(e){var t=function(){return"function"!=typeof PNG||"function"!=typeof u},n=function(t){return t!==e.image_compression.NONE&&r()},r=function(){var e="function"==typeof s;if(!e)throw new Error("requires deflate.js for compression");return e},o=function(t,n,r,o){var u=5,c=f;switch(o){case e.image_compression.FAST:u=3,c=p;break;case e.image_compression.MEDIUM:u=6,c=d;break;case e.image_compression.SLOW:u=9,c=h}t=l(t,n,r,c);var m=new Uint8Array(i(u)),g=a(t),v=new s(u),y=v.append(t),b=v.flush(),w=m.length+y.length+b.length,x=new Uint8Array(w+4);return x.set(m),x.set(y,m.length),x.set(b,m.length+y.length),x[w++]=g>>>24&255,x[w++]=g>>>16&255,x[w++]=g>>>8&255,x[w++]=255&g,e.arrayBufferToBinaryString(x)},i=function(e,t){var n=Math.LOG2E*Math.log(32768)-8<<4|8,r=n<<8;return r|=Math.min(3,(t-1&255)>>1)<<6,r|=0,r+=31-r%31,[n,255&r]},a=function(e,t){for(var n,r=1,o=0,i=e.length,a=0;i>0;){i-=n=i>t?t:i;do{o+=r+=e[a++]}while(--n);r%=65521,o%=65521}return(o<<16|r)>>>0},l=function(e,t,n,r){for(var o,i,a,s=e.length/t,l=new Uint8Array(e.length+s),u=g(),c=0;c<s;c++){if(a=c*t,o=e.subarray(a,a+t),r)l.set(r(o,n,i),a+c);else{for(var p=0,f=u.length,d=[];p<f;p++)d[p]=u[p](o,n,i);var h=v(d.concat());l.set(d[h],a+c)}i=o}return l},c=function(e,t,n){var r=Array.apply([],e);return r.unshift(0),r},p=function(e,t,n){var r,o=[],i=0,a=e.length;for(o[0]=1;i<a;i++)r=e[i-t]||0,o[i+1]=e[i]-r+256&255;return o},f=function(e,t,n){var r,o=[],i=0,a=e.length;for(o[0]=2;i<a;i++)r=n&&n[i]||0,o[i+1]=e[i]-r+256&255;return o},d=function(e,t,n){var r,o,i=[],a=0,s=e.length;for(i[0]=3;a<s;a++)r=e[a-t]||0,o=n&&n[a]||0,i[a+1]=e[a]+256-(r+o>>>1)&255;return i},h=function(e,t,n){var r,o,i,a,s=[],l=0,u=e.length;for(s[0]=4;l<u;l++)r=e[l-t]||0,o=n&&n[l]||0,i=n&&n[l-t]||0,a=m(r,o,i),s[l+1]=e[l]-a+256&255;return s},m=function(e,t,n){var r=e+t-n,o=Math.abs(r-e),i=Math.abs(r-t),a=Math.abs(r-n);return o<=i&&o<=a?e:i<=a?t:n},g=function(){return[c,p,f,d,h]},v=function(e){for(var t,n,r,o=0,i=e.length;o<i;)((t=y(e[o].slice(1)))<n||!n)&&(n=t,r=o),o++;return r},y=function(e){for(var t=0,n=e.length,r=0;t<n;)r+=Math.abs(e[t++]);return r},b=function(t){var n;switch(t){case e.image_compression.FAST:n=11;break;case e.image_compression.MEDIUM:n=13;break;case e.image_compression.SLOW:n=14;break;default:n=12}return n};e.processPNG=function(e,r,i,a,s){var l,u,c,p,f,d,h=this.color_spaces.DEVICE_RGB,m=this.decode.FLATE_DECODE,g=8;if(this.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.isArrayBufferView(e)){if(t())throw new Error("PNG support requires png.js and zlib.js");if(l=new PNG(e),e=l.imgData,g=l.bits,h=l.colorSpace,p=l.colors,-1!==[4,6].indexOf(l.colorType)){if(8===l.bits)for(var v,y=(O=32==l.pixelBitlength?new Uint32Array(l.decodePixels().buffer):16==l.pixelBitlength?new Uint16Array(l.decodePixels().buffer):new Uint8Array(l.decodePixels().buffer)).length,w=new Uint8Array(y*l.colors),x=new Uint8Array(y),_=l.pixelBitlength-l.bits,S=0,C=0;S<y;S++){for(k=O[S],v=0;v<_;)w[C++]=k>>>v&255,v+=l.bits;x[S]=k>>>v&255}if(16===l.bits){for(var k,y=(O=new Uint32Array(l.decodePixels().buffer)).length,w=new Uint8Array(y*(32/l.pixelBitlength)*l.colors),x=new Uint8Array(y*(32/l.pixelBitlength)),A=l.colors>1,S=0,C=0,E=0;S<y;)k=O[S++],w[C++]=k>>>0&255,A&&(w[C++]=k>>>16&255,k=O[S++],w[C++]=k>>>0&255),x[E++]=k>>>16&255;g=8}n(a)?(e=o(w,l.width*l.colors,l.colors,a),d=o(x,l.width,1,a)):(e=w,d=x,m=null)}if(3===l.colorType&&(h=this.color_spaces.INDEXED,f=l.palette,l.transparency.indexed)){for(var M=l.transparency.indexed,T=0,S=0,y=M.length;S<y;++S)T+=M[S];if((T/=255)==y-1&&-1!==M.indexOf(0))c=[M.indexOf(0)];else if(T!==y){for(var O=l.decodePixels(),x=new Uint8Array(O.length),S=0,y=O.length;S<y;S++)x[S]=M[O[S]];d=o(x,l.width,1)}}var I=b(a);return u=m===this.decode.FLATE_DECODE?"/Predictor "+I+" /Colors "+p+" /BitsPerComponent "+g+" /Columns "+l.width:"/Colors "+p+" /BitsPerComponent "+g+" /Columns "+l.width,(this.isArrayBuffer(e)||this.isArrayBufferView(e))&&(e=this.arrayBufferToBinaryString(e)),(d&&this.isArrayBuffer(d)||this.isArrayBufferView(d))&&(d=this.arrayBufferToBinaryString(d)),this.createImageInfo(e,l.width,l.height,h,g,m,r,i,u,c,f,d,I)}throw new Error("Unsupported PNG image data, try using JPEG instead.")}}(r.API),r.API.autoPrint=function(){var e;return this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.write("<< /S/Named /Type/Action /N/Print >>","endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.write("/OpenAction "+e+" 0 R")}),this},function(e){var t=e.getCharWidthsArray=function(e,t){t||(t={});var n,r,o,i=t.widths?t.widths:this.internal.getFont().metadata.Unicode.widths,a=i.fof?i.fof:1,s=t.kerning?t.kerning:this.internal.getFont().metadata.Unicode.kerning,l=s.fof?s.fof:1,u=0,c=i[0]||a,p=[];for(n=0,r=e.length;n<r;n++)o=e.charCodeAt(n),p.push((i[o]||c)/a+(s[o]&&s[o][u]||0)/l),u=o;return p},n=function(e){for(var t=e.length,n=0;t;)n+=e[--t];return n},r=e.getStringUnitWidth=function(e,r){return n(t.call(this,e,r))},o=function(e,t,n,r){for(var o=[],i=0,a=e.length,s=0;i!==a&&s+t[i]<n;)s+=t[i],i++;o.push(e.slice(0,i));var l=i;for(s=0;i!==a;)s+t[i]>r&&(o.push(e.slice(l,i)),s=0,l=i),s+=t[i],i++;return l!==i&&o.push(e.slice(l,i)),o},i=function(e,i,a){a||(a={});var s,l,u,c,p,f,d=[],h=[d],m=a.textIndent||0,g=0,v=0,y=e.split(" "),b=t(" ",a)[0];if(f=-1===a.lineIndent?y[0].length+2:a.lineIndent||0){var w=Array(f).join(" "),x=[];y.map(function(e){(e=e.split(/\s*\n/)).length>1?x=x.concat(e.map(function(e,t){return(t&&e.length?"\n":"")+e})):x.push(e[0])}),y=x,f=r(w,a)}for(u=0,c=y.length;u<c;u++){var _=0;if(s=y[u],f&&"\n"==s[0]&&(s=s.substr(1),_=1),l=t(s,a),v=n(l),m+g+v>i||_){if(v>i){for(p=o(s,l,i-(m+g),i),d.push(p.shift()),d=[p.pop()];p.length;)h.push([p.shift()]);v=n(l.slice(s.length-d[0].length))}else d=[s];h.push(d),m=v+f,g=b}else d.push(s),m+=g+v,g=b}if(f)S=function(e,t){return(t?w:"")+e.join(" ")};else var S=function(e){return e.join(" ")};return h.map(S)};e.splitTextToSize=function(e,t,n){n||(n={});var r,o=n.fontSize||this.internal.getFontSize(),a=function(e){var t={0:1},n={};if(e.widths&&e.kerning)return{widths:e.widths,kerning:e.kerning};var r=this.internal.getFont(e.fontName,e.fontStyle);return r.metadata.Unicode?{widths:r.metadata.Unicode.widths||t,kerning:r.metadata.Unicode.kerning||n}:{widths:t,kerning:n}}.call(this,n);r=Array.isArray(e)?e:e.split(/\r?\n/);var s=1*this.internal.scaleFactor*t/o;a.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/o:0,a.lineIndent=n.lineIndent;var l,u,c=[];for(l=0,u=r.length;l<u;l++)c=c.concat(i(r[l],s,a));return c}}(r.API),function(e){var t=function(e){for(var t={},n=0;n<"klmnopqrstuvwxyz".length;n++)t["klmnopqrstuvwxyz"[n]]="0123456789abcdef"[n];var r,o,i,a,s={},l=1,u=s,c=[],p="",f="",d=e.length-1;for(n=1;n!=d;)a=e[n],n+=1,"'"==a?r?(i=r.join(""),r=void 0):r=[]:r?r.push(a):"{"==a?(c.push([u,i]),u={},i=void 0):"}"==a?((o=c.pop())[0][o[1]]=u,i=void 0,u=o[0]):"-"==a?l=-1:void 0===i?t.hasOwnProperty(a)?(p+=t[a],i=parseInt(p,16)*l,l=1,p=""):p+=a:t.hasOwnProperty(a)?(f+=t[a],u[i]=parseInt(f,16)*l,l=1,i=void 0,f=""):f+=a;return s},n={codePages:["WinAnsiEncoding"],WinAnsiEncoding:t("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},r={Unicode:{Courier:n,"Courier-Bold":n,"Courier-BoldOblique":n,"Courier-Oblique":n,Helvetica:n,"Helvetica-Bold":n,"Helvetica-BoldOblique":n,"Helvetica-Oblique":n,"Times-Roman":n,"Times-Bold":n,"Times-BoldItalic":n,"Times-Italic":n}},o={Unicode:{"Courier-Oblique":t("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":t("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":t("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:t("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":t("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":t("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Helvetica:t("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":t("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),"Courier-Bold":t("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":t("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":t("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":t("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(e){var t,n,i;(t=o.Unicode[e.PostScriptName])&&((n=e.metadata.Unicode?e.metadata.Unicode:e.metadata.Unicode={}).widths=t.widths,n.kerning=t.kerning),(i=r.Unicode[e.PostScriptName])&&((n=e.metadata.Unicode?e.metadata.Unicode:e.metadata.Unicode={}).encoding=i,i.codePages&&i.codePages.length&&(e.encoding=i.codePages[0]))}])}(r.API),r.API.addSVG=function(e,t,n,r,o){function i(e,t){var n=t.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(t.createTextNode(e)),t.getElementsByTagName("head")[0].appendChild(n)}if(void 0===t||void 0===n)throw new Error("addSVG needs values for 'x' and 'y'");var a=function(e,t){var n=(t.contentWindow||t.contentDocument).document;return n.write(e),n.close(),n.getElementsByTagName("svg")[0]}(e,function(e){var t=e.createElement("iframe");return i(".jsPDF_sillysvg_iframe {display:none;position:absolute;}",e),t.name="childframe",t.setAttribute("width",0),t.setAttribute("height",0),t.setAttribute("frameborder","0"),t.setAttribute("scrolling","no"),t.setAttribute("seamless","seamless"),t.setAttribute("class","jsPDF_sillysvg_iframe"),e.body.appendChild(t),t}(document)),s=[1,1],l=parseFloat(a.getAttribute("width")),u=parseFloat(a.getAttribute("height"));l&&u&&(r&&o?s=[r/l,o/u]:r?s=[r/l,r/l]:o&&(s=[o/u,o/u]));var c,p,f,d,h=a.childNodes;for(c=0,p=h.length;c<p;c++)(f=h[c]).tagName&&"PATH"===f.tagName.toUpperCase()&&((d=function(e){for(var t=parseFloat(e[1]),n=parseFloat(e[2]),r=[],o=3,i=e.length;o<i;)"c"===e[o]?(r.push([parseFloat(e[o+1]),parseFloat(e[o+2]),parseFloat(e[o+3]),parseFloat(e[o+4]),parseFloat(e[o+5]),parseFloat(e[o+6])]),o+=7):"l"===e[o]?(r.push([parseFloat(e[o+1]),parseFloat(e[o+2])]),o+=3):o+=1;return[t,n,r]}(f.getAttribute("d").split(" ")))[0]=d[0]*s[0]+t,d[1]=d[1]*s[1]+n,this.lines.call(this,d[2],d[0],d[1],s));return this},r.API.putTotalPages=function(e){for(var t=new RegExp(e,"g"),n=1;n<=this.internal.getNumberOfPages();n++)for(var r=0;r<this.internal.pages[n].length;r++)this.internal.pages[n][r]=this.internal.pages[n][r].replace(t,this.internal.getNumberOfPages());return this},function(e){var t="",n="",o="";r.API.addMetadata=function(e,r){return n=r||"http://jspdf.default.namespaceuri/",t=e,this.internal.events.subscribe("postPutResources",function(){if(t){var e='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+n+'"><jspdf:metadata>',r=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(e)),a=unescape(encodeURIComponent(t)),s=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=i.length+a.length+s.length+r.length+l.length;o=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(r+i+a+s+l),this.internal.write("endstream"),this.internal.write("endobj")}else o=""}),this.internal.events.subscribe("putCatalog",function(){o&&this.internal.write("/Metadata "+o+" 0 R")}),this}}(),function(e){if(e.URL=e.URL||e.webkitURL,e.Blob&&e.URL)try{return void new Blob}catch(e){}var t=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||function(e){var t=function(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]},n=function(){this.data=[]},r=function(e,t,n){this.data=e,this.size=e.length,this.type=t,this.encoding=n},o=n.prototype,i=r.prototype,a=e.FileReaderSync,s=function(e){this.code=this[this.name=e]},l="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),u=l.length,c=e.URL||e.webkitURL||e,p=c.createObjectURL,f=c.revokeObjectURL,d=c,h=e.btoa,m=e.atob,g=e.ArrayBuffer,v=e.Uint8Array,y=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(r.fake=i.fake=!0;u--;)s.prototype[l[u]]=u+1;return c.createObjectURL||(d=e.URL=function(e){var t,n=document.createElementNS("http://www.w3.org/1999/xhtml","a");return n.href=e,"origin"in n||("data:"===n.protocol.toLowerCase()?n.origin=null:(t=e.match(y),n.origin=t&&t[1])),n}),d.createObjectURL=function(e){var t,n=e.type;return null===n&&(n="application/octet-stream"),e instanceof r?(t="data:"+n,"base64"===e.encoding?t+";base64,"+e.data:"URI"===e.encoding?t+","+decodeURIComponent(e.data):h?t+";base64,"+h(e.data):t+","+encodeURIComponent(e.data)):p?p.call(c,e):void 0},d.revokeObjectURL=function(e){"data:"!==e.substring(0,5)&&f&&f.call(c,e)},o.append=function(e){var n=this.data;if(v&&(e instanceof g||e instanceof v)){for(var o="",i=new v(e),l=0,u=i.length;l<u;l++)o+=String.fromCharCode(i[l]);n.push(o)}else if("Blob"===t(e)||"File"===t(e)){if(!a)throw new s("NOT_READABLE_ERR");var c=new a;n.push(c.readAsBinaryString(e))}else e instanceof r?"base64"===e.encoding&&m?n.push(m(e.data)):"URI"===e.encoding?n.push(decodeURIComponent(e.data)):"raw"===e.encoding&&n.push(e.data):("string"!=typeof e&&(e+=""),n.push(unescape(encodeURIComponent(e))))},o.getBlob=function(e){return arguments.length||(e=null),new r(this.data.join(""),e,"raw")},o.toString=function(){return"[object BlobBuilder]"},i.slice=function(e,t,n){var o=arguments.length;return o<3&&(n=null),new r(this.data.slice(e,o>1?t:this.data.length),n,this.encoding)},i.toString=function(){return"[object Blob]"},i.close=function(){this.size=0,delete this.data},n}(e);e.Blob=function(e,n){var r=n?n.type||"":"",o=new t;if(e)for(var i=0,a=e.length;i<a;i++)Uint8Array&&e[i]instanceof Uint8Array?o.append(e[i].buffer):o.append(e[i]);var s=o.getBlob(r);return!s.slice&&s.webkitSlice&&(s.slice=s.webkitSlice),s};var n=Object.getPrototypeOf||function(e){return e.__proto__};e.Blob.prototype=n(new e.Blob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||(void 0).content||void 0);var i=i||function(e){if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=function(){return e.URL||e.webkitURL||e},n=e.document.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in n,o=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},i=/constructor/i.test(e.HTMLElement)||e.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent),s=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},l=function(e){setTimeout(function(){"string"==typeof e?t().revokeObjectURL(e):e.remove()},4e4)},u=function(e,t,n){for(var r=(t=[].concat(t)).length;r--;){var o=e["on"+t[r]];if("function"==typeof o)try{o.call(e,n||e)}catch(e){s(e)}}},c=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},p=function(s,p,f){f||(s=c(s));var d,h=this,m="application/octet-stream"===s.type,g=function(){u(h,"writestart progress write writeend".split(" "))};if(h.readyState=h.INIT,r)return d=t().createObjectURL(s),void setTimeout(function(){n.href=d,n.download=p,o(n),g(),l(d),h.readyState=h.DONE});!function(){if((a||m&&i)&&e.FileReader){var n=new FileReader;return n.onloadend=function(){var t=a?n.result:n.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,h.readyState=h.DONE,g()},n.readAsDataURL(s),void(h.readyState=h.INIT)}d||(d=t().createObjectURL(s)),m?e.location.href=d:e.open(d,"_blank")||(e.location.href=d),h.readyState=h.DONE,g(),l(d)}()},f=p.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=c(e)),navigator.msSaveOrOpenBlob(e,t)}:(f.abort=function(){},f.readyState=f.INIT=0,f.WRITING=1,f.DONE=2,f.error=f.onwritestart=f.onprogress=f.onwrite=f.onabort=f.onerror=f.onwriteend=null,function(e,t,n){return new p(e,t||e.name||"download",n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||(void 0).content);void 0!==e&&e.exports?e.exports.saveAs=i:"undefined"!=typeof define&&null!==define&&null!==define.amd&&define("FileSaver.js",function(){return i}),function(t,n){"object"==typeof e?e.exports=n():"function"==typeof define?define(n):t.adler32cs=n()}(r,function(){var e="function"==typeof ArrayBuffer&&"function"==typeof Uint8Array,t=null,n=function(){if(!e)return function(){return!1};try{var n={};"function"==typeof n.Buffer&&(t=n.Buffer)}catch(e){}return function(e){return e instanceof ArrayBuffer||null!==t&&e instanceof t}}(),r=null!==t?function(e){return new t(e,"utf8").toString("binary")}:function(e){return unescape(encodeURIComponent(e))},o=function(e,t){for(var n=65535&e,r=e>>>16,o=0,i=t.length;o<i;o++)r=(r+(n=(n+(255&t.charCodeAt(o)))%65521))%65521;return(r<<16|n)>>>0},i=function(e,t){for(var n=65535&e,r=e>>>16,o=0,i=t.length;o<i;o++)r=(r+(n=(n+t[o])%65521))%65521;return(r<<16|n)>>>0},a={},s=a.Adler32=function(){var t=function(e){if(!(this instanceof t))throw new TypeError("Constructor cannot called be as a function.");if(!isFinite(e=null==e?1:+e))throw new Error("First arguments needs to be a finite number.");this.checksum=e>>>0},a=t.prototype={};return a.constructor=t,t.from=function(e){return e.prototype=a,e}(function(e){if(!(this instanceof t))throw new TypeError("Constructor cannot called be as a function.");if(null==e)throw new Error("First argument needs to be a string.");this.checksum=o(1,e.toString())}),t.fromUtf8=function(e){return e.prototype=a,e}(function(e){if(!(this instanceof t))throw new TypeError("Constructor cannot called be as a function.");if(null==e)throw new Error("First argument needs to be a string.");var n=r(e.toString());this.checksum=o(1,n)}),e&&(t.fromBuffer=function(e){return e.prototype=a,e}(function(e){if(!(this instanceof t))throw new TypeError("Constructor cannot called be as a function.");if(!n(e))throw new Error("First argument needs to be ArrayBuffer.");var r=new Uint8Array(e);return this.checksum=i(1,r)})),a.update=function(e){if(null==e)throw new Error("First argument needs to be a string.");return e=e.toString(),this.checksum=o(this.checksum,e)},a.updateUtf8=function(e){if(null==e)throw new Error("First argument needs to be a string.");var t=r(e.toString());return this.checksum=o(this.checksum,t)},e&&(a.updateBuffer=function(e){if(!n(e))throw new Error("First argument needs to be ArrayBuffer.");var t=new Uint8Array(e);return this.checksum=i(this.checksum,t)}),a.clone=function(){return new s(this.checksum)},t}();return a.from=function(e){if(null==e)throw new Error("First argument needs to be a string.");return o(1,e.toString())},a.fromUtf8=function(e){if(null==e)throw new Error("First argument needs to be a string.");var t=r(e.toString());return o(1,t)},e&&(a.fromBuffer=function(e){if(!n(e))throw new Error("First argument need to be ArrayBuffer.");var t=new Uint8Array(e);return i(1,t)}),a});var a={};a._colorsTable={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},a.colorNameToHex=function(e){return e=e.toLowerCase(),void 0!==this._colorsTable[e]&&this._colorsTable[e]};var s=function(e){function t(){function e(e){var t,n,o,i,a,l,u=r.dyn_tree,c=r.stat_desc.static_tree,p=r.stat_desc.extra_bits,d=r.stat_desc.extra_base,h=r.stat_desc.max_length,m=0;for(i=0;i<=s;i++)e.bl_count[i]=0;for(u[2*e.heap[e.heap_max]+1]=0,t=e.heap_max+1;t<f;t++)(i=u[2*u[2*(n=e.heap[t])+1]+1]+1)>h&&(i=h,m++),u[2*n+1]=i,n>r.max_code||(e.bl_count[i]++,a=0,n>=d&&(a=p[n-d]),l=u[2*n],e.opt_len+=l*(i+a),c&&(e.static_len+=l*(c[2*n+1]+a)));if(0!==m){do{for(i=h-1;0===e.bl_count[i];)i--;e.bl_count[i]--,e.bl_count[i+1]+=2,e.bl_count[h]--,m-=2}while(m>0);for(i=h;0!==i;i--)for(n=e.bl_count[i];0!==n;)(o=e.heap[--t])>r.max_code||(u[2*o+1]!=i&&(e.opt_len+=(i-u[2*o+1])*u[2*o],u[2*o+1]=i),n--)}}function t(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function n(e,n,r){var o,i,a,l=[],u=0;for(o=1;o<=s;o++)l[o]=u=u+r[o-1]<<1;for(i=0;i<=n;i++)0!==(a=e[2*i+1])&&(e[2*i]=t(l[a]++,a))}var r=this;r.build_tree=function(t){var o,i,a,s=r.dyn_tree,l=r.stat_desc.static_tree,u=r.stat_desc.elems,c=-1;for(t.heap_len=0,t.heap_max=f,o=0;o<u;o++)0!==s[2*o]?(t.heap[++t.heap_len]=c=o,t.depth[o]=0):s[2*o+1]=0;for(;t.heap_len<2;)s[2*(a=t.heap[++t.heap_len]=c<2?++c:0)]=1,t.depth[a]=0,t.opt_len--,l&&(t.static_len-=l[2*a+1]);for(r.max_code=c,o=Math.floor(t.heap_len/2);o>=1;o--)t.pqdownheap(s,o);a=u;do{o=t.heap[1],t.heap[1]=t.heap[t.heap_len--],t.pqdownheap(s,1),i=t.heap[1],t.heap[--t.heap_max]=o,t.heap[--t.heap_max]=i,s[2*a]=s[2*o]+s[2*i],t.depth[a]=Math.max(t.depth[o],t.depth[i])+1,s[2*o+1]=s[2*i+1]=a,t.heap[1]=a++,t.pqdownheap(s,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],e(t),n(s,r.max_code,t.bl_count)}}function n(e,t,n,r,o){var i=this;i.static_tree=e,i.extra_bits=t,i.extra_base=n,i.elems=r,i.max_length=o}function r(e,t,n,r,o){var i=this;i.good_length=e,i.max_lazy=t,i.nice_length=n,i.max_chain=r,i.func=o}function o(e,t,n,r){var o=e[2*t],i=e[2*n];return o<i||o==i&&r[t]<=r[n]}function i(){function e(){var e;for(Te=2*ke,Ie[je-1]=0,e=0;e<je-1;e++)Ie[e]=0;We=L[Ze].max_lazy,Xe=L[Ze].good_length,Ke=L[Ze].nice_length,Ge=L[Ze].max_chain,qe=0,Fe=0,Ue=0,Le=He=J-1,Be=0,Pe=0}function r(){var e;for(e=0;e<p;e++)Qe[2*e]=0;for(e=0;e<l;e++)Je[2*e]=0;for(e=0;e<u;e++)$e[2*e]=0;Qe[2*d]=1,et.opt_len=et.static_len=0,at=lt=0}function i(){tt.dyn_tree=Qe,tt.stat_desc=n.static_l_desc,nt.dyn_tree=Je,nt.stat_desc=n.static_d_desc,rt.dyn_tree=$e,rt.stat_desc=n.static_bl_desc,ct=0,pt=0,ut=8,r()}function a(e,t){var n,r,o=-1,i=e[1],a=0,s=7,l=4;for(0===i&&(s=138,l=3),e[2*(t+1)+1]=65535,n=0;n<=t;n++)r=i,i=e[2*(n+1)+1],++a<s&&r==i||(a<l?$e[2*r]+=a:0!==r?(r!=o&&$e[2*r]++,$e[2*h]++):a<=10?$e[2*m]++:$e[2*g]++,a=0,o=r,0===i?(s=138,l=3):r==i?(s=6,l=3):(s=7,l=4))}function s(){var e;for(a(Qe,tt.max_code),a(Je,nt.max_code),rt.build_tree(et),e=u-1;e>=3&&0===$e[2*t.bl_order[e]+1];e--);return et.opt_len+=3*(e+1)+5+5+4,e}function f(e){et.pending_buf[et.pending++]=e}function P(e){f(255&e),f(e>>>8&255)}function te(e){f(e>>8&255),f(255&e)}function ne(e,t){var n,r=t;pt>v-r?(P(ct|=(n=e)<<pt&65535),ct=n>>>v-pt,pt+=r-v):(ct|=e<<pt&65535,pt+=r)}function re(e,t){var n=2*e;ne(65535&t[n],65535&t[n+1])}function oe(e,t){var n,r,o=-1,i=e[1],a=0,s=7,l=4;for(0===i&&(s=138,l=3),n=0;n<=t;n++)if(r=i,i=e[2*(n+1)+1],!(++a<s&&r==i)){if(a<l)do{re(r,$e)}while(0!=--a);else 0!==r?(r!=o&&(re(r,$e),a--),re(h,$e),ne(a-3,2)):a<=10?(re(m,$e),ne(a-3,3)):(re(g,$e),ne(a-11,7));a=0,o=r,0===i?(s=138,l=3):r==i?(s=6,l=3):(s=7,l=4)}}function ie(e,n,r){var o;for(ne(e-257,5),ne(n-1,5),ne(r-4,4),o=0;o<r;o++)ne($e[2*t.bl_order[o]+1],3);oe(Qe,e-1),oe(Je,n-1)}function ae(){16==pt?(P(ct),ct=0,pt=0):pt>=8&&(f(255&ct),ct>>>=8,pt-=8)}function se(){ne(K<<1,3),re(d,n.static_ltree),ae(),1+ut+10-pt<9&&(ne(K<<1,3),re(d,n.static_ltree),ae()),ut=7}function le(e,n){var r,o,i;if(et.pending_buf[st+2*at]=e>>>8&255,et.pending_buf[st+2*at+1]=255&e,et.pending_buf[ot+at]=255&n,at++,0===e?Qe[2*n]++:(lt++,e--,Qe[2*(t._length_code[n]+c+1)]++,Je[2*t.d_code(e)]++),0==(8191&at)&&Ze>2){for(r=8*at,o=qe-Fe,i=0;i<l;i++)r+=Je[2*i]*(5+t.extra_dbits[i]);if(r>>>=3,lt<Math.floor(at/2)&&r<Math.floor(o/2))return!0}return at==it-1}function ue(e,n){var r,o,i,a,s=0;if(0!==at)do{r=et.pending_buf[st+2*s]<<8&65280|255&et.pending_buf[st+2*s+1],o=255&et.pending_buf[ot+s],s++,0===r?re(o,e):(re((i=t._length_code[o])+c+1,e),0!==(a=t.extra_lbits[i])&&ne(o-=t.base_length[i],a),r--,re(i=t.d_code(r),n),0!==(a=t.extra_dbits[i])&&ne(r-=t.base_dist[i],a))}while(s<at);re(d,e),ut=e[2*d+1]}function ce(){pt>8?P(ct):pt>0&&f(255&ct),ct=0,pt=0}function pe(e,t,n){ce(),ut=8,n&&(P(t),P(~t)),et.pending_buf.set(Me.subarray(e,e+t),et.pending),et.pending+=t}function fe(e,t,n){ne((X<<1)+(n?1:0),3),pe(e,t,!0)}function de(e,t,o){var i,a,l=0;Ze>0?(tt.build_tree(et),nt.build_tree(et),l=s(),i=et.opt_len+3+7>>>3,(a=et.static_len+3+7>>>3)<=i&&(i=a)):i=a=t+5,t+4<=i&&-1!=e?fe(e,t,o):a==i?(ne((K<<1)+(o?1:0),3),ue(n.static_ltree,n.static_dtree)):(ne((Q<<1)+(o?1:0),3),ie(tt.max_code+1,nt.max_code+1,l+1),ue(Qe,Je)),r(),o&&ce()}function he(e){de(Fe>=0?Fe:-1,qe-Fe,e),Fe=qe,xe.flush_pending()}function me(){var e,t,n,r;do{if(0==(r=Te-Ue-qe)&&0===qe&&0===Ue)r=ke;else if(-1==r)r--;else if(qe>=ke+ke-ee){Me.set(Me.subarray(ke,ke+ke),0),Ve-=ke,qe-=ke,Fe-=ke,n=e=je;do{t=65535&Ie[--n],Ie[n]=t>=ke?t-ke:0}while(0!=--e);n=e=ke;do{t=65535&Oe[--n],Oe[n]=t>=ke?t-ke:0}while(0!=--e);r+=ke}if(0===xe.avail_in)return;e=xe.read_buf(Me,qe+Ue,r),(Ue+=e)>=J&&(Pe=255&Me[qe],Pe=(Pe<<Re^255&Me[qe+1])&Ne)}while(Ue<ee&&0!==xe.avail_in)}function ge(e){var t,n=65535;for(n>Se-5&&(n=Se-5);;){if(Ue<=1){if(me(),0===Ue&&e==_)return B;if(0===Ue)break}if(qe+=Ue,Ue=0,t=Fe+n,(0===qe||qe>=t)&&(Ue=qe-t,qe=t,he(!1),0===xe.avail_out))return B;if(qe-Fe>=ke-ee&&(he(!1),0===xe.avail_out))return B}return he(e==k),0===xe.avail_out?e==k?V:B:e==k?U:q}function ve(e){var t,n,r=Ge,o=qe,i=He,a=qe>ke-ee?qe-(ke-ee):0,s=Ke,l=Ee,u=qe+$,c=Me[o+i-1],p=Me[o+i];He>=Xe&&(r>>=2),s>Ue&&(s=Ue);do{if(t=e,Me[t+i]==p&&Me[t+i-1]==c&&Me[t]==Me[o]&&Me[++t]==Me[o+1]){o+=2,t++;do{}while(Me[++o]==Me[++t]&&Me[++o]==Me[++t]&&Me[++o]==Me[++t]&&Me[++o]==Me[++t]&&Me[++o]==Me[++t]&&Me[++o]==Me[++t]&&Me[++o]==Me[++t]&&Me[++o]==Me[++t]&&o<u);if(n=$-(u-o),o=u-$,n>i){if(Ve=e,i=n,n>=s)break;c=Me[o+i-1],p=Me[o+i]}}}while((e=65535&Oe[e&l])>a&&0!=--r);return i<=Ue?i:Ue}function ye(e){for(var t,n=0;;){if(Ue<ee){if(me(),Ue<ee&&e==_)return B;if(0===Ue)break}if(Ue>=J&&(Pe=(Pe<<Re^255&Me[qe+(J-1)])&Ne,n=65535&Ie[Pe],Oe[qe&Ee]=Ie[Pe],Ie[Pe]=qe),0!==n&&(qe-n&65535)<=ke-ee&&Ye!=w&&(Le=ve(n)),Le>=J)if(t=le(qe-Ve,Le-J),Ue-=Le,Le<=We&&Ue>=J){Le--;do{Pe=(Pe<<Re^255&Me[++qe+(J-1)])&Ne,n=65535&Ie[Pe],Oe[qe&Ee]=Ie[Pe],Ie[Pe]=qe}while(0!=--Le);qe++}else qe+=Le,Le=0,Pe=255&Me[qe],Pe=(Pe<<Re^255&Me[qe+1])&Ne;else t=le(0,255&Me[qe]),Ue--,qe++;if(t&&(he(!1),0===xe.avail_out))return B}return he(e==k),0===xe.avail_out?e==k?V:B:e==k?U:q}function be(e){for(var t,n,r=0;;){if(Ue<ee){if(me(),Ue<ee&&e==_)return B;if(0===Ue)break}if(Ue>=J&&(Pe=(Pe<<Re^255&Me[qe+(J-1)])&Ne,r=65535&Ie[Pe],Oe[qe&Ee]=Ie[Pe],Ie[Pe]=qe),He=Le,ze=Ve,Le=J-1,0!==r&&He<We&&(qe-r&65535)<=ke-ee&&(Ye!=w&&(Le=ve(r)),Le<=5&&(Ye==b||Le==J&&qe-Ve>4096)&&(Le=J-1)),He>=J&&Le<=He){n=qe+Ue-J,t=le(qe-1-ze,He-J),Ue-=He-1,He-=2;do{++qe<=n&&(Pe=(Pe<<Re^255&Me[qe+(J-1)])&Ne,r=65535&Ie[Pe],Oe[qe&Ee]=Ie[Pe],Ie[Pe]=qe)}while(0!=--He);if(Be=0,Le=J-1,qe++,t&&(he(!1),0===xe.avail_out))return B}else if(0!==Be){if((t=le(0,255&Me[qe-1]))&&he(!1),qe++,Ue--,0===xe.avail_out)return B}else Be=1,qe++,Ue--}return 0!==Be&&(t=le(0,255&Me[qe-1]),Be=0),he(e==k),0===xe.avail_out?e==k?V:B:e==k?U:q}function we(t){return t.total_in=t.total_out=0,t.msg=null,et.pending=0,et.pending_out=0,_e=W,Ce=_,i(),e(),A}var xe,_e,Se,Ce,ke,Ae,Ee,Me,Te,Oe,Ie,Pe,je,De,Ne,Re,Fe,Le,ze,Be,qe,Ve,Ue,He,Ge,We,Ze,Ye,Xe,Ke,Qe,Je,$e,et=this,tt=new t,nt=new t,rt=new t;et.depth=[];var ot,it,at,st,lt,ut,ct,pt;et.bl_count=[],et.heap=[],Qe=[],Je=[],$e=[],et.pqdownheap=function(e,t){for(var n=et.heap,r=n[t],i=t<<1;i<=et.heap_len&&(i<et.heap_len&&o(e,n[i+1],n[i],et.depth)&&i++,!o(e,r,n[i],et.depth));)n[t]=n[i],t=i,i<<=1;n[t]=r},et.deflateInit=function(e,t,n,r,o,i){return r||(r=Y),o||(o=D),i||(i=x),e.msg=null,t==y&&(t=6),o<1||o>j||r!=Y||n<9||n>15||t<0||t>9||i<0||i>w?T:(e.dstate=et,Ae=n,ke=1<<Ae,Ee=ke-1,De=o+7,je=1<<De,Ne=je-1,Re=Math.floor((De+J-1)/J),Me=new Uint8Array(2*ke),Oe=[],Ie=[],it=1<<o+6,et.pending_buf=new Uint8Array(4*it),Se=4*it,st=Math.floor(it/2),ot=3*it,Ze=t,Ye=i,we(e))},et.deflateEnd=function(){return _e!=G&&_e!=W&&_e!=Z?T:(et.pending_buf=null,Ie=null,Oe=null,Me=null,et.dstate=null,_e==W?O:A)},et.deflateParams=function(e,t,n){var r=A;return t==y&&(t=6),t<0||t>9||n<0||n>w?T:(L[Ze].func!=L[t].func&&0!==e.total_in&&(r=e.deflate(S)),Ze!=t&&(We=L[Ze=t].max_lazy,Xe=L[Ze].good_length,Ke=L[Ze].nice_length,Ge=L[Ze].max_chain),Ye=n,r)},et.deflateSetDictionary=function(e,t,n){var r,o=n,i=0;if(!t||_e!=G)return T;if(o<J)return A;for(o>ke-ee&&(i=n-(o=ke-ee)),Me.set(t.subarray(i,i+o),0),qe=o,Fe=o,Pe=255&Me[0],Pe=(Pe<<Re^255&Me[1])&Ne,r=0;r<=o-J;r++)Pe=(Pe<<Re^255&Me[r+(J-1)])&Ne,Oe[r&Ee]=Ie[Pe],Ie[Pe]=r;return A},et.deflate=function(e,t){var n,r,o,i,a;if(t>k||t<0)return T;if(!e.next_out||!e.next_in&&0!==e.avail_in||_e==Z&&t!=k)return e.msg=z[M-T],T;if(0===e.avail_out)return e.msg=z[M-I],I;if(xe=e,i=Ce,Ce=t,_e==G&&(r=Y+(Ae-8<<4)<<8,(o=(Ze-1&255)>>1)>3&&(o=3),r|=o<<6,0!==qe&&(r|=H),_e=W,te(r+=31-r%31)),0!==et.pending){if(xe.flush_pending(),0===xe.avail_out)return Ce=-1,A}else if(0===xe.avail_in&&t<=i&&t!=k)return xe.msg=z[M-I],I;if(_e==Z&&0!==xe.avail_in)return e.msg=z[M-I],I;if(0!==xe.avail_in||0!==Ue||t!=_&&_e!=Z){switch(a=-1,L[Ze].func){case N:a=ge(t);break;case R:a=ye(t);break;case F:a=be(t)}if(a!=V&&a!=U||(_e=Z),a==B||a==V)return 0===xe.avail_out&&(Ce=-1),A;if(a==q){if(t==S)se();else if(fe(0,0,!1),t==C)for(n=0;n<je;n++)Ie[n]=0;if(xe.flush_pending(),0===xe.avail_out)return Ce=-1,A}}return t!=k?A:E}}function a(){var e=this;e.next_in_index=0,e.next_out_index=0,e.avail_in=0,e.total_in=0,e.avail_out=0,e.total_out=0}var s=15,l=30,u=19,c=256,p=c+1+29,f=2*p+1,d=256,h=16,m=17,g=18,v=16,y=-1,b=1,w=2,x=0,_=0,S=1,C=3,k=4,A=0,E=1,M=2,T=-2,O=-3,I=-5,P=[0,1,2,3,4,4,5,5,6,6,6,6,7,7,7,7,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,0,0,16,17,18,18,19,19,20,20,20,20,21,21,21,21,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29];t._length_code=[0,1,2,3,4,5,6,7,8,8,9,9,10,10,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,16,16,16,16,16,16,16,16,17,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28],t.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],t.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],t.d_code=function(e){return e<256?P[e]:P[256+(e>>>7)]},t.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],t.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],t.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],t.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],n.static_ltree=[12,8,140,8,76,8,204,8,44,8,172,8,108,8,236,8,28,8,156,8,92,8,220,8,60,8,188,8,124,8,252,8,2,8,130,8,66,8,194,8,34,8,162,8,98,8,226,8,18,8,146,8,82,8,210,8,50,8,178,8,114,8,242,8,10,8,138,8,74,8,202,8,42,8,170,8,106,8,234,8,26,8,154,8,90,8,218,8,58,8,186,8,122,8,250,8,6,8,134,8,70,8,198,8,38,8,166,8,102,8,230,8,22,8,150,8,86,8,214,8,54,8,182,8,118,8,246,8,14,8,142,8,78,8,206,8,46,8,174,8,110,8,238,8,30,8,158,8,94,8,222,8,62,8,190,8,126,8,254,8,1,8,129,8,65,8,193,8,33,8,161,8,97,8,225,8,17,8,145,8,81,8,209,8,49,8,177,8,113,8,241,8,9,8,137,8,73,8,201,8,41,8,169,8,105,8,233,8,25,8,153,8,89,8,217,8,57,8,185,8,121,8,249,8,5,8,133,8,69,8,197,8,37,8,165,8,101,8,229,8,21,8,149,8,85,8,213,8,53,8,181,8,117,8,245,8,13,8,141,8,77,8,205,8,45,8,173,8,109,8,237,8,29,8,157,8,93,8,221,8,61,8,189,8,125,8,253,8,19,9,275,9,147,9,403,9,83,9,339,9,211,9,467,9,51,9,307,9,179,9,435,9,115,9,371,9,243,9,499,9,11,9,267,9,139,9,395,9,75,9,331,9,203,9,459,9,43,9,299,9,171,9,427,9,107,9,363,9,235,9,491,9,27,9,283,9,155,9,411,9,91,9,347,9,219,9,475,9,59,9,315,9,187,9,443,9,123,9,379,9,251,9,507,9,7,9,263,9,135,9,391,9,71,9,327,9,199,9,455,9,39,9,295,9,167,9,423,9,103,9,359,9,231,9,487,9,23,9,279,9,151,9,407,9,87,9,343,9,215,9,471,9,55,9,311,9,183,9,439,9,119,9,375,9,247,9,503,9,15,9,271,9,143,9,399,9,79,9,335,9,207,9,463,9,47,9,303,9,175,9,431,9,111,9,367,9,239,9,495,9,31,9,287,9,159,9,415,9,95,9,351,9,223,9,479,9,63,9,319,9,191,9,447,9,127,9,383,9,255,9,511,9,0,7,64,7,32,7,96,7,16,7,80,7,48,7,112,7,8,7,72,7,40,7,104,7,24,7,88,7,56,7,120,7,4,7,68,7,36,7,100,7,20,7,84,7,52,7,116,7,3,8,131,8,67,8,195,8,35,8,163,8,99,8,227,8],n.static_dtree=[0,5,16,5,8,5,24,5,4,5,20,5,12,5,28,5,2,5,18,5,10,5,26,5,6,5,22,5,14,5,30,5,1,5,17,5,9,5,25,5,5,5,21,5,13,5,29,5,3,5,19,5,11,5,27,5,7,5,23,5],n.static_l_desc=new n(n.static_ltree,t.extra_lbits,c+1,p,s),n.static_d_desc=new n(n.static_dtree,t.extra_dbits,0,l,s),n.static_bl_desc=new n(null,t.extra_blbits,0,u,7);var j=9,D=8,N=0,R=1,F=2,L=[new r(0,0,0,0,N),new r(4,4,8,4,R),new r(4,5,16,8,R),new r(4,6,32,32,R),new r(4,4,16,16,F),new r(8,16,32,32,F),new r(8,16,128,128,F),new r(8,32,128,256,F),new r(32,128,258,1024,F),new r(32,258,258,4096,F)],z=["need dictionary","stream end","","","stream error","data error","","buffer error","",""],B=0,q=1,V=2,U=3,H=32,G=42,W=113,Z=666,Y=8,X=0,K=1,Q=2,J=3,$=258,ee=$+J+1;return a.prototype={deflateInit:function(e,t){var n=this;return n.dstate=new i,t||(t=s),n.dstate.deflateInit(n,e,t)},deflate:function(e){var t=this;return t.dstate?t.dstate.deflate(t,e):T},deflateEnd:function(){var e=this;if(!e.dstate)return T;var t=e.dstate.deflateEnd();return e.dstate=null,t},deflateParams:function(e,t){var n=this;return n.dstate?n.dstate.deflateParams(n,e,t):T},deflateSetDictionary:function(e,t){var n=this;return n.dstate?n.dstate.deflateSetDictionary(n,e,t):T},read_buf:function(e,t,n){var r=this,o=r.avail_in;return o>n&&(o=n),0===o?0:(r.avail_in-=o,e.set(r.next_in.subarray(r.next_in_index,r.next_in_index+o),t),r.next_in_index+=o,r.total_in+=o,o)},flush_pending:function(){var e=this,t=e.dstate.pending;t>e.avail_out&&(t=e.avail_out),0!==t&&(e.next_out.set(e.dstate.pending_buf.subarray(e.dstate.pending_out,e.dstate.pending_out+t),e.next_out_index),e.next_out_index+=t,e.dstate.pending_out+=t,e.total_out+=t,e.avail_out-=t,e.dstate.pending-=t,0===e.dstate.pending&&(e.dstate.pending_out=0))}},function(e){var t=this,n=new a,r=_,o=new Uint8Array(512);void 0===e&&(e=y),n.deflateInit(e),n.next_out=o,t.append=function(e,t){var i,a=[],s=0,l=0,u=0;if(e.length){n.next_in_index=0,n.next_in=e,n.avail_in=e.length;do{if(n.next_out_index=0,n.avail_out=512,n.deflate(r)!=A)throw"deflating: "+n.msg;n.next_out_index&&(512==n.next_out_index?a.push(new Uint8Array(o)):a.push(new Uint8Array(o.subarray(0,n.next_out_index)))),u+=n.next_out_index,t&&n.next_in_index>0&&n.next_in_index!=s&&(t(n.next_in_index),s=n.next_in_index)}while(n.avail_in>0||0===n.avail_out);return i=new Uint8Array(u),a.forEach(function(e){i.set(e,l),l+=e.length}),i}},t.flush=function(){var e,t,r=[],i=0,a=0;do{if(n.next_out_index=0,n.avail_out=512,(e=n.deflate(k))!=E&&e!=A)throw"deflating: "+n.msg;512-n.avail_out>0&&r.push(new Uint8Array(o.subarray(0,n.next_out_index))),a+=n.next_out_index}while(n.avail_in>0||0===n.avail_out);return n.deflateEnd(),t=new Uint8Array(a),r.forEach(function(e){t.set(e,i),i+=e.length}),t}}}();!function(n){if("object"==typeof t&&void 0!==e)e.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var r;"undefined"!=typeof window?r=window:"undefined"!=typeof global?r=global:"undefined"!=typeof self&&(r=self),r.html2canvas=n()}}(function(){return function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){return o(t[a][1][e]||e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){(function(e){!function(r){function o(e){throw RangeError(I[e])}function i(e,t){for(var n=e.length;n--;)e[n]=t(e[n]);return e}function a(e,t){return i(e.split(O),t).join(".")}function s(e){for(var t,n,r=[],o=0,i=e.length;o<i;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<i?56320==(64512&(n=e.charCodeAt(o++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--):r.push(t);return r}function l(e){return i(e,function(e){var t="";return e>65535&&(t+=D((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=D(e)}).join("")}function u(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:w}function c(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function p(e,t,n){var r=0;for(e=n?j(e/C):e>>1,e+=j(e/t);e>P*_>>1;r+=w)e=j(e/P);return j(r+(P+1)*e/(e+S))}function f(e){var t,n,r,i,a,s,c,f,d,h,m=[],g=e.length,v=0,y=A,S=k;for((n=e.lastIndexOf(E))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&o("not-basic"),m.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<g;){for(a=v,s=1,c=w;i>=g&&o("invalid-input"),((f=u(e.charCodeAt(i++)))>=w||f>j((b-v)/s))&&o("overflow"),v+=f*s,d=c<=S?x:c>=S+_?_:c-S,!(f<d);c+=w)s>j(b/(h=w-d))&&o("overflow"),s*=h;S=p(v-a,t=m.length+1,0==a),j(v/t)>b-y&&o("overflow"),y+=j(v/t),v%=t,m.splice(v++,0,y)}return l(m)}function d(e){var t,n,r,i,a,l,u,f,d,h,m,g,v,y,S,C=[];for(g=(e=s(e)).length,t=A,n=0,a=k,l=0;l<g;++l)(m=e[l])<128&&C.push(D(m));for(r=i=C.length,i&&C.push(E);r<g;){for(u=b,l=0;l<g;++l)(m=e[l])>=t&&m<u&&(u=m);for(u-t>j((b-n)/(v=r+1))&&o("overflow"),n+=(u-t)*v,t=u,l=0;l<g;++l)if((m=e[l])<t&&++n>b&&o("overflow"),m==t){for(f=n,d=w;h=d<=a?x:d>=a+_?_:d-a,!(f<h);d+=w)S=f-h,y=w-h,C.push(D(c(h+S%y,0))),f=j(S/y);C.push(D(c(f,0))),a=p(n,v,r==i),n=0,++r}++n,++t}return C.join("")}var h="object"==typeof n&&n,m="object"==typeof t&&t&&t.exports==h&&t,g="object"==typeof e&&e;g.global!==g&&g.window!==g||(r=g);var v,y,b=2147483647,w=36,x=1,_=26,S=38,C=700,k=72,A=128,E="-",M=/^xn--/,T=/[^ -~]/,O=/\x2E|\u3002|\uFF0E|\uFF61/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},P=w-x,j=Math.floor,D=String.fromCharCode;if(v={version:"1.2.4",ucs2:{decode:s,encode:l},decode:f,encode:d,toASCII:function(e){return a(e,function(e){return T.test(e)?"xn--"+d(e):e})},toUnicode:function(e){return a(e,function(e){return M.test(e)?f(e.slice(4).toLowerCase()):e})}},h&&!h.nodeType)if(m)m.exports=v;else for(y in v)v.hasOwnProperty(y)&&(h[y]=v[y]);else r.punycode=v}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){function r(e,t,n){!e.defaultView||t===e.defaultView.pageXOffset&&n===e.defaultView.pageYOffset||e.defaultView.scrollTo(t,n)}function o(e,t){try{t&&(t.width=e.width,t.height=e.height,t.getContext("2d").putImageData(e.getContext("2d").getImageData(0,0,e.width,e.height),0,0))}catch(t){s("Unable to copy canvas content from",e,t)}}function i(e,t){for(var n=3===e.nodeType?document.createTextNode(e.nodeValue):e.cloneNode(!1),r=e.firstChild;r;)!0!==t&&1===r.nodeType&&"SCRIPT"===r.nodeName||n.appendChild(i(r,t)),r=r.nextSibling;return 1===e.nodeType&&(n._scrollTop=e.scrollTop,n._scrollLeft=e.scrollLeft,"CANVAS"===e.nodeName?o(e,n):"TEXTAREA"!==e.nodeName&&"SELECT"!==e.nodeName||(n.value=e.value)),n}function a(e){if(1===e.nodeType){e.scrollTop=e._scrollTop,e.scrollLeft=e._scrollLeft;for(var t=e.firstChild;t;)a(t),t=t.nextSibling}}var s=e("./log");t.exports=function(e,t,n,o,s,l,u){var c=i(e.documentElement,s.javascriptEnabled),p=t.createElement("iframe");return p.className="html2canvas-container",p.style.visibility="hidden",p.style.position="fixed",p.style.left="-10000px",p.style.top="0px",p.style.border="0",p.width=n,p.height=o,p.scrolling="no",t.body.appendChild(p),new Promise(function(t){var n=p.contentWindow.document;p.contentWindow.onload=p.onload=function(){var e=setInterval(function(){n.body.childNodes.length>0&&(a(n.documentElement),clearInterval(e),"view"===s.type&&(p.contentWindow.scrollTo(l,u),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||p.contentWindow.scrollY===u&&p.contentWindow.scrollX===l||(n.documentElement.style.top=-u+"px",n.documentElement.style.left=-l+"px",n.documentElement.style.position="absolute")),t(p))},50)},n.open(),n.write("<!DOCTYPE html><html></html>"),r(e,l,u),n.replaceChild(n.adoptNode(c),n.documentElement),n.close()})}},{"./log":13}],3:[function(e,t,n){function r(e){this.r=0,this.g=0,this.b=0,this.a=null,this.fromArray(e)||this.namedColor(e)||this.rgb(e)||this.rgba(e)||this.hex6(e)||this.hex3(e)}r.prototype.darken=function(e){var t=1-e;return new r([Math.round(this.r*t),Math.round(this.g*t),Math.round(this.b*t),this.a])},r.prototype.isTransparent=function(){return 0===this.a},r.prototype.isBlack=function(){return 0===this.r&&0===this.g&&0===this.b},r.prototype.fromArray=function(e){return Array.isArray(e)&&(this.r=Math.min(e[0],255),this.g=Math.min(e[1],255),this.b=Math.min(e[2],255),e.length>3&&(this.a=e[3])),Array.isArray(e)};var o=/^#([a-f0-9]{3})$/i;r.prototype.hex3=function(e){var t=null;return null!==(t=e.match(o))&&(this.r=parseInt(t[1][0]+t[1][0],16),this.g=parseInt(t[1][1]+t[1][1],16),this.b=parseInt(t[1][2]+t[1][2],16)),null!==t};var i=/^#([a-f0-9]{6})$/i;r.prototype.hex6=function(e){var t=null;return null!==(t=e.match(i))&&(this.r=parseInt(t[1].substring(0,2),16),this.g=parseInt(t[1].substring(2,4),16),this.b=parseInt(t[1].substring(4,6),16)),null!==t};var a=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/;r.prototype.rgb=function(e){var t=null;return null!==(t=e.match(a))&&(this.r=Number(t[1]),this.g=Number(t[2]),this.b=Number(t[3])),null!==t};var s=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/;r.prototype.rgba=function(e){var t=null;return null!==(t=e.match(s))&&(this.r=Number(t[1]),this.g=Number(t[2]),this.b=Number(t[3]),this.a=Number(t[4])),null!==t},r.prototype.toString=function(){return null!==this.a&&1!==this.a?"rgba("+[this.r,this.g,this.b,this.a].join(",")+")":"rgb("+[this.r,this.g,this.b].join(",")+")"},r.prototype.namedColor=function(e){e=e.toLowerCase();var t=l[e];if(t)this.r=t[0],this.g=t[1],this.b=t[2];else if("transparent"===e)return this.r=this.g=this.b=this.a=0,!0;return!!t},r.prototype.isColor=!0;var l={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};t.exports=r},{}],4:[function(e,t,n){function r(e,t){var n=_++;if((t=t||{}).logging&&(g.options.logging=!0,g.options.start=Date.now()),t.async=void 0===t.async||t.async,t.allowTaint=void 0!==t.allowTaint&&t.allowTaint,t.removeContainer=void 0===t.removeContainer||t.removeContainer,t.javascriptEnabled=void 0!==t.javascriptEnabled&&t.javascriptEnabled,t.imageTimeout=void 0===t.imageTimeout?1e4:t.imageTimeout,t.renderer="function"==typeof t.renderer?t.renderer:f,t.strict=!!t.strict,"string"==typeof e){if("string"!=typeof t.proxy)return Promise.reject("Proxy must be used when rendering url");var r=null!=t.width?t.width:window.innerWidth,a=null!=t.height?t.height:window.innerHeight;return b(c(e),t.proxy,document,r,a,t).then(function(e){return i(e.contentWindow.document.documentElement,e,t,r,a)})}var s=(void 0===e?[document.documentElement]:e.length?e:[e])[0];return s.setAttribute(x+n,n),o(s.ownerDocument,t,s.ownerDocument.defaultView.innerWidth,s.ownerDocument.defaultView.innerHeight,n).then(function(e){return"function"==typeof t.onrendered&&(g("options.onrendered is deprecated, html2canvas returns a Promise containing the canvas"),t.onrendered(e)),e})}function o(e,t,n,r,o){return y(e,e,n,r,t,e.defaultView.pageXOffset,e.defaultView.pageYOffset).then(function(a){g("Document cloned");var s=x+o,l="["+s+"='"+o+"']";e.querySelector(l).removeAttribute(s);var u=a.contentWindow,c=u.document.querySelector(l);return("function"==typeof t.onclone?Promise.resolve(t.onclone(u.document)):Promise.resolve(!0)).then(function(){return i(c,a,t,n,r)})})}function i(e,t,n,r,o){var i=t.contentWindow,c=new p(i.document),f=new d(n,c),m=w(e),v="view"===n.type?r:l(i.document),y="view"===n.type?o:u(i.document),b=new n.renderer(v,y,f,n,document);return new h(e,b,c,f,n).ready.then(function(){g("Finished rendering");var r;return r="view"===n.type?s(b.canvas,{width:b.canvas.width,height:b.canvas.height,top:0,left:0,x:0,y:0}):e===i.document.body||e===i.document.documentElement||null!=n.canvas?b.canvas:s(b.canvas,{width:null!=n.width?n.width:m.width,height:null!=n.height?n.height:m.height,top:m.top,left:m.left,x:0,y:0}),a(t,n),r})}function a(e,t){t.removeContainer&&(e.parentNode.removeChild(e),g("Cleaned up container"))}function s(e,t){var n=document.createElement("canvas"),r=Math.min(e.width-1,Math.max(0,t.left)),o=Math.min(e.width,Math.max(1,t.left+t.width)),i=Math.min(e.height-1,Math.max(0,t.top)),a=Math.min(e.height,Math.max(1,t.top+t.height));n.width=t.width,n.height=t.height;var s=o-r,l=a-i;return g("Cropping canvas at:","left:",t.left,"top:",t.top,"width:",s,"height:",l),g("Resulting crop with width",t.width,"and height",t.height,"with x",r,"and y",i),n.getContext("2d").drawImage(e,r,i,s,l,t.x,t.y,s,l),n}function l(e){return Math.max(Math.max(e.body.scrollWidth,e.documentElement.scrollWidth),Math.max(e.body.offsetWidth,e.documentElement.offsetWidth),Math.max(e.body.clientWidth,e.documentElement.clientWidth))}function u(e){return Math.max(Math.max(e.body.scrollHeight,e.documentElement.scrollHeight),Math.max(e.body.offsetHeight,e.documentElement.offsetHeight),Math.max(e.body.clientHeight,e.documentElement.clientHeight))}function c(e){var t=document.createElement("a");return t.href=e,t.href=t.href,t}var p=e("./support"),f=e("./renderers/canvas"),d=e("./imageloader"),h=e("./nodeparser"),m=e("./nodecontainer"),g=e("./log"),v=e("./utils"),y=e("./clone"),b=e("./proxy").loadUrlDocument,w=v.getBounds,x="data-html2canvas-node",_=0;r.CanvasRenderer=f,r.NodeContainer=m,r.log=g,r.utils=v;var S="undefined"==typeof document||"function"!=typeof Object.create||"function"!=typeof document.createElement("canvas").getContext?function(){return Promise.reject("No canvas support")}:r;t.exports=S},{"./clone":2,"./imageloader":11,"./log":13,"./nodecontainer":14,"./nodeparser":15,"./proxy":16,"./renderers/canvas":20,"./support":22,"./utils":26}],5:[function(e,t,n){function r(e){if(this.src=e,o("DummyImageContainer for",e),!this.promise||!this.image){o("Initiating DummyImageContainer"),r.prototype.image=new Image;var t=this.image;r.prototype.promise=new Promise(function(e,n){t.onload=e,t.onerror=n,t.src=i(),!0===t.complete&&e(t)})}}var o=e("./log"),i=e("./utils").smallImage;t.exports=r},{"./log":13,"./utils":26}],6:[function(e,t,n){var r=e("./utils").smallImage;t.exports=function(e,t){var n,o,i=document.createElement("div"),a=document.createElement("img"),s=document.createElement("span");i.style.visibility="hidden",i.style.fontFamily=e,i.style.fontSize=t,i.style.margin=0,i.style.padding=0,document.body.appendChild(i),a.src=r(),a.width=1,a.height=1,a.style.margin=0,a.style.padding=0,a.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=t,s.style.margin=0,s.style.padding=0,s.appendChild(document.createTextNode("Hidden Text")),i.appendChild(s),i.appendChild(a),n=a.offsetTop-s.offsetTop+1,i.removeChild(s),i.appendChild(document.createTextNode("Hidden Text")),i.style.lineHeight="normal",a.style.verticalAlign="super",o=a.offsetTop-i.offsetTop+1,document.body.removeChild(i),this.baseline=n,this.lineWidth=1,this.middle=o}},{"./utils":26}],7:[function(e,t,n){function r(){this.data={}}var o=e("./font");r.prototype.getMetrics=function(e,t){return void 0===this.data[e+"-"+t]&&(this.data[e+"-"+t]=new o(e,t)),this.data[e+"-"+t]},t.exports=r},{"./font":6}],8:[function(e,t,n){function r(t,n,r){this.image=null,this.src=t;var i=this,a=o(t);this.promise=(n?new Promise(function(e){"about:blank"===t.contentWindow.document.URL||null==t.contentWindow.document.documentElement?t.contentWindow.onload=t.onload=function(){e(t)}:e(t)}):this.proxyLoad(r.proxy,a,r)).then(function(t){return e("./core")(t.contentWindow.document.documentElement,{type:"view",width:t.width,height:t.height,proxy:r.proxy,javascriptEnabled:r.javascriptEnabled,removeContainer:r.removeContainer,allowTaint:r.allowTaint,imageTimeout:r.imageTimeout/2})}).then(function(e){return i.image=e})}var o=e("./utils").getBounds,i=e("./proxy").loadUrlDocument;r.prototype.proxyLoad=function(e,t,n){var r=this.src;return i(r.src,e,r.ownerDocument,t.width,t.height,n)},t.exports=r},{"./core":4,"./proxy":16,"./utils":26}],9:[function(e,t,n){function r(e){this.src=e.value,this.colorStops=[],this.type=null,this.x0=.5,this.y0=.5,this.x1=.5,this.y1=.5,this.promise=Promise.resolve(!0)}r.TYPES={LINEAR:1,RADIAL:2},r.REGEXP_COLORSTOP=/^\s*(rgba?\(\s*\d{1,3},\s*\d{1,3},\s*\d{1,3}(?:,\s*[0-9\.]+)?\s*\)|[a-z]{3,20}|#[a-f0-9]{3,6})(?:\s+(\d{1,3}(?:\.\d+)?)(%|px)?)?(?:\s|$)/i,t.exports=r},{}],10:[function(e,t,n){t.exports=function(e,t){this.src=e,this.image=new Image;var n=this;this.tainted=null,this.promise=new Promise(function(r,o){n.image.onload=r,n.image.onerror=o,t&&(n.image.crossOrigin="anonymous"),n.image.src=e,!0===n.image.complete&&r(n.image)})}},{}],11:[function(e,t,n){function r(e,t){this.link=null,this.options=e,this.support=t,this.origin=this.getOrigin(window.location.href)}var o=e("./log"),i=e("./imagecontainer"),a=e("./dummyimagecontainer"),s=e("./proxyimagecontainer"),l=e("./framecontainer"),u=e("./svgcontainer"),c=e("./svgnodecontainer"),p=e("./lineargradientcontainer"),f=e("./webkitgradientcontainer"),d=e("./utils").bind;r.prototype.findImages=function(e){var t=[];return e.reduce(function(e,t){switch(t.node.nodeName){case"IMG":return e.concat([{args:[t.node.src],method:"url"}]);case"svg":case"IFRAME":return e.concat([{args:[t.node],method:t.node.nodeName}])}return e},[]).forEach(this.addImage(t,this.loadImage),this),t},r.prototype.findBackgroundImage=function(e,t){return t.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(e,this.loadImage),this),e},r.prototype.addImage=function(e,t){return function(n){n.args.forEach(function(r){this.imageExists(e,r)||(e.splice(0,0,t.call(this,n)),o("Added image #"+e.length,"string"==typeof r?r.substring(0,100):r))},this)}},r.prototype.hasImageBackground=function(e){return"none"!==e.method},r.prototype.loadImage=function(e){if("url"===e.method){var t=e.args[0];return!this.isSVG(t)||this.support.svg||this.options.allowTaint?t.match(/data:image\/.*;base64,/i)?new i(t.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),!1):this.isSameOrigin(t)||!0===this.options.allowTaint||this.isSVG(t)?new i(t,!1):this.support.cors&&!this.options.allowTaint&&this.options.useCORS?new i(t,!0):this.options.proxy?new s(t,this.options.proxy):new a(t):new u(t)}return"linear-gradient"===e.method?new p(e):"gradient"===e.method?new f(e):"svg"===e.method?new c(e.args[0],this.support.svg):"IFRAME"===e.method?new l(e.args[0],this.isSameOrigin(e.args[0].src),this.options):new a(e)},r.prototype.isSVG=function(e){return"svg"===e.substring(e.length-3).toLowerCase()||u.prototype.isInline(e)},r.prototype.imageExists=function(e,t){return e.some(function(e){return e.src===t})},r.prototype.isSameOrigin=function(e){return this.getOrigin(e)===this.origin},r.prototype.getOrigin=function(e){var t=this.link||(this.link=document.createElement("a"));return t.href=e,t.href=t.href,t.protocol+t.hostname+t.port},r.prototype.getPromise=function(e){return this.timeout(e,this.options.imageTimeout).catch(function(){return new a(e.src).promise.then(function(t){e.image=t})})},r.prototype.get=function(e){var t=null;return this.images.some(function(n){return(t=n).src===e})?t:null},r.prototype.fetch=function(e){return this.images=e.reduce(d(this.findBackgroundImage,this),this.findImages(e)),this.images.forEach(function(e,t){e.promise.then(function(){o("Succesfully loaded image #"+(t+1),e)},function(n){o("Failed loading image #"+(t+1),e,n)})}),this.ready=Promise.all(this.images.map(this.getPromise,this)),o("Finished searching images"),this},r.prototype.timeout=function(e,t){var n,r=Promise.race([e.promise,new Promise(function(r,i){n=setTimeout(function(){o("Timed out loading image",e),i(e)},t)})]).then(function(e){return clearTimeout(n),e});return r.catch(function(){clearTimeout(n)}),r},t.exports=r},{"./dummyimagecontainer":5,"./framecontainer":8,"./imagecontainer":10,"./lineargradientcontainer":12,"./log":13,"./proxyimagecontainer":17,"./svgcontainer":23,"./svgnodecontainer":24,"./utils":26,"./webkitgradientcontainer":27}],12:[function(e,t,n){function r(e){o.apply(this,arguments),this.type=o.TYPES.LINEAR;var t=r.REGEXP_DIRECTION.test(e.args[0])||!o.REGEXP_COLORSTOP.test(e.args[0]);t?e.args[0].split(/\s+/).reverse().forEach(function(e,t){switch(e){case"left":this.x0=0,this.x1=1;break;case"top":this.y0=0,this.y1=1;break;case"right":this.x0=1,this.x1=0;break;case"bottom":this.y0=1,this.y1=0;break;case"to":var n=this.y0,r=this.x0;this.y0=this.y1,this.x0=this.x1,this.x1=r,this.y1=n;break;case"center":break;default:var o=.01*parseFloat(e,10);if(isNaN(o))break;0===t?(this.y0=o,this.y1=1-this.y0):(this.x0=o,this.x1=1-this.x0)}},this):(this.y0=0,this.y1=1),this.colorStops=e.args.slice(t?1:0).map(function(e){var t=e.match(o.REGEXP_COLORSTOP),n=+t[2],r=0===n?"%":t[3];return{color:new i(t[1]),stop:"%"===r?n/100:null}}),null===this.colorStops[0].stop&&(this.colorStops[0].stop=0),null===this.colorStops[this.colorStops.length-1].stop&&(this.colorStops[this.colorStops.length-1].stop=1),this.colorStops.forEach(function(e,t){null===e.stop&&this.colorStops.slice(t).some(function(n,r){return null!==n.stop&&(e.stop=(n.stop-this.colorStops[t-1].stop)/(r+1)+this.colorStops[t-1].stop,!0)},this)},this)}var o=e("./gradientcontainer"),i=e("./color");r.prototype=Object.create(o.prototype),r.REGEXP_DIRECTION=/^\s*(?:to|left|right|top|bottom|center|\d{1,3}(?:\.\d+)?%?)(?:\s|$)/i,t.exports=r},{"./color":3,"./gradientcontainer":9}],13:[function(e,t,n){var r=function(){r.options.logging&&window.console&&window.console.log&&Function.prototype.bind.call(window.console.log,window.console).apply(window.console,[Date.now()-r.options.start+"ms","html2canvas:"].concat([].slice.call(arguments,0)))};r.options={logging:!1},t.exports=r},{}],14:[function(e,t,n){function r(e,t){this.node=e,this.parent=t,this.stack=null,this.bounds=null,this.borders=null,this.clip=[],this.backgroundClip=[],this.offsetBounds=null,this.visible=null,this.computedStyles=null,this.colors={},this.styles={},this.backgroundImages=null,this.transformData=null,this.transformMatrix=null,this.isPseudoElement=!1,this.opacity=null}function o(e){var t=e.options[e.selectedIndex||0];return t?t.text||"":""}function i(e){if(e&&"matrix"===e[1])return e[2].split(",").map(function(e){return parseFloat(e.trim())});if(e&&"matrix3d"===e[1]){var t=e[2].split(",").map(function(e){return parseFloat(e.trim())});return[t[0],t[1],t[4],t[5],t[12],t[13]]}}function a(e){return-1!==e.toString().indexOf("%")}function s(e){return e.replace("px","")}function l(e){return parseFloat(e)}var u=e("./color"),c=e("./utils"),p=c.getBounds,f=c.parseBackgrounds,d=c.offsetBounds;r.prototype.cloneTo=function(e){e.visible=this.visible,e.borders=this.borders,e.bounds=this.bounds,e.clip=this.clip,e.backgroundClip=this.backgroundClip,e.computedStyles=this.computedStyles,e.styles=this.styles,e.backgroundImages=this.backgroundImages,e.opacity=this.opacity},r.prototype.getOpacity=function(){return null===this.opacity?this.opacity=this.cssFloat("opacity"):this.opacity},r.prototype.assignStack=function(e){this.stack=e,e.children.push(this)},r.prototype.isElementVisible=function(){return this.node.nodeType===Node.TEXT_NODE?this.parent.visible:"none"!==this.css("display")&&"hidden"!==this.css("visibility")&&!this.node.hasAttribute("data-html2canvas-ignore")&&("INPUT"!==this.node.nodeName||"hidden"!==this.node.getAttribute("type"))},r.prototype.css=function(e){return this.computedStyles||(this.computedStyles=this.isPseudoElement?this.parent.computedStyle(this.before?":before":":after"):this.computedStyle(null)),this.styles[e]||(this.styles[e]=this.computedStyles[e])},r.prototype.prefixedCss=function(e){var t=["webkit","moz","ms","o"],n=this.css(e);return void 0===n&&t.some(function(t){return void 0!==(n=this.css(t+e.substr(0,1).toUpperCase()+e.substr(1)))},this),void 0===n?null:n},r.prototype.computedStyle=function(e){return this.node.ownerDocument.defaultView.getComputedStyle(this.node,e)},r.prototype.cssInt=function(e){var t=parseInt(this.css(e),10);return isNaN(t)?0:t},r.prototype.color=function(e){return this.colors[e]||(this.colors[e]=new u(this.css(e)))},r.prototype.cssFloat=function(e){var t=parseFloat(this.css(e));return isNaN(t)?0:t},r.prototype.fontWeight=function(){var e=this.css("fontWeight");switch(parseInt(e,10)){case 401:e="bold";break;case 400:e="normal"}return e},r.prototype.parseClip=function(){var e=this.css("clip").match(this.CLIP);return e?{top:parseInt(e[1],10),right:parseInt(e[2],10),bottom:parseInt(e[3],10),left:parseInt(e[4],10)}:null},r.prototype.parseBackgroundImages=function(){return this.backgroundImages||(this.backgroundImages=f(this.css("backgroundImage")))},r.prototype.cssList=function(e,t){var n=(this.css(e)||"").split(",");return n=n[t||0]||n[0]||"auto",1===(n=n.trim().split(" ")).length&&(n=[n[0],a(n[0])?"auto":n[0]]),n},r.prototype.parseBackgroundSize=function(e,t,n){var r,o,i=this.cssList("backgroundSize",n);if(a(i[0]))r=e.width*parseFloat(i[0])/100;else{if(/contain|cover/.test(i[0])){var s=e.width/e.height,l=t.width/t.height;return s<l^"contain"===i[0]?{width:e.height*l,height:e.height}:{width:e.width,height:e.width/l}}r=parseInt(i[0],10)}return o="auto"===i[0]&&"auto"===i[1]?t.height:"auto"===i[1]?r/t.width*t.height:a(i[1])?e.height*parseFloat(i[1])/100:parseInt(i[1],10),"auto"===i[0]&&(r=o/t.height*t.width),{width:r,height:o}},r.prototype.parseBackgroundPosition=function(e,t,n,r){var o,i,s=this.cssList("backgroundPosition",n);return o=a(s[0])?(e.width-(r||t).width)*(parseFloat(s[0])/100):parseInt(s[0],10),i="auto"===s[1]?o/t.width*t.height:a(s[1])?(e.height-(r||t).height)*parseFloat(s[1])/100:parseInt(s[1],10),"auto"===s[0]&&(o=i/t.height*t.width),{left:o,top:i}},r.prototype.parseBackgroundRepeat=function(e){return this.cssList("backgroundRepeat",e)[0]},r.prototype.parseTextShadows=function(){var e=this.css("textShadow"),t=[];if(e&&"none"!==e)for(var n=e.match(this.TEXT_SHADOW_PROPERTY),r=0;n&&r<n.length;r++){var o=n[r].match(this.TEXT_SHADOW_VALUES);t.push({color:new u(o[0]),offsetX:o[1]?parseFloat(o[1].replace("px","")):0,offsetY:o[2]?parseFloat(o[2].replace("px","")):0,blur:o[3]?o[3].replace("px",""):0})}return t},r.prototype.parseTransform=function(){if(!this.transformData)if(this.hasTransform()){var e=this.parseBounds(),t=this.prefixedCss("transformOrigin").split(" ").map(s).map(l);t[0]+=e.left,t[1]+=e.top,this.transformData={origin:t,matrix:this.parseTransformMatrix()}}else this.transformData={origin:[0,0],matrix:[1,0,0,1,0,0]};return this.transformData},r.prototype.parseTransformMatrix=function(){if(!this.transformMatrix){var e=this.prefixedCss("transform"),t=e?i(e.match(this.MATRIX_PROPERTY)):null;this.transformMatrix=t||[1,0,0,1,0,0]}return this.transformMatrix},r.prototype.parseBounds=function(){return this.bounds||(this.bounds=this.hasTransform()?d(this.node):p(this.node))},r.prototype.hasTransform=function(){return"1,0,0,1,0,0"!==this.parseTransformMatrix().join(",")||this.parent&&this.parent.hasTransform()},r.prototype.getValue=function(){var e=this.node.value||"";return"SELECT"===this.node.tagName?e=o(this.node):"password"===this.node.type&&(e=Array(e.length+1).join("")),0===e.length?this.node.placeholder||"":e},r.prototype.MATRIX_PROPERTY=/(matrix|matrix3d)\((.+)\)/,r.prototype.TEXT_SHADOW_PROPERTY=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,r.prototype.TEXT_SHADOW_VALUES=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g,r.prototype.CLIP=/^rect\((\d+)px,? (\d+)px,? (\d+)px,? (\d+)px\)$/,t.exports=r},{"./color":3,"./utils":26}],15:[function(e,t,n){function r(e,t,n,r,o){B("Starting NodeParser"),this.renderer=t,this.options=o,this.range=null,this.support=n,this.renderQueue=[],this.stack=new Z(!0,1,e.ownerDocument,null);var i=new V(e,null);if(o.background&&t.rectangle(0,0,t.width,t.height,new W(o.background)),e===e.ownerDocument.documentElement){var a=new V(i.color("backgroundColor").isTransparent()?e.ownerDocument.body:e.ownerDocument.documentElement,null);t.rectangle(0,0,t.width,t.height,a.color("backgroundColor"))}i.visibile=i.isElementVisible(),this.createPseudoHideStyles(e.ownerDocument),this.disableAnimations(e.ownerDocument),this.nodes=N([i].concat(this.getChildren(i)).filter(function(e){return e.visible=e.isElementVisible()}).map(this.getPseudoElements,this)),this.fontMetrics=new G,B("Fetched nodes, total:",this.nodes.length),B("Calculate overflow clips"),this.calculateOverflowClips(),B("Start fetching images"),this.images=r.fetch(this.nodes.filter(E)),this.ready=this.images.ready.then(X(function(){return B("Images loaded, starting parsing"),B("Creating stacking contexts"),this.createStackingContexts(),B("Sorting stacking contexts"),this.sortStackingContexts(this.stack),this.parse(this.stack),B("Render queue created with "+this.renderQueue.length+" items"),new Promise(X(function(e){o.async?"function"==typeof o.async?o.async.call(this,this.renderQueue,e):this.renderQueue.length>0?(this.renderIndex=0,this.asyncRenderer(this.renderQueue,e)):e():(this.renderQueue.forEach(this.paint,this),e())},this))},this))}function o(e){return e.parent&&e.parent.clip.length}function i(e){return e.replace(/(\-[a-z])/g,function(e){return e.toUpperCase().replace("-","")})}function a(){}function s(e,t,n,r){return e.map(function(o,i){if(o.width>0){var a=t.left,s=t.top,l=t.width,u=t.height-e[2].width;switch(i){case 0:u=e[0].width,o.args=p({c1:[a,s],c2:[a+l,s],c3:[a+l-e[1].width,s+u],c4:[a+e[3].width,s+u]},r[0],r[1],n.topLeftOuter,n.topLeftInner,n.topRightOuter,n.topRightInner);break;case 1:a=t.left+t.width-e[1].width,l=e[1].width,o.args=p({c1:[a+l,s],c2:[a+l,s+u+e[2].width],c3:[a,s+u],c4:[a,s+e[0].width]},r[1],r[2],n.topRightOuter,n.topRightInner,n.bottomRightOuter,n.bottomRightInner);break;case 2:s=s+t.height-e[2].width,u=e[2].width,o.args=p({c1:[a+l,s+u],c2:[a,s+u],c3:[a+e[3].width,s],c4:[a+l-e[3].width,s]},r[2],r[3],n.bottomRightOuter,n.bottomRightInner,n.bottomLeftOuter,n.bottomLeftInner);break;case 3:l=e[3].width,o.args=p({c1:[a,s+u+e[2].width],c2:[a,s],c3:[a+l,s+e[0].width],c4:[a+l,s+u]},r[3],r[0],n.bottomLeftOuter,n.bottomLeftInner,n.topLeftOuter,n.topLeftInner)}}return o})}function l(e,t,n,r){var o=(Math.sqrt(2)-1)/3*4,i=n*o,a=r*o,s=e+n,l=t+r;return{topLeft:c({x:e,y:l},{x:e,y:l-a},{x:s-i,y:t},{x:s,y:t}),topRight:c({x:e,y:t},{x:e+i,y:t},{x:s,y:l-a},{x:s,y:l}),bottomRight:c({x:s,y:t},{x:s,y:t+a},{x:e+i,y:l},{x:e,y:l}),bottomLeft:c({x:s,y:l},{x:s-i,y:l},{x:e,y:t+a},{x:e,y:t})}}function u(e,t,n){var r=e.left,o=e.top,i=e.width,a=e.height,s=t[0][0]<i/2?t[0][0]:i/2,u=t[0][1]<a/2?t[0][1]:a/2,c=t[1][0]<i/2?t[1][0]:i/2,p=t[1][1]<a/2?t[1][1]:a/2,f=t[2][0]<i/2?t[2][0]:i/2,d=t[2][1]<a/2?t[2][1]:a/2,h=t[3][0]<i/2?t[3][0]:i/2,m=t[3][1]<a/2?t[3][1]:a/2,g=i-c,v=a-d,y=i-f,b=a-m;return{topLeftOuter:l(r,o,s,u).topLeft.subdivide(.5),topLeftInner:l(r+n[3].width,o+n[0].width,Math.max(0,s-n[3].width),Math.max(0,u-n[0].width)).topLeft.subdivide(.5),topRightOuter:l(r+g,o,c,p).topRight.subdivide(.5),topRightInner:l(r+Math.min(g,i+n[3].width),o+n[0].width,g>i+n[3].width?0:c-n[3].width,p-n[0].width).topRight.subdivide(.5),bottomRightOuter:l(r+y,o+v,f,d).bottomRight.subdivide(.5),bottomRightInner:l(r+Math.min(y,i-n[3].width),o+Math.min(v,a+n[0].width),Math.max(0,f-n[1].width),d-n[2].width).bottomRight.subdivide(.5),bottomLeftOuter:l(r,o+b,h,m).bottomLeft.subdivide(.5),bottomLeftInner:l(r+n[3].width,o+b,Math.max(0,h-n[3].width),m-n[2].width).bottomLeft.subdivide(.5)}}function c(e,t,n,r){var o=function(e,t,n){return{x:e.x+(t.x-e.x)*n,y:e.y+(t.y-e.y)*n}};return{start:e,startControl:t,endControl:n,end:r,subdivide:function(i){var a=o(e,t,i),s=o(t,n,i),l=o(n,r,i),u=o(a,s,i),p=o(s,l,i),f=o(u,p,i);return[c(e,a,u,f),c(f,p,l,r)]},curveTo:function(e){e.push(["bezierCurve",t.x,t.y,n.x,n.y,r.x,r.y])},curveToReversed:function(r){r.push(["bezierCurve",n.x,n.y,t.x,t.y,e.x,e.y])}}}function p(e,t,n,r,o,i,a){var s=[];return t[0]>0||t[1]>0?(s.push(["line",r[1].start.x,r[1].start.y]),r[1].curveTo(s)):s.push(["line",e.c1[0],e.c1[1]]),n[0]>0||n[1]>0?(s.push(["line",i[0].start.x,i[0].start.y]),i[0].curveTo(s),s.push(["line",a[0].end.x,a[0].end.y]),a[0].curveToReversed(s)):(s.push(["line",e.c2[0],e.c2[1]]),s.push(["line",e.c3[0],e.c3[1]])),t[0]>0||t[1]>0?(s.push(["line",o[1].end.x,o[1].end.y]),o[1].curveToReversed(s)):s.push(["line",e.c4[0],e.c4[1]]),s}function f(e,t,n,r,o,i,a){t[0]>0||t[1]>0?(e.push(["line",r[0].start.x,r[0].start.y]),r[0].curveTo(e),r[1].curveTo(e)):e.push(["line",i,a]),(n[0]>0||n[1]>0)&&e.push(["line",o[0].start.x,o[0].start.y])}function d(e){return e.cssInt("zIndex")<0}function h(e){return e.cssInt("zIndex")>0}function m(e){return 0===e.cssInt("zIndex")}function g(e){return-1!==["inline","inline-block","inline-table"].indexOf(e.css("display"))}function v(e){return e instanceof Z}function y(e){return e.node.data.trim().length>0}function b(e){return/^(normal|none|0px)$/.test(e.parent.css("letterSpacing"))}function w(e){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(t){var n=e.css("border"+t+"Radius").split(" ");return n.length<=1&&(n[1]=n[0]),n.map(P)})}function x(e){return e.nodeType===Node.TEXT_NODE||e.nodeType===Node.ELEMENT_NODE}function _(e){return"auto"!==(-1!==["absolute","relative","fixed"].indexOf(e.css("position"))?e.css("zIndex"):"auto")}function S(e){return"static"!==e.css("position")}function C(e){return"none"!==e.css("float")}function k(e){return-1!==["inline-block","inline-table"].indexOf(e.css("display"))}function A(e){var t=this;return function(){return!e.apply(t,arguments)}}function E(e){return e.node.nodeType===Node.ELEMENT_NODE}function M(e){return!0===e.isPseudoElement}function T(e){return e.node.nodeType===Node.TEXT_NODE}function O(e){return function(t,n){return t.cssInt("zIndex")+e.indexOf(t)/e.length-(n.cssInt("zIndex")+e.indexOf(n)/e.length)}}function I(e){return e.getOpacity()<1}function P(e){return parseInt(e,10)}function j(e){return e.width}function D(e){return e.node.nodeType!==Node.ELEMENT_NODE||-1===["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"].indexOf(e.node.nodeName)}function N(e){return[].concat.apply([],e)}function R(e){var t=e.substr(0,1);return t===e.substr(e.length-1)&&t.match(/'|"/)?e.substr(1,e.length-2):e}function F(e){for(var t,n=[],r=0,o=!1;e.length;)L(e[r])===o?((t=e.splice(0,r)).length&&n.push(q.ucs2.encode(t)),o=!o,r=0):r++,r>=e.length&&(t=e.splice(0,r)).length&&n.push(q.ucs2.encode(t));return n}function L(e){return-1!==[32,13,10,9,45].indexOf(e)}function z(e){return/[^\u0000-\u00ff]/.test(e)}var B=e("./log"),q=e("punycode"),V=e("./nodecontainer"),U=e("./textcontainer"),H=e("./pseudoelementcontainer"),G=e("./fontmetrics"),W=e("./color"),Z=e("./stackingcontext"),Y=e("./utils"),X=Y.bind,K=Y.getBounds,Q=Y.parseBackgrounds,J=Y.offsetBounds;r.prototype.calculateOverflowClips=function(){this.nodes.forEach(function(e){if(E(e)){M(e)&&e.appendToDOM(),e.borders=this.parseBorders(e);var t="hidden"===e.css("overflow")?[e.borders.clip]:[],n=e.parseClip();n&&-1!==["absolute","fixed"].indexOf(e.css("position"))&&t.push([["rect",e.bounds.left+n.left,e.bounds.top+n.top,n.right-n.left,n.bottom-n.top]]),e.clip=o(e)?e.parent.clip.concat(t):t,e.backgroundClip="hidden"!==e.css("overflow")?e.clip.concat([e.borders.clip]):e.clip,M(e)&&e.cleanDOM()}else T(e)&&(e.clip=o(e)?e.parent.clip:[]);M(e)||(e.bounds=null)},this)},r.prototype.asyncRenderer=function(e,t,n){n=n||Date.now(),this.paint(e[this.renderIndex++]),e.length===this.renderIndex?t():n+20>Date.now()?this.asyncRenderer(e,t,n):setTimeout(X(function(){this.asyncRenderer(e,t)},this),0)},r.prototype.createPseudoHideStyles=function(e){this.createStyles(e,"."+H.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+':before { content: "" !important; display: none !important; }.'+H.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER+':after { content: "" !important; display: none !important; }')},r.prototype.disableAnimations=function(e){this.createStyles(e,"* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; -webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}")},r.prototype.createStyles=function(e,t){var n=e.createElement("style");n.innerHTML=t,e.body.appendChild(n)},r.prototype.getPseudoElements=function(e){var t=[[e]];if(e.node.nodeType===Node.ELEMENT_NODE){var n=this.getPseudoElement(e,":before"),r=this.getPseudoElement(e,":after");n&&t.push(n),r&&t.push(r)}return N(t)},r.prototype.getPseudoElement=function(e,t){var n=e.computedStyle(t);if(!n||!n.content||"none"===n.content||"-moz-alt-content"===n.content||"none"===n.display)return null;for(var r=R(n.content),o="url"===r.substr(0,3),a=document.createElement(o?"img":"html2canvaspseudoelement"),s=new H(a,e,t),l=n.length-1;l>=0;l--){var u=i(n.item(l));a.style[u]=n[u]}if(a.className=H.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+H.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER,o)return a.src=Q(r)[0].args[0],[s];var c=document.createTextNode(r);return a.appendChild(c),[s,new U(c,s)]},r.prototype.getChildren=function(e){return N([].filter.call(e.node.childNodes,x).map(function(t){var n=[t.nodeType===Node.TEXT_NODE?new U(t,e):new V(t,e)].filter(D);return t.nodeType===Node.ELEMENT_NODE&&n.length&&"TEXTAREA"!==t.tagName?n[0].isElementVisible()?n.concat(this.getChildren(n[0])):[]:n},this))},r.prototype.newStackingContext=function(e,t){var n=new Z(t,e.getOpacity(),e.node,e.parent);e.cloneTo(n),(t?n.getParentStack(this):n.parent.stack).contexts.push(n),e.stack=n},r.prototype.createStackingContexts=function(){this.nodes.forEach(function(e){E(e)&&(this.isRootElement(e)||I(e)||_(e)||this.isBodyWithTransparentRoot(e)||e.hasTransform())?this.newStackingContext(e,!0):E(e)&&(S(e)&&m(e)||k(e)||C(e))?this.newStackingContext(e,!1):e.assignStack(e.parent.stack)},this)},r.prototype.isBodyWithTransparentRoot=function(e){return"BODY"===e.node.nodeName&&e.parent.color("backgroundColor").isTransparent()},r.prototype.isRootElement=function(e){return null===e.parent},r.prototype.sortStackingContexts=function(e){e.contexts.sort(O(e.contexts.slice(0))),e.contexts.forEach(this.sortStackingContexts,this)},r.prototype.parseTextBounds=function(e){return function(t,n,r){if("none"!==e.parent.css("textDecoration").substr(0,4)||0!==t.trim().length){if(this.support.rangeBounds&&!e.parent.hasTransform()){var o=r.slice(0,n).join("").length;return this.getRangeBounds(e.node,o,t.length)}if(e.node&&"string"==typeof e.node.data){var i=e.node.splitText(t.length),a=this.getWrapperBounds(e.node,e.parent.hasTransform());return e.node=i,a}}else this.support.rangeBounds&&!e.parent.hasTransform()||(e.node=e.node.splitText(t.length));return{}}},r.prototype.getWrapperBounds=function(e,t){var n=e.ownerDocument.createElement("html2canvaswrapper"),r=e.parentNode,o=e.cloneNode(!0);n.appendChild(e.cloneNode(!0)),r.replaceChild(n,e);var i=t?J(n):K(n);return r.replaceChild(o,n),i},r.prototype.getRangeBounds=function(e,t,n){var r=this.range||(this.range=e.ownerDocument.createRange());return r.setStart(e,t),r.setEnd(e,t+n),r.getBoundingClientRect()},r.prototype.parse=function(e){var t=e.contexts.filter(d),n=e.children.filter(E),r=n.filter(A(C)),o=r.filter(A(S)).filter(A(g)),i=n.filter(A(S)).filter(C),s=r.filter(A(S)).filter(g),l=e.contexts.concat(r.filter(S)).filter(m),u=e.children.filter(T).filter(y),c=e.contexts.filter(h);t.concat(o).concat(i).concat(s).concat(l).concat(u).concat(c).forEach(function(e){this.renderQueue.push(e),v(e)&&(this.parse(e),this.renderQueue.push(new a))},this)},r.prototype.paint=function(e){try{e instanceof a?this.renderer.ctx.restore():T(e)?(M(e.parent)&&e.parent.appendToDOM(),this.paintText(e),M(e.parent)&&e.parent.cleanDOM()):this.paintNode(e)}catch(e){if(B(e),this.options.strict)throw e}},r.prototype.paintNode=function(e){v(e)&&(this.renderer.setOpacity(e.opacity),this.renderer.ctx.save(),e.hasTransform()&&this.renderer.setTransform(e.parseTransform())),"INPUT"===e.node.nodeName&&"checkbox"===e.node.type?this.paintCheckbox(e):"INPUT"===e.node.nodeName&&"radio"===e.node.type?this.paintRadio(e):this.paintElement(e)},r.prototype.paintElement=function(e){var t=e.parseBounds();this.renderer.clip(e.backgroundClip,function(){this.renderer.renderBackground(e,t,e.borders.borders.map(j))},this),this.renderer.clip(e.clip,function(){this.renderer.renderBorders(e.borders.borders)},this),this.renderer.clip(e.backgroundClip,function(){switch(e.node.nodeName){case"svg":case"IFRAME":var n=this.images.get(e.node);n?this.renderer.renderImage(e,t,e.borders,n):B("Error loading <"+e.node.nodeName+">",e.node);break;case"IMG":var r=this.images.get(e.node.src);r?this.renderer.renderImage(e,t,e.borders,r):B("Error loading <img>",e.node.src);break;case"CANVAS":this.renderer.renderImage(e,t,e.borders,{image:e.node});break;case"SELECT":case"INPUT":case"TEXTAREA":this.paintFormValue(e)}},this)},r.prototype.paintCheckbox=function(e){var t=e.parseBounds(),n=Math.min(t.width,t.height),r={width:n-1,height:n-1,top:t.top,left:t.left},o=[3,3],i=[o,o,o,o],a=[1,1,1,1].map(function(e){return{color:new W("#A5A5A5"),width:e}}),l=u(r,i,a);this.renderer.clip(e.backgroundClip,function(){this.renderer.rectangle(r.left+1,r.top+1,r.width-2,r.height-2,new W("#DEDEDE")),this.renderer.renderBorders(s(a,r,l,i)),e.node.checked&&(this.renderer.font(new W("#424242"),"normal","normal","bold",n-3+"px","arial"),this.renderer.text("",r.left+n/6,r.top+n-1))},this)},r.prototype.paintRadio=function(e){var t=e.parseBounds(),n=Math.min(t.width,t.height)-2;this.renderer.clip(e.backgroundClip,function(){this.renderer.circleStroke(t.left+1,t.top+1,n,new W("#DEDEDE"),1,new W("#A5A5A5")),e.node.checked&&this.renderer.circle(Math.ceil(t.left+n/4)+1,Math.ceil(t.top+n/4)+1,Math.floor(n/2),new W("#424242"))},this)},r.prototype.paintFormValue=function(e){var t=e.getValue();if(t.length>0){var n=e.node.ownerDocument,r=n.createElement("html2canvaswrapper");["lineHeight","textAlign","fontFamily","fontWeight","fontSize","color","paddingLeft","paddingTop","paddingRight","paddingBottom","width","height","borderLeftStyle","borderTopStyle","borderLeftWidth","borderTopWidth","boxSizing","whiteSpace","wordWrap"].forEach(function(t){try{r.style[t]=e.css(t)}catch(e){B("html2canvas: Parse: Exception caught in renderFormValue: "+e.message)}});var o=e.parseBounds();r.style.position="fixed",r.style.left=o.left+"px",r.style.top=o.top+"px",r.textContent=t,n.body.appendChild(r),this.paintText(new U(r.firstChild,e)),n.body.removeChild(r)}},r.prototype.paintText=function(e){e.applyTextTransform();var t=q.ucs2.decode(e.node.data),n=this.options.letterRendering&&!b(e)||z(e.node.data)?t.map(function(e){return q.ucs2.encode([e])}):F(t),r=e.parent.fontWeight(),o=e.parent.css("fontSize"),i=e.parent.css("fontFamily"),a=e.parent.parseTextShadows();this.renderer.font(e.parent.color("color"),e.parent.css("fontStyle"),e.parent.css("fontVariant"),r,o,i),a.length?this.renderer.fontShadow(a[0].color,a[0].offsetX,a[0].offsetY,a[0].blur):this.renderer.clearShadow(),this.renderer.clip(e.parent.clip,function(){n.map(this.parseTextBounds(e),this).forEach(function(t,r){t&&(this.renderer.text(n[r],t.left,t.bottom),this.renderTextDecoration(e.parent,t,this.fontMetrics.getMetrics(i,o)))},this)},this)},r.prototype.renderTextDecoration=function(e,t,n){switch(e.css("textDecoration").split(" ")[0]){case"underline":this.renderer.rectangle(t.left,Math.round(t.top+n.baseline+n.lineWidth),t.width,1,e.color("color"));break;case"overline":this.renderer.rectangle(t.left,Math.round(t.top),t.width,1,e.color("color"));break;case"line-through":this.renderer.rectangle(t.left,Math.ceil(t.top+n.middle+n.lineWidth),t.width,1,e.color("color"))}};var $={inset:[["darken",.6],["darken",.1],["darken",.1],["darken",.6]]};r.prototype.parseBorders=function(e){var t=e.parseBounds(),n=w(e),r=["Top","Right","Bottom","Left"].map(function(t,n){var r=e.css("border"+t+"Style"),o=e.color("border"+t+"Color");"inset"===r&&o.isBlack()&&(o=new W([255,255,255,o.a]));var i=$[r]?$[r][n]:null;return{width:e.cssInt("border"+t+"Width"),color:i?o[i[0]](i[1]):o,args:null}}),o=u(t,n,r);return{clip:this.parseBackgroundClip(e,o,r,n,t),borders:s(r,t,o,n)}},r.prototype.parseBackgroundClip=function(e,t,n,r,o){var i=[];switch(e.css("backgroundClip")){case"content-box":case"padding-box":f(i,r[0],r[1],t.topLeftInner,t.topRightInner,o.left+n[3].width,o.top+n[0].width),f(i,r[1],r[2],t.topRightInner,t.bottomRightInner,o.left+o.width-n[1].width,o.top+n[0].width),f(i,r[2],r[3],t.bottomRightInner,t.bottomLeftInner,o.left+o.width-n[1].width,o.top+o.height-n[2].width),f(i,r[3],r[0],t.bottomLeftInner,t.topLeftInner,o.left+n[3].width,o.top+o.height-n[2].width);break;default:f(i,r[0],r[1],t.topLeftOuter,t.topRightOuter,o.left,o.top),f(i,r[1],r[2],t.topRightOuter,t.bottomRightOuter,o.left+o.width,o.top),f(i,r[2],r[3],t.bottomRightOuter,t.bottomLeftOuter,o.left+o.width,o.top+o.height),f(i,r[3],r[0],t.bottomLeftOuter,t.topLeftOuter,o.left,o.top+o.height)}return i},t.exports=r},{"./color":3,"./fontmetrics":7,"./log":13,"./nodecontainer":14,"./pseudoelementcontainer":18,"./stackingcontext":21,"./textcontainer":25,"./utils":26,punycode:1}],16:[function(e,t,n){function r(e,t,n){var r="withCredentials"in new XMLHttpRequest;if(!t)return Promise.reject("No proxy configured");var s=i(r),u=a(t,e,s);return r?l(u):o(n,u,s).then(function(e){return f(e.content)})}function o(e,t,n){return new Promise(function(r,o){var i=e.createElement("script"),a=function(){delete window.html2canvas.proxy[n],e.body.removeChild(i)};window.html2canvas.proxy[n]=function(e){a(),r(e)},i.src=t,i.onerror=function(e){a(),o(e)},e.body.appendChild(i)})}function i(e){return e?"":"html2canvas_"+Date.now()+"_"+ ++d+"_"+Math.round(1e5*Math.random())}function a(e,t,n){return e+"?url="+encodeURIComponent(t)+(n.length?"&callback=html2canvas.proxy."+n:"")}function s(e){return function(t){var n,r=new DOMParser;try{n=r.parseFromString(t,"text/html")}catch(e){c("DOMParser not supported, falling back to createHTMLDocument"),n=document.implementation.createHTMLDocument("");try{n.open(),n.write(t),n.close()}catch(e){c("createHTMLDocument write not supported, falling back to document.body.innerHTML"),n.body.innerHTML=t}}var o=n.querySelector("base");if(!o||!o.href.host){var i=n.createElement("base");i.href=e,n.head.insertBefore(i,n.head.firstChild)}return n}}var l=e("./xhr"),u=e("./utils"),c=e("./log"),p=e("./clone"),f=u.decode64,d=0;n.Proxy=r,n.ProxyURL=function(e,t,n){var r="crossOrigin"in new Image,s=i(r),l=a(t,e,s);return r?Promise.resolve(l):o(n,l,s).then(function(e){return"data:"+e.type+";base64,"+e.content})},n.loadUrlDocument=function(e,t,n,o,i,a){return new r(e,t,window.document).then(s(e)).then(function(e){return p(e,n,o,i,a,0,0)})}},{"./clone":2,"./log":13,"./utils":26,"./xhr":28}],17:[function(e,t,n){var r=e("./proxy").ProxyURL;t.exports=function(e,t){var n=document.createElement("a");n.href=e,e=n.href,this.src=e,this.image=new Image;var o=this;this.promise=new Promise(function(n,i){o.image.crossOrigin="Anonymous",o.image.onload=n,o.image.onerror=i,new r(e,t,document).then(function(e){o.image.src=e}).catch(i)})}},{"./proxy":16}],18:[function(e,t,n){function r(e,t,n){o.call(this,e,t),this.isPseudoElement=!0,this.before=":before"===n}var o=e("./nodecontainer");r.prototype.cloneTo=function(e){r.prototype.cloneTo.call(this,e),e.isPseudoElement=!0,e.before=this.before},(r.prototype=Object.create(o.prototype)).appendToDOM=function(){this.before?this.parent.node.insertBefore(this.node,this.parent.node.firstChild):this.parent.node.appendChild(this.node),this.parent.node.className+=" "+this.getHideClass()},r.prototype.cleanDOM=function(){this.node.parentNode.removeChild(this.node),this.parent.node.className=this.parent.node.className.replace(this.getHideClass(),"")},r.prototype.getHideClass=function(){return this["PSEUDO_HIDE_ELEMENT_CLASS_"+(this.before?"BEFORE":"AFTER")]},r.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before",r.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after",t.exports=r},{"./nodecontainer":14}],19:[function(e,t,n){function r(e,t,n,r,o){this.width=e,this.height=t,this.images=n,this.options=r,this.document=o}var o=e("./log");r.prototype.renderImage=function(e,t,n,r){var o=e.cssInt("paddingLeft"),i=e.cssInt("paddingTop"),a=e.cssInt("paddingRight"),s=e.cssInt("paddingBottom"),l=n.borders,u=t.width-(l[1].width+l[3].width+o+a),c=t.height-(l[0].width+l[2].width+i+s);this.drawImage(r,0,0,r.image.width||u,r.image.height||c,t.left+o+l[3].width,t.top+i+l[0].width,u,c)},r.prototype.renderBackground=function(e,t,n){t.height>0&&t.width>0&&(this.renderBackgroundColor(e,t),this.renderBackgroundImage(e,t,n))},r.prototype.renderBackgroundColor=function(e,t){var n=e.color("backgroundColor");n.isTransparent()||this.rectangle(t.left,t.top,t.width,t.height,n)},r.prototype.renderBorders=function(e){e.forEach(this.renderBorder,this)},r.prototype.renderBorder=function(e){e.color.isTransparent()||null===e.args||this.drawShape(e.args,e.color)},r.prototype.renderBackgroundImage=function(e,t,n){e.parseBackgroundImages().reverse().forEach(function(r,i,a){switch(r.method){case"url":var s=this.images.get(r.args[0]);s?this.renderBackgroundRepeating(e,t,s,a.length-(i+1),n):o("Error loading background-image",r.args[0]);break;case"linear-gradient":case"gradient":var l=this.images.get(r.value);l?this.renderBackgroundGradient(l,t,n):o("Error loading background-image",r.args[0]);break;case"none":break;default:o("Unknown background-image type",r.args[0])}},this)},r.prototype.renderBackgroundRepeating=function(e,t,n,r,o){var i=e.parseBackgroundSize(t,n.image,r),a=e.parseBackgroundPosition(t,n.image,r,i);switch(e.parseBackgroundRepeat(r)){case"repeat-x":case"repeat no-repeat":this.backgroundRepeatShape(n,a,i,t,t.left+o[3],t.top+a.top+o[0],99999,i.height,o);break;case"repeat-y":case"no-repeat repeat":this.backgroundRepeatShape(n,a,i,t,t.left+a.left+o[3],t.top+o[0],i.width,99999,o);break;case"no-repeat":this.backgroundRepeatShape(n,a,i,t,t.left+a.left+o[3],t.top+a.top+o[0],i.width,i.height,o);break;default:this.renderBackgroundRepeat(n,a,i,{top:t.top,left:t.left},o[3],o[0])}},t.exports=r},{"./log":13}],20:[function(e,t,n){function r(e,t){i.apply(this,arguments),this.canvas=this.options.canvas||this.document.createElement("canvas"),this.options.canvas||(this.canvas.width=e,this.canvas.height=t),this.ctx=this.canvas.getContext("2d"),this.taintCtx=this.document.createElement("canvas").getContext("2d"),this.ctx.textBaseline="bottom",this.variables={},s("Initialized CanvasRenderer with size",e,"x",t)}function o(e){return e.length>0}var i=e("../renderer"),a=e("../lineargradientcontainer"),s=e("../log");(r.prototype=Object.create(i.prototype)).setFillStyle=function(e){return this.ctx.fillStyle="object"==typeof e&&e.isColor?e.toString():e,this.ctx},r.prototype.rectangle=function(e,t,n,r,o){this.setFillStyle(o).fillRect(e,t,n,r)},r.prototype.circle=function(e,t,n,r){this.setFillStyle(r),this.ctx.beginPath(),this.ctx.arc(e+n/2,t+n/2,n/2,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill()},r.prototype.circleStroke=function(e,t,n,r,o,i){this.circle(e,t,n,r),this.ctx.strokeStyle=i.toString(),this.ctx.stroke()},r.prototype.drawShape=function(e,t){this.shape(e),this.setFillStyle(t).fill()},r.prototype.taints=function(e){if(null===e.tainted){this.taintCtx.drawImage(e.image,0,0);try{this.taintCtx.getImageData(0,0,1,1),e.tainted=!1}catch(t){this.taintCtx=document.createElement("canvas").getContext("2d"),e.tainted=!0}}return e.tainted},r.prototype.drawImage=function(e,t,n,r,o,i,a,s,l){this.taints(e)&&!this.options.allowTaint||this.ctx.drawImage(e.image,t,n,r,o,i,a,s,l)},r.prototype.clip=function(e,t,n){this.ctx.save(),e.filter(o).forEach(function(e){this.shape(e).clip()},this),t.call(n),this.ctx.restore()},r.prototype.shape=function(e){return this.ctx.beginPath(),e.forEach(function(e,t){"rect"===e[0]?this.ctx.rect.apply(this.ctx,e.slice(1)):this.ctx[0===t?"moveTo":e[0]+"To"].apply(this.ctx,e.slice(1))},this),this.ctx.closePath(),this.ctx},r.prototype.font=function(e,t,n,r,o,i){this.setFillStyle(e).font=[t,n,r,o,i].join(" ").split(",")[0]},r.prototype.fontShadow=function(e,t,n,r){this.setVariable("shadowColor",e.toString()).setVariable("shadowOffsetY",t).setVariable("shadowOffsetX",n).setVariable("shadowBlur",r)},r.prototype.clearShadow=function(){this.setVariable("shadowColor","rgba(0,0,0,0)")},r.prototype.setOpacity=function(e){this.ctx.globalAlpha=e},r.prototype.setTransform=function(e){this.ctx.translate(e.origin[0],e.origin[1]),this.ctx.transform.apply(this.ctx,e.matrix),this.ctx.translate(-e.origin[0],-e.origin[1])},r.prototype.setVariable=function(e,t){return this.variables[e]!==t&&(this.variables[e]=this.ctx[e]=t),this},r.prototype.text=function(e,t,n){this.ctx.fillText(e,t,n)},r.prototype.backgroundRepeatShape=function(e,t,n,r,o,i,a,s,l){var u=[["line",Math.round(o),Math.round(i)],["line",Math.round(o+a),Math.round(i)],["line",Math.round(o+a),Math.round(s+i)],["line",Math.round(o),Math.round(s+i)]];this.clip([u],function(){this.renderBackgroundRepeat(e,t,n,r,l[3],l[0])},this)},r.prototype.renderBackgroundRepeat=function(e,t,n,r,o,i){var a=Math.round(r.left+t.left+o),s=Math.round(r.top+t.top+i);this.setFillStyle(this.ctx.createPattern(this.resizeImage(e,n),"repeat")),this.ctx.translate(a,s),this.ctx.fill(),this.ctx.translate(-a,-s)},r.prototype.renderBackgroundGradient=function(e,t){if(e instanceof a){var n=this.ctx.createLinearGradient(t.left+t.width*e.x0,t.top+t.height*e.y0,t.left+t.width*e.x1,t.top+t.height*e.y1);e.colorStops.forEach(function(e){n.addColorStop(e.stop,e.color.toString())}),this.rectangle(t.left,t.top,t.width,t.height,n)}},r.prototype.resizeImage=function(e,t){var n=e.image;if(n.width===t.width&&n.height===t.height)return n;var r=document.createElement("canvas");return r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(n,0,0,n.width,n.height,0,0,t.width,t.height),r},t.exports=r},{"../lineargradientcontainer":12,"../log":13,"../renderer":19}],21:[function(e,t,n){function r(e,t,n,r){o.call(this,n,r),this.ownStacking=e,this.contexts=[],this.children=[],this.opacity=(this.parent?this.parent.stack.opacity:1)*t}var o=e("./nodecontainer");(r.prototype=Object.create(o.prototype)).getParentStack=function(e){var t=this.parent?this.parent.stack:null;return t?t.ownStacking?t:t.getParentStack(e):e.stack},t.exports=r},{"./nodecontainer":14}],22:[function(e,t,n){function r(e){this.rangeBounds=this.testRangeBounds(e),this.cors=this.testCORS(),this.svg=this.testSVG()}r.prototype.testRangeBounds=function(e){var t,n,r=!1;return e.createRange&&(t=e.createRange()).getBoundingClientRect&&((n=e.createElement("boundtest")).style.height="123px",n.style.display="block",e.body.appendChild(n),t.selectNode(n),123===t.getBoundingClientRect().height&&(r=!0),e.body.removeChild(n)),r},r.prototype.testCORS=function(){return void 0!==(new Image).crossOrigin},r.prototype.testSVG=function(){var e=new Image,t=document.createElement("canvas"),n=t.getContext("2d");e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),t.toDataURL()}catch(e){return!1}return!0},t.exports=r},{}],23:[function(e,t,n){function r(e){this.src=e,this.image=null;var t=this;this.promise=this.hasFabric().then(function(){return t.isInline(e)?Promise.resolve(t.inlineFormatting(e)):o(e)}).then(function(e){return new Promise(function(n){window.html2canvas.svg.fabric.loadSVGFromString(e,t.createCanvas.call(t,n))})})}var o=e("./xhr"),i=e("./utils").decode64;r.prototype.hasFabric=function(){return window.html2canvas.svg&&window.html2canvas.svg.fabric?Promise.resolve():Promise.reject(new Error("html2canvas.svg.js is not loaded, cannot render svg"))},r.prototype.inlineFormatting=function(e){return/^data:image\/svg\+xml;base64,/.test(e)?this.decode64(this.removeContentType(e)):this.removeContentType(e)},r.prototype.removeContentType=function(e){return e.replace(/^data:image\/svg\+xml(;base64)?,/,"")},r.prototype.isInline=function(e){return/^data:image\/svg\+xml/i.test(e)},r.prototype.createCanvas=function(e){var t=this;return function(n,r){var o=new window.html2canvas.svg.fabric.StaticCanvas("c");t.image=o.lowerCanvasEl,o.setWidth(r.width).setHeight(r.height).add(window.html2canvas.svg.fabric.util.groupSVGElements(n,r)).renderAll(),e(o.lowerCanvasEl)}},r.prototype.decode64=function(e){return"function"==typeof window.atob?window.atob(e):i(e)},t.exports=r},{"./utils":26,"./xhr":28}],24:[function(e,t,n){function r(e,t){this.src=e,this.image=null;var n=this;this.promise=t?new Promise(function(t,r){n.image=new Image,n.image.onload=t,n.image.onerror=r,n.image.src="data:image/svg+xml,"+(new XMLSerializer).serializeToString(e),!0===n.image.complete&&t(n.image)}):this.hasFabric().then(function(){return new Promise(function(t){window.html2canvas.svg.fabric.parseSVGDocument(e,n.createCanvas.call(n,t))})})}var o=e("./svgcontainer");r.prototype=Object.create(o.prototype),t.exports=r},{"./svgcontainer":23}],25:[function(e,t,n){function r(e,t){i.call(this,e,t)}function o(e,t,n){if(e.length>0)return t+n.toUpperCase()}var i=e("./nodecontainer");(r.prototype=Object.create(i.prototype)).applyTextTransform=function(){this.node.data=this.transform(this.parent.css("textTransform"))},r.prototype.transform=function(e){var t=this.node.data;switch(e){case"lowercase":return t.toLowerCase();case"capitalize":return t.replace(/(^|\s|:|-|\(|\))([a-z])/g,o);case"uppercase":return t.toUpperCase();default:return t}},t.exports=r},{"./nodecontainer":14}],26:[function(e,t,n){n.smallImage=function(){return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},n.bind=function(e,t){return function(){return e.apply(t,arguments)}},n.decode64=function(e){var t,n,r,o,i,a,s,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=e.length,c="";for(t=0;t<u;t+=4)i=l.indexOf(e[t])<<2|(n=l.indexOf(e[t+1]))>>4,a=(15&n)<<4|(r=l.indexOf(e[t+2]))>>2,s=(3&r)<<6|(o=l.indexOf(e[t+3])),c+=64===r?String.fromCharCode(i):64===o||-1===o?String.fromCharCode(i,a):String.fromCharCode(i,a,s);return c},n.getBounds=function(e){if(e.getBoundingClientRect){var t=e.getBoundingClientRect(),n=null==e.offsetWidth?t.width:e.offsetWidth;return{top:t.top,bottom:t.bottom||t.top+t.height,right:t.left+n,left:t.left,width:n,height:null==e.offsetHeight?t.height:e.offsetHeight}}return{}},n.offsetBounds=function(e){var t=e.offsetParent?n.offsetBounds(e.offsetParent):{top:0,left:0};return{top:e.offsetTop+t.top,bottom:e.offsetTop+e.offsetHeight+t.top,right:e.offsetLeft+t.left+e.offsetWidth,left:e.offsetLeft+t.left,width:e.offsetWidth,height:e.offsetHeight}},n.parseBackgrounds=function(e){var t,n,r,o,i,a,s,l=[],u=0,c=0,p=function(){t&&('"'===n.substr(0,1)&&(n=n.substr(1,n.length-2)),n&&s.push(n),"-"===t.substr(0,1)&&(o=t.indexOf("-",1)+1)>0&&(r=t.substr(0,o),t=t.substr(o)),l.push({prefix:r,method:t.toLowerCase(),value:i,args:s,image:null})),s=[],t=r=n=i=""};return s=[],t=r=n=i="",e.split("").forEach(function(e){if(!(0===u&&" \r\n\t".indexOf(e)>-1)){switch(e){case'"':a?a===e&&(a=null):a=e;break;case"(":if(a)break;if(0===u)return u=1,void(i+=e);c++;break;case")":if(a)break;if(1===u){if(0===c)return u=0,i+=e,void p();c--}break;case",":if(a)break;if(0===u)return void p();if(1===u&&0===c&&!t.match(/^url$/i))return s.push(n),n="",void(i+=e)}i+=e,0===u?t+=e:n+=e}}),p(),l}},{}],27:[function(e,t,n){function r(e){o.apply(this,arguments),this.type="linear"===e.args[0]?o.TYPES.LINEAR:o.TYPES.RADIAL}var o=e("./gradientcontainer");r.prototype=Object.create(o.prototype),t.exports=r},{"./gradientcontainer":9}],28:[function(e,t,n){t.exports=function(e){return new Promise(function(t,n){var r=new XMLHttpRequest;r.open("GET",e),r.onload=function(){200===r.status?t(r.responseText):n(new Error(r.statusText))},r.onerror=function(){n(new Error("Network Error"))},r.send()})}},{}]},{},[4])(4)}),function(e){var t;t=function(){function t(e){var t,n,r,o,i,a,s,l,u,c,p,f,d,h,m;for(this.data=e,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},a=null;;){switch(t=this.readUInt32(),c=function(){var e,t;for(t=[],s=e=0;e<4;s=++e)t.push(String.fromCharCode(this.data[this.pos++]));return t}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(t);break;case"fcTL":a&&this.animation.frames.push(a),this.pos+=4,a={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},i=this.readUInt16(),o=this.readUInt16()||100,a.delay=1e3*i/o,a.disposeOp=this.data[this.pos++],a.blendOp=this.data[this.pos++],a.data=[];break;case"IDAT":case"fdAT":for("fdAT"===c&&(this.pos+=4,t-=4),e=(null!=a?a.data:void 0)||this.imgData,s=d=0;0<=t?d<t:d>t;s=0<=t?++d:--d)e.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(r=this.palette.length/3,this.transparency.indexed=this.read(t),this.transparency.indexed.length>r)throw new Error("More transparent colors than palette size");if((p=r-this.transparency.indexed.length)>0)for(s=h=0;0<=p?h<p:h>p;s=0<=p?++h:--h)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(t)[0];break;case 2:this.transparency.rgb=this.read(t)}break;case"tEXt":l=(f=this.read(t)).indexOf(0),u=String.fromCharCode.apply(String,f.slice(0,l)),this.text[u]=String.fromCharCode.apply(String,f.slice(l+1));break;case"IEND":return a&&this.animation.frames.push(a),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(m=this.colorType)||6===m,n=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*n,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=t}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}var n,r,o;t.load=function(e,n,r){var o;return"function"==typeof n&&(r=n),(o=new XMLHttpRequest).open("GET",e,!0),o.responseType="arraybuffer",o.onload=function(){var e,i;return e=new Uint8Array(o.response||o.mozResponseArrayBuffer),i=new t(e),"function"==typeof(null!=n?n.getContext:void 0)&&i.render(n),"function"==typeof r?r(i):void 0},o.send(null)},t.prototype.read=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;0<=e?++t:--t)n.push(this.data[this.pos++]);return n},t.prototype.readUInt32=function(){var e,t,n,r;return e=this.data[this.pos++]<<24,t=this.data[this.pos++]<<16,n=this.data[this.pos++]<<8,r=this.data[this.pos++],e|t|n|r},t.prototype.readUInt16=function(){var e,t;return e=this.data[this.pos++]<<8,t=this.data[this.pos++],e|t},t.prototype.decodePixels=function(e){var t,n,r,o,i,a,s,l,c,p,f,d,h,m,g,v,y,b,w,x,_,S,C;if(null==e&&(e=this.imgData),0===e.length)return new Uint8Array(0);for(e=(e=new u(e)).getBytes(),v=(d=this.pixelBitlength/8)*this.width,h=new Uint8Array(v*this.height),a=e.length,g=0,m=0,n=0;m<a;){switch(e[m++]){case 0:for(o=w=0;w<v;o=w+=1)h[n++]=e[m++];break;case 1:for(o=x=0;x<v;o=x+=1)t=e[m++],i=o<d?0:h[n-d],h[n++]=(t+i)%256;break;case 2:for(o=_=0;_<v;o=_+=1)t=e[m++],r=(o-o%d)/d,y=g&&h[(g-1)*v+r*d+o%d],h[n++]=(y+t)%256;break;case 3:for(o=S=0;S<v;o=S+=1)t=e[m++],r=(o-o%d)/d,i=o<d?0:h[n-d],y=g&&h[(g-1)*v+r*d+o%d],h[n++]=(t+Math.floor((i+y)/2))%256;break;case 4:for(o=C=0;C<v;o=C+=1)t=e[m++],r=(o-o%d)/d,i=o<d?0:h[n-d],0===g?y=b=0:(y=h[(g-1)*v+r*d+o%d],b=r&&h[(g-1)*v+(r-1)*d+o%d]),s=i+y-b,l=Math.abs(s-i),p=Math.abs(s-y),f=Math.abs(s-b),c=l<=p&&l<=f?i:p<=f?y:b,h[n++]=(t+c)%256;break;default:throw new Error("Invalid filter algorithm: "+e[m-1])}g++}return h},t.prototype.decodePalette=function(){var e,t,n,r,o,i,a,s,l;for(n=this.palette,i=this.transparency.indexed||[],o=new Uint8Array((i.length||0)+n.length),r=0,e=0,t=a=0,s=n.length;a<s;t=a+=3)o[r++]=n[t],o[r++]=n[t+1],o[r++]=n[t+2],o[r++]=null!=(l=i[e++])?l:255;return o},t.prototype.copyToImageData=function(e,t){var n,r,o,i,a,s,l,u,c,p,f;if(r=this.colors,c=null,n=this.hasAlphaChannel,this.palette.length&&(c=null!=(f=this._decodedPalette)?f:this._decodedPalette=this.decodePalette(),r=4,n=!0),o=e.data||e,u=o.length,a=c||t,i=s=0,1===r)for(;i<u;)l=c?4*t[i/4]:s,p=a[l++],o[i++]=p,o[i++]=p,o[i++]=p,o[i++]=n?a[l++]:255,s=l;else for(;i<u;)l=c?4*t[i/4]:s,o[i++]=a[l++],o[i++]=a[l++],o[i++]=a[l++],o[i++]=n?a[l++]:255,s=l},t.prototype.decode=function(){var e;return e=new Uint8Array(this.width*this.height*4),this.copyToImageData(e,this.decodePixels()),e};try{r=e.document.createElement("canvas"),o=r.getContext("2d")}catch(e){return-1}return n=function(e){var t;return o.width=e.width,o.height=e.height,o.clearRect(0,0,e.width,e.height),o.putImageData(e,0,0),t=new Image,t.src=r.toDataURL(),t},t.prototype.decodeFrames=function(e){var t,r,o,i,a,s,l,u;if(this.animation){for(u=[],r=a=0,s=(l=this.animation.frames).length;a<s;r=++a)t=l[r],o=e.createImageData(t.width,t.height),i=this.decodePixels(new Uint8Array(t.data)),this.copyToImageData(o,i),t.imageData=o,u.push(t.image=n(o));return u}},t.prototype.renderFrame=function(e,t){var n,r,o;return r=this.animation.frames,n=r[t],o=r[t-1],0===t&&e.clearRect(0,0,this.width,this.height),1===(null!=o?o.disposeOp:void 0)?e.clearRect(o.xOffset,o.yOffset,o.width,o.height):2===(null!=o?o.disposeOp:void 0)&&e.putImageData(o.imageData,o.xOffset,o.yOffset),0===n.blendOp&&e.clearRect(n.xOffset,n.yOffset,n.width,n.height),e.drawImage(n.image,n.xOffset,n.yOffset)},t.prototype.animate=function(e){var t,n,r,o,i,a,s=this;return n=0,a=this.animation,o=a.numFrames,r=a.frames,i=a.numPlays,(t=function(){var a,l;if(a=n++%o,l=r[a],s.renderFrame(e,a),o>1&&n/o<i)return s.animation._timeout=setTimeout(t,l.delay)})()},t.prototype.stopAnimation=function(){var e;return clearTimeout(null!=(e=this.animation)?e._timeout:void 0)},t.prototype.render=function(e){var t,n;return e._png&&e._png.stopAnimation(),e._png=this,e.width=this.width,e.height=this.height,t=e.getContext("2d"),this.animation?(this.decodeFrames(t),this.animate(t)):(n=t.createImageData(this.width,this.height),this.copyToImageData(n,this.decodePixels()),t.putImageData(n,0,0))},t}(),e.PNG=t}("undefined"!=typeof window&&window||void 0);var l=function(){function e(){this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=null}return e.prototype={ensureBuffer:function(e){var t=this.buffer,n=t?t.byteLength:0;if(e<n)return t;for(var r=512;r<e;)r<<=1;for(var o=new Uint8Array(r),i=0;i<n;++i)o[i]=t[i];return this.buffer=o},getByte:function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(e){var t=this.pos;if(e){for(this.ensureBuffer(t+e),r=t+e;!this.eof&&this.bufferLength<r;)this.readBlock();var n=this.bufferLength;r>n&&(r=n)}else{for(;!this.eof;)this.readBlock();var r=this.bufferLength}return this.pos=r,this.buffer.subarray(t,r)},lookChar:function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(e,t,n){for(var r=e+t;this.bufferLength<=r&&!this.eof;)this.readBlock();return new Stream(this.buffer,e,t,n)},skip:function(e){e||(e=1),this.pos+=e},reset:function(){this.pos=0}},e}(),u=function(){function e(e){throw new Error(e)}function t(t){var n=0,r=t[n++],o=t[n++];-1!=r&&-1!=o||e("Invalid header in flate stream"),8!=(15&r)&&e("Unknown compression method in flate stream"),((r<<8)+o)%31!=0&&e("Bad FCHECK in flate stream"),32&o&&e("FDICT bit set in flate stream"),this.bytes=t,this.bytesPos=n,this.codeSize=0,this.codeBuf=0,l.call(this)}if("undefined"!=typeof Uint32Array){var n=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),r=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),o=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),i=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],a=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];return t.prototype=Object.create(l.prototype),t.prototype.getBits=function(t){for(var n,r=this.codeSize,o=this.codeBuf,i=this.bytes,a=this.bytesPos;r<t;)void 0===(n=i[a++])&&e("Bad encoding in flate stream"),o|=n<<r,r+=8;return n=o&(1<<t)-1,this.codeBuf=o>>t,this.codeSize=r-=t,this.bytesPos=a,n},t.prototype.getCode=function(t){for(var n=t[0],r=t[1],o=this.codeSize,i=this.codeBuf,a=this.bytes,s=this.bytesPos;o<r;){var l;void 0===(l=a[s++])&&e("Bad encoding in flate stream"),i|=l<<o,o+=8}var u=n[i&(1<<r)-1],c=u>>16,p=65535&u;return(0==o||o<c||0==c)&&e("Bad encoding in flate stream"),this.codeBuf=i>>c,this.codeSize=o-c,this.bytesPos=s,p},t.prototype.generateHuffmanTable=function(e){for(var t=e.length,n=0,r=0;r<t;++r)e[r]>n&&(n=e[r]);for(var o=1<<n,i=new Uint32Array(o),a=1,s=0,l=2;a<=n;++a,s<<=1,l<<=1)for(var u=0;u<t;++u)if(e[u]==a){for(var c=0,p=s,r=0;r<a;++r)c=c<<1|1&p,p>>=1;for(r=c;r<o;r+=l)i[r]=a<<16|u;++s}return[i,n]},t.prototype.readBlock=function(){function t(e,t,n,r,o){for(var i=e.getBits(n)+r;i-- >0;)t[h++]=o}var s=this.getBits(3);if(1&s&&(this.eof=!0),0!=(s>>=1)){var l,u;if(1==s)l=i,u=a;else if(2==s){for(var c=this.getBits(5)+257,p=this.getBits(5)+1,f=this.getBits(4)+4,d=Array(n.length),h=0;h<f;)d[n[h++]]=this.getBits(3);for(var m=this.generateHuffmanTable(d),g=0,h=0,v=c+p,y=new Array(v);h<v;){var b=this.getCode(m);16==b?t(this,y,2,3,g):17==b?t(this,y,3,3,g=0):18==b?t(this,y,7,11,g=0):y[h++]=g=b}l=this.generateHuffmanTable(y.slice(0,c)),u=this.generateHuffmanTable(y.slice(c,v))}else e("Unknown block type in flate stream");for(var w=(P=this.buffer)?P.length:0,x=this.bufferLength;;){var _=this.getCode(l);if(_<256)x+1>=w&&(w=(P=this.ensureBuffer(x+1)).length),P[x++]=_;else{if(256==_)return void(this.bufferLength=x);var S=(_=r[_-=257])>>16;S>0&&(S=this.getBits(S)),g=(65535&_)+S,_=this.getCode(u),(S=(_=o[_])>>16)>0&&(S=this.getBits(S));var C=(65535&_)+S;x+g>=w&&(w=(P=this.ensureBuffer(x+g)).length);for(var k=0;k<g;++k,++x)P[x]=P[x-C]}}}else{var A,E=this.bytes,M=this.bytesPos;void 0===(A=E[M++])&&e("Bad block header in flate stream");var T=A;void 0===(A=E[M++])&&e("Bad block header in flate stream"),T|=A<<8,void 0===(A=E[M++])&&e("Bad block header in flate stream");var O=A;void 0===(A=E[M++])&&e("Bad block header in flate stream"),(O|=A<<8)!=(65535&~T)&&e("Bad uncompressed block length in flate stream"),this.codeBuf=0,this.codeSize=0;var I=this.bufferLength,P=this.ensureBuffer(I+T),j=I+T;this.bufferLength=j;for(var D=I;D<j;++D){if(void 0===(A=E[M++])){this.eof=!0;break}P[D]=A}this.bytesPos=M}},t}}();return function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";void 0===e.btoa&&(e.btoa=function(e){var n,r,o,i,a,s=0,l=0,u="",c=[];if(!e)return e;do{n=(a=e.charCodeAt(s++)<<16|e.charCodeAt(s++)<<8|e.charCodeAt(s++))>>18&63,r=a>>12&63,o=a>>6&63,i=63&a,c[l++]=t.charAt(n)+t.charAt(r)+t.charAt(o)+t.charAt(i)}while(s<e.length);u=c.join("");var p=e.length%3;return(p?u.slice(0,p-3):u)+"===".slice(p||3)}),void 0===e.atob&&(e.atob=function(e){var n,r,o,i,a,s,l=0,u=0,c=[];if(!e)return e;e+="";do{n=(s=t.indexOf(e.charAt(l++))<<18|t.indexOf(e.charAt(l++))<<12|(i=t.indexOf(e.charAt(l++)))<<6|(a=t.indexOf(e.charAt(l++))))>>16&255,r=s>>8&255,o=255&s,c[u++]=64==i?String.fromCharCode(n):64==a?String.fromCharCode(n,r):String.fromCharCode(n,r,o)}while(l<e.length);return c.join("")}),Array.prototype.map||(Array.prototype.map=function(e){if(void 0===this||null===this||"function"!=typeof e)throw new TypeError;for(var t=Object(this),n=t.length>>>0,r=new Array(n),o=arguments.length>1?arguments[1]:void 0,i=0;i<n;i++)i in t&&(r[i]=e.call(o,t[i],i,t));return r}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){if(void 0===this||null===this||"function"!=typeof e)throw new TypeError;for(var n=Object(this),r=n.length>>>0,o=0;o<r;o++)o in n&&e.call(t,n[o],o,n)}),Object.keys||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(o){if("object"!=typeof o&&("function"!=typeof o||null===o))throw new TypeError;var i,a,s=[];for(i in o)e.call(o,i)&&s.push(i);if(t)for(a=0;a<r;a++)e.call(o,n[a])&&s.push(n[a]);return s}}()),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),String.prototype.trimLeft||(String.prototype.trimLeft=function(){return this.replace(/^\s+/g,"")}),String.prototype.trimRight||(String.prototype.trimRight=function(){return this.replace(/\s+$/g,"")})}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||void 0),r})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(1),p=o(c),f=n(3),d=o(f),h=n(275),m=r(h),g=n(10),v=n(18),y=r(v);n(966);var b=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},w=function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.chartConfig={type:"bar"},e.updateChart=e.updateChart.bind(e),e.getLegendNames=e.getLegendNames.bind(e),e}return s(t,e),l(t,[{key:"getTooltipOptions",value:function(e,t,n,r){function o(n,r){var o=t.datasets[e.dataPoints[r].datasetIndex];return{label:o.label,count:o.count,percent:o.percent}}var i=r.props.gene,a=document.getElementById("cancer-type-summary-tab-tooltip-"+i);if(a||(a=document.createElement("div"),a.id="cancer-type-summary-tab-tooltip-"+i,a.className="cancer-type-summary-tab-tooltip",a.innerHTML="<div></div>",this.chartContainer.appendChild(a)),0===e.opacity)return void(a.style.display="none");if(a.classList.remove("above","below","no-transform"),e.yAlign?a.classList.add(e.yAlign):a.classList.add("no-transform"),e.body){var s=e.body.map(o),l=t.datasets[e.dataPoints[0].datasetIndex],u=l.totalCases,c=l.altTotalPercent,p="<div><b>Summary for "+e.title[0]+"</b></div>\n                    <div>Gene altered in "+d.round(c,2)+"% of "+u+' cases</div>\n                    <table class="table table-striped">\n                        <thead>\n                            <tr>\n                                <th>Alteration</th>\n                                <th>Frequency</th>\n                            </tr>\n                        </thead>\n                        <tbody>';s.reverse().forEach(function(e){p+="<tr>\n                        <td> "+r.getLegendNames(e.label)+" </td>\n                        <td> "+d.round(e.percent,2)+"% ("+e.count+" cases)</td>\n                     </tr>"}),p+="</tbody></table>";a.querySelector("div").innerHTML=p}a.style.display="block",a.style.left=e.caretX+35+"px",a.style.top=e.y+"px"}},{key:"componentDidMount",value:function(){this.chartConfig.data=this.props.data,this.chartConfig.options=this.chartOptions,this.chart=new m.default(this.chartTarget,this.chartConfig)}},{key:"componentDidUpdate",value:function(){this.updateChart()}},{key:"updateChart",value:function(){this.chart.destroy(),this.chartConfig.data=this.props.data,this.chartConfig.options=this.chartOptions,this.chart=new m.default(this.chartTarget,this.chartConfig)}},{key:"hasAlterations",value:function(){return d.sumBy(this.props.data.datasets,function(e){return e.count})>0}},{key:"getLegendNames",value:function(e){return this.props.orderedLabels[e]||e}},{key:"toImagePdf",value:function(){if(this.chart){var e=this.chart.toBase64Image();this.props.setPngAnchor(e)}if(this.chartTarget){var t=this.chartTarget.toDataURL();this.props.setPdfProperties(t,this.width,this.chartTarget.offsetHeight)}}},{key:"render",value:function(){var e=this;return p.createElement("div",{style:{width:this.width},ref:function(t){return e.chartContainer=t},className:"cancer-summary-chart-container borderedChart"},null,p.createElement("canvas",{ref:function(t){return e.chartTarget=t},className:(0,y.default)({hidden:!this.hasAlterations()})}))}},{key:"chartOptions",get:function(){var e=this,t=this.props,n=t.data,r=t.yAxis,o=t.altCasesMax,i=d.values(this.props.orderedLabels),a=void 0;return o>90&&"alt-freq"===r&&(a={max:100}),{title:{display:!0,text:this.props.title,fontSize:14,fontStyle:"normal"},maintainAspectRatio:!1,responsive:!0,layout:{padding:{top:5,left:20,right:20,bottom:5}},tooltips:{enabled:!1,position:"nearest",mode:"x",filter:function(e){return!!e&&Number(e.yLabel)>0},custom:function(t){return e.getTooltipOptions(t,n,e,e)}},scales:{xAxes:[{gridLines:{display:!1},stacked:!0,barThickness:this.props.data.labels.length>15?14:25,ticks:{maxRotation:70,autoSkip:!1}}],yAxes:[{stacked:!0,scaleLabel:{display:!0,fontSize:13,labelString:"abs-count"===r?"Absolute Counts":"Alteration Frequency"},display:!0,ticks:Object.assign({fontSize:11},a,{callback:function(t){return d.round(t,1)+("abs-count"===e.props.yAxis?"":"%")}})}]},legend:{position:"right",labels:{generateLabels:function(t){var n=t.data;if(e.props.legend){if(n.labels.length&&n.datasets.length){var r=d.reduce(n.datasets,function(e,t){return e[t.label]?e[t.label].count=e[t.label].count+t.total:e[t.label]={count:t.total,backgroundColor:t.backgroundColor},e},{});return d.reduce(r,function(t,n,r){return n.count&&t.push({text:e.getLegendNames(r),fillStyle:n.backgroundColor}),t},[]).sort(function(e,t){return i.indexOf(t.text)-i.indexOf(e.text)})}return[]}return[]}}},animation:{duration:50,onComplete:function(){e.toImagePdf()}}}}},{key:"width",get:function(){var e=d.maxBy(this.props.data.labels,function(e){return e.length}),t=e&&e.length>20?5*(e.length-20):0,n=300+t+45*this.props.data.labels.length,r=this.props.width||1159;return n>r?r:n}}]),t}(p.Component);w=b([g.observer],w),t.default=w},function(e,t){},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),p=n(10),f=n(811),d=n(968),h=r(d),m=n(8),g=n(51),v=r(g);n(997);var y=n(168),b=r(y),w=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},x=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleTabChange.bind(n),n.mutationsGeneTab=n.props.store.hugoGeneSymbols[0],n}return a(t,e),s(t,[{key:"render",value:function(){var e=this,t=this.props.routing?this.props.routing.location.query.mutationsGeneTab:this.mutationsGeneTab;return c.createElement("div",null,c.createElement(b.default,{isLoading:this.props.store.mutationMapperStores.isPending}),this.props.store.mutationMapperStores.isComplete&&c.createElement(f.MSKTabs,{id:"mutationsPageTabs",activeTabId:t,onTabClick:function(t){return e.handleTabChange(t)},className:"secondaryTabs resultsPageMutationsGeneTabs",enablePagination:!0,arrowStyle:{"line-height":.8},tabButtonStyle:"pills",unmountOnHide:!0},this.generateTabs(this.props.store.hugoGeneSymbols)))}},{key:"generateTabs",value:function(e){var t=this,n=[];return e.forEach(function(e){var r=t.props.store.getMutationMapperStore(e);r&&n.push(c.createElement(f.MSKTab,{key:e,id:e,linkText:e},c.createElement(h.default,{store:r,discreteCNACache:t.props.store.discreteCNACache,genomeNexusEnrichmentCache:t.props.store.genomeNexusEnrichmentCache,oncoKbEvidenceCache:t.props.store.oncoKbEvidenceCache,pubMedCache:t.props.store.pubMedCache,cancerTypeCache:t.props.store.cancerTypeCache,mutationCountCache:t.props.store.mutationCountCache,pdbHeaderCache:t.props.store.pdbHeaderCache,myCancerGenomeData:t.props.store.myCancerGenomeData,config:v.default})))}),n}},{key:"handleTabChange",value:function(e){this.props.routing?this.props.routing.updateRoute({mutationsGeneTab:e}):this.mutationsGeneTab=e}}]),t}(c.Component);w([m.observable],x.prototype,"mutationsGeneTab",void 0),x=w([p.observer],x),t.default=x},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(1),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),f=n(10),d=n(168),h=r(d),m=n(969),g=r(m),v=n(268),y=n(978),b=r(y),w=n(979),x=r(w),_=n(988),S=r(_),C=n(990),k=r(C),A=n(8),E=n(996),M=r(E),T=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},O=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.is3dPanelOpen=!1,n.lollipopPlotGeneX=0,n.geneWidth=665,n.open3dPanel=n.open3dPanel.bind(n),n.close3dPanel=n.close3dPanel.bind(n),n.toggle3dPanel=n.toggle3dPanel.bind(n),n.handlers={resetDataStore:function(){n.props.store.dataStore.resetFilterAndSelection()},onXAxisOffset:(0,A.action)(function(e){n.lollipopPlotGeneX=e})},n}return a(t,e),l(t,[{key:"render",value:function(){return p.createElement("div",null,this.is3dPanelOpen&&p.createElement(g.default,s({mutationDataStore:this.props.store.dataStore,pdbChainDataStore:this.props.store.pdbChainDataStore,pdbAlignmentIndex:this.props.store.indexedAlignmentData,pdbHeaderCache:this.props.pdbHeaderCache,residueMappingCache:this.props.store.residueMappingCache,uniprotId:this.props.store.uniprotId.result,onClose:this.close3dPanel},v.DEFAULT_PROTEIN_IMPACT_TYPE_COLORS)),p.createElement(h.default,{isLoading:this.props.store.mutationData.isPending}),!this.props.store.mutationData.isPending&&p.createElement("div",null,p.createElement(h.default,{isLoading:this.props.store.pfamDomainData.isPending}),!this.props.store.pfamDomainData.isPending&&p.createElement("div",{style:{display:"flex"}},p.createElement("div",{className:"borderedChart",style:{marginRight:10}},p.createElement(x.default,s({store:this.props.store,onXAxisOffset:this.handlers.onXAxisOffset,geneWidth:this.geneWidth},v.DEFAULT_PROTEIN_IMPACT_TYPE_COLORS)),p.createElement(k.default,{store:this.props.store,pdbHeaderCache:this.props.pdbHeaderCache,geneWidth:this.geneWidth,geneXOffset:this.lollipopPlotGeneX,maxChainsHeight:200})),p.createElement("div",{className:"mutationMapperMetaColumn"},this.geneSummary,this.mutationRateSummary,p.createElement("div",null,p.createElement(S.default,s({dataStore:this.props.store.dataStore},v.DEFAULT_PROTEIN_IMPACT_TYPE_COLORS))),p.createElement("button",{className:"btn btn-default btn-sm",disabled:0===this.props.store.pdbChainDataStore.allData.length,onClick:this.toggle3dPanel},"View 3D Structure"))),p.createElement("hr",{style:{marginTop:20}}),!this.props.store.dataStore.showingAllData&&p.createElement("div",{style:{marginTop:"5px",marginBottom:"5px"}},p.createElement("span",{style:{color:"red",fontSize:"14px",fontFamily:"verdana,arial,sans-serif"}},p.createElement("span",null,"Current view shows filtered results. Click "),p.createElement("a",{style:{cursor:"pointer"},onClick:this.handlers.resetDataStore},"here"),p.createElement("span",null," to reset all filters."))),p.createElement(h.default,{isLoading:this.props.store.clinicalDataForSamples.isPending||this.props.store.studiesForSamplesWithoutCancerTypeClinicalData.isPending}),!this.props.store.clinicalDataForSamples.isPending&&!this.props.store.studiesForSamplesWithoutCancerTypeClinicalData.isPending&&p.createElement(b.default,{uniqueSampleKeyToTumorType:this.props.store.uniqueSampleKeyToTumorType,oncoKbAnnotatedGenes:this.props.store.oncoKbAnnotatedGenes,discreteCNACache:this.props.discreteCNACache,studyIdToStudy:this.props.store.studyIdToStudy.result,genomeNexusEnrichmentCache:this.props.genomeNexusEnrichmentCache,molecularProfileIdToMolecularProfile:this.props.store.molecularProfileIdToMolecularProfile.result,oncoKbEvidenceCache:this.props.oncoKbEvidenceCache,pubMedCache:this.props.pubMedCache,mutationCountCache:this.props.mutationCountCache,dataStore:this.props.store.dataStore,itemsLabelPlural:this.itemsLabelPlural,downloadDataFetcher:this.props.store.downloadDataFetcher,myCancerGenomeData:this.props.myCancerGenomeData,hotspots:this.props.store.indexedHotspotData.result,cosmicData:this.props.store.cosmicData.result,oncoKbData:this.props.store.oncoKbData,civicGenes:this.props.store.civicGenes,civicVariants:this.props.store.civicVariants,userEmailAddress:this.props.config.userEmailAddress,enableOncoKb:this.props.config.showOncoKB,enableFunctionalImpact:this.props.config.showGenomeNexus,enableHotspot:this.props.config.showHotspot,enableMyCancerGenome:this.props.config.showMyCancerGenome,enableCivic:this.props.config.showCivic})))}},{key:"toggle3dPanel",value:function(){this.is3dPanelOpen?this.close3dPanel():this.open3dPanel()}},{key:"open3dPanel",value:function(){this.is3dPanelOpen=!0,this.props.store.pdbChainDataStore.selectFirstChain()}},{key:"close3dPanel",value:function(){this.is3dPanelOpen=!1,this.props.store.pdbChainDataStore.selectUid()}},{key:"geneSummary",get:function(){var e=this.props.store.gene.hugoGeneSymbol,t=this.props.store.uniprotId.result,n=this.props.store.canonicalTranscript.result&&this.props.store.canonicalTranscript.result.transcriptId;return p.createElement("div",{style:{paddingBottom:10}},p.createElement("h4",null,e),p.createElement("div",{className:this.props.store.uniprotId.result?"":"invisible"},p.createElement("span",null,"UniProt: "),p.createElement("a",{href:"http://www.uniprot.org/uniprot/"+t,target:"_blank"},t)),p.createElement("div",{className:this.props.store.canonicalTranscript.result?"":"invisible"},p.createElement("span",null,"Transcript: "),p.createElement("a",{href:"http://grch37.ensembl.org/homo_sapiens/Transcript/Summary?t="+n,target:"_blank"},n)))}},{key:"mutationRateSummary",get:function(){return this.props.store.germlineConsentedSamples.result&&this.props.store.mutationData.isComplete&&this.props.store.mutationData.result.length>0?p.createElement(M.default,{hugoGeneSymbol:this.props.store.gene.hugoGeneSymbol,molecularProfileIdToMolecularProfile:this.props.store.molecularProfileIdToMolecularProfile,mutations:this.props.store.mutationData.result,samples:this.props.store.samples.result,germlineConsentedSamples:this.props.store.germlineConsentedSamples}):null}},{key:"multipleMutationInfo",get:function(){var e=this.props.store.dataStore.duplicateMutationCountInMultipleSamples,t=1===e?"mutation":"mutations";return e>0?": includes "+e+" duplicate "+t+" in patients with multiple samples":""}},{key:"itemsLabelPlural",get:function(){return"Mutations"+this.multipleMutationInfo}}]),t}(p.Component);T([A.observable],O.prototype,"is3dPanelOpen",void 0),T([A.observable],O.prototype,"lollipopPlotGeneX",void 0),T([A.observable],O.prototype,"geneWidth",void 0),T([A.computed],O.prototype,"geneSummary",null),T([A.computed],O.prototype,"mutationRateSummary",null),T([A.computed],O.prototype,"multipleMutationInfo",null),T([A.computed],O.prototype,"itemsLabelPlural",null),O=T([f.observer],O),t.default=O},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=n(1),f=o(p),d=n(3),h=o(d),m=n(28),g=n(85),v=n(96),y=n(8),b=n(10),w=n(970),x=r(w),_=n(170),S=r(_),C=n(18),k=r(C),A=n(50),E=r(A),M=n(268),T=n(971),O=r(T),I=n(893),P=r(I),j=n(892),D=n(976),N=r(D),R=n(977),F=r(R),L=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},z=function(e){function t(){a(this,t);var e=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.isCollapsed=!1,e.isIncreasedSize=!1,e.proteinScheme=j.ProteinScheme.CARTOON,e.proteinColor=j.ProteinColor.UNIFORM,e.sideChain=j.SideChain.SELECTED,e.mutationColor=j.MutationColor.MUTATION_TYPE,e.displayBoundMolecules=!0,e.containerRefHandler=e.containerRefHandler.bind(e),e.toggleCollapse=e.toggleCollapse.bind(e),e.toggleDoubleSize=e.toggleDoubleSize.bind(e),e.handleProteinSchemeChange=e.handleProteinSchemeChange.bind(e),e.handleProteinColorChange=e.handleProteinColorChange.bind(e),e.handleSideChainChange=e.handleSideChainChange.bind(e),e.handleMutationColorChange=e.handleMutationColorChange.bind(e),e.handleBoundMoleculeChange=e.handleBoundMoleculeChange.bind(e),e.handlePyMolDownload=e.handlePyMolDownload.bind(e),e}return l(t,e),u(t,[{key:"selectionTitle",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"top",r=null;return t&&(r=this.defaultInfoTooltip(t,n)),f.createElement("span",null,e," ",r,":")}},{key:"defaultInfoTooltip",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top",n=function(){return e};return f.createElement(E.default,{placement:t,overlay:n,arrowContent:f.createElement("div",{className:"rc-tooltip-arrow-inner"}),destroyTooltipOnHide:!0},f.createElement("i",{className:"fa fa-info-circle"}))}},{key:"proteinColorTooltipContent",value:function(){return f.createElement("div",{style:{maxWidth:400,maxHeight:200,overflowY:"auto"}},"Color options for the protein structure. ",f.createElement("br",null),f.createElement("br",null),f.createElement("b",null,"Uniform:")," Colors the entire protein structure with a",f.createElement("span",{className:F.default.loop}," single color"),". ",f.createElement("br",null),f.createElement("b",null,"Secondary structure:")," Colors the protein by secondary structure. Assigns different colors for ",f.createElement("span",{className:F.default["alpha-helix"]},"alpha helices"),",",f.createElement("span",{className:F.default["beta-sheet"]}," beta sheets"),", and",f.createElement("span",{className:F.default.loop}," loops"),". This color option is not available for the space-filling protein scheme. ",f.createElement("br",null),f.createElement("b",null,"N-C rainbow:")," Colors the protein with a rainbow gradient from red (N-terminus) to blue (C-terminus). ",f.createElement("br",null),f.createElement("b",null,"Atom Type:")," Colors the structure with respect to the atom type (CPK color scheme). This color option is only available for the space-filling protein scheme. ",f.createElement("br",null),f.createElement("br",null),"The selected chain is always displayed with full opacity while the rest of the structure has some transparency to help better focusing on the selected chain.")}},{key:"sideChainTooltipContent",value:function(){return f.createElement("div",{style:{maxWidth:400,maxHeight:200,overflowY:"auto"}},"Display options for the side chain atoms. ",f.createElement("br",null),f.createElement("br",null),f.createElement("b",null,"All:")," Displays the side chain atoms for every mapped residue. ",f.createElement("br",null),f.createElement("b",null,"Selected:")," Displays the side chain atoms only for the selected mutations. ",f.createElement("br",null),f.createElement("b",null,"None:")," Hides the side chain atoms. ",f.createElement("br",null),f.createElement("br",null),"This option has no effect for the space-filling protein scheme.")}},{key:"mutationColorTooltipContent",value:function(){return f.createElement("div",{style:{maxWidth:400,maxHeight:200,overflowY:"auto"}},"Color options for the mapped mutations. ",f.createElement("br",null),f.createElement("br",null),f.createElement("b",null,"Uniform:")," Colors all mutated residues with a",f.createElement("span",{className:F.default["uniform-mutation"]}," single color"),". ",f.createElement("br",null),f.createElement("b",null,"Mutation type:")," Enables residue coloring by mutation type. Mutation types and corresponding color codes are as follows:",f.createElement("ul",null,f.createElement("li",null,f.createElement("span",{className:F.default["missense-mutation"]},"Missense Mutations")),f.createElement("li",null,f.createElement("span",{className:F.default["trunc-mutation"]},"Truncating Mutations"),f.createElement("span",null," (Nonsense, Nonstop, FS del, FS ins)")),f.createElement("li",null,f.createElement("span",{className:F.default["inframe-mutation"]},"Inframe Mutations"),f.createElement("span",null," (IF del, IF ins)"))),f.createElement("b",null,"None:")," Disables coloring of the mutated residues except for manually selected (highlighted) residues. ",f.createElement("br",null),f.createElement("br",null),"Highlighted residues are colored with ",f.createElement("span",{className:F.default.highlighted},"yellow"),".")}},{key:"boundMoleculesTooltipContent",value:function(){return f.createElement("div",{style:{maxWidth:400,maxHeight:200,overflowY:"auto"}},"Displays co-crystalized molecules. This option has no effect if the current structure does not contain any co-crystalized bound molecules.")}},{key:"helpTooltipContent",value:function(){return f.createElement("div",{style:{maxWidth:400,maxHeight:200,overflowY:"auto"}},f.createElement("b",null,"Zoom in/out:")," Press and hold the SHIFT key and the left mouse button, and then move the mouse backward/forward.",f.createElement("br",null),f.createElement("b",null,"Pan:")," Press and hold the CTRL key, click and hold the left mouse button, and then move the mouse in the desired direction.",f.createElement("br",null),f.createElement("b",null,"Rotate:")," Press and hold the left mouse button, and then move the mouse in the desired direction to rotate along the x and y axes.",f.createElement("br",null))}},{key:"proteinStyleMenu",value:function(){return f.createElement("span",null,f.createElement("div",{className:"row text-center"},f.createElement("span",null,"Protein Style")),f.createElement("div",{className:"row"},f.createElement("div",{className:"col col-sm-10 col-sm-offset-1"},f.createElement("hr",null))),f.createElement("div",{className:"row"},f.createElement(m.Checkbox,{checked:this.displayBoundMolecules,onChange:this.handleBoundMoleculeChange},"Display bound molecules ",this.defaultInfoTooltip(this.boundMoleculesTooltipContent()))),f.createElement("div",{className:"row"},f.createElement("div",{className:"col col-sm-6"},f.createElement("div",{className:"row"},this.selectionTitle("Scheme")),f.createElement("div",{className:"row"},f.createElement(m.FormControl,{className:F.default["default-option-select"],componentClass:"select",value:""+this.proteinScheme,onChange:this.handleProteinSchemeChange},f.createElement("option",{value:j.ProteinScheme.CARTOON},"cartoon"),f.createElement("option",{value:j.ProteinScheme.SPACE_FILLING},"space-filling"),f.createElement("option",{value:j.ProteinScheme.TRACE},"trace")))),f.createElement("div",{className:"col col-sm-6"},f.createElement("div",{className:"row"},this.selectionTitle("Color",this.proteinColorTooltipContent())),f.createElement("div",{className:"row"},f.createElement(m.FormControl,{className:F.default["default-option-select"],componentClass:"select",value:""+this.proteinColor,onChange:this.handleProteinColorChange},f.createElement("option",{value:j.ProteinColor.UNIFORM},"uniform"),f.createElement("option",{value:j.ProteinColor.SECONDARY_STRUCTURE,disabled:this.colorBySecondaryStructureDisabled},"secondary structure"),f.createElement("option",{value:j.ProteinColor.NC_RAINBOW,disabled:this.colorByNCRainbowDisabled},"N-C rainbow"),f.createElement("option",{value:j.ProteinColor.ATOM_TYPE,disabled:this.colorByAtomTypeDisabled},"atom type"))))))}},{key:"mutationStyleMenu",value:function(){return f.createElement("span",null,f.createElement("div",{className:"row text-center"},f.createElement("span",null,"Mutation Style")),f.createElement("div",{className:"row"},f.createElement("div",{className:"col col-sm-10 col-sm-offset-1"},f.createElement("hr",null))),f.createElement("div",{className:"row"},f.createElement("div",{className:"col col-sm-6"},f.createElement("div",{className:"row"},this.selectionTitle("Side Chain",this.sideChainTooltipContent())),f.createElement("div",{className:"row"},f.createElement(m.FormControl,{className:F.default["default-option-select"],componentClass:"select",value:""+this.sideChain,onChange:this.handleSideChainChange},f.createElement("option",{value:j.SideChain.ALL},"all"),f.createElement("option",{value:j.SideChain.SELECTED},"selected"),f.createElement("option",{value:j.SideChain.NONE},"none")))),f.createElement("div",{className:"col col-sm-6"},f.createElement("div",{className:"row"},this.selectionTitle("Color",this.mutationColorTooltipContent(),"left")),f.createElement("div",{className:"row"},f.createElement(m.FormControl,{className:F.default["default-option-select"],componentClass:"select",value:""+this.mutationColor,onChange:this.handleMutationColorChange},f.createElement("option",{value:j.MutationColor.UNIFORM},"uniform"),f.createElement("option",{value:j.MutationColor.MUTATION_TYPE},"mutation type"),f.createElement("option",{value:j.MutationColor.NONE},"none"))))))}},{key:"topToolbar",value:function(){return f.createElement("div",{className:"row"},f.createElement("div",{className:"col col-sm-6"},f.createElement(m.ButtonGroup,null,f.createElement(E.default,{overlay:f.createElement("span",null,"Download PyMol script"),placement:"top"},f.createElement(m.Button,{className:"btn-sm",onClick:this.handlePyMolDownload},f.createElement("i",{className:"fa fa-cloud-download"})," PyMol")))),f.createElement("div",{className:"col col-sm-6"},f.createElement("span",{className:"pull-right"},"how to pan/zoom/rotate? ",this.defaultInfoTooltip(this.helpTooltipContent(),"left"))))}},{key:"header",value:function(){return f.createElement("div",{className:(0,k.default)("row",F.default.header)},f.createElement("div",{className:"col col-sm-10"},f.createElement("span",null,"3D Structure")),f.createElement("div",{className:"col col-sm-2"},f.createElement("span",{className:"pull-right"},f.createElement("i",{className:(0,k.default)("fa",{"fa-compress":this.isIncreasedSize,"fa-expand":!this.isIncreasedSize}),onClick:this.toggleDoubleSize,style:{marginRight:5,cursor:"pointer"}}),f.createElement("i",{className:"fa fa-minus-circle",onClick:this.toggleCollapse,style:{marginRight:5,cursor:"pointer"}}),f.createElement("i",{className:"fa fa-times-circle",onClick:this.props.onClose,style:{cursor:"pointer"}}))))}},{key:"mainContent",value:function(){return this.pdbId&&this.chainId&&this.residues?f.createElement("span",null,f.createElement("div",{className:"row"},f.createElement(P.default,{pdbId:this.pdbId,chainId:this.chainId,cache:this.props.pdbHeaderCache,truncateText:!0})),f.createElement(g.If,{condition:this.residueWarning.length>0},f.createElement("div",{className:"row"},f.createElement("div",{className:"col col-sm-12 text-center"},f.createElement("span",{className:"text-danger"},this.residueWarning)))),f.createElement("div",{className:"row",style:{paddingTop:5,paddingBottom:5}},f.createElement(O.default,{displayBoundMolecules:this.displayBoundMolecules,proteinScheme:this.proteinScheme,proteinColor:this.proteinColor,sideChain:this.sideChain,mutationColor:this.mutationColor,pdbId:this.pdbId,chainId:this.chainId,residues:this.residues,bounds:this.structureViewerBounds,containerRef:this.containerRefHandler}))):f.createElement("div",{style:{textAlign:"center"}},f.createElement(v.ThreeBounce,{size:25,style:{display:"inline-block",padding:25}}))}},{key:"render",value:function(){return f.createElement(x.default,{handle:".structure-viewer-header"},f.createElement("div",{className:(0,k.default)(F.default["main-3d-panel"],i({},F.default["increased-size-panel"],this.isIncreasedSize))},f.createElement("div",{className:"structure-viewer-header row"},this.header(),f.createElement("hr",{style:{borderTopColor:"#BBBBBB"}})),f.createElement("div",{className:(0,k.default)(F.default.body,i({},F.default["collapsed-panel"],this.isCollapsed))},this.mainContent(),f.createElement("div",{className:"row"},this.topToolbar(),f.createElement("hr",null)),f.createElement("div",{className:"row"},f.createElement("div",{className:"col col-sm-6"},this.proteinStyleMenu()),f.createElement("div",{className:"col col-sm-6"},this.mutationStyleMenu())))))}},{key:"containerRefHandler",value:function(e){this._3dMolDiv=e}},{key:"toggleCollapse",value:function(){this.isCollapsed=!this.isCollapsed}},{key:"toggleDoubleSize",value:function(){this.isIncreasedSize=!this.isIncreasedSize}},{key:"handleProteinSchemeChange",value:function(e){this.proteinScheme=parseInt(e.target.value,10),this.proteinScheme!==j.ProteinScheme.SPACE_FILLING||this.proteinColor!==j.ProteinColor.NC_RAINBOW&&this.proteinColor!==j.ProteinColor.SECONDARY_STRUCTURE?this.proteinScheme!==j.ProteinScheme.TRACE&&this.proteinScheme!==j.ProteinScheme.CARTOON||this.proteinColor!==j.ProteinColor.ATOM_TYPE||(this.proteinColor=j.ProteinColor.UNIFORM):this.proteinColor=j.ProteinColor.UNIFORM}},{key:"handleProteinColorChange",value:function(e){this.proteinColor=parseInt(e.target.value,10)}},{key:"handleSideChainChange",value:function(e){this.sideChain=parseInt(e.target.value,10)}},{key:"handleMutationColorChange",value:function(e){this.mutationColor=parseInt(e.target.value,10)}},{key:"handleBoundMoleculeChange",value:function(){this.displayBoundMolecules=!this.displayBoundMolecules}},{key:"handlePyMolDownload",value:function(){if(this.pdbId&&this.chainId){var e=this.pdbId+"_"+this.chainId+".pml";(0,S.default)(this.pyMolScript,e)}}},{key:"structureViewerBounds",get:function(){var e=void 0,t=void 0;return this.isIncreasedSize?(e=this._3dMolDiv?Math.floor(this._3dMolDiv.offsetWidth*(5/3)):"auto",t=this._3dMolDiv?2*this._3dMolDiv.offsetHeight:350):(e=this._3dMolDiv?Math.floor(this._3dMolDiv.offsetWidth/(5/3)):"auto",t=this._3dMolDiv?this._3dMolDiv.offsetHeight/2:350),{width:e,height:t}}},{key:"pdbId",get:function(){return this.pdbChain?this.pdbChain.pdbId:void 0}},{key:"chainId",get:function(){return this.pdbChain?this.pdbChain.chain:void 0}},{key:"pdbChain",get:function(){var e=this.props.pdbChainDataStore.sortedFilteredSelectedData;return 0===e.length&&(e=this.props.pdbChainDataStore.allData),0===e.length?void 0:e[0]}},{key:"residueWarning",get:function(){var e="";if(0===this.proteinPositions.length||this.residueMappingData&&0===this.residueMappingData.filter(function(e){return null===e||null!==e.data}).length)e="None of the mutations can be mapped onto this structure";else{var t=h.keys(this.selectedMutationsByPosition).length,n=t-this.mappedSelectedPositions.length;1===t&&1===n?e="Selected mutation cannot be mapped onto this structure":n>0&&(e=n+" of the selections cannot be mapped onto this structure")}return e}},{key:"residues",get:function(){var e=this;if(this.residueMappingData){var t=[];return this.residueMappingData.forEach(function(n){if(n&&n.data){var r=e.mutationsByPosition[n.data.queryPosition],o=e.props.mutationDataStore&&(e.props.mutationDataStore.isPositionSelected(n.data.queryPosition)||e.props.mutationDataStore.isPositionHighlighted(n.data.queryPosition))||!1;r&&r.length>0&&t.push({positionRange:{start:{position:n.data.pdbPosition},end:{position:n.data.pdbPosition}},color:(0,M.getColorForProteinImpactType)(r,e.props),highlighted:o})}}),h.uniq(t)}}},{key:"residueMappingData",get:function(){if(0!==this.alignmentIds.length){var e=[];if(this.props.residueMappingCache&&this.props.uniprotId&&this.pdbId&&this.chainId&&this.proteinPositions.length>0){var t=this.props.residueMappingCache.get({uniprotId:this.props.uniprotId,pdbId:this.pdbId,chainId:this.chainId,uniprotPositions:this.proteinPositions});t.result&&(e=t.result)}return e}}},{key:"mappedSelectedPositions",get:function(){var e=this;if(!this.residueMappingData)return[];var t=[];return this.residueMappingData.forEach(function(n){n&&n.data&&e.props.mutationDataStore&&e.props.mutationDataStore.isPositionSelected(n.data.queryPosition)&&t.push(n.data.queryPosition)}),h.uniq(t)}},{key:"alignmentIds",get:function(){var e=[];if(this.pdbChain&&this.props.pdbAlignmentIndex){e=void 0===this.props.pdbAlignmentIndex[this.pdbChain.pdbId][this.pdbChain.chain]?[]:this.props.pdbAlignmentIndex[this.pdbChain.pdbId][this.pdbChain.chain].map(function(e){return e.alignmentId})}return h.uniq(e)}},{key:"mutationsByPosition",get:function(){return this.props.mutationDataStore?(0,M.groupMutationsByProteinStartPos)(this.props.mutationDataStore.sortedFilteredData):{}}},{key:"selectedMutationsByPosition",get:function(){return this.props.mutationDataStore?(0,M.groupMutationsByProteinStartPos)(this.props.mutationDataStore.sortedFilteredSelectedData):{}}},{key:"proteinPositions",get:function(){var e=[];return this.props.mutationDataStore&&this.pdbChain&&(e=(0,M.getProteinStartPositionsByRange)(this.props.mutationDataStore.sortedFilteredData,this.pdbChain.uniprotStart,this.pdbChain.uniprotEnd)),e}},{key:"pyMolScript",get:function(){var e=new N.default,t={displayBoundMolecules:this.displayBoundMolecules,proteinScheme:this.proteinScheme,proteinColor:this.proteinColor,sideChain:this.sideChain,mutationColor:this.mutationColor};return this.pdbId&&this.chainId?e.generateScript(this.pdbId,this.chainId,this.residues||[],t):""}},{key:"colorBySecondaryStructureDisabled",get:function(){return this.proteinScheme===j.ProteinScheme.SPACE_FILLING}},{key:"colorByNCRainbowDisabled",get:function(){return this.proteinScheme===j.ProteinScheme.SPACE_FILLING}},{key:"colorByAtomTypeDisabled",get:function(){return this.proteinScheme!==j.ProteinScheme.SPACE_FILLING}}]),t}(f.Component);L([y.observable],z.prototype,"isCollapsed",void 0),L([y.observable],z.prototype,"isIncreasedSize",void 0),L([y.observable],z.prototype,"proteinScheme",void 0),L([y.observable],z.prototype,"proteinColor",void 0),L([y.observable],z.prototype,"sideChain",void 0),L([y.observable],z.prototype,"mutationColor",void 0),L([y.observable],z.prototype,"displayBoundMolecules",void 0),L([y.computed],z.prototype,"structureViewerBounds",null),L([y.computed],z.prototype,"pdbId",null),L([y.computed],z.prototype,"chainId",null),L([y.computed],z.prototype,"pdbChain",null),L([y.computed],z.prototype,"residueWarning",null),L([y.computed],z.prototype,"residues",null),L([y.computed],z.prototype,"residueMappingData",null),L([y.computed],z.prototype,"mappedSelectedPositions",null),L([y.computed],z.prototype,"alignmentIds",null),L([y.computed],z.prototype,"mutationsByPosition",null),L([y.computed],z.prototype,"selectedMutationsByPosition",null),L([y.computed],z.prototype,"proteinPositions",null),L([y.computed],z.prototype,"pyMolScript",null),L([y.computed],z.prototype,"colorBySecondaryStructureDisabled",null),L([y.computed],z.prototype,"colorByNCRainbowDisabled",null),L([y.computed],z.prototype,"colorByAtomTypeDisabled",null),z=L([b.observer],z),t.default=z},function(e,t,n){!function(t,r){e.exports=r(n(1),n(19))}(0,function(e,t){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";e.exports=n(1).default,e.exports.DraggableCore=n(17).default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(2),f=r(p),d=n(3),h=r(d),m=n(11),g=r(m),v=n(12),y=r(v),b=n(13),w=n(16),x=n(14),_=n(17),S=r(_),C=n(19),k=r(C),A=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onDragStart=function(e,t){if((0,k.default)("Draggable: onDragStart: %j",t),!1===n.props.onStart(e,(0,w.createDraggableData)(n,t)))return!1;n.setState({dragging:!0,dragged:!0})},n.onDrag=function(e,t){if(!n.state.dragging)return!1;(0,k.default)("Draggable: onDrag: %j",t);var r=(0,w.createDraggableData)(n,t),o={x:r.x,y:r.y};if(n.props.bounds){var i=o.x,a=o.y;o.x+=n.state.slackX,o.y+=n.state.slackY;var s=(0,w.getBoundPosition)(n,o.x,o.y),l=u(s,2);o.x=l[0],o.y=l[1],o.slackX=n.state.slackX+(i-o.x),o.slackY=n.state.slackY+(a-o.y),r.x=i,r.y=a,r.deltaX=o.x-n.state.x,r.deltaY=o.y-n.state.y}if(!1===n.props.onDrag(e,r))return!1;n.setState(o)},n.onDragStop=function(e,t){if(!n.state.dragging)return!1;if(!1===n.props.onStop(e,(0,w.createDraggableData)(n,t)))return!1;(0,k.default)("Draggable: onDragStop: %j",t);var r={dragging:!1,slackX:0,slackY:0};if(Boolean(n.props.position)){var o=n.props.position,i=o.x,a=o.y;r.x=i,r.y=a}n.setState(r)},n.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,slackX:0,slackY:0,isElementSVG:!1},n}return s(t,e),c(t,[{key:"componentWillMount",value:function(){!this.props.position||this.props.onDrag||this.props.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}},{key:"componentDidMount",value:function(){"undefined"!=typeof SVGElement&&g.default.findDOMNode(this)instanceof SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillReceiveProps",value:function(e){!e.position||this.props.position&&e.position.x===this.props.position.x&&e.position.y===this.props.position.y||this.setState({x:e.position.x,y:e.position.y})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"render",value:function(){var e,t={},n=null,r=Boolean(this.props.position),i=!r||this.state.dragging,a=this.props.position||this.props.defaultPosition,s={x:(0,w.canDragX)(this)&&i?this.state.x:a.x,y:(0,w.canDragY)(this)&&i?this.state.y:a.y};this.state.isElementSVG?n=(0,b.createSVGTransform)(s):t=(0,b.createCSSTransform)(s);var u=this.props,c=u.defaultClassName,p=u.defaultClassNameDragging,d=u.defaultClassNameDragged,h=(0,y.default)(this.props.children.props.className||"",c,(e={},o(e,p,this.state.dragging),o(e,d,this.state.dragged),e));return f.default.createElement(S.default,l({},this.props,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),f.default.cloneElement(f.default.Children.only(this.props.children),{className:h,style:l({},this.props.children.props.style,t),transform:n}))}}]),t}(f.default.Component);A.displayName="Draggable",A.propTypes=l({},S.default.propTypes,{axis:h.default.oneOf(["both","x","y","none"]),bounds:h.default.oneOfType([h.default.shape({left:h.default.number,right:h.default.number,top:h.default.number,bottom:h.default.number}),h.default.string,h.default.oneOf([!1])]),defaultClassName:h.default.string,defaultClassNameDragging:h.default.string,defaultClassNameDragged:h.default.string,defaultPosition:h.default.shape({x:h.default.number,y:h.default.number}),position:h.default.shape({x:h.default.number,y:h.default.number}),className:x.dontSetMe,style:x.dontSetMe,transform:x.dontSetMe}),A.defaultProps=l({},S.default.defaultProps,{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},position:null}),t.default=A},function(t,n){t.exports=e},function(e,t,n){if("production"!=={DRAGGABLE_DEBUG:void 0}.NODE_ENV){var r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,o=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r};e.exports=n(4)(o,!0)}else e.exports=n(10)()},function(e,t,n){"use strict";var r=n(5),o=n(6),i=n(7),a=n(8),s=n(9);e.exports=function(e,t){function n(e){var t=e&&(S&&e[S]||e[C]);if("function"==typeof t)return t}function l(e,t){return e===t?0!==e||1/e==1/t:e!==e&&t!==t}function u(e){this.message=e,this.stack=""}function c(e){function n(n,l,c,p,f,d,h){if(p=p||k,d=d||c,h!==a)if(t)o(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else if("production"!=={DRAGGABLE_DEBUG:void 0}.NODE_ENV&&"undefined"!=typeof console){var m=p+":"+c;!r[m]&&s<3&&(i(!1,"You are manually calling a React.PropTypes validation function for the `%s` prop on `%s`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details.",d,p),r[m]=!0,s++)}return null==l[c]?n?new u(null===l[c]?"The "+f+" `"+d+"` is marked as required in `"+p+"`, but its value is `null`.":"The "+f+" `"+d+"` is marked as required in `"+p+"`, but its value is `undefined`."):null:e(l,c,p,f,d)}if("production"!=={DRAGGABLE_DEBUG:void 0}.NODE_ENV)var r={},s=0;var l=n.bind(null,!1);return l.isRequired=n.bind(null,!0),l}function p(e){function t(t,n,r,o,i,a){var s=t[n];if(w(s)!==e)return new u("Invalid "+o+" `"+i+"` of type `"+x(s)+"` supplied to `"+r+"`, expected `"+e+"`.");return null}return c(t)}function f(e){function t(t,n,r,o,i){if("function"!=typeof e)return new u("Property `"+i+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var s=t[n];if(!Array.isArray(s)){return new u("Invalid "+o+" `"+i+"` of type `"+w(s)+"` supplied to `"+r+"`, expected an array.")}for(var l=0;l<s.length;l++){var c=e(s,l,r,o,i+"["+l+"]",a);if(c instanceof Error)return c}return null}return c(t)}function d(e){function t(t,n,r,o,i){if(!(t[n]instanceof e)){var a=e.name||k;return new u("Invalid "+o+" `"+i+"` of type `"+_(t[n])+"` supplied to `"+r+"`, expected instance of `"+a+"`.")}return null}return c(t)}function h(e){function t(t,n,r,o,i){for(var a=t[n],s=0;s<e.length;s++)if(l(a,e[s]))return null;return new u("Invalid "+o+" `"+i+"` of value `"+a+"` supplied to `"+r+"`, expected one of "+JSON.stringify(e)+".")}return Array.isArray(e)?c(t):("production"!=={DRAGGABLE_DEBUG:void 0}.NODE_ENV&&i(!1,"Invalid argument supplied to oneOf, expected an instance of array."),r.thatReturnsNull)}function m(e){function t(t,n,r,o,i){if("function"!=typeof e)return new u("Property `"+i+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var s=t[n],l=w(s);if("object"!==l)return new u("Invalid "+o+" `"+i+"` of type `"+l+"` supplied to `"+r+"`, expected an object.");for(var c in s)if(s.hasOwnProperty(c)){var p=e(s,c,r,o,i+"."+c,a);if(p instanceof Error)return p}return null}return c(t)}function g(e){function t(t,n,r,o,i){for(var s=0;s<e.length;s++){if(null==(0,e[s])(t,n,r,o,i,a))return null}return new u("Invalid "+o+" `"+i+"` supplied to `"+r+"`.")}return Array.isArray(e)?c(t):("production"!=={DRAGGABLE_DEBUG:void 0}.NODE_ENV&&i(!1,"Invalid argument supplied to oneOfType, expected an instance of array."),r.thatReturnsNull)}function v(e){function t(t,n,r,o,i){var s=t[n],l=w(s);if("object"!==l)return new u("Invalid "+o+" `"+i+"` of type `"+l+"` supplied to `"+r+"`, expected `object`.");for(var c in e){var p=e[c];if(p){var f=p(s,c,r,o,i+"."+c,a);if(f)return f}}return null}return c(t)}function y(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(y);if(null===t||e(t))return!0;var r=n(t);if(!r)return!1;var o,i=r.call(t);if(r!==t.entries){for(;!(o=i.next()).done;)if(!y(o.value))return!1}else for(;!(o=i.next()).done;){var a=o.value;if(a&&!y(a[1]))return!1}return!0;default:return!1}}function b(e,t){return"symbol"===e||("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}function w(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":b(t,e)?"symbol":t}function x(e){var t=w(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function _(e){return e.constructor&&e.constructor.name?e.constructor.name:k}var S="function"==typeof Symbol&&Symbol.iterator,C="@@iterator",k="<<anonymous>>",A={array:p("array"),bool:p("boolean"),func:p("function"),number:p("number"),object:p("object"),string:p("string"),symbol:p("symbol"),any:function(){return c(r.thatReturnsNull)}(),arrayOf:f,element:function(){function t(t,n,r,o,i){var a=t[n];if(!e(a)){return new u("Invalid "+o+" `"+i+"` of type `"+w(a)+"` supplied to `"+r+"`, expected a single ReactElement.")}return null}return c(t)}(),instanceOf:d,node:function(){function e(e,t,n,r,o){return y(e[t])?null:new u("Invalid "+r+" `"+o+"` supplied to `"+n+"`, expected a ReactNode.")}return c(e)}(),objectOf:m,oneOf:h,oneOfType:g,shape:v};return u.prototype=Error.prototype,A.checkPropTypes=s,A.PropTypes=A,A}},function(e,t){"use strict";function n(e){return function(){return e}}var r=function(){};r.thatReturns=n,r.thatReturnsFalse=n(!1),r.thatReturnsTrue=n(!0),r.thatReturnsNull=n(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(e){return e},e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r,i,a,s,l){if(o(t),!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,a,s,l],p=0;u=new Error(t.replace(/%s/g,function(){return c[p++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}}var o=function(e){};"production"!=={DRAGGABLE_DEBUG:void 0}.NODE_ENV&&(o=function(e){if(void 0===e)throw new Error("invariant requires an error message argument")}),e.exports=r},function(e,t,n){"use strict";var r=n(5),o=r;"production"!=={DRAGGABLE_DEBUG:void 0}.NODE_ENV&&function(){var e=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=0,i="Warning: "+e.replace(/%s/g,function(){return n[o++]});"undefined"!=typeof console&&console.error(i);try{throw new Error(i)}catch(e){}};o=function(t,n){if(void 0===n)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(0!==n.indexOf("Failed Composite propType: ")&&!t){for(var r=arguments.length,o=Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];e.apply(void 0,[n].concat(o))}}}(),e.exports=o},function(e,t){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";function r(e,t,n,r,l){if("production"!=={DRAGGABLE_DEBUG:void 0}.NODE_ENV)for(var u in e)if(e.hasOwnProperty(u)){var c;try{o("function"==typeof e[u],"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",r||"React class",n,u),c=e[u](t,u,r,n,null,a)}catch(e){c=e}if(i(!c||c instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",r||"React class",n,u,typeof c),c instanceof Error&&!(c.message in s)){s[c.message]=!0;var p=l?l():"";i(!1,"Failed %s type: %s%s",n,c.message,null!=p?p:"")}}}if("production"!=={DRAGGABLE_DEBUG:void 0}.NODE_ENV)var o=n(6),i=n(7),a=n(8),s={};e.exports=r},function(e,t,n){"use strict";var r=n(5),o=n(6);e.exports=function(){function e(){o(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t};return n.checkPropTypes=r,n.PropTypes=n,n}},function(e,n){e.exports=t},function(e,t,n){var r,o;!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r))e.push(n.apply(null,r));else if("object"===o)for(var a in r)i.call(r,a)&&r[a]&&e.push(a)}}return e.join(" ")}var i={}.hasOwnProperty;void 0!==e&&e.exports?e.exports=n:(r=[],void 0!==(o=function(){return n}.apply(t,r))&&(e.exports=o))}()},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){return C||(C=(0,x.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(t){return(0,x.isFunction)(e[t])})),e[C].call(e,t)}function i(e,t,n){var r=e;do{if(o(r,t))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function a(e,t,n){e&&(e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener?e.addEventListener(t,n,!0):e["on"+t]=n)}function s(e,t,n){e&&(e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener?e.removeEventListener(t,n,!0):e["on"+t]=null)}function l(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,x.int)(n.borderTopWidth),t+=(0,x.int)(n.borderBottomWidth)}function u(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,x.int)(n.borderLeftWidth),t+=(0,x.int)(n.borderRightWidth)}function c(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,x.int)(n.paddingTop),t-=(0,x.int)(n.paddingBottom)}function p(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,x.int)(n.paddingLeft),t-=(0,x.int)(n.paddingRight)}function f(e,t){var n=t===t.ownerDocument.body,r=n?{left:0,top:0}:t.getBoundingClientRect();return{x:e.clientX+t.scrollLeft-r.left,y:e.clientY+t.scrollTop-r.top}}function d(e){var t=e.x,n=e.y;return r({},(0,_.browserPrefixToKey)("transform",S.default),"translate("+t+"px,"+n+"px)")}function h(e){return"translate("+e.x+","+e.y+")"}function m(e,t){return e.targetTouches&&(0,x.findInArray)(e.targetTouches,function(e){return t===e.identifier})||e.changedTouches&&(0,x.findInArray)(e.changedTouches,function(e){return t===e.identifier})}function g(e){return e.targetTouches&&e.targetTouches[0]?e.targetTouches[0].identifier:e.changedTouches&&e.changedTouches[0]?e.changedTouches[0].identifier:void 0}function v(e){var t=e.getAttribute("style")||"";M.test(t)||e.setAttribute("style",t+E)}function y(e){var t=e.getAttribute("style")||"";e.setAttribute("style",t.replace(M,""))}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return w({touchAction:"none"},e)}Object.defineProperty(t,"__esModule",{value:!0});var w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.matchesSelector=o,t.matchesSelectorAndParentsTo=i,t.addEvent=a,t.removeEvent=s,t.outerHeight=l,t.outerWidth=u,t.innerHeight=c,t.innerWidth=p,t.offsetXYFromParent=f,t.createCSSTransform=d,t.createSVGTransform=h,t.getTouch=m,t.getTouchIdentifier=g,t.addUserSelectStyles=v,t.removeUserSelectStyles=y,t.styleHacks=b;var x=n(14),_=n(15),S=function(e){return e&&e.__esModule?e:{default:e}}(_),C="",k=(0,_.getPrefix)("user-select"),A=(0,_.browserPrefixToStyle)("user-select",k),E=";"+A+": none;",M=new RegExp(";?"+A+": none;")},function(e,t){"use strict";function n(e,t){for(var n=0,r=e.length;n<r;n++)if(t.apply(t,[e[n],n,e]))return e[n]}function r(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.call(e)}function o(e){return"number"==typeof e&&!isNaN(e)}function i(e){return parseInt(e,10)}function a(e,t,n){if(e[t])return new Error("Invalid prop "+t+" passed to "+n+" - do not set this, set it on the child.")}Object.defineProperty(t,"__esModule",{value:!0}),t.findInArray=n,t.isFunction=r,t.isNum=o,t.int=i,t.dontSetMe=a},function(e,t){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"==typeof window||void 0===window.document)return"";var t=window.document.documentElement.style;if(e in t)return"";for(var n=0;n<a.length;n++)if(r(e,a[n])in t)return a[n];return""}function r(e,t){return t?""+t+i(e):e}function o(e,t){return t?"-"+t.toLowerCase()+"-"+e:e}function i(e){for(var t="",n=!0,r=0;r<e.length;r++)n?(t+=e[r].toUpperCase(),n=!1):"-"===e[r]?n=!0:t+=e[r];return t}Object.defineProperty(t,"__esModule",{value:!0}),t.getPrefix=n,t.browserPrefixToKey=r,t.browserPrefixToStyle=o;var a=["Moz","Webkit","O","ms"];t.default=n()},function(e,t,n){"use strict";function r(e,t,n){if(!e.props.bounds)return[t,n];var r=e.props.bounds;r="string"==typeof r?r:c(r);var o=d.default.findDOMNode(e);if("string"==typeof r){var i=o.ownerDocument,a=i.defaultView,s=void 0;if("parent"===r)s=o.parentNode;else if(!(s=i.querySelector(r)))throw new Error('Bounds selector "'+r+'" could not find an element.');var l=a.getComputedStyle(o),u=a.getComputedStyle(s);r={left:-o.offsetLeft+(0,p.int)(u.paddingLeft)+(0,p.int)(l.marginLeft),top:-o.offsetTop+(0,p.int)(u.paddingTop)+(0,p.int)(l.marginTop),right:(0,h.innerWidth)(s)-(0,h.outerWidth)(o)-o.offsetLeft+(0,p.int)(u.paddingRight)-(0,p.int)(l.marginRight),bottom:(0,h.innerHeight)(s)-(0,h.outerHeight)(o)-o.offsetTop+(0,p.int)(u.paddingBottom)-(0,p.int)(l.marginBottom)}}return(0,p.isNum)(r.right)&&(t=Math.min(t,r.right)),(0,p.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,p.isNum)(r.left)&&(t=Math.max(t,r.left)),(0,p.isNum)(r.top)&&(n=Math.max(n,r.top)),[t,n]}function o(e,t,n){return[Math.round(t/e[0])*e[0],Math.round(n/e[1])*e[1]]}function i(e){return"both"===e.props.axis||"x"===e.props.axis}function a(e){return"both"===e.props.axis||"y"===e.props.axis}function s(e,t,n){var r="number"==typeof t?(0,h.getTouch)(e,t):null;if("number"==typeof t&&!r)return null;var o=d.default.findDOMNode(n),i=n.props.offsetParent||o.offsetParent||o.ownerDocument.body;return(0,h.offsetXYFromParent)(r||e,i)}function l(e,t,n){var r=e.state;return(0,p.isNum)(r.lastX)?{node:d.default.findDOMNode(e),deltaX:t-r.lastX,deltaY:n-r.lastY,lastX:r.lastX,lastY:r.lastY,x:t,y:n}:{node:d.default.findDOMNode(e),deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}}function u(e,t){return{node:t.node,x:e.state.x+t.deltaX,y:e.state.y+t.deltaY,deltaX:t.deltaX,deltaY:t.deltaY,lastX:e.state.x,lastY:e.state.y}}function c(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}Object.defineProperty(t,"__esModule",{value:!0}),t.getBoundPosition=r,t.snapToGrid=o,t.canDragX=i,t.canDragY=a,t.getControlPosition=s,t.createCoreData=l,t.createDraggableData=u;var p=n(14),f=n(11),d=function(e){return e&&e.__esModule?e:{default:e}}(f),h=n(13)},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),c=r(u),p=n(3),f=r(p),d=n(11),h=r(d),m=n(13),g=n(16),v=n(14),y=n(19),b=r(y),w={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},x=w.mouse,_=function(e){function t(){var e,n,r,a;o(this,t);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.state={dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null},r.handleDragStart=function(e){if(r.props.onMouseDown(e),!r.props.allowAnyClick&&"number"==typeof e.button&&0!==e.button)return!1;var t=h.default.findDOMNode(r),n=t.ownerDocument;if(!(r.props.disabled||!(e.target instanceof n.defaultView.Node)||r.props.handle&&!(0,m.matchesSelectorAndParentsTo)(e.target,r.props.handle,t)||r.props.cancel&&(0,m.matchesSelectorAndParentsTo)(e.target,r.props.cancel,t))){var o=(0,m.getTouchIdentifier)(e);r.setState({touchIdentifier:o});var i=(0,g.getControlPosition)(e,o,r);if(null!=i){var a=i.x,s=i.y,l=(0,g.createCoreData)(r,a,s);(0,b.default)("DraggableCore: handleDragStart: %j",l),(0,b.default)("calling",r.props.onStart);!1!==r.props.onStart(e,l)&&(r.props.enableUserSelectHack&&(0,m.addUserSelectStyles)(n.body),r.setState({dragging:!0,lastX:a,lastY:s}),(0,m.addEvent)(n,x.move,r.handleDrag),(0,m.addEvent)(n,x.stop,r.handleDragStop))}}},r.handleDrag=function(e){"touchmove"===e.type&&e.preventDefault();var t=(0,g.getControlPosition)(e,r.state.touchIdentifier,r);if(null!=t){var n=t.x,o=t.y;if(Array.isArray(r.props.grid)){var i=n-r.state.lastX,a=o-r.state.lastY,l=(0,g.snapToGrid)(r.props.grid,i,a),u=s(l,2);if(i=u[0],a=u[1],!i&&!a)return;n=r.state.lastX+i,o=r.state.lastY+a}var c=(0,g.createCoreData)(r,n,o);(0,b.default)("DraggableCore: handleDrag: %j",c);if(!1!==r.props.onDrag(e,c))r.setState({lastX:n,lastY:o});else try{r.handleDragStop(new MouseEvent("mouseup"))}catch(e){var p=document.createEvent("MouseEvents");p.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),r.handleDragStop(p)}}},r.handleDragStop=function(e){if(r.state.dragging){var t=(0,g.getControlPosition)(e,r.state.touchIdentifier,r);if(null!=t){var n=t.x,o=t.y,i=(0,g.createCoreData)(r,n,o),a=h.default.findDOMNode(r),s=a.ownerDocument;r.props.enableUserSelectHack&&(0,m.removeUserSelectStyles)(s.body),(0,b.default)("DraggableCore: handleDragStop: %j",i),r.setState({dragging:!1,lastX:NaN,lastY:NaN}),r.props.onStop(e,i),(0,b.default)("DraggableCore: Removing handlers"),(0,m.removeEvent)(s,x.move,r.handleDrag),(0,m.removeEvent)(s,x.stop,r.handleDragStop)}}},r.onMouseDown=function(e){return x=w.mouse,r.handleDragStart(e)},r.onMouseUp=function(e){return x=w.mouse,r.handleDragStop(e)},r.onTouchStart=function(e){return x=w.touch,r.handleDragStart(e)},r.onTouchEnd=function(e){return x=w.touch,r.handleDragStop(e)},a=n,i(r,a)}return a(t,e),l(t,[{key:"componentWillUnmount",value:function(){var e=h.default.findDOMNode(this),t=e.ownerDocument;(0,m.removeEvent)(t,w.mouse.move,this.handleDrag),(0,m.removeEvent)(t,w.touch.move,this.handleDrag),(0,m.removeEvent)(t,w.mouse.stop,this.handleDragStop),(0,m.removeEvent)(t,w.touch.stop,this.handleDragStop),this.props.enableUserSelectHack&&(0,m.removeUserSelectStyles)(t.body)}},{key:"render",value:function(){return c.default.cloneElement(c.default.Children.only(this.props.children),{style:(0,m.styleHacks)(this.props.children.props.style),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}]),t}(c.default.Component);_.displayName="DraggableCore",_.propTypes={allowAnyClick:f.default.bool,disabled:f.default.bool,enableUserSelectHack:f.default.bool,offsetParent:function(t,n){if(e.browser&&t[n]&&1!==t[n].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:f.default.arrayOf(f.default.number),handle:f.default.string,cancel:f.default.string,onStart:f.default.func,onDrag:f.default.func,onStop:f.default.func,onMouseDown:f.default.func,className:v.dontSetMe,style:v.dontSetMe,transform:v.dontSetMe},_.defaultProps={allowAnyClick:!1,cancel:null,disabled:!1,enableUserSelectHack:!0,offsetParent:null,handle:null,grid:null,transform:null,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){}},t.default=_}).call(t,n(18))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function i(e){if(p===clearTimeout)return clearTimeout(e);if((p===r||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(e);try{return p(e)}catch(t){try{return p.call(null,e)}catch(t){return p.call(this,e)}}}function a(){m&&d&&(m=!1,d.length?h=d.concat(h):g=-1,h.length&&s())}function s(){if(!m){var e=o(a);m=!0;for(var t=h.length;t;){for(d=h,h=[];++g<t;)d&&d[g].run();g=-1,t=h.length}d=null,m=!1,i(e)}}function l(e,t){this.fun=e,this.array=t}function u(){}var c,p,f=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{p="function"==typeof clearTimeout?clearTimeout:r}catch(e){p=r}}();var d,h=[],m=!1,g=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new l(e,t)),1!==h.length||m||o(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=u,f.addListener=u,f.once=u,f.off=u,f.removeListener=u,f.removeAllListeners=u,f.emit=u,f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t,n){"use strict";function r(){}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r}])})},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1),c=r(u),p=n(3),f=r(p),d=n(10),h=n(972),m=function(e){return e&&e.__esModule?e:{default:e}}(h),g=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},v=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.divHandler=e.divHandler.bind(e),e}return a(t,e),s(t,[{key:"render",value:function(){return c.createElement("div",{ref:this.divHandler,style:{height:this.props.bounds.height,width:this.props.bounds.width,padding:0},className:"borderedChart"})}},{key:"componentDidMount",value:function(){this._3dMolDiv&&(this.wrapper=new m.default(this._3dMolDiv,this.props),this.wrapper.init(this.props.pdbId,this.props.chainId,this.props.residues),this._pdbId=this.props.pdbId)}},{key:"componentDidUpdate",value:function(e){this.wrapper&&(this.props.pdbId!==this._pdbId?(this._pdbId=this.props.pdbId,this.wrapper.loadPdb(this._pdbId,this.props.chainId,this.props.residues,this.props)):this.wrapper.updateViewer(this.props.chainId,this.props.residues,this.props),f.isEqual(this.props.bounds,e.bounds)||this.wrapper.resize())}},{key:"divHandler",value:function(e){this._3dMolDiv=e,this.props.containerRef&&this.props.containerRef(e)}}]),t}(c.Component);v=g([d.observer],v),t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(3),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),f=n(84),d=r(f),h=n(8),m=n(892),g=r(m),v=n(904),y=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},b=n(973),w=function(e){function t(e,n,r){o(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a._loadingPdb=!1,a.stateChangeReaction=(0,h.reaction)(function(){return a.state},function(e){a.onStateChange(e)}),a._3dMol=r||b,a._3dMolDiv=e,a.props=Object.assign({},g.default.defaultProps,n),a.state={pdbId:"",chainId:"",residues:[]},a._prevState={pdbId:"",chainId:"",residues:[]},a.updateViewer=a.updateViewer.bind(a),a}return a(t,e),s(t,[{key:"setState",value:function(e){this._prevState=Object.assign({},this.state),this.state=Object.assign({},this.state,e)}},{key:"onStateChange",value:function(e){this._prevState&&!this._loadingPdb&&(this.updateVisualStyle(e.residues,e.chainId,this.props),this._3dMolViewer.render())}},{key:"setProps",value:function(e){this._prevProps=this.props,this.props=e}},{key:"init",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.state.residues,r=arguments[3];if(r?this._3dMolViewer=r:this._3dMolDiv&&(this._3dMolViewer=this._3dMol.createViewer((0,d.default)(this._3dMolDiv),{defaultcolors:this._3dMol.elementColors.rasmol})),this._3dMolViewer){var o=this.formatColor(this.props.backgroundColor||g.default.defaultProps.backgroundColor);this._3dMolViewer.setBackgroundColor(o),this.loadPdb(e,t,n)}}},{key:"loadPdb",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.state.residues,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.props,i={doAssembly:!0,pdbUri:o.pdbUri};this._loadingPdb=!0,this.setState({pdbId:e,chainId:t,residues:r}),this._3dMolViewer?(this._3dMolViewer.clear(),this._3dMol.download("pdb:"+e.toUpperCase(),this._3dMolViewer,i,function(){n._loadingPdb=!1,n.onStateChange(n.state)})):this._loadingPdb=!1}},{key:"updateViewer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.residues,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props;this.setProps(n),this.setState({chainId:e,residues:t})}},{key:"resize",value:function(){this._3dMolViewer&&this._3dMolViewer.resize()}},{key:"selectAll",value:function(){return{}}},{key:"selectChain",value:function(e){return{chain:e}}},{key:"setScheme",value:function(e,n){var r=t.PROTEIN_SCHEME_PRESETS[e];return this.applyStyleForSelector(n,r),r}},{key:"setColor",value:function(e,t,n){var r=this.formatColor(e);n&&(p.each(n,function(e){e.color=r}),this.applyStyleForSelector(t,n))}},{key:"formatColor",value:function(e){return e.replace("#","0x")}},{key:"setTransparency",value:function(e,t,n){n&&(this.addTransparencyToStyle(e,n),this.applyStyleForSelector(t,n))}},{key:"addTransparencyToStyle",value:function(e,t){p.each(t,function(t,n){"sphere"!==n&&(t.opacity=(10-e)/10)})}},{key:"rainbowColor",value:function(e,t){this.setColor("spectrum",e,t)}},{key:"cpkColor",value:function(e,t){var n=this;t&&(p.each(t,function(e){delete e.color,e.colors=n._3dMol.elementColors.defaultColors}),this.applyStyleForSelector(e,t))}},{key:"selectAlphaHelix",value:function(e){return{chain:e,ss:"h"}}},{key:"selectBetaSheet",value:function(e){return{chain:e,ss:"s"}}},{key:"hideBoundMolecules",value:function(){var e={resn:t.ALL_PROTEINS,invert:!0},n={sphere:{hidden:!0}};this._3dMolViewer.setStyle(e,n)}},{key:"enableBallAndStick",value:function(e,n,r){var o=Object.assign({},r,t.PROTEIN_SCHEME_PRESETS[m.ProteinScheme.BALL_AND_STICK]);if(e){var i=this.formatColor(e);o.sphere||(o.sphere={}),o.sphere.color=i,o.stick||(o.stick={}),o.stick.color=i}this._3dMolViewer.setStyle(n,o)}},{key:"updateResidueStyle",value:function(e,n){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props,i=arguments[3],a=g.default.defaultProps;i||(i=t.PROTEIN_SCHEME_PRESETS[o.proteinScheme],this.addTransparencyToStyle(o.chainTranslucency||a.chainTranslucency,i)),this.residuesToUpdate.forEach(function(e){var t=e.residue,s=r.selectResidue(e.selector,n),l=void 0;l=t.highlighted?r.props.highlightColor||a.highlightColor:o.mutationColor===m.MutationColor.MUTATION_TYPE?t.color:o.mutationColor===m.MutationColor.UNIFORM?o.uniformMutationColor||a.uniformMutationColor:o.chainColor||a.chainColor,r.setColor(l,s,i),(o.sideChain===m.SideChain.ALL||!0===t.highlighted&&o.sideChain===m.SideChain.SELECTED)&&r.updateSideChain(n,e.selector,o.proteinScheme,l,i)})}},{key:"updateScheme",value:function(e){return this.needToUpdateResiduesOnly?void 0:l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateScheme",this).call(this,e)}},{key:"updateBaseVisualStyle",value:function(e,n){this.needToUpdateResiduesOnly||l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateBaseVisualStyle",this).call(this,e,n)}},{key:"updateChainVisualStyle",value:function(e,n,r){this.needToUpdateResiduesOnly||l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateChainVisualStyle",this).call(this,e,n,r)}},{key:"updateVisualStyle",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props;l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateVisualStyle",this).call(this,e,n,r)}},{key:"selectResidues",value:function(e,t){return{rescode:e,chain:t}}},{key:"selectResidue",value:function(e,t){return Object.assign({chain:t},e)}},{key:"selectSideChains",value:function(e,t){return this.selectResidue(e,t)}},{key:"updateSideChain",value:function(e,t,n,r,o){if(n!==m.ProteinScheme.SPACE_FILLING){var i=this.selectSideChains(t,e);this.enableBallAndStick(r,i,o)}}},{key:"applyStyleForSelector",value:function(e,t){this._3dMolViewer.setStyle(e,t)}},{key:"residuesToUpdate",get:function(){return this.needToUpdateResiduesOnly?(0,v.findUpdatedResidues)(this.currentResidueToPositionMap,this.prevResidueToPositionMap):p.flatten(p.values(this.currentResidueToPositionMap))}},{key:"needToUpdateResiduesOnly",get:function(){return this._prevState.pdbId===this.state.pdbId&&this._prevState.chainId===this.state.chainId&&this.visualPropsUnchanged&&this.residuePositionsUnchanged}},{key:"residuePositionsUnchanged",get:function(){return p.isEqual(p.keys(this.currentResidueToPositionMap).sort(),p.keys(this.prevResidueToPositionMap).sort())}},{key:"currentResidueToPositionMap",get:function(){return(0,v.generateResiduePosToSelectorMap)(this.state.residues)}},{key:"prevResidueToPositionMap",get:function(){return(0,v.generateResiduePosToSelectorMap)(this._prevState.residues)}},{key:"visualPropsUnchanged",get:function(){return p.isEqual(p.omit(this.props,["pdbId","chainId","residues"]),p.omit(this._prevProps,["pdbId","chainId","residues"]))}}],[{key:"PROTEIN_SCHEME_PRESETS",get:function(){var e={};return e[m.ProteinScheme.CARTOON]={cartoon:{}},e[m.ProteinScheme.TRACE]={cartoon:{style:"trace"}},e[m.ProteinScheme.SPACE_FILLING]={sphere:{scale:.6}},e[m.ProteinScheme.BALL_AND_STICK]={stick:{},sphere:{scale:.25}},e[m.ProteinScheme.RIBBON]={cartoon:{style:"ribbon"}},e}},{key:"ALL_PROTEINS",get:function(){var e=["asp","glu","arg","lys","his","asn","thr","cys","gln","tyr","ser","gly","ala","leu","val","ile","met","trp","phe","pro"],t=e.map(function(e){return e.toUpperCase()});return e.concat(t)}}]),t}(g.default);t.default=w,y([h.observable],w.prototype,"props",void 0),y([h.observable],w.prototype,"_prevProps",void 0),y([h.observable],w.prototype,"state",void 0),y([h.observable],w.prototype,"_prevState",void 0),y([h.action],w.prototype,"setState",null),y([h.computed],w.prototype,"residuesToUpdate",null),y([h.computed],w.prototype,"needToUpdateResiduesOnly",null),y([h.computed],w.prototype,"residuePositionsUnchanged",null),y([h.computed],w.prototype,"currentResidueToPositionMap",null),y([h.computed],w.prototype,"prevResidueToPositionMap",null),y([h.computed],w.prototype,"visualPropsUnchanged",null)},function(e,t){(function(){!function(e,t){!function(e){"use strict";function t(e,t,n){for(var r=(e.byteLength,0),o=n.length;r<o;r++){var i=n.charCodeAt(r);if(i<128)e.setUint8(t++,i>>>0&127|0);else if(i<2048)e.setUint8(t++,i>>>6&31|192),e.setUint8(t++,i>>>0&63|128);else if(i<65536)e.setUint8(t++,i>>>12&15|224),e.setUint8(t++,i>>>6&63|128),e.setUint8(t++,i>>>0&63|128);else{if(!(i<1114112))throw new Error("bad codepoint "+i);e.setUint8(t++,i>>>18&7|240),e.setUint8(t++,i>>>12&63|128),e.setUint8(t++,i>>>6&63|128),e.setUint8(t++,i>>>0&63|128)}}}function n(e){for(var t=0,n=0,r=e.length;n<r;n++){var o=e.charCodeAt(n);if(o<128)t+=1;else if(o<2048)t+=2;else if(o<65536)t+=3;else{if(!(o<1114112))throw new Error("bad codepoint "+o);t+=4}}return t}function r(e,o,i){var a=typeof e;if("string"===a){var s=n(e);if(s<32)return o.setUint8(i,160|s),t(o,i+1,e),1+s;if(s<256)return o.setUint8(i,217),o.setUint8(i+1,s),t(o,i+2,e),2+s;if(s<65536)return o.setUint8(i,218),o.setUint16(i+1,s),t(o,i+3,e),3+s;if(s<4294967296)return o.setUint8(i,219),o.setUint32(i+1,s),t(o,i+5,e),5+s}if(e instanceof Uint8Array){var s=e.byteLength,l=new Uint8Array(o.buffer);if(s<256)return o.setUint8(i,196),o.setUint8(i+1,s),l.set(e,i+2),2+s;if(s<65536)return o.setUint8(i,197),o.setUint16(i+1,s),l.set(e,i+3),3+s;if(s<4294967296)return o.setUint8(i,198),o.setUint32(i+1,s),l.set(e,i+5),5+s}if("number"===a){if(!isFinite(e))throw new Error("Number not finite: "+e);if(Math.floor(e)!==e)return o.setUint8(i,203),o.setFloat64(i+1,e),9;if(e>=0){if(e<128)return o.setUint8(i,e),1;if(e<256)return o.setUint8(i,204),o.setUint8(i+1,e),2;if(e<65536)return o.setUint8(i,205),o.setUint16(i+1,e),3;if(e<4294967296)return o.setUint8(i,206),o.setUint32(i+1,e),5;throw new Error("Number too big 0x"+e.toString(16))}if(e>=-32)return o.setInt8(i,e),1;if(e>=-128)return o.setUint8(i,208),o.setInt8(i+1,e),2;if(e>=-32768)return o.setUint8(i,209),o.setInt16(i+1,e),3;if(e>=-2147483648)return o.setUint8(i,210),o.setInt32(i+1,e),5;throw new Error("Number too small -0x"+(-e).toString(16).substr(1))}if(null===e)return o.setUint8(i,192),1;if("boolean"===a)return o.setUint8(i,e?195:194),1;if("object"===a){var s,u=0,c=Array.isArray(e);if(c)s=e.length;else{var p=Object.keys(e);s=p.length}var u;if(s<16?(o.setUint8(i,s|(c?144:128)),u=1):s<65536?(o.setUint8(i,c?220:222),o.setUint16(i+1,s),u=3):s<4294967296&&(o.setUint8(i,c?221:223),o.setUint32(i+1,s),u=5),c)for(var f=0;f<s;f++)u+=r(e[f],o,i+u);else for(var f=0;f<s;f++){var d=p[f];u+=r(d,o,i+u),u+=r(e[d],o,i+u)}return u}throw new Error("Unknown type "+a)}function o(e){var t=typeof e;if("string"===t){var r=n(e);if(r<32)return 1+r;if(r<256)return 2+r;if(r<65536)return 3+r;if(r<4294967296)return 5+r}if(e instanceof Uint8Array){var r=e.byteLength;if(r<256)return 2+r;if(r<65536)return 3+r;if(r<4294967296)return 5+r}if("number"===t){if(Math.floor(e)!==e)return 9;if(e>=0){if(e<128)return 1;if(e<256)return 2;if(e<65536)return 3;if(e<4294967296)return 5;throw new Error("Number too big 0x"+e.toString(16))}if(e>=-32)return 1;if(e>=-128)return 2;if(e>=-32768)return 3;if(e>=-2147483648)return 5;throw new Error("Number too small -0x"+e.toString(16).substr(1))}if("boolean"===t||null===e)return 1;if("object"===t){var r,i=0;if(Array.isArray(e)){r=e.length;for(var a=0;a<r;a++)i+=o(e[a])}else{var s=Object.keys(e);r=s.length;for(var a=0;a<r;a++){var l=s[a];i+=o(l)+o(e[l])}}if(r<16)return 1+i;if(r<65536)return 3+i;if(r<4294967296)return 5+i;throw new Error("Array or object too long 0x"+r.toString(16))}throw new Error("Unknown type "+t)}function i(e){var t=new ArrayBuffer(o(e));return r(e,new DataView(t),0),new Uint8Array(t)}function a(e,t,n){return t?new e(t.buffer,t.byteOffset,t.byteLength/(n||1)):void 0}function s(e){return a(DataView,e)}function l(e){return a(Uint8Array,e)}function u(e){return a(Int8Array,e)}function c(e){return a(Int32Array,e,4)}function p(e){return a(Float32Array,e,4)}function f(e,t){var n=e.length/2;t||(t=new Int16Array(n));for(var r=0,o=0;r<n;++r,o+=2)t[r]=e[o]<<8^e[o+1]<<0;return t}function d(e,t){var n=e.length;t||(t=new Uint8Array(2*n));for(var r=s(t),o=0;o<n;++o)r.setInt16(2*o,e[o]);return l(t)}function h(e,t){var n=e.length/4;t||(t=new Int32Array(n));for(var r=0,o=0;r<n;++r,o+=4)t[r]=e[o]<<24^e[o+1]<<16^e[o+2]<<8^e[o+3]<<0;return t}function m(e,t){var n=e.length;t||(t=new Uint8Array(4*n));for(var r=s(t),o=0;o<n;++o)r.setInt32(4*o,e[o]);return l(t)}function g(e,t){var n=e.length;t||(t=new Float32Array(n/4));for(var r=s(t),o=s(e),i=0,a=0,l=n/4;i<l;++i,a+=4)r.setFloat32(a,o.getFloat32(a),!0);return t}function v(e,t,n){var r=e.length,o=1/t;n||(n=new Float32Array(r));for(var i=0;i<r;++i)n[i]=e[i]*o;return n}function y(e,t,n){var r=e.length;n||(n=new Int32Array(r));for(var o=0;o<r;++o)n[o]=Math.round(e[o]*t);return n}function b(e,t){var n,r;if(!t){var o=0;for(n=0,r=e.length;n<r;n+=2)o+=e[n+1];t=new e.constructor(o)}var i=0;for(n=0,r=e.length;n<r;n+=2)for(var a=e[n],s=e[n+1],l=0;l<s;++l)t[i]=a,++i;return t}function w(e){if(0===e.length)return new Int32Array;var t,n,r=2;for(t=1,n=e.length;t<n;++t)e[t-1]!==e[t]&&(r+=2);var o=new Int32Array(r),i=0,a=1;for(t=1,n=e.length;t<n;++t)e[t-1]!==e[t]?(o[i]=e[t-1],o[i+1]=a,a=1,i+=2):++a;return o[i]=e[e.length-1],o[i+1]=a,o}function x(e,t){var n=e.length;t||(t=new e.constructor(n)),n&&(t[0]=e[0]);for(var r=1;r<n;++r)t[r]=e[r]+t[r-1];return t}function _(e,t){var n=e.length;t||(t=new e.constructor(n)),t[0]=e[0];for(var r=1;r<n;++r)t[r]=e[r]-e[r-1];return t}function S(e,t){var n,r,o=e instanceof Int8Array?127:32767,i=-o-1,a=e.length;if(!t){var s=0;for(n=0;n<a;++n)e[n]<o&&e[n]>i&&++s;t=new Int32Array(s)}for(n=0,r=0;n<a;){for(var l=0;e[n]===o||e[n]===i;)l+=e[n],++n;l+=e[n],++n,t[r]=l,++r}return t}function C(e,t){var n,r=t?127:32767,o=-r-1,i=e.length,a=0;for(n=0;n<i;++n){var s=e[n];0===s?++a:a+=s===r||s===o?2:s>0?Math.ceil(s/r):Math.ceil(s/o)}var l=t?new Int8Array(a):new Int16Array(a),u=0;for(n=0;n<i;++n){var s=e[n];if(s>=0)for(;s>=r;)l[u]=r,++u,s-=r;else for(;s<=o;)l[u]=o,++u,s-=o;l[u]=s,++u}return l}function k(e,t){return x(b(e),t)}function A(e){return w(_(e))}function E(e,t,n){return v(b(e,c(n)),t,n)}function M(e,t){return w(y(e,t))}function T(e,t,n){return v(x(e,c(n)),t,n)}function O(e,t,n){return _(y(e,t),n)}function I(e,t,n){return v(S(e,c(n)),t,n)}function P(e,t,n){var r=S(e,c(n));return T(r,t,p(r))}function j(e,t,n){return C(O(e,t),n)}function D(e){var t=s(e),n=t.getInt32(0),r=t.getInt32(4),o=e.subarray(8,12),e=e.subarray(12);return[n,e,r,o]}function N(e,t,n,r){var o=new ArrayBuffer(12+r.byteLength),i=new Uint8Array(o),a=new DataView(o);return a.setInt32(0,e),a.setInt32(4,t),n&&i.set(n,8),i.set(r,12),i}function R(e){return N(2,e.length,void 0,l(e))}function F(e){return N(4,e.length,void 0,m(e))}function L(e,t){return N(5,e.length/t,m([t]),l(e))}function z(e){return N(6,e.length,void 0,m(w(e)))}function B(e){return N(8,e.length,void 0,m(A(e)))}function q(e,t){return N(9,e.length,m([t]),m(M(e,t)))}function V(e,t){return N(10,e.length,m([t]),d(j(e,t)))}function U(e){var t={};return ee.forEach(function(n){void 0!==e[n]&&(t[n]=e[n])}),e.bondAtomList&&(t.bondAtomList=F(e.bondAtomList)),e.bondOrderList&&(t.bondOrderList=R(e.bondOrderList)),t.xCoordList=V(e.xCoordList,1e3),t.yCoordList=V(e.yCoordList,1e3),t.zCoordList=V(e.zCoordList,1e3),e.bFactorList&&(t.bFactorList=V(e.bFactorList,100)),e.atomIdList&&(t.atomIdList=B(e.atomIdList)),e.altLocList&&(t.altLocList=z(e.altLocList)),e.occupancyList&&(t.occupancyList=q(e.occupancyList,100)),t.groupIdList=B(e.groupIdList),t.groupTypeList=F(e.groupTypeList),e.secStructList&&(t.secStructList=R(e.secStructList,1)),e.insCodeList&&(t.insCodeList=z(e.insCodeList)),e.sequenceIndexList&&(t.sequenceIndexList=B(e.sequenceIndexList)),t.chainIdList=L(e.chainIdList,4),e.chainNameList&&(t.chainNameList=L(e.chainNameList,4)),t}function H(e){function t(e){for(var t={},n=0;n<e;n++){t[i()]=i()}return t}function n(t){var n=e.subarray(a,a+t);return a+=t,n}function r(t){var n=e.subarray(a,a+t);a+=t;if(t>65535){for(var r=[],o=0;o<n.length;o+=65535)r.push(String.fromCharCode.apply(null,n.subarray(o,o+65535)));return r.join("")}return String.fromCharCode.apply(null,n)}function o(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=i();return t}function i(){var i,l,u=e[a];if(0==(128&u))return a++,u;if(128==(240&u))return l=15&u,a++,t(l);if(144==(240&u))return l=15&u,a++,o(l);if(160==(224&u))return l=31&u,a++,r(l);if(224==(224&u))return i=s.getInt8(a),a++,i;switch(u){case 192:return a++,null;case 194:return a++,!1;case 195:return a++,!0;case 196:return l=s.getUint8(a+1),a+=2,n(l);case 197:return l=s.getUint16(a+1),a+=3,n(l);case 198:return l=s.getUint32(a+1),a+=5,n(l);case 202:return i=s.getFloat32(a+1),a+=5,i;case 203:return i=s.getFloat64(a+1),a+=9,i;case 204:return i=e[a+1],a+=2,i;case 205:return i=s.getUint16(a+1),a+=3,i;case 206:return i=s.getUint32(a+1),a+=5,i;case 208:return i=s.getInt8(a+1),a+=2,i;case 209:return i=s.getInt16(a+1),a+=3,i;case 210:return i=s.getInt32(a+1),a+=5,i;case 217:return l=s.getUint8(a+1),a+=2,r(l);case 218:return l=s.getUint16(a+1),a+=3,r(l);case 219:return l=s.getUint32(a+1),a+=5,r(l);case 220:return l=s.getUint16(a+1),a+=3,o(l);case 221:return l=s.getUint32(a+1),a+=5,o(l);case 222:return l=s.getUint16(a+1),a+=3,t(l);case 223:return l=s.getUint32(a+1),a+=5,t(l)}throw new Error("Unknown type 0x"+u.toString(16))}var a=0,s=new DataView(e.buffer);return i()}function G(e,t,n,r){switch(e){case 1:return g(t);case 2:return u(t);case 3:return f(t);case 4:return h(t);case 5:return l(t);case 6:return b(h(t),new Uint8Array(n));case 7:return b(h(t));case 8:return k(h(t));case 9:return E(h(t),h(r)[0]);case 10:return P(f(t),h(r)[0]);case 11:return v(f(t),h(r)[0]);case 12:return I(f(t),h(r)[0]);case 13:return I(u(t),h(r)[0]);case 14:return S(f(t));case 15:return S(u(t))}}function W(e,t){t=t||{};var n=t.ignoreFields,r={};return ne.forEach(function(t){var o=!!n&&-1!==n.indexOf(t),i=e[t];o||void 0===i||(i instanceof Uint8Array?r[t]=G.apply(null,D(i)):r[t]=i)}),r}function Z(e){return String.fromCharCode.apply(null,e).replace(/\0/g,"")}function Y(e,t,n){n=n||{};var r,o,i,a,s,l,u=n.firstModelOnly,c=t.onModel,p=t.onChain,f=t.onGroup,d=t.onAtom,h=t.onBond,m=0,g=0,v=0,y=0,b=0,w=-1,x=e.chainNameList,_=e.secStructList,S=e.insCodeList,C=e.sequenceIndexList,k=e.atomIdList,A=e.bFactorList,E=e.altLocList,M=e.occupancyList,T=e.bondAtomList,O=e.bondOrderList;for(r=0,o=e.chainsPerModel.length;r<o&&!(u&&m>0);++r){var I=e.chainsPerModel[m];for(c&&c({chainCount:I,modelIndex:m}),i=0;i<I;++i){var P=e.groupsPerChain[g];if(p){var j=Z(e.chainIdList.subarray(4*g,4*g+4)),D=null;x&&(D=Z(x.subarray(4*g,4*g+4))),p({groupCount:P,chainIndex:g,modelIndex:m,chainId:j,chainName:D})}for(a=0;a<P;++a){var N=e.groupList[e.groupTypeList[v]],R=N.atomNameList.length;if(f){var F=null;_&&(F=_[v]);var L=null;e.insCodeList&&(L=String.fromCharCode(S[v]));var z=null;C&&(z=C[v]),f({atomCount:R,groupIndex:v,chainIndex:g,modelIndex:m,groupId:e.groupIdList[v],groupType:e.groupTypeList[v],groupName:N.groupName,singleLetterCode:N.singleLetterCode,chemCompType:N.chemCompType,secStruct:F,insCode:L,sequenceIndex:z})}for(s=0;s<R;++s){if(d){var B=null;k&&(B=k[y]);var q=null;A&&(q=A[y]);var V=null;E&&(V=String.fromCharCode(E[y]));var U=null;M&&(U=M[y]),d({atomIndex:y,groupIndex:v,chainIndex:g,modelIndex:m,atomId:B,element:N.elementList[s],atomName:N.atomNameList[s],formalCharge:N.formalChargeList[s],xCoord:e.xCoordList[y],yCoord:e.yCoordList[y],zCoord:e.zCoordList[y],bFactor:q,altLoc:V,occupancy:U})}y+=1}if(h){var H=N.bondAtomList;for(s=0,l=N.bondOrderList.length;s<l;++s)h({atomIndex1:y-R+H[2*s],atomIndex2:y-R+H[2*s+1],bondOrder:N.bondOrderList[s]})}v+=1}g+=1}if(b=w+1,w=y-1,h&&T)for(s=0,l=T.length;s<l;s+=2){var G=T[s],W=T[s+1];(G>=b&&G<=w||W>=b&&W<=w)&&h({atomIndex1:G,atomIndex2:W,bondOrder:O?O[s/2]:null})}m+=1}}function X(e){return i(U(e))}function K(e,t){e instanceof ArrayBuffer&&(e=new Uint8Array(e));var n;return n=e instanceof Uint8Array?H(e):e,W(n,t)}function Q(e,t,n,r){function o(){try{var e=K(i.response);n(e)}catch(e){r(e)}}var i=new XMLHttpRequest;i.addEventListener("load",o,!0),i.addEventListener("error",r,!0),i.responseType="arraybuffer",i.open("GET",t+e.toUpperCase()),i.send()}function J(e,t,n){Q(e,oe,t,n)}function $(e,t,n){Q(e,ie,t,n)}var ee=["mmtfVersion","mmtfProducer","unitCell","spaceGroup","structureId","title","depositionDate","releaseDate","experimentalMethods","resolution","rFree","rWork","bioAssemblyList","ncsOperatorList","entityList","groupList","numBonds","numAtoms","numGroups","numChains","numModels","groupsPerChain","chainsPerModel"],te=["xCoordList","yCoordList","zCoordList","groupIdList","groupTypeList","chainIdList","bFactorList","atomIdList","altLocList","occupancyList","secStructList","insCodeList","sequenceIndexList","chainNameList","bondAtomList","bondOrderList"],ne=ee.concat(te),re="http://mmtf.rcsb.org/v1.0/",oe=re+"full/",ie=re+"reduced/";e.encode=X,e.decode=K,e.traverse=Y,e.fetch=J,e.fetchReduced=$,e.version="v1.0.0",e.fetchUrl=oe,e.fetchReducedUrl=ie,e.encodeMsgpack=i,e.encodeMmtf=U,e.decodeMsgpack=H,e.decodeMmtf=W,Object.defineProperty(e,"__esModule",{value:!0})}(e.MMTF=e.MMTF||{})}(this),function(n){if("object"==typeof t&&void 0!==e)e.exports=n();else if("function"==typeof define&&define.amd)define("pako",[],n);else{var r;r="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,r.pako=n()}}(function(){return function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return o(n||e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var o={arraySet:function(e,t,n,r,o){if(t.subarray&&e.subarray)return void e.set(t.subarray(n,n+r),o);for(var i=0;i<r;i++)e[o+i]=t[n+i]},flattenChunks:function(e){var t,n,r,o,i,a;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(a=new Uint8Array(r),o=0,t=0,n=e.length;t<n;t++)i=e[t],a.set(i,o),o+=i.length;return a}},i={arraySet:function(e,t,n,r,o){for(var i=0;i<r;i++)e[o+i]=t[n+i]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,o)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,i))},n.setTyped(r)},{}],2:[function(e,t,n){"use strict";function r(e,t){if(t<65537&&(e.subarray&&a||!e.subarray&&i))return String.fromCharCode.apply(null,o.shrinkBuf(e,t));for(var n="",r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n}var o=e("./common"),i=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){a=!1}for(var s=new o.Buf8(256),l=0;l<256;l++)s[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1;s[254]=s[254]=1,n.string2buf=function(e){var t,n,r,i,a,s=e.length,l=0;for(i=0;i<s;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<s&&56320==(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=new o.Buf8(l),a=0,i=0;a<l;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<s&&56320==(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),n<128?t[a++]=n:n<2048?(t[a++]=192|n>>>6,t[a++]=128|63&n):n<65536?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|63&n):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|63&n);return t},n.buf2binstring=function(e){return r(e,e.length)},n.binstring2buf=function(e){for(var t=new o.Buf8(e.length),n=0,r=t.length;n<r;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,o,i,a,l=t||e.length,u=new Array(2*l);for(o=0,n=0;n<l;)if((i=e[n++])<128)u[o++]=i;else if((a=s[i])>4)u[o++]=65533,n+=a-1;else{for(i&=2===a?31:3===a?15:7;a>1&&n<l;)i=i<<6|63&e[n++],a--;a>1?u[o++]=65533:i<65536?u[o++]=i:(i-=65536,u[o++]=55296|i>>10&1023,u[o++]=56320|1023&i)}return r(u,o)},n.utf8border=function(e,t){var n;for(t=t||e.length,t>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0?t:0===n?t:n+s[e[n]]>t?n:t}},{"./common":1}],3:[function(e,t,n){"use strict";function r(e,t,n,r){for(var o=65535&e|0,i=e>>>16&65535|0,a=0;0!==n;){a=n>2e3?2e3:n,n-=a;do{o=o+t[r++]|0,i=i+o|0}while(--a);o%=65521,i%=65521}return o|i<<16|0}t.exports=r},{}],4:[function(e,t,n){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],5:[function(e,t,n){"use strict";function r(e,t,n,r){var i=o,a=r+n;e^=-1;for(var s=r;s<a;s++)e=e>>>8^i[255&(e^t[s])];return-1^e}var o=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=r},{}],6:[function(e,t,n){"use strict";function r(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}t.exports=r},{}],7:[function(e,t,n){"use strict";t.exports=function(e,t){var n,r,o,i,a,s,l,u,c,p,f,d,h,m,g,v,y,b,w,x,_,S,C,k,A;n=e.state,r=e.next_in,k=e.input,o=r+(e.avail_in-5),i=e.next_out,A=e.output,a=i-(t-e.avail_out),s=i+(e.avail_out-257),l=n.dmax,u=n.wsize,c=n.whave,p=n.wnext,f=n.window,d=n.hold,h=n.bits,m=n.lencode,g=n.distcode,v=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;e:do{h<15&&(d+=k[r++]<<h,h+=8,d+=k[r++]<<h,h+=8),b=m[d&v];t:for(;;){if(w=b>>>24,d>>>=w,h-=w,0===(w=b>>>16&255))A[i++]=65535&b;else{if(!(16&w)){if(0==(64&w)){b=m[(65535&b)+(d&(1<<w)-1)];continue t}if(32&w){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}x=65535&b,w&=15,w&&(h<w&&(d+=k[r++]<<h,h+=8),x+=d&(1<<w)-1,d>>>=w,h-=w),h<15&&(d+=k[r++]<<h,h+=8,d+=k[r++]<<h,h+=8),b=g[d&y];n:for(;;){if(w=b>>>24,d>>>=w,h-=w,!(16&(w=b>>>16&255))){if(0==(64&w)){b=g[(65535&b)+(d&(1<<w)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(_=65535&b,w&=15,h<w&&(d+=k[r++]<<h,(h+=8)<w&&(d+=k[r++]<<h,h+=8)),(_+=d&(1<<w)-1)>l){e.msg="invalid distance too far back",n.mode=30;break e}if(d>>>=w,h-=w,w=i-a,_>w){if((w=_-w)>c&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(S=0,C=f,0===p){if(S+=u-w,w<x){x-=w;do{A[i++]=f[S++]}while(--w);S=i-_,C=A}}else if(p<w){if(S+=u+p-w,(w-=p)<x){x-=w;do{A[i++]=f[S++]}while(--w);if(S=0,p<x){w=p,x-=w;do{A[i++]=f[S++]}while(--w);S=i-_,C=A}}}else if(S+=p-w,w<x){x-=w;do{A[i++]=f[S++]}while(--w);S=i-_,C=A}for(;x>2;)A[i++]=C[S++],A[i++]=C[S++],A[i++]=C[S++],x-=3;x&&(A[i++]=C[S++],x>1&&(A[i++]=C[S++]))}else{S=i-_;do{A[i++]=A[S++],A[i++]=A[S++],A[i++]=A[S++],x-=3}while(x>2);x&&(A[i++]=A[S++],x>1&&(A[i++]=A[S++]))}break}}break}}while(r<o&&i<s);x=h>>3,r-=x,h-=x<<3,d&=(1<<h)-1,e.next_in=r,e.next_out=i,e.avail_in=r<o?o-r+5:5-(r-o),e.avail_out=i<s?s-i+257:257-(i-s),n.hold=d,n.bits=h}},{}],8:[function(e,t,n){"use strict";function r(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function o(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new v.Buf16(320),this.work=new v.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function i(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=R,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new v.Buf32(he),t.distcode=t.distdyn=new v.Buf32(me),t.sane=1,t.back=-1,M):I}function a(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,i(e)):I}function s(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?I:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,a(e))):I}function l(e,t){var n,r;return e?(r=new o,e.state=r,r.window=null,n=s(e,t),n!==M&&(e.state=null),n):I}function u(e){return l(e,ge)}function c(e){if(ve){var t;for(m=new v.Buf32(512),g=new v.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(x(S,e.lens,0,288,m,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;x(C,e.lens,0,32,g,0,e.work,{bits:5}),ve=!1}e.lencode=m,e.lenbits=9,e.distcode=g,e.distbits=5}function p(e,t,n,r){var o,i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new v.Buf8(i.wsize)),r>=i.wsize?(v.arraySet(i.window,t,n-i.wsize,i.wsize,0),i.wnext=0,i.whave=i.wsize):(o=i.wsize-i.wnext,o>r&&(o=r),v.arraySet(i.window,t,n-r,o,i.wnext),r-=o,r?(v.arraySet(i.window,t,n-r,r,0),i.wnext=r,i.whave=i.wsize):(i.wnext+=o,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=o))),0}function f(e,t){var n,o,i,a,s,l,u,f,d,h,m,g,he,me,ge,ve,ye,be,we,xe,_e,Se,Ce,ke,Ae=0,Ee=new v.Buf8(4),Me=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return I;n=e.state,n.mode===Z&&(n.mode=Y),s=e.next_out,i=e.output,u=e.avail_out,a=e.next_in,o=e.input,l=e.avail_in,f=n.hold,d=n.bits,h=l,m=u,Se=M;e:for(;;)switch(n.mode){case R:if(0===n.wrap){n.mode=Y;break}for(;d<16;){if(0===l)break e;l--,f+=o[a++]<<d,d+=8}if(2&n.wrap&&35615===f){n.check=0,Ee[0]=255&f,Ee[1]=f>>>8&255,n.check=b(n.check,Ee,2,0),f=0,d=0,n.mode=F;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&f)<<8)+(f>>8))%31){e.msg="incorrect header check",n.mode=pe;break}if((15&f)!==N){e.msg="unknown compression method",n.mode=pe;break}if(f>>>=4,d-=4,_e=8+(15&f),0===n.wbits)n.wbits=_e;else if(_e>n.wbits){e.msg="invalid window size",n.mode=pe;break}n.dmax=1<<_e,e.adler=n.check=1,n.mode=512&f?G:Z,f=0,d=0;break;case F:for(;d<16;){if(0===l)break e;l--,f+=o[a++]<<d,d+=8}if(n.flags=f,(255&n.flags)!==N){e.msg="unknown compression method",n.mode=pe;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=pe;break}n.head&&(n.head.text=f>>8&1),512&n.flags&&(Ee[0]=255&f,Ee[1]=f>>>8&255,n.check=b(n.check,Ee,2,0)),f=0,d=0,n.mode=L;case L:for(;d<32;){if(0===l)break e;l--,f+=o[a++]<<d,d+=8}n.head&&(n.head.time=f),512&n.flags&&(Ee[0]=255&f,Ee[1]=f>>>8&255,Ee[2]=f>>>16&255,Ee[3]=f>>>24&255,n.check=b(n.check,Ee,4,0)),f=0,d=0,n.mode=z;case z:for(;d<16;){if(0===l)break e;l--,f+=o[a++]<<d,d+=8}n.head&&(n.head.xflags=255&f,n.head.os=f>>8),512&n.flags&&(Ee[0]=255&f,Ee[1]=f>>>8&255,n.check=b(n.check,Ee,2,0)),f=0,d=0,n.mode=B;case B:if(1024&n.flags){for(;d<16;){if(0===l)break e;l--,f+=o[a++]<<d,d+=8}n.length=f,n.head&&(n.head.extra_len=f),512&n.flags&&(Ee[0]=255&f,Ee[1]=f>>>8&255,n.check=b(n.check,Ee,2,0)),f=0,d=0}else n.head&&(n.head.extra=null);n.mode=q;case q:if(1024&n.flags&&(g=n.length,g>l&&(g=l),g&&(n.head&&(_e=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),v.arraySet(n.head.extra,o,a,g,_e)),512&n.flags&&(n.check=b(n.check,o,g,a)),l-=g,a+=g,n.length-=g),n.length))break e;n.length=0,n.mode=V;case V:if(2048&n.flags){if(0===l)break e;g=0;do{_e=o[a+g++],n.head&&_e&&n.length<65536&&(n.head.name+=String.fromCharCode(_e))}while(_e&&g<l);if(512&n.flags&&(n.check=b(n.check,o,g,a)),l-=g,a+=g,_e)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=U;case U:if(4096&n.flags){if(0===l)break e;g=0;do{_e=o[a+g++],n.head&&_e&&n.length<65536&&(n.head.comment+=String.fromCharCode(_e))}while(_e&&g<l);if(512&n.flags&&(n.check=b(n.check,o,g,a)),l-=g,a+=g,_e)break e}else n.head&&(n.head.comment=null);n.mode=H;case H:if(512&n.flags){for(;d<16;){if(0===l)break e;l--,f+=o[a++]<<d,d+=8}if(f!==(65535&n.check)){e.msg="header crc mismatch",n.mode=pe;break}f=0,d=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Z;break;case G:for(;d<32;){if(0===l)break e;l--,f+=o[a++]<<d,d+=8}e.adler=n.check=r(f),f=0,d=0,n.mode=W;case W:if(0===n.havedict)return e.next_out=s,e.avail_out=u,e.next_in=a,e.avail_in=l,n.hold=f,n.bits=d,O;e.adler=n.check=1,n.mode=Z;case Z:if(t===A||t===E)break e;case Y:if(n.last){f>>>=7&d,d-=7&d,n.mode=le;break}for(;d<3;){if(0===l)break e;l--,f+=o[a++]<<d,d+=8}switch(n.last=1&f,f>>>=1,d-=1,3&f){case 0:n.mode=X;break;case 1:if(c(n),n.mode=te,t===E){f>>>=2,d-=2;break e}break;case 2:n.mode=J;break;case 3:e.msg="invalid block type",n.mode=pe}f>>>=2,d-=2;break;case X:for(f>>>=7&d,d-=7&d;d<32;){if(0===l)break e;l--,f+=o[a++]<<d,d+=8}if((65535&f)!=(f>>>16^65535)){e.msg="invalid stored block lengths",n.mode=pe;break}if(n.length=65535&f,f=0,d=0,n.mode=K,t===E)break e;case K:n.mode=Q;case Q:if(g=n.length){if(g>l&&(g=l),g>u&&(g=u),0===g)break e;v.arraySet(i,o,a,g,s),l-=g,a+=g,u-=g,s+=g,n.length-=g;break}n.mode=Z;break;case J:for(;d<14;){if(0===l)break e;l--,f+=o[a++]<<d,d+=8}if(n.nlen=257+(31&f),f>>>=5,d-=5,n.ndist=1+(31&f),f>>>=5,d-=5,n.ncode=4+(15&f),f>>>=4,d-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=pe;break}n.have=0,n.mode=$;case $:for(;n.have<n.ncode;){for(;d<3;){if(0===l)break e;l--,f+=o[a++]<<d,d+=8}n.lens[Me[n.have++]]=7&f,f>>>=3,d-=3}for(;n.have<19;)n.lens[Me[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,Ce={bits:n.lenbits},Se=x(_,n.lens,0,19,n.lencode,0,n.work,Ce),n.lenbits=Ce.bits,Se){e.msg="invalid code lengths set",n.mode=pe;break}n.have=0,n.mode=ee;case ee:for(;n.have<n.nlen+n.ndist;){for(;Ae=n.lencode[f&(1<<n.lenbits)-1],ge=Ae>>>24,ve=Ae>>>16&255,ye=65535&Ae,!(ge<=d);){if(0===l)break e;l--,f+=o[a++]<<d,d+=8}if(ye<16)f>>>=ge,d-=ge,n.lens[n.have++]=ye;else{if(16===ye){for(ke=ge+2;d<ke;){if(0===l)break e;l--,f+=o[a++]<<d,d+=8}if(f>>>=ge,d-=ge,0===n.have){e.msg="invalid bit length repeat",n.mode=pe;break}_e=n.lens[n.have-1],g=3+(3&f),f>>>=2,d-=2}else if(17===ye){for(ke=ge+3;d<ke;){if(0===l)break e;l--,f+=o[a++]<<d,d+=8}f>>>=ge,d-=ge,_e=0,g=3+(7&f),f>>>=3,d-=3}else{for(ke=ge+7;d<ke;){if(0===l)break e;l--,f+=o[a++]<<d,d+=8}f>>>=ge,d-=ge,_e=0,g=11+(127&f),f>>>=7,d-=7}if(n.have+g>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=pe;break}for(;g--;)n.lens[n.have++]=_e}}if(n.mode===pe)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=pe;break}if(n.lenbits=9,Ce={bits:n.lenbits},Se=x(S,n.lens,0,n.nlen,n.lencode,0,n.work,Ce),n.lenbits=Ce.bits,Se){e.msg="invalid literal/lengths set",n.mode=pe;break}if(n.distbits=6,n.distcode=n.distdyn,Ce={bits:n.distbits},Se=x(C,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Ce),n.distbits=Ce.bits,Se){e.msg="invalid distances set",n.mode=pe;break}if(n.mode=te,t===E)break e;case te:n.mode=ne;case ne:if(l>=6&&u>=258){e.next_out=s,e.avail_out=u,e.next_in=a,e.avail_in=l,n.hold=f,n.bits=d,w(e,m),s=e.next_out,i=e.output,u=e.avail_out,a=e.next_in,o=e.input,l=e.avail_in,f=n.hold,d=n.bits,n.mode===Z&&(n.back=-1);break}for(n.back=0;Ae=n.lencode[f&(1<<n.lenbits)-1],ge=Ae>>>24,ve=Ae>>>16&255,ye=65535&Ae,!(ge<=d);){if(0===l)break e;l--,f+=o[a++]<<d,d+=8}if(ve&&0==(240&ve)){for(be=ge,we=ve,xe=ye;Ae=n.lencode[xe+((f&(1<<be+we)-1)>>be)],ge=Ae>>>24,ve=Ae>>>16&255,ye=65535&Ae,!(be+ge<=d);){if(0===l)break e;l--,f+=o[a++]<<d,d+=8}f>>>=be,d-=be,n.back+=be}if(f>>>=ge,d-=ge,n.back+=ge,n.length=ye,0===ve){n.mode=se;break}if(32&ve){n.back=-1,n.mode=Z;break}if(64&ve){e.msg="invalid literal/length code",n.mode=pe;break}n.extra=15&ve,n.mode=re;case re:if(n.extra){for(ke=n.extra;d<ke;){if(0===l)break e;l--,f+=o[a++]<<d,d+=8}n.length+=f&(1<<n.extra)-1,f>>>=n.extra,d-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=oe;case oe:for(;Ae=n.distcode[f&(1<<n.distbits)-1],ge=Ae>>>24,ve=Ae>>>16&255,ye=65535&Ae,!(ge<=d);){if(0===l)break e;l--,f+=o[a++]<<d,d+=8}if(0==(240&ve)){for(be=ge,we=ve,xe=ye;Ae=n.distcode[xe+((f&(1<<be+we)-1)>>be)],ge=Ae>>>24,ve=Ae>>>16&255,ye=65535&Ae,!(be+ge<=d);){if(0===l)break e;l--,f+=o[a++]<<d,d+=8}f>>>=be,d-=be,n.back+=be}if(f>>>=ge,d-=ge,n.back+=ge,64&ve){e.msg="invalid distance code",n.mode=pe;break}n.offset=ye,n.extra=15&ve,n.mode=ie;case ie:if(n.extra){for(ke=n.extra;d<ke;){if(0===l)break e;l--,f+=o[a++]<<d,d+=8}n.offset+=f&(1<<n.extra)-1,f>>>=n.extra,d-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=pe;break}n.mode=ae;case ae:if(0===u)break e;if(g=m-u,n.offset>g){if((g=n.offset-g)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=pe;break}g>n.wnext?(g-=n.wnext,he=n.wsize-g):he=n.wnext-g,g>n.length&&(g=n.length),me=n.window}else me=i,he=s-n.offset,g=n.length;g>u&&(g=u),u-=g,n.length-=g;do{i[s++]=me[he++]}while(--g);0===n.length&&(n.mode=ne);break;case se:if(0===u)break e;i[s++]=n.length,u--,n.mode=ne;break;case le:if(n.wrap){for(;d<32;){if(0===l)break e;l--,f|=o[a++]<<d,d+=8}if(m-=u,e.total_out+=m,n.total+=m,m&&(e.adler=n.check=n.flags?b(n.check,i,m,s-m):y(n.check,i,m,s-m)),m=u,(n.flags?f:r(f))!==n.check){e.msg="incorrect data check",n.mode=pe;break}f=0,d=0}n.mode=ue;case ue:if(n.wrap&&n.flags){for(;d<32;){if(0===l)break e;l--,f+=o[a++]<<d,d+=8}if(f!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=pe;break}f=0,d=0}n.mode=ce;case ce:Se=T;break e;case pe:Se=P;break e;case fe:return j;case de:default:return I}return e.next_out=s,e.avail_out=u,e.next_in=a,e.avail_in=l,n.hold=f,n.bits=d,(n.wsize||m!==e.avail_out&&n.mode<pe&&(n.mode<le||t!==k))&&p(e,e.output,e.next_out,m-e.avail_out)?(n.mode=fe,j):(h-=e.avail_in,m-=e.avail_out,e.total_in+=h,e.total_out+=m,n.total+=m,n.wrap&&m&&(e.adler=n.check=n.flags?b(n.check,i,m,e.next_out-m):y(n.check,i,m,e.next_out-m)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Z?128:0)+(n.mode===te||n.mode===K?256:0),(0===h&&0===m||t===k)&&Se===M&&(Se=D),Se)}function d(e){if(!e||!e.state)return I;var t=e.state;return t.window&&(t.window=null),e.state=null,M}function h(e,t){var n;return e&&e.state?(n=e.state,0==(2&n.wrap)?I:(n.head=t,t.done=!1,M)):I}var m,g,v=e("../utils/common"),y=e("./adler32"),b=e("./crc32"),w=e("./inffast"),x=e("./inftrees"),_=0,S=1,C=2,k=4,A=5,E=6,M=0,T=1,O=2,I=-2,P=-3,j=-4,D=-5,N=8,R=1,F=2,L=3,z=4,B=5,q=6,V=7,U=8,H=9,G=10,W=11,Z=12,Y=13,X=14,K=15,Q=16,J=17,$=18,ee=19,te=20,ne=21,re=22,oe=23,ie=24,ae=25,se=26,le=27,ue=28,ce=29,pe=30,fe=31,de=32,he=852,me=592,ge=15,ve=!0;n.inflateReset=a,n.inflateReset2=s,n.inflateResetKeep=i,n.inflateInit=u,n.inflateInit2=l,n.inflate=f,n.inflateEnd=d,n.inflateGetHeader=h,n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":1,"./adler32":3,"./crc32":5,"./inffast":7,"./inftrees":9}],9:[function(e,t,n){"use strict";var r=e("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,n,l,u,c,p,f){var d,h,m,g,v,y,b,w,x,_=f.bits,S=0,C=0,k=0,A=0,E=0,M=0,T=0,O=0,I=0,P=0,j=null,D=0,N=new r.Buf16(16),R=new r.Buf16(16),F=null,L=0;for(S=0;S<=15;S++)N[S]=0;for(C=0;C<l;C++)N[t[n+C]]++;for(E=_,A=15;A>=1&&0===N[A];A--);if(E>A&&(E=A),0===A)return u[c++]=20971520,u[c++]=20971520,f.bits=1,0;for(k=1;k<A&&0===N[k];k++);for(E<k&&(E=k),O=1,S=1;S<=15;S++)if(O<<=1,(O-=N[S])<0)return-1;if(O>0&&(0===e||1!==A))return-1;for(R[1]=0,S=1;S<15;S++)R[S+1]=R[S]+N[S];for(C=0;C<l;C++)0!==t[n+C]&&(p[R[t[n+C]]++]=C);if(0===e?(j=F=p,y=19):1===e?(j=o,D-=257,F=i,L-=257,y=256):(j=a,F=s,y=-1),P=0,C=0,S=k,v=c,M=E,T=0,m=-1,I=1<<E,g=I-1,1===e&&I>852||2===e&&I>592)return 1;for(var z=0;;){z++,b=S-T,p[C]<y?(w=0,x=p[C]):p[C]>y?(w=F[L+p[C]],x=j[D+p[C]]):(w=96,x=0),d=1<<S-T,h=1<<M,k=h;do{h-=d,u[v+(P>>T)+h]=b<<24|w<<16|x|0}while(0!==h);for(d=1<<S-1;P&d;)d>>=1;if(0!==d?(P&=d-1,P+=d):P=0,C++,0==--N[S]){if(S===A)break;S=t[n+p[C]]}if(S>E&&(P&g)!==m){for(0===T&&(T=E),v+=k,M=S-T,O=1<<M;M+T<A&&!((O-=N[M+T])<=0);)M++,O<<=1;if(I+=1<<M,1===e&&I>852||2===e&&I>592)return 1;m=P&g,u[m]=E<<24|M<<16|v-c|0}}return 0!==P&&(u[v+P]=S-T<<24|64<<16|0),f.bits=E,0}},{"../utils/common":1}],10:[function(e,t,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],11:[function(e,t,n){"use strict";function r(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}t.exports=r},{}],"/lib/inflate.js":[function(e,t,n){"use strict";function r(e,t){var n=new d(t);if(n.push(e,!0),n.err)throw n.msg;return n.result}function o(e,t){return t=t||{},t.raw=!0,r(e,t)}var i=e("./zlib/inflate.js"),a=e("./utils/common"),s=e("./utils/strings"),l=e("./zlib/constants"),u=e("./zlib/messages"),c=e("./zlib/zstream"),p=e("./zlib/gzheader"),f=Object.prototype.toString,d=function(e){this.options=a.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var n=i.inflateInit2(this.strm,t.windowBits);if(n!==l.Z_OK)throw new Error(u[n]);this.header=new p,i.inflateGetHeader(this.strm,this.header)};d.prototype.push=function(e,t){var n,r,o,u,c,p=this.strm,d=this.options.chunkSize;if(this.ended)return!1;r=t===~~t?t:!0===t?l.Z_FINISH:l.Z_NO_FLUSH,"string"==typeof e?p.input=s.binstring2buf(e):"[object ArrayBuffer]"===f.call(e)?p.input=new Uint8Array(e):p.input=e,p.next_in=0,p.avail_in=p.input.length;do{if(0===p.avail_out&&(p.output=new a.Buf8(d),p.next_out=0,p.avail_out=d),(n=i.inflate(p,l.Z_NO_FLUSH))!==l.Z_STREAM_END&&n!==l.Z_OK)return this.onEnd(n),this.ended=!0,!1;p.next_out&&(0!==p.avail_out&&n!==l.Z_STREAM_END&&(0!==p.avail_in||r!==l.Z_FINISH&&r!==l.Z_SYNC_FLUSH)||("string"===this.options.to?(o=s.utf8border(p.output,p.next_out),u=p.next_out-o,c=s.buf2string(p.output,o),p.next_out=u,p.avail_out=d-u,u&&a.arraySet(p.output,p.output,o,u,0),this.onData(c)):this.onData(a.shrinkBuf(p.output,p.next_out))))}while(p.avail_in>0&&n!==l.Z_STREAM_END);return n===l.Z_STREAM_END&&(r=l.Z_FINISH),r===l.Z_FINISH?(n=i.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===l.Z_OK):r!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),p.avail_out=0,!0)},d.prototype.onData=function(e){this.chunks.push(e)},d.prototype.onEnd=function(e){e===l.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Inflate=d,n.inflate=r,n.inflateRaw=o,n.ungzip=r},{"./utils/common":1,"./utils/strings":2,"./zlib/constants":4,"./zlib/gzheader":6,"./zlib/inflate.js":8,"./zlib/messages":10,"./zlib/zstream":11}]},{},[])("/lib/inflate.js")}),n=function(e){return e.$3Dmol||{}}(window),"object"==typeof e&&"object"==typeof e.exports&&(e.exports=n),$.get("https://3dmol.csb.pitt.edu/track/report.cgi"),String.prototype.startsWith||(String.prototype.startsWith=function(e){return 0===this.lastIndexOf(e,0)}),String.prototype.endsWith||(String.prototype.endsWith=function(e){return-1!==this.indexOf(e,this.length-e.length)}),$.ajaxTransport("+binary",function(e,t,n){if(window.FormData&&(e.dataType&&"binary"==e.dataType||e.data&&(window.ArrayBuffer&&e.data instanceof ArrayBuffer||window.Blob&&e.data instanceof Blob)))return{send:function(t,n){var r=new XMLHttpRequest,o=e.url,i=e.type,a=e.async||!0,s=e.responseType||"blob",l=e.data||null,u=e.username||null,c=e.password||null;r.addEventListener("load",function(){var t={};t[e.dataType]=r.response,n(r.status,r.statusText,t,r.getAllResponseHeaders())}),r.open(i,o,a,u,c);for(var p in t)r.setRequestHeader(p,t[p]);r.responseType=s,r.send(l)},abort:function(){n.abort()}}}),n.createViewer=function(e,t){if("string"===$.type(e)&&(e=$("#"+e)),e){t=t||{};try{return new n.GLViewer(e,t)}catch(e){throw"error creating viewer: "+e}return null}},n.viewers={},n.getbin=function(e,t){$.ajax({url:e,type:"GET",dataType:"binary",responseType:"arraybuffer",processData:!1}).done(function(e,n,r){t(e)}).fail(function(e,t){console.log(t)})},n.download=function(e,t,r,o){var i="",a="",s="",l=t.addModel();if("mmtf:"===e.substr(0,5)){a=r&&r.pdbUri?r.pdbUri:"https://mmtf.rcsb.org/v1.0/full/",e=e.substr(5).toUpperCase();var u=a+e;r&&void 0===r.noComputeSecondaryStructure&&(r.noComputeSecondaryStructure=!0),n.getbin(u,function(e){l.addMolData(e,"mmtf",r),t.zoomTo(),t.render(),o&&o(l)})}else{if("pdb:"===e.substr(0,4)){if(i="mmtf",r&&r.format&&(i=r.format),r&&void 0===r.noComputeSecondaryStructure&&(r.noComputeSecondaryStructure=!0),e=e.substr(4).toUpperCase(),!e.match(/^[1-9][A-Za-z0-9]{3}$/))return void alert("Wrong PDB ID");"mmtf"==i?(s=r&&r.mmtfUri?r.mmtfUri:"https://mmtf.rcsb.org/v1.0/full/",u=s+e.toUpperCase()):(a=r&&r.pdbUri?r.pdbUri:"https://files.rcsb.org/view/",u=a+e+"."+i)}else if("cid:"==e.substr(0,4)){if(i="sdf",e=e.substr(4),!e.match(/^[0-9]+$/))return void alert("Wrong Compound ID");u="https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+e+"/SDF?record_type=3d"}else"url:"==e.substr(0,4)&&(u=e.substr(4),i=u);var c=function(e){l.addMolData(e,i,r),t.zoomTo(),t.render(),o&&o(l)};"mmtf"==i?n.getbin(u,c):$.get(u,c).fail(function(e){console.log("fetch of "+u+" failed: "+e.statusText)})}return l},n.SurfaceType={VDW:1,MS:2,SAS:3,SES:4},n.mergeGeos=function(e,t){var n=t.geometry;void 0!==n&&e.geometryGroups.push(n.geometryGroups[0])},n.multiLineString=function(e){return e.toString().replace(/^[^\/]+\/\*!?/,"").replace(/\*\/[^\/]+$/,"")},n.syncSurface=!1,(window.navigator.userAgent.indexOf("MSIE ")>=0||window.navigator.userAgent.indexOf("Trident/")>=0)&&(n.syncSurface=!0),n.specStringToObject=function(e){if("object"==typeof e)return e;if(void 0===e||null==e)return e;e=e.replace(/%7E/,"~");var t=function(e){return $.isNumeric(e)?Math.floor(parseFloat(e))==parseInt(e)?parseFloat(e):e.indexOf(".")>=0?parseFloat(e):parseInt(e):"true"===e||"false"!==e&&e},n={};if("all"===e)return n;for(var r=e.split(";"),o=0;o<r.length;o++){var i=r[o].split(":"),a=i[0],s={},l=i[1];if(l)if(l=l.replace(/~/g,"="),-1!==l.indexOf("="))for(var u=l.split(","),c=0;c<u.length;c++){var p=u[c].split("=",2);s[p[0]]=t(p[1])}else s=-1!==l.indexOf(",")?l.split(","):t(l);n[a]=s}return n},n.getExtent=function(e,t){var n,r,o,i,a,s,l,u,c,p,f=!t;if(n=r=o=9999,i=a=s=-9999,l=u=c=p=0,0===e.length)return[[0,0,0],[0,0,0],[0,0,0]];for(var d=0;d<e.length;d++){var h=e[d];if(void 0!==h&&isFinite(h.x)&&isFinite(h.y)&&isFinite(h.z)&&(p++,l+=h.x,u+=h.y,c+=h.z,n=n<h.x?n:h.x,r=r<h.y?r:h.y,o=o<h.z?o:h.z,i=i>h.x?i:h.x,a=a>h.y?a:h.y,s=s>h.z?s:h.z,h.symmetries&&f))for(var m=0;m<h.symmetries.length;m++)p++,l+=h.symmetries[m].x,u+=h.symmetries[m].y,c+=h.symmetries[m].z,n=n<h.symmetries[m].x?n:h.symmetries[m].x,r=r<h.symmetries[m].y?r:h.symmetries[m].y,o=o<h.symmetries[m].z?o:h.symmetries[m].z,i=i>h.symmetries[m].x?i:h.symmetries[m].x,a=a>h.symmetries[m].y?a:h.symmetries[m].y,s=s>h.symmetries[m].z?s:h.symmetries[m].z}return[[n,r,o],[i,a,s],[l/p,u/p,c/p]]},n.getAtomProperty=function(e,t){var n=null;return e.properties&&void 0!==e.properties[t]?n=e.properties[t]:void 0!==e[t]&&(n=e[t]),n},n.getPropertyRange=function(e,t){for(var r=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,i=0,a=e.length;i<a;i++){var s=e[i],l=n.getAtomProperty(s,t);null!=l&&(l<r&&(r=l),l>o&&(o=l))}return isFinite(r)||isFinite(o)?isFinite(r)?isFinite(o)||(o=r):r=o:r=o=0,[r,o]},"function"==typeof define&&define.amd&&define("$3Dmol",n);var n=n||{};n.Math={clamp:function(e,t,n){return Math.min(Math.max(e,t),n)},degToRad:function(){var e=Math.PI/180;return function(t){return t*e}}()},n.Quaternion=function(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==r?r:1},n.Quaternion.prototype={constructor:n.Quaternion,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this},conjugate:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this},inverse:function(){return this.conjugate().normalize()},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},normalize:function(){var e=this.length();return 0===e?(this.x=0,this.y=0,this.z=0,this.w=1):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this},multiply:function(e){return this.multiplyQuaternions(this,e)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},multiplyQuaternions:function(e,t){var n=e.x,r=e.y,o=e.z,i=e.w,a=t.x,s=t.y,l=t.z,u=t.w;return this.x=n*u+i*a+r*l-o*s,this.y=r*u+i*s+o*a-n*l,this.z=o*u+i*l+n*s-r*a,this.w=i*u-n*a-r*s-o*l,this},sub:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this},clone:function(){return new n.Quaternion(this.x,this.y,this.z,this.w)}},n.Vector2=function(e,t){this.x=e||0,this.y=t||0},n.Vector2.prototype={constructor:n.Vector2,set:function(e,t){return this.x=e,this.y=t,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},copy:function(e){return this.x=e.x,this.y=e.y,this},clone:function(){return new n.Vector2(this.x,this.y)}},n.Vector3=function(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0},n.Vector3.prototype={constructor:n.Vector3,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},sub:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},divideScalar:function(e){return 0!==e?(this.x/=e,this.y/=e,this.z/=e):(this.x=0,this.y=0,this.z=0),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12],this.y=o[1]*t+o[5]*n+o[9]*r+o[13],this.z=o[2]*t+o[6]*n+o[10]*r+o[14],this},applyProjection:function(e){var t=this.x,n=this.y,r=this.z,o=e.elements,i=o[3]*t+o[7]*n+o[11]*r+o[15];return this.x=(o[0]*t+o[4]*n+o[8]*r+o[12])/i,this.y=(o[1]*t+o[5]*n+o[9]*r+o[13])/i,this.z=(o[2]*t+o[6]*n+o[10]*r+o[14])/i,this},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,o=e.x,i=e.y,a=e.z,s=(e.w,{});s.x=2*(n*a-r*i),s.y=2*(r*o-t*a),s.z=2*(t*i-n*o);var l={};return l.x=s.y*a-s.z*i,l.y=s.z*o-s.x*a,l.z=s.x*i-s.y*o,this.x=t+e.w*s.x+l.x,this.y=n+e.w*s.y+l.y,this.z=r+e.w*s.z+l.z,this},negate:function(){return this.multiplyScalar(-1)},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},normalize:function(){return this.divideScalar(this.length())},cross:function(e){var t=this.x,n=this.y,r=this.z;return this.x=n*e.z-r*e.y,this.y=r*e.x-t*e.z,this.z=t*e.y-n*e.x,this},crossVectors:function(e,t){return this.x=e.y*t.z-e.z*t.y,this.y=e.z*t.x-e.x*t.z,this.z=e.x*t.y-e.y*t.x,this},getPositionFromMatrix:function(e){return this.x=e.elements[12],this.y=e.elements[13],this.z=e.elements[14],this},setEulerFromRotationMatrix:function(e,t){var r=e.elements,o=r[0],i=r[4],a=r[8],s=(r[1],r[5]),l=r[9],u=(r[2],r[6]),c=r[10];return void 0===t||"XYZ"===t?(this.y=Math.asin(n.Math.clamp(a,-1,1)),Math.abs(a)<.99999?(this.x=Math.atan2(-l,c),this.z=Math.atan2(-i,o)):(this.x=Math.atan2(u,s),this.z=0)):console.error("Error with vector's setEulerFromRotationMatrix: Unknown order: "+t),this},rotateAboutVector:function(e,t){e.normalize();var n=Math.cos(t),r=Math.sin(t),o=this.clone().multiplyScalar(n),i=e.clone().cross(this).multiplyScalar(r),a=e.clone().multiplyScalar(e.clone().dot(this)).multiplyScalar(1-n),s=o.add(i).add(a);return this.x=s.x,this.y=s.y,this.z=s.z,this},clone:function(){return new n.Vector3(this.x,this.y,this.z)}},n.Matrix3=function(e,t,n,r,o,i,a,s,l){this.elements=new Float32Array(9),this.set(void 0!==e?e:1,t||0,n||0,r||0,void 0!==o?o:1,i||0,a||0,s||0,void 0!==l?l:1)},n.Matrix3.prototype={constructor:n.Matrix3,set:function(e,t,n,r,o,i,a,s,l){var u=this.elements;return u[0]=e,u[3]=t,u[6]=n,u[1]=r,u[4]=o,u[7]=i,u[2]=a,u[5]=s,u[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},copy:function(e){var t=e.elements;this.set(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8])},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},getInverse:function(e,t){var n=e.elements,r=this.elements;r[0]=n[10]*n[5]-n[6]*n[9],r[1]=-n[10]*n[1]+n[2]*n[9],r[2]=n[6]*n[1]-n[2]*n[5],r[3]=-n[10]*n[4]+n[6]*n[8],r[4]=n[10]*n[0]-n[2]*n[8],r[5]=-n[6]*n[0]+n[2]*n[4],r[6]=n[9]*n[4]-n[5]*n[8],r[7]=-n[9]*n[0]+n[1]*n[8],r[8]=n[5]*n[0]-n[1]*n[4];var o=n[0]*r[0]+n[1]*r[3]+n[2]*r[6];if(0===o){var i="Matrix3.getInverse(): can't invert matrix, determinant is 0";if(t)throw new Error(i);return console.warn(i),this.identity(),this}return this.multiplyScalar(1/o),this},getDeterminant:function(){var e=this.elements;return e[0]*e[4]*e[8]+e[1]*e[5]*e[6]+e[2]*e[3]*e[7]-e[2]*e[4]*e[6]-e[1]*e[3]*e[8]-e[0]*e[5]*e[7]},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},clone:function(){var e=this.elements;return new n.Matrix3(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8])}},n.Matrix4=function(e,t,n,r,o,i,a,s,l,u,c,p,f,d,h,m){if(void 0===t&&void 0!==e)this.elements=new Float32Array(e);else{var g=this.elements=new Float32Array(16);g[0]=void 0!==e?e:1,g[4]=t||0,g[8]=n||0,g[12]=r||0,g[1]=o||0,g[5]=void 0!==i?i:1,g[9]=a||0,g[13]=s||0,g[2]=l||0,g[6]=u||0,g[10]=void 0!==c?c:1,g[14]=p||0,g[3]=f||0,g[7]=d||0,g[11]=h||0,g[15]=void 0!==m?m:1}},n.Matrix4.prototype={constructor:n.Matrix4,set:function(e,t,n,r,o,i,a,s,l,u,c,p,f,d,h,m){var g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=o,g[5]=i,g[9]=a,g[13]=s,g[2]=l,g[6]=u,g[10]=c,g[14]=p,g[3]=f,g[7]=d,g[11]=h,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},copy:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]),this},matrix3FromTopLeft:function(){var e=this.elements;return new n.Matrix3(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10])},setRotationFromEuler:function(e,t){var n=this.elements,r=e.x,o=e.y,i=e.z,a=Math.cos(r),s=Math.sin(r),l=Math.cos(o),u=Math.sin(o),c=Math.cos(i),p=Math.sin(i);if(void 0===t||"XYZ"===t){var f=a*c,d=a*p,h=s*c,m=s*p;n[0]=l*c,n[4]=-l*p,n[8]=u,n[1]=d+h*u,n[5]=f-m*u,n[9]=-s*l,n[2]=m-f*u,n[6]=h+d*u,n[10]=a*l}else console.error("Error with matrix4 setRotationFromEuler. Order: "+t);return this},setRotationFromQuaternion:function(e){var t=this.elements,n=e.x,r=e.y,o=e.z,i=e.w,a=n+n,s=r+r,l=o+o,u=n*a,c=n*s,p=n*l,f=r*s,d=r*l,h=o*l,m=i*a,g=i*s,v=i*l;return t[0]=1-(f+h),t[4]=c-v,t[8]=p+g,t[1]=c+v,t[5]=1-(u+h),t[9]=d-m,t[2]=p-g,t[6]=d+m,t[10]=1-(u+f),this},lookAt:function(){var e=new n.Vector3,t=new n.Vector3,r=new n.Vector3;return function(n,o,i){var a=this.elements;return r.subVectors(n,o).normalize(),0===r.length()&&(r.z=1),e.crossVectors(i,r).normalize(),0===e.length()&&(r.x+=1e-4,e.crossVectors(i,r).normalize()),t.crossVectors(r,e),a[0]=e.x,a[4]=t.x,a[8]=r.x,a[1]=e.y,a[5]=t.y,a[9]=r.y,a[2]=e.z,a[6]=t.z,a[10]=r.z,this}}(),multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,o=this.elements,i=n[0],a=n[4],s=n[8],l=n[12],u=n[1],c=n[5],p=n[9],f=n[13],d=n[2],h=n[6],m=n[10],g=n[14],v=n[3],y=n[7],b=n[11],w=n[15],x=r[0],_=r[4],S=r[8],C=r[12],k=r[1],A=r[5],E=r[9],M=r[13],T=r[2],O=r[6],I=r[10],P=r[14],j=r[3],D=r[7],N=r[11],R=r[15];return o[0]=i*x+a*k+s*T+l*j,o[4]=i*_+a*A+s*O+l*D,o[8]=i*S+a*E+s*I+l*N,o[12]=i*C+a*M+s*P+l*R,o[1]=u*x+c*k+p*T+f*j,o[5]=u*_+c*A+p*O+f*D,o[9]=u*S+c*E+p*I+f*N,o[13]=u*C+c*M+p*P+f*R,o[2]=d*x+h*k+m*T+g*j,o[6]=d*_+h*A+m*O+g*D,o[10]=d*S+h*E+m*I+g*N,o[14]=d*C+h*M+m*P+g*R,o[3]=v*x+y*k+b*T+w*j,o[7]=v*_+y*A+b*O+w*D,o[11]=v*S+y*E+b*I+w*N,o[15]=v*C+y*M+b*P+w*R,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},getPosition:function(){var e=new n.Vector3;return function(){console.warn("DEPRECATED: Matrix4's .getPosition() has been removed. Use Vector3.getPositionFromMatrix( matrix ) instead.");var t=this.elements;return e.set(t[12],t[13],t[14])}}(),setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var n=this.elements,r=e.elements,o=r[0],i=r[4],a=r[8],s=r[12],l=r[1],u=r[5],c=r[9],p=r[13],f=r[2],d=r[6],h=r[10],m=r[14],g=r[3],v=r[7],y=r[11],b=r[15];n[0]=c*m*v-p*h*v+p*d*y-u*m*y-c*d*b+u*h*b,n[4]=s*h*v-a*m*v-s*d*y+i*m*y+a*d*b-i*h*b,n[8]=a*p*v-s*c*v+s*u*y-i*p*y-a*u*b+i*c*b,n[12]=s*c*d-a*p*d-s*u*h+i*p*h+a*u*m-i*c*m,n[1]=p*h*g-c*m*g-p*f*y+l*m*y+c*f*b-l*h*b,n[5]=a*m*g-s*h*g+s*f*y-o*m*y-a*f*b+o*h*b,n[9]=s*c*g-a*p*g-s*l*y+o*p*y+a*l*b-o*c*b,n[13]=a*p*f-s*c*f+s*l*h-o*p*h-a*l*m+o*c*m,n[2]=u*m*g-p*d*g+p*f*v-l*m*v-u*f*b+l*d*b,n[6]=s*d*g-i*m*g-s*f*v+o*m*v+i*f*b-o*d*b,n[10]=i*p*g-s*u*g+s*l*v-o*p*v-i*l*b+o*u*b,n[14]=s*u*f-i*p*f-s*l*d+o*p*d+i*l*m-o*u*m,n[3]=c*d*g-u*h*g-c*f*v+l*h*v+u*f*y-l*d*y,n[7]=i*h*g-a*d*g+a*f*v-o*h*v-i*f*y+o*d*y,n[11]=a*u*g-i*c*g-a*l*v+o*c*v+i*l*y-o*u*y,n[15]=i*c*f-a*u*f+a*l*d-o*c*d-i*l*h+o*u*h;var w=r[0]*n[0]+r[1]*n[4]+r[2]*n[8]+r[3]*n[12];if(0===w){var x="Matrix4.getInverse(): can't invert matrix, determinant is 0";if(t)throw new Error(x);return console.warn(x),this.identity(),this}return this.multiplyScalar(1/w),this},isReflected:function(){return this.matrix3FromTopLeft().getDeterminant()<0},compose:function(){var e=new n.Matrix4,t=new n.Matrix4;return function(n,r,o){var i=this.elements;return e.identity(),e.setRotationFromQuaternion(r),t.makeScale(o.x,o.y,o.z),this.multiplyMatrices(e,t),i[12]=n.x,i[13]=n.y,i[14]=n.z,this}}(),decompose:function(){var e=new n.Vector3,t=new n.Vector3,r=new n.Vector3,o=new n.Matrix4;return function(i,a,s){var l=this.elements;return e.set(l[0],l[1],l[2]),t.set(l[4],l[5],l[6]),r.set(l[8],l[9],l[10]),i=i instanceof n.Vector3?i:new n.Vector3,a=a instanceof n.Quaternion?a:new n.Quaternion,s=s instanceof n.Vector3?s:new n.Vector3,s.x=e.length(),s.y=t.length(),s.z=r.length(),i.x=l[12],i.y=l[13],i.z=l[14],o.copy(this),o.elements[0]/=s.x,o.elements[1]/=s.x,o.elements[2]/=s.x,o.elements[4]/=s.y,o.elements[5]/=s.y,o.elements[6]/=s.y,o.elements[8]/=s.z,o.elements[9]/=s.z,o.elements[10]/=s.z,a.setFromRotationMatrix(o),[i,a,s]}}(),scale:function(e){var t=this.elements,n=e.x,r=e.y,o=e.z;return t[0]*=n,t[4]*=r,t[8]*=o,t[1]*=n,t[5]*=r,t[9]*=o,t[2]*=n,t[6]*=r,t[10]*=o,t[3]*=n,t[7]*=r,t[11]*=o,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,Math.max(n,r)))},makeFrustum:function(e,t,n,r,o,i){var a=this.elements,s=2*o/(t-e),l=2*o/(r-n),u=(t+e)/(t-e),c=(r+n)/(r-n),p=-(i+o)/(i-o),f=-2*i*o/(i-o);return a[0]=s,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=l,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=p,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makePerspective:function(e,t,r,o){var i=r*Math.tan(n.Math.degToRad(.5*e)),a=-i,s=a*t,l=i*t;return this.makeFrustum(s,l,a,i,r,o)},makeOrthographic:function(e,t,n,r,o,i){var a=this.elements,s=1/(t-e),l=1/(n-r),u=1/(i-o),c=(t+e)*s,p=(n+r)*l,f=(i+o)*u;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-p,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},isEqual:function(e){var t=e.elements,n=this.elements;return n[0]==t[0]&&n[4]==t[4]&&n[8]==t[8]&&n[12]==t[12]&&n[1]==t[1]&&n[5]==t[5]&&n[9]==t[9]&&n[13]==t[13]&&n[2]==t[2]&&n[6]==t[6]&&n[10]==t[10]&&n[14]==t[14]&&n[3]==t[3]&&n[7]==t[7]&&n[11]==t[11]&&n[15]==t[15]},clone:function(){var e=this.elements;return new n.Matrix4(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15])},isIdentity:function(){var e=this.elements;return 1==e[0]&&0==e[4]&&0==e[8]&&0==e[12]&&0==e[1]&&1==e[5]&&0==e[9]&&0==e[13]&&0==e[2]&&0==e[6]&&1==e[10]&&0==e[14]&&0==e[3]&&0==e[7]&&0==e[11]&&1==e[15]}},n.Ray=function(e,t){this.origin=void 0!==e?e:new n.Vector3,this.direction=void 0!==t?t:new n.Vector3},n.Ray.prototype={constructor:n.Ray,set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return(t||new n.Vector3).copy(this.direction).multiplyScalar(e).add(this.origin)},recast:function(){var e=new n.Vector3;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){var r=t||new n.Vector3;r.subVectors(e,this.origin);var o=r.dot(this.direction);return r.copy(this.direction).multiplyScalar(o).add(this.origin)},distanceToPoint:function(e){var t=new n.Vector3;return function(e){var n=t.subVectors(e,this.origin).dot(this.direction);return t.copy(this.direction).multiplyScalar(n).add(this.origin),t.distanceTo(e)}}(),isIntersectionCylinder:function(){},isIntersectionSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},isIntersectionPlane:function(e){return 0!==e.normal.dot(this.direction)||0===e.distanceToPoint(this.origin)},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0!==t){return-(this.origin.dot(e.normal)+e.constant)/t}if(0===e.distanceToPoint(this.origin))return 0},intersectPlane:function(e,t){var n=this.distanceToPlane(e);if(void 0!==n)return this.at(n,t)},applyMatrix4:function(e){return this.direction.add(this.origin).applyMatrix4(e),this.origin.applyMatrix4(e),this.direction.sub(this.origin),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)},clone:function(){return(new n.Ray).copy(this)}},n.Sphere=function(e,t){this.center=void 0!==e?e:new n.Vector3,this.radius=void 0!==t?t:0},n.Sphere.prototype={constructor:n.Sphere,set:function(e,t){return this.center.copy(e),this.radius=t,this},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius},clone:function(){return(new n.Sphere).copy(this)}},n.Cylinder=function(e,t,r){this.c1=void 0!==e?e:new n.Vector3,this.c2=void 0!==t?t:new n.Vector3,this.direction=(new n.Vector3).subVectors(this.c2,this.c1).normalize(),this.radius=void 0!==r?r:0},n.Cylinder.prototype={constructor:n.Cylinder,copy:function(e){return this.c1.copy(e.c1),this.c2.copy(e.c2),this.direction.copy(e.direction),this.radius=e.radius,this},lengthSq:function(){var e=new n.Vector3;return function(){return e.subVectors(this.c2,this.c1).lengthSq()}}(),applyMatrix4:function(e){return this.direction.add(this.c1).applyMatrix4(e),this.c1.applyMatrix4(e),this.c2.applyMatrix4(e),this.direction.sub(this.c1).normalize(),this.radius=this.radius*e.getMaxScaleOnAxis(),this}},n.Triangle=function(e,t,r){this.a=void 0!==e?e:new n.Vector3,this.b=void 0!==t?t:new n.Vector3,this.c=void 0!==r?r:new n.Vector3},n.Triangle.prototype={constructor:n.Triangle,copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},applyMatrix4:function(e){return this.a.applyMatrix4(e),this.b.applyMatrix4(e),this.c.applyMatrix4(e),this},getNormal:function(){var e=new n.Vector3;return function(){var t=this.a.clone();return t.sub(this.b),e.subVectors(this.c,this.b),t.cross(e),t.normalize(),t}}()},n.EventDispatcher=function(){var e={};this.addEventListener=function(t,n){void 0===e[t]&&(e[t]=[]),-1===e[t].indexOf(n)&&e[t].push(n)},this.removeEventListener=function(t,n){var r=e[t].indexOf(n);-1!==r&&e[t].splice(r,1)},this.dispatchEvent=function(t){var n=e[t.type];if(void 0!==n){t.target=this;for(var r=0,o=n.length;r<o;r++)n[r].call(this,t)}}},n.Color=function(e){return arguments.length>1?(this.r=arguments[0]||0,this.g=arguments[1]||0,this.b=arguments[2]||0,this):this.set(e)},n.Color.prototype={constructor:n.Color,r:0,g:0,b:0,set:function(e){if(e instanceof n.Color)return e.clone();"number"==typeof e?this.setHex(e):"object"==typeof e&&"r"in e&&"g"in e&&"b"in e&&(this.r=e.r,this.g=e.g,this.b=e.b)},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},getHex:function(){return Math.round(255*this.r)<<16|Math.round(255*this.g)<<8|Math.round(255*this.b)},clone:function(){return new n.Color(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},scaled:function(){var e={};return e.r=Math.round(255*this.r),e.g=Math.round(255*this.g),e.b=Math.round(255*this.b),e.a=1,e}},n.Object3D=function(){this.id=n.Object3DIDCount++,this.name="",this.parent=void 0,this.children=[],this.position=new n.Vector3,this.rotation=new n.Vector3,this.matrix=new n.Matrix4,this.matrixWorld=new n.Matrix4,this.quaternion=new n.Quaternion,this.eulerOrder="XYZ",this.up=new n.Vector3(0,1,0),this.scale=new n.Vector3(1,1,1),this.matrixAutoUpdate=!0,this.matrixWorldNeedsUpdate=!0,this.rotationAutoUpdate=!0,this.useQuaternion=!1,this.visible=!0},n.Object3D.prototype={constructor:n.Object3D,lookAt:function(e){this.matrix.lookAt(e,this.position,this.up),this.rotationAutoUpdate&&(!0===this.useQuaternion?this.quaternion.copy(this.matrix.decompose()[1]):this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder))},add:function(e){if(e===this)return void console.error("Can't add $3Dmol.Object3D to itself");e.parent=this,this.children.push(e);for(var t=this;void 0!==t.parent;)t=t.parent;void 0!==t&&t instanceof n.Scene&&t.__addObject(e)},remove:function(e){var t=this.children.indexOf(e);if(-1!==t){e.parent=void 0,this.children.splice(t,1);for(var r=this;void 0!==r.parent;)r=r.parent;void 0!==r&&r instanceof n.Scene&&r.__removeObject(e)}},updateMatrix:function(){this.matrix.setPosition(this.position),!1===this.useQuaternion?this.matrix.setRotationFromEuler(this.rotation,this.eulerOrder):this.matrix.setRotationFromQuaternion(this.quaternion),1===this.scale.x&&1===this.scale.y&&1===this.scale.z||this.matrix.scale(this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){!0===this.matrixAutoUpdate&&this.updateMatrix(),!0!==this.matrixWorldNeedsUpdate&&!0!==e||(void 0===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1;for(var t=0;t<this.children.length;t++)this.children[t].updateMatrixWorld(!0)},clone:function(e){void 0===e&&(e=new n.Object3D),e.name=this.name,e.up.copy(this.up),e.position.copy(this.position),e.rotation.copy(this.rotation),e.eulerOrder=this.eulerOrder,e.scale.copy(this.scale),e.rotationAutoUpdate=this.rotationAutoUpdate,e.matrix.copy(this.matrix),e.matrixWorld.copy(this.matrixWorld),e.quaternion.copy(this.quaternion),e.matrixAutoUpdate=this.matrixAutoUpdate,e.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,e.useQuaternion=this.useQuaternion,e.visible=this.visible;for(var t=0;t<this.children.length;t++){var r=this.children[t];e.add(r.clone())}return e},setVisible:function(e){this.visible=e;for(var t=0;t<this.children.length;t++){this.children[t].setVisible(e)}}},n.Object3DIDCount=0,n.Geometry=function(){var e=function(e){this.id=e||0,this.vertexArray=null,this.colorArray=null,this.normalArray=null,this.faceArray=null,this.radiusArray=null,this.lineArray=null,this.vertices=0,this.faceidx=0,this.lineidx=0};e.prototype.setColors=function(e){var t=this.vertexArray,r=this.colorArray;if(t.length!=r.length)return void console.log("Cannot re-color geometry group due to mismatched lengths.");for(var o=0;o<t.length;o+=3){var i=e(t[o],t[o+1],t[o+2]);i instanceof n.Color||(i=n.CC.color(i)),r[o]=i.r,r[o+1]=i.g,r[o+2]=i.b}},e.prototype.getNumVertices=function(){return this.vertices},e.prototype.getVertices=function(){return this.vertexArray},e.prototype.getCentroid=function(){for(var e,t,r,o,i=new n.Vector3,a=0;a<this.vertices;++a)e=3*a,t=this.vertexArray[e],r=this.vertexArray[e+1],o=this.vertexArray[e+2],i.x+=t,i.y+=r,i.z+=o;return i.divideScalar(this.vertices),i},e.prototype.setNormals=function(){var e=this.faceArray,t=this.vertexArray,r=this.normalArray;if(this.vertices&&this.faceidx)for(var o,i,a,s,l,u,c,p=0;p<e.length/3;++p)o=3*e[3*p],i=3*e[3*p+1],a=3*e[3*p+2],s=new n.Vector3(t[o],t[o+1],t[o+2]),l=new n.Vector3(t[i],t[i+1],t[i+2]),u=new n.Vector3(t[a],t[a+1],t[a+2]),s.subVectors(s,l),u.subVectors(u,l),u.cross(s),c=u,c.normalize(),r[o]+=c.x,r[i]+=c.x,r[a]+=c.x,r[o+1]+=c.y,r[i+1]+=c.y,r[a+1]+=c.y,r[o+2]+=c.z,r[i+2]+=c.z,r[a+2]+=c.z},e.prototype.setLineIndices=function(){if(this.faceidx){var e=this.faceArray,t=this.lineArray=new Uint16Array(2*this.faceidx);this.lineidx=2*this.faceidx;for(var n=0;n<this.faceidx/3;++n){var r=3*n,o=2*r,i=e[r],a=e[r+1],s=e[r+2];t[o]=i,t[o+1]=a,t[o+2]=i,t[o+3]=s,t[o+4]=a,t[o+5]=s}}},e.prototype.truncateArrayBuffers=function(e,t){e=!0===e;var n=this.vertexArray,r=this.colorArray,o=this.normalArray,i=this.faceArray,a=this.lineArray,s=this.radiusArray;this.vertexArray=n.subarray(0,3*this.vertices),this.colorArray=r.subarray(0,3*this.vertices),e?(this.normalArray=o.subarray(0,3*this.vertices),this.faceArray=i.subarray(0,this.faceidx),this.lineidx>0?this.lineArray=a.subarray(0,this.lineidx):this.lineArray=new Uint16Array(0)):(this.normalArray=new Float32Array(0),this.faceArray=new Uint16Array(0),this.lineArray=new Uint16Array(0)),s&&(this.radiusArray=s.subarray(0,this.vertices)),t&&(this.normalArray&&(this.normalArray=new Float32Array(this.normalArray)),this.faceArray&&(this.faceArray=new Uint16Array(this.faceArray)),this.lineArray&&(this.lineArray=new Uint16Array(this.lineArray)),this.vertexArray&&(this.vertexArray=new Float32Array(this.vertexArray)),this.colorArray&&(this.colorArray=new Float32Array(this.colorArray)),this.radiusArray&&(this.radiusArray=new Float32Array(this.radiusArray))),this.__inittedArrays=!0};var t=function(t){var n=new e(t.geometryGroups.length);return t.geometryGroups.push(n),t.groups=t.geometryGroups.length,n.vertexArray=new Float32Array(196605),n.colorArray=new Float32Array(196605),t.mesh&&(n.normalArray=new Float32Array(196605),n.faceArray=new Uint16Array(393210),n.lineArray=new Uint16Array(393210)),t.radii&&(n.radiusArray=new Float32Array(65535)),n.useOffset=t.offset,n},r=function(e,t,r){n.EventDispatcher.call(this),this.id=n.GeometryIDCount++,this.name="",this.hasTangents=!1,this.dynamic=!0,this.mesh=!0===e,this.radii=t||!1,this.offset=r||!1,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.buffersNeedUpdate=!1,this.geometryGroups=[],this.groups=0};return r.prototype={constructor:r,updateGeoGroup:function(e){e=e||0;var n=this.groups>0?this.geometryGroups[this.groups-1]:null;return(!n||n.vertices+e>n.vertexArray.length/3)&&(n=t(this)),n},addGeoGroup:function(){return t(this)},setUpNormals:function(e){e=e||!1;for(var t=0;t<this.groups;t++){this.geometryGroups[t].setNormals(e)}},setColors:function(e){for(var t=this.geometryGroups.length,n=0;n<t;n++){this.geometryGroups[n].setColors(e)}},setUpWireframe:function(){for(var e=0;e<this.groups;e++){this.geometryGroups[e].setLineIndices()}},initTypedArrays:function(){for(var e=0;e<this.groups;e++){var t=this.geometryGroups[e];!0!==t.__inittedArrays&&t.truncateArrayBuffers(this.mesh,!1)}},dispose:function(){this.dispatchEvent({type:"dispose"})}},r}(),Object.defineProperty(n.Geometry.prototype,"vertices",{get:function(){for(var e=0,t=0;t<this.groups;t++)e+=this.geometryGroups[t].vertices;return e}}),n.GeometryIDCount=0,n.Raycaster=function(){var e=function(e,t,r,o){this.ray=new n.Ray(e,t),this.ray.direction.lengthSq()>0&&this.ray.direction.normalize(),this.near=o||0,this.far=r||1/0},t=new n.Sphere,r=new n.Cylinder,o=new n.Triangle,i=new n.Vector3,a=new n.Vector3,s=new n.Vector3,l=new n.Vector3,u=(new n.Ray,new n.Vector3,new n.Vector3),c=(new n.Matrix4,function(e,t){return e.distance-t.distance}),p=function(e){return Math.min(Math.max(e,-1),1)},f=function(e,c,f,d){if(u.getPositionFromMatrix(e.matrixWorld),void 0===c.intersectionShape)return d;var h=c.intersectionShape,m=f.linePrecision;m*=e.matrixWorld.getMaxScaleOnAxis();var g=m*m;if(void 0!==c.boundingSphere&&c.boundingSphere instanceof n.Sphere&&(t.copy(c.boundingSphere),t.applyMatrix4(e.matrixWorld),!f.ray.isIntersectionSphere(t)))return d;var v,y,b,w,x,_,S,C,k,A,E,M,T,O;for(v=0,y=h.triangle.length;v<y;v++)if(h.triangle[v]instanceof n.Triangle){if(o.copy(h.triangle[v]),o.applyMatrix4(e.matrixWorld),b=o.getNormal(),(w=f.ray.direction.dot(b))>=0)continue;if(i.subVectors(o.a,f.ray.origin),(S=b.dot(i)/w)<0)continue;a.copy(f.ray.direction).multiplyScalar(S).add(f.ray.origin),a.sub(o.a),s.copy(o.b).sub(o.a),l.copy(o.c).sub(o.a);var I=s.dot(l),P=s.lengthSq(),j=l.lengthSq();if((M=(P*a.dot(l)-I*a.dot(s))/(P*j-I*I))<0||M>1)continue;if((E=(a.dot(s)-M*I)/P)<0||E>1||E+M>1)continue;d.push({clickable:c,distance:S})}for(v=0,y=h.cylinder.length;v<y;v++)if(h.cylinder[v]instanceof n.Cylinder){if(r.copy(h.cylinder[v]),r.applyMatrix4(e.matrixWorld),i.subVectors(r.c1,f.ray.origin),x=i.dot(r.direction),_=i.dot(f.ray.direction),w=p(f.ray.direction.dot(r.direction)),0===(k=1-w*w))continue;T=(w*_-x)/k,O=(_-w*x)/k,a.copy(r.direction).multiplyScalar(T).add(r.c1),s.copy(f.ray.direction).multiplyScalar(O).add(f.ray.origin),C=l.subVectors(a,s).lengthSq();var D=r.radius*r.radius;if(C<=D){if(A=(w*x-_)*(w*x-_)-k*(i.lengthSq()-x*x-D),M=S=A<=0?Math.sqrt(C):(_-w*x-Math.sqrt(A))/k,(E=w*M-x)<0||E*E>r.lengthSq()||M<0)continue;d.push({clickable:c,distance:S})}}for(v=0,y=h.line.length;v<y;v+=2){a.copy(h.line[v]),a.applyMatrix4(e.matrixWorld),s.copy(h.line[v+1]),s.applyMatrix4(e.matrixWorld),l.subVectors(s,a);var N=l.lengthSq();l.normalize(),i.subVectors(a,f.ray.origin);var R=i.dot(l);_=i.dot(f.ray.direction),w=p(f.ray.direction.dot(l)),k=1-w*w,0!==k&&(T=(w*_-R)/k,O=(_-w*R)/k,a.add(l.multiplyScalar(T)),s.copy(f.ray.direction).multiplyScalar(O).add(f.ray.origin),(C=l.subVectors(s,a).lengthSq())<g&&T*T<N&&d.push({clickable:c,distance:O}))}for(v=0,y=h.sphere.length;v<y;v++)if(h.sphere[v]instanceof n.Sphere&&(t.copy(h.sphere[v]),t.applyMatrix4(e.matrixWorld),f.ray.isIntersectionSphere(t))){a.subVectors(t.center,f.ray.origin);var F=a.dot(f.ray.direction);return A=F*F-(a.lengthSq()-t.radius*t.radius),F<0?d:(S=A<=0?F:F-Math.sqrt(A),d.push({clickable:c,distance:S}),d)}};return e.prototype.precision=1e-4,e.prototype.linePrecision=.2,e.prototype.set=function(e,t){this.ray.set(e,t)},e.prototype.intersectObjects=function(e,t){for(var n=[],r=0,o=t.length;r<o;r++)f(e,t[r],this,n);return n.sort(c),n},e}(),n.Projector=function(){var e=(new n.Matrix4,new n.Matrix4);this.projectVector=function(t,n){return n.matrixWorldInverse.getInverse(n.matrixWorld),e.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),t.applyProjection(e)},this.unprojectVector=function(t,n){return n.projectionMatrixInverse.getInverse(n.projectionMatrix),e.multiplyMatrices(n.matrixWorld,n.projectionMatrixInverse),t.applyProjection(e)}},n.Camera=function(e,t,r,o,i){n.Object3D.call(this),this.fov=void 0!==e?e:50,this.aspect=void 0!==t?t:1,this.near=void 0!==r?r:.1,this.far=void 0!==o?o:2e3,this.projectionMatrix=new n.Matrix4,this.projectionMatrixInverse=new n.Matrix4,this.matrixWorldInverse=new n.Matrix4;var a=this.position.z;this.right=a*Math.tan(Math.PI/180*e),this.left=-this.right,this.top=this.right/this.aspect,this.bottom=-this.top,this.ortho=!!i,this.updateProjectionMatrix()},n.Camera.prototype=Object.create(n.Object3D.prototype),n.Camera.prototype.lookAt=function(e){this.matrix.lookAt(this.position,e,this.up),this.rotationAutoUpdate&&(!1===this.useQuaternion?this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder):this.quaternion.copy(this.matrix.decompose()[1]))},n.Camera.prototype.updateProjectionMatrix=function(){this.ortho?this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far):this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},n.SpritePlugin=function(){function e(e,t){var n=r.createProgram(),o=r.createShader(r.FRAGMENT_SHADER),i=r.createShader(r.VERTEX_SHADER),a="precision "+t+" float;\n";return r.shaderSource(o,a+e.fragmentShader),r.shaderSource(i,a+e.vertexShader),r.compileShader(o),r.compileShader(i),r.getShaderParameter(o,r.COMPILE_STATUS)&&r.getShaderParameter(i,r.COMPILE_STATUS)?(r.attachShader(n,o),r.attachShader(n,i),r.linkProgram(n),r.getProgramParameter(n,r.LINK_STATUS)||console.error("Could not initialize shader"),n):(console.error(r.getShaderInfoLog(o)),console.error("could not initialize shader"),null)}function t(e,t){return e.z!==t.z?t.z-e.z:t.id-e.id}var r,o,i,a={};this.init=function(t){r=t.context,o=t,i=t.getPrecision(),a.vertices=new Float32Array(16),a.faces=new Uint16Array(6);var s=0;a.vertices[s++]=-1,a.vertices[s++]=-1,a.vertices[s++]=0,a.vertices[s++]=0,a.vertices[s++]=1,a.vertices[s++]=-1,a.vertices[s++]=1,a.vertices[s++]=0,a.vertices[s++]=1,a.vertices[s++]=1,a.vertices[s++]=1,a.vertices[s++]=1,a.vertices[s++]=-1,a.vertices[s++]=1,a.vertices[s++]=0,a.vertices[s++]=1,s=0,a.faces[s++]=0,a.faces[s++]=1,a.faces[s++]=2,a.faces[s++]=0,a.faces[s++]=2,a.faces[s++]=3,a.vertexBuffer=r.createBuffer(),a.elementBuffer=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,a.vertexBuffer),r.bufferData(r.ARRAY_BUFFER,a.vertices,r.STATIC_DRAW),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,a.elementBuffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,a.faces,r.STATIC_DRAW),a.program=e(n.ShaderLib.sprite,i),a.attributes={},a.uniforms={},a.attributes.position=r.getAttribLocation(a.program,"position"),a.attributes.uv=r.getAttribLocation(a.program,"uv"),a.uniforms.uvOffset=r.getUniformLocation(a.program,"uvOffset"),a.uniforms.uvScale=r.getUniformLocation(a.program,"uvScale"),a.uniforms.rotation=r.getUniformLocation(a.program,"rotation"),a.uniforms.scale=r.getUniformLocation(a.program,"scale"),a.uniforms.alignment=r.getUniformLocation(a.program,"alignment"),a.uniforms.color=r.getUniformLocation(a.program,"color"),a.uniforms.map=r.getUniformLocation(a.program,"map"),a.uniforms.opacity=r.getUniformLocation(a.program,"opacity"),a.uniforms.useScreenCoordinates=r.getUniformLocation(a.program,"useScreenCoordinates"),a.uniforms.screenPosition=r.getUniformLocation(a.program,"screenPosition"),a.uniforms.modelViewMatrix=r.getUniformLocation(a.program,"modelViewMatrix"),a.uniforms.projectionMatrix=r.getUniformLocation(a.program,"projectionMatrix"),a.uniforms.fogType=r.getUniformLocation(a.program,"fogType"),a.uniforms.fogDensity=r.getUniformLocation(a.program,"fogDensity"),a.uniforms.fogNear=r.getUniformLocation(a.program,"fogNear"),a.uniforms.fogFar=r.getUniformLocation(a.program,"fogFar"),a.uniforms.fogColor=r.getUniformLocation(a.program,"fogColor"),a.uniforms.alphaTest=r.getUniformLocation(a.program,"alphaTest")},this.render=function(e,n,i,s){var l=e.__webglSprites,u=l.length;if(u){var c=a.attributes,p=a.uniforms,f=.5*i,d=.5*s;r.useProgram(a.program),r.enableVertexAttribArray(c.position),r.enableVertexAttribArray(c.uv),r.disable(r.CULL_FACE),r.enable(r.BLEND),r.bindBuffer(r.ARRAY_BUFFER,a.vertexBuffer),r.vertexAttribPointer(c.position,2,r.FLOAT,!1,16,0),r.vertexAttribPointer(c.uv,2,r.FLOAT,!1,16,8),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,a.elementBuffer),r.uniformMatrix4fv(p.projectionMatrix,!1,n.projectionMatrix.elements),r.activeTexture(r.TEXTURE0),r.uniform1i(p.map,0);var h=0,m=0,g=e.fog;g?(r.uniform3f(p.fogColor,g.color.r,g.color.g,g.color.b),r.uniform1f(p.fogNear,g.near),r.uniform1f(p.fogFar,g.far),r.uniform1i(p.fogType,1),h=1,m=1):(r.uniform1i(p.fogType,0),h=0,m=0);var v,y,b,w,x,_=[];for(v=0;v<u;v++)y=l[v],b=y.material,y.visible&&0!==b.opacity&&(b.useScreenCoordinates?y.z=-y.position.z:(y._modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,y.matrixWorld),y.z=-y._modelViewMatrix.elements[14]));for(l.sort(t),v=0;v<u;v++)if(y=l[v],b=y.material,y.visible&&0!==b.opacity&&b.map&&b.map.image&&b.map.image.width){r.uniform1f(p.alphaTest,b.alphaTest);var S=b.map.image.width,C=b.map.image.height;_[0]=S*o.devicePixelRatio/i,_[1]=C*o.devicePixelRatio/s,!0===b.useScreenCoordinates?(r.uniform1i(p.useScreenCoordinates,1),r.uniform3f(p.screenPosition,(y.position.x*o.devicePixelRatio-f)/f,(d-y.position.y*o.devicePixelRatio)/d,Math.max(0,Math.min(1,y.position.z)))):(r.uniform1i(p.useScreenCoordinates,0),r.uniformMatrix4fv(p.modelViewMatrix,!1,y._modelViewMatrix.elements)),x=e.fog&&b.fog?m:0,h!==x&&(r.uniform1i(p.fogType,x),h=x),w=1/(b.scaleByViewport?s:1),_[0]*=w*y.scale.x,_[1]*=w*y.scale.y,r.uniform2f(p.uvScale,b.uvScale.x,b.uvScale.y),r.uniform2f(p.uvOffset,b.uvOffset.x,b.uvOffset.y),r.uniform2f(p.alignment,b.alignment.x,b.alignment.y),r.uniform1f(p.opacity,b.opacity),r.uniform3f(p.color,b.color.r,b.color.g,b.color.b),r.uniform1f(p.rotation,y.rotation),r.uniform2fv(p.scale,_),o.setDepthTest(b.depthTest),o.setDepthWrite(b.depthWrite),o.setTexture(b.map,0),r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0)}r.enable(r.CULL_FACE)}}},n.Light=function(e,t){n.Object3D.call(this),this.color=new n.Color(e),this.position=new n.Vector3(0,1,0),this.target=new n.Object3D,this.intensity=void 0!==t?t:1,this.castShadow=!1,this.onlyShadow=!1},n.Light.prototype=Object.create(n.Object3D.prototype),n.Material=function(){n.EventDispatcher.call(this),this.id=n.MaterialIdCount++,this.name="",this.side=n.FrontSide,this.opacity=1,this.transparent=!1,this.depthTest=!0,this.depthWrite=!0,this.stencilTest=!0,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.visible=!0,this.needsUpdate=!0},n.Material.prototype.setValues=function(e){if(void 0!==e)for(var t in e){var r=e[t];if(void 0!==r){if(t in this){var o=this[t];o instanceof n.Color&&r instanceof n.Color?o.copy(r):o instanceof n.Color?o.set(r):o instanceof n.Vector3&&r instanceof n.Vector3?o.copy(r):this[t]=r}}else console.warn("$3Dmol.Material: '"+t+"' parameter is undefined.")}},n.Material.prototype.clone=function(e){return void 0===e&&(e=new n.Material),e.name=this.name,e.side=this.side,e.opacity=this.opacity,e.transparent=this.transparent,e.depthTest=this.depthTest,e.depthWrite=this.depthWrite,e.stencilTest=this.stencilTest,e.polygonOffset=this.polygonOffset,e.polygonOffsetFactor=this.polygonOffsetFactor,e.polygonOffsetUnits=this.polygonOffsetUnits,e.alphaTest=this.alphaTest,e.overdraw=this.overdraw,e.visible=this.visible,e},n.Material.prototype.dispose=function(){this.dispatchEvent({type:"dispose"})},n.MaterialIdCount=0,n.LineBasicMaterial=function(e){n.Material.call(this),this.color=new n.Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.vertexColors=!1,this.fog=!0,this.shaderID="basic",this.setValues(e)},n.LineBasicMaterial.prototype=Object.create(n.Material.prototype),n.LineBasicMaterial.prototype.clone=function(){var e=new n.LineBasicMaterial;return n.Material.prototype.clone.call(this,e),e.color.copy(this.color),e},n.MeshLambertMaterial=function(e){n.Material.call(this),this.color=new n.Color(16777215),this.ambient=new n.Color(1048575),this.emissive=new n.Color(0),this.wrapAround=!1,this.wrapRGB=new n.Vector3(1,1,1),this.map=null,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=n.SmoothShading,this.shaderID="lambert",this.vertexColors=n.NoColors,this.skinning=!1,this.setValues(e)},n.MeshLambertMaterial.prototype=Object.create(n.Material.prototype),n.MeshLambertMaterial.prototype.clone=function(e){return void 0===e&&(e=new n.MeshLambertMaterial),n.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.ambient.copy(this.ambient),e.emissive.copy(this.emissive),e.wrapAround=this.wrapAround,e.wrapRGB.copy(this.wrapRGB),e.map=this.map,e.lightMap=this.lightMap,e.specularMap=this.specularMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.shaderID=this.shaderID,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},n.MeshDoubleLambertMaterial=function(e){n.MeshLambertMaterial.call(this,e),this.shaderID="lambertdouble",this.side=n.DoubleSide},n.MeshDoubleLambertMaterial.prototype=Object.create(n.MeshLambertMaterial.prototype),n.MeshDoubleLambertMaterial.prototype.clone=function(){var e=new n.MeshDoubleLambertMaterial;return n.MeshLambertMaterial.prototype.clone.call(this,e),e},n.MeshOutlineMaterial=function(e){n.Material.call(this),e=e||{},this.fog=!0,this.shaderID="outline",this.wireframe=!1,this.outlineColor=e.color||new n.Color(0,0,0),this.outlineWidth=e.width||.1,this.outlinePushback=e.pushback||1},n.MeshOutlineMaterial.prototype=Object.create(n.Material.prototype),n.MeshOutlineMaterial.prototype.clone=function(e){return void 0===e&&(e=new n.MeshOutlineMaterial),n.Material.prototype.clone.call(this,e),e.fog=this.fog,e.shaderID=this.shaderID,e.wireframe=this.wireframe,e},n.ImposterMaterial=function(e){n.Material.call(this),this.color=new n.Color(16777215),this.ambient=new n.Color(1048575),this.emissive=new n.Color(0),this.imposter=!0,this.wrapAround=!1,this.wrapRGB=new n.Vector3(1,1,1),this.map=null,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=n.SmoothShading,this.shaderID=null,this.vertexColors=n.NoColors,this.skinning=!1,this.setValues(e)},n.ImposterMaterial.prototype=Object.create(n.Material.prototype),n.ImposterMaterial.prototype.clone=function(){var e=new n.ImposterMaterial;return n.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.ambient.copy(this.ambient),e.emissive.copy(this.emissive),e.wrapAround=this.wrapAround,e.wrapRGB.copy(this.wrapRGB),e.map=this.map,e.lightMap=this.lightMap,e.specularMap=this.specularMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.shaderID=this.shaderID,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},n.SphereImposterMaterial=function(e){n.ImposterMaterial.call(this),this.shaderID="sphereimposter",this.setValues(e)},n.SphereImposterMaterial.prototype=Object.create(n.ImposterMaterial.prototype),n.SphereImposterMaterial.prototype.clone=function(){var e=new n.SphereImposterMaterial;return n.ImposterMaterial.prototype.clone.call(this,e),e},n.SphereImposterOutlineMaterial=function(e){n.ImposterMaterial.call(this),e=e||{},this.shaderID="sphereimposteroutline",this.outlineColor=e.color||new n.Color(0,0,0),this.outlineWidth=e.width||.1,this.outlinePushback=e.pushback||1,this.setValues(e)},n.SphereImposterOutlineMaterial.prototype=Object.create(n.ImposterMaterial.prototype),n.SphereImposterOutlineMaterial.prototype.clone=function(){var e=new n.SphereImposterOutlineMaterial;return n.ImposterMaterial.prototype.clone.call(this,e),e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.outlinePushback=this.outlinePushback,e},n.StickImposterMaterial=function(e){n.ImposterMaterial.call(this),this.shaderID="stickimposter",this.setValues(e)},n.StickImposterMaterial.prototype=Object.create(n.ImposterMaterial.prototype),n.StickImposterMaterial.prototype.clone=function(){var e=new n.StickImposterOutlineMaterial;return n.ImposterMaterial.prototype.clone.call(this,e),e},n.StickImposterOutlineMaterial=function(e){n.ImposterMaterial.call(this),e=e||{},this.shaderID="stickimposteroutline",this.outlineColor=e.color||new n.Color(0,0,0),this.outlineWidth=e.width||.1,this.outlinePushback=e.pushback||1,this.setValues(e)},n.StickImposterOutlineMaterial.prototype=Object.create(n.ImposterMaterial.prototype),n.StickImposterOutlineMaterial.prototype.clone=function(){var e=new n.StickImposterOutlineMaterial;return n.ImposterMaterial.prototype.clone.call(this,e),e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.outlinePushback=this.outlinePushback,e},n.InstancedMaterial=function(e){n.Material.call(this),this.color=new n.Color(16777215),this.ambient=new n.Color(1048575),this.emissive=new n.Color(0),this.wrapAround=!1,this.wrapRGB=new n.Vector3(1,1,1),this.map=null,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=n.SmoothShading,this.shaderID="instanced",this.vertexColors=n.NoColors,this.skinning=!1,this.sphere=null,this.setValues(e)},n.InstancedMaterial.prototype=Object.create(n.Material.prototype),n.InstancedMaterial.prototype.clone=function(){var e=new n.InstancedMaterial;return n.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.ambient.copy(this.ambient),e.emissive.copy(this.emissive),e.wrapAround=this.wrapAround,e.wrapRGB.copy(this.wrapRGB),e.map=this.map,e.lightMap=this.lightMap,e.specularMap=this.specularMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.shaderID=this.shaderID,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e.sphere=this.sphere,e},n.SpriteMaterial=function(e){n.Material.call(this),this.color=new n.Color(16777215),this.map=new n.Texture,this.useScreenCoordinates=!0,this.depthTest=!this.useScreenCoordinates,this.sizeAttenuation=!this.useScreenCoordinates,this.scaleByViewPort=!this.sizeAttenuation,this.alignment=n.SpriteAlignment.center.clone(),this.fog=!1,this.uvOffset=new n.Vector2(0,0),this.uvScale=new n.Vector2(1,1),this.setValues(e),e=e||{},void 0===e.depthTest&&(this.depthTest=!this.useScreenCoordinates),void 0===e.sizeAttenuation&&(this.sizeAttenuation=!this.useScreenCoordinates),void 0===e.scaleByViewPort&&(this.scaleByViewPort=!this.sizeAttenuation)},n.SpriteMaterial.prototype=Object.create(n.Material.prototype),n.SpriteMaterial.prototype.clone=function(){var e=new n.SpriteMaterial;return n.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.useScreenCoordinates=useScreenCoordinates,e.sizeAttenuation=this.sizeAttenuation,e.scaleByViewport=this.scaleByViewPort,e.alignment.copy(this.alignment),e.uvOffset.copy(this.uvOffset),e},n.SpriteAlignment={},n.SpriteAlignment.topLeft=new n.Vector2(1,-1),n.SpriteAlignment.topCenter=new n.Vector2(0,-1),n.SpriteAlignment.topRight=new n.Vector2(-1,-1),n.SpriteAlignment.centerLeft=new n.Vector2(1,0),n.SpriteAlignment.center=new n.Vector2(0,0),n.SpriteAlignment.centerRight=new n.Vector2(-1,0),n.SpriteAlignment.bottomLeft=new n.Vector2(1,1),n.SpriteAlignment.bottomCenter=new n.Vector2(0,1),n.SpriteAlignment.bottomRight=new n.Vector2(-1,1),n.Texture=function(e){n.EventDispatcher.call(this),this.id=n.TextureIdCount++,this.name="",this.image=e,this.mipmaps=[],this.mapping=new n.UVMapping,this.wrapS=n.ClampToEdgeWrapping,this.wrapT=n.ClampToEdgeWrapping,this.magFilter=n.LinearFilter,this.minFilter=n.LinearMipMapLinearFilter,this.anisotropy=1,this.format=n.RGBAFormat,this.type=n.UnsignedByteType,this.offset=new n.Vector2(0,0),this.repeat=new n.Vector2(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.needsUpdate=!1,this.onUpdate=null},n.Texture.prototype={constructor:n.Texture,clone:function(e){return void 0===e&&(e=new n.Texture),e.image=this.image,e.mipmaps=this.mipmaps.slice(0),e.mapping=this.mapping,e.wrapS=this.wrapS,e.wrapT=this.wrapT,e.magFilter=this.magFilter,e.minFilter=this.minFilter,e.anisotropy=this.anisotropy,e.format=this.format,e.type=this.type,e.offset.copy(this.offset),e.repeat.copy(this.repeat),e.generateMipmaps=this.generateMipmaps,e.premultiplyAlpha=this.premultiplyAlpha,e.flipY=this.flipY,e.unpackAlignment=this.unpackAlignment,e},dispose:function(){this.dispatchEvent({type:"dispose"})}},n.TextureIdCount=0,n.FrontSide=0,n.BackSide=1,n.DoubleSide=2,n.NoShading=0,n.FlatShading=1,n.SmoothShading=2,n.NoColors=0,n.FaceColors=1,n.VertexColors=2,n.MultiplyOperation=0,n.MixOperation=1,n.AddOperation=2,n.UVMapping=function(){},n.ClampToEdgeWrapping=1001,n.LinearFilter=1006,n.LinearMipMapLinearFilter=1008,n.UnsignedByteType=1009,n.RGBAFormat=1021,n.Line=function(e,t,r){n.Object3D.call(this),this.geometry=e,this.material=void 0!==t?t:new n.LineBasicMaterial({color:16777215*Math.random()}),this.type=void 0!==r?r:n.LineStrip},n.LineStrip=0,n.LinePieces=1,n.Line.prototype=Object.create(n.Object3D.prototype),n.Line.prototype.clone=function(e){return void 0===e&&(e=new n.Line(this.geometry,this.material,this.type)),n.Object3D.prototype.clone.call(this,e),e},n.Mesh=function(e,t){n.Object3D.call(this),this.geometry=e,this.material=void 0!==t?t:new n.MeshBasicMaterial({color:16777215*Math.random(),wireframe:!0})},n.Mesh.prototype=Object.create(n.Object3D.prototype),n.Mesh.prototype.clone=function(e){return void 0===e&&(e=new n.Mesh(this.geometry,this.material)),n.Object3D.prototype.clone.call(this,e),e},n.Sprite=function(e){n.Object3D.call(this),this.material=void 0!==e?e:new n.SpriteMaterial,this.rotation3d=this.rotation,this.rotation=0},n.Sprite.prototype=Object.create(n.Object3D.prototype),n.Sprite.prototype.updateMatrix=function(){this.matrix.setPosition(this.position),this.rotation3d.set(0,0,this.rotation),this.matrix.setRotationFromEuler(this.rotation3d),1===this.scale.x&&1===this.scale.y||this.matrix.scale(this.scale),this.matrixWorldNeedsUpdate=!0},n.Sprite.prototype.clone=function(e){return void 0===e&&(e=new n.Sprite(this.material)),n.Object3D.prototype.clone.call(this,e),e},n.Renderer=function(e){function t(e){se[e]||(q.enableVertexAttribArray(e),se[e]=!0)}function r(){for(var e in se)se[e]&&(q.disableVertexAttribArray(e),se[e]=!1)}function o(e,t,n){te!==e&&(e?q.enable(q.POLYGON_OFFSET_FILL):q.disable(q.POLYGON_OFFSET_FILL))}function i(e){e!==ne&&(q.lineWidth(e),ne=e)}function a(e,t){var n;return"fragment"===e?n=q.createShader(q.FRAGMENT_SHADER):"vertex"===e&&(n=q.createShader(q.VERTEX_SHADER)),q.shaderSource(n,t),q.compileShader(n),q.getShaderParameter(n,q.COMPILE_STATUS)?n:(console.error(q.getShaderInfoLog(n)),console.error("could not initialize shader"),null)}function s(e,t,n,r){var o,i,s,l,u=[];u.push(e),u.push(t);for(o in r)u.push(o),u.push(r[o]);for(l=u.join(),o=0,i=U.length;o<i;o++){var c=U[o];if(c.code===l)return c.usedTimes++,c.program}s=q.createProgram();var p=T,f="precision "+p+" float;",d=[f].join("\n"),h=[r.fragdepth?"#extension GL_EXT_frag_depth: enable":"",r.wireframe?"#define WIREFRAME 1":"",f].join("\n"),m=a("fragment",h+e),g=a("vertex",d+t);q.attachShader(s,g),q.attachShader(s,m),q.linkProgram(s),q.getProgramParameter(s,q.LINK_STATUS)||console.error("Could not initialize shader"),s.uniforms={},s.attributes={};var v,y,b;v=["viewMatrix","modelViewMatrix","projectionMatrix","normalMatrix"];for(y in n)v.push(y);for(b=0;b<v.length;b++){var w=v[b];s.uniforms[w]=q.getUniformLocation(s,w)}for(v=["position","normal","color","lineDistance","offset","radius"],b=0;b<v.length;b++){var x=v[b];s.attributes[x]=q.getAttribLocation(s,x)}return s.id=H++,U.push({program:s,code:l,usedTimes:1}),V.info.memory.programs=U.length,s}function l(e,t,n,r,o){r.needsUpdate&&(r.program&&be(r),V.initMaterial(r,t,n,o),r.needsUpdate=!1);var i=!1,a=r.program,s=a.uniforms,l=r.uniforms;return a!=G&&(q.useProgram(a),G=a,i=!0),r.id!=W&&(W=r.id,i=!0),e!=Y&&(Y=e,i=!0),q.uniformMatrix4fv(s.projectionMatrix,!1,e.projectionMatrix.elements),q.uniformMatrix4fv(s.modelViewMatrix,!1,o._modelViewMatrix.elements),q.uniformMatrix3fv(s.normalMatrix,!1,o._normalMatrix.elements),i&&(l.fogColor.value=n.color,l.fogNear.value=n.near,l.fogFar.value=n.far,r.shaderID.startsWith("lambert")||"instanced"===r.shaderID||r.shaderID.endsWith("imposter")?(q.uniformMatrix4fv(s.viewMatrix,!1,e.matrixWorldInverse.elements),pe&&(E(a,t),pe=!1),l.directionalLightColor.value=fe.directional.colors,l.directionalLightDirection.value=fe.directional.positions):r.shaderID.endsWith("outline")?(l.outlineColor.value=r.outlineColor,l.outlineWidth.value=r.outlineWidth,l.outlinePushback.value=r.outlinePushback):"sphereimposter"===r.shaderID&&(q.uniformMatrix4fv(s.viewMatrix,!1,e.matrixWorldInverse.elements),q.uniformMatrix3fv(s.normalMatrix,!1,o._normalMatrix.elements),l.directionalLightColor.value=fe.directional.colors,l.directionalLightDirection.value=fe.directional.positions),l.opacity.value=r.opacity,u(s,l)),a}function u(e,t){var n,r,o,i;for(n in t)e[n]&&(r=t[n].type,o=t[n].value,i=e[n],"f"===r?q.uniform1f(i,o):"fv"===r?q.uniform3fv(i,o):"c"===r?q.uniform3f(i,o.r,o.g,o.b):"f4"===r&&q.uniform4f(i,o[0],o[1],o[2],o[3]))}function c(e,t,n,r,i,a,s,l){var u,c,p,f,d,h,m;t?(d=e.length-1,h=-1,m=-1):(d=0,h=e.length,m=1);for(var g=d;g!==h;g+=m)if(u=e[g],u.render){if(c=u.object,p=u.buffer,!(f=u[n]))continue;s&&V.setBlending(!0),V.setDepthTest(f.depthTest),V.setDepthWrite(f.depthWrite),o(f.polygonOffset,f.polygonOffsetFactor,f.polygonOffsetUnits);var v=c._modelViewMatrix.isReflected();V.setMaterialFaces(f,v),V.renderBuffer(r,i,a,f,p,c),(B||f.outline)&&("sphereimposter"==f.shaderID?V.renderBuffer(r,i,a,L,p,c):"stickimposter"==f.shaderID?V.renderBuffer(r,i,a,z,p,c):f.wireframe||"basic"===f.shaderID||0===f.opacity||V.renderBuffer(r,i,a,F,p,c))}}function p(e,t,n){if(Z=-1,G=null,Y=null,J=-1,ee=-1,$=-1,K=-1,W=-1,Q=-1,e.length)for(var r=0,o=e.length;r<o;r++)pe=!0,e[r].render(t,n,ie,ae),Z=-1,G=null,Y=null,J=-1,ee=-1,$=-1,K=-1,W=-1,Q=-1}function f(e,t){var r,o,i,a;if(!e.__webglInit&&(e.__webglInit=!0,e._modelViewMatrix=new n.Matrix4,e._normalMatrix=new n.Matrix3,void 0!==e.geometry&&void 0===e.geometry.__webglInit&&(e.geometry.__webglInit=!0,e.geometry.addEventListener("dispose",me)),e instanceof n.Mesh||e instanceof n.Line))for(i=e.geometry,e.material,r=0,o=i.geometryGroups.length;r<o;r++)a=i.geometryGroups[r],a.id=X++,a.__webglVertexBuffer||(e instanceof n.Mesh?(b(a),i.elementsNeedUpdate=!0,i.normalsNeedUpdate=!0):e instanceof n.Line&&w(a),i.verticesNeedUpdate=!0,i.colorsNeedUpdate=!0);if(!e.__webglActive){if(e instanceof n.Mesh||e instanceof n.Line)for(i=e.geometry,r=0,o=i.geometryGroups.length;r<o;r++)a=i.geometryGroups[r],x(t.__webglObjects,a,e);else e instanceof n.Sprite&&t.__webglSprites.push(e);e.__webglActive=!0}}function d(e){var t,r=e.geometry;e.material;if(e instanceof n.Mesh||e instanceof n.Line){for(var o=0,i=r.geometryGroups.length;o<i;o++)t=r.geometryGroups[o],(r.verticesNeedUpdate||r.elementsNeedUpdate||r.colorsNeedUpdate||r.normalsNeedUpdate)&&y(t,q.STATIC_DRAW);r.verticesNeedUpdate=!1,r.elementsNeedUpdate=!1,r.normalsNeedUpdate=!1,r.colorsNeedUpdate=!1,r.buffersNeedUpdate=!1}}function h(e,t){e instanceof n.Mesh||e instanceof n.Line?m(t.__webglObjects,e):e instanceof n.Sprite&&g(t.__webglSprites,e),e.__webglActive=!1}function m(e,t){for(var n=e.length-1;n>=0;--n)e[n].object===t&&e.splice(n,1)}function g(e,t){for(var n=e.length-1;n>=0;--n)e[n]===t&&e.splice(n,1)}function v(e){var t=e.object,n=t.material;if(n.transparent){if(e.opaque=null,e.transparent=n,!n.wireframe){var r=n.clone();r.opacity=0,e.blank=r}}else e.opaque=n,e.transparent=null}function y(e,t,n){var r=e.vertexArray,o=e.colorArray;if(void 0!==e.__webglOffsetBuffer?(q.bindBuffer(q.ARRAY_BUFFER,e.__webglOffsetBuffer),q.bufferData(q.ARRAY_BUFFER,r,t)):(q.bindBuffer(q.ARRAY_BUFFER,e.__webglVertexBuffer),q.bufferData(q.ARRAY_BUFFER,r,t)),q.bindBuffer(q.ARRAY_BUFFER,e.__webglColorBuffer),q.bufferData(q.ARRAY_BUFFER,o,t),e.normalArray&&void 0!==e.__webglNormalBuffer){var i=e.normalArray;q.bindBuffer(q.ARRAY_BUFFER,e.__webglNormalBuffer),q.bufferData(q.ARRAY_BUFFER,i,t)}if(e.radiusArray&&void 0!==e.__webglRadiusBuffer&&(q.bindBuffer(q.ARRAY_BUFFER,e.__webglRadiusBuffer),q.bufferData(q.ARRAY_BUFFER,e.radiusArray,t)),e.faceArray&&void 0!==e.__webglFaceBuffer){var a=e.faceArray;q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,e.__webglFaceBuffer),q.bufferData(q.ELEMENT_ARRAY_BUFFER,a,t)}if(e.lineArray&&void 0!==e.__webglLineBuffer){var s=e.lineArray;q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,e.__webglLineBuffer),q.bufferData(q.ELEMENT_ARRAY_BUFFER,s,t)}}function b(e){e.radiusArray&&(e.__webglRadiusBuffer=q.createBuffer()),e.useOffset&&(e.__webglOffsetBuffer=q.createBuffer()),e.__webglVertexBuffer=q.createBuffer(),e.__webglNormalBuffer=q.createBuffer(),e.__webglColorBuffer=q.createBuffer(),e.__webglFaceBuffer=q.createBuffer(),e.__webglLineBuffer=q.createBuffer(),V.info.memory.geometries++}function w(e){e.__webglVertexBuffer=q.createBuffer(),e.__webglColorBuffer=q.createBuffer(),V.info.memory.geometries++}function x(e,t,n){e.push({buffer:t,object:n,opaque:null,transparent:null})}function _(e,t){e._modelViewMatrix.multiplyMatrices(t.matrixWorldInverse,e.matrixWorld),e._normalMatrix.getInverse(e._modelViewMatrix),e._normalMatrix.transpose()}function S(e){return 0==(e&e-1)}function C(e){return q.LINEAR}function k(e,t,n){n?(q.texParameteri(e,q.TEXTURE_WRAP_S,A(t.wrapS)),q.texParameteri(e,q.TEXTURE_WRAP_T,A(t.wrapT)),q.texParameteri(e,q.TEXTURE_MAG_FILTER,A(t.magFilter)),q.texParameteri(e,q.TEXTURE_MIN_FILTER,A(t.minFilter))):(q.texParameteri(e,q.TEXTURE_WRAP_S,q.CLAMP_TO_EDGE),q.texParameteri(e,q.TEXTURE_WRAP_T,q.CLAMP_TO_EDGE),q.texParameteri(e,q.TEXTURE_MAG_FILTER,C(t.magFilter)),q.texParameteri(e,q.TEXTURE_MIN_FILTER,C(t.minFilter)))}function A(e){return e===n.UnsignedByteType?q.UNSIGNED_BYTE:e===n.RGBAFormat?q.RGBA:0}function E(e,t){var r,o,i,a,s,l=fe,u=l.directional.colors,c=l.directional.positions,p=0,f=0,d=0;for(r=0,o=t.length;r<o;r++)if(i=t[r],a=i.color,s=i.intensity,i.distance,i instanceof n.Light){if(p++,ce.getPositionFromMatrix(i.matrixWorld),ue.getPositionFromMatrix(i.target.matrixWorld),ce.sub(ue),ce.normalize(),0===ce.x&&0===ce.y&&0===ce.z)continue;c[d]=ce.x,c[d+1]=ce.y,c[d+2]=ce.z,u[d]=a.r*s,u[d+1]=a.g*s,u[d+2]=a.b*s,d+=3,f++}l.ambient[0]=0,l.ambient[1]=0,l.ambient[2]=0,l.directional.length=f}e=e||{};var M=void 0!==e.canvas?e.canvas:document.createElement("canvas"),T=void 0!==e.precision?e.precision:"highp",O=void 0===e.alpha||e.alpha,I=void 0===e.premultipliedAlpha||e.premultipliedAlpha,P=void 0!==e.antialias&&e.antialias,j=void 0===e.stencil||e.stencil,D=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,N=void 0!==e.clearColor?new n.Color(e.clearColor):new n.Color(0),R=void 0!==e.clearAlpha?e.clearAlpha:0,F=new n.MeshOutlineMaterial(e.outline),L=new n.SphereImposterOutlineMaterial(e.outline),z=new n.StickImposterOutlineMaterial(e.outline),B=!!e.outline;this.domElement=M,this.context=null,this.devicePixelRatio=void 0!==e.devicePixelRatio?e.devicePixelRatio:void 0!==self.devicePixelRatio?self.devicePixelRatio:1,M.id=e.id,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.autoUpdateObjects=!0,this.autoUpdateScene=!0,this.renderPluginsPost=[],this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}};var q,V=this,U=[],H=0,G=null,W=-1,Z=null,Y=null,X=0,K=-1,Q=-1,J=-1,$=-1,ee=-1,te=null,ne=null,re=0,oe=0,ie=0,ae=0,se={},le=new n.Matrix4,ue=new n.Vector3,ce=new n.Vector3,pe=!0,fe={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}};!function(){try{if(!(q=M.getContext("experimental-webgl",{alpha:O,premultipliedAlpha:I,antialias:P,stencil:j,preserveDrawingBuffer:D}))&&!(q=M.getContext("webgl",{alpha:O,premultipliedAlpha:I,antialias:P,stencil:j,preserveDrawingBuffer:D})))throw"Error creating WebGL context."}catch(e){console.error(e)}}(),function(){q.clearColor(0,0,0,1),q.clearDepth(1),q.clearStencil(0),q.enable(q.DEPTH_TEST),q.depthFunc(q.LEQUAL),q.frontFace(q.CCW),q.cullFace(q.BACK),q.enable(q.CULL_FACE),q.enable(q.BLEND),q.blendEquation(q.FUNC_ADD),q.blendFunc(q.SRC_ALPHA,q.ONE_MINUS_SRC_ALPHA),q.clearColor(N.r,N.g,N.b,R)}(),this.context=q;var de=q.getExtension("ANGLE_instanced_arrays"),he=q.getExtension("EXT_frag_depth");this.supportedExtensions=function(){return{supportsAIA:Boolean(de),supportsImposters:Boolean(he)}},this.getContext=function(){return q},this.getPrecision=function(){return T},this.setClearColorHex=function(e,t){N.setHex(e),R=t,q.clearColor(N.r,N.g,N.b,R)},this.enableOutline=function(e){F=new n.MeshOutlineMaterial(e),L=new n.SphereImposterOutlineMaterial(e),z=new n.StickImposterOutlineMaterial(e),B=!0},this.disableOutline=function(){B=!1},this.setSize=function(e,t){re=M.width=e*this.devicePixelRatio,oe=M.height=t*this.devicePixelRatio,M.style.width=e+"px",M.style.height=t+"px",q.viewport(0,0,q.drawingBufferWidth,q.drawingBufferHeight)},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=q.COLOR_BUFFER_BIT),(void 0===t||t)&&(r|=q.DEPTH_BUFFER_BIT),(void 0===n||n)&&(r|=q.STENCIL_BUFFER_BIT),q.clear(r)},this.clearTarget=function(e,t,n){this.clear(e,t,n)},this.setMaterialFaces=function(e,t){var r=e.side===n.DoubleSide,o=e.side===n.BackSide;o=t?!o:o,K!==r&&(r?q.disable(q.CULL_FACE):q.enable(q.CULL_FACE),K=r),Q!==o&&(o?q.frontFace(q.CW):q.frontFace(q.CCW),Q=o)},this.setDepthTest=function(e){$!==e&&(e?q.enable(q.DEPTH_TEST):q.disable(q.DEPTH_TEST),$=e)},this.setDepthWrite=function(e){ee!==e&&(q.depthMask(e),ee=e)},this.setBlending=function(e){e?(q.enable(q.BLEND),q.blendEquationSeparate(q.FUNC_ADD,q.FUNC_ADD),q.blendFuncSeparate(q.SRC_ALPHA,q.ONE_MINUS_SRC_ALPHA,q.ONE,q.ONE_MINUS_SRC_ALPHA)):q.disable(q.BLEND),J=e},this.addPostPlugin=function(e){e.init(this),this.renderPluginsPost.push(e)};var me=function(e){var t=e.target;t.removeEventListener("dispose",me),ye(t),V.info.memory.geometries--},ge=function(e){var t=e.target;t.removeEventListener("dispose",ge),we(t),V.info.memory.textures--},ve=function(e){var t=e.target;t.removeEventListener("dispose",ve),be(t)},ye=function(e){if(e.__webglInit=void 0,void 0!==e.__webglVertexBuffer&&q.deleteBuffer(e.__webglVertexBuffer),void 0!==e.__webglColorBuffer&&q.deleteBuffer(e.__webglColorBuffer),void 0!==e.geometryGroups)for(var t=0,n=e.groups;t<n;t++){var r=e.geometryGroups[t];void 0!==r.__webglVertexBuffer&&q.deleteBuffer(r.__webglVertexBuffer),void 0!==r.__webglColorBuffer&&q.deleteBuffer(r.__webglColorBuffer),void 0!==r.__webglNormalBuffer&&q.deleteBuffer(r.__webglNormalBuffer),void 0!==r.__webglFaceBuffer&&q.deleteBuffer(r.__webglFaceBuffer),void 0!==r.__webglLineBuffer&&q.deleteBuffer(r.__webglLineBuffer)}},be=function(e){var t=e.program;if(void 0!==t){e.program=void 0;var n,r,o,i=!1;for(n=0,r=U.length;n<r;n++)if(o=U[n],o.program===t){o.usedTimes--,0===o.usedTimes&&(i=!0);break}if(!0===i){var a=[];for(n=0,r=U.length;n<r;n++)o=U[n],o.program!==t&&a.push(o);U=a,q.deleteProgram(t),V.info.memory.programs--}}},we=function(e){if(e.image&&e.image.__webglTextureCube)q.deleteTexture(e.image.__webglTextureCube);else{if(!e.__webglInit)return;e.__webglInit=!1,q.deleteTexture(e.__webglTexture)}};this.initMaterial=function(e,t,r,o){e.addEventListener("dispose",ve);var i,a;if(a=e.shaderID){var l=n.ShaderLib[a];e.vertexShader=l.vertexShader,e.fragmentShader=l.fragmentShader,e.uniforms=n.ShaderUtils.clone(l.uniforms)}i={wireframe:e.wireframe,fragdepth:e.imposter},e.program=s(e.fragmentShader,e.vertexShader,e.uniforms,i)},this.renderBuffer=function(e,o,a,s,u,c){if(s.visible){var p,f;p=l(e,o,a,s,c),f=p.attributes;var d=!1,h=s.wireframe?1:0,m=16777215*u.id+2*p.id+h;m!==Z&&(Z=m,d=!0),d&&(r(),f.position>=0&&(q.bindBuffer(q.ARRAY_BUFFER,u.__webglVertexBuffer),t(f.position),q.vertexAttribPointer(f.position,3,q.FLOAT,!1,0,0)),f.color>=0&&(q.bindBuffer(q.ARRAY_BUFFER,u.__webglColorBuffer),t(f.color),q.vertexAttribPointer(f.color,3,q.FLOAT,!1,0,0)),f.normal>=0&&(q.bindBuffer(q.ARRAY_BUFFER,u.__webglNormalBuffer),t(f.normal),q.vertexAttribPointer(f.normal,3,q.FLOAT,!1,0,0)),f.offset>=0&&(q.bindBuffer(q.ARRAY_BUFFER,u.__webglOffsetBuffer),t(f.offset),q.vertexAttribPointer(f.offset,3,q.FLOAT,!1,0,0)),f.radius>=0&&(q.bindBuffer(q.ARRAY_BUFFER,u.__webglRadiusBuffer),t(f.radius),q.vertexAttribPointer(f.radius,1,q.FLOAT,!1,0,0)));var g,v;if(c instanceof n.Mesh){if("instanced"===s.shaderID){var y=s.sphere.geometryGroups[0];d&&(q.bindBuffer(q.ARRAY_BUFFER,u.__webglVertexBuffer),q.bufferData(q.ARRAY_BUFFER,y.vertexArray,q.STATIC_DRAW),q.bindBuffer(q.ARRAY_BUFFER,u.__webglNormalBuffer),q.bufferData(q.ARRAY_BUFFER,y.normalArray,q.STATIC_DRAW),q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,u.__webglFaceBuffer),q.bufferData(q.ELEMENT_ARRAY_BUFFER,y.faceArray,q.STATIC_DRAW)),g=y.faceidx,de.vertexAttribDivisorANGLE(f.offset,1),de.vertexAttribDivisorANGLE(f.radius,1),de.vertexAttribDivisorANGLE(f.color,1),de.drawElementsInstancedANGLE(q.TRIANGLES,g,q.UNSIGNED_SHORT,0,u.radiusArray.length),de.vertexAttribDivisorANGLE(f.offset,0),de.vertexAttribDivisorANGLE(f.radius,0),de.vertexAttribDivisorANGLE(f.color,0)}else s.wireframe?(v=u.lineidx,i(s.wireframeLinewidth),d&&q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,u.__webglLineBuffer),q.drawElements(q.LINES,v,q.UNSIGNED_SHORT,0)):(g=u.faceidx,d&&q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,u.__webglFaceBuffer),q.drawElements(q.TRIANGLES,g,q.UNSIGNED_SHORT,0));V.info.render.calls++,V.info.render.vertices+=g,V.info.render.faces+=g/3}else c instanceof n.Line&&(v=u.vertices,i(s.linewidth),q.drawArrays(q.LINES,0,v),V.info.render.calls++)}},this.render=function(e,t,r){if(t instanceof n.Camera==!1)return void console.error("$3Dmol.Renderer.render: camera is not an instance of $3Dmol.Camera.");var o,i,a,s,l,u=e.__lights,f=e.fog;for(W=-1,pe=!0,this.autoUpdateScene&&e.updateMatrixWorld(),void 0===t.parent&&t.updateMatrixWorld(),t.matrixWorldInverse.getInverse(t.matrixWorld),le.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this.autoUpdateObjects&&this.initWebGLObjects(e),V.info.render.calls=0,V.info.render.vertices=0,V.info.render.faces=0,V.info.render.points=0,ie=re,ae=oe,(this.autoClear||r)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),l=e.__webglObjects,o=0,i=l.length;o<i;o++)a=l[o],s=a.object,a.render=!1,s.visible&&(_(s,t),v(a),a.render=!0);this.setBlending(!1),c(e.__webglObjects,!0,"opaque",t,u,f,!1,null),c(e.__webglObjects,!0,"blank",t,u,f,!0,null),c(e.__webglObjects,!1,"transparent",t,u,f,!0,null),p(this.renderPluginsPost,e,t),this.setDepthTest(!0),this.setDepthWrite(!0)},this.initWebGLObjects=function(e){if(e.__webglObjects||(e.__webglObjects=[],e.__webglObjectsImmediate=[],e.__webglSprites=[],e.__webglFlares=[]),e.__objectsAdded.length){for(;e.__objectsAdded.length;)f(e.__objectsAdded[0],e),e.__objectsAdded.splice(0,1);Z=-1}for(;e.__objectsRemoved.length;)h(e.__objectsRemoved[0],e),e.__objectsRemoved.splice(0,1);for(var t=0,n=e.__webglObjects.length;t<n;t++)d(e.__webglObjects[t].object)},this.setTexture=function(e,t){if(e.needsUpdate){e.__webglInit||(e.__webglInit=!0,e.addEventListener("dispose",ge),e.__webglTexture=q.createTexture(),V.info.memory.textures++),q.activeTexture(q.TEXTURE0+t),q.bindTexture(q.TEXTURE_2D,e.__webglTexture),q.pixelStorei(q.UNPACK_FLIP_Y_WEBGL,e.flipY),q.pixelStorei(q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),q.pixelStorei(q.UNPACK_ALIGNMENT,e.unpackAlignment);var n=e.image,r=S(n.width)&&S(n.height),o=A(e.format),i=A(e.type);k(q.TEXTURE_2D,e,r);var a,s=e.mipmaps;if(s.length>0&&r){for(var l=0,u=s.length;l<u;l++)a=s[l],q.texImage2D(q.TEXTURE_2D,l,o,o,i,a);e.generateMipmaps=!1}else q.texImage2D(q.TEXTURE_2D,0,o,o,i,e.image);e.generateMipmaps&&r&&q.generateMipmap(q.TEXTURE_2D),e.needsUpdate=!1,e.onUpdate&&e.onUpdate()}else q.activeTexture(q.TEXTURE0+t),q.bindTexture(q.TEXTURE_2D,e.__webglTexture)},this.addPostPlugin(new n.SpritePlugin)},n.Scene=function(){n.Object3D.call(this),this.fog=null,this.overrideMaterial=null,this.matrixAutoUpdate=!1,this.__objects=[],this.__lights=[],this.__objectsAdded=[],this.__objectsRemoved=[]},n.Scene.prototype=Object.create(n.Object3D.prototype),n.Scene.prototype.__addObject=function(e){if(e instanceof n.Light)-1===this.__lights.indexOf(e)&&this.__lights.push(e),e.target&&void 0===e.target.parent&&this.add(e.target);else if(-1===this.__objects.indexOf(e)){this.__objects.push(e),this.__objectsAdded.push(e);var t=this.__objectsRemoved.indexOf(e);-1!==t&&this.__objectsRemoved.splice(r,1)}for(var r=0;r<e.children.length;r++)this.__addObject(e.children[r])},n.Scene.prototype.__removeObject=function(e){var t;if(e instanceof n.Light)-1!==(t=this.__lights.indexOf(e))&&this.__lights.splice(t,1);else if(-1!==(t=this.__objects.indexOf(e))){this.__objects.splice(t,1),this.__objectsRemoved.push(e);var r=this.__objectsAdded.indexOf(e);-1!==r&&this.__objectsAdded.splice(t,1)}for(var o=0;o<e.children.length;o++)this.__removeObject(e.children[o])},n.Fog=function(e,t,r){this.name="",this.color=new n.Color(e),this.near=void 0!==t?t:1,this.far=void 0!==r?r:1e3},n.Fog.prototype.clone=function(){return new n.Fog(this.color.getHex(),this.near,this.far)},n.ShaderUtils={clone:function(e){var t,r={};for(t in e){r[t]={},r[t].type=e[t].type;var o=e[t].value;o instanceof n.Color?r[t].value=o.clone():"number"==typeof o?r[t].value=o:o instanceof Array?r[t].value=[]:console.error("Error copying shader uniforms from ShaderLib: unknown type for uniform")}return r},stickimposterFragmentShader:["uniform float opacity;","uniform mat4 projectionMatrix;","uniform vec3 fogColor;","uniform float fogNear;","uniform float fogFar;","varying vec3 vLight;","varying vec3 vColor;","varying vec3 cposition;","varying vec3 p1;","varying vec3 p2;","varying float r;","void main() {","    vec3 color = abs(vColor);","    vec3 pos = cposition;","    vec3 p = pos;","    vec3 v = normalize(pos);","    vec3 pa = p1;","    vec3 va = normalize(p2-p1);","    vec3 tmp1 = v-(dot(v,va)*va);","    vec3 deltap = p-pa;","    float A = dot(tmp1,tmp1);","    if(A == 0.0) discard;","    vec3 tmp2 = deltap-(dot(deltap,va)*va);","    float B = 2.0*dot(tmp1, tmp2);","    float C = dot(tmp2,tmp2)-r*r;","    float det = (B*B) - (4.0*A*C);","    if(det < 0.0) discard;","    float sqrtDet = sqrt(det);","    float posT = (-B+sqrtDet)/(2.0*A);","    float negT = (-B-sqrtDet)/(2.0*A);","    float intersectionT = min(posT,negT);","    vec3 qi = p+v*intersectionT;","    float dotp1 = dot(va,qi-p1);","    float dotp2 = dot(va,qi-p2);","    vec3 norm;","    if( dotp1 < 0.0 || dotp2 > 0.0) {","       vec3 cp;","       if( dotp1 < 0.0) {        cp = p1;","       } else {","          cp = p2;","       }","       vec3 diff = p-cp;","       A = dot(v,v);","       B = dot(diff,v)*2.0;","       C = dot(diff,diff)-r*r;","       det = (B*B) - (4.0*C);","       if(det < 0.0) discard;","       sqrtDet = sqrt(det);","       posT = (-B+sqrtDet)/(2.0);","       negT = (-B-sqrtDet)/(2.0);","       float t = min(posT,negT);","       qi = p+v*t;","       norm = normalize(qi-cp);","    } else {","       norm = normalize(qi-(dotp1*va + p1));","    }","    vec4 clipPos = projectionMatrix * vec4(qi, 1.0);","    float ndcDepth = clipPos.z / clipPos.w;","    float depth = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;","    gl_FragDepthEXT = depth;"].join("\n")},n.ShaderLib={basic:{fragmentShader:["uniform mat4 viewMatrix;","uniform float opacity;","uniform vec3 fogColor;","uniform float fogNear;","uniform float fogFar;","varying vec3 vColor;","void main() {","    gl_FragColor = vec4( vColor, opacity );","    float depth = gl_FragCoord.z / gl_FragCoord.w;","    float fogFactor = smoothstep( fogNear, fogFar, depth );","    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}"].join("\n"),vertexShader:["uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","attribute vec3 position;","attribute vec3 color;","varying vec3 vColor;","void main() {","    vColor = color;","    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","    gl_Position = projectionMatrix * mvPosition;","}"].join("\n"),uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new n.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3}}},sphereimposter:{fragmentShader:["uniform mat4 viewMatrix;","uniform float opacity;","uniform mat4 projectionMatrix;","uniform vec3 fogColor;","uniform float fogNear;","uniform float fogFar;","uniform float uDepth;","uniform vec3 directionalLightColor[ 1 ];","varying vec3 vColor;","varying vec2 mapping;","varying float rval;","varying vec3 vLight;","varying vec3 center;","void main() {","    float lensqr = dot(mapping,mapping);","    float rsqr = rval*rval;","    if(lensqr > rsqr)","       discard;","    float z = sqrt(rsqr-lensqr);","    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z);","    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);","    float ndcDepth = clipPos.z / clipPos.w;","    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;","    vec3 norm = normalize(vec3(mapping.x,mapping.y,z));","    float dotProduct = dot( norm, vLight );","    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );","    vec3 vLight = directionalLightColor[ 0 ] * directionalLightWeighting;","    gl_FragColor = vec4(vLight*vColor, opacity*opacity );","    float fogFactor = smoothstep( fogNear, fogFar, gl_FragDepthEXT/gl_FragCoord.w );","    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}"].join("\n"),vertexShader:["uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 directionalLightColor[ 1 ];","uniform vec3 directionalLightDirection[ 1 ];","attribute vec3 position;","attribute vec3 normal;","attribute vec3 color;","varying vec2 mapping;","varying vec3 vColor;","varying float rval;","varying vec3 vLight;","varying vec3 center;","void main() {","    vColor = color;","    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","    center = mvPosition.xyz;","    vec4 projPosition = projectionMatrix * mvPosition;","    vec4 adjust = projectionMatrix* vec4(normal,0.0); adjust.z = 0.0; adjust.w = 0.0;","    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );","    vLight = normalize( lDirection.xyz );","    mapping = normal.xy;","    rval = abs(normal.x);","    gl_Position = projPosition+adjust;","}"].join("\n"),uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new n.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},lambert:{fragmentShader:["uniform mat4 viewMatrix;","uniform float opacity;","uniform vec3 fogColor;","uniform float fogNear;","uniform float fogFar;","varying vec3 vLightFront;","varying vec3 vColor;","void main() {","    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );","    #ifndef WIREFRAME","    gl_FragColor.xyz *= vLightFront;","    #endif","    gl_FragColor = gl_FragColor * vec4( vColor, opacity );","    float depth = gl_FragCoord.z / gl_FragCoord.w;","    float fogFactor = smoothstep( fogNear, fogFar, depth );","    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}"].join("\n"),vertexShader:["uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 directionalLightColor[ 1 ];","uniform vec3 directionalLightDirection[ 1 ];","attribute vec3 position;","attribute vec3 normal;","attribute vec3 color;","varying vec3 vColor;","varying vec3 vLightFront;","void main() {","    vColor = color;","    vec3 objectNormal = normal;","    vec3 transformedNormal = normalMatrix * objectNormal;","    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","    vLightFront = vec3( 0.0 );","    transformedNormal = normalize( transformedNormal );","    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );","    vec3 dirVector = normalize( lDirection.xyz );","    float dotProduct = dot( transformedNormal, dirVector );","    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );","    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;","    gl_Position = projectionMatrix * mvPosition;","}"].join("\n"),uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new n.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},instanced:{fragmentShader:["uniform mat4 viewMatrix;","uniform float opacity;","uniform vec3 fogColor;","uniform float fogNear;","uniform float fogFar;","varying vec3 vLightFront;","varying vec3 vColor;","void main() {","    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );","    #ifndef WIREFRAME","    gl_FragColor.xyz *= vLightFront;","    #endif","    gl_FragColor = gl_FragColor * vec4( vColor, opacity );","    float depth = gl_FragCoord.z / gl_FragCoord.w;","    float fogFactor = smoothstep( fogNear, fogFar, depth );","    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}"].join("\n"),vertexShader:["uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 directionalLightColor[ 1 ];","uniform vec3 directionalLightDirection[ 1 ];","attribute vec3 offset;","attribute vec3 position;","attribute vec3 normal;","attribute vec3 color;","attribute float radius;","varying vec3 vColor;","varying vec3 vLightFront;","void main() {","    vColor = color;","    vec3 objectNormal = normal;","    vec3 transformedNormal = normalMatrix * objectNormal;","    vec4 mvPosition = modelViewMatrix * vec4( position * radius + offset, 1.0 );","    vLightFront = vec3( 0.0 );","    transformedNormal = normalize( transformedNormal );","    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );","    vec3 dirVector = normalize( lDirection.xyz );","    float dotProduct = dot( transformedNormal, dirVector );","    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );","    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;","    gl_Position = projectionMatrix * mvPosition;","}"].join("\n"),uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new n.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},outline:{fragmentShader:["uniform float opacity;","uniform vec3 outlineColor;","uniform vec3 fogColor;","uniform float fogNear;","uniform float fogFar;","void main() {","    gl_FragColor = vec4( outlineColor, 1 );","}"].join("\n"),vertexShader:["uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float outlineWidth;","uniform float outlinePushback;","attribute vec3 position;","attribute vec3 normal;","attribute vec3 color;","void main() {","    vec4 norm = modelViewMatrix*vec4(normalize(normal),0.0);","    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","    mvPosition.xy += norm.xy*outlineWidth;","    gl_Position = projectionMatrix * mvPosition;","    mvPosition.z -= outlinePushback;","    vec4 pushpos = projectionMatrix*mvPosition;","    gl_Position.z = gl_Position.w*pushpos.z/pushpos.w;","}"].join("\n"),uniforms:{opacity:{type:"f",value:1},outlineColor:{type:"c",value:new n.Color(0,0,0)},fogColor:{type:"c",value:new n.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1}}},sphereimposteroutline:{fragmentShader:["uniform float opacity;","uniform vec3 outlineColor;","uniform vec3 fogColor;","uniform float fogNear;","uniform float fogFar;","uniform mat4 projectionMatrix;","varying vec2 mapping;","varying float rval;","varying vec3 center;","uniform float outlinePushback;","void main() {","    float lensqr = dot(mapping,mapping);","    float rsqr = rval*rval;","    if(lensqr > rsqr)","       discard;","    float z = sqrt(rsqr-lensqr);","    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z-outlinePushback);","    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);","    float ndcDepth = clipPos.z / clipPos.w;","    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;","    gl_FragColor = vec4(outlineColor, 1 );","}"].join("\n"),vertexShader:["uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float outlineWidth;","uniform float outlinePushback;","attribute vec3 position;","attribute vec3 normal;","attribute vec3 color;","varying vec2 mapping;","varying float rval;","varying vec3 center;","void main() {","    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","    center = mvPosition.xyz;","    vec4 projPosition = projectionMatrix * mvPosition;","    vec2 norm = normal.xy + vec2(sign(normal.x)*outlineWidth,sign(normal.y)*outlineWidth);","    vec4 adjust = projectionMatrix* vec4(norm,normal.z,0.0); adjust.z = 0.0; adjust.w = 0.0;","    mapping = norm.xy;","    rval = abs(norm.x);","    gl_Position = projPosition+adjust;","}"].join("\n"),uniforms:{opacity:{type:"f",value:1},outlineColor:{type:"c",value:new n.Color(0,0,0)},fogColor:{type:"c",value:new n.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1}}},stickimposter:{fragmentShader:[n.ShaderUtils.stickimposterFragmentShader,"    float dotProduct = dot( norm, vLight );","    vec3 light = vec3( max( dotProduct, 0.0 ) );","    gl_FragColor = vec4(light*color, opacity*opacity );","    float fogFactor = smoothstep( fogNear, fogFar, depth );","    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}"].join("\n"),vertexShader:["uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 directionalLightColor[ 1 ];","uniform vec3 directionalLightDirection[ 1 ];","attribute vec3 position;","attribute vec3 normal;","attribute vec3 color;","attribute float radius;","varying vec3 vColor;","varying vec3 vLight;","varying vec3 cposition;","varying vec3 p1;","varying vec3 p2;","varying float r;","void main() {","    vColor = color; vColor.z = abs(vColor.z);","    r = abs(radius);","    vec4 to = modelViewMatrix*vec4(normal, 1.0);","    vec4 pt = modelViewMatrix*vec4(position, 1.0);","    vec4 mvPosition = pt;","    p1 = pt.xyz; p2 = to.xyz;","    vec3 norm = to.xyz-pt.xyz;","    float mult = 1.1;","    if(length(p1) > length(p2)) {","       mvPosition = to;","    }","    vec3 n = normalize(mvPosition.xyz);","    if(color.z >= 0.0) {","       vec3 pnorm = normalize(p1);","       float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);","       mvPosition.xyz = p1+t*pnorm;","    } else {","       vec3 pnorm = normalize(p2);","       float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);","       mvPosition.xyz = p2+t*pnorm;","       mult *= -1.0;","    }","    vec3 cr = normalize(cross(mvPosition.xyz,norm))*radius;","    vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*radius;","    mvPosition.xy +=  mult*(cr + doublecr).xy;","    cposition = mvPosition.xyz;","    gl_Position = projectionMatrix * mvPosition;","    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );","    vLight = normalize( lDirection.xyz )*directionalLightColor[0];","}"].join("\n"),uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new n.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},stickimposteroutline:{fragmentShader:n.ShaderUtils.stickimposterFragmentShader+"gl_FragColor = vec4(color,1.0);}",vertexShader:["uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 directionalLightColor[ 1 ];","uniform vec3 directionalLightDirection[ 1 ];","uniform vec3 outlineColor;","uniform float outlineWidth;","uniform float outlinePushback;","attribute vec3 position;","attribute vec3 normal;","attribute vec3 color;","attribute float radius;","varying vec3 vColor;","varying vec3 vLight;","varying vec3 cposition;","varying vec3 p1;","varying vec3 p2;","varying float r;","void main() {","    vColor = outlineColor;","    float rad = radius+sign(radius)*outlineWidth;","    r = abs(rad);","    vec4 to = modelViewMatrix*vec4(normal, 1.0);","    vec4 pt = modelViewMatrix*vec4(position, 1.0);","    to.xyz += normalize(to.xyz)*outlinePushback;","    pt.xyz += normalize(pt.xyz)*outlinePushback;","    vec4 mvPosition = pt;","    p1 = pt.xyz; p2 = to.xyz;","    vec3 norm = to.xyz-pt.xyz;","    float mult = 1.1;","    if(length(p1) > length(p2)) {","       mvPosition = to;","    }","    vec3 n = normalize(mvPosition.xyz);","    if(color.z >= 0.0) {","       vec3 pnorm = normalize(p1);","       float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);","       mvPosition.xyz = p1+t*pnorm;","    } else {","       vec3 pnorm = normalize(p2);","       float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);","       mvPosition.xyz = p2+t*pnorm;","       mult *= -1.0;","    }","    vec3 cr = normalize(cross(mvPosition.xyz,norm))*rad;","    vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*rad;","    mvPosition.xy +=  mult*(cr + doublecr).xy;","    cposition = mvPosition.xyz;","    gl_Position = projectionMatrix * mvPosition;","    vLight = vec3(1.0,1.0,1.0);","}"].join("\n"),uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new n.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineColor:{type:"c",value:new n.Color(0,0,0)},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1}}},lambertdouble:{fragmentShader:["uniform mat4 viewMatrix;","uniform float opacity;","uniform vec3 fogColor;","uniform float fogNear;","uniform float fogFar;","varying vec3 vLightFront;","varying vec3 vLightBack;","varying vec3 vColor;","void main() {","    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );","    #ifndef WIREFRAME","    if ( gl_FrontFacing )","       gl_FragColor.xyz *= vLightFront;","    else","       gl_FragColor.xyz *= vLightBack;","    #endif","    gl_FragColor = gl_FragColor * vec4( vColor, opacity );","    float depth = gl_FragCoord.z / gl_FragCoord.w;","    float fogFactor = smoothstep( fogNear, fogFar, depth );","    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}"].join("\n"),vertexShader:["uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 directionalLightColor[ 1 ];","uniform vec3 directionalLightDirection[ 1 ];","attribute vec3 position;","attribute vec3 normal;","attribute vec3 color;","varying vec3 vColor;","varying vec3 vLightFront;","varying vec3 vLightBack;","void main() {","    vColor = color;","    vec3 objectNormal = normal;","    vec3 transformedNormal = normalMatrix * objectNormal;","    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","    vLightFront = vec3( 0.0 );","    vLightBack = vec3( 0.0 );","    transformedNormal = normalize( transformedNormal );","    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );","    vec3 dirVector = normalize( lDirection.xyz );","    float dotProduct = dot( transformedNormal, dirVector );","    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );","    vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );","    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;","    vLightBack += directionalLightColor[ 0 ] * directionalLightWeightingBack;","    gl_Position = projectionMatrix * mvPosition;","}"].join("\n"),uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new n.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},sprite:{fragmentShader:["uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","    vec4 texture = texture2D(map, vUV);","    if (texture.a < alphaTest) discard;","    gl_FragColor = vec4(color * texture.xyz, texture.a * opacity);","    if (fogType > 0) {","        float depth = gl_FragCoord.z / gl_FragCoord.w;","        float fogFactor = 0.0;","        if (fogType == 1) {","            fogFactor = smoothstep(fogNear, fogFar, depth);","        }","        else {","            const float LOG2 = 1.442695;","            float fogFactor = exp2(- fogDensity * fogDensity * depth * depth * LOG2);","            fogFactor = 1.0 - clamp(fogFactor, 0.0, 1.0);","        }","        gl_FragColor = mix(gl_FragColor, vec4(fogColor, gl_FragColor.w), fogFactor);","    }","}"].join("\n"),vertexShader:["uniform int useScreenCoordinates;","uniform vec3 screenPosition;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 alignment;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","    vUV = uvOffset + uv * uvScale;","    vec2 alignedPosition = position + alignment;","    vec2 rotatedPosition;","    rotatedPosition.x = ( cos(rotation) * alignedPosition.x - sin(rotation) * alignedPosition.y ) * scale.x;","    rotatedPosition.y = ( sin(rotation) * alignedPosition.x + cos(rotation) * alignedPosition.y ) * scale.y;","    vec4 finalPosition;","    if(useScreenCoordinates != 0) {","        finalPosition = vec4(screenPosition.xy + rotatedPosition, screenPosition.z, 1.0);","    }","    else {","        finalPosition = projectionMatrix * modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0); finalPosition /= finalPosition.w;","        finalPosition.xy += rotatedPosition; ","    }","    gl_Position = finalPosition;","}"].join("\n"),uniforms:{}}},"undefined"==typeof console&&(console={log:function(){}}),n.ProteinSurface=function(){var e,t,r,o=0,a=0,s=0,l=2,u=0,c=0,p=0,f=0,d=null,h=null,m=null,g=0,v=0,y=0,b=0,w=0,x=0,_={H:1.2,Li:1.82,Na:2.27,K:2.75,C:1.7,N:1.55,O:1.52,F:1.47,P:1.8,S:1.8,CL:1.75,BR:1.85,SE:1.9,ZN:1.39,CU:1.4,NI:1.63,X:2},S=function(e){return e.elem&&void 0!==_[e.elem]?e.elem:"X"},C={},A={},E=[new Int32Array([1,0,0]),new Int32Array([-1,0,0]),new Int32Array([0,1,0]),new Int32Array([0,-1,0]),new Int32Array([0,0,1]),new Int32Array([0,0,-1]),new Int32Array([1,1,0]),new Int32Array([1,-1,0]),new Int32Array([-1,1,0]),new Int32Array([-1,-1,0]),new Int32Array([1,0,1]),new Int32Array([1,0,-1]),new Int32Array([-1,0,1]),new Int32Array([-1,0,-1]),new Int32Array([0,1,1]),new Int32Array([0,1,-1]),new Int32Array([0,-1,1]),new Int32Array([0,-1,-1]),new Int32Array([1,1,1]),new Int32Array([1,1,-1]),new Int32Array([1,-1,1]),new Int32Array([-1,1,1]),new Int32Array([1,-1,-1]),new Int32Array([-1,-1,1]),new Int32Array([-1,1,-1]),new Int32Array([-1,-1,-1])];this.getFacesAndVertices=function(n){var r,i,u={};for(r=0,i=n.length;r<i;r++)u[n[r]]=!0;var c=t;for(r=0,i=c.length;r<i;r++)c[r].x=c[r].x/l-o,c[r].y=c[r].y/l-a,c[r].z=c[r].z/l-s;var p=[];for(r=0,i=e.length;r<i;r+=3){var f=e[r],g=e[r+1],v=e[r+2],y=c[f].atomid,b=c[g].atomid,w=c[v].atomid,x=y;if(b<x&&(x=b),w<x&&(x=w),u[x]){c[e[r]],c[e[r+1]],c[e[r+2]];f!==g&&g!==v&&f!==v&&(p.push(f),p.push(g),p.push(v))}}return d=null,h=null,m=null,{vertices:c,faces:p}},this.initparm=function(e,t,n){n>1e6&&(l=1);var i=1/l*5.5;r=e,g=e[0][0],b=e[1][0],v=e[0][1],w=e[1][1],y=e[0][2],x=e[1][2],t?(g-=1.4+i,v-=1.4+i,y-=1.4+i,b+=1.4+i,w+=1.4+i,x+=1.4+i):(g-=i,v-=i,y-=i,b+=i,w+=i,x+=i),g=Math.floor(g*l)/l,v=Math.floor(v*l)/l,y=Math.floor(y*l)/l,b=Math.ceil(b*l)/l,w=Math.ceil(w*l)/l,x=Math.ceil(x*l)/l,o=-g,a=-v,s=-y,p=Math.ceil(l*(b-g))+1,c=Math.ceil(l*(w-v))+1,u=Math.ceil(l*(x-y))+1,this.boundingatom(t),f=1.4*l,d=new Uint8Array(p*c*u),h=new Float64Array(p*c*u),m=new Int32Array(p*c*u)},this.boundingatom=function(e){var t,n,r,o=[];flagradius=e;for(var i in _)if(_.hasOwnProperty(i)){var a=_[i];for(o[i]=e?(a+1.4)*l+.5:a*l+.5,r=o[i]*o[i],A[i]=Math.floor(o[i])+1,C[i]=new Int32Array(A[i]*A[i]),indx=0,j=0;j<A[i];j++)for(k=0;k<A[i];k++)t=j*j+k*k,t>r?C[i][indx]=-1:(n=Math.sqrt(r-t),C[i][indx]=Math.floor(n)),indx++}},this.fillvoxels=function(e,t){var n,r;for(n=0,r=d.length;n<r;n++)d[n]=0,h[n]=-1,m[n]=-1;for(n in t){var o=e[t[n]];void 0!==o&&this.fillAtom(o,e)}for(n=0,r=d.length;n<r;n++)1&d[n]&&(d[n]|=2)},this.fillAtom=function(e,t){var n,r,i,f,h,g,v,y,b,w,x,_,k,E,M,T,O,I,P;n=Math.floor(.5+l*(e.x+o)),r=Math.floor(.5+l*(e.y+a)),i=Math.floor(.5+l*(e.z+s));var j=S(e),D=0,N=c*u;for(w=0,P=A[j];w<P;w++)for(x=0;x<P;x++){if(-1!=C[j][D])for(T=-1;T<2;T++)for(O=-1;O<2;O++)for(I=-1;I<2;I++)if(0!==T&&0!==O&&0!==I)for(v=T*w,b=I*x,_=0;_<=C[j][D];_++)if(y=_*O,k=n+v,E=r+y,M=i+b,!(k<0||E<0||M<0||k>=p||E>=c||M>=u)){var R=k*N+E*u+M;if(1&d[R]){var F=t[m[R]];F.serial!=e.serial&&(f=n+v-Math.floor(.5+l*(F.x+o)),h=r+y-Math.floor(.5+l*(F.y+a)),g=i+b-Math.floor(.5+l*(F.z+s)),v*v+y*y+b*b<f*f+h*h+g*g&&(m[R]=e.serial))}else d[R]|=1,m[R]=e.serial}D++}},this.fillvoxelswaals=function(e,t){var n,r;for(n=0,r=d.length;n<r;n++)d[n]&=-3;for(n in t){var o=e[t[n]];void 0!==o&&this.fillAtomWaals(o,e)}},this.fillAtomWaals=function(e,t){var n,r,i,f,h,g,v,y,b,w,x,_,k,E,M,T,O,I,P,j=0;n=Math.floor(.5+l*(e.x+o)),r=Math.floor(.5+l*(e.y+a)),i=Math.floor(.5+l*(e.z+s));var D=S(e),N=c*u;for(k=0,P=A[D];k<P;k++)for(E=0;E<P;E++){if(-1!=C[D][j])for(T=-1;T<2;T++)for(O=-1;O<2;O++)for(I=-1;I<2;I++)if(0!==T&&0!==O&&0!==I)for(v=T*k,b=I*E,M=0;M<=C[D][j];M++)if(y=M*O,w=n+v,x=r+y,_=i+b,!(w<0||x<0||_<0||w>=p||x>=c||_>=u)){var R=w*N+x*u+_;if(2&d[R]){var F=t[m[R]];F.serial!=e.serial&&(f=n+v-Math.floor(.5+l*(F.x+o)),h=r+y-Math.floor(.5+l*(F.y+a)),g=i+b-Math.floor(.5+l*(F.z+s)),v*v+y*y+b*b<f*f+h*h+g*g&&(m[R]=e.serial))}else d[R]|=2,m[R]=e.serial}j++}},this.buildboundary=function(){var e=c*u;for(i=0;i<p;i++)for(j=0;j<u;j++)for(k=0;k<c;k++){var t=i*e+k*u+j;if(1&d[t])for(var n=0;n<26;){var r=i+E[n][0],o=j+E[n][2],a=k+E[n][1];if(r>-1&&r<p&&a>-1&&a<c&&o>-1&&o<u&&!(1&d[r*e+a*u+o])){d[t]|=4;break}n++}}};var M=function(e,t,n){var r=new Int32Array(e*t*n*3);this.set=function(e,o,i,a){var s=3*((e*t+o)*n+i);r[s]=a.ix,r[s+1]=a.iy,r[s+2]=a.iz},this.get=function(e,o,i){var a=3*((e*t+o)*n+i);return{ix:r[a],iy:r[a+1],iz:r[a+2]}}};this.fastdistancemap=function(){var e,t,n,r,o,i=new M(p,c,u),a=c*u,s=f*f,m=[],g=[];for(e=0;e<p;e++)for(t=0;t<c;t++)for(n=0;n<u;n++)if(o=e*a+t*u+n,d[o]&=-3,1&d[o]&&4&d[o]){var v={ix:e,iy:t,iz:n};i.set(e,t,n,v),m.push(v),h[o]=0,d[o]|=2,d[o]&=-5}do{for(g=this.fastoneshell(m,i),m=[],e=0,r=g.length;e<r;e++)o=a*g[e].ix+u*g[e].iy+g[e].iz,d[o]&=-5,h[o]<=1.0404*s&&m.push({ix:g[e].ix,iy:g[e].iy,iz:g[e].iz})}while(0!==m.length);m=[],g=[],i=null;var y=l-.5;y<0&&(y=0);var b=s-.5/(.1+y);for(e=0;e<p;e++)for(t=0;t<c;t++)for(n=0;n<u;n++)o=e*a+t*u+n,d[o]&=-5,1&d[o]&&(2&d[o]&&!(2&d[o]&&h[o]>=b)||(d[o]|=4))},this.fastoneshell=function(e,t){var n,r,o,i,a,s,l,f,m,g,v,y,b=[];if(0===e.length)return b;tnv={ix:-1,iy:-1,iz:-1};var w=c*u;for(l=0,m=e.length;l<m;l++)for(n=e[l].ix,r=e[l].iy,o=e[l].iz,v=t.get(n,r,o),f=0;f<6;f++)tnv.ix=n+E[f][0],tnv.iy=r+E[f][1],tnv.iz=o+E[f][2],tnv.ix<p&&tnv.ix>-1&&tnv.iy<c&&tnv.iy>-1&&tnv.iz<u&&tnv.iz>-1&&(y=tnv.ix*w+u*tnv.iy+tnv.iz,1&d[y]&&!(2&d[y])?(t.set(tnv.ix,tnv.iy,o+E[f][2],v),i=tnv.ix-v.ix,a=tnv.iy-v.iy,s=tnv.iz-v.iz,g=i*i+a*a+s*s,h[y]=g,d[y]|=2,d[y]|=4,b.push({ix:tnv.ix,iy:tnv.iy,iz:tnv.iz})):1&d[y]&&2&d[y]&&(i=tnv.ix-v.ix,a=tnv.iy-v.iy,s=tnv.iz-v.iz,(g=i*i+a*a+s*s)<h[y]&&(t.set(tnv.ix,tnv.iy,tnv.iz,v),h[y]=g,4&d[y]||(d[y]|=4,b.push({ix:tnv.ix,iy:tnv.iy,iz:tnv.iz})))));for(l=0,m=e.length;l<m;l++)for(n=e[l].ix,r=e[l].iy,o=e[l].iz,v=t.get(n,r,o),f=6;f<18;f++)tnv.ix=n+E[f][0],tnv.iy=r+E[f][1],tnv.iz=o+E[f][2],tnv.ix<p&&tnv.ix>-1&&tnv.iy<c&&tnv.iy>-1&&tnv.iz<u&&tnv.iz>-1&&(y=tnv.ix*w+u*tnv.iy+tnv.iz,1&d[y]&&!(2&d[y])?(t.set(tnv.ix,tnv.iy,o+E[f][2],v),i=tnv.ix-v.ix,a=tnv.iy-v.iy,s=tnv.iz-v.iz,g=i*i+a*a+s*s,h[y]=g,d[y]|=2,d[y]|=4,b.push({ix:tnv.ix,iy:tnv.iy,iz:tnv.iz})):1&d[y]&&2&d[y]&&(i=tnv.ix-v.ix,a=tnv.iy-v.iy,s=tnv.iz-v.iz,(g=i*i+a*a+s*s)<h[y]&&(t.set(tnv.ix,tnv.iy,tnv.iz,v),h[y]=g,4&d[y]||(d[y]|=4,b.push({ix:tnv.ix,iy:tnv.iy,iz:tnv.iz})))));for(l=0,m=e.length;l<m;l++)for(n=e[l].ix,r=e[l].iy,o=e[l].iz,v=t.get(n,r,o),f=18;f<26;f++)tnv.ix=n+E[f][0],tnv.iy=r+E[f][1],tnv.iz=o+E[f][2],tnv.ix<p&&tnv.ix>-1&&tnv.iy<c&&tnv.iy>-1&&tnv.iz<u&&tnv.iz>-1&&(y=tnv.ix*w+u*tnv.iy+tnv.iz,1&d[y]&&!(2&d[y])?(t.set(tnv.ix,tnv.iy,o+E[f][2],v),i=tnv.ix-v.ix,a=tnv.iy-v.iy,s=tnv.iz-v.iz,g=i*i+a*a+s*s,h[y]=g,d[y]|=2,d[y]|=4,b.push({ix:tnv.ix,iy:tnv.iy,iz:tnv.iz})):1&d[y]&&2&d[y]&&(i=tnv.ix-v.ix,a=tnv.iy-v.iy,s=tnv.iz-v.iz,(g=i*i+a*a+s*s)<h[y]&&(t.set(tnv.ix,tnv.iy,tnv.iz,v),h[y]=g,4&d[y]||(d[y]|=4,b.push({ix:tnv.ix,iy:tnv.iy,iz:tnv.iz})))));return b},this.marchingcubeinit=function(e){for(var t=0,n=d.length;t<n;t++)1==e?d[t]&=-5:4==e?(d[t]&=-3,4&d[t]&&(d[t]|=2),d[t]&=-5):2==e?4&d[t]&&2&d[t]?d[t]&=-5:4&d[t]&&!(2&d[t])&&(d[t]|=2):3==e&&(d[t]&=-5)};this.marchingcube=function(r){this.marchingcubeinit(r),t=[],e=[],n.MarchingCube.march(d,t,e,{smooth:1,nX:p,nY:c,nZ:u});for(var o=c*u,i=0,a=t.length;i<a;i++)t[i].atomid=m[t[i].x*o+u*t[i].y+t[i].z];n.MarchingCube.laplacianSmooth(1,t,e)}},n.autoload=function(e){if(void 0!==$(".viewer_3Dmoljs")[0]&&(n.autoinit=!0),n.autoinit){e=void 0!=e?e:null,n.viewers={};var t=0;$(".viewer_3Dmoljs").each(function(){var r=$(this),o=[];"static"==r.css("position")&&r.css("position","relative");var i="function"==typeof window[r.data("callback")]?window[r.data("callback")]:null,a=null;r.data("pdb")?(o.push("https://files.rcsb.org/view/"+r.data("pdb")+".pdb"),a="pdb"):r.data("cid")?(a="sdf",o.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+r.data("cid")+"/SDF?record_type=3d")):r.data("href")&&o.push(r.data("href"));var s=r.data();for(var l in s)"pdb"===l.substring(0,3)&&"pdb"!==l?o.push("https://files.rcsb.org/view/"+s[l]+".pdb"):"href"===l.substring(0,4)&&"href"!==l?o.push(s[l]):"cid"===l.substring(0,3)&&"cid"!==l&&o.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+s[l]+"/SDF?record_type=3d");var u={};r.data("options")&&(u=n.specStringToObject(r.data("options")));var c=n.CC.color(r.data("backgroundcolor")),p={line:{}};r.data("style")&&(p=n.specStringToObject(r.data("style")));var f={};r.data("select")&&(f=n.specStringToObject(r.data("select")));var d=[],h=[],m=[],g=r.data(),v=/style(.+)/,y=/surface(.*)/,b=/labelres(.*)/,w=[];for(var x in g)g.hasOwnProperty(x)&&w.push(x);w.sort();for(var l=0;l<w.length;l++){var x=w[l],_=v.exec(x);if(_){var S="select"+_[1],C=n.specStringToObject(g[S]),k=n.specStringToObject(g[x]);d.push([C,k])}if(_=y.exec(x)){var S="select"+_[1],C=n.specStringToObject(g[S]),k=n.specStringToObject(g[x]);h.push([C,k])}if(_=b.exec(x)){var S="select"+_[1],C=n.specStringToObject(g[S]),k=n.specStringToObject(g[x]);m.push([C,k])}}var A=function(e){e.setStyle(f,p);for(var t=0;t<d.length;t++){var r=d[t][0]||{},o=d[t][1]||{line:{}};e.setStyle(r,o)}for(var t=0;t<h.length;t++){var r=h[t][0]||{},o=h[t][1]||{};e.addSurface(n.SurfaceType.VDW,o,r,r)}for(var t=0;t<m.length;t++){var r=m[t][0]||{},o=m[t][1]||{};e.addResLabels(r,o)}e.zoomTo(),e.render()},E=e;try{null==E&&(E=n.viewers[this.id||t++]=n.createViewer(r,{defaultcolors:n.rasmolElementColors})),E.setBackgroundColor(c)}catch(e){console.log(e),window.location="http://get.webgl.org"}if(0!=o.length)for(var l=0;l<o.length;l++)val=l,uri=o[l],a=r.data("type")||r.data("datatype")||a,a||(a=uri.substr(uri.lastIndexOf(".")+1)),$.get(uri,function(e){E.addModel(e,a,u),A(E),i&&val==o.length-1&&i(E)},"text");else{if(r.data("element")){var M=$("#"+r.data("element")).val()||"",a=r.data("type")||r.data("datatype");a||(console.log("Warning: No type specified for embedded viewer with moldata from "+r.data("element")+"\n assuming type 'pdb'"),a="pdb"),E.addModel(M,a,u)}A(E),i&&i(E)}})}},$(document).ready(function(){n.autoload()}),n.CC={cache:{0:new n.Color(0)},color:function e(t){if(!t)return this.cache[0];if(void 0!==this.cache[t])return this.cache[t];if(t&&t.constructor===Array)return t.map(e,this);if("number"==typeof(t=this.getHex(t))){var r=new n.Color(t);return this.cache[t]=r,r}return t},colorTab:{white:16777215,silver:12632256,gray:8421504,grey:8421504,black:0,red:16711680,maroon:8388608,yellow:16776960,orange:16737792,olive:8421376,lime:65280,green:32768,aqua:65535,cyan:65535,teal:32896,blue:255,navy:128,fuchsia:16711935,magenta:16711935,purple:8388736},getHex:function(e){return isNaN(parseInt(e))?"string"==typeof e?(e=e.trim(),4==e.length&&"#"==e[0]&&(e="#"+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),7==e.length&&"#"==e[0]?parseInt(e.substring(1),16):this.colorTab[e.toLowerCase()]||0):e:parseInt(e)}},n.CC=n.CC,n.CC.color=n.CC.color,n.ssColors=n.ssColors||{},n.ssColors.pyMol={h:16711680,s:16776960,c:65280},n.ssColors.Jmol={h:16711808,s:16762880,c:16777215},n.elementColors=n.elementColors||{},n.elementColors.defaultColor=16716947,n.elementColors.Jmol={H:16777215,He:14286847,HE:14286847,Li:13402367,LI:13402367,B:16758197,C:9474192,N:3166456,O:16715021,F:9494608,Na:11230450,NA:11230450,Mg:9109248,MG:9109248,Al:12560038,AL:12560038,Si:1578e4,SI:1578e4,P:16744448,S:16777008,Cl:2093087,CL:2093087,Ca:4062976,CA:4062976,Ti:12567239,TI:12567239,Cr:9083335,CR:9083335,Mn:10255047,MN:10255047,Fe:14706227,FE:14706227,Ni:5296208,NI:5296208,Cu:13140019,CU:13140019,Zn:8224944,ZN:8224944,Br:10889513,BR:10889513,Ag:12632256,AG:12632256,I:9699476,Ba:51456,BA:51456,Au:16765219,AU:16765219},n.elementColors.rasmol={H:16777215,He:16761035,HE:16761035,Li:11674146,LI:11674146,B:65280,C:13158600,N:9408511,O:15728640,F:14329120,Na:255,NA:255,Mg:2263842,MG:2263842,Al:8421520,AL:8421520,Si:14329120,SI:14329120,P:16753920,S:16762930,Cl:65280,CL:65280,Ca:8421520,CA:8421520,Ti:8421520,TI:8421520,Cr:8421520,CR:8421520,Mn:8421520,MN:8421520,Fe:16753920,FE:16753920,Ni:10824234,NI:10824234,Cu:10824234,CU:10824234,Zn:10824234,ZN:10824234,Br:10824234,BR:10824234,Ag:8421520,AG:8421520,I:10494192,Ba:16753920,BA:16753920,Au:14329120,AU:14329120},n.elementColors.defaultColors=n.elementColors.rasmol,n.elementColors.greenCarbon=$.extend({},n.elementColors.defaultColors),n.elementColors.greenCarbon.C=65280,n.elementColors.cyanCarbon=$.extend({},n.elementColors.defaultColors),n.elementColors.cyanCarbon.C=65535,n.elementColors.magentaCarbon=$.extend({},n.elementColors.defaultColors),n.elementColors.magentaCarbon.C=16711935,n.elementColors.yellowCarbon=$.extend({},n.elementColors.defaultColors),n.elementColors.yellowCarbon.C=16776960,n.elementColors.whiteCarbon=$.extend({},n.elementColors.defaultColors),n.elementColors.whiteCarbon.C=16777215,n.elementColors.orangeCarbon=$.extend({},n.elementColors.defaultColors),n.elementColors.orangeCarbon.C=16737792,n.elementColors.purpleCarbon=$.extend({},n.elementColors.defaultColors),n.elementColors.purpleCarbon.C=8388736,n.elementColors.blueCarbon=$.extend({},n.elementColors.defaultColors),n.elementColors.blueCarbon.C=255,n.residues={},n.residues.amino={Ala:13158600,Arg:1334015,Asn:56540,Asp:15075850,Cys:15132160,Gln:56540,Glu:15075850,Gly:15461355,His:8553170,Ile:1016335,Leu:1016335,Lys:1334015,Met:15132160,Phe:3289770,Pro:14456450,Ser:16422400,Thr:16422400,Trp:11819700,Tyr:3289770,Val:1016335,Asx:16738740,Glx:16738740,other:12492910},n.residues.shapely={Ala:9240460,Arg:124,Asn:16743536,Asp:10485826,Cys:16777072,Gln:16731212,Glu:6684672,Gly:16777215,His:7368959,Ile:19456,Leu:4546117,Lys:4671416,Met:12099650,Phe:5459026,Pro:5395026,Ser:16740418,Thr:12078080,Trp:5195264,Tyr:9203788,Val:16747775,Asx:16711935,Glx:16711935,other:16711935},n.residues.nucleic={A:10526975,G:16740464,I:8454143,C:16747595,T:10551200,U:16744576},n.chains={},n.chains.atom={A:12636415,B:11599792,C:16761032,D:16777088,E:16761087,F:11596016,G:16765040,H:15761536,I:16113331,J:49151,K:13458524,L:6737322,M:10145074,N:15631086,O:52945,P:65407,Q:3978097,R:139,S:12433259,T:25600,U:8388608,V:8421376,W:8388736,X:32896,Y:12092939,Z:11674146},n.chains.hetatm={A:9478351,B:8441752,C:13602992,D:13619056,E:13603023,F:8437952,G:13607008,H:12603504,I:12955267,J:42959,K:11881548,L:5682578,M:9090346,N:12481214,O:46753,P:53103,Q:3447649,R:187,S:10854235,T:37888,U:11534336,V:11579392,W:11534512,X:45232,Y:15250963,Z:12726834},n.builtinColorSchemes={ssPyMol:{prop:"ss",map:n.ssColors.pyMol},ssJmol:{prop:"ss",map:n.ssColors.Jmol},Jmol:{prop:"elem",map:n.elementColors.Jmol},default:{prop:"elem",map:n.elementColors.defaultColors},greenCarbon:{prop:"elem",map:n.elementColors.greenCarbon},cyanCarbon:{prop:"elem",map:n.elementColors.cyanCarbon},magentaCarbon:{prop:"elem",map:n.elementColors.magentaCarbon},yellowCarbon:{prop:"elem",map:n.elementColors.yellowCarbon},whiteCarbon:{prop:"elem",map:n.elementColors.whiteCarbon},orangeCarbon:{prop:"elem",map:n.elementColors.orangeCarbon},purpleCarbon:{prop:"elem",map:n.elementColors.purpleCarbon},blueCarbon:{prop:"elem",map:n.elementColors.blueCarbon},amino:{prop:"resAmino",map:n.residues.amino},shapely:{prop:"resShapely",map:n.residues.shapely},nucleic:{prop:"resNucleic",map:n.residues.nucleic},chain:{prop:"chain",map:n.chains.atom},chainHetatm:{prop:"chain",map:n.chains.hetatm}},n.getColorFromStyle=function(e,t){var r=t.colorscheme;void 0!==n.builtinColorSchemes[r]&&(r=n.builtinColorSchemes[r]);var o=e.color;if(void 0!==t.color&&"spectrum"!=t.color&&(o=t.color),void 0!==r)if(void 0!==n.builtinColorSchemes[r])void 0!==r[e[r.prop]]&&(o=r.map[e[r.prop]]);else if(void 0!==n.elementColors[r]){var r=n.elementColors[r];void 0!==r[e[r.prop]]&&(o=r.map[e[r.prop]])}else if(void 0!==r[e[r.prop]])o=r.map[e[r.prop]];else if(void 0!==r.prop&&void 0!==r.gradient){var i=r.prop,a=r.gradient;void 0!==n.Gradient.builtinGradients[a]&&(a=new n.Gradient.builtinGradients[a](r.min,r.max,r.mid));var s=a.range()||[-1,1],l=n.getAtomProperty(e,i);null!=l&&(o=a.valueToHex(l,s))}else if(void 0!==r.prop&&void 0!==r.map){var i=r.prop,l=n.getAtomProperty(e,i);void 0!==r.map[l]&&(o=r.map[l])}else void 0!==t.colorscheme[e.elem]?o=t.colorscheme[e.elem]:console.log("Could not interpret colorscheme "+r);else void 0!==t.colorfunc&&(o=t.colorfunc(e));return n.CC.color(o)};var n=n||{};n.drawCartoon=function(){var e=function(e,t){var r=[],o=e;o=[],o.push(e[0]);var i,a,s,l,u,c,p,f,d;for(i=1,a=e.length-1;i<a;i++)if(u=e[i],c=e[i+1],u.smoothen){var h=new n.Vector3((u.x+c.x)/2,(u.y+c.y)/2,(u.z+c.z)/2);h.atom=u.atom,o.push(h)}else o.push(u);for(o.push(e[e.length-1]),i=-1,s=o.length;i<=s-3;i++)if(l=o[-1===i?0:i],u=o[i+1],c=o[i+2],p=o[i===s-3?s-1:i+3],f=(new n.Vector3).subVectors(c,l).multiplyScalar(.5),d=(new n.Vector3).subVectors(p,u).multiplyScalar(.5),!c.skip)for(var m=0;m<t;m++){var g=1/t*m,v=u.x+g*f.x+g*g*(-3*u.x+3*c.x-2*f.x-d.x)+g*g*g*(2*u.x-2*c.x+f.x+d.x),y=u.y+g*f.y+g*g*(-3*u.y+3*c.y-2*f.y-d.y)+g*g*g*(2*u.y-2*c.y+f.y+d.y),b=u.z+g*f.z+g*g*(-3*u.z+3*c.z-2*f.z-d.z)+g*g*g*(2*u.z-2*c.z+f.z+d.z),w=new n.Vector3(v,y,b);w.atom=m<t/2?u.atom:c.atom,r.push(w)}return r.push(o[o.length-1]),r},t=function(e,t,r,o,i,a){for(var s,l,u,c,p=0,f=t.length;p<f;p++){c=Math.round(p*(o.length-1)/f),u=n.CC.color(o[c]),geoGroup=e.updateGeoGroup(2);var d=geoGroup.vertexArray,h=geoGroup.colorArray,m=geoGroup.faceArray;s=geoGroup.vertices,l=3*s,d[l]=t[p].x,d[l+1]=t[p].y,d[l+2]=t[p].z,d[l+3]=r[p].x,d[l+4]=r[p].y,d[l+5]=r[p].z;for(var g=0;g<6;++g)h[l+3*g]=u.r,h[l+1+3*g]=u.g,h[l+2+3*g]=u.b;if(p>0){var v=[s,s+1,s-1,s-2],y=geoGroup.faceidx;m[y]=v[0],m[y+1]=v[1],m[y+2]=v[3],m[y+3]=v[1],m[y+4]=v[2],m[y+5]=v[3],geoGroup.faceidx+=6}geoGroup.vertices+=2}},r=function(r,o,i,a,s,l,u){var c,p,f,d;if(!((f=o.length)<2||o[0].length<2)){for(a=a||axisDIV,c=0;c<f;c++)o[c]=e(o[c],a);if(d=o[0].length,!s)return t(r,o[0],o[f-1],i);var h,m,g,v,y,b,w=[],x=[],_=[];for(p=0;p<f;p++)w.push(.25+1.5*Math.sqrt((f-1)*p-Math.pow(p,2))/(f-1)),x.push(.5),_.push(2*(Math.pow(p/f,2)-p/f)+.6);var S=[];for(p=0;p<2*f-1;p++)S[p]=[p,p+1,p+1-2*f,p-2*f];S[2*f-1]=[p,p+1-2*f,p+1-4*f,p-2*f];var C,k,A,E,M,T,O=r.updateGeoGroup(2*f*d);for(c=0;c<d;c++){T=Math.round(c*(i.length-1)/d),M=n.CC.color(i[T]),y=g,b=v,g=[],v=[],h=[],void 0!==o[0][c].atom&&(E=o[0][c].atom,"oval"===u?m=w:"rectangle"===u?m=x:"parabola"===u&&(m=_)),m||(m=x);var I,P;for(p=0;p<f;p++)I=c<d-1?o[p][c+1].clone().sub(o[p][c]):o[p][c-1].clone().sub(o[p][c]).negate(),P=p<f-1?o[p+1][c].clone().sub(o[p][c]):o[p-1][c].clone().sub(o[p][c]).negate(),h[p]=P.cross(I).normalize().multiplyScalar(s*m[p]);for(p=0;p<f;p++)g[p]=o[p][c].clone().add(h[p].clone().negate());for(p=0;p<f;p++)v[p]=o[p][c].clone().add(h[p]);var j=O.vertexArray,D=O.colorArray,N=O.faceArray;for(C=O.vertices,k=3*C,p=0;p<f;p++)j[k+3*p+0]=g[p].x,j[k+3*p+1]=g[p].y,j[k+3*p+2]=g[p].z;for(p=0;p<f;p++)j[k+3*p+0+3*f]=v[f-1-p].x,j[k+3*p+1+3*f]=v[f-1-p].y,j[k+3*p+2+3*f]=v[f-1-p].z;for(p=0;p<2*f;++p)D[k+3*p+0]=M.r,D[k+3*p+1]=M.g,D[k+3*p+2]=M.b;if(c>0){for(p=0;p<2*f;p++){var R=[C+S[p][0],C+S[p][1],C+S[p][2],C+S[p][3]];A=O.faceidx,N[A]=R[0],N[A+1]=R[1],N[A+2]=R[3],N[A+3]=R[1],N[A+4]=R[2],N[A+5]=R[3],O.faceidx+=6}if(E.clickable){var F=[];F.push(new n.Triangle(y[0],g[0],g[f-1])),F.push(new n.Triangle(y[0],g[f-1],y[f-1])),F.push(new n.Triangle(y[f-1],g[f-1],v[f-1])),F.push(new n.Triangle(y[f-1],v[f-1],b[f-1])),F.push(new n.Triangle(v[0],b[0],b[f-1])),F.push(new n.Triangle(v[f-1],v[0],b[f-1])),F.push(new n.Triangle(g[0],y[0],b[0])),F.push(new n.Triangle(v[0],g[0],b[0]));for(p in F)E.intersectionShape.triangle.push(F[p])}}O.vertices+=2*f,E}var j=O.vertexArray,D=O.colorArray,N=O.faceArray;for(C=O.vertices,k=3*C,A=O.faceidx,c=0;c<f-1;c++){var R=[c,c+1,2*f-2-c,2*f-1-c];A=O.faceidx,N[A]=R[0],N[A+1]=R[1],N[A+2]=R[3],N[A+3]=R[1],N[A+4]=R[2],N[A+5]=R[3],O.faceidx+=6}for(c=0;c<f-1;c++){var R=[C-1-c,C-2-c,C-2*f+c+1,C-2*f+c];A=O.faceidx,N[A]=R[0],N[A+1]=R[1],N[A+2]=R[3],N[A+3]=R[1],N[A+4]=R[2],N[A+5]=R[3],O.faceidx+=6}}},o=function(r,o,i,a,s,l){if(!(o.length<2)){var u,c;if(u=o[0],c=o[o.length-1],a=a||axisDIV,u=e(u,a),c=e(c,a),!s)return t(r,u,c,i);var p,f,d,h,m,g,v,y,b,w,x,_,S,C,k,A,E,M,T,O=[],I=[[0,2,-6,-8],[-4,-2,6,4],[7,-1,-5,3],[-3,5,1,-7]];for(S=0,C=u.length;S<C;S++){if(w=Math.round(S*(i.length-1)/C),b=n.CC.color(i[w]),O.push(f=u[S]),O.push(f),O.push(d=c[S]),O.push(d),S<C-1){var P=u[S+1].clone().sub(u[S]);p=c[S].clone().sub(u[S]).cross(P).normalize().multiplyScalar(s)}O.push(h=u[S].clone().add(p)),O.push(h),O.push(m=c[S].clone().add(p)),O.push(m),void 0!==f.atom&&(x=f.atom),T=r.updateGeoGroup(8);var j=T.vertexArray,D=T.colorArray,N=T.faceArray;for(g=T.vertices,v=3*g,j[v]=f.x,j[v+1]=f.y,j[v+2]=f.z,j[v+3]=f.x,j[v+4]=f.y,j[v+5]=f.z,j[v+6]=d.x,j[v+7]=d.y,j[v+8]=d.z,j[v+9]=d.x,j[v+10]=d.y,j[v+11]=d.z,j[v+12]=h.x,j[v+13]=h.y,j[v+14]=h.z,j[v+15]=h.x,j[v+16]=h.y,j[v+17]=h.z,j[v+18]=m.x,j[v+19]=m.y,j[v+20]=m.z,j[v+21]=m.x,j[v+22]=m.y,j[v+23]=m.z,k=0;k<8;++k)D[v+3*k]=b.r,D[v+1+3*k]=b.g,D[v+2+3*k]=b.b;if(S>0){var R=void 0!==_&&void 0!==x&&_.serial!==x.serial;for(k=0;k<4;k++){var F=[g+I[k][0],g+I[k][1],g+I[k][2],g+I[k][3]];if(y=T.faceidx,N[y]=F[0],N[y+1]=F[1],N[y+2]=F[3],N[y+3]=F[1],N[y+4]=F[2],N[y+5]=F[3],T.faceidx+=6,x.clickable||_.clickable){var L=O[F[3]].clone(),z=O[F[0]].clone(),B=O[F[2]].clone(),q=O[F[1]].clone();if(L.atom=O[F[3]].atom||null,B.atom=O[F[2]].atom||null,z.atom=O[F[0]].atom||null,q.atom=O[F[1]].atom||null,R){var V=L.clone().add(z).multiplyScalar(.5),U=B.clone().add(q).multiplyScalar(.5),H=L.clone().add(q).multiplyScalar(.5);k%2==0?(_.clickable&&(A=new n.Triangle(V,H,L),E=new n.Triangle(U,B,H),M=new n.Triangle(H,B,L),_.intersectionShape.triangle.push(A),_.intersectionShape.triangle.push(E),_.intersectionShape.triangle.push(M)),x.clickable&&(A=new n.Triangle(z,q,H),E=new n.Triangle(q,U,H),M=new n.Triangle(z,H,V),x.intersectionShape.triangle.push(A),x.intersectionShape.triangle.push(E),x.intersectionShape.triangle.push(M))):(x.clickable&&(A=new n.Triangle(V,H,L),E=new n.Triangle(U,B,H),M=new n.Triangle(H,B,L),x.intersectionShape.triangle.push(A),x.intersectionShape.triangle.push(E),x.intersectionShape.triangle.push(M)),_.clickable&&(A=new n.Triangle(z,q,H),E=new n.Triangle(q,U,H),M=new n.Triangle(z,H,V),_.intersectionShape.triangle.push(A),_.intersectionShape.triangle.push(E),_.intersectionShape.triangle.push(M)))}else x.clickable&&(A=new n.Triangle(z,q,L),E=new n.Triangle(q,B,L),x.intersectionShape.triangle.push(A),x.intersectionShape.triangle.push(E))}}}T.vertices+=8,_=x}var G=O.length-8;T=r.updateGeoGroup(8);var j=T.vertexArray,D=T.colorArray,N=T.faceArray;for(g=T.vertices,v=3*g,y=T.faceidx,S=0;S<4;S++){O.push(O[2*S]),O.push(O[G+2*S]);var W=O[2*S],Z=O[G+2*S];j[v+6*S]=W.x,j[v+1+6*S]=W.y,j[v+2+6*S]=W.z,j[v+3+6*S]=Z.x,j[v+4+6*S]=Z.y,j[v+5+6*S]=Z.z,D[v+6*S]=b.r,D[v+1+6*S]=b.g,D[v+2+6*S]=b.b,D[v+3+6*S]=b.r,D[v+4+6*S]=b.g,D[v+5+6*S]=b.b}G+=8,A=[g,g+2,g+6,g+4],E=[g+1,g+5,g+7,g+3],N[y]=A[0],N[y+1]=A[1],N[y+2]=A[3],N[y+3]=A[1],N[y+4]=A[2],N[y+5]=A[3],N[y+6]=E[0],N[y+7]=E[1],N[y+8]=E[3],N[y+9]=E[1],N[y+10]=E[2],N[y+11]=E[3],T.faceidx+=12,T.vertices+=8}},i=function(t,r,o,i,a){if(0!==r.length){a=void 0===a?5:a;var s=new n.Geometry,l=(e(r,a),new n.LineBasicMaterial({linewidth:o}));l.vertexColors=!0;var u=new n.Line(s,l);u.type=n.LineStrip,t.add(u)}},a=function(e,t,n,i,a,s,l){l&&"default"!==l||(l="rectangle"),"edged"===l?o(e,t,n,i,a):"rectangle"!==l&&"oval"!==l&&"parabola"!==l||r(e,t,n,i,a,0,l)},s=function(e){return e&&"C"===e.elem&&"CA"===e.atom},l=function(e,t){if(e&&t&&e.chain===t.chain){if(e.reschain===t.reschain&&(e.resi===t.resi||e.resi===t.resi-1))return!0;if(e.resi<t.resi){var n=e.x-t.x,r=e.y-t.y,o=e.z-t.z;if(n*n+r*r+o*o<16)return!0}}return!1},u=function(e,t,r,o,i){if(null!=t&&0!=t.vertices){i&&(t.initTypedArrays(),t.setUpNormals());var a=new n.MeshDoubleLambertMaterial;a.vertexColors=n.FaceColors,"number"==typeof r&&r>=0&&r<1&&(a.transparent=!0,a.opacity=r),a.outline=o;var s=new n.Mesh(t,a);e.add(s)}},c={C:!0,CA:!0,O:!0,P:!0,OP2:!0,O2P:!0,"O5'":!0,"O3'":!0,"C5'":!0,"C2'":!0,"O5*":!0,"O3*":!0,"C5*":!0,"C2*":!0,N1:!0,N3:!0},p={DA:!0,DG:!0,A:!0,G:!0},f={DT:!0,DC:!0,U:!0,C:!0,T:!0},d={DA:!0,DG:!0,A:!0,G:!0,DT:!0,DC:!0,U:!0,C:!0,T:!0},h=function(e,t,r,o,h,g,v){g=g||5,v=v||5;var y,b,w,x,_,S,C,k,A,E,M,T,O,I,P,j,D,N,R=new n.Geometry(!0),F=new n.Geometry(!0),L=[],z=[],B=1,q=!1,V={};for(var U in n.Gradient.builtinGradients)n.Gradient.builtinGradients.hasOwnProperty(U)&&(V[U]=new n.Gradient.builtinGradients[U](r[0],r[1]));for(var H=(function(e,t){return r&&"spectrum"===t.color?t.colorscheme in V?V[t.colorscheme].valueToHex(e.resi):V.sinebow.valueToHex(e.resi):n.getColorFromStyle(e,t).getHex()}),k=0;k<g;k++)z[k]=[];var G=!1,W=!1;k=0;var Z=[];for(k in t){if(x=t[k],"C"===x.elem&&"CA"===x.atom){var Y=l(w,x);Y&&"s"===x.ss?G=!0:G&&(w&&b&&w.style.cartoon.arrows&&b.style.cartoon.arrows&&(w.ss="arrow end",b.ss="arrow start"),G=!1),Y&&"h"===w.ss?(!W&&x.style.cartoon.tubes&&(x.ss="tube start"),W=!0):W&&"tube start"!==w.ss&&(b&&b.style.cartoon.tubes&&(b.ss="tube end"),W=!1),b=w,w=x}x&&x.atom in c&&Z.push(x)}var X=function(t){for(var r=0;!C&&r<g;r++)i(e,z[r],1,0,v);if(o&&z[0].length>0&&a(F,z,L,v,C,0,z.style),t){var s=[];for(r=0;r<g;r++)s[r]=z[r][z[r].length-1];var l=L[L.length-1]}for(z=[],r=0;r<g;r++)z[r]=[];if(L=[],t){for(r=0;r<g;r++)z[r].push(s[r]);L.push(l)}u(e,F,B,q,!0),u(e,R,B,q,!1),F=new n.Geometry(!0),R=new n.Geometry(!0)};w=void 0;for(var K=0;K<Z.length;K++){x=Z[K];var Q=x.resn.trim(),J=Q in d;if(B=1,y=x.style.cartoon,w&&w.style.cartoon&&(B=w.style.cartoon.opacity),w&&w.style.cartoon&&w.style.cartoon.outline&&(q=w.style.cartoon.outline),!w||!w.style.cartoon||x.style.cartoon&&w.style.cartoon.opacity==x.style.cartoon.opacity||X(w.chain==x.chain),z.length&&z[0].length>3e4/g/v/2&&X(!0),"trace"===y.style){if(x.hetflag);else if("C"===x.elem&&"CA"===x.atom||J&&"P"===x.atom){if(S=H(x,y),C=$.isNumeric(y.thickness)?y.thickness:.4,l(w,x))if(S==_){var ee=n.CC.color(S);n.GLDraw.drawCylinder(R,w,x,C,ee,2,2)}else{var te=(new n.Vector3).addVectors(w,x).multiplyScalar(.5),ne=n.CC.color(_),re=n.CC.color(S);n.GLDraw.drawCylinder(R,w,te,C,ne,2,0),n.GLDraw.drawCylinder(R,te,x,C,re,0,2)}w=x,_=S}}else{if(s(x)||J&&("P"===x.atom||0==x.atom.indexOf("O5"))){if(N){if("tube end"!==x.ss)continue;N=!1,D=new n.Vector3(x.x,x.y,x.z),n.GLDraw.drawCylinder(R,j,D,2,n.CC.color(_),1,1),x.ss="h"}if(w&&(!l(w,x)||"tube start"===w.ss)){for("tube start"===w.ss&&(N=!0,j=new n.Vector3(w.x,w.y,w.z),w.ss="h"),P&&(I=T?(new n.Vector3).addVectors(w,T).multiplyScalar(.5):new n.Vector3(w.x,w.y,w.z),n.GLDraw.drawCylinder(R,I,P,.4,n.CC.color(P.color),0,2),m(z,g,!h,T,O,M,w,Z,K),L.push(S),I=null,P=null),k=0;!C&&k<g;k++)i(e,z[k],1,0,v);for(o&&z[0].length>0&&a(F,z,L,v,C,0,z.style),z=[],k=0;k<g;k++)z[k]=[];L=[]}if(void 0===w||w.rescode!=x.rescode||w.resi!=x.resi){if(P){I=(new n.Vector3).addVectors(w,x).multiplyScalar(.5);var oe=I.clone().sub(P).multiplyScalar(.02);I.add(oe),n.GLDraw.drawCylinder(R,I,P,.4,n.CC.color(P.color),0,2),I=null,P=null}S=H(x,y),L.push(S),C=$.isNumeric(y.thickness)?y.thickness:.4,w=x,A=new n.Vector3(w.x,w.y,w.z),A.resi=w.resi,_=S}!0!==x.clickable||void 0!==x.intersectionShape&&void 0!==x.intersectionShape.triangle||(x.intersectionShape={sphere:null,cylinder:[],line:[],triangle:[]})}else s(w)&&"O"===x.atom||J&&"P"===w.atom&&("OP2"===x.atom||"O2P"===x.atom)||J&&0==w.atom.indexOf("O5")&&0==x.atom.indexOf("C5")?(E=new n.Vector3(x.x,x.y,x.z),E.resi=x.resi,"OP2"!==x.atom&&"O2P"!==x.atom||(O=new n.Vector3(x.x,x.y,x.z))):J&&0==x.atom.indexOf("O3")?T=new n.Vector3(x.x,x.y,x.z):("N1"===x.atom&&Q in p||"N3"===x.atom&&Q in f)&&(P=new n.Vector3(x.x,x.y,x.z),P.color=n.getColorFromStyle(x,y).getHex());E&&A&&E.resi===A.resi&&(m(z,g,!h,A,E,M,w,Z,K),M=E,A=null,E=null,L.push(S))}}P&&(I=T?(new n.Vector3).addVectors(w,T).multiplyScalar(.5):new n.Vector3(w.x,w.y,w.z),n.GLDraw.drawCylinder(R,I,P,.4,n.CC.color(P.color),0,2),m(z,g,!h,T,O,M,w,Z,K),L.push(S)),X()},m=function(e,t,r,o,i,a,s,l,u){var c,p,f,d,h,m;if(o&&i&&s){var g=i.sub(o);g.normalize();for(var v=l[u],p=u+1;p<l.length&&(v=l[p],v.atom!=s.atom);p++);if(v=v?new n.Vector3(v.x,v.y,v.z):new n.Vector3(0,0,0),v.sub(o),"arrow start"===s.ss){var y=v.clone().multiplyScalar(.3).cross(i);o.add(y);var b=v.clone().cross(g).normalize();g.rotateAboutVector(b,.43)}for(s.style.cartoon.ribbon?c=s.style.cartoon.thickness||.4:s.style.cartoon.width?c=s.style.cartoon.width:"c"===s.ss?c="P"===s.atom?.8:.5:"arrow start"===s.ss?(c=1.3,h=!0):c="arrow end"===s.ss?.5:"h"===s.ss&&s.style.cartoon.tubes||"tube start"===s.ss?.5:1.3,null!=a&&g.dot(a)<0&&g.negate(),g.multiplyScalar(c),p=0;p<t;p++)f=2*p/(t-1)-1,d=new n.Vector3(o.x+f*g.x,o.y+f*g.y,o.z+f*g.z),d.atom=s,r&&"s"===s.ss&&(d.smoothen=!0),e[p].push(d);if(h)for(g.multiplyScalar(2),p=0;p<t;p++)f=2*p/(t-1)-1,d=new n.Vector3(o.x+f*g.x,o.y+f*g.y,o.z+f*g.z),d.atom=s,d.smoothen=!1,d.skip=!0,e[p].push(d);return m=s.style.cartoon.style||"default",e.style?e.style!=m&&(console.log("Warning: a cartoon chain's strand-style is ambiguous"),e.style="default"):e.style=m,"arrow start"!==s.ss&&"arrow end"!==s.ss||(s.ss="s"),h}};return function(e,t,n,r){r=parseInt(5*parseFloat(r))||5,h(e,t,n,!0,!1,r,r)}}();var n=n||{};n.GLDraw=function(){var e={},t=function(){var e=new n.Vector3;return function(t){e.set(t[0],t[1],t[2]);var n,r,o,i,a,s=e.x,l=e.y,u=e.z,c=Math.sqrt(s*s+l*l);c<1e-4?(r=0,o=1):(r=-s/c,o=l/c),l=-r*s+o*l,n=Math.sqrt(l*l+u*u),n<1e-4?(i=0,a=1):(i=u/n,a=l/n);var p=new Float32Array(9);return p[0]=o,p[1]=r,p[2]=0,p[3]=-r*a,p[4]=o*a,p[5]=i,p[6]=r*i,p[7]=-o*i,p[8]=a,p}}(),r=function(){var e,t=[],r=Math.pow(2,4),o=2,i=Math.pow(2,o),a=r/i;for(t[0]=new n.Vector3(-1,0,0),t[a]=new n.Vector3(0,0,1),t[2*a]=new n.Vector3(1,0,0),t[3*a]=new n.Vector3(0,0,-1),o=3;o<=4;o++){for(i=Math.pow(2,o-1),a=r/i,e=0;e<i-1;e++)t[a/2+e*a]=t[e*a].clone().add(t[(e+1)*a]).normalize();e=i-1,t[a/2+e*a]=t[e*a].clone().add(t[0]).normalize()}return t}(),o={cache:{},getVerticesForRadius:function(e,t,o){if(void 0!==typeof this.chache&&void 0!==this.cache[e]&&void 0!==this.cache[e][t+o])return this.cache[e][t+o];for(var i,a=(new n.Vector3(0,1,0),r.length),s=[],l=[],u=0;u<a;u++)s.push(r[u].clone().multiplyScalar(e)),s.push(r[u].clone().multiplyScalar(e)),i=r[u].clone().normalize(),l.push(i),l.push(i);var c,p,f=[],d=a,h=2*Math.PI,m=Math.PI,g=!1,v=!1;for(p=0;p<=10;p++){g=0===p||10===p,v=5===p;var y=[],b=[];for(c=0;c<=d;c++)if(v){var w=c<d?2*c:0;b.push(w+1),y.push(w)}else{var x=c/d,_=p/10;if(g&&0!==c)g&&y.push(s.length-1);else if(c<d){var S=new n.Vector3;S.x=-e*Math.cos(0+x*h)*Math.sin(0+_*m),S.y=1==t?0:e*Math.cos(0+_*m),S.z=e*Math.sin(0+x*h)*Math.sin(0+_*m),Math.abs(S.x)<1e-5&&(S.x=0),Math.abs(S.y)<1e-5&&(S.y=0),Math.abs(S.z)<1e-5&&(S.z=0),1===t?(i=new n.Vector3(0,Math.cos(0+_*m),0),i.normalize()):(i=new n.Vector3(S.x,S.y,S.z),i.normalize()),s.push(S),l.push(i),y.push(s.length-1)}else y.push(s.length-d)}v&&f.push(b),f.push(y)}var C={vertices:s,normals:l,verticesRows:f,w:d,h:10};return this.cache[e]={},this.cache[e][t+o]=C,C}};this.caps={NONE:0,FLAT:1,ROUND:2};var i=0;e.drawCylinder=function(e,n,r,a,s,l,u){if(n&&r){i++;var c=u||l;s=s||{r:0,g:0,b:0};var p=[r.x,r.y,r.z];p[0]-=n.x,p[1]-=n.y,p[2]-=n.z;var f,d,h,m,g,v,y=t(p),b=o.getVerticesForRadius(a,u,"to"),w=b.w,x=b.h,_=c?x*w+2:2*w,S=e.updateGeoGroup(_),C=b.vertices,k=b.normals,A=b.verticesRows,E=A[x/2],M=A[x/2+1],T=S.vertices,O=S.vertexArray,I=S.normalArray,P=S.colorArray,j=S.faceArray;for(h=0;h<w;++h){var D=2*h;m=y[0]*C[D].x+y[3]*C[D].y+y[6]*C[D].z,g=y[1]*C[D].x+y[4]*C[D].y+y[7]*C[D].z,v=y[5]*C[D].y+y[8]*C[D].z,f=3*(T+D),d=S.faceidx,O[f]=m+n.x,O[f+1]=g+n.y,O[f+2]=v+n.z,O[f+3]=m+r.x,O[f+4]=g+r.y,O[f+5]=v+r.z,I[f]=m,I[f+3]=m,I[f+1]=g,I[f+4]=g,I[f+2]=v,I[f+5]=v,P[f]=s.r,P[f+3]=s.r,P[f+1]=s.g,P[f+4]=s.g,P[f+2]=s.b,P[f+5]=s.b,j[d]=M[h]+T,j[d+1]=M[h+1]+T,j[d+2]=E[h]+T,j[d+3]=E[h]+T,j[d+4]=M[h+1]+T,j[d+5]=E[h+1]+T,S.faceidx+=6}if(c){var N,R,F,L,z,B,q,V,U,H,G,W,Z,Y,X,K,Q,J,$,ee,te,ne,re,oe,ie,ae,se,le,ue,ce,pe,fe,de=u?0:x/2,he=l?x+1:x/2+1;for(g=de;g<he;g++)if(g!==x/2){var me=g<=x/2?r:n,ge=o.getVerticesForRadius(a,u,"to"),ve=o.getVerticesForRadius(a,l,"from");for(me===r?(C=ge.vertices,k=ge.normals,A=ge.verticesRows):me==n&&(C=ve.vertices,k=ve.normals,A=ve.verticesRows),m=0;m<w;m++)d=S.faceidx,N=A[g][m+1],ue=3*(N+T),R=A[g][m],ce=3*(R+T),F=A[g+1][m],pe=3*(F+T),L=A[g+1][m+1],fe=3*(L+T),z=y[0]*C[N].x+y[3]*C[N].y+y[6]*C[N].z,B=y[0]*C[R].x+y[3]*C[R].y+y[6]*C[R].z,q=y[0]*C[F].x+y[3]*C[F].y+y[6]*C[F].z,V=y[0]*C[L].x+y[3]*C[L].y+y[6]*C[L].z,U=y[1]*C[N].x+y[4]*C[N].y+y[7]*C[N].z,H=y[1]*C[R].x+y[4]*C[R].y+y[7]*C[R].z,G=y[1]*C[F].x+y[4]*C[F].y+y[7]*C[F].z,W=y[1]*C[L].x+y[4]*C[L].y+y[7]*C[L].z,Z=y[5]*C[N].y+y[8]*C[N].z,Y=y[5]*C[R].y+y[8]*C[R].z,X=y[5]*C[F].y+y[8]*C[F].z,K=y[5]*C[L].y+y[8]*C[L].z,O[ue]=z+me.x,O[ce]=B+me.x,O[pe]=q+me.x,O[fe]=V+me.x,O[ue+1]=U+me.y,O[ce+1]=H+me.y,O[pe+1]=G+me.y,O[fe+1]=W+me.y,O[ue+2]=Z+me.z,O[ce+2]=Y+me.z,O[pe+2]=X+me.z,O[fe+2]=K+me.z,P[ue]=s.r,P[ce]=s.r,P[pe]=s.r,P[fe]=s.r,P[ue+1]=s.g,P[ce+1]=s.g,P[pe+1]=s.g,P[fe+1]=s.g,P[ue+2]=s.b,P[ce+2]=s.b,P[pe+2]=s.b,P[fe+2]=s.b,Q=y[0]*k[N].x+y[3]*k[N].y+y[6]*k[N].z,J=y[0]*k[R].x+y[3]*k[R].y+y[6]*k[R].z,$=y[0]*k[F].x+y[3]*k[F].y+y[6]*k[F].z,ee=y[0]*k[L].x+y[3]*k[L].y+y[6]*k[L].z,te=y[1]*k[N].x+y[4]*k[N].y+y[7]*k[N].z,ne=y[1]*k[R].x+y[4]*k[R].y+y[7]*k[R].z,re=y[1]*k[F].x+y[4]*k[F].y+y[7]*k[F].z,oe=y[1]*k[L].x+y[4]*k[L].y+y[7]*k[L].z,ie=y[5]*k[N].y+y[8]*k[N].z,ae=y[5]*k[R].y+y[8]*k[R].z,se=y[5]*k[F].y+y[8]*k[F].z,le=y[5]*k[L].y+y[8]*k[L].z,0===g?(I[ue]=Q,I[pe]=$,I[fe]=ee,I[ue+1]=te,I[pe+1]=re,I[fe+1]=oe,I[ue+2]=ie,I[pe+2]=se,I[fe+2]=le,j[d]=N+T,j[d+1]=F+T,j[d+2]=L+T,S.faceidx+=3):g===he-1?(I[ue]=Q,I[ce]=J,I[pe]=$,I[ue+1]=te,I[ce+1]=ne,I[pe+1]=re,I[ue+2]=ie,I[ce+2]=ae,I[pe+2]=se,j[d]=N+T,j[d+1]=R+T,j[d+2]=F+T,S.faceidx+=3):(I[ue]=Q,I[ce]=J,I[fe]=ee,I[ue+1]=te,I[ce+1]=ne,I[fe+1]=oe,I[ue+2]=ie,I[ce+2]=ae,I[fe+2]=le,I[ce]=J,I[pe]=$,I[fe]=ee,I[ce+1]=ne,I[pe+1]=re,I[fe+1]=oe,I[ce+2]=ae,I[pe+2]=se,I[fe+2]=le,j[d]=N+T,j[d+1]=R+T,j[d+2]=L+T,j[d+3]=R+T,j[d+4]=F+T,j[d+5]=L+T,S.faceidx+=6)}}S.vertices+=_}},e.drawCone=function(e,o,i,a,s){if(o&&i){s=s||{r:0,g:0,b:0};var l=[i.x,i.y,i.z];l.x-=o.x,l.y-=o.y,l.z-=o.z;var u,c,p,f,d,h,m=t(l),g=r.length,v=r,y=g+2,b=e.updateGeoGroup(y),w=b.vertices,x=b.vertexArray,_=b.normalArray,S=b.colorArray,C=b.faceArray,u=3*w,k=new n.Vector3(l[0],l[1],l[2]).normalize();for(x[u]=o.x,x[u+1]=o.y,x[u+2]=o.z,_[u]=-k.x,_[u+1]=-k.y,_[u+2]=-k.z,S[u]=s.r,S[u+1]=s.g,S[u+2]=s.b,x[u+3]=i.x,x[u+4]=i.y,x[u+5]=i.z,_[u+3]=k.x,_[u+4]=k.y,_[u+5]=k.z,S[u+3]=s.r,S[u+4]=s.g,S[u+5]=s.b,u+=6,p=0;p<g;++p){var A=v[p].clone();A.multiplyScalar(a),f=m[0]*A.x+m[3]*A.y+m[6]*A.z,d=m[1]*A.x+m[4]*A.y+m[7]*A.z,h=m[5]*A.y+m[8]*A.z,x[u]=f+o.x,x[u+1]=d+o.y,x[u+2]=h+o.z,_[u]=f,_[u+1]=d,_[u+2]=h,S[u]=s.r,S[u+1]=s.g,S[u+2]=s.b,u+=3}b.vertices+=g+2;var c=b.faceidx;for(p=0;p<g;p++){var E=w+2+p,M=w+2+(p+1)%g;C[c]=E,C[c+1]=M,C[c+2]=w,c+=3,C[c]=E,C[c+1]=M,C[c+2]=w+1,c+=3}b.faceidx+=6*g}};var a={cache:{},getVerticesForRadius:function(e){if(void 0!==this.cache[e])return this.cache[e];var t={vertices:[],verticesRows:[],normals:[]},r=16,o=10;e<1&&(r=10,o=8);var i,a,s=2*Math.PI,l=Math.PI;for(a=0;a<=o;a++){var u=[];for(i=0;i<=r;i++){var c=i/r,p=a/o,f={};f.x=-e*Math.cos(0+c*s)*Math.sin(0+p*l),f.y=e*Math.cos(0+p*l),f.z=e*Math.sin(0+c*s)*Math.sin(0+p*l);var d=new n.Vector3(f.x,f.y,f.z);d.normalize(),t.vertices.push(f),t.normals.push(d),u.push(t.vertices.length-1)}t.verticesRows.push(u)}return this.cache[e]=t,t}};return e.drawSphere=function(e,t,r,o){for(var i,s,l=(new n.Vector3(t.x,t.y,t.z),a.getVerticesForRadius(r)),u=l.vertices,c=l.normals,p=e.updateGeoGroup(u.length),f=p.vertices,d=p.vertexArray,h=p.colorArray,m=p.faceArray,g=p.lineArray,v=p.normalArray,y=0,b=u.length;y<b;++y){var w=3*(f+y),x=u[y];d[w]=x.x+t.x,d[w+1]=x.y+t.y,d[w+2]=x.z+t.z,h[w]=o.r,h[w+1]=o.g,h[w+2]=o.b}p.vertices+=u.length;var _=l.verticesRows,S=_.length-1;for(s=0;s<S;s++){var C=_[s].length-1;for(i=0;i<C;i++){var k=p.faceidx,A=p.lineidx,E=_[s][i+1]+f,M=3*E,T=_[s][i]+f,O=3*T,I=_[s+1][i]+f,P=3*I,j=_[s+1][i+1]+f,D=3*j,N=c[E-f],R=c[T-f],F=c[I-f],L=c[j-f];Math.abs(u[E-f].y)===r?(v[M]=N.x,v[P]=F.x,v[D]=L.x,v[M+1]=N.y,v[P+1]=F.y,v[D+1]=L.y,v[M+2]=N.z,v[P+2]=F.z,v[D+2]=L.z,m[k]=E,m[k+1]=I,m[k+2]=j,g[A]=E,g[A+1]=I,g[A+2]=E,g[A+3]=j,g[A+4]=I,g[A+5]=j,p.faceidx+=3,p.lineidx+=6):Math.abs(u[I-f].y)===r?(v[M]=N.x,v[O]=R.x,v[P]=F.x,v[M+1]=N.y,v[O+1]=R.y,v[P+1]=F.y,v[M+2]=N.z,v[O+2]=R.z,v[P+2]=F.z,m[k]=E,m[k+1]=T,m[k+2]=I,g[A]=E,g[A+1]=T,g[A+2]=E,g[A+3]=I,g[A+4]=T,g[A+5]=I,p.faceidx+=3,p.lineidx+=6):(v[M]=N.x,v[O]=R.x,v[D]=L.x,v[M+1]=N.y,v[O+1]=R.y,v[D+1]=L.y,v[M+2]=N.z,v[O+2]=R.z,v[D+2]=L.z,v[O]=R.x,v[P]=F.x,v[D]=L.x,v[O+1]=R.y,v[P+1]=F.y,v[D+1]=L.y,v[O+2]=R.z,v[P+2]=F.z,v[D+2]=L.z,m[k]=E,m[k+1]=T,m[k+2]=j,m[k+3]=T,m[k+4]=I,m[k+5]=j,g[A]=E,g[A+1]=T,g[A+2]=E,g[A+3]=j,g[A+4]=T,g[A+5]=I,g[A+6]=I,g[A+7]=j,p.faceidx+=6,p.lineidx+=8)}}},e}();var n=n||{};n.GLModel=function(){function e(s,p){var f=[],d=[],h=s,m=!1,g=null,v=null,y=null,b={},w=new n.Matrix4,x=!0,_=n.elementColors.defaultColor,S=p||n.elementColors.defaultColors,C=function(e,t){var n=1.5;return void 0!==t.radius?n=t.radius:o[e.elem]&&(n=o[e.elem]),void 0!==t.scale&&(n*=t.scale),n},k=function(e,t){if(e.style.cross){var o=e.style.cross;if(!o.hidden){var i=o.linewidth||r;t[i]||(t[i]=new n.Geometry);var a=t[i].updateGeoGroup(6),s=C(e,o),l=[[s,0,0],[-s,0,0],[0,s,0],[0,-s,0],[0,0,s],[0,0,-s]],u=e.clickable||e.hoverable;u&&void 0===e.intersectionShape&&(e.intersectionShape={sphere:[],cylinder:[],line:[]});for(var c=n.getColorFromStyle(e,o),p=a.vertexArray,f=a.colorArray,d=0;d<6;d++){var h=3*a.vertices;if(a.vertices++,p[h]=e.x+l[d][0],p[h+1]=e.y+l[d][1],p[h+2]=e.z+l[d][2],f[h]=c.r,f[h+1]=c.g,f[h+2]=c.b,u){var m=new n.Vector3(l[d][0],l[d][1],l[d][2]);m.multiplyScalar(.1),m.set(m.x+e.x,m.y+e.y,m.z+e.z),e.intersectionShape.line.push(m)}}}}},A=function(e,t,r){var o=new n.Vector3(e.x,e.y,e.z),i=new n.Vector3(t.x,t.y,t.z),a=i.clone(),s=null;a.sub(o);var l,u,c,p,d;return 1===e.bonds.length?1===t.bonds.length?(s=a.clone(),Math.abs(s.x)>1e-4?s.y+=1:s.x+=1):(l=(r+1)%t.bonds.length,u=t.bonds[l],c=f[u],p=new n.Vector3(c.x,c.y,c.z),d=p.clone(),d.sub(o),s=d.clone(),s.cross(a)):(l=(r+1)%e.bonds.length,u=e.bonds[l],c=f[u],p=new n.Vector3(c.x,c.y,c.z),d=p.clone(),d.sub(o),s=d.clone(),s.cross(a)),s.lengthSq()<.01&&(s=a.clone(),Math.abs(s.x)>1e-4?s.y+=1:s.x+=1),s.cross(a),s.normalize(),s},E=function(e,t,n,r,o,i){e[n]=r.x,e[n+1]=r.y,e[n+2]=r.z,t[n]=i.r,t[n+1]=i.g,t[n+2]=i.b,e[n+3]=o.x,e[n+4]=o.y,e[n+5]=o.z,t[n+3]=i.r,t[n+4]=i.g,t[n+5]=i.b},M=function(e,t,o){if(e.style.line){var i=e.style.line;if(!i.hidden){var a,s,l,u,c=i.linewidth||r;o[c]||(o[c]=new n.Geometry);for(var p=o[c].updateGeoGroup(6*e.bonds.length),f=p.vertexArray,d=p.colorArray,h=0;h<e.bonds.length;h++){var m=e.bonds[h],g=t[m];if(g.style.line&&!(e.serial>=g.serial)){var v=new n.Vector3(e.x,e.y,e.z),y=new n.Vector3(g.x,g.y,g.z),b=v.clone().add(y).multiplyScalar(.5),w=!1;(e.clickable||e.hoverable)&&(void 0===e.intersectionShape&&(e.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),e.intersectionShape.line.push(v),e.intersectionShape.line.push(b),g.intersectionShape.line.push(b),g.intersectionShape.line.push(y));var x=n.getColorFromStyle(e,e.style.line),_=n.getColorFromStyle(g,g.style.line);if(e.bondStyles&&e.bondStyles[h]){var S=e.bondStyles[h];if(!S.iswire)continue;S.radius&&(bondR=S.radius),S.singleBond&&(w=!0),void 0!==S.color1&&(x=n.CC.color(S.color1)),void 0!==S.color2&&(_=n.CC.color(S.color2))}var C=3*p.vertices;if(e.bondOrder[h]>1&&e.bondOrder[h]<4&&!w){var k=A(e,g,h),M=y.clone();if(M.sub(v),2==e.bondOrder[h])if(k.multiplyScalar(.1),a=v.clone(),a.add(k),s=v.clone(),s.sub(k),l=a.clone(),l.add(M),u=s.clone(),u.add(M),x==_)p.vertices+=4,E(f,d,C,a,l,x),E(f,d,C+6,s,u,x);else{p.vertices+=8,M.multiplyScalar(.5);var T=a.clone();T.add(M);var O=s.clone();O.add(M),E(f,d,C,a,T,x),E(f,d,C+6,T,l,_),E(f,d,C+12,s,O,x),E(f,d,C+18,O,u,_)}else if(3==e.bondOrder[h])if(k.multiplyScalar(.1),a=v.clone(),a.add(k),s=v.clone(),s.sub(k),l=a.clone(),l.add(M),u=s.clone(),u.add(M),x==_)p.vertices+=6,E(f,d,C,v,y,x),E(f,d,C+6,a,l,x),E(f,d,C+12,s,u,x);else{p.vertices+=12,M.multiplyScalar(.5);var T=a.clone();T.add(M);var O=s.clone();O.add(M),E(f,d,C,v,b,x),E(f,d,C+6,b,y,_),E(f,d,C+12,a,T,x),E(f,d,C+18,T,l,_),E(f,d,C+24,s,O,x),E(f,d,C+30,O,u,_)}}else x==_?(p.vertices+=2,E(f,d,C,v,y,x)):(p.vertices+=4,E(f,d,C,v,b,x),E(f,d,C+6,b,y,_))}}}}},T=function(e,t){if(e.style.sphere){var r=e.style.sphere;if(!r.hidden){var o=n.getColorFromStyle(e,r),i=C(e,r);if((!0===e.clickable||e.hoverable)&&void 0!==e.intersectionShape){var a=new n.Vector3(e.x,e.y,e.z);e.intersectionShape.sphere.push(new n.Sphere(a,i))}n.GLDraw.drawSphere(t,e,i,o)}}},O=function(e,t){if(e.style.sphere){var r=e.style.sphere;if(!r.hidden){var o=C(e,r),i=n.getColorFromStyle(e,r),a=t.updateGeoGroup(1),s=a.vertices,l=3*s,u=a.vertexArray,c=a.colorArray,p=a.radiusArray;u[l]=e.x,u[l+1]=e.y,u[l+2]=e.z;var c=(a.normalArray,a.colorArray);if(c[l]=i.r,c[l+1]=i.g,c[l+2]=i.b,p[s]=o,(!0===e.clickable||e.hoverable)&&void 0!==e.intersectionShape){var f=new n.Vector3(e.x,e.y,e.z);e.intersectionShape.sphere.push(new n.Sphere(f,o))}a.vertices+=1}}},I=function(e,t,n,r){for(var o=e.updateGeoGroup(4),i=o.vertices,a=3*i,s=o.vertexArray,l=o.colorArray,u=0;u<4;u++)s[a+3*u]=t.x,s[a+3*u+1]=t.y,s[a+3*u+2]=t.z;for(var c=o.normalArray,l=o.colorArray,u=0;u<4;u++)l[a+3*u]=r.r,l[a+3*u+1]=r.g,l[a+3*u+2]=r.b;c[a+0]=-n,c[a+1]=n,c[a+2]=0,c[a+3]=-n,c[a+4]=-n,c[a+5]=0,c[a+6]=n,c[a+7]=-n,c[a+8]=0,c[a+9]=n,c[a+10]=n,c[a+11]=0,o.vertices+=4;var p=o.faceArray,f=o.faceidx;p[f+0]=i,p[f+1]=i+1,p[f+2]=i+2,p[f+3]=i+2,p[f+4]=i+3,p[f+5]=i,o.faceidx+=6},P=function(e,t){if(e.style.sphere){var r=e.style.sphere;if(!r.hidden){var o=C(e,r),i=n.getColorFromStyle(e,r);if((!0===e.clickable||e.hoverable)&&void 0!==e.intersectionShape){var a=new n.Vector3(e.x,e.y,e.z);e.intersectionShape.sphere.push(new n.Sphere(a,o))}I(t,e,o,i)}}},j=function(e,t,n,r,o,i,a){for(var s=e.updateGeoGroup(4),l=s.vertices,u=3*l,c=s.vertexArray,p=s.colorArray,f=s.radiusArray,d=s.normalArray,h=o.r,m=o.g,g=o.b,v=u,y=0;y<4;y++)c[v]=t.x,d[v]=n.x,p[v]=h,v++,c[v]=t.y,d[v]=n.y,p[v]=m,v++,c[v]=t.z,d[v]=n.z,p[v]=y<2?g:function(e){var t=-e;return 0==t&&(t=-1e-4),t}(g),v++;s.vertices+=4,f[l]=-r,f[l+1]=r,f[l+2]=-r,f[l+3]=r;var b=s.faceArray,w=s.faceidx;b[w+0]=l,b[w+1]=l+1,b[w+2]=l+2,b[w+3]=l+2,b[w+4]=l+3,b[w+5]=l,s.faceidx+=6},D=function(e,t,r){if(e.style.stick){var o=e.style.stick;if(!o.hidden){var i,a,s=o.radius||.25,l=s,u=o.singleBonds||!1,c=0,p=0,f=n.getColorFromStyle(e,o);!e.capDrawn&&e.bonds.length<4&&(c=2);var d=n.GLDraw.drawCylinder;r.imposter&&(d=j);for(var h=0;h<e.bonds.length;h++){var m=e.bonds[h],g=t[m];if(e.serial<g.serial){var v=g.style;if(!v.stick)continue;var y=n.getColorFromStyle(g,v.stick);l=s;var b=u;if(e.bondStyles&&e.bondStyles[h]){var w=e.bondStyles[h];if(w.iswire)continue;w.radius&&(l=w.radius),w.singleBond&&(b=!0),void 0!==w.color1&&(f=n.CC.color(w.color1)),void 0!==w.color2&&(y=n.CC.color(w.color2))}var x=new n.Vector3(e.x,e.y,e.z),_=new n.Vector3(g.x,g.y,g.z);if(1===e.bondOrder[h]||b){if(!g.capDrawn&&g.bonds.length<4&&(p=2),f!=y?(i=(new n.Vector3).addVectors(x,_).multiplyScalar(.5),d(r,x,i,l,f,c,0),d(r,i,_,l,y,0,p)):d(r,x,_,l,f,c,p),e.clickable||g.clickable){if(i=(new n.Vector3).addVectors(x,_).multiplyScalar(.5),e.clickable||e.hoverable){var S=new n.Cylinder(x,i,l),C=new n.Sphere(x,l);e.intersectionShape.cylinder.push(S),e.intersectionShape.sphere.push(C)}if(g.clickable||g.hoverable){var k=new n.Cylinder(_,i,l),E=new n.Sphere(_,l);g.intersectionShape.cylinder.push(k),g.intersectionShape.sphere.push(E)}}}else if(e.bondOrder[h]>1){var M=0,T=0;l!=s&&(M=2,T=2);var O=_.clone(),P=null;O.sub(x);var D,N,R,F,L,P=A(e,g,h);if(2==e.bondOrder[h]){var D=l/2.5,P=A(e,g,h);if(P.multiplyScalar(1.5*D),N=x.clone(),N.add(P),R=x.clone(),R.sub(P),F=N.clone(),F.add(O),L=R.clone(),L.add(O),f!=y?(i=(new n.Vector3).addVectors(N,F).multiplyScalar(.5),a=(new n.Vector3).addVectors(R,L).multiplyScalar(.5),d(r,N,i,D,f,M,0),d(r,i,F,D,y,0,T),d(r,R,a,D,f,M,0),d(r,a,L,D,y,0,T)):(d(r,N,F,D,f,M,T),d(r,R,L,D,f,M,T)),e.clickable||g.clickable){if(i=(new n.Vector3).addVectors(N,F).multiplyScalar(.5),a=(new n.Vector3).addVectors(R,L).multiplyScalar(.5),e.clickable||e.hoverable){var z=new n.Cylinder(N,i,D),B=new n.Cylinder(R,a,D);e.intersectionShape.cylinder.push(z),e.intersectionShape.cylinder.push(B)}if(g.clickable||g.hoverable){var q=new n.Cylinder(F,i,D),V=new n.Cylinder(L,a,D);g.intersectionShape.cylinder.push(q),g.intersectionShape.cylinder.push(V)}}}else if(3==e.bondOrder[h]&&(D=l/4,P.cross(O),P.normalize(),P.multiplyScalar(3*D),N=x.clone(),N.add(P),R=x.clone(),R.sub(P),F=N.clone(),F.add(O),L=R.clone(),L.add(O),f!=y?(i=(new n.Vector3).addVectors(N,F).multiplyScalar(.5),a=(new n.Vector3).addVectors(R,L).multiplyScalar(.5),mp3=(new n.Vector3).addVectors(x,_).multiplyScalar(.5),d(r,N,i,D,f,M,0),d(r,i,F,D,y,0,T),d(r,x,mp3,D,f,c,0),d(r,mp3,_,D,y,0,p),d(r,R,a,D,f,M,0),d(r,a,L,D,y,0,T)):(d(r,N,F,D,f,M,T),d(r,x,_,D,f,c,p),d(r,R,L,D,f,M,T)),e.clickable||g.clickable)){if(i=(new n.Vector3).addVectors(N,F).multiplyScalar(.5),a=(new n.Vector3).addVectors(R,L).multiplyScalar(.5),mp3=(new n.Vector3).addVectors(x,_).multiplyScalar(.5),e.clickable||e.hoverable){var z=new n.Cylinder(N.clone(),i.clone(),D),B=new n.Cylinder(R.clone(),a.clone(),D),U=new n.Cylinder(x.clone(),mp3.clone(),D);e.intersectionShape.cylinder.push(z),e.intersectionShape.cylinder.push(B),e.intersectionShape.cylinder.push(U)}if(g.clickable||g.hoverable){var q=new n.Cylinder(F.clone(),i.clone(),D),V=new n.Cylinder(L.clone(),a.clone(),D),H=new n.Cylinder(_.clone(),mp3.clone(),D);g.intersectionShape.cylinder.push(q),g.intersectionShape.cylinder.push(V),g.intersectionShape.cylinder.push(H)}}}}}for(var G=!1,W=0,Z=!1,h=0;h<e.bonds.length;h++){var b=u;if(e.bondStyles&&e.bondStyles[h]){var w=e.bondStyles[h];w.singleBond&&(b=!0),w.radius&&w.radius!=s&&(Z=!0)}(b||1==e.bondOrder[h])&&W++}if(Z?W>0&&(G=!0):0==W&&e.bonds.length>0&&(G=!0),G){e.style;l=s,r.imposter?I(r.sphereGeometry,e,l,f):n.GLDraw.drawSphere(r,e,l,f)}}}},N=function(e,t){t=t||{};var r=new n.Object3D,o=[],i={},a={},s=T,l=null,u=null;t.supportsImposters?(s=P,l=new n.Geometry(!0),l.imposter=!0,u=new n.Geometry(!0,!0),u.imposter=!0,u.sphereGeometry=l,u.drawnCaps={}):t.supportsAIA?(s=O,l=new n.Geometry(!1,!0,!0),l.instanced=!0,u=new n.Geometry(!0)):(l=new n.Geometry(!0),u=new n.Geometry(!0));var c,p,f,d,h={},m=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(c=0,f=e.length;c<f;c++){var g=e[c];if(g&&g.style){(g.clickable||g.hoverable)&&void 0===g.intersectionShape&&(g.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),d={line:void 0,cross:void 0,stick:void 0,sphere:void 0};for(p in d)g.style[p]?g.style[p].opacity?d[p]=parseFloat(g.style[p].opacity):d[p]=1:d[p]=void 0,h[p]?void 0!=d[p]&&h[p]!=d[p]&&(console.log("Warning: "+p+" opacity is ambiguous"),h[p]=1):h[p]=d[p];s(g,l),k(g,a),M(g,e,i),D(g,e,u),void 0===g.style.cartoon||g.style.cartoon.hidden||("spectrum"!==g.style.cartoon.color||"number"!=typeof g.resi||g.hetflag||(g.resi<m[0]&&(m[0]=g.resi),g.resi>m[1]&&(m[1]=g.resi)),o.push(g))}}if(o.length>0&&n.drawCartoon(r,o,m),l&&l.vertices>0){l.initTypedArrays();var v=null;if(l.imposter)v=new n.SphereImposterMaterial({ambient:0,vertexColors:!0,reflectivity:0});else if(l.instanced){var y=new n.Geometry(!0);n.GLDraw.drawSphere(y,{x:0,y:0,z:0},1,new n.Color(.5,.5,.5)),y.initTypedArrays(),v=new n.InstancedMaterial({sphereMaterial:new n.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0}),sphere:y})}else var v=new n.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0});h.sphere<1&&h.sphere>=0&&(v.transparent=!0,v.opacity=h.sphere);var y=new n.Mesh(l,v);r.add(y)}if(u.vertices>0)if(u.imposter){var w=new n.StickImposterMaterial({ambient:0,vertexColors:!0,reflectivity:0});u.initTypedArrays();var _=new n.Mesh(u,w);r.add(_)}else{var S=new n.MeshLambertMaterial({vertexColors:!0,ambient:0,reflectivity:0});h.stick<1&&h.stick>=0&&(S.transparent=!0,S.opacity=h.stick),u.initTypedArrays(),S.wireframe&&u.setUpWireframe();var _=new n.Mesh(u,S);r.add(_)}for(c in i)if(i.hasOwnProperty(c)){var C=c,A=new n.LineBasicMaterial({linewidth:C,vertexColors:!0});h.line<1&&h.line>=0&&(A.transparent=!0,A.opacity=h.line),i[c].initTypedArrays();var E=new n.Line(i[c],A,n.LinePieces);r.add(E)}for(c in a)if(a.hasOwnProperty(c)){var C=c,I=new n.LineBasicMaterial({linewidth:C,vertexColors:!0});h.cross<1&&h.cross>=0&&(I.transparent=!0,I.opacity=h.cross),a[c].initTypedArrays();var j=new n.Line(a[c],I,n.LinePieces);r.add(j)}if(x&&b.symmetries&&b.symmetries.length>0){var N,R=new n.Object3D;for(N=0;N<b.symmetries.length;N++){var F=new n.Object3D;F=r.clone(),F.matrix.copy(b.symmetries[N]),F.matrixAutoUpdate=!1,R.add(F)}return R}return r};this.getCrystData=function(){return b.cryst?b.cryst:null},this.getSymmetries=function(){return void 0===b.symmetries&&(b.symmetries=[w]),b.symmetries},this.setSymmetries=function(e){b.symmetries=void 0===e?[w]:e},this.getID=function(){return h},this.getFrames=function(){return d},this.setFrame=function(e){0!=d.length&&(f=e>=0&&e<d.length?d[e]:d[d.length-1],g=null)},this.addFrame=function(e){d.push(e)},this.vibrate=function(e,t){var t=t||1,e=e||10;e--;for(var r=1;r<=e;r++){for(var o=[],i=0;i<f.length;i++){var a=new n.Vector3(n.getAtomProperty(f[i],"dx"),n.getAtomProperty(f[i],"dy"),n.getAtomProperty(f[i],"dz")),s=new n.Vector3(f[i].x,f[i].y,f[i].z);a.multiplyScalar(r*t/e),s.add(a);var l={};for(var u in f[i])l[u]=f[i][u];l.x=s.x,l.y=s.y,l.z=s.z,o.push(l)}d.push(o)}d.unshift(f)},this.setAtomDefaults=function(e){for(var n=0;n<e.length;n++){var r=e[n];r&&(r.style=r.style||t,r.color=r.color||S[r.elem]||_,r.model=h,(r.clickable||r.hoverable)&&(r.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}))}},this.addMolData=function(e,t,r){r=r||{};var o=n.GLModel.parseMolData(e,t,r);x=!r.duplicateAssemblyAtoms;var i=o.modelData;if(i&&(b=Array.isArray(i)?i[0]:i),0==d.length){for(var a=0;a<o.length;a++)0!=o[a].length&&d.push(o[a]);d[0]&&(f=d[0])}else if(r.frames)for(var a=0;a<o.length;a++)d.push(o[a]);else for(var a=0;a<o.length;a++)this.addAtoms(o[a]);for(var a=0;a<d.length;a++)this.setAtomDefaults(d[a],h);r.vibrate&&r.vibrate.frames&&r.vibrate.amplitude&&this.vibrate(r.vibrate.frames,r.vibrate.amplitude),r.style&&this.setStyle({},r.style)},this.setDontDuplicateAtoms=function(e){x=e},this.setModelData=function(e){b=e},this.atomIsSelected=function(e,t){if(void 0===t)return!0;var n=!!t.invert,r=!0;for(var o in t)if("and"==o||"or"==o||"not"==o){if("not"==o){if(this.atomIsSelected(e,t[o])){r=!1;break}}else if("and"==o){for(var i=t[o],a=0;a<i.length;a++)if(!this.atomIsSelected(e,i[a])){r=!1;break}}else if("or"==o){for(var s=t[o],l=!0,a=0;a<s.length;a++){if(this.atomIsSelected(e,s[a])){l=!0;break}l=!1}r=l}}else if("predicate"===o){if(!t.predicate(e)){r=!1;break}}else if("properties"==o&&e[o])for(var u in t.properties){if(void 0===e.properties[u]){r=!1;break}if(e.properties[u]!=t.properties[u]){r=!1;break}}else if(t.hasOwnProperty(o)&&"props"!=o&&"invert"!=o&&"model"!=o&&"byres"!=o&&"expand"!=o&&"within"!=o&&"and"!=o&&"or"!=o&&"not"!=o){if(void 0===e[o]){r=!1;break}var c=!1;if("bonds"===o){var p=t[o];if(p!=e.bonds.length){r=!1;break}}else if($.isArray(t[o])){for(var f=t[o],a=0;a<f.length;a++)if(e[o]==f[a]){c=!0;break}if(!c){r=!1;break}}else{var p=t[o];if(e[o]!=p){r=!1;break}}}return n?!r:r},this.selectedAtoms=function(e,t){var n=[];e=e||{},t||(t=f);for(var r=t.length,o=0;o<r;o++){var i=t[o];i&&this.atomIsSelected(i,e)&&n.push(i)}if(e.hasOwnProperty("expand"))for(var a=F(n,parseFloat(e.expand)),s=n.length,o=0;o<a.length;o++)for(var l=0;l<s;l++){var u=R(a[o],n[l]),c=Math.pow(e.expand,2);u<c&&u>0&&n.push(a[o])}if(e.hasOwnProperty("within")&&e.within.hasOwnProperty("sel")&&e.within.hasOwnProperty("distance")){for(var p=this.selectedAtoms(e.within.sel,f),d={},o=0;o<p.length;o++)for(var l=0;l<n.length;l++){var u=R(p[o],n[l]),c=Math.pow(parseFloat(e.within.distance),2);u<c&&u>0&&(d[l]=1)}var h=[];if(e.within.invert)for(var l=0;l<n.length;l++)d[l]||h.push(n[l]);else for(l in d)h.push(n[l]);n=h}if(e.hasOwnProperty("byres"))for(var m={},g=[],v=[],o=0;o<n.length;o++){var i=n[o],y=i.chain,b=i.resi;if(void 0===m[y]&&(m[y]={}),i.hasOwnProperty("resi")&&void 0===m[y][b])for(m[y][b]=!0,v.push(i);v.length>0;)if(i=v.pop(),y=i.chain,b=i.resi,void 0===g[i.index]){g[i.index]=!0;for(var l=0;l<i.bonds.length;l++){var w=f[i.bonds[l]];void 0===g[w.index]&&w.hasOwnProperty("resi")&&w.chain==y&&w.resi==b&&(v.push(w),n.push(w))}}}return n};var R=function(e,t){var n=t.x-e.x,r=t.y-e.y,o=t.z-e.z;return Math.pow(n,2)+Math.pow(r,2)+Math.pow(o,2)},F=function(e,t){if(t<=0)return e;for(var r=n.getExtent(e),o=[[],[],[]],i=0;i<3;i++)o[0][i]=r[0][i]-t,o[1][i]=r[1][i]+t,o[2][i]=r[2][i];for(var a=[],i=0;i<f.length;i++){var s=f[i].x,l=f[i].y,u=f[i].z;s>=o[0][0]&&s<=o[1][0]&&l>=o[0][1]&&l<=o[1][1]&&u>=o[0][2]&&u<=o[1][2]&&(s>=r[0][0]&&s<=r[1][0]&&l>=r[0][1]&&l<=r[1][1]&&u>=r[0][2]&&u<=r[1][2]||a.push(f[i]))}return a};this.addAtoms=function(e){g=null;var n,r=f.length,o=[];for(n=0;n<e.length;n++)void 0===e[n].index&&(e[n].index=n),void 0===e[n].serial&&(e[n].serial=n),o[e[n].index]=r+n;for(n=0;n<e.length;n++){var i=e[n],a=o[i.index],s=$.extend(!1,{},i);s.index=a,s.bonds=[],s.bondOrder=[],s.model=h,s.style=s.style||t,void 0===s.color&&(s.color=S[s.elem]||_);for(var l=i.bonds?i.bonds.length:0,u=0;u<l;u++){var c=o[i.bonds[u]];void 0!==c&&(s.bonds.push(c),s.bondOrder.push(i.bondOrder?i.bondOrder[u]:1))}f.push(s)}},this.removeAtoms=function(e){g=null;var t,n=[];for(t=0;t<e.length;t++)n[e[t].index]=!0;var r=[];for(t=0;t<f.length;t++){var o=f[t];n[o.index]||r.push(o)}f=[],this.addAtoms(r)},this.setStyle=function(e,t,n){void 0===t&&void 0===n&&(t=e,e={});var r;for(r in e)-1===l.indexOf(r)&&console.log("Unknown selector "+r);for(r in t)-1===u.indexOf(r)&&console.log("Unknown style "+r);var o=!1,i=function(i){for(var s=a.selectedAtoms(e,i),l=0;l<i.length;l++)i[l]&&(i[l].capDrawn=!1);for(var l=0;l<s.length;l++){o=!0,(s[l].clickable||s[l].hoverable)&&(s[l].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),n||(s[l].style={});for(r in t)if(t.hasOwnProperty(r)){s[l].style[r]=s[l].style[r]||{};for(var u in t[r])s[l].style[r][u]=t[r][u]}}},a=this;i(f);for(var s=0;s<d.length;s++)i(d[s]);o&&(g=null)},this.setClickable=function(e,t,n){var r;for(r in e)-1===l.indexOf(r)&&console.log("Unknown selector "+r);if(t=!!t,n&&"function"!=typeof n)return void console.log("Callback is not a function");var o,i=this.selectedAtoms(e,f),a=i.length;for(o=0;o<a;o++)i[o].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},i[o].clickable=t,n&&(i[o].callback=n);a>0&&(g=null)},this.setHoverable=function(e,t,n,r){var o;for(o in e)-1===l.indexOf(o)&&console.log("Unknown selector "+o);if(t=!!t,n&&"function"!=typeof n)return void console.log("Hover_callback is not a function");if(r&&"function"!=typeof r)return void console.log("Unhover_callback is not a function");var i,a=this.selectedAtoms(e,f),s=a.length;for(i=0;i<s;i++)a[i].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},a[i].hoverable=t,n&&(a[i].hover_callback=n),r&&(a[i].unhover_callback=r);s>0&&(g=null)},this.setColorByElement=function(e,t){if(null===g||!c(t,y)){y=t;var n=this.selectedAtoms(e,n);n.length>0&&(g=null);for(var r=0;r<n.length;r++){var o=n[r];void 0!==t[o.elem]&&(o.color=t[o.elem])}}},this.setColorByProperty=function(e,t,r,o){var i,a,s=this.selectedAtoms(e,s);for(y=null,s.length>0&&(g=null),void 0!==n.Gradient.builtinGradients[r]&&(r=new n.Gradient.builtinGradients[r]),o||(o=r.range()),o||(o=n.getPropertyRange(s,t)),i=0;i<s.length;i++){a=s[i];null!=n.getAtomProperty(a,t)&&(a.color=r.valueToHex(parseFloat(a.properties[t]),o))}},this.setColorByFunction=function(e,t){var n=this.selectedAtoms(e,n);if("function"==typeof t)for(y=null,n.length>0&&(g=null),i=0;i<n.length;i++)a=n[i],a.color=t(a)},this.toCDObject=function(e){var t={a:[],b:[]};e&&(t.s=[]);for(var n=0;n<f.length;n++){var r={},o=f[n];if(r.x=o.x,r.y=o.y,r.z=o.z,"C"!=o.elem&&(r.l=o.elem),e){for(var i=0;i<t.s.length&&JSON.stringify(o.style)!==JSON.stringify(t.s[i]);)i++;i===t.s.length&&t.s.push(o.style),0!==i&&(r.s=i)}t.a.push(r);for(var a=0;a<o.bonds.length;a++){var s=n,l=o.bonds[a];if(!(s>=l)){var u={b:s,e:l},c=o.bondOrder[a];1!=c&&(u.o=c),t.b.push(u)}}}return t},this.globj=function(e,t){new Date;if(null===g){g=N(f,t);new Date;v&&(e.remove(v),v=null),v=g.clone(),m&&(v.setVisible(!1),g.setVisible(!1)),e.add(v)}},this.removegl=function(e){v&&(void 0!==v.geometry&&v.geometry.dispose(),void 0!==v.material&&v.material.dispose(),e.remove(v),v=null),g=null},this.hide=function(){m=!0,v&&v.setVisible(!1),g&&g.setVisible(!1)},this.show=function(){m=!1,v&&v.setVisible(!0),g&&g.setVisible(!0)},this.addResLabels=function(e,t,r){for(var o=this.selectedAtoms(e,o),i={},a=0;a<o.length;a++){var s=o[a],l=s.chain,u=s.resn,c=s.resi,p=u+""+c;i[l]||(i[l]={}),i[l][p]||(i[l][p]=[]),i[l][p].push(s)}var f=$.extend(!0,{},r);for(var l in i)if(i.hasOwnProperty(l)){var d=i[l];for(var p in d)if(d.hasOwnProperty(p)){for(var o=d[p],h=new n.Vector3(0,0,0),a=0;a<o.length;a++){var s=o[a];h.x+=s.x,h.y+=s.y,h.z+=s.z}h.divideScalar(o.length),f.position=h,t.addLabel(p,f)}}},this.setCoordinates=function(t,n){if(n=n||"",!t)return[];if(/\.gz$/.test(n)){n=n.replace(/\.gz$/,"");try{t=pako.inflate(t,{to:"string"})}catch(e){console.log(e)}}if("mdcrd"==n||"inpcrd"==n||"pdb"==n){d=[];for(var r=f.length,o=e.parseCrd(t,n),i=0;i<o.length;){for(var a=[],s=0;s<r;s++){var l={};for(var u in f[s])l[u]=f[s][u];a[s]=l,a[s].x=o[i++],a[s].y=o[i++],a[s].z=o[i++]}d.push(a)}return f=d[0],d}return[]},this.addAtomSpecs=function(e){for(var t=0;t<e.length;t++)-1==l.indexOf(e[t])&&l.push(e[t])}}var t={line:{}},r=1,o={H:1.2,Li:1.82,LI:1.82,Na:2.27,NA:2.27,K:2.75,C:1.7,N:1.55,O:1.52,F:1.47,P:1.8,S:1.8,CL:1.75,Cl:1.75,BR:1.85,Br:1.85,SE:1.9,Se:1.9,ZN:1.39,Zn:1.39,CU:1.4,Cu:1.4,NI:1.63,Ni:1.63},s=["resn","x","y","z","color","surfaceColor","elem","hetflag","chain","resi","icode","rescode","serial","atom","bonds","ss","singleBonds","bondOrder","properties","b","pdbline","clickable","callback","invert","reflectivity","altLoc"],l=s.concat(["model","bonds","predicate","invert","byres","expand","within","and","or","not"]),u=["line","cross","stick","sphere","cartoon","colorfunc"],c=function(e,t){return e&&t?JSON.stringify(e)==JSON.stringify(t):e==t};return e.parseCrd=function(e,t){var n=[],r=0;if("pdb"==t){for(var o=e.indexOf("\nATOM");-1!=o;){for(;"\nATOM"==e.slice(o,o+5)||"\nHETATM"==e.slice(o,o+7);)n[r++]=parseFloat(e.slice(o+31,o+39)),n[r++]=parseFloat(e.slice(o+39,o+47)),n[r++]=parseFloat(e.slice(o+47,o+55)),o=e.indexOf("\n",o+54),"\nTER"==e.slice(o,o+4)&&(o=e.indexOf("\n",o+5));o=e.indexOf("\nATOM",o)}return n}var o=e.indexOf("\n");return"inpcrd"==t&&(o=e.indexOf("\n",o+1)),e=e.slice(o+1),n=e.match(/\S+/g).map(parseFloat)},e.parseMolData=function(e,t,r){if(t=t||"",!e)return[];if(/\.gz$/.test(t)){t=t.replace(/\.gz$/,"");try{e=pako.inflate(e,{to:"string"})}catch(e){console.log(e)}}return void 0===n.Parsers[t]&&(t=t.split(".").pop(),void 0===n.Parsers[t]&&(console.log("Unknown format: "+t),t=e.match(/^@<TRIPOS>MOLECULE/gm)?"mol2":e.match(/^HETATM/gm)||e.match(/^ATOM/gm)?"pdb":e.match(/^.*\n.*\n.\s*(\d+)\s+(\d+)/gm)?"sdf":e.match(/^%VERSION\s+\VERSION_STAMP/gm)?"prmtop":"xyz",console.log("Best guess: "+t))),(0,n.Parsers[t])(e,r)},e.setAtomDefaults=function(e,n){for(var r=0;r<e.length;r++){var o=e[r];o&&(o.style=o.style||t,o.color=o.color||ElementColors[o.elem]||defaultColor,o.model=n,(o.clickable||o.hoverable)&&(o.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}))}},e}(),n.GLShape=function(){function e(e){e=e||{},n.ShapeIDCount++,this.boundingSphere=new n.Sphere,this.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},u(this,e);var a=[],c=null,p=null,f=new n.Geometry(!0),d=new n.Geometry(!0);this.updateStyle=function(t){for(var n in t)e[n]=t[n];u(this,e)},this.addCustom=function(e){e.vertexArr=e.vertexArr||[],e.faceArr=e.faceArr||[],e.normalArr=e.normalArr||[];f.geometryGroups.length;s(this,f,e)},this.addSphere=function(e){e.center=e.center||{x:0,y:0,z:0},e.radius=e.radius?n.Math.clamp(e.radius,0,1/0):1.5,e.color=n.CC.color(e.color),this.intersectionShape.sphere.push(new n.Sphere(e.center,e.radius)),n.GLDraw.drawSphere(f,e.center,e.radius,e.color),a.push({centroid:new n.Vector3(e.center.x,e.center.y,e.center.z)});var t=f.updateGeoGroup(0);l(this.boundingSphere,a,t.vertexArray)},this.addCylinder=function(e){e.start=e.start||{},e.end=e.end||{};var t=new n.Vector3(e.start.x||0,e.start.y||0,e.start.z||0),r=new n.Vector3(e.end.x,e.end.y||0,e.end.z||0);void 0===r.x&&(r.x=3);var o=e.radius||.1,i=n.CC.color(e.color);this.intersectionShape.cylinder.push(new n.Cylinder(t,r,o)),n.GLDraw.drawCylinder(f,t,r,o,i,e.fromCap,e.toCap);var s=new n.Vector3;a.push({centroid:s.addVectors(t,r).multiplyScalar(.5)});var u=f.updateGeoGroup(0);l(this.boundingSphere,a,u.vertexArray)},this.addDashedCylinder=function(e){console.log("addDashedCylinder"),e.start=e.start||{},e.end=e.end||{},e.dashLength=e.dashLength||.25,e.gapLength=e.gapLength||.25;var t=new n.Vector3(e.start.x||0,e.start.y||0,e.start.z||0),r=new n.Vector3(e.end.x,e.end.y||0,e.end.z||0);void 0===r.x&&(r.x=3);for(var o=e.radius||.1,i=n.CC.color(e.color),s=Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2)+Math.pow(t.z-r.z,2)),u=s/(e.gapLength+e.dashLength),c=new n.Vector3(e.start.x||0,e.start.y||0,e.start.z||0),p=new n.Vector3(e.end.x,e.end.y||0,e.end.z||0),d=new n.Vector3((r.x-t.x)/(s/e.gapLength),(r.y-t.y)/(s/e.gapLength),(r.z-t.z)/(s/e.gapLength)),h=new n.Vector3((r.x-t.x)/(s/e.dashLength),(r.y-t.y)/(s/e.dashLength),(r.z-t.z)/(s/e.dashLength)),m=0;m<u;m++)p=new n.Vector3(c.x+h.x,c.y+h.y,c.z+h.z),this.intersectionShape.cylinder.push(new n.Cylinder(c,p,o)),n.GLDraw.drawCylinder(f,c,p,o,i,e.fromCap,e.toCap),c=new n.Vector3(p.x+d.x,p.y+d.y,p.z+d.z);var g=new n.Vector3;a.push({centroid:g.addVectors(t,r).multiplyScalar(.5)});var v=f.updateGeoGroup(0);l(this.boundingSphere,a,v.vertexArray)},this.addLine=function(e){e.start=e.start||{},e.end=e.end||{};var t=new n.Vector3(e.start.x||0,e.start.y||0,e.start.z||0),r=new n.Vector3(e.end.x,e.end.y||0,e.end.z||0);void 0===r.x&&(r.x=3);var o=f.updateGeoGroup(2),i=o.vertices,a=3*i,s=o.vertexArray;s[a]=t.x,s[a+1]=t.y,s[a+2]=t.z,s[a+3]=r.x,s[a+4]=r.y,s[a+5]=r.z,o.vertices+=2;var l=o.lineArray,u=o.lineidx;l[u]=i,l[u+1]=i+1,o.lineidx+=2},this.addArrow=function(e){if(e.start=e.start||{},e.end=e.end||{},e.start=new n.Vector3(e.start.x||0,e.start.y||0,e.start.z||0),e.dir instanceof n.Vector3&&e.length instanceof number){var t=e.dir.clone().multiplyScalar(e.length).add(start);e.end=t}else e.end=new n.Vector3(e.end.x,e.end.y||0,e.end.z||0),void 0===e.end.x&&(e.end.x=3);e.radius=e.radius||.1,e.radiusRatio=e.radiusRatio||1.618034,e.mid=0<e.mid&&e.mid<1?e.mid:.618034,i(this,f,e);var r=new n.Vector3;a.push({centroid:r.addVectors(e.start,e.end).multiplyScalar(.5)});var o=f.updateGeoGroup(0);l(this.boundingSphere,a,o.vertexArray)},this.addIsosurface=function(e,r,o){var i,a,l=void 0!==r.isoval&&"number"==typeof r.isoval?r.isoval:0,u=!!r.voxel,c=void 0===r.smoothness?1:r.smoothness,p=e.size.x,d=e.size.y,m=e.size.z,g=new Int16Array(p*d*m),v=e.data;for(i=0,a=g.length;i<a;++i)g[i]=-1;var y=new Uint8Array(p*d*m);for(i=0,a=v.length;i<a;++i){(l>=0?v[i]-l:l-v[i])>0&&(y[i]|=t)}var b=[],w=[];n.MarchingCube.march(y,b,w,{fulltable:!0,voxel:u,unitCube:e.unit,origin:e.origin,matrix:e.matrix,nX:p,nY:d,nZ:m}),!u&&c>0&&n.MarchingCube.laplacianSmooth(c,b,w);var x=[],_=[],S=[];if(void 0!==r.selectedRegion){for(var C=r.selectedRegion[0],k=r.selectedRegion[0],A=r.selectedRegion[0],E=r.selectedRegion[0],M=r.selectedRegion[0],T=r.selectedRegion[0],i=0;i<r.selectedRegion.length;i++)r.selectedRegion[i].x>C.x?C=r.selectedRegion[i]:r.selectedRegion[i].x<E.x&&(E=r.selectedRegion[i]),r.selectedRegion[i].y>k.y?k=r.selectedRegion[i]:r.selectedRegion[i].y<M.y&&(M=r.selectedRegion[i]),r.selectedRegion[i].z>A.z?A=r.selectedRegion[i]:r.selectedRegion[i].z<T.z&&(T=r.selectedRegion[i]);var O=r.radius;C.x=C.x+O,E.x=E.x-O,M.y=M.y-O,k.y=k.y+O,T.z=T.z-O,A.z=A.z+O;for(var i=0;i<b.length;i++)b[i].x>E.x&&b[i].x<C.x&&b[i].y>M.y&&b[i].y<k.y&&b[i].z>T.z&&b[i].z<A.z&&h(b[i],r.selectedRegion,r.selectedOffset,r.radius)?(x.push(_.length),_.push(b[i])):x.push(-1);for(var i=0;i+2<w.length;i+=3)-1!==x[w[i]]&&-1!==x[w[i+1]]&&-1!==x[w[i+2]]&&(S.push(w[i]-(w[i]-x[w[i]])),S.push(w[i+1]-(w[i+1]-x[w[i+1]])),S.push(w[i+2]-(w[i+2]-x[w[i+2]])));b=_,w=S}s(this,f,{vertexArr:b,faceArr:w,normalArr:[],clickable:r.clickable,hoverable:r.hoverable}),this.updateStyle(r);for(var I=new n.Vector3(e.origin.x,e.origin.y,e.origin.z),P=new n.Vector3(e.size.x*e.unit.x,e.size.y*e.unit.y,e.size.z*e.unit.z),j=new n.Vector3(0,0,0),D=I.clone(),N=I.clone().add(P),i=0;i<b.length;i++)j.add(b[i]),D.max(b[i]),N.min(b[i]);j.divideScalar(b.length);var R=j.distanceTo(N),F=j.distanceTo(D);this.boundingSphere.center=j,this.boundingSphere.radius=Math.max(R,F),"function"==typeof o&&o()};var h=function(e,t,n,r){for(var o=0;o<t.length;o++)if(m(t[o],e)<=r)return!0;return!1},m=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)+Math.pow(e.z-t.z,2))};this.addVolumetricData=function(e,t,r){var e=new n.VolumeData(e,t);this.addIsosurface(e,r)},this.globj=function(e){if(p&&(e.remove(p),p=null),!this.hidden){r(f),f.initTypedArrays(),void 0!==this.color&&o(f,this.color),c=new n.Object3D;var t=null;if(this.side==n.DoubleSide)var t=new n.MeshDoubleLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:this.opacity<1,opacity:this.opacity,wireframeLinewidth:this.linewidth});else var t=new n.MeshLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:this.opacity<1,opacity:this.opacity,wireframeLinewidth:this.linewidth});var i=new n.Mesh(f,t);c.add(i);var a=new n.LineBasicMaterial({linewidth:this.linewidth,color:this.color}),s=new n.Line(d,a,n.LinePieces);c.add(s),p=c.clone(),e.add(p)}},this.removegl=function(e){p&&(void 0!==p.geometry&&p.geometry.dispose(),void 0!==p.material&&p.material.dispose(),e.remove(p),p=null),c=null}}var t=2,r=function(e){var t=e.updateGeoGroup(0);t.vertices>0&&t.truncateArrayBuffers(!0,!0)},o=function(e,t){t||n.CC.color(t);e.colorsNeedUpdate=!0;var r,o,i;t.constructor!==Array&&(r=t.r,o=t.g,i=t.b);for(var a in e.geometryGroups)for(var s=e.geometryGroups[a],l=s.colorArray,u=0,c=s.vertices;u<c;++u){if(t.constructor===Array){var p=t[u];r=p.r,o=p.g,i=p.b}l[3*u]=r,l[3*u+1]=o,l[3*u+2]=i}},i=function(e,t,r){var o=r.start,i=r.end,a=r.radius,s=r.radiusRatio,l=r.mid;if(o&&i){var u=t.updateGeoGroup(51),c=i.clone();c.sub(o).multiplyScalar(l);var p=o.clone().add(c),f=c.clone().negate();e.intersectionShape.cylinder.push(new n.Cylinder(o.clone(),p.clone(),a)),e.intersectionShape.sphere.push(new n.Sphere(o.clone(),a));var d=[];d[0]=c.clone(),Math.abs(d[0].x)>1e-4?d[0].y+=1:d[0].x+=1,d[0].cross(c),d[0].normalize(),d[0]=d[0],d[4]=d[0].clone(),d[4].crossVectors(d[0],c),d[4].normalize(),d[8]=d[0].clone().negate(),d[12]=d[4].clone().negate(),d[2]=d[0].clone().add(d[4]).normalize(),d[6]=d[4].clone().add(d[8]).normalize(),d[10]=d[8].clone().add(d[12]).normalize(),d[14]=d[12].clone().add(d[0]).normalize(),d[1]=d[0].clone().add(d[2]).normalize(),d[3]=d[2].clone().add(d[4]).normalize(),d[5]=d[4].clone().add(d[6]).normalize(),d[7]=d[6].clone().add(d[8]).normalize(),d[9]=d[8].clone().add(d[10]).normalize(),d[11]=d[10].clone().add(d[12]).normalize(),d[13]=d[12].clone().add(d[14]).normalize(),d[15]=d[14].clone().add(d[0]).normalize();var h,m,g,v=u.vertices,y=u.vertexArray,b=(u.colorArray,u.faceArray),w=u.normalArray,x=u.lineArray;for(m=0,g=d.length;m<g;++m){h=3*(v+3*m);var _=d[m].clone().multiplyScalar(a).add(o),S=d[m].clone().multiplyScalar(a).add(p),C=d[m].clone().multiplyScalar(a*s).add(p);if(y[h]=_.x,y[h+1]=_.y,y[h+2]=_.z,y[h+3]=S.x,y[h+4]=S.y,y[h+5]=S.z,y[h+6]=C.x,y[h+7]=C.y,y[h+8]=C.z,m>0){var k=y[h-3],A=y[h-2],E=y[h-1],M=new n.Vector3(k,A,E),T=i.clone(),O=p.clone(),I=new n.Vector3(C.x,C.y,C.z);e.intersectionShape.triangle.push(new n.Triangle(I,T,M)),e.intersectionShape.triangle.push(new n.Triangle(M.clone(),O,I.clone()))}}u.vertices+=48,h=3*u.vertices,y[h]=o.x,y[h+1]=o.y,y[h+2]=o.z,y[h+3]=p.x,y[h+4]=p.y,y[h+5]=p.z,y[h+6]=i.x,y[h+7]=i.y,y[h+8]=i.z,u.vertices+=3;var P,j,D,N,R,F,L,z,B,q,V,U,H,G,W,Z,Y,X,K,Q=u.vertices-3,J=u.vertices-2,$=u.vertices-1,ee=3*Q,te=3*J,ne=3*$;for(m=0,g=d.length-1;m<g;++m){var re=v+3*m;h=3*re,j=u.faceidx,D=u.lineidx,N=re,q=3*N,R=re+1,V=3*R,F=re+2,U=3*F,L=re+4,H=3*L,z=re+5,G=3*z,B=re+3,W=3*B,[d[m],d[m],d[m+1],d[m+1]],Z=Y=d[m],X=K=d[m+1],w[q]=Z.x,w[V]=Y.x,w[W]=K.x,w[q+1]=Z.y,w[V+1]=Y.y,w[W+1]=K.y,w[q+2]=Z.z,w[V+2]=Y.z,w[W+2]=K.z,w[V]=Y.x,w[H]=X.x,w[W]=K.x,w[V+1]=Y.y,w[H+1]=X.y,w[W+1]=K.y,w[V+2]=Y.z,w[H+2]=X.z,w[W+2]=K.z,w[U]=Y.x,w[G]=X.x,w[U+1]=Y.y,w[G+1]=X.y,w[U+2]=Y.z,w[G+2]=X.z,b[j]=N,b[j+1]=R,b[j+2]=B,b[j+3]=R,b[j+4]=L,b[j+5]=B,b[j+6]=N,b[j+7]=B,b[j+8]=Q,b[j+9]=F,b[j+10]=J,b[j+11]=z,b[j+12]=F,b[j+13]=$,b[j+14]=z,x[D]=N,x[D+1]=R,x[D+2]=N,x[D+3]=B,x[D+4]=L,x[D+5]=B,x[D+6]=N,x[D+7]=B,x[D+8]=F,x[D+9]=R,x[D+10]=F,x[D+11]=z,x[D+12]=L,x[D+13]=z,x[D+14]=F,x[D+15]=$,x[D+16]=F,x[D+17]=z,x[D+18]=$,x[D+19]=z,u.faceidx+=15,u.lineidx+=20}P=[v+45,v+46,v+1,v,v+47,v+2],[d[15],d[15],d[0],d[0]],j=u.faceidx,D=u.lineidx,N=P[0],q=3*N,R=P[1],V=3*R,F=P[4],U=3*F,L=P[2],H=3*L,z=P[5],G=3*z,B=P[3],W=3*B,Z=Y=d[15],X=K=d[0],w[q]=Z.x,w[V]=Y.x,w[W]=K.x,w[q+1]=Z.y,w[V+1]=Y.y,w[W+1]=K.y,w[q+2]=Z.z,w[V+2]=Y.z,w[W+2]=K.z,w[V]=Y.x,w[H]=X.x,w[W]=K.x,w[V+1]=Y.y,w[H+1]=X.y,w[W+1]=K.y,w[V+2]=Y.z,w[H+2]=X.z,w[W+2]=K.z,w[U]=Y.x,w[G]=X.x,w[U+1]=Y.y,w[G+1]=X.y,w[U+2]=Y.z,w[G+2]=X.z,c.normalize(),f.normalize(),w[ee]=f.x,w[te]=w[ne]=c.x,w[ee+1]=f.y,w[te+1]=w[ne+1]=c.y,w[ee+2]=f.z,w[te+2]=w[ne+2]=c.z,b[j]=N,b[j+1]=R,b[j+2]=B,b[j+3]=R,b[j+4]=L,b[j+5]=B,b[j+6]=N,b[j+7]=B,b[j+8]=Q,b[j+9]=F,b[j+10]=J,b[j+11]=z,b[j+12]=F,b[j+13]=$,b[j+14]=z,x[D]=N,x[D+1]=R,x[D+2]=N,x[D+3]=B,x[D+4]=L,x[D+5]=B,x[D+6]=N,x[D+7]=B,x[D+8]=F,x[D+9]=R,x[D+10]=F,x[D+11]=z,x[D+12]=L,x[D+13]=z,x[D+14]=F,x[D+15]=$,x[D+16]=F,x[D+17]=z,x[D+18]=$,x[D+19]=z,u.faceidx+=15,u.lineidx+=20}},a=function(e,t,r,o,i){var a=t.addGeoGroup(),s=r.vertexArr,u=r.normalArr,c=r.faceArr;a.vertices=s.length,a.faceidx=c.length;var p,f,d,h,m,g,v,y=a.vertexArray,b=a.colorArray;if(o.constructor!==Array)var w=o.r,x=o.g,h=o.b;for(g=0,v=a.vertices;g<v;++g){if(p=3*g,f=s[g],y[p]=f.x,y[p+1]=f.y,y[p+2]=f.z,o.constructor===Array)var m=o[g],w=m.r,x=m.g,h=m.b;b[p]=w,b[p+1]=x,b[p+2]=h}if(i)for(g=0,v=a.faceidx/3;g<v;++g){p=3*g,d=c[p],h=c[p+1],m=c[p+2];var _=new n.Vector3,S=new n.Vector3,C=new n.Vector3;e.intersectionShape.triangle.push(new n.Triangle(_.copy(s[d]),S.copy(s[h]),C.copy(s[m])))}if(i){for(var k=new n.Vector3(0,0,0),A=0,x=0;x<t.geometryGroups.length;x++)k.add(t.geometryGroups[x].getCentroid()),A++;k.divideScalar(A),l(e.boundingSphere,{centroid:k},y)}if(a.faceArray=new Uint16Array(c),a.truncateArrayBuffers(!0,!0),u.length<a.vertices)a.setNormals();else{var E,M=a.normalArray=new Float32Array(3*a.vertices);for(g=0,v=a.vertices;g<v;++g)p=3*g,E=u[g],M[p]=E.x,M[p+1]=E.y,M[p+2]=E.z}a.setLineIndices(),a.lineidx=a.lineArray.length},s=function(e,t,r){var o=r,i=o.vertexArr,s=(o.normalArr,o.faceArr);0!==i.length&&0!==s.length||console.warn("Error adding custom shape component: No vertices and/or face indices supplied!");var l=r.color;void 0===l&&(l=e.color),l=n.CC.color(l);for(var u=n.splitMesh(o),c=0,p=u.length;c<p;c++)a(e,t,u[c],u[c].colorArr?u[c].colorArr:l,r.clickable)},l=function(e,t,n){e.center.set(0,0,0);var r,o;if(t.length>0){for(r=0,o=t.length;r<o;++r){var i=t[r].centroid;e.center.add(i)}e.center.divideScalar(t.length)}var a=e.radius*e.radius;for(r=0,o=n.length/3;r<o;r++){var s=n[3*r],l=n[3*r+1],u=n[3*r+2],c=e.center.distanceToSquared({x:s,y:l,z:u});a=Math.max(a,c)}e.radius=Math.sqrt(a)},u=function(e,t){void 0!==t.color?(e.color=t.color||new n.Color,t.color instanceof n.Color||(e.color=n.CC.color(t.color))):e.color=n.CC.color(0),e.wireframe=!!t.wireframe,e.opacity=t.alpha?n.Math.clamp(t.alpha,0,1):1,void 0!==t.opacity&&(e.opacity=n.Math.clamp(t.opacity,0,1)),e.side=void 0!==t.side?t.side:n.DoubleSide,e.linewidth=void 0===t.linewidth?1:t.linewidth,e.clickable=!!t.clickable,e.callback="function"==typeof t.callback?t.callback:null,e.hoverable=!!t.hoverable,e.hover_callback="function"==typeof t.hover_callback?t.hover_callback:null,e.unhover_callback="function"==typeof t.unhover_callback?t.unhover_callback:null,e.hidden=t.hidden};return Object.defineProperty(e.prototype,"position",{get:function(){return this.boundingSphere.center}}),Object.defineProperty(e.prototype,"x",{get:function(){return this.boundingSphere.center.x}}),Object.defineProperty(e.prototype,"y",{get:function(){return this.boundingSphere.center.y}}),Object.defineProperty(e.prototype,"z",{get:function(){return this.boundingSphere.center.z}}),e}(),n.ShapeIDCount=0,n.splitMesh=function(e){if(e.vertexArr.length<64e3)return[e];var t=(e.vertexArr.length,[{vertexArr:[],normalArr:[],faceArr:[]}]);e.colorArr&&(t.colorArr=[]);for(var n=[],r=[],o=0,i=e.faceArr,a=0,s=i.length;a<s;a+=3){for(var l=t[o],u=0;u<3;u++){var c=i[a+u];n[c]!==o&&(n[c]=o,r[c]=l.vertexArr.length,l.vertexArr.push(e.vertexArr[c]),e.normalArr&&e.normalArr[c]&&l.normalArr.push(e.normalArr[c]),e.colorArr&&e.colorArr[c]&&l.colorArr.push(e.colorArr[c])),l.faceArr.push(r[c])}l.vertexArr.length>=64e3&&(t.push({vertexArr:[],normalArr:[],faceArr:[]}),e.colorArr&&(t.colorArr=[]),o++)}return t},n.GLViewer=function(){function e(e,o){function i(e){var t=[];void 0===e&&(e={});var n,r=[];if(void 0===e.model)for(n=0;n<y.length;n++)y[n]&&r.push(y[n]);else r=e.model,$.isArray(r)||(r=[r]);for(n=0;n<r.length;n++)t=t.concat(r[n].selectedAtoms(e));return t}function a(e,t){void 0===t&&(t={});var n,r=[];if(void 0===t.model)for(n=0;n<y.length;n++)y[n]&&r.push(y[n]);else r=t.model,$.isArray(r)||(r=[r]);for(n=0;n<r.length;n++)if(r[n].atomIsSelected(e,t))return!0;return!1}function s(e,t){e.dashLength=e.dashLength||.5,e.gapLength=e.gapLength||.5,e.start=e.start||{},e.end=e.end||{};var r,o,i,a=new n.Vector3(e.start.x||0,e.start.y||0,e.start.z||0),s=new n.Vector3(e.end.x,e.end.y||0,e.end.z||0),l=new n.Vector3,u=new n.Vector3,c=new n.Vector3,p=a.clone(),f=0;for(l.subVectors(s,a),r=l.length(),l.normalize(),u=l.clone(),c=l.clone(),u.multiplyScalar(e.dashLength),c.multiplyScalar(e.gapLength),o=u.length(),i=c.length();f<r;){if(f+o>r){e.start=a,e.end=s,t.addLine(e);break}p.addVectors(a,u),e.start=a,e.end=p,t.addLine(e),a=p.clone(),f+=o,p.addVectors(a,c),a=p.clone(),f+=i}return t}function l(e,t,n,r,o){var i=[];if(void 0===t.model)for(a=0;a<y.length;a++)y[a]&&i.push(y[a]);else i=t.model,$.isArray(i)||(i=[i]);for(var a=0;a<i.length;a++)i[a]&&("number"==typeof i[a]?y[i[a]][e](t,n,r,o):i[a][e](t,n,r,o))}function u(e){var t=new n.MeshLambertMaterial;t.vertexColors=n.VertexColors;for(var r in e)"color"===r||"map"===r||e.hasOwnProperty(r)&&(t[r]=e[r]);return void 0!==e.opacity&&(1===e.opacity?t.transparent=!1:t.transparent=!0),t}o=o||{};var c=o.callback,p=o.defaultcolors;p||(p=n.elementColors.defaultColors);var f=o.nomouse,d=0;o.backgroundColor=o.backgroundColor||"#ffffff",void 0!=typeof o.backgroundColor&&(d=n.CC.color(o.backgroundColor).getHex());var h=0;void 0!=typeof o.camerax&&(h=parseFloat(o.camerax));var m=this,g=e,v=(g.id,null),y=[],b={},w=[],x=[],_=[],S=[],C=[],k=null,A=500;void 0!=typeof o.hoverDuration&&(A=o.hoverDuration);var E=g.width(),M=g.height(),T=E/M,O=[],I=new n.Renderer({antialias:!0,preserveDrawingBuffer:!0,premultipliedAlpha:!1,id:o.id});I.domElement.style.width="100%",I.domElement.style.height="100%",I.domElement.style.padding="0",I.domElement.style.position="absolute",I.domElement.style.top="0px",I.domElement.style.left="0px",I.domElement.style.zIndex="0";var P=new n.Camera(20,T,1,800,o.orthographic);P.position=new n.Vector3(h,0,150);var j=new n.Vector3;P.lookAt(j);var D=new n.Raycaster(new n.Vector3(0,0,0),new n.Vector3(0,0,0)),N=new n.Projector,R=new n.Vector3(0,0,0),F=null,L=null,z=null,B=-50,q=50,V=new n.Quaternion(0,0,0,1),U=new n.Quaternion(0,0,0,1),H=!1,G=!1,W=0,Z=0,Y=0,X=0,K=0,Q=0,J=0,ee=function(){var e=0;for(var t in b)b.hasOwnProperty(t)&&t>e&&(e=t);return e+1},te=function(){var e=P.position.z-L.position.z;e<1&&(e=1),P.near=e+B,P.near<1&&(P.near=1),P.far=e+q,P.near+1>P.far&&(P.far=P.near+1),P.fov=20,P.right=e*Math.tan(Math.PI/180*20),P.left=-P.right,P.top=P.right/T,P.bottom=-P.top,P.updateProjectionMatrix(),F.fog.near=P.near+.4*(P.far-P.near),F.fog.far=P.far,o.disableFog&&(F.fog.near=F.fog.far)},ne=function(e){if(F&&(te(),I.render(F,P),!e&&O.length>0))for(var t=m.getView(),n=0;n<O.length;n++){var r=O[n];r.setView(t,!0)}};!function(){F=new n.Scene,F.fog=new n.Fog(d,100,200),z=new n.Object3D,L=new n.Object3D,L.useQuaternion=!0,L.quaternion=new n.Quaternion(0,0,0,1),L.add(z),F.add(L);var e=new n.Light(16777215);e.position=new n.Vector3(.2,.2,1).normalize(),e.intensity=1,F.add(e)}(),I.setClearColorHex(d,1),F.fog.color=n.CC.color(d);var re=null,oe=function(){S.splice(0,S.length),C.splice(0,C.length);var e,t;for(e=0,t=y.length;e<t;e++){var n=y[e];if(n){var r=n.selectedAtoms({clickable:!0}),o=n.selectedAtoms({hoverable:!0});Array.prototype.push.apply(C,o),Array.prototype.push.apply(S,r)}}for(e=0,t=w.length;e<t;e++){var i=w[e];i&&i.clickable&&S.push(i),i&&i.hoverable&&C.push(i)}},ie=function(e,t,n){if(0!=S.length){var r={x:e,y:t,z:-1};R.set(r.x,r.y,r.z),N.unprojectVector(R,P),R.sub(P.position).normalize(),D.set(P.position,R);var o=[];if(o=D.intersectObjects(z,S),o.length){var i=o[0].clickable;void 0!==i.callback&&"function"==typeof i.callback&&i.callback(i,m,n,g)}}},ae=function(e,t,n){if(0!=C.length){var r={x:e,y:t,z:-1};R.set(r.x,r.y,r.z),N.unprojectVector(R,P),R.sub(P.position).normalize(),D.set(P.position,R);var o=[];if(o=D.intersectObjects(z,C),o.length){var i=o[0].clickable;k=i,void 0!==i.hover_callback&&"function"==typeof i.hover_callback&&i.hover_callback(i,m,n,g)}else k=null}},se=function(e,t,n){var r={x:e,y:t,z:-1};R.set(r.x,r.y,r.z),N.unprojectVector(R,P),R.sub(P.position).normalize(),D.set(P.position,R);var o=[];o=D.intersectObjects(z,C),void 0===o[0]&&(k.unhover_callback(k,m,n,g),k=null),void 0!==o[0]&&o[0].clickable!==k&&(k.unhover_callback(k,m,n,g),k=null)},le=function(e){var t=e.originalEvent.targetTouches[0].pageX-e.originalEvent.targetTouches[1].pageX,n=e.originalEvent.targetTouches[0].pageY-e.originalEvent.targetTouches[1].pageY;return Math.sqrt(t*t+n*n)},ue=function(e){var t=e.pageX,n=e.pageY;return e.originalEvent.targetTouches&&e.originalEvent.targetTouches[0]?(t=e.originalEvent.targetTouches[0].pageX,n=e.originalEvent.targetTouches[0].pageY):e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(t=e.originalEvent.changedTouches[0].pageX,n=e.originalEvent.changedTouches[0].pageY),[t,n]},ce=function(e,t){var r=e/E,o=t/M,i=L.position.z,a=L.quaternion,s=new n.Vector3(0,0,i);return N.projectVector(s,P),s.x+=2*r,s.y-=2*o,N.unprojectVector(s,P),s.z=0,s.applyQuaternion(a),s};$("body").bind("mouseup touchend",function(e){if(G&&F){var t=ue(e),n=t[0],r=t[1];if(n==W&&r==Z){var o=$("canvas",g).offset(),i=(n-o.left)/E*2-1,a=-(r-o.top)/M*2+1;ie(i,a,e)}}G=!1});var pe,fe=this._handleMouseDown=function(e){if(e.preventDefault(),F){var t=ue(e),n=t[0],r=t[1];void 0!==n&&(G=!0,re=null,pe=e.which,W=n,Z=r,Y=0,e.originalEvent.targetTouches&&2==e.originalEvent.targetTouches.length&&(Y=le(e)),V=L.quaternion,K=L.position.z,X=z.position.clone(),Q=B,J=q)}},de=this._handleMouseScroll=function(e){if(e.preventDefault(),F){var t=.85*(150-L.position.z),n=1;e.originalEvent.ctrlKey&&(n=-1),e.originalEvent.detail?L.position.z+=n*t*e.originalEvent.detail/10:e.originalEvent.wheelDelta&&(L.position.z-=n*t*e.originalEvent.wheelDelta/400),L.position.z>150&&(L.position.z=149.85),ne()}};this.pngURI=function(){return $("canvas",g)[0].toDataURL("image/png")},this.setHoverDuration=function(e){A=e};var he,me=this._handleMouseMove=function(e){clearTimeout(he);var t=$("canvas",g).offset(),r=(ue(e)[0]-t.left)/E*2-1,o=-(ue(e)[1]-t.top)/M*2+1;if(null!==k&&se(r,o,e),he=setTimeout(function(){ae(r,o,e)},A),E=g.width(),M=g.height(),e.preventDefault(),F&&G){var i=0,a=ue(e),s=a[0],l=a[1];if(void 0!==s){var u=(s-W)/E,c=(l-Z)/M;if(0!=Y&&e.originalEvent.targetTouches&&2==e.originalEvent.targetTouches.length){var p=le(e);i=2,c=2*(p-Y)/(E+M),console.log("pinch "+Y+" dy "+c)}else e.originalEvent.targetTouches&&3==e.originalEvent.targetTouches.length&&(i=1);var f,d=Math.sqrt(u*u+c*c);if(3==i||3==pe&&e.ctrlKey)B=Q+100*u,q=J+100*c;else if(2==i||3==pe||e.shiftKey)f=.85*(150-L.position.z),f<80&&(f=80),L.position.z=K+c*f,L.position.z>150&&(L.position.z=149.85);else if(1==i||2==pe||e.ctrlKey){var h=ce(s-W,l-Z);z.position.addVectors(X,h)}else if((0===i||1==pe)&&0!==d){var m=Math.sin(d*Math.PI)/d;U.x=Math.cos(d*Math.PI),U.y=0,U.z=m*u,U.w=-m*c,L.quaternion=new n.Quaternion(1,0,0,0),L.quaternion.multiply(U),L.quaternion.multiply(V)}ne()}}},ge=function(e){g=e,E=g.width(),M=g.height(),T=E/M,I.setSize(E,M),g.append(I.domElement),v=$(I.domElement),f||(v.bind("mousedown touchstart",fe),v.bind("DOMMouseScroll mousewheel",de),v.bind("mousemove touchmove",me),v.bind("contextmenu",function(e){e.preventDefault()}))};ge(g),this.setContainer=function(e){return"string"===$.type(e)&&(e=$("#"+e)),e||(e=g),ge(e),this},this.setBackgroundColor=function(e,t){void 0===t?t=1:(t<0||t>1)&&(t=1);var r=n.CC.color(e);return F.fog.color=r,d=r.getHex(),I.setClearColorHex(r.getHex(),t),ne(),this},this.setProjection=function(e){P.ortho="orthographic"===e,te()},this.setViewStyle=function(e){if("outline"===e.style){var t={};e.color&&(t.color=n.CC.color(e.color)),e.width&&(t.width=e.width),I.enableOutline(t)}else I.disableOutline();return this},o.style&&this.setViewStyle(o),this.setWidth=function(e){return E=e||E,I.setSize(E,M),this},this.setHeight=function(e){return M=e||M,I.setSize(E,M),this},this.resize=function(){return E=g.width(),M=g.height(),T=E/M,I.setSize(E,M),P.aspect=T,P.updateProjectionMatrix(),ne(),this},$(window).resize(this.resize),this.getModel=function(e){return e in y?y[e]:0==y.length?null:y[y.length-1]},this.rotate=function(e,t,r,o){r=void 0!==r?r:0,void 0===t&&(t="y");var i=Math.PI*e/180,a=function(e){var r=Math.sin(e/2),o=Math.cos(e/2),i=0,a=0,s=0;return"x"==t&&(i=r),"y"==t&&(a=r),"z"==t&&(s=r),new n.Quaternion(i,a,s,o).normalize()}(i);if(r){var s=(new n.Quaternion).copy(L.quaternion).multiply(a);ye(r,o,z.position,L.position.z,s,j)}else L.quaternion.multiply(a),ne();return this},this.surfacesFinished=function(){for(var e in b)if(!b[e][0].done)return!1;return!0},this.getView=function(){if(!z)return[0,0,0,0,0,0,0,1];var e=z.position,t=L.quaternion;return[e.x,e.y,e.z,L.position.z,t.x,t.y,t.z,t.w]},this.setView=function(e,t){return void 0!==e&&(e instanceof Array||8!==e.length)&&z&&L?(z.position.x=e[0],z.position.y=e[1],z.position.z=e[2],L.position.z=e[3],L.quaternion.x=e[4],L.quaternion.y=e[5],L.quaternion.z=e[6],L.quaternion.w=e[7],void 0!==e[8]&&(L.position.x=e[8],L.position.y=e[9]),ne(t),this):this},this.render=function(e){new Date;oe();var t,r,o=this.getView(),i=I.supportedExtensions();for(t=0;t<y.length;t++)y[t]&&y[t].globj(z,i);for(t=0;t<w.length;t++)w[t]&&w[t].globj(z,i);for(t in b)if(b.hasOwnProperty(t)){var a=b[t];for(r=0;r<a.length;r++)if(a.hasOwnProperty(r)){var s=a[r].geo;if(!a[r].finished){s.verticesNeedUpdate=!0,s.elementsNeedUpdate=!0,s.normalsNeedUpdate=!0,s.colorsNeedUpdate=!0,s.buffersNeedUpdate=!0,s.boundingSphere=null,a[r].done&&(a[r].finished=!0),a[r].lastGL&&z.remove(a[r].lastGL);var l=null;if(l=a[r].mat instanceof n.LineBasicMaterial?new n.Line(s,a[r].mat):new n.Mesh(s,a[r].mat),a[r].mat.transparent&&0==a[r].mat.opacity?l.visible=!1:l.visible=!0,a[r].symmetries.length>1||1==a[r].symmetries.length&&!a[r].symmetries[r].isIdentity()){var u,c=new n.Object3D;for(u=0;u<a[r].symmetries.length;u++){var p=l.clone();p.matrix=a[r].symmetries[u],p.matrixAutoUpdate=!1,c.add(p)}a[r].lastGL=c,z.add(c)}else a[r].lastGL=l,z.add(l)}}}this.setView(o);new Date;return"function"==typeof e&&e(),this},this.autoload=function(e,t){n.autoload(e,t)},this.selectedAtoms=function(e){return i(e)},this.pdbData=function(e){for(var t=i(e),n="",r=0,o=t.length;r<o;++r)n+=t[r].pdbline+"\n";return n};var ve=function(e,t,r){if(1==r)return t;if(0==r)return e;var o=e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w;if(o>.9995){var i=new n.Quaternion(e.x+r*(t.x-e.x),e.y+r*(t.y-e.y),e.z+r*(t.z-e.z),e.w+r*(t.w-e.w));return i.normalize(),i}o<0&&(t=t.clone().multiplyScalar(-1),o=-o),o>1?o=1:o<-1&&(o=-1);var a=Math.acos(o),s=a*r,l=t.clone();l.sub(e.clone().multiplyScalar(o)),l.normalize();var u=Math.cos(s),c=Math.sin(s),p=new n.Quaternion(e.x*u+l.x*c,e.y*u+l.y*c,e.z*u+l.z*c,e.w*u+l.w*c);return p.normalize(),p},ye=function(e,t,n,r,o,i){var a=Math.ceil(e/20);a<1&&(a=1);var s={mpos:z.position.clone(),rz:L.position.z,rot:L.quaternion.clone(),cam:j.clone()};if(t){for(var a=new Array(a),l=a.length,u=0;u<l;u++){var c=(u+1)/l,p={mpos:s.mpos,rz:s.rz,rot:s.rot};n&&(p.mpos=n.clone().sub(s.mpos).multiplyScalar(c).add(s.mpos)),void 0!==r&&null!=r&&(p.rz=s.rz+c*(r-s.rz)),o&&(p.rot=ve(s.rot,o,c)),i&&(p.cam=i.clone().sub(s.cam).multiplyScalar(c).add(s.cam)),a[u]=p}var f=0,d=function(){var e=a[f];f+=1,e.mpos&&(z.position=e.mpos),e.rz&&(L.position.z=e.rz),e.rot&&(L.quaternion=e.rot),e.cam&&P.lookAt(e.cam),f<a.length&&setTimeout(d,20),ne()};setTimeout(d,20)}else{var h={},c=1/a;if(n&&(h.mpos=n.clone().sub(s.mpos).multiplyScalar(c)),void 0!==r&&null!=r&&(h.rz=c*(r-s.rz)),o){var p=ve(s.rot,o,c);h.rot=s.rot.clone().inverse().multiply(p)}i&&(h.cam=i.clone().sub(s.cam).multiplyScalar(c));var f=0,d=function(){f+=1,h.mpos&&z.position.add(h.mpos),h.rz&&(L.position.z+=h.rz),h.rot&&L.quaternion.multiply(h.rot),h.cam&&(j.add(h.cam),P.lookAt(j)),f<a&&setTimeout(d,20),ne()};setTimeout(d,20)}};this.zoom=function(e,t,n){var e=e||2,t=void 0!==t?t:0,r=(150-L.position.z)/e,o=150-r;return t>0?ye(t,n,z.position,o,L.quaternion,j):(L.position.z=o,ne()),this},this.translate=function(e,t,r,o){var r=void 0!==r?r:0,i=e/E,a=t/M,s=new n.Vector3(0,0,-150);N.projectVector(s,P),s.x-=i,s.y-=a,N.unprojectVector(s,P),s.z=0;var l=j.clone().add(s);return r>0?ye(r,o,z.position,L.position.z,L.quaternion,l):(j=l,P.lookAt(j),ne()),this},this.fitSlab=function(e){e=e||{};var t=i(e),r=n.getExtent(t),o=r[1][0]-r[0][0],a=r[1][1]-r[0][1],s=r[1][2]-r[0][2],l=Math.sqrt(o*o+a*a+s*s);return l<5&&(l=5),B=-l/1.9,q=l/2,this},this.center=function(e,t,r){t=void 0!==t?t:0;var o,a;e=e||{};var s=i(e),l=n.getExtent(s);$.isEmptyObject(e)?($.each(w,function(e,t){if(t&&t.boundingSphere&&t.boundingSphere.center){var r=t.boundingSphere.center,o=t.boundingSphere.radius;o>0?(s.push(new n.Vector3(r.x+o,r.y,r.z)),s.push(new n.Vector3(r.x-o,r.y,r.z)),s.push(new n.Vector3(r.x,r.y+o,r.z)),s.push(new n.Vector3(r.x,r.y-o,r.z)),s.push(new n.Vector3(r.x,r.y,r.z+o)),s.push(new n.Vector3(r.x,r.y,r.z-o))):s.push(r)}}),l=n.getExtent(s),o=s,a=l):(o=i({}),a=n.getExtent(o));var u=new n.Vector3(l[2][0],l[2][1],l[2][2]),c=a[1][0]-a[0][0],p=a[1][1]-a[0][1],f=a[1][2]-a[0][2],d=Math.sqrt(c*c+p*p+f*f);d<5&&(d=5),B=-d/1.9,q=d/2,c=l[1][0]-l[0][0],p=l[1][1]-l[0][1],f=l[1][2]-l[0][2],(d=Math.sqrt(c*c+p*p+f*f))<5&&(d=5);for(var h=25,m=0;m<s.length;m++)if(s[m]){var g=u.distanceToSquared(s[m]);g>h&&(h=g)}var d=2*Math.sqrt(h),v=u.clone().multiplyScalar(-1);return t>0?ye(t,r,v,L.position.z,L.quaternion,j):(z.position=v,ne()),this},this.zoomTo=function(e,t,r){t=void 0!==t?t:0;var o,a;e=e||{};var s=i(e),l=n.getExtent(s);$.isEmptyObject(e)?($.each(w,function(e,t){if(t&&t.boundingSphere&&t.boundingSphere.center){var r=t.boundingSphere.center,o=t.boundingSphere.radius;o>0?(s.push(new n.Vector3(r.x+o,r.y,r.z)),s.push(new n.Vector3(r.x-o,r.y,r.z)),s.push(new n.Vector3(r.x,r.y+o,r.z)),s.push(new n.Vector3(r.x,r.y-o,r.z)),s.push(new n.Vector3(r.x,r.y,r.z+o)),s.push(new n.Vector3(r.x,r.y,r.z-o))):s.push(r)}}),l=n.getExtent(s),o=s,a=l):(o=i({}),a=n.getExtent(o));var u=new n.Vector3(l[2][0],l[2][1],l[2][2]),c=a[1][0]-a[0][0],p=a[1][1]-a[0][1],f=a[1][2]-a[0][2],d=Math.sqrt(c*c+p*p+f*f);d<5&&(d=5),B=-d/1.9,q=d/2,c=l[1][0]-l[0][0],p=l[1][1]-l[0][1],f=l[1][2]-l[0][2],(d=Math.sqrt(c*c+p*p+f*f))<5&&(d=5);for(var h=25,m=0;m<s.length;m++)if(s[m]){var g=u.distanceToSquared(s[m]);g>h&&(h=g)}var d=2*Math.sqrt(h),v=u.clone().multiplyScalar(-1),y=-(.5*d/Math.tan(Math.PI/180*P.fov/2)-150);return t>0?ye(t,r,v,y,L.quaternion,j):(z.position=v,L.position.z=y,ne()),this},this.setSlab=function(e,t){B=e,q=t},this.getSlab=function(e){return{near:B,far:q}},this.addLabel=function(e,t,r){if(t=t||{},r){var o=n.getExtent(i(r));t.position={x:o[2][0],y:o[2][1],z:o[2][2]}}var a=new n.Label(e,t);return a.setContext(),z.add(a.sprite),t.fixed&&_.push(x.length),x.push(a),ne(),a},this.addResLabels=function(e,t){return l("addResLabels",e,this,t),this},this.removeLabel=function(e){for(var t=0;t<x.length;t++)if(x[t]==e){x.splice(t,1),e.dispose(),z.remove(e.sprite);break}return this},this.removeAllLabels=function(){for(var e=0;e<x.length;e++)z.remove(x[e].sprite);return x.splice(0,x.length),this},this.setLabelStyle=function(e,t){return z.remove(e.sprite),e.dispose(),e.stylespec=t,e.setContext(),z.add(e.sprite),ne(),e},this.setLabelText=function(e,t){return z.remove(e.sprite),e.dispose(),e.text=t,e.setContext(),z.add(e.sprite),ne(),e};this.addShape=function(e){e=e||{};var t=new n.GLShape(e);return t.shapePosition=w.length,w.push(t),t},this.removeShape=function(e){if(!e)return this;for(e.removegl(z),delete w[e.shapePosition];w.length>0&&void 0===w[w.length-1];)w.pop();return this},this.removeAllShapes=function(){for(var e=0;e<w.length;e++){w[e].removegl(z)}return w.splice(0,w.length),this},this.addSphere=function(e){e=e||{};var t=new n.GLShape(e);return t.shapePosition=w.length,t.addSphere(e),w.push(t),t},this.addArrow=function(e){e=e||{};var t=new n.GLShape(e);return t.shapePosition=w.length,t.addArrow(e),w.push(t),t},this.addCylinder=function(e){e=e||{};var t=new n.GLShape(e);return t.shapePosition=w.length,e.dashed?t.addDashedCylinder(e):t.addCylinder(e),w.push(t),t},this.addLine=function(e){e=e||{},e.wireframe=!0;var t=new n.GLShape(e);return t.shapePosition=w.length,e.dashed?t=s(e,t):t.addLine(e),w.push(t),t},this.addUnitCell=function(e){var t=new n.GLShape({wireframe:!0});t.shapePosition=w.length;var r=e.getCrystData();if(r){if(r.matrix)var o=r.matrix;else{var i=r.a,a=r.b,s=r.c,l=r.alpha,u=r.beta,c=r.gamma;l=l*Math.PI/180,u=u*Math.PI/180,c=c*Math.PI/180;var p,f,d;p=Math.cos(u),f=(Math.cos(l)-Math.cos(u)*Math.cos(c))/Math.sin(c),d=Math.sqrt(Math.max(0,1-p*p-f*f));var o=new n.Matrix4(i,a*Math.cos(c),s*p,0,0,a*Math.sin(c),s*f,0,0,0,s*d,0,0,0,0,1)}for(var h=[new n.Vector3(0,0,0),new n.Vector3(1,0,0),new n.Vector3(0,1,0),new n.Vector3(0,0,1),new n.Vector3(1,1,0),new n.Vector3(0,1,1),new n.Vector3(1,0,1),new n.Vector3(1,1,1)],m=0;m<h.length;m++)h[m]=h[m].applyMatrix4(o);t.addLine({start:h[0],end:h[1]}),t.addLine({start:h[0],end:h[2]}),t.addLine({start:h[1],end:h[4]}),t.addLine({start:h[2],end:h[4]}),t.addLine({start:h[0],end:h[3]}),t.addLine({start:h[3],end:h[5]}),t.addLine({start:h[2],end:h[5]}),t.addLine({start:h[1],end:h[6]}),t.addLine({start:h[4],end:h[7]}),t.addLine({start:h[6],end:h[7]}),t.addLine({start:h[3],end:h[6]}),t.addLine({start:h[5],end:h[7]})}return w.push(t),t},this.addCustom=function(e){e=e||{};var t=new n.GLShape(e);return t.shapePosition=w.length,t.addCustom(e),w.push(t),t},this.addVolumetricData=function(e,t,r){r=r||{};var o=new n.GLShape(r);return o.shapePosition=w.length,o.addVolumetricData(e,t,r),w.push(o),o},this.addIsosurface=function(e,t,r){t=t||{};var o=new n.GLShape(t);return o.shapePosition=w.length,o.addIsosurface(e,t,r),w.push(o),o},this.enableFog=function(e){e?F.fog=new n.Fog(d,100,200):(o.disableFog=!0,ne())},this.setFrame=function(e){for(var t=0;t<y.length;t++)y[t].setFrame(e);return this},this.getFrames=function(){for(var e=0,t=0;t<y.length;t++)y[t].getFrames().length>e&&(t,e=y[t].getFrames().length);return e},this.animate=function(e){H=!0;var t=100,n="forward",r=0;e=e||{},e.interval&&(t=e.interval),e.loop&&(n=e.loop),e.reps&&(r=e.reps);var o=this.getFrames(),i=this,a=0,s=1,l=0,u=o*r,c=function(e){"forward"==e?(i.setFrame(a),a=(a+s)%o):"backward"==e?(i.setFrame(o-1-a),a=(a+s)%o):(i.setFrame(a),a+=s,s*=a%(o-1)==0?-1:1),i.render(),++l!=u&&i.isAnimated()||clearInterval(p)},p=setInterval(function(){c(n)},t);return this},this.stopAnimate=function(){return H=!1,this},this.isAnimated=function(){return H},this.addModel=function(e,t,r){var o=new n.GLModel(y.length,p);return o.addMolData(e,t,r),y.push(o),o},this.addModels=function(e,t,r){r=r||{},r.multimodel=!0,r.frames=!0;for(var o=n.GLModel.parseMolData(e,t,r),i=0;i<o.length;i++){var a=new n.GLModel(y.length,p);a.setAtomDefaults(o[i]),a.addFrame(o[i]),a.setFrame(0),o.modelData&&a.setModelData(o.modelData[i]),a.setDontDuplicateAtoms(!r.duplicateAssemblyAtoms),y.push(a)}return y},this.addModelsAsFrames=function(e,t,r){r=r||{},r.multimodel=!0,r.frames=!0;var o=new n.GLModel(y.length,p);return o.addMolData(e,t,r),y.push(o),o},this.addAsOneMolecule=function(e,t,r){r=r||{},r.multimodel=!0,r.onemol=!0;var o=new n.GLModel(y.length,p);return o.addMolData(e,t,r),y.push(o),o},this.removeModel=function(e){if(e){for(e.removegl(z),delete y[e.getID()];y.length>0&&void 0===y[y.length-1];)y.pop();return this}},this.removeAllModels=function(){for(var e=0;e<y.length;e++){y[e].removegl(z)}return y.splice(0,y.length),this},this.exportJSON=function(e,t){var n={};return n.m=void 0===t?y.map(function(t){return t.toCDObject(e)}):[model[t].toCDObject()],JSON.stringify(n)},this.createModelFrom=function(e,t){for(var r=new n.GLModel(y.length,p),o=0;o<y.length;o++)if(y[o]){var i=y[o].selectedAtoms(e);r.addAtoms(i),t&&y[o].removeAtoms(i)}return y.push(r),r},this.setStyle=function(e,t){return void 0===t&&(t=e,e={}),l("setStyle",e,t,!1),this},this.addStyle=function(e,t){return void 0===t&&(t=e,e={}),l("setStyle",e,t,!0),this},this.setClickable=function(e,t,n){return l("setClickable",e,t,n),this},this.setHoverable=function(e,t,n,r){return l("setHoverable",e,t,n,r),this},this.vibrate=function(e,t){return l("vibrate",e,t),this},this.setColorByProperty=function(e,t,n,r){return l("setColorByProperty",e,t,n,r),this},this.setColorByElement=function(e,t){return l("setColorByElement",e,t),this};var be=function(e,t){for(var n=[],r=0;r<e.length;r++){var o=e[r];void 0!==o&&(o.x<t[0][0]||o.x>t[1][0]||o.y<t[0][1]||o.y>t[1][1]||o.z<t[0][2]||o.z>t[1][2]||n.push(o))}return n},we=function(e){return(e[1][0]-e[0][0])*(e[1][1]-e[0][1])*(e[1][2]-e[0][2])},xe=function(e,t,n){for(var o=[],i={},a=0,s=t.length;a<s;a++)i[t[a].index]=a;for(var l=(function(e){for(var t=[],n=0,r=e.length;n<r;n++)e[n].index in i&&t.push(i[e[n].index]);return t}),u=function(e){var t=[];return t[0]=[e[0][0],e[0][1],e[0][2]],t[1]=[e[1][0],e[1][1],e[1][2]],t},c=function(e){if(we(e)<r)return[e];var t,n=e[1][0]-e[0][0],o=e[1][1]-e[0][1],i=e[1][2]-e[0][2];t=n>o&&n>i?0:o>n&&o>i?1:2;var a=u(e),s=u(e),l=(e[1][t]-e[0][t])/2+e[0][t];a[1][t]=l,s[0][t]=l;var p=c(a),f=c(s);return p.concat(f)},p=c(e),a=0,s=p.length;a<s;a++){var f=u(p[a]);f[0][0]-=6,f[0][1]-=6,f[0][2]-=6,f[1][0]+=6,f[1][1]+=6,f[1][2]+=6;var d=be(t,f),h=be(n,p[a]);o.push({extent:p[a],atoms:l(d),toshow:l(h)})}return o},_e=function(e,t,r){var o=new n.Geometry(!0),i=o.updateGeoGroup(0),a=[];for(u=0,c=e.length;u<c;u++){var s=e[u];s&&(void 0!==s.surfaceColor?a[u]=s.surfaceColor:s.color&&(a[u]=n.CC.color(s.color)))}var l,u,c,p=i.vertexArray,f=t.vertices;for(u=0,c=f.length;u<c;u++)l=3*i.vertices,p[l]=f[u].x,p[l+1]=f[u].y,p[l+2]=f[u].z,i.vertices++;var d=i.colorArray;if(r.voldata&&r.volscheme){var h=r.volscheme,m=r.voldata,g=h.range()||[-1,1];for(u=0,c=f.length;u<c;u++){var v=m.getVal(f[u].x,f[u].y,f[u].z),y=n.CC.color(h.valueToHex(v,g)),l=3*u;d[l]=y.r,d[l+1]=y.g,d[l+2]=y.b}}else if(a.length>0)for(u=0,c=f.length;u<c;u++){var b=f[u].atomid,w=3*u;d[w]=a[b].r,d[w+1]=a[b].g,d[w+2]=a[b].b}var x=t.faces;i.faceidx=x.length,o.initTypedArrays();var _,S,C,k,A=i.vertexArray,E=i.normalArray;for(u=0,c=x.length;u<c;u+=3){var M=x[u],T=x[u+1],O=x[u+2],b=f[M].atomid,w=(f[T].atomid,f[O].atomid,3*M),I=3*T,P=3*O;_=new n.Vector3(A[w],A[w+1],A[w+2]),S=new n.Vector3(A[I],A[I+1],A[I+2]),C=new n.Vector3(A[P],A[P+1],A[P+2]),C.subVectors(C,S),_.subVectors(_,S),C.cross(_),k=C,k.normalize(),E[w]+=k.x,E[I]+=k.x,E[P]+=k.x,E[w+1]+=k.y,E[I+1]+=k.y,E[P+1]+=k.y,E[w+2]+=k.z,E[I+2]+=k.z,E[P+2]+=k.z}i.faceArray=new Uint16Array(x);var j=new n.Mesh(o,r);return j.doubleSided=!0,j},Se=function(e,t,r,o,i,a){var s=(new Date,new n.ProteinSurface);s.initparm(t,1!==e,a);new Date;s.fillvoxels(i,r);new Date;s.buildboundary(),e!=n.SurfaceType.SES&&e!=n.SurfaceType.MS||(s.fastdistancemap(),s.boundingatom(!1),s.fillvoxelswaals(i,r));new Date;s.marchingcube(e);new Date;return s.getFacesAndVertices(o)};this.addMesh=function(e){var t={geo:e.geometry,mat:e.material,done:!0,finished:!1},n=ee();return b[n]=t,n};var Ce=function(e){var t=[];return $.each(e,function(e,n){t[e]=$.extend({},n)}),t},ke={VDW:n.SurfaceType.VDW,MS:n.SurfaceType.MS,SAS:n.SurfaceType.SAS,SES:n.SurfaceType.SES};this.addSurface=function(e,r,o,a,s,l){var c=ee();"string"==typeof e?void 0!==ke[e]?e=ke[e]:console.log("Surface type : "+e+" is not recognized"):void 0===e&&console.log("Surface type : "+e+" is not recognized");var p=null,f=null,d=Ce(i(o));p=a?Ce(i(a)):d;var h,g=!1;for(h=0;h<y.length;h++)if(y[h]){var v=y[h].getSymmetries();if(v.length>1||1==v.length&&!v[0].isIdentity()){g=!0;break}}var w=function(o,a,u){f=s?Ce(i(s)):u;var p,d,h,g=(new Date,n.getExtent(u,!0));if(r.map&&r.map.prop){var v=r.map.prop,y=r.map.scheme||r.map.gradient||new n.Gradient.RWB,b=y.range();b||(b=n.getPropertyRange(u,v)),r.colorscheme={prop:v,gradient:y}}for(d=0,h=a.length;d<h;d++)p=a[d],p.surfaceColor=n.getColorFromStyle(p,r);var w=we(g),_=xe(g,a,u);if(f&&f.length&&f.length>0){var S=n.getExtent(f,!0),C=function(e,t){var n=function(e,t){var n=e.extent,r=n[1][0]-n[0][0],o=n[1][1]-n[0][1],i=n[1][2]-n[0][2],a=r-t[2][0];a*=a;var s=o-t[2][1];s*=s;var l=i-t[2][2];return l*=l,a+s+l};return n(e,S)-n(t,S)};_.sort(C)}var k=[];for(d=0,h=a.length;d<h;d++)p=a[d],k[d]={x:p.x,y:p.y,z:p.z,serial:d,elem:p.elem};if(!n.syncSurface){var A=[];for(e<0&&(e=0),d=0,h=t;d<h;d++){var E=new Worker(n.SurfaceWorker);A.push(E),E.postMessage({type:-1,atoms:k,volume:w})}var M=0,T=function(e){for(var t=n.splitMesh({vertexArr:e.data.vertices,faceArr:e.data.faces}),r=0,i=t.length;r<i;r++){var s={vertices:t[r].vertexArr,faces:t[r].faceArr},u=_e(a,s,x);n.mergeGeos(o.geo,u)}m.render(),++M==_.length&&(o.done=!0,l&&"function"==typeof l&&l(c))},O=function(e){console.log(e.message+" ("+e.filename+":"+e.lineno+")")};for(d=0;d<_.length;d++){var I=A[d%A.length];I.onmessage=T,I.onerror=O,I.postMessage({type:e,expandedExtent:_[d].extent,extendedAtoms:_[d].atoms,atomsToShow:_[d].toshow})}}else{var P=function t(r){if(r>=_.length)return void(l&&"function"==typeof l&&l(c));for(var i=Se(e,_[r].extent,_[r].atoms,_[r].toshow,k,w),s=n.splitMesh({vertexArr:i.vertices,faceArr:i.faces}),u=0,p=s.length;u<p;u++){var i={vertices:s[u].vertexArr,faces:s[u].faceArr},f=_e(a,i,x);n.mergeGeos(o.geo,f)}m.render(),setTimeout(t,1,r+1)};setTimeout(P,1,0)}};r=r||{};var x=u(r),_=[];if(g){var S={},C={};for(h=0;h<y.length;h++)S[h]=[],C[h]=[];for(h=0;h<p.length;h++)S[p[h].model].push(p[h]);for(h=0;h<d.length;h++)C[d[h].model].push(d[h]);for(h=0;h<y.length;h++)C[h].length>0&&(_.push({geo:new n.Geometry(!0),mat:x,done:!1,finished:!1,symmetries:y[h].getSymmetries()}),w(_[h],S[h],C[h]))}else _.push({geo:new n.Geometry(!0),mat:x,done:!1,finished:!1,symmetries:[new n.Matrix4]}),w(_[_.length-1],p,d);return b[c]=_,c},this.setSurfaceMaterialStyle=function(e,t){if(b[e])for(var r=b[e],o=0;o<r.length;o++){var i=r[o].mat=u(t);if(r[o].mat.side=n.FrontSide,t.color){r[o].mat.color=t.color,r[o].geo.colorsNeedUpdate=!0;var a=n.CC.color(t.color);r[o].geo.setColors(function(){return a})}else if(i.voldata&&i.volscheme){var s=i.volscheme,l=i.voldata,c=s.range()||[-1,1];r[o].geo.setColors(function(e,t,r){var o=l.getVal(e,t,r);return n.CC.color(s.valueToHex(o,c))})}r[o].finished=!1}return this},this.removeSurface=function(e){for(var t=b[e],n=0;n<t.length;n++)t[n]&&t[n].lastGL&&(void 0!==t[n].geo&&t[n].geo.dispose(),void 0!==t[n].mat&&t[n].mat.dispose(),z.remove(t[n].lastGL));return delete b[e],ne(),this},this.removeAllSurfaces=function(){for(var e in b)if(b.hasOwnProperty(e)){for(var t=b[e],n=0;n<t.length;n++)t[n]&&t[n].lastGL&&(void 0!==t[n].geo&&t[n].geo.dispose(),void 0!==t[n].mat&&t[n].mat.dispose(),z.remove(t[n].lastGL));delete b[e]}return ne(),this},this.jmolMoveTo=function(){var e=z.position,t="center { "+-e.x+" "+-e.y+" "+-e.z+" }; ",n=L.quaternion;return t+="moveto .5 quaternion { "+n.x+" "+n.y+" "+n.z+" "+n.w+" };"},this.clear=function(){return this.removeAllSurfaces(),this.removeAllModels(),this.removeAllLabels(),this.removeAllShapes(),ne(),this},this.mapAtomProperties=function(e,t){t=t||{};var n=i(t);if("function"==typeof e)for(var r=0,o=n.length;r<o;r++){var s=n[r];e(s)}else for(var r=0,o=n.length;r<o;r++)for(var s=n[r],l=0,u=e.length;l<u;l++){var c=e[l];if(c.props)for(var p in c.props)c.props.hasOwnProperty(p)&&a(s,c)&&(s.properties||(s.properties={}),s.properties[p]=c.props[p])}return this},this.linkViewer=function(e){return O.push(e),this};try{"function"==typeof c&&c(this)}catch(e){console.log("error with glviewer callback: "+e)}}var t=4,r=64e3;return e}(),n.glmolViewer=n.GLViewer;var n=n||{};n.Gradient=function(e,t){},n.Gradient.valueToHex=function(e,t){},n.Gradient.range=function(){},n.Gradient.RWB=function(e,t,n){void 0===t&&$.isArray(e)&&e.length>=2&&(t=e[1],e=e[0]),this.valueToHex=function(r,o){var i,a;if(r*=1,o?(i=o[0],a=o[1]):(i=e,a=t),void 0===r)return 16777215;a>i?(r<i&&(r=i),r>a&&(r=a)):(r>i&&(r=i),r<a&&(r=a));var s=(a+i)/2;s=o&&void 0!==o[2]?o[2]:void 0!==n?n:(i+a)/2;var l;return i<a?r<=s?(l=Math.floor(255*Math.sqrt((r-i)/(s-i))),16711680+256*l+l):(l=Math.floor(255*Math.sqrt(1-(r-s)/(a-s))),65536*l+256*l+255):i>a?r<=s?(l=Math.floor(255*Math.sqrt(1-(r-s)/(a-s))),65536*l+256*l+255):(l=Math.floor(255*Math.sqrt((r-i)/(s-i))),16711680+256*l+l):void 0},this.range=function(){return void 0!==e&&void 0!==t?[e,t]:null}},n.Gradient.ROYGB=function(e,t){void 0===t&&$.isArray(e)&&e.length>=2&&(t=e[1],e=e[0]),this.valueToHex=function(n,r){var o,i;if(n*=1,r?(o=r[0],i=r[1]):(o=e,i=t),void 0===n)return 16777215;if(i>o)n<o&&(n=o),n>i&&(n=i);else{n>o&&(n=o),n<i&&(n=i),n=o-n;var a=o;o=i,i=a}var s,l=(o+i)/2,u=(o+l)/2,c=(l+i)/2;return n<u?(s=Math.floor(255*Math.sqrt((n-o)/(u-o))),16711680+256*s+0):n<l?(s=Math.floor(255*Math.sqrt(1-(n-u)/(l-u))),65536*s+65280+0):n<c?(s=Math.floor(255*Math.sqrt((n-l)/(c-l))),65280+1*s):(s=Math.floor(255*Math.sqrt(1-(n-c)/(i-c))),0+256*s+255)},this.range=function(){return void 0!==e&&void 0!==t?[e,t]:null}},n.Gradient.Sinebow=function(e,t){var n=1;void 0===t&&$.isArray(e)&&e.length>=2&&(t=e[1],e=e[0]),t<e&&(n=-1,e*=-1,t*=-1),this.valueToHex=function(r,o){var i,a;if(r*=n,o?(i=o[0],a=o[1]):(i=e,a=t),void 0===r)return 16777215;a>i?(r<i&&(r=i),r>a&&(r=a)):(r>i&&(r=i),r<a&&(r=a));var s=(r-i)/(a-i),l=5*s/6+.5,u=Math.sin(Math.PI*l);u*=255*u;var c=Math.sin(Math.PI*(l+1/3));c*=255*c;var p=Math.sin(Math.PI*(l+2/3));return p*=255*p,65536*Math.floor(u)+256*Math.floor(p)+1*Math.floor(c)},this.range=function(){return void 0!==e&&void 0!==t?[e,t]:null}},n.Gradient.builtinGradients={rwb:n.Gradient.RWB,roygb:n.Gradient.ROYGB,sinebow:n.Gradient.Sinebow},n.LabelCount=0,n.Label=function(e,t){this.id=n.LabelCount++,this.stylespec=t||{},this.canvas=document.createElement("canvas"),this.canvas.width=134,this.canvas.height=35,this.context=this.canvas.getContext("2d"),this.sprite=new n.Sprite,this.text=e},n.Label.prototype={constructor:n.Label,getStyle:function(){return this.stylespec},setContext:function(){var e=function(e,t,n,r,o,i,a){e.beginPath(),e.moveTo(t+i,n),e.lineTo(t+r-i,n),e.quadraticCurveTo(t+r,n,t+r,n+i),e.lineTo(t+r,n+o-i),e.quadraticCurveTo(t+r,n+o,t+r-i,n+o),e.lineTo(t+i,n+o),e.quadraticCurveTo(t,n+o,t,n+o-i),e.lineTo(t,n+i),e.quadraticCurveTo(t,n,t+i,n),e.closePath(),e.fill(),a&&e.stroke()},t=function(e,t,r){var o=r;return void 0!==e&&(o=e instanceof n.Color?e.scaled():n.CC.color(e).scaled()),void 0!==t&&(o.a=parseFloat(t)),o};return function(){var r=this.stylespec,o=void 0!==r.useScreen&&r.useScreen,i=r.showBackground;"0"!==i&&"false"!==i||(i=!1),void 0===i&&(i=!0);var a=r.font?r.font:"sans-serif",s=parseInt(r.fontSize)?parseInt(r.fontSize):18,l=t(r.fontColor,r.fontOpacity,{r:255,g:255,b:255,a:1}),u=r.padding?r.padding:4,c=r.borderThickness?r.borderThickness:0,p=t(r.backgroundColor,r.backgroundOpacity,{r:0,g:0,b:0,a:1}),f=t(r.borderColor,r.borderOpacity,p),d=r.position?r.position:{x:-10,y:1,z:1},h=void 0===r.inFront||r.inFront;"false"!==h&&"0"!==h||(h=!1);var m=r.alignment||n.SpriteAlignment.topLeft;"string"==typeof m&&m in n.SpriteAlignment&&(m=n.SpriteAlignment[m]);var g="";r.bold&&(g="bold "),this.context.font=g+s+"px  "+a;var v=this.context.measureText(this.text),y=v.width;i||(c=0);var b=y+2.5*c+2*u,w=1.25*s+2*c+2*u;if(r.backgroundImage){var x=r.backgroundImage,_=r.backgroundWidth?r.backgroundWidth:x.width,S=r.backgroundHeight?r.backgroundHeight:x.height;_>b&&(b=_),S>w&&(w=S)}this.canvas.width=b,this.canvas.height=w,this.context.clearRect(0,0,this.canvas.width,this.canvas.height);var g="";if(r.bold&&(g="bold "),this.context.font=g+s+"px  "+a,this.context.fillStyle="rgba("+p.r+","+p.g+","+p.b+","+p.a+")",this.context.strokeStyle="rgba("+f.r+","+f.g+","+f.b+","+f.a+")",this.context.lineWidth=c,i&&e(this.context,c,c,b-2*c,w-2*c,6,c>0),r.backgroundImage){var x=r.backgroundImage,_=r.backgroundWidth?r.backgroundWidth:x.width,S=r.backgroundHeight?r.backgroundHeight:x.height;this.context.drawImage(x,0,0,_,S)}this.context.fillStyle="rgba("+l.r+","+l.g+","+l.b+","+l.a+")",this.context.fillText(this.text,c+u,s+c+u,y);var C=new n.Texture(this.canvas);C.needsUpdate=!0,this.sprite.material=new n.SpriteMaterial({map:C,useScreenCoordinates:o,alignment:m,depthTest:!h}),this.sprite.scale.set(1,1,1),this.sprite.position.set(d.x,d.y,d.z)}}(),dispose:function(){void 0!==this.sprite.material.map&&this.sprite.material.map.dispose(),void 0!==this.sprite.material&&this.sprite.material.dispose()}},n=n||{},n.MarchingCubeInitializer=function(){var e={};e.march=function(e,a,s,l){var u=!!l.fulltable,c=l.hasOwnProperty("origin")&&l.origin.hasOwnProperty("x")?l.origin:{x:0,y:0,z:0},p=!!l.voxel,f=l.matrix,d=l.nX||0,h=l.nY||0,m=l.nZ||0,g=l.scale||1,v=null;v=l.unitCube?l.unitCube:{x:g,y:g,z:g};var y,b,w=new Int32Array(d*h*m);for(y=0,b=w.length;y<b;++y)w[y]=-1;var x=function(e,t,r,o,i,s){var l={x:0,y:0,z:0},u=!!(o&1<<i),d=!!(o&1<<s),g=i;!u&&d&&(g=s),1&g&&r++,2&g&&t++,4&g&&e++,f?(l=new n.Vector3(e,t,r),l=l.applyMatrix4(f),l={x:l.x,y:l.y,z:l.z}):(l.x=c.x+v.x*e,l.y=c.y+v.y*t,l.z=c.z+v.z*r);var y=(h*e+t)*m+r;return p?(a.push(l),a.length-1):(w[y]<0&&(w[y]=a.length,a.push(l)),w[y])},_=new Int32Array(12),S=u?o:t,C=u?i:r;for(y=0;y<d-1;++y)for(var k=0;k<h-1;++k)for(var A=0;A<m-1;++A){for(var E=0,M=0;M<8;++M){var T=(h*(y+((4&M)>>2))+k+((2&M)>>1))*m+A+(1&M),O=!!(2&e[T]);E|=O<<M}if(0!==E&&255!==E){var I=S[E];if(0!==I){var P=C[E];1&I&&(_[0]=x(y,k,A,E,0,1)),2&I&&(_[1]=x(y,k,A,E,1,3)),4&I&&(_[2]=x(y,k,A,E,3,2)),8&I&&(_[3]=x(y,k,A,E,2,0)),16&I&&(_[4]=x(y,k,A,E,4,5)),32&I&&(_[5]=x(y,k,A,E,5,7)),64&I&&(_[6]=x(y,k,A,E,7,6)),128&I&&(_[7]=x(y,k,A,E,6,4)),256&I&&(_[8]=x(y,k,A,E,0,4)),512&I&&(_[9]=x(y,k,A,E,1,5)),1024&I&&(_[10]=x(y,k,A,E,3,7)),2048&I&&(_[11]=x(y,k,A,E,2,6));for(var j=0;j<P.length;j+=3){var D=_[P[j]],N=_[P[j+1]],R=_[P[j+2]];p&&j>=3&&(a.push(a[D]),D=a.length-1,a.push(a[N]),N=a.length-1,a.push(a[R]),R=a.length-1),s.push(D),s.push(N),s.push(R)}}}}},e.laplacianSmooth=function(e,t,n){var r,o,i,a,s,l=new Array(t.length);for(r=0,o=t.length;r<o;r++)l[r]={x:0,y:0,z:0};var u,c=new Array(20);for(r=0;r<20;r++)c[r]=new Array(t.length);for(r=0,o=t.length;r<o;r++)c[0][r]=0;for(r=0,o=n.length/3;r<o;r++){var p=3*r,f=3*r+1,d=3*r+2;for(u=!0,i=0,a=c[0][n[p]];i<a;i++)if(n[f]==c[i+1][n[p]]){u=!1;break}for(u&&(c[0][n[p]]++,c[c[0][n[p]]][n[p]]=n[f]),u=!0,i=0,a=c[0][n[p]];i<a;i++)if(n[d]==c[i+1][n[p]]){u=!1;break}for(u&&(c[0][n[p]]++,c[c[0][n[p]]][n[p]]=n[d]),u=!0,i=0,a=c[0][n[f]];i<a;i++)if(n[p]==c[i+1][n[f]]){u=!1;break}for(u&&(c[0][n[f]]++,c[c[0][n[f]]][n[f]]=n[p]),u=!0,i=0,a=c[0][n[f]];i<a;i++)if(n[d]==c[i+1][n[f]]){u=!1;break}for(u&&(c[0][n[f]]++,c[c[0][n[f]]][n[f]]=n[d]),u=!0,i=0;i<c[0][n[d]];i++)if(n[p]==c[i+1][n[d]]){u=!1;break}for(u&&(c[0][n[d]]++,c[c[0][n[d]]][n[d]]=n[p]),u=!0,i=0,a=c[0][n[d]];i<a;i++)if(n[f]==c[i+1][n[d]]){u=!1;break}u&&(c[0][n[d]]++,c[c[0][n[d]]][n[d]]=n[f])}for(s=0;s<e;s++){for(r=0,o=t.length;r<o;r++)if(c[0][r]<3)l[r].x=t[r].x,l[r].y=t[r].y,l[r].z=t[r].z;else if(3==c[0][r]||4==c[0][r]){for(l[r].x=0,l[r].y=0,l[r].z=0,i=0,a=c[0][r];i<a;i++)l[r].x+=t[c[i+1][r]].x,l[r].y+=t[c[i+1][r]].y,l[r].z+=t[c[i+1][r]].z;l[r].x+=.5*t[r].x,l[r].y+=.5*t[r].y,l[r].z+=.5*t[r].z,l[r].x/=.5+c[0][r],l[r].y/=.5+c[0][r],l[r].z/=.5+c[0][r]}else{for(l[r].x=0,l[r].y=0,l[r].z=0,i=0,a=c[0][r];i<a;i++)l[r].x+=t[c[i+1][r]].x,l[r].y+=t[c[i+1][r]].y,l[r].z+=t[c[i+1][r]].z;l[r].x+=1*t[r].x,l[r].y+=1*t[r].y,l[r].z+=1*t[r].z,l[r].x/=1+c[0][r],l[r].y/=1+c[0][r],l[r].z/=1+c[0][r]}for(r=0,o=t.length;r<o;r++)t[r].x=l[r].x,t[r].y=l[r].y,t[r].z=l[r].z}},e.edgeTable=[0,0,0,0,0,0,0,2816,0,0,0,1792,0,3328,3584,3840,0,0,0,138,0,21,0,134,0,0,0,652,0,2067,3865,3600,0,0,0,42,0,0,0,294,0,0,21,28,0,3875,1049,3360,0,168,162,170,0,645,2475,2210,0,687,293,172,4010,3747,3497,3232,0,0,0,0,0,69,0,900,0,0,0,1792,138,131,1608,1920,0,81,0,2074,84,85,84,86,0,81,0,3676,330,1105,1881,1616,0,0,0,42,0,69,0,502,0,0,21,3580,138,2035,1273,1520,2816,104,2337,106,840,581,367,102,2816,3695,3429,3180,1898,1635,1385,1120,0,0,0,0,0,0,0,3910,0,0,69,588,42,2083,41,2880,0,0,0,1722,0,2293,4095,3830,0,255,757,764,2538,2291,3065,2800,0,0,81,338,0,3925,1119,3414,84,855,85,340,2130,2899,89,2384,1792,712,194,1162,4036,3781,3535,3270,708,719,197,204,3018,2755,2505,2240,0,0,0,0,168,420,168,1958,162,162,676,2988,170,163,680,928,3328,3096,3328,3642,52,53,1855,1590,2340,2111,2869,2620,298,51,825,560,3584,3584,3090,3482,1668,1941,1183,1430,146,2975,2069,2460,154,915,153,400,3840,3592,3329,3082,1796,1541,1295,1030,2818,2575,2309,2060,778,515,265,0];var t=new Uint32Array(e.edgeTable),r=e.triTable=[[],[],[],[],[],[],[],[11,9,8],[],[],[],[8,10,9],[],[10,8,11],[9,11,10],[8,10,9,8,11,10],[],[],[],[1,7,3],[],[4,2,0],[],[2,1,7],[],[],[],[2,7,3,2,9,7],[],[1,4,11,1,0,4],[3,8,0,11,9,4,11,10,9],[4,11,9,11,10,9],[],[],[],[5,3,1],[],[],[],[2,5,8,2,1,5],[],[],[2,4,0],[3,2,4],[],[0,9,1,8,10,5,8,11,10],[3,4,0,3,10,4],[5,8,10,8,11,10],[],[3,5,7],[7,1,5],[1,7,3,1,5,7],[],[9,2,0,9,7,2],[0,3,8,1,7,11,1,5,7],[11,1,7,1,5,7],[],[9,1,0,5,3,2,5,7,3],[8,2,5,8,0,2],[2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[],[],[],[],[],[0,6,2],[],[7,2,9,7,9,8],[],[],[],[8,10,9],[7,1,3],[7,1,0],[6,9,3,6,10,9],[7,10,8,10,9,8],[],[6,0,4],[],[11,1,4,11,3,1],[2,4,6],[2,0,4,2,4,6],[2,4,6],[1,4,2,4,6,2],[],[6,0,4],[],[2,11,3,6,9,4,6,10,9],[8,6,1,8,1,3],[10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[],[],[],[5,3,1],[],[0,6,2],[],[7,4,8,5,2,1,5,6,2],[],[],[2,4,0],[7,4,8,2,11,3,10,5,6],[7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[9,11,8],[3,5,6],[0,5,11,0,11,8],[6,3,5,3,1,5],[3,9,6,3,8,9],[9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[],[],[],[],[],[],[],[1,10,2,9,11,6,9,8,11],[],[],[6,0,2],[3,6,9,3,2,6],[3,5,1],[0,5,1,0,11,5],[0,3,5],[6,9,11,9,8,11],[],[],[],[4,5,9,7,1,10,7,3,1],[],[11,6,7,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[],[],[0,6,4],[8,6,4,8,1,6],[],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[4,2,6],[1,0,9,2,4,8,2,6,4],[2,4,0,2,6,4],[8,2,4,2,6,4],[11,4,1,11,6,4],[0,9,1,4,11,6,4,8,11],[3,6,0,6,4,0],[8,6,4,8,11,6],[10,8,9],[6,3,9,6,7,3],[6,7,1],[10,7,1,7,3,1],[7,11,6,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2],[1,0,9,3,6,7,3,2,6],[7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[],[],[],[],[5,3,7],[8,5,2,8,7,5],[5,3,7],[1,10,2,5,8,7,5,9,8],[1,7,5],[1,7,5],[9,2,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[0,7,1,7,5,1],[9,3,5,3,7,5],[9,7,5,9,8,7],[8,10,11],[3,4,10,3,10,11],[8,10,11],[5,9,4,1,11,3,1,10,11],[2,4,5],[5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[2,8,5,2,11,8],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[11,9,10],[11,9,10],[1,11,4,1,10,11],[8,7,4,11,1,10,11,3,1],[2,7,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[1,7,4],[3,2,11,4,8,7,9,1,0],[11,4,2,4,0,2],[2,11,3,7,4,8],[4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[3,9,11,9,10,11],[0,10,8,10,11,8],[10,3,1,10,11,3],[2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]],o=[0,265,515,778,2060,2309,2575,2822,1030,1295,1541,1804,3082,3331,3593,3840,400,153,915,666,2460,2197,2975,2710,1430,1183,1941,1692,3482,3219,3993,3728,560,825,51,314,2620,2869,2111,2358,1590,1855,1077,1340,3642,3891,3129,3376,928,681,419,170,2988,2725,2479,2214,1958,1711,1445,1196,4010,3747,3497,3232,2240,2505,2755,3018,204,453,719,966,3270,3535,3781,4044,1226,1475,1737,1984,2384,2137,2899,2650,348,85,863,598,3414,3167,3925,3676,1370,1107,1881,1616,2800,3065,2291,2554,764,1013,255,502,3830,4095,3317,3580,1786,2035,1273,1520,2912,2665,2403,2154,876,613,367,102,3942,3695,3429,3180,1898,1635,1385,1120,1120,1385,1635,1898,3180,3429,3695,3942,102,367,613,876,2154,2403,2665,2912,1520,1273,2035,1786,3580,3317,4095,3830,502,255,1013,764,2554,2291,3065,2800,1616,1881,1107,1370,3676,3925,3167,3414,598,863,85,348,2650,2899,2137,2384,1984,1737,1475,1226,4044,3781,3535,3270,966,719,453,204,3018,2755,2505,2240,3232,3497,3747,4010,1196,1445,1711,1958,2214,2479,2725,2988,170,419,681,928,3376,3129,3891,3642,1340,1077,1855,1590,2358,2111,2869,2620,314,51,825,560,3728,3993,3219,3482,1692,1941,1183,1430,2710,2975,2197,2460,666,915,153,400,3840,3593,3331,3082,1804,1541,1295,1030,2822,2575,2309,2060,778,515,265,0],i=[[],[8,3,0],[9,0,1],[8,3,1,8,1,9],[11,2,3],[11,2,0,11,0,8],[11,2,3,0,1,9],[2,1,11,1,9,11,11,9,8],[10,1,2],[8,3,0,1,2,10],[9,0,2,9,2,10],[3,2,8,2,10,8,8,10,9],[10,1,3,10,3,11],[1,0,10,0,8,10,10,8,11],[0,3,9,3,11,9,9,11,10],[8,10,9,8,11,10],[8,4,7],[3,0,4,3,4,7],[1,9,0,8,4,7],[9,4,1,4,7,1,1,7,3],[2,3,11,7,8,4],[7,11,4,11,2,4,4,2,0],[3,11,2,4,7,8,9,0,1],[2,7,11,2,1,7,1,4,7,1,9,4],[10,1,2,8,4,7],[2,10,1,0,4,7,0,7,3],[4,7,8,0,2,10,0,10,9],[2,7,3,2,9,7,7,9,4,2,10,9],[8,4,7,11,10,1,11,1,3],[11,4,7,1,4,11,1,11,10,1,0,4],[3,8,0,7,11,4,11,9,4,11,10,9],[7,11,4,4,11,9,11,10,9],[9,5,4],[3,0,8,4,9,5],[5,4,0,5,0,1],[4,8,5,8,3,5,5,3,1],[11,2,3,9,5,4],[9,5,4,8,11,2,8,2,0],[3,11,2,1,5,4,1,4,0],[8,5,4,2,5,8,2,8,11,2,1,5],[2,10,1,9,5,4],[0,8,3,5,4,9,10,1,2],[10,5,2,5,4,2,2,4,0],[3,4,8,3,2,4,2,5,4,2,10,5],[5,4,9,1,3,11,1,11,10],[0,9,1,4,8,5,8,10,5,8,11,10],[3,4,0,3,10,4,4,10,5,3,11,10],[4,8,5,5,8,10,8,11,10],[9,5,7,9,7,8],[0,9,3,9,5,3,3,5,7],[8,0,7,0,1,7,7,1,5],[1,7,3,1,5,7],[11,2,3,8,9,5,8,5,7],[9,2,0,9,7,2,2,7,11,9,5,7],[0,3,8,2,1,11,1,7,11,1,5,7],[2,1,11,11,1,7,1,5,7],[1,2,10,5,7,8,5,8,9],[9,1,0,10,5,2,5,3,2,5,7,3],[5,2,10,8,2,5,8,5,7,8,0,2],[10,5,2,2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[11,7,6],[0,8,3,11,7,6],[9,0,1,11,7,6],[7,6,11,3,1,9,3,9,8],[2,3,7,2,7,6],[8,7,0,7,6,0,0,6,2],[1,9,0,3,7,6,3,6,2],[7,6,2,7,2,9,2,1,9,7,9,8],[1,2,10,6,11,7],[2,10,1,7,6,11,8,3,0],[11,7,6,10,9,0,10,0,2],[7,6,11,3,2,8,8,2,10,8,10,9],[6,10,7,10,1,7,7,1,3],[6,10,1,6,1,7,7,1,0,7,0,8],[9,0,3,6,9,3,6,10,9,6,3,7],[6,10,7,7,10,8,10,9,8],[8,4,6,8,6,11],[11,3,6,3,0,6,6,0,4],[0,1,9,4,6,11,4,11,8],[1,9,4,11,1,4,11,3,1,11,4,6],[3,8,2,8,4,2,2,4,6],[2,0,4,2,4,6],[1,9,0,3,8,2,2,8,4,2,4,6],[9,4,1,1,4,2,4,6,2],[10,1,2,11,8,4,11,4,6],[10,1,2,11,3,6,6,3,0,6,0,4],[0,2,10,0,10,9,4,11,8,4,6,11],[2,11,3,6,9,4,6,10,9],[8,4,6,8,6,1,6,10,1,8,1,3],[1,0,10,10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[9,5,4,7,6,11],[4,9,5,3,0,8,11,7,6],[6,11,7,4,0,1,4,1,5],[6,11,7,4,8,5,5,8,3,5,3,1],[4,9,5,6,2,3,6,3,7],[9,5,4,8,7,0,0,7,6,0,6,2],[4,0,1,4,1,5,6,3,7,6,2,3],[7,4,8,5,2,1,5,6,2],[6,11,7,1,2,10,9,5,4],[11,7,6,8,3,0,1,2,10,9,5,4],[11,7,6,10,5,2,2,5,4,2,4,0],[7,4,8,2,11,3,10,5,6],[4,9,5,6,10,7,7,10,1,7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[5,6,9,6,11,9,9,11,8],[0,9,5,0,5,3,3,5,6,3,6,11],[0,1,5,0,5,11,5,6,11,0,11,8],[11,3,6,6,3,5,3,1,5],[9,5,6,3,9,6,3,8,9,3,6,2],[5,6,9,9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[1,2,10,5,6,9,9,6,11,9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[10,6,5],[8,3,0,10,6,5],[0,1,9,5,10,6],[10,6,5,9,8,3,9,3,1],[3,11,2,10,6,5],[6,5,10,2,0,8,2,8,11],[1,9,0,6,5,10,11,2,3],[1,10,2,5,9,6,9,11,6,9,8,11],[1,2,6,1,6,5],[0,8,3,2,6,5,2,5,1],[5,9,6,9,0,6,6,0,2],[9,6,5,3,6,9,3,9,8,3,2,6],[11,6,3,6,5,3,3,5,1],[0,5,1,0,11,5,5,11,6,0,8,11],[0,5,9,0,3,5,3,6,5,3,11,6],[5,9,6,6,9,11,9,8,11],[10,6,5,4,7,8],[5,10,6,7,3,0,7,0,4],[5,10,6,0,1,9,8,4,7],[4,5,9,6,7,10,7,1,10,7,3,1],[7,8,4,2,3,11,10,6,5],[11,6,7,10,2,5,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[7,8,4,5,1,2,5,2,6],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,8,0,7,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,4,5,8,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[10,6,4,10,4,9],[8,3,0,9,10,6,9,6,4],[1,10,0,10,6,0,0,6,4],[8,6,4,8,1,6,6,1,10,8,3,1],[2,3,11,6,4,9,6,9,10],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,11,6,3,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[9,1,4,1,2,4,4,2,6],[1,0,9,3,2,8,2,4,8,2,6,4],[2,4,0,2,6,4],[3,2,8,8,2,4,2,6,4],[1,4,9,11,4,1,11,1,3,11,6,4],[0,9,1,4,11,6,4,8,11],[11,6,3,3,6,0,6,4,0],[8,6,4,8,11,6],[6,7,10,7,8,10,10,8,9],[9,3,0,6,3,9,6,9,10,6,7,3],[6,1,10,6,7,1,7,0,1,7,8,0],[6,7,10,10,7,1,7,3,1],[7,11,6,3,8,2,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2,2,9,1,7,8,9],[1,0,9,3,6,7,3,2,6],[8,0,7,7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[11,7,5,11,5,10],[3,0,8,7,5,10,7,10,11],[9,0,1,10,11,7,10,7,5],[3,1,9,3,9,8,7,10,11,7,5,10],[10,2,5,2,3,5,5,3,7],[5,10,2,8,5,2,8,7,5,8,2,0],[9,0,1,10,2,5,5,2,3,5,3,7],[1,10,2,5,8,7,5,9,8],[2,11,1,11,7,1,1,7,5],[0,8,3,2,11,1,1,11,7,1,7,5],[9,0,2,9,2,7,2,11,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[8,7,0,0,7,1,7,5,1],[0,3,9,9,3,5,3,7,5],[9,7,5,9,8,7],[4,5,8,5,10,8,8,10,11],[3,0,4,3,4,10,4,5,10,3,10,11],[0,1,9,4,5,8,8,5,10,8,10,11],[5,9,4,1,11,3,1,10,11],[3,8,4,3,4,2,2,4,5,2,5,10],[10,2,5,5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[8,4,5,2,8,5,2,11,8,2,5,1],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[4,5,8,8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[7,4,11,4,9,11,11,9,10],[3,0,8,7,4,11,11,4,9,11,9,10],[11,7,4,1,11,4,1,10,11,1,4,0],[8,7,4,11,1,10,11,3,1],[2,3,7,2,7,9,7,4,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[2,11,7,2,7,1,1,7,4,1,4,9],[3,2,11,4,8,7,9,1,0],[7,4,11,11,4,2,4,0,2],[2,11,3,7,4,8],[9,1,4,4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[0,9,3,3,9,11,9,10,11],[1,10,0,0,10,8,10,11,8],[10,3,1,10,11,3],[3,8,2,2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[2,11,1,1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]];return e},n.MarchingCube=n.MarchingCubeInitializer(),n.Parsers=function(){var e={},t=function(e){for(var t=0,n=e.length;t<n;t++)e[t].index||(e[t].index=t);for(var r={},o=0;o<e.length;o++){var i=e[o],a=Math.floor(i.x/4.95),s=Math.floor(i.y/4.95),l=Math.floor(i.z/4.95);r[a]||(r[a]={}),r[a][s]||(r[a][s]={}),r[a][s][l]||(r[a][s][l]=[]),r[a][s][l].push(i)}var u=[{x:0,y:0,z:1},{x:0,y:1,z:-1},{x:0,y:1,z:0},{x:0,y:1,z:1},{x:1,y:-1,z:-1},{x:1,y:-1,z:0},{x:1,y:-1,z:1},{x:1,y:0,z:-1},{x:1,y:0,z:0},{x:1,y:0,z:1},{x:1,y:1,z:-1},{x:1,y:1,z:0},{x:1,y:1,z:1}];for(var a in r){a=parseInt(a);for(var s in r[a]){s=parseInt(s);for(var l in r[a][s]){l=parseInt(l);for(var p=r[a][s][l],t=0;t<p.length;t++)for(var f=p[t],d=t+1;d<p.length;d++){var h=p[d];c(f,h)&&-1==f.bonds.indexOf(h.index)&&(f.bonds.push(h.index),f.bondOrder.push(1),h.bonds.push(f.index),h.bondOrder.push(1))}for(var m=0;m<u.length;m++){var g=u[m];if(r[a+g.x]&&r[a+g.x][s+g.y]&&r[a+g.x][s+g.y][l+g.z]){var v=r[a+g.x][s+g.y][l+g.z];!function(e,t){for(var n=0;n<e.length;n++)for(var r=e[n],o=0;o<t.length;o++){var i=t[o];if(c(r,i)){var a=r.bonds.indexOf(i.index),s=i.bonds.indexOf(r.index);-1==a&&-1==s?(r.bonds.push(i.index),r.bondOrder.push(1),i.bonds.push(r.index),i.bondOrder.push(1)):-1==a?(r.bonds.push(i.index),r.bondOrder.push(i.bondOrder[s])):-1==s&&(i.bonds.push(r.index),i.bondOrder.push(r.bondOrder[a]))}}}(p,v)}}}}}},r=function(e){var n,r,o=[],i=[];for(n=0,r=e.length;n<r;n++){var a=e[n];a.index=n,a.hetflag?i.push(a):o.push(a)}t(i),o.sort(function(e,t){return e.chain!=t.chain?e.chain<t.chain?-1:1:e.resi-t.resi});var s,l=-1,u=-1;for(n=0,r=o.length;n<r;n++){var p=o[n];p.resi!==l&&(l=p.resi,s||u++,s=!1),p.reschain=u;for(var f=n+1;f<o.length;f++){var d=o[f];if(d.chain!=p.chain)break;if(d.resi-p.resi>1)break;c(p,d)&&(-1===p.bonds.indexOf(d.index)&&(p.bonds.push(d.index),p.bondOrder.push(1),d.bonds.push(p.index),d.bondOrder.push(1)),p.resi!==d.resi&&(s=!0))}}},o=function(e){var t,n,r,o=[];for(t=0,r=e.length;t<r;t++){e[t].index=t;var i=e[t];i.hetflag||"N"!==i.atom&&"O"!==i.atom||(o.push(i),i.hbondOther=null,i.hbondDistanceSq=Number.POSITIVE_INFINITY)}for(o.sort(function(e,t){return e.z-t.z}),t=0,r=o.length;t<r;t++){var a=o[t];for(n=t+1;n<r;n++){var s=o[n],l=s.z-a.z;if(l>3.2)break;if(s.atom!=a.atom){var u=Math.abs(s.y-a.y);if(!(u>3.2)){var c=Math.abs(s.x-a.x);if(!(c>3.2)){var p=c*c+u*u+l*l;p>10.24||s.chain==a.chain&&Math.abs(s.resi-a.resi)<4||(p<a.hbondDistanceSq&&(a.hbondOther=s,a.hbondDistanceSq=p),p<s.hbondDistanceSq&&(s.hbondOther=a,s.hbondDistanceSq=p))}}}}}},a=function(e){o(e);var t,n,r,i,a,s,l={};for(t=0,n=e.length;t<n;t++)if(a=e[t],void 0===l[a.chain]&&(l[a.chain]=[]),isFinite(a.hbondDistanceSq)){var u=a.hbondOther;void 0===l[u.chain]&&(l[u.chain]=[]),4===Math.abs(u.resi-a.resi)&&(l[a.chain][a.resi]="h")}for(r in l)for(i=1;i<l[r].length-1;i++){var c=l[r][i-1],p=l[r][i+1];s=l[r][i],"h"==c&&c==p&&s!=c&&(l[r][i]=c)}for(t=0,n=e.length;t<n;t++)a=e[t],isFinite(a.hbondDistanceSq)&&"h"!=l[a.chain][a.resi]&&"h"!=a.ss&&(l[a.chain][a.resi]="maybesheet");for(t=0,n=e.length;t<n;t++)if(a=e[t],isFinite(a.hbondDistanceSq)&&"maybesheet"==l[a.chain][a.resi]){var u=a.hbondOther,f=l[u.chain][u.resi];"maybesheet"!=f&&"s"!=f||(l[a.chain][a.resi]="s",l[u.chain][u.resi]="s")}for(r in l){for(i=1;i<l[r].length-1;i++){var c=l[r][i-1],p=l[r][i+1];s=l[r][i],"s"==c&&c==p&&s!=c&&(l[r][i]=c)}for(i=0;i<l[r].length;i++)"h"!=(s=l[r][i])&&"s"!=s||l[r][i-1]!=s&&l[r][i+1]!=s&&delete l[r][i]}for(t=0,n=e.length;t<n;t++)a=e[t],void 0!==(s=l[a.chain][a.resi])&&"maybesheet"!=s&&(a.ss=s,l[a.chain][a.resi-1]!=s&&(a.ssbegin=!0),l[a.chain][a.resi+1]!=s&&(a.ssend=!0))},s=function(e,t){for(var n=0,r=e.length;n<r;n++)for(var o=e[n],i=0;i<o.bonds.length;i++){var a=o.bonds[i],s=e[a],l=t[o.serial];if(s&&l){var u=s.bonds.indexOf(l);u<0&&(s.bonds.push(l),s.bondOrder.push(o.bondOrder[i]))}}};e.vasp=e.VASP=function(e,t){var r=[[]],o={},i=e.replace(/^\s+/,"").split(/[\n\r]/);if(i.length<3)return r;if(!i[1].match(/\d+/))return console.log("Warning: second line of the vasp structure file must be a number"),r;if(o.length=parseFloat(i[1]),o.length<0)return console.log("Warning: Vasp implementation for negative lattice lengths is not yet available"),r;o.xVec=new Float32Array(i[2].replace(/^\s+/,"").split(/\s+/)),o.yVec=new Float32Array(i[3].replace(/^\s+/,"").split(/\s+/)),o.zVec=new Float32Array(i[4].replace(/^\s+/,"").split(/\s+/));var a=new n.Matrix4(o.xVec[0],o.xVec[1],o.xVec[2],0,o.yVec[0],o.yVec[1],o.yVec[2],0,o.zVec[0],o.zVec[1],o.zVec[2],0,0,0,0,1);a.multiplyScalar(o.length);var s=(r.modelData=[{symmetries:[],cryst:{matrix:a}}],i[5].replace(/\s+/,"").replace(/\s+$/,"").split(/\s+/)),l=new Int16Array(i[6].replace(/^\s+/,"").split(/\s+/)),u=i[7].replace(/\s+/,"");if(u.match(/C/))u="cartesian";else{if(!u.match(/D/))return console.log("Warning: Unknown vasp mode in POSCAR file: mode must be either C(artesian) or D(irect)"),r;u="direct"}if(s.length!=l.length)return console.log("Warning: declaration of atomary species wrong:"),console.log(s),console.log(l),r;i.splice(0,8);for(var c=0,p=0,f=s.length;p<f;p++){for(var d=s[p],h=0,m=l[p];h<m;h++){var g=new Float32Array(i[c+h].replace(/^\s+/,"").split(/\s+/));atom={},atom.elem=d,"cartesian"==u?(atom.x=o.length*g[0],atom.y=o.length*g[1],atom.z=o.length*g[2]):(atom.x=o.length*(g[0]*o.xVec[0]+g[1]*o.yVec[0]+g[2]*o.zVec[0]),atom.y=o.length*(g[0]*o.xVec[1]+g[1]*o.yVec[1]+g[2]*o.zVec[1]),atom.z=o.length*(g[0]*o.xVec[2]+g[1]*o.yVec[2]+g[2]*o.zVec[2])),atom.bonds=[],r[0].push(atom)}c+=l[p]}return r},e.cube=e.CUBE=function(e,n){var r=[[]],o=e.replace(/^\s+/,"").split(/\n\r|\r+/);if(o.length<6)return r;var i=o[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),a=Math.abs(parseFloat(i[0]));i=o[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var s=parseFloat(i[0])>0?.529177:1;o=o.splice(6,a);for(var l=r[r.length-1].length,u=l+o.length,c=l;c<u;++c){var p={};p.serial=c;var f=o[c-l],d=f.replace(/^\s+/,"").replace(/\s+/g," ").split(" ");6==d[0]?p.elem="C":1==d[0]?p.elem="H":8==d[0]?p.elem="O":17==d[0]&&(p.elem="Cl"),p.x=parseFloat(d[2])*s,p.y=parseFloat(d[3])*s,p.z=parseFloat(d[4])*s,p.hetflag=!0,p.bonds=[],p.bondOrder=[],p.properties={},r[r.length-1].push(p)}for(var c=0;c<r.length;c++)t(r[c]);return r},e.xyz=e.XYZ=function(e,n){for(var r=[[]],o=e.split(/\r?\n|\r/);o.length>0&&!(o.length<3);){var i=parseInt(o[0]);if(isNaN(i)||i<=0)break;if(o.length<i+2)break;for(var a=2,s=r[r.length-1].length,l=s+i,u=s;u<l;u++){var c=o[a++],p=c.replace(/^\s+/,"").replace(/\s+/g," ").split(" "),f={};f.serial=u;var d=p[0];f.atom=f.elem=d[0].toUpperCase()+d.substr(1).toLowerCase(),f.x=parseFloat(p[1]),f.y=parseFloat(p[2]),f.z=parseFloat(p[3]),f.hetflag=!0,f.bonds=[],f.bondOrder=[],f.properties={},r[r.length-1][u]=f,p.length>=7&&(f.dx=parseFloat(p[4]),f.dy=parseFloat(p[5]),f.dz=parseFloat(p[6]))}if(!n.multimodel)break;r.push([]),o.splice(0,a)}for(var u=0;u<r.length;u++)t(r[u]);if(n.onemol){var h=r;r=[],r.push(h[0]);for(var u=1;u<h.length;u++)for(var a=r[0].length,m=0;m<h[u].length;m++){for(var g=h[u][m],v=0;v<g.bonds.length;v++)g.bonds[v]=g.bonds[v]+a;g.index=r[0].length,g.serial=r[0].length,r[0].push(g)}}return r},e.sdf=e.SDF=function(e,t){var n=[[]],r=!1;void 0!==t.keepH&&(r=!t.keepH);for(var o=e.split(/\r?\n|\r/);o.length>0&&!(o.length<4);){var i=parseInt(o[3].substr(0,3));if(isNaN(i)||i<=0)break;var a=parseInt(o[3].substr(3,3)),s=4;if(o.length<4+i+a)break;var l,u,c=[],p=n[n.length-1].length,f=p+i;for(l=p;l<f;l++,s++){u=o[s];var d={},h=u.substr(31,3).replace(/ /g,"");d.atom=d.elem=h[0].toUpperCase()+h.substr(1).toLowerCase(),"H"==d.elem&&r||(d.serial=l,c[l]=n[n.length-1].length,d.x=parseFloat(u.substr(0,10)),d.y=parseFloat(u.substr(10,10)),d.z=parseFloat(u.substr(20,10)),d.hetflag=!0,d.bonds=[],d.bondOrder=[],d.properties={},d.index=n[n.length-1].length,n[n.length-1].push(d))}for(l=0;l<a;l++,s++){u=o[s];var m=c[parseInt(u.substr(0,3))-1+p],g=c[parseInt(u.substr(3,3))-1+p],v=parseInt(u.substr(6,3));void 0!==m&&void 0!==g&&(n[n.length-1][m].bonds.push(g),n[n.length-1][m].bondOrder.push(v),n[n.length-1][g].bonds.push(m),n[n.length-1][g].bondOrder.push(v))}if(!t.multimodel)break;for(t.onemol||n.push([]);"$$$$"!=o[s];)s++;o.splice(0,++s)}return n},e.cdjson=e.json=function(e,t){var n=[[]];"string"==typeof e&&(e=JSON.parse(e));for(var r=e.m,o=r[0].a,i=r[0].b,a=r[0].s,s=void 0!==t&&void 0!==t.parseStyle?t.parseStyle:void 0!==a,l=n[n.length-1].length,u=0;u<o.length;u++){var c=o[u],p={};p.id=c.i,p.x=c.x,p.y=c.y,p.z=c.z||0,p.bonds=[],p.bondOrder=[];var f=c.l||"C";p.elem=f[0].toUpperCase()+f.substr(1).toLowerCase(),p.serial=n[n.length-1].length,s&&(p.style=a[c.s||0]),n[n.length-1].push(p)}for(var u=0;u<i.length;u++){var d=i[u],h=d.b+l,m=d.e+l,g=d.o||1,v=n[n.length-1][h],y=n[n.length-1][m];v.bonds.push(m),v.bondOrder.push(g),y.bonds.push(h),y.bondOrder.push(g)}return n},e.mcif=e.cif=function(e,r){function o(e){return e*e}for(var i=[],s=!r.doAssembly,l=!r.duplicateAssemblyAtoms,u=i.modelData=[],c=e.split(/\r?\n|\r/),f=[],d=!1,h=0;h<c.length;h++){var m=c[h].split("#")[0];if(d?";"===m[0]&&(d=!1):";"===m[0]&&(d=!0),d||""!==m){if(!d&&(m=m.trim(),"_"===m[0])){var g=m.split(/\s/)[0].indexOf(".");g>-1&&(m[g]="_",m=m.substr(0,g)+"_"+m.substr(g+1))}f.push(m)}}for(var h=0;h<f.length;){for(;!f[h].startsWith("data_")||"data_global"===f[h];)h++;h++;for(var v={};h<f.length&&!f[h].startsWith("data_");)if(void 0===f[h][0])h++;else if("_"===f[h][0]){var y=f[h].split(/\s/)[0].toLowerCase(),b=v[y]=v[y]||[],w=f[h].substr(f[h].indexOf(y)+y.length);if(""===w)if(h++,";"===f[h][0]){var x=f[h].substr(1);for(h++;";"!==f[h];)x=x+"\n"+f[h],h++;b.push(x)}else b.push(f[h]);else b.push(w.trim());h++}else if("loop_"===f[h].substr(0,5)){h++;for(var _=[];""===f[h]||"_"===f[h][0];){if(""!==f[h]){var y=f[h].split(/\s/)[0].toLowerCase(),b=v[y]=v[y]||[];_.push(b)}h++}for(var S=0;h<f.length&&"_"!==f[h][0]&&!f[h].startsWith("loop_")&&!f[h].startsWith("data_");){for(var m=function(e,t){for(var n=[],r=0,o=0;o<e.length;){for(;e.substr(o,t.length)!==t&&o<e.length;){if("'"===e[o])for(o++;o<e.length&&"'"!==e[o];)o++;else if('"'===e[o])for(o++;o<e.length&&'"'!==e[o];)o++;o++}n.push(e.substr(r,o-r)),r=o+=t.length}return n}(f[h]," "),C=0;C<m.length;C++)""!==m[C]&&(_[S].push(m[C]),S=(S+1)%_.length);h++}}else h++;u.push({symmetries:[]}),i.push([]);var k,A=void 0!==v._atom_site_id?v._atom_site_id.length:v._atom_site_label.length;if(void 0!==v._cell_length_a){var E=parseFloat(v._cell_length_a),M=parseFloat(v._cell_length_b),T=parseFloat(v._cell_length_c),O=parseFloat(v._cell_angle_alpha)||90,I=parseFloat(v._cell_angle_beta)||90,P=parseFloat(v._cell_angle_gamma)||90,j=O*Math.PI/180,D=I*Math.PI/180,N=P*Math.PI/180,R=Math.cos(j),F=Math.cos(D),L=Math.cos(N),z=Math.sin(N);k=[[E,M*L,T*F],[0,M*z,T*(R-F*L)/z],[0,0,T*Math.sqrt(1-o(R)-o(F)-o(L)+2*R*F*L)/z]],u[u.length-1].cryst={a:E,b:M,c:T,alpha:O,beta:I,gamma:P}}for(var B=0;B<A;B++)if(void 0===v._atom_site_group_pdb||"TER"!==v._atom_site_group_pdb[B]){var q={};if(void 0!==v._atom_site_cartn_x)q.x=parseFloat(v._atom_site_cartn_x[B]),q.y=parseFloat(v._atom_site_cartn_y[B]),q.z=parseFloat(v._atom_site_cartn_z[B]);else{var V=function(e,t,n){return{x:k[0][0]*e+k[0][1]*t+k[0][2]*n,y:k[1][0]*e+k[1][1]*t+k[1][2]*n,z:k[2][0]*e+k[2][1]*t+k[2][2]*n}}(parseFloat(v._atom_site_fract_x[B]),parseFloat(v._atom_site_fract_y[B]),parseFloat(v._atom_site_fract_z[B]));q.x=V.x,q.y=V.y,q.z=V.z}q.chain=v._atom_site_auth_asym_id?v._atom_site_auth_asym_id[B]:void 0,q.resi=v._atom_site_auth_seq_id?parseInt(v._atom_site_auth_seq_id[B]):void 0,q.resn=v._atom_site_auth_comp_id?v._atom_site_auth_comp_id[B].trim():void 0,q.atom=v._atom_site_auth_atom_id?v._atom_site_auth_atom_id[B].replace(/"/gm,""):void 0,q.hetflag=!v._atom_site_group_pdb||"HETA"===v._atom_site_group_pdb[B]||"HETATM"===v._atom_site_group_pdb[B];var U=v._atom_site_type_symbol[B];q.elem=U[0].toUpperCase()+U.substr(1).toLowerCase(),q.bonds=[],q.ss="c",q.serial=B,q.bondOrder=[],q.properties={},i[i.length-1].push(q)}if(void 0!==v._pdbx_struct_oper_list_id&&!s){for(var B=0;B<v._pdbx_struct_oper_list_id.length;B++){var H=parseFloat(v["_pdbx_struct_oper_list_matrix[1][1]"][B]),G=parseFloat(v["_pdbx_struct_oper_list_matrix[1][2]"][B]),W=parseFloat(v["_pdbx_struct_oper_list_matrix[1][3]"][B]),Z=parseFloat(v["_pdbx_struct_oper_list_vector[1]"][B]),Y=parseFloat(v["_pdbx_struct_oper_list_matrix[2][1]"][B]),X=parseFloat(v["_pdbx_struct_oper_list_matrix[2][2]"][B]),K=parseFloat(v["_pdbx_struct_oper_list_matrix[2][3]"][B]),Q=parseFloat(v["_pdbx_struct_oper_list_vector[2]"][B]),J=parseFloat(v["_pdbx_struct_oper_list_matrix[3][1]"][B]),$=parseFloat(v["_pdbx_struct_oper_list_matrix[3][2]"][B]),ee=parseFloat(v["_pdbx_struct_oper_list_matrix[3][3]"][B]),te=parseFloat(v["_pdbx_struct_oper_list_vector[3]"][B]),ne=new n.Matrix4(H,G,W,Z,Y,X,K,Q,J,$,ee,te);u[u.length-1].symmetries.push(ne)}for(var B=0;B<i.length;B++)p(u[u.length-1].symmetries,l,i[B])}if(void 0!==v._symmetry_equiv_pos_as_xyz)for(var re=0;re<v._symmetry_equiv_pos_as_xyz.length;re++){for(var oe=v._symmetry_equiv_pos_as_xyz[re].replace(/["' ]/g,""),ie=oe.split(",").map(function(e){return e.replace(/-/g,"+-")}),ne=new n.Matrix4(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1),ae=0;ae<3;ae++)for(var se=ie[ae].split("+"),le=0;le<se.length;le++){var ue=se[le];if(""!==ue){var ce=function(e){var t=e.match("-");e=e.replace(/[-xyz]/g,"");var n,r=e.split("/");return n=void 0===r[1]?1:parseInt(r[1]),(""===r[0]?1:parseInt(r[0]))/n*(t?-1:1)}(ue);ue.match("x")?ne.elements[ae+0]=ce:ue.match("y")?ne.elements[ae+4]=ce:ue.match("z")?ne.elements[ae+8]=ce:ne.elements[ae+12]=ce}}var pe=new n.Matrix4(k[0][0],k[0][1],k[0][2],0,k[1][0],k[1][1],k[1][2],0,k[2][0],k[2][1],k[2][2],0),fe=(new n.Matrix4).getInverse(pe,!0);ne=(new n.Matrix4).multiplyMatrices(ne,fe),ne=(new n.Matrix4).multiplyMatrices(pe,ne),u[u.length-1].symmetries.push(ne)}}for(var B=0;B<i.length;B++)t(i[B]),a(i[B]),p(u[B].symmetries,l,i[B]);return i},e.mol2=e.MOL2=function(e,t){var n=[[]],r=!1;void 0!==t.keepH&&(r=!t.keepH);for(var o=e.substr(i,e.length).split(/\r?\n|\r/);o.length>0;){var i=e.search(/@<TRIPOS>MOLECULE/),a=e.search(/@<TRIPOS>ATOM/);if(-1==i||-1==a)break;var s=[],l=o[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),u=parseInt(l[0]),c=0;l.length>1&&(c=parseInt(l[1]));var p,f=4;for(p=3;p<o.length;p++)if("@<TRIPOS>ATOM"==o[p]){f=p+1;break}var d,h=n[n.length-1].length,m=h+u;for(p=h;p<m;p++){d=o[f++],l=d.replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var g={},v=l[5].split(".")[0];if(g.atom=g.elem=v[0].toUpperCase()+v.substr(1).toLowerCase(),"H"==g.elem&&r);else{var y=n[n.length-1].length,b=parseInt(l[0]);g.serial=b,g.x=parseFloat(l[2]),g.y=parseFloat(l[3]),g.z=parseFloat(l[4]),g.atom=l[5];var w=parseFloat(l[8]);g.index=y,g.bonds=[],g.bondOrder=[],g.properties={charge:w,partialCharge:w},s[b]=y,n[n.length-1].push(g)}}for(var x=!1;f<o.length;)if("@<TRIPOS>BOND"==o[f++]){x=!0;break}if(x&&c)for(p=0;p<c;p++){d=o[f++],l=d.replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var _=parseInt(l[1]);fromAtom=n[n.length-1][s[_]];var S=parseInt(l[2]);toAtom=n[n.length-1][s[S]];var C=parseInt(l[3]);isNaN(C)&&(C=1),void 0!==fromAtom&&void 0!==toAtom&&(fromAtom.bonds.push(s[S]),fromAtom.bondOrder.push(C),toAtom.bonds.push(s[_]),toAtom.bondOrder.push(C))}if(!t.multimodel)break;t.onemol||n.push([]),o.splice(0,f),e=o.join("\n")}return n};var l={H:.37,He:.32,Li:1.34,Be:.9,B:.82,C:.77,N:.75,O:.73,F:.71,Ne:.69,Na:1.54,Mg:1.3,Al:1.18,Si:1.11,P:1.06,S:1.02,Cl:.99,Ar:.97,K:1.96,Ca:1.74,Sc:1.44,Ti:1.56,V:1.25,Mn:1.39,Fe:1.25,Co:1.26,Ni:1.21,Cu:1.38,Zn:1.31,Ga:1.26,Ge:1.22,Se:1.16,Br:1.14,Kr:1.1,Rb:2.11,Sr:1.92,Y:1.62,Zr:1.48,Nb:1.37,Mo:1.45,Tc:1.56,Ru:1.26,Rh:1.35,Pd:1.31,Ag:1.53,Cd:1.48,In:1.44,Sn:1.41,Sb:1.38,Te:1.35,I:1.33,Xe:1.3,Cs:2.25,Ba:1.98,Lu:1.6,Hf:1.5,Ta:1.38,W:1.46,Re:1.59,Os:1.44,Ir:1.37,Pt:1.28,Au:1.44,Hg:1.49,Tl:1.48,Pb:1.47,Bi:1.46,Rn:1.45},u=function(e){return l[e]||1.6},c=function(e,t){var n=u(e.elem)+u(t.elem);n+=.25,n*=n;var r=e.x-t.x;if((r*=r)>n)return!1;var o=e.y-t.y;if((o*=o)>n)return!1;var i=e.z-t.z;if((i*=i)>n)return!1;var a=r+o+i;return!isNaN(a)&&(!(a<.5)&&(!(a>n)&&(e.altLoc==t.altLoc||" "==e.altLoc||" "==t.altLoc)))},p=function(e,t,r){var o,i,a,s=r.length,l=s;if(t){if(e.length>1)for(o=0;o<r.length;o++){var u=[];for(i=0;i<e.length;i++)if(!e[i].isIdentity()){var c=new n.Vector3;c.set(r[o].x,r[o].y,r[o].z),c.applyMatrix4(e[i]),u.push(c)}r[o].symmetries=u}}else for(o=0;o<e.length;o++)if(!e[o].isIdentity()){var p=new n.Vector3;for(a=0;a<s;a++){var f=[];for(i=0;i<r[a].bonds.length;i++)f.push(r[a].bonds[i]+l);p.set(r[a].x,r[a].y,r[a].z),p.applyMatrix4(e[o]);var d={};for(var h in r[a])d[h]=r[a][h];d.x=p.x,d.y=p.y,d.z=p.z,d.bonds=f,r.push(d)}l=r.length}},f=function(e){var t;for(t in e)return!1;return!0},d=function(e,t,o){var i,u,c,d,h=[],m=!t.keepH,g=!!t.noSecondaryStructure,v=!t.noComputeSecondaryStructure,y=!t.doAssembly,b=!t.duplicateAssemblyAtoms,w=t.altLoc?t.altLoc:"A",x={symmetries:[]},_=[],S=[],C={};for(u=0;u<e.length;u++){d=e[u].replace(/^\s*/,"");var k,A,E,M=d.substr(0,6);if(0==M.indexOf("END")){if(_=e.slice(u+1),"END"==M)for(var T in o)o.hasOwnProperty(T)&&delete o[T];break}if("ATOM  "==M||"HETATM"==M){var O,I,P,j,D,N,R,F,L,z,B,q;if(" "!=(B=d.substr(16,1))&&B!=w&&"*"!=w)continue;if(z=parseInt(d.substr(6,5)),i=d.substr(12,4).replace(/ /g,""),O=d.substr(17,3).replace(/ /g,""),I=d.substr(21,1),P=parseInt(d.substr(22,4)),j=d.substr(26,1),D=parseFloat(d.substr(30,8)),N=parseFloat(d.substr(38,8)),R=parseFloat(d.substr(46,8)),q=parseFloat(d.substr(60,8)),L=d.substr(76,2).replace(/ /g,""),""===L||void 0===l[L]?(L=d.substr(12,2).replace(/ /g,""),L.length>0&&"H"==L[0]&&"Hg"!=L&&(L="H"),L.length>1&&(L=L[0].toUpperCase()+L.substr(1).toLowerCase(),void 0===l[L]?L=L[0]:"A"==d[0]&&"Ca"==L&&(L="C"))):L=L[0].toUpperCase()+L.substr(1).toLowerCase(),"H"==L&&m)continue;F="H"==M[0],S[z]=h.length,h.push({resn:O,x:D,y:N,z:R,elem:L,hetflag:F,altLoc:B,chain:I,resi:P,icode:j,rescode:P+(" "!=j?"^"+j:""),serial:z,atom:i,bonds:[],ss:"c",bondOrder:[],properties:{},b:q,pdbline:d})}else if("SHEET "==M){!0,k=d.substr(21,1),A=parseInt(d.substr(22,4)),d.substr(32,1),E=parseInt(d.substr(33,4)),k in o||(o[k]={}),o[k][A]="s1";for(var V=A+1;V<E;V++)o[k][V]="s";o[k][E]="s2"}else if("CONECT"==M){var U=parseInt(d.substr(6,5)),H=S[U],G=h[H],W=[11,16,21,26];for(c=0;c<4;c++){var Z=parseInt(d.substr(W[c],5)),Y=S[Z],X=h[Y];if(void 0!==G&&void 0!==X)if(C[[H,Y]]){C[[H,Y]]+=1;for(var K=0;K<G.bonds.length;K++)if(G.bonds[K]==Y){var Q=C[[H,Y]];G.bondOrder[K]=Q>=4?1:Q}}else C[[H,Y]]=1,0!=G.bonds.length&&G.bonds[G.bonds.length-1]==Y||(G.bonds.push(Y),G.bondOrder.push(1))}}else if("HELIX "==M){!0,k=d.substr(19,1),A=parseInt(d.substr(21,4)),d.substr(31,1),E=parseInt(d.substr(33,4)),k in o||(o[k]={}),o[k][A]="h1";for(var V=A+1;V<E;V++)o[k][V]="h";o[k][E]="h2"}else if(y||"REMARK"!=M||"BIOMT"!=d.substr(13,5)){if("CRYST1"==M){var J,q,$,ee,te,ne;J=parseFloat(d.substr(7,8)),q=parseFloat(d.substr(16,8)),$=parseFloat(d.substr(25,8)),ee=parseFloat(d.substr(34,6)),te=parseFloat(d.substr(41,6)),ne=parseFloat(d.substr(48,6)),x.cryst={a:J,b:q,c:$,alpha:ee,beta:te,gamma:ne}}else if("ANISOU"==M){var z=parseInt(d.substr(6,5)),re=S[z],oe=h[re];if(oe){var ie=d.substr(30).trim().split(/\s+/),ae={u11:parseInt(ie[0]),u22:parseInt(ie[1]),u33:parseInt(ie[2]),u12:parseInt(ie[3]),u13:parseInt(ie[4]),u23:parseInt(ie[5])};oe.uMat=ae}}}else{var se,le=new n.Matrix4;for(se=1;se<=3;se++)if(d=e[u].replace(/^\s*/,""),parseInt(d.substr(18,1))==se)le.elements[se-1]=parseFloat(d.substr(23,10)),le.elements[se-1+4]=parseFloat(d.substr(33,10)),le.elements[se-1+8]=parseFloat(d.substr(43,10)),le.elements[se-1+12]=parseFloat(d.substr(53)),u++;else for(;"BIOMT"==d.substr(13,5);)u++,d=e[u].replace(/^\s*/,"");le.elements[3]=0,le.elements[7]=0,le.elements[11]=0,le.elements[15]=1,x.symmetries.push(le),u--}}(new Date).getTime();if(s(h,S),r(h),y||p(x.symmetries,b,h),v&&!g&&((new Date).getTime(),a(h)),(new Date).getTime(),!f(o))for(u=0;u<h.length;u++)if(void 0!==(i=h[u])&&i.chain in o&&i.resi in o[i.chain]){var ue=o[i.chain][i.resi];i.ss=ue[0],ue.length>1&&("1"==ue[1]?i.ssbegin=!0:"2"==ue[1]&&(i.ssend=!0))}return[h,x,_]};e.pdb=e.PDB=e.pdbqt=e.PDBQT=function(e,t){var n=[],r={};n.modelData=[];for(var o=e.split(/\r?\n|\r/);o.length>0;){var i=d(o,t,r),a=i[0],s=i[1];if(o=i[2],0!=a.length){if(t.multimodel&&t.onemol&&n.length>0)for(var l=n[0].length,u=0;u<a.length;u++){var c=a[u];c.index=u;for(var p=0;p<c.bonds.length;p++)c.bonds[p]+=l;n[0].push(c)}else n.modelData.push(s),n.push(a);if(!t.multimodel)break}}return n},e.pqr=e.PQR=function(e,t){var n,o,i,s,l=[[]],u=(l[l.length-1].length,!t.noSecondaryStructure),c=(t.doAssembly,t.duplicateAssemblyAtoms,l.modelData=[{symmetries:[]}],[]),p=e.split(/\r?\n|\r/);for(o=0;o<p.length;o++){s=p[o].replace(/^\s*/,"");var f=s.substr(0,6);if(0==f.indexOf("END")){if(t.multimodel){t.onemol||l.push([]);continue}break}if("ATOM  "==f||"HETATM"==f){var d,h=parseInt(s.substr(6,5)),n=s.substr(12,4).replace(/ /g,""),m=s.substr(17,3),g=s.substr(21,1),v=parseInt(s.substr(22,4)),y=s.substr(30).trim().split(/\s+/),b=parseFloat(y[0]),w=parseFloat(y[1]),x=parseFloat(y[2]),_=parseFloat(y[3]),S=parseFloat(y[4]),C=n[0];n.length>1&&n[1].toUpperCase()!=n[1]&&(C=n.substr(0,2)),d="H"==s[0],c[h]=l[l.length-1].length,l[l.length-1].push({resn:m,x:b,y:w,z:x,elem:C,hetflag:d,chain:g,resi:v,serial:h,atom:n,bonds:[],ss:"c",bondOrder:[],properties:{charge:_,partialCharge:_,radius:S},pdbline:s})}else if("CONECT"==f){var k=parseInt(s.substr(6,5)),A=l[l.length-1][c[k]];for(i=0;i<4;i++){var E=parseInt(s.substr([11,16,21,26][i],5)),M=l[l.length-1][c[E]];void 0!==A&&void 0!==M&&(A.bonds.push(c[E]),A.bondOrder.push(1))}}}for(var o=0;o<l.length;o++)r(l[o]),u&&a(l[o]);return l};var h=function(e){return String.fromCharCode.apply(null,e).replace(/\0/g,"")},m=function(e){return 2==e?"h":3==e?"s":"c"};return e.mmtf=e.MMTF=function(e,t){var r=!t.keepH,o=t.altLoc?t.altLoc:"A",i=!!t.noSecondaryStructure,s=!t.noComputeSecondaryStructure,l=!t.doAssembly,u=!t.duplicateAssemblyAtoms,c=t.assemblyIndex?t.assemblyIndex:0,f=MMTF.decode(e),d=[[]],g=d.modelData=[],v=0,y=0,b=0,w=0,x=(f.chainNameList,f.secStructList),_=f.insCodeList,S=f.sequenceIndexList,C=f.bFactorList,k=f.altLocList,A=f.occupancyList,E=f.bondAtomList,M=f.bondOrderList,T=f.numModels;if(0==T)return d;t.multimodel||(T=1);var O,I,P,j,D,N,R=[];if(!l&&f.bioAssemblyList&&f.bioAssemblyList.length>0){var F=f.bioAssemblyList[c].transformList;for(O=0,N=F.length;O<N;O++){var L=new n.Matrix4(F[O].matrix);L.transpose(),R.push(L)}}var z=0;for(D=0;D<T;D++){var B=f.chainsPerModel[D],q=d[d.length-1],V=[];for(g.push({symmetries:R}),O=0;O<B;++O){var U=f.groupsPerChain[y],H=h(f.chainIdList.subarray(4*y,4*y+4));f.chainNameList&&(H=h(f.chainNameList.subarray(4*y,4*y+4)));var G=b,W="";for(I=0;I<U;++I){var Z=f.groupList[f.groupTypeList[b]],Y=Z.atomNameList.length,X=0,K=!1,Q=!1;if(x){X=x[b];var J=m(X);0!=b&&J==W||(K=!0),W=J;var $=b+1;($>=x.length||m(x[$]!=J))&&(Q=!0)}f.insCodeList&&String.fromCharCode(_[b]);S&&S[b];var ee=f.groupIdList[b],te=Z.groupName,ne=w;for(P=0;P<Y;++P){var re=Z.elementList[P];if(r&&"H"==re)w+=1;else{var oe="";C&&(oe=C[w]);var ie="";k&&k[w]&&(ie=String.fromCharCode(k[w]));var ae="";if(A&&(ae=A[w]),""==ie||ie==o||"*"==o){var se=f.atomIdList[w],le=Z.atomNameList[P],ue=0;Z.atomChargeList&&(ue=Z.atomChargeList[P]);var ce=f.xCoordList[w],pe=f.yCoordList[w],fe=f.zCoordList[w];V[w]=q.length,q.push({resn:te,x:ce,y:pe,z:fe,elem:re,hetflag:X<0,chain:H,resi:ee,icode:ie,rescode:ee+(" "!=ie?"^"+ie:""),serial:se,altLoc:ie,index:w,atom:le,bonds:[],ss:m(X),ssbegin:K,ssend:Q,bondOrder:[],properties:{charge:ue,occupancy:ae},b:oe}),w+=1}else w+=1}}var de=Z.bondAtomList;for(P=0,j=Z.bondOrderList.length;P<j;++P){var he=ne+de[2*P],me=ne+de[2*P+1],ge=Z.bondOrderList[P],ve=V[he],ye=V[me],be=q[ve],we=q[ye];be&&we&&(be.bonds.push(ye),be.bondOrder.push(ge),we.bonds.push(ve),we.bondOrder.push(ge))}b+=1}for(b=G,I=0;I<U;++I)b+=1;y+=1}if(E)for(P=z,j=E.length;P<j;P+=2){var he=E[P],me=E[P+1],ge=M?M[P/2]:1;if(he>=w){z=P;break}var ve=V[he],ye=V[me],be=q[ve],we=q[ye];be&&we&&(be.bonds.push(ye),be.bondOrder.push(ge),we.bonds.push(ve),we.bondOrder.push(ge))}if(t.multimodel&&(t.onemol||d.push([])),!l)for(var N=0;N<d.length;N++)p(g[v].symmetries,u,d[N]);v+=1}return s&&!i&&a(d),d},e.prmtop=e.PRMTOP=function(e,t){function n(e){var t=s.indexOf(l.filter(function(t){return t.includes(e)})[0]);if(Number.isInteger(t)&&t>0){for(;!s[t].includes("FORMAT");)t++;return t}return-1}function r(e){var t=s[e].match(/\((\d*)\S*/),n=s[e].match(/[a-zA-Z](\d*)\)\s*/);return null==n&&(n=s[e].match(/[a-zA-Z](\d*)\.\d*\)\s*/)),[t[1],n[1]]}var o=[],a=0,s=e.split(/\r?\n|\r/);if(!(s.length>0&&s[0].includes("VERSION")))return[];var l=s.filter(function(e){return e.includes("POINTERS")||e.includes("ATOM_NAME")||e.includes("CHARGE")||e.includes("RADII")||e.includes("BONDS_INC_HYDROGEN")||e.includes("BONDS_WITHOUT_HYDROGEN")}),u=n("POINTERS");if(-1==u)return[];var c=r(u),p=parseInt(s[u+1].slice(0,c[1]));if(isNaN(p)||p<=0)return[];if(-1==(u=n("ATOM_NAME")))return[];c=r(u);var f=c[0];for(i=0;i<p/c[0];i++){for(i==parseInt(p/c[0])&&(f=p%c[0]),j=0;j<f;j++){var d={},h={charge:"",radii:""};d.serial=a,d.x=0,d.y=0,d.z=0,d.atom=s[u+1].slice(c[1]*j,c[1]*(j+1)),d.elem=s[u+1].slice(c[1]*j,c[1]*j+1),d.properties=h,d.bonds=[],d.bondOrder=[],o.push(d),a++}u++}if(-1!=(u=n("CHARGE")))for(c=r(u),a=0,f=c[0],i=0;i<p/c[0];i++){for(i==parseInt(p/c[0])&&(f=p%c[0]),j=0;j<f;j++)o[a].properties.charge=s[u+1].slice(c[1]*j,c[1]*(j+1)),a++;u++}if(-1!=(u=n("RADII")))for(c=r(u),a=0,f=c[0],i=0;i<p/c[0];i++){for(i==parseInt(p/c[0])&&(f=p%c[0]),j=0;j<f;j++)o[a].properties.radii=s[u+1].slice(c[1]*j,c[1]*(j+1)),a++;u++}if(-1!=(u=n("BONDS_WITHOUT_HYDROGEN"))){c=r(u),a=0,f=c[0];var m;for(i=0;i<p/c[0];i++){for(i==parseInt(p/c[0])&&(f=p%c[0]),j=0;j<f;j++)a%3==0&&(m=parseInt(s[u+1].slice(c[1]*j,c[1]*(j+1))/3+1)),a%3==1&&o[m].bonds.push(parseInt(s[u+1].slice(c[1]*j,c[1]*(j+1))/3+1)),a++;u++}}if(-1!=(u=n("BONDS_INC_HYDROGEN"))){c=r(u),a=0,f=c[0];var m;for(i=0;i<p/c[0];i++){for(i==parseInt(p/c[0])&&(f=p%c[0]),j=0;j<f;j++)a%3==0&&(m=parseInt(s[u+1].slice(c[1]*j,c[1]*(j+1))/3+1)),a%3==1&&o[m].bonds.push(parseInt(s[u+1].slice(c[1]*j,c[1]*(j+1))/3+1)),a++;u++}}return[o]},e.gro=e.GRO=function(e,n){for(var r=[],o=e.split(/\r?\n|\r/);o.length>0&&!(o.length<3);){var i=parseInt(o[1]);if(isNaN(i)||i<=0)break;if(o.length<i+3)break;r.push([]);for(var a=2,s=r[r.length-1].length,l=s+i,u=s;u<l;u++){var c=o[a++],p={};p.serial=u,p.atom=c.slice(10,15).trim(),p.atom.charCodeAt(1)>=97&&p.atom.charCodeAt(1)<=122?p.elem=p.atom.slice(0,2):p.elem=p.atom[0],p.x=parseFloat(c.slice(20,28)),p.y=parseFloat(c.slice(28,36)),p.z=parseFloat(c.slice(36,44)),p.resi=c.slice(5,10),p.bonds=[],p.bondOrder=[],p.properties={},c.length>44&&(p.dx=parseFloat(c.slice(44,52)),p.dy=parseFloat(c.slice(52,60)),p.dz=parseFloat(c.slice(60,68))),r[r.length-1][u]=p}o.splice(0,++a)}for(var u=0;u<r.length;u++)t(r[u]);return r},e}();var n=n||{};n.partialCharges={"ALA:N":-.15,"ALA:CA":.1,"ALA:CB":0,"ALA:C":.6,"ALA:O":-.55,"ARG:N":-.15,"ARG:CA":.1,"ARG:CB":0,"ARG:CG":0,"ARG:CD":.1,"ARG:NE":-.1,"ARG:CZ":.5,"ARG:NH1":.25,"ARG:NH2":.25,"ARG:C":.6,"ARG:O":-.55,"ASN:N":-.15,"ASN:CA":.1,"ASN:CB":0,"ASN:CG":.55,"ASN:OD1":-.55,"ASN:ND2":0,"ASN:C":.6,"ASN:O":-.55,"ASP:N":-.15,"ASP:CA":.1,"ASP:CB":0,"ASP:CG":.14,"ASP:OD1":-.57,"ASP:OD2":-.57,"ASP:C":.6,"ASP:O":-.55,"CYS:N":-.15,"CYS:CA":.1,"CYS:CB":.19,"CYS:SG":-.19,"CYS:C":.6,"CYS:O":-.55,"GLN:N":-.15,"GLN:CA":.1,"GLN:CB":0,"GLN:CG":0,"GLN:CD":.55,"GLN:OE1":-.55,"GLN:NE2":0,"GLN:C":.6,"GLN:O":-.55,"GLU:N":-.15,"GLU:CA":.1,"GLU:CB":0,"GLU:CG":0,"GLU:CD":.14,"GLU:OE1":-.57,"GLU:OE2":-.57,"GLU:C":.6,"GLU:O":-.55,"GLY:N":-.15,"GLY:CA":.1,"GLY:C":.6,"GLY:O":-.55,"HIS:N":-.15,"HIS:CA":.1,"HIS:CB":0,"HIS:CG":.1,"HIS:ND1":-.1,"HIS:CD2":.1,"HIS:NE2":-.4,"HIS:CE1":.3,"HIS:C":.6,"HIS:O":-.55,"ILE:N":-.15,"ILE:CA":.1,"ILE:CB":0,"ILE:CG2":0,"ILE:CG1":0,"ILE:CD":0,"ILE:C":.6,"ILE:O":-.55,"LEU:N":-.15,"LEU:CA":.1,"LEU:CB":0,"LEU:CG":0,"LEU:CD1":0,"LEU:CD2":0,"LEU:C":.6,"LEU:O":-.55,"LYS:N":-.15,"LYS:CA":.1,"LYS:CB":0,"LYS:CG":0,"LYS:CD":0,"LYS:CE":.25,"LYS:NZ":.75,"LYS:C":.6,"LYS:O":-.55,"MET:N":-.15,"MET:CA":.1,"MET:CB":0,"MET:CG":.06,"MET:SD":-.12,"MET:CE":.06,"MET:C":.6,"MET:O":-.55,"PHE:N":-.15,"PHE:CA":.1,"PHE:CB":0,"PHE:CG":0,"PHE:CD1":0,"PHE:CD2":0,"PHE:CE1":0,"PHE:CE2":0,"PHE:CZ":0,"PHE:C":.6,"PHE:O":-.55,"PRO:N":-.25,"PRO:CD":.1,"PRO:CA":.1,"PRO:CB":0,"PRO:CG":0,"PRO:C":.6,"PRO:O":-.55,"SER:N":-.15,"SER:CA":.1,"SER:CB":.25,"SER:OG":-.25,"SER:C":.6,"SER:O":-.55,"THR:N":-.15,"THR:CA":.1,"THR:CB":.25,"THR:OG1":-.25,"THR:CG2":0,"THR:C":.6,"THR:O":-.55,"TRP:N":-.15,"TRP:CA":.1,"TRP:CB":0,"TRP:CG":-.03,"TRP:CD2":.1,"TRP:CE2":-.04,"TRP:CE3":-.03,"TRP:CD1":.06,"TRP:NE1":-.06,"TRP:CZ2":0,"TRP:CZ3":0,"TRP:CH2":0,"TRP:C":.6,"TRP:O":-.55,"TYR:N":-.15,"TYR:CA":.1,"TYR:CB":0,"TYR:CG":0,"TYR:CD1":0,"TYR:CE1":0,"TYR:CD2":0,"TYR:CE2":0,"TYR:CZ":.25,"TYR:OH":-.25,"TYR:C":.6,"TYR:O":-.55,"VAL:N":-.15,"VAL:CA":.1,"VAL:CB":0,"VAL:CG1":0,"VAL:CG2":0,"VAL:C":.6,"VAL:O":-.55},n.applyPartialCharges=function(e,t){if((!t||void 0===e.partialCharge)&&e.resn&&e.atom){var r=e.resn+":"+e.atom;e.properties.partialCharge=n.partialCharges[r]}},n.VolumeData=function(e,t,n){if(this.unit={x:1,y:1,z:1},this.origin={x:0,y:0,z:0},this.size={x:0,y:0,z:0},this.data=new Float32Array([]),this.matrix=null,t=t.toLowerCase(),/\.gz$/.test(t)){t=t.replace(/\.gz$/,"");try{e=this[t]&&this[t].isbinary?pako.inflate(e):new TextDecoder("utf-8").decode(pako.inflate(e))}catch(e){console.log(e)}}if(this[t]&&this[t](e),n){if(n.negate)for(var r=0,o=this.data.length;r<o;r++)this.data[r]=-this.data[r];if(n.normalize){for(var i=0,r=0,o=this.data.length;r<o;r++)i+=this.data[r];var a=i/this.data.length;console.log("computed mean: "+a),i=0;for(var r=0,o=this.data.length;r<o;r++){var s=this.data[r]-a;i+=s*s}var l=i/this.data.length;console.log("Computed variance: "+l);for(var r=0,o=this.data.length;r<o;r++)this.data[r]=(this.data[r]-a)/l}}},n.VolumeData.prototype.getVal=function(e,t,n){return e-=this.origin.x,t-=this.origin.y,n-=this.origin.z,e/=this.unit.x,t/=this.unit.y,n/=this.unit.z,e=Math.round(e),t=Math.round(t),n=Math.round(n),e<0||e>=this.size.x?0:t<0||t>=this.size.y?0:n<0||n>=this.size.z?0:this.data[e*this.size.y*this.size.z+t*this.size.z+n]},n.VolumeData.prototype.getCoordinates=function(e){var t=e/(this.size.y*this.size.z),n=e%(this.size.y*this.size.z),r=e%this.size.z;return t*=this.unit.x,n*=this.unit.y,r*=this.unit.z,t+=this.origin.x,n+=this.origin.y,r+=this.origin.z,{x:t,y:n,z:r}},n.VolumeData.prototype.vasp=function(e){var t=e.replace(/^\s+/,"").split(/[\n\r]/),r=n.Parsers.vasp(e)[0],o=r.length;if(0==o)return console.log("No good formating of CHG or CHGCAR file, not atomic information provided in the file."),void(this.data=[]);var i,a=1.889725992,s=parseFloat(t[1]);i=t[2].replace(/^\s+/,"").split(/\s+/);var l=new n.Vector3(parseFloat(i[0]),parseFloat(i[1]),parseFloat(i[2])).multiplyScalar(s*a);i=t[3].replace(/^\s+/,"").split(/\s+/);var u=new n.Vector3(parseFloat(i[0]),parseFloat(i[1]),parseFloat(i[2])).multiplyScalar(s*a);i=t[4].replace(/^\s+/,"").split(/\s+/);var c=new n.Vector3(parseFloat(i[0]),parseFloat(i[1]),parseFloat(i[2])).multiplyScalar(s*a),p=l.x*(u.y*c.z-c.y*u.z)-u.x*(l.y*c.z-c.y*l.z)+c.x*(l.y*u.z-u.y*l.z);p=Math.abs(p)/Math.pow(a,3);var f=1/p;t.splice(0,8+o+1);var d=t[0].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),h=Math.abs(d[0]),m=Math.abs(d[1]),g=Math.abs(d[2]),v=this.origin=new n.Vector3(0,0,0);this.size={x:h,y:m,z:g},this.unit=new n.Vector3(l.x,u.y,c.z),l=l.multiplyScalar(1/(a*h)),u=u.multiplyScalar(1/(a*m)),c=c.multiplyScalar(1/(a*g)),0==l.y&&0==l.z&&0==u.x&&0==u.z&&0==c.x&&0==c.y||(this.matrix=new n.Matrix4(l.x,u.x,c.x,0,l.y,u.y,c.y,0,l.z,u.z,c.z,0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,(new n.Matrix4).makeTranslation(v.x,v.y,v.z)),this.origin=new n.Vector3(0,0,0),this.unit=new n.Vector3(1,1,1)),t.splice(0,1);var y=t.join(" ");y=y.replace(/^\s+/,""),y=y.split(/[\s\r]+/),y.splice(h*m*g+1);for(var b=new Float32Array(y),w=0;w<b.length;w++)b[w]=b[w]*f*.036749309;this.data=b},n.VolumeData.prototype.dx=function(e){var t,r,o=e.split(/[\n\r]+/),i=/gridpositions\s+counts\s+(\d+)\s+(\d+)\s+(\d+)/,a=/^origin\s+(\S+)\s+(\S+)\s+(\S+)/,s=/^delta\s+(\S+)\s+(\S+)\s+(\S+)/,l=/data follows/;for(t=0;t<o.length;t++){var u=o[t];if(r=i.exec(u)){var c=parseInt(r[1]),p=parseInt(r[2]),f=parseInt(r[3]);this.size={x:c,y:p,z:f}}else if(r=s.exec(u)){var d=parseFloat(r[1]);if(0==parseFloat(r[2])&&0==parseFloat(r[3])||console.log("Non-orthogonal delta matrix not currently supported in dx format"),t+=1,u=o[t],null==(r=s.exec(u)))return void console.log("Parse error in dx delta matrix");var h=parseFloat(r[2]);if(0==parseFloat(r[1])&&0==parseFloat(r[3])||console.log("Non-orthogonal delta matrix not currently supported in dx format"),t+=1,u=o[t],null==(r=s.exec(u)))return void console.log("Parse error in dx delta matrix");var m=parseFloat(r[3]);0==parseFloat(r[1])&&0==parseFloat(r[2])||console.log("Non-orthogonal delta matrix not currently supported in dx format"),this.unit=new n.Vector3(d,h,m)}else if(r=a.exec(u)){var g=parseFloat(r[1]),v=parseFloat(r[2]),y=parseFloat(r[3]);this.origin=new n.Vector3(g,v,y)}else if(r=l.exec(u))break}if(t+=1,!(this.size&&this.origin&&this.unit&&this.size))return void console.log("Error parsing dx format");var b=o.splice(t).join(" ");b=b.split(/[\s\r]+/),this.data=new Float32Array(b)},n.VolumeData.prototype.cube=function(e){var t=e.replace(/^\s+/,"").split(/[\n\r]+/);if(!(t.length<6)){var r=t[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),o=parseFloat(r[0]),i=Math.abs(o),a=this.origin=new n.Vector3(parseFloat(r[1]),parseFloat(r[2]),parseFloat(r[3]));r=t[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var s=r[0]>0?.529177:1;a.multiplyScalar(s);var l=Math.abs(r[0]),u=new n.Vector3(parseFloat(r[1]),parseFloat(r[2]),parseFloat(r[3])).multiplyScalar(s);r=t[4].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var c=Math.abs(r[0]),p=new n.Vector3(parseFloat(r[1]),parseFloat(r[2]),parseFloat(r[3])).multiplyScalar(s);r=t[5].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var f=Math.abs(r[0]),d=new n.Vector3(parseFloat(r[1]),parseFloat(r[2]),parseFloat(r[3])).multiplyScalar(s);this.size={x:l,y:c,z:f},this.unit=new n.Vector3(u.x,p.y,d.z),0==u.y&&0==u.z&&0==p.x&&0==p.z&&0==d.x&&0==d.y||(this.matrix=new n.Matrix4(u.x,p.x,d.x,0,u.y,p.y,d.y,0,u.z,p.z,d.z,0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,(new n.Matrix4).makeTranslation(a.x,a.y,a.z)),this.origin=new n.Vector3(0,0,0),this.unit=new n.Vector3(1,1,1));var h=6;o<0&&h++;var m=t.splice(i+h).join(" ");m=m.replace(/^\s+/,""),m=m.split(/[\s\r]+/),this.data=new Float32Array(m)}},n.VolumeData.prototype.ccp4=function(e){var t={};e=new Int8Array(e);var r=new Int32Array(e.buffer,0,56),o=new Float32Array(e.buffer,0,56),i=new DataView(e.buffer);if(t.MAP=String.fromCharCode(i.getUint8(208),i.getUint8(209),i.getUint8(210),i.getUint8(211)),t.MACHST=[i.getUint8(212),i.getUint8(213)],17===t.MACHST[0]&&17===t.MACHST[1])for(var a=e.byteLength,s=0;s<a;s+=4)i.setFloat32(s,i.getFloat32(s),!0);t.NX=r[0],t.NY=r[1],t.NZ=r[2],t.MODE=r[3],t.NXSTART=r[4],t.NYSTART=r[5],t.NZSTART=r[6],t.MX=r[7],t.MY=r[8],t.MZ=r[9],t.xlen=o[10],t.ylen=o[11],t.zlen=o[12],t.alpha=o[13],t.beta=o[14],t.gamma=o[15],t.MAPC=r[16],t.MAPR=r[17],t.MAPS=r[18],t.DMIN=o[19],t.DMAX=o[20],t.DMEAN=o[21],t.ISPG=r[22],t.NSYMBT=r[23],t.LSKFLG=r[24],t.originX=o[49],t.originY=o[50],t.originZ=o[51],t.ARMS=o[54],console.log("Map has min,mean,average,rmsddv: "+t.DMIN+","+t.DMAX+","+t.DMEAN+","+t.ARMS);var l=t,u=[l.xlen,0,0],c=[l.ylen*Math.cos(Math.PI/180*l.gamma),l.ylen*Math.sin(Math.PI/180*l.gamma),0],p=[l.zlen*Math.cos(Math.PI/180*l.beta),l.zlen*(Math.cos(Math.PI/180*l.alpha)-Math.cos(Math.PI/180*l.gamma)*Math.cos(Math.PI/180*l.beta))/Math.sin(Math.PI/180*l.gamma),0];p[2]=Math.sqrt(l.zlen*l.zlen*Math.sin(Math.PI/180*l.beta)*Math.sin(Math.PI/180*l.beta)-p[1]*p[1]);var f=[0,u,c,p],d=[0,l.MX,l.MY,l.MZ],h=[0,l.MAPC,l.MAPR,l.MAPS];this.matrix=new n.Matrix4,this.matrix.set(f[h[1]][0]/d[h[1]],f[h[2]][0]/d[h[2]],f[h[3]][0]/d[h[3]],0,f[h[1]][1]/d[h[1]],f[h[2]][1]/d[h[2]],f[h[3]][1]/d[h[3]],0,f[h[1]][2]/d[h[1]],f[h[2]][2]/d[h[2]],f[h[3]][2]/d[h[3]],0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,(new n.Matrix4).makeTranslation(l.NXSTART+l.originX,l.NYSTART+l.originY,l.NZSTART+l.originZ)),this.origin=new n.Vector3(0,0,0),this.unit=new n.Vector3(1,1,1),this.size={x:t.NX,y:t.NY,z:t.NZ};var m=new Float32Array(e.buffer,1024+t.NSYMBT),g=t.NX,v=t.NY,y=t.NZ;this.data=new Float32Array(g*v*y);for(var s=0;s<g;s++)for(var b=0;b<v;b++)for(var w=0;w<y;w++)this.data[(s*v+b)*y+w]=m[(w*v+b)*g+s]},n.VolumeData.prototype.ccp4.isbinary=!0,n.workerString=function(){self.onmessage=function(e){var t=e.data,n=t.type;if(n<0)self.atomData=t.atoms,self.volume=t.volume,self.ps=new ProteinSurface;else{var r=self.ps;r.initparm(t.expandedExtent,1!=n,self.volume),r.fillvoxels(self.atomData,t.extendedAtoms),r.buildboundary(),4!==n&&2!==n||(r.fastdistancemap(),r.boundingatom(!1),r.fillvoxelswaals(self.atomData,t.extendedAtoms)),r.marchingcube(n);var o=r.getFacesAndVertices(t.atomsToShow);self.postMessage(o)}}}.toString().replace(/(^.*?\{|\}$)/g,""),n.workerString+="; var ProteinSurface="+n.ProteinSurface.toString().replace(/[a-zA-Z_$]{1}[0-9a-zA-Z_$]*.MarchingCube./g,"MarchingCube."),n.workerString+=",MarchingCube=("+n.MarchingCubeInitializer.toString()+")();",n.SurfaceWorker=window.URL?window.URL.createObjectURL(new Blob([n.workerString],{type:"text/javascript"})):{postMessage:function(){}},n.workerString=n.workerString,n.SurfaceWorker=n.SurfaceWorker}).call(window)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=n(1),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l),c=n(10),p=n(85),f=n(975),d=function(e){return e&&e.__esModule?e:{default:e}}(f),h=n(8),m=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":s(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},g=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.isTextTruncated=!0,e.toggleText=e.toggleText.bind(e),e}return i(t,e),a(t,[{key:"render",value:function(){var e=this.props.text;return"string"==typeof this.props.text&&(e=u.createElement(d.default,{text:this.props.text,line:this.props.line,truncateText:this.props.truncateText,textTruncateChild:u.createElement("a",{onClick:this.toggleText,style:{cursor:"pointer"}},this.props.expandIndicator)})),u.createElement(p.If,{condition:this.isTextTruncated},u.createElement(p.Then,null,e),u.createElement(p.Else,null,u.createElement("span",null,u.createElement("span",null,this.props.text," "),u.createElement("span",null,u.createElement("a",{onClick:this.toggleText,style:{cursor:"pointer"}},this.props.collapseIndicator)))))}},{key:"toggleText",value:function(){this.isTextTruncated=!this.isTextTruncated}}]),t}(u.Component);g.defaultProps={line:1,expandIndicator:"[...]",collapseIndicator:"[^]",truncateText:" "},m([h.observable],g.prototype,"isTextTruncated",void 0),g=m([c.observer],g),t.default=g},function(e,t,n){var r,o,i;!function(a,s){o=[e,t,n(1),n(2)],r=s,void 0!==(i="function"==typeof r?r.apply(t,o):r)&&(e.exports=i)}(0,function(e,t,n,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=o(n),c=o(r),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function(e){function t(){var e,n,r,o;a(this,t);for(var i=arguments.length,l=Array(i),u=0;u<i;u++)l[u]=arguments[u];return n=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.onResize=function(){r.rafId&&window.cancelAnimationFrame(r.rafId),r.rafId=window.requestAnimationFrame(r.update.bind(r))},r.update=function(){r.forceUpdate()},o=n,s(r,o)}return l(t,e),p(t,[{key:"componentDidMount",value:function(){var e=document.createElement("canvas"),t=document.createDocumentFragment(),n=window.getComputedStyle(this.scope),r=[n["font-weight"],n["font-style"],n["font-size"],n["font-family"]].join(" ");t.appendChild(e),this.canvas=e.getContext("2d"),this.canvas.font=r,this.forceUpdate(),window.addEventListener("resize",this.onResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize),this.rafId&&window.cancelAnimationFrame(this.rafId)}},{key:"measureWidth",value:function(e){return this.canvas.measureText(e).width}},{key:"getRenderText",value:function(){var e=this.props,t=(e.containerClassName,e.line),n=e.text,r=e.textTruncateChild,o=e.truncateText,a=i(e,["containerClassName","line","text","textTruncateChild","truncateText"]),s=this.scope.getBoundingClientRect().width;if(0===s)return null;if(s>=this.measureWidth(n))return u.default.createElement("div",a,n);var l="";if(r&&"string"==typeof r.type){var c=r.type;(c.indexOf("span")>=0||c.indexOf("a")>=0)&&(l=r.props.children)}for(var p=1,f=n.length,d="",h=0,m=0,g=t,v=0,y=!1,b=-1;g--;){for(var w=g?"":o+" "+l;p<=f;){if(d=n.substr(m,p),!((v=this.measureWidth(d+w))<s)){do{p--,d=n.substr(m,p)," "===d[d.length-1]&&(d=n.substr(m,p-1)),y&&(b=d.lastIndexOf(" "))>-1&&(p=b,d=n.substr(m,p)),v=this.measureWidth(d+w)}while(v>=s&&d.length>0);m+=p;break}h=n.indexOf(" ",p+1),-1===h?(p+=1,y=!1):(y=!0,p=h)}if(p>=f){m=f;break}}return m===f?u.default.createElement("div",a,n):u.default.createElement("div",a,n.substr(0,m)+o+" ",r)}},{key:"render",value:function(){var e=this,t=this.props,n=t.text,r=t.containerClassName,o=n;return this.scope&&(o=this.getRenderText()),u.default.createElement("div",{ref:function(t){e.scope=t},className:r,style:{overflow:"hidden"}},o)}}]),t}(n.Component);f.propTypes={containerClassName:c.default.string,line:c.default.number,text:c.default.string,textTruncateChild:c.default.node,truncateText:c.default.string},f.defaultProps={line:1,text:"",truncateText:""},t.default=f,e.exports=t.default})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(3),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s),u=n(892),c=function(e){return e&&e.__esModule?e:{default:e}}(u),p=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e._script=[],e}return i(t,e),a(t,[{key:"generateScript",value:function(e,t,n,r){return this._script=[],this.reinitialize(),this.bgColor(r.backgroundColor||c.default.defaultProps.backgroundColor),this.loadPdb(e),this.updateVisualStyle(n,t,r),this.selectNone(),this._script.join("\n")}},{key:"reinitialize",value:function(){this._script.push("reinitialize;")}},{key:"bgColor",value:function(e){this._script.push("bg_color "+this.formatColor(e)+";")}},{key:"loadPdb",value:function(e){this._script.push("fetch "+e+", async=0;")}},{key:"setScheme",value:function(e){this._script.push(t.PROTEIN_SCHEME_PRESETS[e])}},{key:"setColor",value:function(e){this._script.push("color "+this.formatColor(e)+", sele;")}},{key:"selectChain",value:function(e){this._script.push("select chain "+e+";")}},{key:"selectAlphaHelix",value:function(e){this._script.push("select (chain "+e+") and (ss h);")}},{key:"selectBetaSheet",value:function(e){this._script.push("select (chain "+e+") and (ss s);")}},{key:"selectResidues",value:function(e,t){this._script.push("select (resi "+e.join(",")+") and (chain "+t+");")}},{key:"selectSideChains",value:function(e,t){this._script.push("select ((resi "+e.join(",")+") and (chain "+t+") and (not name c+n+o));")}},{key:"setTransparency",value:function(e){this._script.push("set transparency, "+e/10+", sele;"),this._script.push("set cartoon_transparency, "+e/10+", sele;"),this._script.push("set sphere_transparency, "+e/10+", sele;"),this._script.push("set stick_transparency, "+e/10+", sele;")}},{key:"enableBallAndStick",value:function(){this._script.push("show spheres, sele; show sticks, sele; alter sele, vdw=0.50;")}},{key:"disableBallAndStick",value:function(){this._script.push("hide spheres, sele; hide sticks, sele;")}},{key:"rainbowColor",value:function(){return this._script.push("spectrum count, rainbow_rev, sele;")}},{key:"cpkColor",value:function(){this._script.push("util.cbaw sele;")}},{key:"hideBoundMolecules",value:function(){this._script.push("hide everything, not resn asp+glu+arg+lys+his+asn+thr+cys+gln+tyr+ser+gly+ala+leu+val+ile+met+trp+phe+pro;")}},{key:"formatColor",value:function(e){return e.replace("#","0x")}},{key:"selectAll",value:function(){this._script.push("select all;")}},{key:"selectNone",value:function(){this._script.push("select none;")}},{key:"updateResidueStyle",value:function(e,t,n){var r=this,o=c.default.defaultProps,i=n.highlightColor||o.highlightColor,a=l.groupBy(e,function(e){return e.highlighted?i:e.color});l.each(l.keys(a),function(e){var i=a[e].map(function(e){return e.positionRange}),s=r.convertPositionsToResCode(i);a[e][0].highlighted?(r.selectResidues(s,t),r.setColor(n.highlightColor||o.highlightColor)):n.mutationColor===u.MutationColor.MUTATION_TYPE?(r.selectResidues(s,t),r.setColor(e)):n.mutationColor===u.MutationColor.UNIFORM&&(r.selectResidues(s,t),r.setColor(n.uniformMutationColor||o.uniformMutationColor));var l=n.sideChain===u.SideChain.ALL||!0===a[e][0].highlighted&&n.sideChain===u.SideChain.SELECTED;r.updateSideChains(t,s,l,n)})}},{key:"updateSideChains",value:function(e,t,n,r){n&&r.proteinScheme!==u.ProteinScheme.SPACE_FILLING&&(this.selectSideChains(t,e),this.enableBallAndStick())}}],[{key:"PROTEIN_SCHEME_PRESETS",get:function(){var e={};return e[u.ProteinScheme.CARTOON]="hide everything; show cartoon;",e[u.ProteinScheme.SPACE_FILLING]="hide everything; show spheres;",e[u.ProteinScheme.BALL_AND_STICK]="hide everything; show spheres; show sticks; alter all, vdw=0.50",e[u.ProteinScheme.RIBBON]="hide everything; show ribbon;",e[u.ProteinScheme.TRACE]=e[u.ProteinScheme.RIBBON],e}}]),t}(c.default);t.default=p},function(e,t){e.exports={portalWidth:"structureViewer-module__portalWidth__250aJ","main-3d-panel":"structureViewer-module__main-3d-panel__2asbr",header:"structureViewer-module__header__243uA",body:"structureViewer-module__body__3BGGR","collapsed-panel":"structureViewer-module__collapsed-panel__3T7vs","increased-size-panel":"structureViewer-module__increased-size-panel__1nCD-","default-option-select":"structureViewer-module__default-option-select__3EsrF","alpha-helix":"structureViewer-module__alpha-helix__3U1NC","beta-sheet":"structureViewer-module__beta-sheet__2rza2",loop:"structureViewer-module__loop__25tQU",highlighted:"structureViewer-module__highlighted__9IwJz","uniform-mutation":"structureViewer-module__uniform-mutation__2nUW-","missense-mutation":"structureViewer-module__missense-mutation__3m1Or","trunc-mutation":"structureViewer-module__trunc-mutation__1VdGC","inframe-mutation":"structureViewer-module__inframe-mutation__bSE4n"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(10),p=n(863),f=r(p),d=n(822),h=r(d),m=n(801),g=r(m),v=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},y=function(e){function t(e){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),s(t,[{key:"componentWillUpdate",value:function(e){this._columns[p.MutationTableColumnType.STUDY].visible=!!(e.studyIdToStudy&&Object.keys(e.studyIdToStudy).length>1)}},{key:"generateColumns",value:function(){var e=this;l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"generateColumns",this).call(this),this._columns[p.MutationTableColumnType.CANCER_TYPE].visible=h.default.isVisible(this.props.dataStore?this.props.dataStore.allData:this.props.data,this.props.uniqueSampleKeyToTumorType),this._columns[p.MutationTableColumnType.TUMOR_ALLELE_FREQ].visible=g.default.isVisible(this.props.dataStore?this.props.dataStore.allData:this.props.data),this._columns[p.MutationTableColumnType.STUDY].order=0,this._columns[p.MutationTableColumnType.SAMPLE_ID].order=10,this._columns[p.MutationTableColumnType.CANCER_TYPE].order=15,this._columns[p.MutationTableColumnType.PROTEIN_CHANGE].order=20,this._columns[p.MutationTableColumnType.ANNOTATION].order=30,this._columns[p.MutationTableColumnType.FUNCTIONAL_IMPACT].order=38,this._columns[p.MutationTableColumnType.MUTATION_TYPE].order=40,this._columns[p.MutationTableColumnType.COPY_NUM].order=50,this._columns[p.MutationTableColumnType.COSMIC].order=60,this._columns[p.MutationTableColumnType.MUTATION_STATUS].order=70,this._columns[p.MutationTableColumnType.VALIDATION_STATUS].order=80,this._columns[p.MutationTableColumnType.CENTER].order=100,this._columns[p.MutationTableColumnType.CHROMOSOME].order=110,this._columns[p.MutationTableColumnType.START_POS].order=120,this._columns[p.MutationTableColumnType.END_POS].order=130,this._columns[p.MutationTableColumnType.REF_ALLELE].order=140,this._columns[p.MutationTableColumnType.VAR_ALLELE].order=150,this._columns[p.MutationTableColumnType.TUMOR_ALLELE_FREQ].order=160,this._columns[p.MutationTableColumnType.NORMAL_ALLELE_FREQ].order=170,this._columns[p.MutationTableColumnType.VAR_READS].order=180,this._columns[p.MutationTableColumnType.REF_READS].order=190,this._columns[p.MutationTableColumnType.VAR_READS_N].order=200,this._columns[p.MutationTableColumnType.REF_READS_N].order=210,this._columns[p.MutationTableColumnType.NUM_MUTATIONS].order=220,this._columns[p.MutationTableColumnType.CANCER_TYPE].shouldExclude=function(){return!e.props.uniqueSampleKeyToTumorType},this._columns[p.MutationTableColumnType.NUM_MUTATIONS].shouldExclude=function(){return!e.props.mutationCountCache}}}]),t}(f.default);y.defaultProps=Object.assign({},f.default.defaultProps,{columns:[p.MutationTableColumnType.STUDY,p.MutationTableColumnType.SAMPLE_ID,p.MutationTableColumnType.COPY_NUM,p.MutationTableColumnType.ANNOTATION,p.MutationTableColumnType.FUNCTIONAL_IMPACT,p.MutationTableColumnType.REF_READS_N,p.MutationTableColumnType.VAR_READS_N,p.MutationTableColumnType.REF_READS,p.MutationTableColumnType.VAR_READS,p.MutationTableColumnType.START_POS,p.MutationTableColumnType.END_POS,p.MutationTableColumnType.REF_ALLELE,p.MutationTableColumnType.VAR_ALLELE,p.MutationTableColumnType.MUTATION_STATUS,p.MutationTableColumnType.VALIDATION_STATUS,p.MutationTableColumnType.CENTER,p.MutationTableColumnType.CHROMOSOME,p.MutationTableColumnType.PROTEIN_CHANGE,p.MutationTableColumnType.MUTATION_TYPE,p.MutationTableColumnType.COSMIC,p.MutationTableColumnType.TUMOR_ALLELE_FREQ,p.MutationTableColumnType.NORMAL_ALLELE_FREQ,p.MutationTableColumnType.CANCER_TYPE,p.MutationTableColumnType.NUM_MUTATIONS]}),y=v([c.observer],y),t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),p=n(980),f=r(p),d=n(86),h=n(168),m=r(h),g=n(20),v=r(g),y=n(18),b=r(y),w=n(10),x=n(8),_=n(3),S=r(_),C=n(906),k=r(C),A=n(121),E=n(268),M=n(986),T=n(16),O=n(19),I=r(O),P=n(170),j=r(P),D=n(987),N=r(D),R=n(802),F=r(R),L=n(273),z=r(L),B=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},q=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.mouseInPlot=!0,n.legendShown=!1,n.yMaxInputFocused=!1,n.mutationAlignerLinks=(0,d.remoteData)({await:function(){return[n.props.store.canonicalTranscript]},invoke:function(){return new Promise(function(e,t){for(var r=n.props.store.canonicalTranscript.result?n.props.store.canonicalTranscript.result.pfamDomains:void 0,o=[],i=0;r&&i<r.length;i++)o.push(v.default.get((0,T.getMutationAlignerUrl)()+"?pfamAccession="+r[i].pfamDomainId));var a=Promise.all(o);a.then(function(t){for(var n=t.map(function(e){return JSON.parse(e.text)}),o={},i=void 0,a=void 0,s=0;s<n.length;s++)i=n[s],(a=r?r[s].pfamDomainId:null)&&i.linkToMutationAligner&&(o[a]=i.linkToMutationAligner);e(o)}),a.catch(t)})}},{}),n.handlers={handleYAxisMaxSliderChange:(0,x.action)(function(e){var t=e.target.value,r=parseInt(t,10);n._yMaxInput=r<n.countRange[0]?n.countRange[0]:r}),handleYAxisMaxChange:(0,x.action)(function(e){var t=parseInt(e,10);n._yMaxInput=t<n.countRange[0]?n.countRange[0]:t}),handleSVGClick:function(){(0,j.default)((new XMLSerializer).serializeToString(n.toSVGDOMNode()),n.hugoGeneSymbol+"_lollipop.svg")},handlePDFClick:function(){(0,k.default)(n.hugoGeneSymbol+"_lollipop.pdf",n.toSVGDOMNode())},onYMaxInputFocused:function(){n.yMaxInputFocused=!0},onYMaxInputBlurred:function(){n.yMaxInputFocused=!1},handleToggleLegend:(0,x.action)(function(){n.legendShown=!n.legendShown}),onMouseEnterPlot:(0,x.action)(function(){n.mouseInPlot=!0}),onMouseLeavePlot:(0,x.action)(function(){n.mouseInPlot=!1}),ref:function(e){n.plot=e}},n}return a(t,e),s(t,[{key:"lollipopLabel",value:function(e){var t=S.default.uniq(e.map(function(e){return e.proteinChange}));t.sort();var n="";return t.length>1&&(n=(0,A.longestCommonStartingSubstring)(t[0],t[t.length-1])),t=t.map(function(e){return e.substring(n.length)}),n+t.join("/")}},{key:"lollipopTooltip",value:function(e,t){var n=e[0].proteinPosStart,r=t[n],o="mutation"+(r>1?"s":""),i=this.lollipopLabel(e);return c.createElement("div",null,c.createElement("b",null,r," ",o),c.createElement("br",null),c.createElement("span",null,"AA Change: ",i))}},{key:"domainTooltip",value:function(e,t,n){var r=t?t.pfamAccession:n,o=this.mutationAlignerLinks.result[r],i=o?c.createElement("a",{href:o,target:"_blank"},"Mutation Aligner"):null,a=t?t.name+": "+t.description:r;return c.createElement("div",{style:{maxWidth:200}},c.createElement("div",null,a," (",e.pfamDomainStart," - ",e.pfamDomainEnd,")"),c.createElement("div",null,c.createElement("a",{style:{marginRight:"5px"},href:"http://pfam.xfam.org/family/"+r,target:"_blank"},"PFAM"),i))}},{key:"sequenceTooltip",value:function(){return c.createElement("div",{style:{maxWidth:200}},c.createElement("a",{href:"http://www.uniprot.org/uniprot/"+this.props.store.uniprotId.result,target:"_blank"},this.props.store.uniprotId.result))}},{key:"toSVGDOMNode",value:function(){if(this.plot){var e=this.plot.toSVGDOMNode(),t=c.createElement("text",{fill:"#2E3436",textAnchor:"start",dy:"1em",x:"2",y:"2",style:{fontFamily:"verdana",fontSize:"12px",fontWeight:"bold"}},this.hugoGeneSymbol),n=document.createElementNS("http://www.w3.org/2000/svg","g");return I.default.render(t,n),e.appendChild(n),e}return document.createElementNS("http://www.w3.org/2000/svg","svg")}},{key:"render",value:function(){return this.props.store.pfamDomainData.isComplete&&this.props.store.pfamDomainData.result?c.createElement("div",{style:{display:"inline-block"},onMouseEnter:this.handlers.onMouseEnterPlot,onMouseLeave:this.handlers.onMouseLeavePlot},this.controls,c.createElement(F.default,{isOpened:this.legendShown},this.legend),c.createElement(f.default,{ref:this.handlers.ref,sequence:this.sequence,lollipops:this.lollipops,domains:this.domains,dataStore:this.props.store.dataStore,vizWidth:this.props.geneWidth,vizHeight:130,xMax:this.props.store.canonicalTranscript.result&&this.props.store.canonicalTranscript.result.proteinLength||this.props.store.gene.length/3,yMax:this.yMaxInput,onXAxisOffset:this.props.onXAxisOffset})):c.createElement(m.default,{isLoading:!0})}},{key:"showControls",get:function(){return this.yMaxInputFocused||this.mouseInPlot}},{key:"mutationsByPosition",get:function(){var e={},t=void 0,n=!0,r=!1,o=void 0;try{for(var i,a=this.props.store.dataStore.sortedFilteredData[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value,l=!0,u=!1,c=void 0;try{for(var p,f=s[Symbol.iterator]();!(l=(p=f.next()).done);l=!0){var d=p.value;t=d.proteinPosStart,e[t]=e[t]||[],e[t].push(d)}}catch(e){u=!0,c=e}finally{try{!l&&f.return&&f.return()}finally{if(u)throw c}}}}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}return e}},{key:"uniqueMutationCountsByPosition",get:function(){var e=this,t={};return Object.keys(this.mutationsByPosition).forEach(function(n){var r=parseInt(n,10);t[r]=(0,E.countUniqueMutations)(e.mutationsByPosition[r])}),t}},{key:"lollipops",get:function(){var e=this;if(0===Object.keys(this.mutationsByPosition).length)return[];var t=this.uniqueMutationCountsByPosition,n=Object.keys(this.mutationsByPosition).map(function(t){return e.mutationsByPosition[parseInt(t,10)]}).sort(function(e,n){return t[e[0].proteinPosStart]<t[n[0].proteinPosStart]?1:-1}),r=t[n[0][0].proteinPosStart],o=n.findIndex(function(e){return t[e[0].proteinPosStart]!==r});-1===o&&(o=n.length);var i=void 0;i=o>1&&o>2?0:Math.min(o,1);for(var a=[],s=0;s<n.length;s++){var l=n[s],u=l[0].proteinPosStart,c=t[u];if(!(isNaN(u)||u<0||this.props.store.canonicalTranscript.isComplete&&this.props.store.canonicalTranscript.result&&u>this.props.store.canonicalTranscript.result.proteinLength+1)){var p=void 0;p=s<i&&c>=1?this.lollipopLabel(l):void 0,a.push({codon:u,count:c,tooltip:this.lollipopTooltip(l,t),color:(0,E.getColorForProteinImpactType)(l,this.props),label:p})}}return a}},{key:"domains",get:function(){var e=this;return this.props.store.pfamDomainData.isComplete&&this.props.store.pfamDomainData.result&&0!==this.props.store.pfamDomainData.result.length&&this.props.store.canonicalTranscript.isComplete&&this.props.store.canonicalTranscript.result&&0!==this.props.store.canonicalTranscript.result.pfamDomains.length?this.props.store.canonicalTranscript.result.pfamDomains.map(function(t){var n=e.domainMap[t.pfamDomainId];return{startCodon:t.pfamDomainStart,endCodon:t.pfamDomainEnd,label:n?n.name:t.pfamDomainId,color:e.domainColorMap[t.pfamDomainId],tooltip:e.domainTooltip(t,n,t.pfamDomainId)}}):[]}},{key:"domainColorMap",get:function(){return!this.props.store.canonicalTranscript.isPending&&this.props.store.canonicalTranscript.result&&this.props.store.canonicalTranscript.result.pfamDomains&&this.props.store.canonicalTranscript.result.pfamDomains.length>0?(0,M.generatePfamDomainColorMap)(this.props.store.canonicalTranscript.result.pfamDomains):{}}},{key:"domainMap",get:function(){return!this.props.store.pfamDomainData.isPending&&this.props.store.pfamDomainData.result&&this.props.store.pfamDomainData.result.length>0?S.default.keyBy(this.props.store.pfamDomainData.result,"pfamAccession"):{}}},{key:"sequence",get:function(){return{tooltip:this.sequenceTooltip()}}},{key:"hugoGeneSymbol",get:function(){return this.props.store.gene.hugoGeneSymbol}},{key:"countRange",get:function(){if(0===this.lollipops.length)return[0,0];var e=5,t=1,n=!0,r=!1,o=void 0;try{for(var i,a=this.lollipops[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;e=Math.max(e,s.count),t=Math.min(t,s.count)}}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}return[t,e]}},{key:"sliderRange",get:function(){return[this.countRange[0],Math.max(this.countRange[1],this.countRange[0]+5)]}},{key:"yMaxSlider",get:function(){return Math.min(this.countRange[1],this._yMaxInput||this.countRange[1])}},{key:"yMaxInput",get:function(){return this._yMaxInput||this.countRange[1]}},{key:"legend",get:function(){return c.createElement("div",{style:{maxWidth:700,marginTop:5}},c.createElement("span",{style:{color:"#2153AA",fontWeight:"bold",fontSize:"14px",fontFamily:"verdana, arial"}},"Color Codes"),c.createElement("p",null,"Mutation diagram circles are colored with respect to the corresponding mutation types. In case of different mutation types at a single position, color of the circle is determined with respect to the most frequent mutation type."),c.createElement("br",null),c.createElement("div",null,"Mutation types and corresponding color codes are as follows:",c.createElement("ul",null,c.createElement("li",null,c.createElement("span",{style:{color:this.props.missenseColor,fontWeight:"bold",fontSize:"14px",fontFamily:"verdana, arial"}},"Missense Mutations")),c.createElement("li",null,c.createElement("span",{style:{color:this.props.truncatingColor,fontWeight:"bold",fontSize:"14px",fontFamily:"verdana, arial"}},"Truncating Mutations"),": Nonsense, Nonstop, Frameshift deletion, Frameshift insertion, Splice site"),c.createElement("li",null,c.createElement("span",{style:{color:this.props.inframeColor,fontWeight:"bold",fontSize:"14px",fontFamily:"verdana, arial"}},"Inframe Mutations"),": Inframe deletion, Inframe insertion"),c.createElement("li",null,c.createElement("span",{style:{color:this.props.otherColor,fontWeight:"bold",fontSize:"14px",fontFamily:"verdana, arial"}},"Other Mutations"),": All other types of mutations"))))}},{key:"controls",get:function(){return c.createElement("div",{className:(0,b.default)(this.showControls?N.default["fade-in"]:N.default["fade-out"])},c.createElement("span",null,c.createElement("div",{role:"group",className:"btn-group"},c.createElement("button",{className:"btn btn-default btn-xs",onClick:this.handlers.handleSVGClick},"SVG ",c.createElement("i",{className:"fa fa-cloud-download","aria-hidden":"true"})),c.createElement("button",{className:"btn btn-default btn-xs",onClick:this.handlers.handlePDFClick},"PDF ",c.createElement("i",{className:"fa fa-cloud-download","aria-hidden":"true"})),c.createElement("button",{className:"btn btn-default btn-xs",onClick:this.handlers.handleToggleLegend},"Legend ",c.createElement("i",{className:"fa fa-eye","aria-hidden":"true"}))),c.createElement("div",{className:"small",style:{float:"right",display:"flex",alignItems:"center"}},c.createElement("span",null,"Y-Axis Max:"),c.createElement("input",{style:{display:"inline-block",padding:0,width:200,marginLeft:10,marginRight:10},type:"range",min:this.countRange[0],max:this.countRange[1],step:"1",onChange:this.handlers.handleYAxisMaxSliderChange,value:this.yMaxSlider}),c.createElement(z.default,{className:N.default["ymax-number-input"],value:""+this.yMaxInput,setValue:this.handlers.handleYAxisMaxChange,numericOnly:!0,onFocus:this.handlers.onYMaxInputFocused,onBlur:this.handlers.onYMaxInputBlurred})),"  "))}}]),t}(c.Component);B([x.observable],q.prototype,"mouseInPlot",void 0),B([x.observable],q.prototype,"_yMaxInput",void 0),B([x.observable],q.prototype,"legendShown",void 0),B([x.observable],q.prototype,"yMaxInputFocused",void 0),B([x.computed],q.prototype,"showControls",null),B([x.computed],q.prototype,"mutationsByPosition",null),B([x.computed],q.prototype,"uniqueMutationCountsByPosition",null),B([x.computed],q.prototype,"lollipops",null),B([x.computed],q.prototype,"domains",null),B([x.computed],q.prototype,"domainColorMap",null),B([x.computed],q.prototype,"domainMap",null),B([x.computed],q.prototype,"sequence",null),B([x.computed],q.prototype,"hugoGeneSymbol",null),B([x.computed],q.prototype,"countRange",null),B([x.computed],q.prototype,"sliderRange",null),B([x.computed],q.prototype,"yMaxSlider",null),B([x.computed],q.prototype,"yMaxInput",null),B([x.computed],q.prototype,"controls",null),q=B([w.observer],q),t.default=q},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(1),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),f=n(10),d=n(8),h=n(50),m=r(h),g=n(981),v=r(g),y=n(905),b=r(y),w=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},x=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.hitZoneConfig={hitRect:{x:0,y:0,width:0,height:0},content:p.createElement("span",null),tooltipPlacement:"top",cursor:"pointer",onMouseOver:function(){return 0},onClick:function(){return 0},onMouseOut:function(){return 0}},e.handlers={ref:function(t){e.plot=t},setHitZone:function(t,n,r,o,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"pointer",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"top";e.hitZoneConfig={hitRect:t,content:n,onMouseOver:r,onClick:o,onMouseOut:i,cursor:a,tooltipPlacement:s}},getOverlay:function(){return e.hitZoneConfig.content},getOverlayPlacement:function(){return e.hitZoneConfig.tooltipPlacement},onMouseLeave:function(){e.hitZoneConfig.onMouseOut&&e.hitZoneConfig.onMouseOut()},onBackgroundMouseMove:function(){e.hitZoneConfig.onMouseOut&&e.hitZoneConfig.onMouseOut()}},e}return a(t,e),l(t,[{key:"toSVGDOMNode",value:function(){return this.plot?this.plot.toSVGDOMNode():document.createElementNS("http://www.w3.org/2000/svg","svg")}},{key:"render",value:function(){var e={};return this.tooltipVisible||(e.visible=!1),p.createElement("div",{style:{position:"relative"}},p.createElement(m.default,s({placement:this.handlers.getOverlayPlacement(),overlay:this.handlers.getOverlay},e),this.hitZone),p.createElement(v.default,s({ref:this.handlers.ref,setHitZone:this.handlers.setHitZone,onMouseLeave:this.handlers.onMouseLeave,onBackgroundMouseMove:this.handlers.onBackgroundMouseMove},this.props)))}},{key:"tooltipVisible",get:function(){return!!this.hitZoneConfig.content}},{key:"hitZone",get:function(){return p.createElement(b.default,{y:this.hitZoneConfig.hitRect.y,x:this.hitZoneConfig.hitRect.x,width:this.hitZoneConfig.hitRect.width,height:this.hitZoneConfig.hitRect.height,onMouseOver:this.hitZoneConfig.onMouseOver,onClick:this.hitZoneConfig.onClick,onMouseOut:this.hitZoneConfig.onMouseOut,cursor:this.hitZoneConfig.cursor})}}]),t}(p.Component);w([d.observable],x.prototype,"hitZoneConfig",void 0),w([d.computed],x.prototype,"tooltipVisible",null),w([d.computed],x.prototype,"hitZone",null),x=w([f.observer],x),t.default=x},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),p=n(3),f=r(p),d=n(982),h=r(d),m=n(983),g=r(m),v=n(984),y=r(v),b=n(985),w=r(b),x=n(10),_=n(8),S=n(84),C=r(S),k=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},A=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.sequenceComponents=[],n.shiftPressed=!1,n.lollipopZeroHeight=10,n.xAxisCandidateTickIntervals=[50,100,200,250,500,1e3,2500,5e3,1e4,25e3],n.yAxisCandidateTickIntervals=[1,2,5,10,20,50,100,200,500],n.xAxisHeight=30,n.yAxisWidth=50,n.geneHeight=14,n.domainHeight=24,n.handlers={ref:function(e){n.svg=e},onBackgroundClick:function(){n.props.dataStore.clearSelectedPositions()},onBackgroundMouseMove:function(){n.props.onBackgroundMouseMove&&n.props.onBackgroundMouseMove(),n.unhoverAllLollipops()},onLollipopClick:function(e){var t=n.props.dataStore.isPositionSelected(e);n.shiftPressed||n.props.dataStore.clearSelectedPositions(),n.props.dataStore.setPositionSelected(e,!t)},onKeyDown:function(e){16===e.which&&(n.shiftPressed=!0)},onKeyUp:function(e){16===e.which&&(n.shiftPressed=!1)},onMouseOver:function(e){n.unhoverAllLollipops();var t=e.target,r=t.getAttribute("class")||"",o=n.getLollipopIndex(r),i=null,a=null;if(null!==o){var s=n.lollipopComponents[o];s&&(s.isHovered=!0,n.props.setHitZone&&n.props.setHitZone(s.circleHitRect,s.props.spec.tooltip,(0,_.action)(function(){n.props.dataStore.setPositionHighlighted(s.props.spec.codon,!0),s.isHovered=!0}),function(){return n.handlers.onLollipopClick(s.props.spec.codon)}))}else i=n.getDomainIndex(r);if(null!==i){var l=n.domainComponents[i];l&&n.props.setHitZone&&n.props.setHitZone(l.hitRect,l.props.spec.tooltip,void 0,void 0,void 0,"auto")}else a=n.getSequenceIndex(r);if(null!==a){var u=n.sequenceComponents[a];u&&n.props.setHitZone&&n.props.setHitZone(u.hitRect,u.props.spec.tooltip,void 0,void 0,void 0,"auto")}},onSVGMouseLeave:function(e){"svg"===e.target.tagName.toLowerCase()&&n.props.onMouseLeave&&n.props.onMouseLeave()}},n}return a(t,e),s(t,[{key:"unhoverAllLollipops",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,o=Object.keys(this.lollipopComponents)[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var i=r.value,a=this.lollipopComponents[i];a&&(a.isHovered=!1)}}catch(e){t=!0,n=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw n}}this.props.dataStore.clearHighlightedPositions()}},{key:"componentDidMount",value:function(){(0,C.default)(document).on("keydown",this.handlers.onKeyDown),(0,C.default)(document).on("keyup",this.handlers.onKeyUp),this.props.onXAxisOffset&&this.props.onXAxisOffset(this.geneX)}},{key:"componentWillUnmount",value:function(){(0,C.default)(document).off("keydown",this.handlers.onKeyDown),(0,C.default)(document).off("keyup",this.handlers.onKeyUp)}},{key:"componentDidUpdate",value:function(){this.props.onXAxisOffset&&this.props.onXAxisOffset(this.geneX)}},{key:"codonToX",value:function(e){return e/this.props.xMax*this.props.vizWidth}},{key:"countToHeight",value:function(e){return this.lollipopZeroHeight+Math.min(1,e/this.yMax)*this.yAxisHeight}},{key:"calculateTickInterval",value:function(e,t,n){var r=void 0,o=e.find(function(e){return t/e<n-1});if(o)r=o;else for(r=10;t/r>n-1;)r*=10;return r}},{key:"calculateTicks",value:function(e,t,n){for(var r=[],o=e;o<t;){var i=void 0;n&&t-o>2*e/3&&o%(2*e)==0&&(i=o+""),r.push({position:o,label:i}),o+=e}return r}},{key:"makeDomainIndexClass",value:function(e){return"domain-"+e}},{key:"makeLollipopIndexClass",value:function(e){return"lollipop-"+e}},{key:"makeSequenceIndexClass",value:function(e){return"sequence-"+e}},{key:"getComponentIndex",value:function(e,t){var n=e.split(/[\s]+/g).map(function(e){return e.match(new RegExp("^"+t+"(.*)$"))}).find(function(e){return null!==e});return n?parseInt(n[1],10):null}},{key:"getDomainIndex",value:function(e){return this.getComponentIndex(e,"domain-")}},{key:"getLollipopIndex",value:function(e){return this.getComponentIndex(e,"lollipop-")}},{key:"getSequenceIndex",value:function(e){return this.getComponentIndex(e,"sequence-")}},{key:"toSVGDOMNode",value:function(){if(this.svg){var e=this.svg.cloneNode(!0);return(0,C.default)(e).find(".delete-for-download").remove(),e}return document.createElementNS("http://www.w3.org/2000/svg","svg")}},{key:"render",value:function(){return c.createElement("div",{onMouseOver:this.handlers.onMouseOver},c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",ref:this.handlers.ref,width:this.svgWidth,height:this.svgHeight,onMouseLeave:this.handlers.onSVGMouseLeave},c.createElement("rect",{fill:"#FFFFFF",x:0,y:0,width:this.svgWidth,height:this.svgHeight,onClick:this.handlers.onBackgroundClick,onMouseMove:this.handlers.onBackgroundMouseMove}),c.createElement("rect",{fill:"#BABDB6",x:this.geneX,y:this.geneY,height:this.geneHeight,width:this.props.vizWidth+1}),this.lollipops,this.domains,c.createElement(w.default,{key:"horz",x:this.geneX,y:this.geneY+this.geneHeight+10,length:this.props.vizWidth,tickLength:7,rangeLower:0,rangeUpper:this.props.xMax,ticks:this.xTicks}),c.createElement(w.default,{key:"vert",x:this.geneX-10,y:this.geneY-this.lollipopZeroHeight-this.yAxisHeight,length:this.yAxisHeight,tickLength:7,rangeLower:0,rangeUpper:this.yMax,ticks:this.yTicks,vertical:!0,label:"# Mutations"})))}},{key:"xAxisTickInterval",get:function(){return this.calculateTickInterval(this.xAxisCandidateTickIntervals,this.props.xMax,16)}},{key:"yAxisTickInterval",get:function(){return this.calculateTickInterval(this.yAxisCandidateTickIntervals,this.yMax,10)}},{key:"xTicks",get:function(){var e=[];return e.push({position:0,label:"0"}),e.push({position:this.props.xMax,label:this.props.xMax+"aa"}),e=e.concat(this.calculateTicks(this.xAxisTickInterval,this.props.xMax,!0))}},{key:"yTicks",get:function(){var e=[];return e.push({position:0,label:"0"}),e.push({position:this.yMax,label:this.yMaxLabel}),e=e.concat(this.calculateTicks(this.yAxisTickInterval,this.yMax,!1))}},{key:"yMax",get:function(){return this.props.yMax||this.props.lollipops.reduce(function(e,t){return Math.max(e,t.count)},1)}},{key:"yMaxLabel",get:function(){var e=this;return(this.props.lollipops.find(function(t){return t.count>e.yMax})?">= ":"")+this.yMax}},{key:"yAxisHeight",get:function(){return this.props.vizHeight-this.domainHeight-this.lollipopZeroHeight}},{key:"geneX",get:function(){return this.yAxisWidth+20}},{key:"geneY",get:function(){return this.props.vizHeight-this.geneHeight+30}},{key:"domainY",get:function(){return this.geneY-(this.domainHeight-this.geneHeight)/2}},{key:"sequenceSegments",get:function(){var e=this,t=[],n=0,r=f.default.map(this.props.domains,function(t){var r={start:n,end:e.codonToX(t.startCodon)};return n=e.codonToX(t.endCodon),r}),o=this.props.vizWidth;return r.push({start:n,end:o}),r.sort(function(e,t){return e.start-t.start}),r.forEach(function(n,r){t.push(c.createElement(h.default,{ref:function(t){null!==t&&(e.sequenceComponents[r]=t)},color:"#BABDB6",x:e.geneX+n.start,y:e.geneY,height:e.geneHeight,width:n.end-n.start,spec:e.props.sequence,hitzoneClassName:["delete-for-download",e.makeSequenceIndexClass(r)].join(" ")}))}),t}},{key:"lollipops",get:function(){var e=this;this.lollipopComponents={};this.yMax;return this.props.lollipops.map(function(t,n){return c.createElement(g.default,{key:t.codon,ref:function(t){null!==t&&(e.lollipopComponents[n]=t)},x:e.geneX+e.codonToX(t.codon),stickBaseY:e.geneY,stickHeight:e.countToHeight(t.count),headRadius:e.props.dataStore.isPositionSelected(t.codon)?5:2.8,hoverHeadRadius:5,label:t.label,headColor:t.color,hitzoneClassName:["delete-for-download",e.makeLollipopIndexClass(n)].join(" "),spec:t})})}},{key:"domains",get:function(){var e=this;return this.domainComponents={},this.props.domains.map(function(t,n){var r=e.codonToX(t.startCodon),o=e.codonToX(t.endCodon)-r;return c.createElement(y.default,{key:n,ref:function(t){null!==t&&(e.domainComponents[n]=t)},x:e.geneX+r,y:e.domainY,width:o,height:e.domainHeight,color:t.color,label:t.label,labelColor:t.labelColor,hitzoneClassName:["delete-for-download",e.makeDomainIndexClass(n)].join(" "),spec:t})})}},{key:"svgWidth",get:function(){return this.props.vizWidth+this.geneX+30}},{key:"svgHeight",get:function(){return this.geneY+this.domainHeight+this.xAxisHeight}}]),t}(c.Component);k([_.computed],A.prototype,"xAxisTickInterval",null),k([_.computed],A.prototype,"yAxisTickInterval",null),k([_.computed],A.prototype,"xTicks",null),k([_.computed],A.prototype,"yTicks",null),k([_.computed],A.prototype,"yMax",null),k([_.computed],A.prototype,"yMaxLabel",null),k([_.computed],A.prototype,"yAxisHeight",null),k([_.computed],A.prototype,"geneX",null),k([_.computed],A.prototype,"geneY",null),k([_.computed],A.prototype,"domainY",null),k([_.computed],A.prototype,"sequenceSegments",null),k([_.computed],A.prototype,"lollipops",null),k([_.computed],A.prototype,"domains",null),k([_.computed],A.prototype,"svgWidth",null),k([_.computed],A.prototype,"svgHeight",null),A=k([x.observer],A),t.default=A},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=n(1),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l),c=n(10),p=n(8),f=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":s(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},d=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.isMounted=!1,n}return i(t,e),a(t,[{key:"componentDidMount",value:function(){this.isMounted=!0}},{key:"render",value:function(){return u.createElement("g",null,u.createElement("rect",{x:this.props.x,y:this.props.y,width:this.props.width,height:this.props.height,fill:this.props.color}),u.createElement("rect",{className:this.props.hitzoneClassName,x:this.props.x,y:this.props.y,width:this.props.width,height:this.props.height,fill:"rgba(0,0,0,0)"}))}},{key:"hitRect",get:function(){return{x:this.props.x,y:this.props.y,width:this.props.width,height:this.props.height}}}]),t}(u.Component);f([p.observable],d.prototype,"isMounted",void 0),d=f([c.observer],d),t.default=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=n(1),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l),c=n(10),p=n(8),f=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":s(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},d=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.isHovered=!1,e}return i(t,e),a(t,[{key:"render",value:function(){var e=null;return this.props.label&&(e=u.createElement("text",{fill:"#2E3436",style:{fontSize:"10px",fontFamily:"arial"},textAnchor:"middle",x:this.props.x,y:this.props.stickBaseY-this.props.stickHeight-this.props.headRadius-5},this.props.label)),u.createElement("g",null,u.createElement("line",{strokeWidth:"1",stroke:this.props.stickColor||"#BABDB6",x1:this.props.x,x2:this.props.x,y1:this.props.stickBaseY,y2:this.props.stickBaseY-this.props.stickHeight}),u.createElement("circle",{stroke:"#BABDB6",strokeWidth:"0.5",fill:this.props.headColor||"#000000",r:this.headRadius,cx:this.circleX,cy:this.circleY}),u.createElement("circle",{className:this.props.hitzoneClassName,fill:"rgba(0,0,0,0)",r:this.props.hoverHeadRadius,cx:this.circleX,cy:this.circleY,cursor:"pointer"}),e)}},{key:"headRadius",get:function(){return this.isHovered?this.props.hoverHeadRadius:this.props.headRadius}},{key:"circleX",get:function(){return this.props.x}},{key:"circleY",get:function(){return this.props.stickBaseY-this.props.stickHeight}},{key:"circleHitRect",get:function(){return{x:this.circleX-this.props.hoverHeadRadius,y:this.circleY-this.props.hoverHeadRadius,width:2*this.props.hoverHeadRadius,height:2*this.props.hoverHeadRadius}}}]),t}(u.Component);f([p.observable],d.prototype,"isHovered",void 0),f([p.computed],d.prototype,"headRadius",null),f([p.computed],d.prototype,"circleX",null),f([p.computed],d.prototype,"circleY",null),f([p.computed],d.prototype,"circleHitRect",null),d=f([c.observer],d),t.default=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=n(1),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l),c=n(84),p=function(e){return e&&e.__esModule?e:{default:e}}(c),f=n(10),d=n(8),h=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":s(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},m=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.isMounted=!1,n.state={displayText:e.label||""},n.handlers={textRef:function(e){n.textElt=e}},n}return i(t,e),a(t,[{key:"componentDidMount",value:function(){this.isMounted=!0}},{key:"makeTextElement",value:function(e){var t={x:this.centerX,y:this.centerY,textAnchor:"middle",dy:"0.3em",fill:this.props.labelColor||"#FFFFFF",style:{fontSize:"12px",fontFamily:"arial"}},n=e?this.props.label||"":this.displayText;return e&&(t.ref=this.handlers.textRef,t.visibility="hidden",t.className=this.props.hitzoneClassName),u.createElement("text",t,n)}},{key:"render",value:function(){return u.createElement("g",null,u.createElement("rect",{x:this.props.x,y:this.props.y,width:this.props.width,height:this.props.height,fill:this.props.color}),this.makeTextElement(!0),this.makeTextElement(!1),u.createElement("rect",{className:this.props.hitzoneClassName,x:this.props.x,y:this.props.y,width:this.props.width,height:this.props.height,fill:"rgba(0,0,0,0)"}))}},{key:"hitRect",get:function(){return{x:this.props.x,y:this.props.y,width:this.props.width,height:this.props.height}}},{key:"centerX",get:function(){return this.props.x+this.props.width/2}},{key:"centerY",get:function(){return this.props.y+this.props.height/2}},{key:"displayText",get:function(){var e=this.props.label||"";if(!this.textElt||!this.isMounted)return e;if(!(0,p.default)(this.textElt).is(":visible"))return e;for(var t=e.length;t>0&&this.textElt.getSubStringLength(0,t)>this.props.width;)t-=1;var n=e;return t<e.length&&(t-=2,n=t<=0?"":e.substr(0,t)+".."),n}}]),t}(u.Component);h([d.observable],m.prototype,"textElt",void 0),h([d.observable],m.prototype,"isMounted",void 0),h([d.computed],m.prototype,"displayText",null),m=h([f.observer],m),t.default=m},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s),u=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"positionToAxisPosition",value:function(e){return e/(this.props.rangeUpper-this.props.rangeLower)*this.props.length}},{key:"render",value:function(){var e=this.props.vertical?this.props.x:this.props.x+this.props.length,t=this.props.vertical?this.props.y+this.props.length:this.props.y;return l.createElement("g",null,l.createElement("line",{stroke:"rgb(170,170,170)",strokeWidth:"1",x1:this.props.x,y1:this.props.y,x2:e,y2:t}),this.ticks,this.label)}},{key:"ticks",get:function(){var e=this;return this.props.ticks.map(function(t){var n=e.positionToAxisPosition(t.position),r=e.props.vertical?e.props.x:e.props.x+n,o=e.props.vertical?e.props.y+e.props.length-n:e.props.y,i=e.props.vertical?e.props.x-e.props.tickLength:e.props.x+n,a=e.props.vertical?e.props.y+e.props.length-n:e.props.y+e.props.tickLength,s=null;return t.label&&(s=e.props.vertical?l.createElement("text",{textAnchor:"end",style:{fontSize:"10px",fontFamily:"arial"},dx:-3,dy:"0.4em",x:i,y:a},t.label):l.createElement("text",{textAnchor:"middle",style:{fontSize:"10px",fontFamily:"arial"},x:i,y:a,dy:"1em"},t.label)),l.createElement("g",{key:n},l.createElement("line",{stroke:"rgb(170,170,170)",strokeWidth:"1",x1:r,y1:o,x2:i,y2:a}),s)})}},{key:"label",get:function(){if(this.props.label){var e=void 0,t=void 0,n=void 0;return this.props.vertical?(e=this.props.x-this.props.tickLength-20,t=this.props.y+this.props.length/2,n="rotate(270,"+e+","+t+")"):(e=this.props.x+this.props.length/2,t=this.props.y+this.props.tickLength+5,n=""),l.createElement("text",{textAnchor:"middle",style:{fontFamily:"arial",fontSize:"12px",fontWeight:"normal"},fill:"#2E3436",x:e,y:t,transform:n},this.props.label)}return null}}]),t}(l.Component);t.default=u},function(e,t,n){"use strict";function r(e){var t=["#2dcf00","#ff5353","#5b5bff","#ebd61d","#ba21e0","#ff9c42","#ff7dff","#b9264f","#baba21","#c48484","#1f88a7","#cafeb8","#4a9586","#ceb86c","#0e180f"],n={},r=0;return e.sort(function(e,t){return e.pfamDomainStart-t.pfamDomainStart}).forEach(function(e){void 0===n[e.pfamDomainId]&&(n[e.pfamDomainId]=t[r%t.length],r++)}),n}Object.defineProperty(t,"__esModule",{value:!0}),t.generatePfamDomainColorMap=r},function(e,t){e.exports={portalWidth:"lollipopMutationPlot-module__portalWidth__hppyp","fade-out":"lollipopMutationPlot-module__fade-out__3kZVS","fade-in":"lollipopMutationPlot-module__fade-in__29Gnz","input-addon":"lollipopMutationPlot-module__input-addon__vMG_R","ymax-number-input":"lollipopMutationPlot-module__ymax-number-input__29v6p"}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,n,r){return c.createElement("span",{key:t,onClick:r,style:{cursor:"pointer"}},c.createElement("span",{className:"badge",style:{backgroundColor:n}},e||0),c.createElement("span",{style:{color:n}},t))}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.mutationTypeButton=a;var u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),p=n(10),f=n(270),d=n(989),h=function(e){return e&&e.__esModule?e:{default:e}}(d),m=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},g=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"handleMutationClick",value:function(e){this.props.dataStore.setFilter(function(t){return(0,f.getProteinImpactType)(t[0].mutationType)===e}),this.props.dataStore.filterString=""}},{key:"render",value:function(){var e=this,t={},n=!0,r=!1,o=void 0;try{for(var i,s=this.props.dataStore.sortedFilteredData[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var l=i.value,u=(0,f.getProteinImpactType)(l[0].mutationType);t[u]=t[u]||0,t[u]+=1}}catch(e){r=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return c.createElement("table",{className:h.default.mutationTypeTable},c.createElement("tr",null,c.createElement("td",null,a(t.missense,"Missense",this.props.missenseColor,function(){return e.handleMutationClick("missense")})),c.createElement("td",null,a(t.truncating,"Truncating",this.props.truncatingColor,function(){return e.handleMutationClick("truncating")}))),c.createElement("tr",null,c.createElement("td",null,a(t.inframe,"Inframe",this.props.inframeColor,function(){return e.handleMutationClick("inframe")})),c.createElement("td",null,a(t.other,"Other",this.props.otherColor,function(){return e.handleMutationClick("other")}))))}}]),t}(c.Component);g=m([p.observer],g),t.default=g},function(e,t){e.exports={portalWidth:"styles-module__portalWidth__Ay5NA",mutationTypeTable:"styles-module__mutationTypeTable__2CihA"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(1),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),f=n(991),d=r(f),h=n(993),m=r(h),g=n(10),v=n(8),y=n(802),b=r(y),w=n(50),x=r(w),_=n(905),S=n(284),C=n(893),k=r(C),A=n(995),E=r(A),M=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},T=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.isExpanded=!1,n.pdbChainTableShown=!1,n.hitZoneConfig={x:0,y:0,width:0,height:0,onClick:function(){}},n._chainScrollY=0,n.collapseTimeout=null,n.expandTimeout=null,n.chainUidToY={},n.expandDelayMs=750,n.collapseDelayMs=3e3,n.handlers={onMouseEnter:(0,v.action)(function(){n.expandTimeout=window.setTimeout(function(){n.isExpanded=!0},n.expandDelayMs),n.collapseTimeout&&window.clearTimeout(n.collapseTimeout)}),onMouseLeave:(0,v.action)(function(){n.collapseTimeout=window.setTimeout(function(){n.isExpanded=!1},n.collapseDelayMs),n.expandTimeout&&window.clearTimeout(n.expandTimeout)}),chainDivRef:function(e){n.chainDiv=e},onChainScroll:function(){n.chainDiv&&n.isExpanded&&(n._chainScrollY=n.chainDiv.scrollTop)},togglePDBTable:(0,v.action)(function(){n.pdbChainTableShown=!n.pdbChainTableShown}),getTooltipContent:function(){return n.hoveredChain?p.createElement(k.default,{pdbId:n.hoveredChain.pdbId,chainId:n.hoveredChain.chain,cache:n.props.pdbHeaderCache}):null},setHitZone:function(e,t){n.hitZoneConfig.x=e.x,n.hitZoneConfig.y=e.y,n.hitZoneConfig.width=e.width,n.hitZoneConfig.height=e.height,n.hitZoneConfig.onClick=function(){n.selectChain(t)},n.hoveredChain=n.props.store.pdbChainDataStore.getPdbChain(t)},setChainUidToY:function(e){n.chainUidToY=e}},n.onChainSelectReaction=(0,v.reaction)(function(){return n.props.store.pdbChainDataStore.selectedUid},function(e){var t=n.chainUidToY[e];if(void 0!==t&&(t<n.chainDiv.scrollTop||t>n.chainDiv.scrollTop+n.props.maxChainsHeight)){var r=n.props.maxChainsHeight/2;n.chainDiv.scrollTop=t-r}}),n}return a(t,e),l(t,[{key:"componentWillUnmount",value:function(){this.onChainSelectReaction()}},{key:"selectChain",value:function(e){this.props.store.pdbChainDataStore.selectUid(e)}},{key:"componentDidUpdate",value:function(){var e=this;(0,E.default)(function(){e.chainDiv&&(e.chainDiv.scrollTop=e.chainScrollY)})}},{key:"helpTooltipContent",value:function(){return p.createElement("div",{style:{maxWidth:400}},"This panel displays a list of PDB chains for the corresponding uniprot ID. PDB chains are ranked with respect to their sequence similarity ratio, and aligned to the y-axis of the mutation diagram. Highly ranked chains have darker color than the lowly ranked ones.",p.createElement("br",null),p.createElement("br",null),"Each chain is represented by a single rectangle. Gaps within the chains are represented by a thin line connecting the segments of the chain.",p.createElement("br",null),p.createElement("br",null),"By default, only a first few rows are displayed. To see more chains, use the scroll bar next to the panel. To see the detailed list of all available PDB chains in a table click on the link below the panel.",p.createElement("br",null),p.createElement("br",null),"To select a chain, simply click on it. Selected chain is highlighted with a different frame color. You can also select a chain by clicking on a row in the table. Selecting a chain reloads the PDB data for the 3D structure visualizer.")}},{key:"render",value:function(){var e={};return this.tooltipVisible||(e.visible=!1),p.createElement("div",{onMouseEnter:this.handlers.onMouseEnter,onMouseLeave:this.handlers.onMouseLeave},p.createElement(b.default,{isOpened:this.isOpen},p.createElement("div",{style:{position:"relative"}},p.createElement("div",{className:"small",style:{display:this.isExpanded?"inherit":"none",position:"absolute",left:20}},"PDB",p.createElement(x.default,{placement:"left",overlay:this.helpTooltipContent,destroyTooltipOnHide:!0},p.createElement("i",{className:"fa fa-info-circle",style:{paddingLeft:5}})),p.createElement("br",null),"Chains"),p.createElement("div",{ref:this.handlers.chainDivRef,style:{overflowY:"scroll",maxHeight:this.props.maxChainsHeight,marginLeft:this.props.geneXOffset,position:"relative"},onScroll:this.handlers.onChainScroll},p.createElement(d.default,{width:this.props.geneWidth,chains:this.chains,proteinLength:this.proteinLength,setHitZone:this.handlers.setHitZone,selectedChainUid:this.props.store.pdbChainDataStore.selectedUid,setChainUidToY:this.handlers.setChainUidToY}),p.createElement(x.default,s({placement:"top",overlay:this.handlers.getTooltipContent},e),this.hitZone)),p.createElement("br",null),p.createElement("div",{style:{display:this.isExpanded?"inherit":"none"}},p.createElement("button",{onClick:this.handlers.togglePDBTable,className:"btn btn-default"},this.pdbChainTableShown?"Hide PDB Chain Table":"Show PDB Chain Table"),p.createElement("div",{style:{display:this.pdbChainTableShown?"inherit":"none",maxWidth:this.props.geneWidth}},p.createElement(m.default,{dataStore:this.props.store.pdbChainDataStore,cache:this.props.pdbHeaderCache}))),p.createElement("br",null))))}},{key:"chainScrollY",get:function(){return this.isExpanded?this._chainScrollY:0}},{key:"isOpen",get:function(){return!!this.props.store.pdbChainDataStore.selectedChain}},{key:"displayChains",get:function(){return this.props.store.pdbChainDataStore.selectedChain?this.isExpanded?this.props.store.pdbChainDataStore.allData:[this.props.store.pdbChainDataStore.selectedChain]:[]}},{key:"chains",get:function(){var e=this;return this.displayChains.map(function(t){for(var n=[],r=-1,o=t.alignment,i=0;i<o.length;i++)o[i]===S.ALIGNMENT_GAP?-1===r&&(r=i):-1!==r&&(n.push({start:t.uniprotStart+r,end:t.uniprotStart+i}),r=-1);return{start:t.uniprotStart,end:t.uniprotEnd+1,gaps:n,opacity:t.identityPerc,uid:e.props.store.pdbChainDataStore.getChainUid(t)}})}},{key:"proteinLength",get:function(){var e=this.props.store.canonicalTranscript.result&&this.props.store.canonicalTranscript.result.proteinLength||0;return Math.max(e,1)}},{key:"tooltipVisible",get:function(){return null!==this.handlers.getTooltipContent()}},{key:"hitZone",get:function(){return p.createElement(_.HitZone,{x:this.hitZoneConfig.x,y:this.hitZoneConfig.y,width:this.hitZoneConfig.width,height:this.hitZoneConfig.height,onClick:this.hitZoneConfig.onClick,cursor:"pointer"})}}]),t}(p.Component);M([v.observable],T.prototype,"isExpanded",void 0),M([v.observable],T.prototype,"pdbChainTableShown",void 0),M([v.observable],T.prototype,"hoveredChain",void 0),M([v.observable],T.prototype,"hitZoneConfig",void 0),M([v.computed],T.prototype,"chainScrollY",null),M([v.action],T.prototype,"selectChain",null),M([v.computed],T.prototype,"isOpen",null),M([v.computed],T.prototype,"displayChains",null),M([v.computed],T.prototype,"chains",null),M([v.computed],T.prototype,"proteinLength",null),M([v.computed],T.prototype,"tooltipVisible",null),M([v.computed],T.prototype,"hitZone",null),T=M([g.observer],T),t.default=T},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(1),p=o(c),f=n(10),d=n(8),h=n(283),m=r(h),g=n(3),v=o(g),y=n(992),b=r(y),w=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},x=function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.rowHeight=6,e.rowPadding=3,e.chainComponents={},e.onMouseOver=e.onMouseOver.bind(e),e.positionToX=e.positionToX.bind(e),e}return s(t,e),l(t,[{key:"positionToX",value:function(e){return e*this.props.width/this.props.proteinLength}},{key:"makeChainIdClass",value:function(e){return"chain-"+e}},{key:"getChainId",value:function(e){var t=e.split(/[\s]+/g).map(function(e){return e.match(new RegExp("^(chain-.*)$"))}).find(function(e){return null!==e});return t&&t[1]||null}},{key:"chainY",value:function(e){return e*(this.rowHeight+this.rowPadding)}},{key:"onMouseOver",value:function(e){var t=e.target,n=t.getAttribute("class")||"",r=this.getChainId(n);if(null!==r){var o=this.chainComponents[r];o&&this.props.setHitZone&&this.props.setHitZone({x:parseInt(t.getAttribute("x")||"0",10),y:parseInt(t.getAttribute("y")||"0",10),width:parseInt(t.getAttribute("width")||"0",10),height:parseInt(t.getAttribute("height")||"0",10)},o.props.uid)}}},{key:"render",value:function(){return p.createElement("div",null,p.createElement("div",{onMouseOver:this.onMouseOver},p.createElement("svg",{width:this.props.width,height:this.svgHeight},this.rows)))}},{key:"rowSpecs",get:function(){var e=[[]],t=[new m.default],n=!0,r=!1,o=void 0;try{for(var i,a=this.props.chains[Symbol.iterator]();!(n=(i=a.next()).done);n=!0)!function(){var n=i.value,r=v.findIndex(t,function(e){return!e.check(n.start,n.end)});-1===r&&(r=e.length,e.push([]),t.push(new m.default)),e[r].push(n),t[r].add(n.start,n.end)}()}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}return e}},{key:"rows",get:function(){var e=this,t=0;this.chainComponents={};var n={},r=this.rowSpecs.map(function(r,o){return p.createElement("g",{key:o},r.map(function(r){var i=e.makeChainIdClass(t++),a=r.uid,s=e.chainY(o);return n[a]=s,p.createElement(b.default,{ref:function(t){null!==t&&(e.chainComponents[i]=t)},positionToX:e.positionToX,y:s,height:e.rowHeight,uniqueHitZoneClassName:i,start:r.start,end:r.end,gaps:r.gaps,opacity:r.opacity,uid:a,highlighted:e.props.selectedChainUid===r.uid})}))});return this.props.setChainUidToY&&this.props.setChainUidToY(n),r}},{key:"svgHeight",get:function(){return this.rows.length*this.rowHeight+(this.rows.length-1)*this.rowPadding}}]),t}(p.Component);w([d.observable],x.prototype,"rowHeight",void 0),w([d.observable],x.prototype,"rowPadding",void 0),w([d.computed],x.prototype,"rowSpecs",null),w([d.computed],x.prototype,"rows",null),w([d.computed],x.prototype,"svgHeight",null),x=w([f.observer],x),t.default=x},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1),c=r(u),p=n(10),f=n(8),d=n(3),h=r(d),m=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},g=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"render",value:function(){var e=this;return c.createElement("g",{key:this.props.uniqueHitZoneClassName},this.segmentsAndGaps.map(function(t){return t.gap?c.createElement("line",{stroke:"#666666",strokeWidth:"0.5",x1:e.props.positionToX(t.start),x2:e.props.positionToX(t.end),y1:e.props.y+e.props.height/2,y2:e.props.y+e.props.height/2}):c.createElement("rect",{fill:"#3366cc",fillOpacity:e.props.opacity,stroke:"#666666",strokeWidth:"0.5",x:e.props.positionToX(t.start),y:e.props.y,width:e.props.positionToX(t.end)-e.props.positionToX(t.start),height:e.props.height})}),c.createElement("rect",{stroke:"#FF9900",strokeWidth:"2",fillOpacity:"0",strokeOpacity:+!!this.props.highlighted,height:this.props.height,width:this.props.positionToX(this.props.end)-this.props.positionToX(this.props.start),x:this.props.positionToX(this.props.start),y:this.props.y,className:this.props.uniqueHitZoneClassName}))}},{key:"segmentsAndGaps",get:function(){var e=[],t=h.sortBy(this.props.gaps,function(e){return e.start});if(0===t.length)e.push({gap:!1,start:this.props.start,end:this.props.end});else{t[0].start>this.props.start&&e.push({gap:!1,start:this.props.start,end:t[0].start}),e.push({gap:!0,start:t[0].start,end:t[0].end});for(var n=1;n<t.length;n++)e.push({gap:!1,start:t[n-1].end,end:t[n].start}),e.push({gap:!0,start:t[n].start,end:t[n].end});var r=t[t.length-1];r.end<this.props.end&&e.push({gap:!1,start:r.end,end:this.props.end})}return e}}]),t}(c.Component);m([f.computed],g.prototype,"segmentsAndGaps",null),g=m([p.observer],g),t.default=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),p=n(169),f=r(p),d=n(10),h=n(893),m=r(h),g=n(8),v=n(994),y=r(v),b=n(821),w=r(b),x=n(173),_=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},S=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),t}(f.default),C=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"render",value:function(){return c.createElement(S,{showColumnVisibility:!1,showCopyDownload:!1,itemsLabel:"PDB chain",itemsLabelPlural:"PDB chains",paginationProps:{showItemsPerPageSelector:!1,showMoreButton:!1},initialItemsPerPage:6,columns:this.columns,dataStore:this.props.dataStore,highlightColor:"bluegray",pageToHighlight:!0})}},{key:"columns",get:function(){var e=this,t=[];return t.push({name:"PDB Id",render:function(e){return c.createElement("a",{href:"http://www.rcsb.org/pdb/explore/explore.do?structureId="+e.pdbId,target:"_blank"},e.pdbId)},sortBy:function(e){return e.pdbId},filter:function(e,t,n){return e.pdbId.toUpperCase().indexOf(n)>-1}}),t.push({name:"Chain",render:function(t){return c.createElement("span",null,c.createElement("span",{style:{float:"left",fontWeight:"bold",fontStyle:"italic"}},t.chain),c.createElement("a",{style:{float:"right",fontWeight:"bold",cursor:"pointer"},onClick:function(){e.props.dataStore.selectUid(e.props.dataStore.getChainUid(t))}},"3D"))},sortBy:function(e){return e.chain},filter:function(e,t,n){return e.chain.toUpperCase().indexOf(n)>-1}}),t.push({name:"Uniprot Positions",render:function(e){return c.createElement("span",null,e.uniprotStart+"-"+e.uniprotEnd)},sortBy:function(e){return[e.uniprotStart,e.uniprotEnd]},filter:function(e,t){return(e.uniprotStart+"").indexOf(t)>-1||(e.uniprotEnd+"").indexOf(t)>-1}}),t.push({name:"Organism",render:(0,w.default)(function(t){return e.props.cache?e.props.cache.get(t.pdbId):null},function(e,t){return c.createElement("span",null,y.default.getOrganism(e,t.chain))}),sortBy:function(t){return y.default.getOrganismFromCache(e.props.cache,t)},filter:function(t,n,r){return(y.default.getOrganismFromCache(e.props.cache,t)||"").toUpperCase().indexOf(r)>-1},visible:!!this.props.cache}),t.push({name:"Summary",render:function(t){return c.createElement(m.default,{pdbId:t.pdbId,chainId:t.chain,cache:e.props.cache,truncateText:!1,summaryFormat:!0})},filter:function(t,n,r){if(!e.props.cache)return!1;var o=e.props.cache.get(t.pdbId);if(o&&o.data){var i=(0,x.generatePdbInfoSummary)(o.data,t.chain);return i.pdbInfo.toUpperCase().indexOf(r)>-1||(i.moleculeInfo||"").toUpperCase().indexOf(r)>-1}return!1},visible:!!this.props.cache}),t}}]),t}(c.Component);_([g.computed],C.prototype,"columns",null),C=_([d.observer],C),t.default=C},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(3),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i),s=function(){function e(){r(this,e)}return o(e,null,[{key:"getOrganism",value:function(e,t){var n="NA";return a.find(e.compound,function(r){if(-1!=a.indexOf(r.chain,t.toLowerCase())&&null!=e.source[r.mol_id])return n=e.source[r.mol_id].organism_scientific||n,r}),n}},{key:"getOrganismFromCache",value:function(t,n){if(!t)return"";var r=t.get(n.pdbId);return r&&r.data?e.getOrganism(r.data,n.chain):""}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e){setTimeout(function(){window.requestAnimationFrame(e)},0)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=n(1),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l),c=n(268),p=n(10),f=n(50),d=function(e){return e&&e.__esModule?e:{default:e}}(f),h=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":s(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},m=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"somaticMutationFrequency",value:function(){var e=0;return this.props.samples.length>0&&(e=(0,c.somaticMutationRate)(this.props.hugoGeneSymbol,this.props.mutations,this.props.molecularProfileIdToMolecularProfile.result,this.props.samples)),u.createElement("div",{"data-test":"somaticMutationRate"},u.createElement("label",null,"Somatic Mutation Frequency:"),e.toFixed(1),"%",u.createElement(d.default,{placement:"right",overlay:u.createElement("span",null,"Percentage of samples with a somatic mutation in "+this.props.hugoGeneSymbol)},u.createElement("i",{className:"glyphicon glyphicon-info-sign",style:{marginLeft:5}})))}},{key:"germlineMutationFrequency",value:function(){var e=void 0;"pending"!==this.props.germlineConsentedSamples.status&&(e=this.props.germlineConsentedSamples&&this.props.germlineConsentedSamples.result&&this.props.germlineConsentedSamples.result.length>0?this.props.germlineConsentedSamples.result:this.props.samples);var t=e?(0,c.germlineMutationRate)(this.props.hugoGeneSymbol,this.props.mutations,this.props.molecularProfileIdToMolecularProfile.result,e):0;return u.createElement("div",{"data-test":"germlineMutationRate",className:t>0?"":"invisible"},u.createElement("label",null,"Germline Mutation Frequency:"),t>0?t.toFixed(1)+"%":"--",u.createElement(d.default,{placement:"right",overlay:u.createElement("span",null,"Percentage of samples with a germline mutation in "+this.props.hugoGeneSymbol)},u.createElement("i",{className:"glyphicon glyphicon-info-sign",style:{marginLeft:5}})))}},{key:"render",value:function(){return u.createElement("div",null,this.somaticMutationFrequency(),this.germlineMutationFrequency())}}]),t}(u.Component);m=h([p.observer],m),t.default=m},function(e,t){},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(1),p=o(c),f=n(3),d=o(f),h=n(999),m=r(h),g=n(10),v=n(28),y=n(1002),b=r(y),w=n(8),x=n(168),_=r(x),S=n(907),C=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},k=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.mutualExclusivityFilter=!0,n.coOccurenceFilter=!0,n.significantPairsFilter=!1,n.mutualExclusivityFilterChange=n.mutualExclusivityFilterChange.bind(n),n.coOccurenceFilterChange=n.coOccurenceFilterChange.bind(n),n.significantPairsFilterChange=n.significantPairsFilterChange.bind(n),n}return s(t,e),l(t,[{key:"mutualExclusivityFilterChange",value:function(){this.mutualExclusivityFilter=!this.mutualExclusivityFilter}},{key:"coOccurenceFilterChange",value:function(){this.coOccurenceFilter=!this.coOccurenceFilter}},{key:"significantPairsFilterChange",value:function(){this.significantPairsFilter=!this.significantPairsFilter}},{key:"render",value:function(){return this.props.store.isSampleAlteredMap.isPending?p.createElement(_.default,{isLoading:!0}):this.props.store.isSampleAlteredMap.isComplete?d.size(this.props.store.isSampleAlteredMap.result)>1?p.createElement("div",null,(0,S.getCountsText)(this.data),p.createElement("div",{className:b.default.Checkboxes},p.createElement(v.Checkbox,{checked:this.mutualExclusivityFilter,onChange:this.mutualExclusivityFilterChange},"Mutual exclusivity"),p.createElement(v.Checkbox,{checked:this.coOccurenceFilter,onChange:this.coOccurenceFilterChange},"Co-occurrence"),p.createElement(v.Checkbox,{checked:this.significantPairsFilter,onChange:this.significantPairsFilterChange},"Significant only")),p.createElement(m.default,{data:this.filteredData})):p.createElement("div",null,"Mutual exclusivity analysis cannot be provided when only a single gene is selected."):null}},{key:"data",get:function(){return(0,S.getData)(this.props.store.isSampleAlteredMap.result)}},{key:"filteredData",get:function(){return(0,S.getFilteredData)(this.data,this.mutualExclusivityFilter,this.coOccurenceFilter,this.significantPairsFilter)}}]),t}(p.Component);C([w.observable],k.prototype,"mutualExclusivityFilter",void 0),C([w.observable],k.prototype,"coOccurenceFilter",void 0),C([w.observable],k.prototype,"significantPairsFilter",void 0),C([w.computed],k.prototype,"data",null),C([w.computed],k.prototype,"filteredData",null),k=C([g.observer],k),t.default=k},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.MutualExclusivityTableComponent=t.MutualExclusivityTableColumnType=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1),c=r(u),p=n(3),f=r(p),d=n(169),h=function(e){return e&&e.__esModule?e:{default:e}}(d),m=n(10),g=n(8),v=n(28),y=n(907),b=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},w=t.MutualExclusivityTableColumnType=void 0;!function(e){e[e.GENE_A=0]="GENE_A",e[e.GENE_B=1]="GENE_B",e[e.NEITHER=2]="NEITHER",e[e.A_NOT_B=3]="A_NOT_B",e[e.B_NOT_A=4]="B_NOT_A",e[e.BOTH=5]="BOTH",e[e.LOG_ODDS_RATIO=6]="LOG_ODDS_RATIO",e[e.P_VALUE=7]="P_VALUE",e[e.ASSOCIATION=8]="ASSOCIATION"}(w||(t.MutualExclusivityTableColumnType=w={}));var x=t.MutualExclusivityTableComponent=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),t}(h.default),_=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._columns={},n.generateColumns(),n}return a(t,e),s(t,[{key:"generateColumns",value:function(){this._columns={},this._columns[w.GENE_A]={name:"Gene A",render:function(e){return c.createElement("span",null,c.createElement("b",null,e.geneA))},tooltip:c.createElement("span",null,"Gene A"),filter:function(e,t,n){return e.geneA.toUpperCase().includes(n)},sortBy:function(e){return e.geneA},download:function(e){return e.geneA}},this._columns[w.GENE_B]={name:"Gene B",render:function(e){return c.createElement("span",null,c.createElement("b",null,e.geneB))},tooltip:c.createElement("span",null,"Gene B"),filter:function(e,t,n){return e.geneB.toUpperCase().includes(n)},sortBy:function(e){return e.geneB},download:function(e){return e.geneB}},this._columns[w.NEITHER]={name:"Neither",render:function(e){return c.createElement("span",null,e.neitherCount)},tooltip:c.createElement("span",null,"Number of samples with alterations in neither Gene A nor Gene B"),sortBy:function(e){return e.neitherCount},download:function(e){return e.neitherCount.toString()}},this._columns[w.A_NOT_B]={name:"A Not B",render:function(e){return c.createElement("span",null,e.aNotBCount)},tooltip:c.createElement("span",null,"Number of samples with alterations in Gene A but not in Gene B"),sortBy:function(e){return e.aNotBCount},download:function(e){return e.aNotBCount.toString()}},this._columns[w.B_NOT_A]={name:"B Not A",render:function(e){return c.createElement("span",null,e.bNotACount)},tooltip:c.createElement("span",null,"Number of samples with alterations in Gene B but not in Gene A"),sortBy:function(e){return e.bNotACount},download:function(e){return e.bNotACount.toString()}},this._columns[w.BOTH]={name:"Both",render:function(e){return c.createElement("span",null,e.bothCount)},tooltip:c.createElement("span",null,"Number of samples with alterations in both Gene A and Gene B"),sortBy:function(e){return e.bothCount},download:function(e){return e.bothCount.toString()}},this._columns[w.LOG_ODDS_RATIO]={name:"Log Odds Ratio",render:function(e){return c.createElement("span",null,(0,y.formatLogOddsRatio)(e.logOddsRatio))},tooltip:c.createElement("span",{style:{display:"inline-block",maxWidth:300}},"Quantifies how strongly the presence or absence of alterations in Gene A are associated with the presence or absence of alterations in Gene B in the selected samples."),sortBy:function(e){return e.logOddsRatio},download:function(e){return(0,y.formatLogOddsRatio)(e.logOddsRatio)}},this._columns[w.P_VALUE]={name:"p-Value",render:function(e){return(0,y.formatPValueWithStyle)(e.pValue)},tooltip:c.createElement("span",null,"Derived from Fisher Exact Test"),sortBy:function(e){return e.pValue},download:function(e){return(0,y.formatPValue)(e.pValue)}},this._columns[w.ASSOCIATION]={name:"Tendency",render:function(e){return c.createElement("span",null,e.association,"",e.pValue<.05?c.createElement(v.Badge,{style:{backgroundColor:"#58ACFA"}},"Significant"):"")},tooltip:c.createElement("span",null,"Log odds ratio > 0 : Tendency towards co-occurrence",c.createElement("br",null),"Log odds ratio <= 0 : Tendency towards mutual exclusivity",c.createElement("br",null),"p-Value < 0.05 : Significant association"),filter:function(e,t,n){return e.association.toUpperCase().includes(n)},sortBy:function(e){return e.association},download:function(e){return e.association}}}},{key:"render",value:function(){var e=f.sortBy(this._columns,function(e){return e.order});return c.createElement(x,{columns:e,data:this.props.data,initialSortColumn:this.props.initialSortColumn})}}]),t}(c.Component);_.defaultProps={columns:[w.GENE_A,w.GENE_B,w.NEITHER,w.A_NOT_B,w.B_NOT_A,w.BOTH,w.LOG_ODDS_RATIO,w.P_VALUE,w.ASSOCIATION],initialSortColumn:"p-Value"},b([g.observable],_.prototype,"_columns",void 0),_=b([m.observer],_),t.default=_},function(e,t,n){"use strict";function r(e,t,n,r,o){var i=e+t+n+r,a=o[e+t]+o[n+r]+o[e+n]+o[t+r]-(o[e]+o[t]+o[n]+o[r]+o[i]);return Math.exp(a)}function o(e,t,n,o){var i=void 0,a=void 0,s=e+t+n+o,l=0,u=new Array(s+1);u[0]=0;for(var c=1;c<=s;c++)u[c]=u[c-1]+Math.log(c);if(l+=r(e,t,n,o,u),e*o>=t*n)for(i=n<t?n:t,a=0;a<i;a++)l+=r(++e,--t,--n,++o,u);if(e*o<t*n)for(i=e<o?e:o,a=0;a<i;a++)l+=r(--e,++t,++n,--o,u);return l}Object.defineProperty(t,"__esModule",{value:!0}),t.getCumulativePValue=o},function(e,t,n){var r,o,i;!function(n,a){o=[],r=a,void 0!==(i="function"==typeof r?r.apply(t,o):r)&&(e.exports=i)}(0,function(){"use strict";var e=function(e,t){for(var n=1;t--;)n*=e--;return n},t=function(t,n){return n>t?0:e(t,n)/e(n,n)},n=function(t){return e(t,t)},r=function(e,t){var r=1;if(t)r=n(t);else{for(t=1;r<e;r*=++t);r>e&&(r/=t--)}for(var o=[0];t;r/=t--)o[t]=Math.floor(e/r),e%=r;return o},o=function(e,t){Object.keys(t).forEach(function(n){Object.defineProperty(e,n,{value:t[n],configurable:"next"==n})})},i=function(e,t){Object.defineProperty(e,t,{writable:!0})},a=function(e){var t,n=[];for(this.init();t=this.next();)n.push(e?e(t):t);return this.init(),n},s={toArray:a,map:a,forEach:function(e){var t;for(this.init();t=this.next();)e(t);this.init()},filter:function(e){var t,n=[];for(this.init();t=this.next();)e(t)&&n.push(t);return this.init(),n},lazyMap:function(e){return this._lazyMap=e,this},lazyFilter:function(e){if(Object.defineProperty(this,"next",{writable:!0}),"function"!=typeof e)this.next=this._next;else{"function"!=typeof this._next&&(this._next=this.next);var t=this._next.bind(this);this.next=function(){for(var n;n=t();)if(e(n))return n;return n}.bind(this)}return Object.defineProperty(this,"next",{writable:!1}),this}},l=function(e,t){var n=1<<e.length,r=function(){return n},a=Object.create(e.slice(),{length:{get:r}});return i(a,"index"),o(a,{valueOf:r,init:function(){a.index=0},nth:function(e){if(!(e>=n)){for(var t=0,r=[];e;e>>>=1,t++)1&e&&r.push(this[t]);return"function"==typeof a._lazyMap?a._lazyMap(r):r}},next:function(){return this.nth(this.index++)}}),o(a,s),a.init(),"function"==typeof t?a.map(t):a},u=function(e){var t=e&-e,n=e+t;return n|((n&-n)/t>>1)-1},c=function(e,n,r){if(n||(n=e.length),n<1)throw new RangeError;if(n>e.length)throw new RangeError;var a=(1<<n)-1,l=t(e.length,n),c=1<<e.length,p=function(){return l},f=Object.create(e.slice(),{length:{get:p}});return i(f,"index"),o(f,{valueOf:p,init:function(){this.index=a},next:function(){if(!(this.index>=c)){for(var e=0,t=this.index,n=[];t;t>>>=1,e++)1&t&&(n[n.length]=this[e]);return this.index=u(this.index),"function"==typeof f._lazyMap?f._lazyMap(n):n}}}),o(f,s),f.init(),"function"==typeof r?f.map(r):f},p=function(e,t){var n=e,r=t,o=0;for(o=n.length-1;o>=0&&1==n[o];o--)r--;if(0==r){n[n.length]=1;for(var i=n.length-2;i>=0;i--)n[i]=i<t-1?1:0}else{for(var a=-1,s=-1,o=0;o<n.length;o++)if(0==n[o]&&-1!=a&&(s=o),1==n[o]&&(a=o),-1!=s&&-1!=a){n[s]=1,n[a]=0;break}r=t;for(var o=n.length-1;o>=a;o--)1==n[o]&&r--;for(var o=0;o<a;o++)n[o]=o<r?1:0}return n},f=function(e){for(var t=[],n=0;n<e;n++)t[n]=1;return t[0]=1,t},d=function(e,n,r){if(n||(n=e.length),n<1)throw new RangeError;if(n>e.length)throw new RangeError;var a=f(n),l=t(e.length,n),u=e.length,c=function(){return l},d=Object.create(e.slice(),{length:{get:c}});return i(d,"index"),o(d,{valueOf:c,init:function(){this.index=a.concat()},next:function(){if(!(this.index.length>u)){for(var e=0,t=this.index,r=[],o=0;o<t.length;o++,e++)t[o]&&(r[r.length]=this[e]);return p(this.index,n),"function"==typeof d._lazyMap?d._lazyMap(r):r}}}),o(d,s),d.init(),"function"==typeof r?d.map(r):d},h=function(e){var t=e.slice(),o=n(t.length);return t.index=0,t.next=function(){if(!(this.index>=o)){for(var e=this.slice(),n=r(this.index,this.length),i=[],a=this.length-1;a>=0;--a)i.push(e.splice(n[a],1)[0]);return this.index++,"function"==typeof t._lazyMap?t._lazyMap(i):i}},t},m=function(t,n,r){if(n||(n=t.length),n<1)throw new RangeError;if(n>t.length)throw new RangeError;var a=e(t.length,n),l=function(){return a},u=Object.create(t.slice(),{length:{get:l}});return i(u,"cmb"),i(u,"per"),o(u,{valueOf:function(){return a},init:function(){this.cmb=c(t,n),this.per=h(this.cmb.next())},next:function(){var e=this.per.next();if(!e){var t=this.cmb.next();if(!t)return;return this.per=h(t),this.next()}return"function"==typeof u._lazyMap?u._lazyMap(e):e}}),o(u,s),u.init(),"function"==typeof r?u.map(r):u},g=function(t){for(var n=0,r=1;r<=t;r++){n+=e(t,r)}return n},v=function(e,t){var n=g(e.length),r=function(){return n},a=Object.create(e.slice(),{length:{get:r}});return i(a,"cmb"),i(a,"per"),i(a,"nelem"),o(a,{valueOf:function(){return n},init:function(){this.nelem=1,this.cmb=c(e,this.nelem),this.per=h(this.cmb.next())},next:function(){var t=this.per.next();if(!t){var n=this.cmb.next();if(!n){if(++this.nelem>e.length)return;if(this.cmb=c(e,this.nelem),!(n=this.cmb.next()))return}return this.per=h(n),this.next()}return"function"==typeof a._lazyMap?a._lazyMap(t):t}}),o(a,s),a.init(),"function"==typeof t?a.map(t):a},y=Array.prototype.slice,b=function(){if(!arguments.length)throw new RangeError;var e=y.call(arguments),t=e.reduce(function(e,t){return e*t.length},1),n=function(){return t},r=e.length,a=Object.create(e,{length:{get:n}});if(!t)throw new RangeError;return i(a,"index"),o(a,{valueOf:n,dim:r,init:function(){this.index=0},get:function(){if(arguments.length===this.length){for(var e=[],t=0;t<r;t++){var n=arguments[t];if(n>=this[t].length)return;e.push(this[t][n])}return"function"==typeof a._lazyMap?a._lazyMap(e):e}},nth:function(e){for(var t=[],n=0;n<r;n++){var o=this[n].length,i=e%o;t.push(this[n][i]),e-=i,e/=o}return"function"==typeof a._lazyMap?a._lazyMap(t):t},next:function(){if(!(this.index>=t)){var e=this.nth(this.index);return this.index++,e}}}),o(a,s),a.init(),a},w=function(e,t,n){if(t||(t=e.length),t<1)throw new RangeError;var r=e.length,a=Math.pow(r,t),l=function(){return a},u=Object.create(e.slice(),{length:{get:l}});return i(u,"index"),o(u,{valueOf:l,init:function(){u.index=0},nth:function(n){if(!(n>=a)){for(var o=[],i=0;i<t;i++){var s=n%r;o.push(e[s]),n-=s,n/=r}return"function"==typeof u._lazyMap?u._lazyMap(o):o}},next:function(){return this.nth(this.index++)}}),o(u,s),u.init(),"function"==typeof n?u.map(n):u},x=Object.create(null);return o(x,{C:t,P:e,factorial:n,factoradic:r,cartesianProduct:b,combination:c,bigCombination:d,permutation:m,permutationCombination:v,power:l,baseN:w,VERSION:"0.5.2"}),x})},function(e,t){e.exports={portalWidth:"styles-module__portalWidth__22mhB",Checkboxes:"styles-module__Checkboxes__2oyZv"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),p=n(1004),f=r(p),d=n(168),h=r(d),m=n(10),g=n(908),v=r(g),y=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},b=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.overallSurvivalTitleText="Overall Survival Kaplan-Meier Estimate",e.diseaseFreeSurvivalTitleText="Disease/Progression-free Kaplan-Meier Estimate",e}return a(t,e),s(t,[{key:"render",value:function(){if(this.props.store.overallAlteredPatientSurvivals.isPending||this.props.store.overallUnalteredPatientSurvivals.isPending||this.props.store.diseaseFreeAlteredPatientSurvivals.isPending||this.props.store.diseaseFreeUnalteredPatientSurvivals.isPending)return c.createElement(h.default,{isLoading:!0});var e=[],t=!1,n=!1;return this.props.store.overallAlteredPatientSurvivals.isComplete&&this.props.store.overallUnalteredPatientSurvivals.isComplete&&this.props.store.overallAlteredPatientSurvivals.result.length>0&&this.props.store.overallUnalteredPatientSurvivals.result.length>0?e.push(c.createElement("div",{style:{marginBottom:40}},c.createElement("h4",{className:"forceHeaderStyle h4"},this.overallSurvivalTitleText),c.createElement(f.default,{alteredPatientSurvivals:this.props.store.overallAlteredPatientSurvivals.result,unalteredPatientSurvivals:this.props.store.overallUnalteredPatientSurvivals.result,title:this.overallSurvivalTitleText,xAxisLabel:"Months Survival",yAxisLabel:"Overall Survival",totalCasesHeader:"Number of Cases, Total",statusCasesHeader:"Number of Cases, Deceased",medianMonthsHeader:"Median Months Survival",yLabelTooltip:"Survival estimate",xLabelWithEventTooltip:"Time of death",xLabelWithoutEventTooltip:"Time of last observation",fileName:"Overall_Survival"}))):t=!0,this.props.store.diseaseFreeAlteredPatientSurvivals.isComplete&&this.props.store.diseaseFreeUnalteredPatientSurvivals.isComplete&&this.props.store.diseaseFreeAlteredPatientSurvivals.result.length>0&&this.props.store.diseaseFreeUnalteredPatientSurvivals.result.length>0?e.push(c.createElement("div",null,c.createElement("h4",{className:"forceHeaderStyle h4"},this.diseaseFreeSurvivalTitleText),c.createElement(f.default,{alteredPatientSurvivals:this.props.store.diseaseFreeAlteredPatientSurvivals.result,unalteredPatientSurvivals:this.props.store.diseaseFreeUnalteredPatientSurvivals.result,title:this.diseaseFreeSurvivalTitleText,xAxisLabel:"Months Disease/Progression-free",yAxisLabel:"Disease/Progression-free Survival",totalCasesHeader:"Number of Cases, Total",statusCasesHeader:"Number of Cases, Relapsed/Progressed",medianMonthsHeader:"Median Months Disease-free",yLabelTooltip:"Disease-free Estimate",xLabelWithEventTooltip:"Time of Relapse",xLabelWithoutEventTooltip:"Time of Last Observation",fileName:"Disease_Free_Survival"}))):n=!0,t&&n&&(e.push(c.createElement("div",{className:v.default.NotAvailable},this.overallSurvivalTitleText," not available")),e.push(c.createElement("div",{className:v.default.NotAvailable},this.diseaseFreeSurvivalTitleText," not available"))),c.createElement("div",null,e)}}]),t}(c.Component);b=y([m.observer],b),t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(1),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),f=n(10),d=n(8),h=n(28),m=n(908),g=r(m),v=n(1005),y=n(1006),b=n(1007),w=r(b),x=n(170),_=r(x),S=n(1011),C=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},k=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}l((r=r.apply(e,t||[])).next())})},A=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.isTooltipHovered=!1,n.tooltipCounter=0,n.alteredLegendText="Cases with Alteration(s) in Query Gene(s)",n.unalteredLegendText="Cases without Alteration(s) in Query Gene(s)",n.svgsaver=new w.default,n.tooltipMouseEnter=n.tooltipMouseEnter.bind(n),n.tooltipMouseLeave=n.tooltipMouseLeave.bind(n),n.downloadSvg=n.downloadSvg.bind(n),n.downloadPng=n.downloadPng.bind(n),n.downloadData=n.downloadData.bind(n),n}return a(t,e),l(t,[{key:"tooltipMouseEnter",value:function(){this.isTooltipHovered=!0}},{key:"tooltipMouseLeave",value:function(){this.isTooltipHovered=!1,this.tooltipModel=null}},{key:"downloadSvg",value:function(){this.svgsaver.asSvg(this.svgContainer.firstChild,this.props.fileName+".svg")}},{key:"downloadPng",value:function(){this.svgsaver.asPng(this.svgContainer.firstChild,this.props.fileName+".png")}},{key:"downloadData",value:function(){(0,_.default)((0,S.getDownloadContent)((0,S.getScatterData)(this.sortedAlteredPatientSurvivals,this.alteredEstimates),(0,S.getScatterData)(this.sortedUnalteredPatientSurvivals,this.unalteredEstimates),this.props.title,this.alteredLegendText,this.unalteredLegendText),this.props.fileName+".txt")}},{key:"render",value:function(){var e=this,t=[{target:"data",eventHandlers:{onMouseOver:function(){return[{target:"data",mutation:function(){return{active:!0}}},{target:"labels",mutation:function(t){e.tooltipModel=t,e.tooltipCounter++}}]},onMouseOut:function(){return[{target:"data",mutation:function(){return{active:!1}}},{target:"labels",mutation:function(){return k(e,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.sleep)(100);case 2:this.isTooltipHovered||1!==this.tooltipCounter||(this.tooltipModel=null),this.tooltipCounter--;case 4:case"end":return e.stop()}},e,this)}))}}]}}}];return p.createElement("div",{className:"posRelative"},p.createElement("div",{className:"borderedChart","data-test":"SurvivalChart",style:{width:910}},p.createElement("div",{className:"btn-group",style:{position:"absolute",zIndex:10,right:260},role:"group"},p.createElement("button",{className:"btn btn-default btn-xs",onClick:this.downloadSvg},"SVG ",p.createElement("i",{className:"fa fa-cloud-download"})),p.createElement("button",{className:"btn btn-default btn-xs",onClick:this.downloadPng},"PNG ",p.createElement("i",{className:"fa fa-cloud-download"})),p.createElement("button",{className:"btn btn-default btn-xs",onClick:this.downloadData},"Data ",p.createElement("i",{className:"fa fa-cloud-download"}))),p.createElement(y.VictoryChart,{containerComponent:p.createElement(y.VictoryContainer,{responsive:!1,containerRef:function(t){return e.svgContainer=t}}),height:500,width:900,padding:{top:20,bottom:50,left:60,right:300},theme:y.VictoryTheme.material},p.createElement(y.VictoryAxis,{style:{ticks:{size:8,stroke:"black"},tickLabels:{padding:2,fill:"black"},axisLabel:{padding:35,fill:"black"},grid:{opacity:0},axis:{stroke:"black",strokeWidth:1}},crossAxis:!1,tickCount:11,label:this.props.xAxisLabel}),p.createElement(y.VictoryAxis,{label:this.props.yAxisLabel,dependentAxis:!0,tickFormat:function(e){return e+"%"},tickCount:11,style:{ticks:{size:8,stroke:"black"},tickLabels:{padding:2,fill:"black"},axisLabel:{padding:45,fill:"black"},grid:{opacity:0},axis:{stroke:"black",strokeWidth:1}},domain:[0,100],crossAxis:!1}),p.createElement(y.VictoryLine,{interpolation:"stepAfter",data:(0,S.getLineData)(this.sortedAlteredPatientSurvivals,this.alteredEstimates),style:{data:{stroke:"red",strokeWidth:1}}}),p.createElement(y.VictoryLine,{interpolation:"stepAfter",data:(0,S.getLineData)(this.sortedUnalteredPatientSurvivals,this.unalteredEstimates),style:{data:{stroke:"blue",strokeWidth:1}}}),p.createElement(y.VictoryScatter,{data:(0,S.getScatterDataWithOpacity)(this.sortedAlteredPatientSurvivals,this.alteredEstimates),symbol:"plus",style:{data:{fill:"red"}},size:3}),p.createElement(y.VictoryScatter,{data:(0,S.getScatterDataWithOpacity)(this.sortedUnalteredPatientSurvivals,this.unalteredEstimates),symbol:"plus",style:{data:{fill:"blue"}},size:3}),p.createElement(y.VictoryScatter,{data:(0,S.getScatterData)(this.sortedAlteredPatientSurvivals,this.alteredEstimates),symbol:"circle",style:{data:{fill:"red",fillOpacity:function(e,t){return t?.3:0}}},size:10,events:t}),p.createElement(y.VictoryScatter,{data:(0,S.getScatterData)(this.sortedUnalteredPatientSurvivals,this.unalteredEstimates),symbol:"circle",style:{data:{fill:"blue",fillOpacity:function(e,t){return t?.3:0}}},size:10,events:t}),p.createElement(y.VictoryLegend,{x:600,y:40,data:[{name:this.alteredLegendText,symbol:{fill:"red",type:"square"}},{name:this.unalteredLegendText,symbol:{fill:"blue",type:"square"}},{name:"Logrank Test P-Value: "+this.logRank.toPrecision(3),symbol:{opacity:0}}]}))),this.tooltipModel&&p.createElement(h.Popover,s({arrowOffsetTop:48,className:g.default.Tooltip,positionLeft:this.tooltipModel.x+15},{container:this},{positionTop:this.tooltipModel.y-60,onMouseEnter:this.tooltipMouseEnter,onMouseLeave:this.tooltipMouseLeave}),p.createElement("div",null,"Patient ID: ",p.createElement("a",{href:"/case.do#/patient?caseId="+this.tooltipModel.datum.patientId+"&studyId="+this.tooltipModel.datum.studyId,target:"_blank"},this.tooltipModel.datum.patientId),p.createElement("br",null),this.props.yLabelTooltip,": ",this.tooltipModel.datum.y.toFixed(2),"%",p.createElement("br",null),this.tooltipModel.datum.status?this.props.xLabelWithEventTooltip:this.props.xLabelWithoutEventTooltip,": ",this.tooltipModel.datum.x.toFixed(2)," months ",this.tooltipModel.datum.status?"":"(censored)")),p.createElement("table",{className:"table table-striped",style:{marginTop:20,width:910}},p.createElement("tbody",null,p.createElement("tr",null,p.createElement("td",null),p.createElement("td",null,this.props.totalCasesHeader),p.createElement("td",null,this.props.statusCasesHeader),p.createElement("td",null,this.props.medianMonthsHeader)),p.createElement("tr",null,p.createElement("td",null,this.alteredLegendText),(0,S.getStats)(this.sortedAlteredPatientSurvivals,this.alteredEstimates).map(function(e){return p.createElement("td",null,p.createElement("b",null,e))})),p.createElement("tr",null,p.createElement("td",null,this.unalteredLegendText),(0,S.getStats)(this.sortedUnalteredPatientSurvivals,this.unalteredEstimates).map(function(e){return p.createElement("td",null,p.createElement("b",null,e))})))))}},{key:"sortedAlteredPatientSurvivals",get:function(){return this.props.alteredPatientSurvivals.sort(function(e,t){return e.months-t.months})}},{key:"sortedUnalteredPatientSurvivals",get:function(){return this.props.unalteredPatientSurvivals.sort(function(e,t){return e.months-t.months})}},{key:"alteredEstimates",get:function(){return(0,S.getEstimates)(this.sortedAlteredPatientSurvivals)}},{key:"unalteredEstimates",get:function(){return(0,S.getEstimates)(this.sortedUnalteredPatientSurvivals)}},{key:"logRank",get:function(){return(0,S.calculateLogRank)(this.sortedAlteredPatientSurvivals,this.sortedUnalteredPatientSurvivals)}}]),t}(p.Component);C([d.observable],A.prototype,"tooltipModel",void 0),C([d.computed],A.prototype,"sortedAlteredPatientSurvivals",null),C([d.computed],A.prototype,"sortedUnalteredPatientSurvivals",null),C([d.computed],A.prototype,"alteredEstimates",null),C([d.computed],A.prototype,"unalteredEstimates",null),C([d.computed],A.prototype,"logRank",null),A=C([f.observer],A),t.default=A},function(e,t,n){"use strict";function r(e){return new Promise(function(t){return setTimeout(t,e)})}Object.defineProperty(t,"__esModule",{value:!0}),t.sleep=r},function(e,t,n){e.exports=n(4)(664)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return!!C(e)&&(_(window)&&C(window.Node)?e instanceof window.Node:"number"==typeof e.nodeType&&"string"==typeof e.nodeName)}function a(e,t,n){!0!==t&&Array.prototype.slice.call(e.attributes).forEach(function(r){r.specified&&(""===t||!1===t||S(n[r.name])&&t.indexOf(r.name)<0)&&e.removeAttribute(r.name)})}function s(e,t){t=t||e.parentNode.style,w.forEach(function(n){e.style[n]===t[n]&&e.style.removeProperty(n)})}function l(e,t,n,r){n(e,t);for(var o=e.childNodes,i=0;i<o.length;i++)l(o[i],t.childNodes[i],n,r);r(e,t)}function u(e,t,n){var r=e.cloneNode(!0);return l(e,r,function(e,t){t.style&&(0,m.default)(e,t.style,n)},function(e,r){r.style&&r.parentNode&&s(r),r.attributes&&a(r,t,n)}),r}function c(e,t){if(k){var n=document.createElement("a");return n.setAttribute("href",e),n.setAttribute("download",t),n.dispatchEvent(new MouseEvent("click")),!0}return"undefined"!=typeof window&&(window.open(e,"_blank",""),!0)}function p(e,t,n){var r=document.createElement("canvas"),o=r.getContext("2d"),i=new Image;return i.onload=function(){r.width=i.width,r.height=i.height,o.drawImage(i,0,0),n(r)},i.src=e,!0}function f(e,t){return p(e,t,function(e){_(e.toBlob)?e.toBlob(function(e){v.default.saveAs(e,t)}):c(e.toDataURL("image/png"),t)})}Object.defineProperty(t,"__esModule",{value:!0});var d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=n(1008),m=r(h),g=n(1009),v=r(g),y={"alignment-baseline":"auto","baseline-shift":"baseline",clip:"auto","clip-path":"none","clip-rule":"nonzero",color:"rgb(51, 51, 51)","color-interpolation":"srgb","color-interpolation-filters":"linearrgb","color-profile":"auto","color-rendering":"auto",cursor:"auto",direction:"ltr",display:"inline","dominant-baseline":"auto","enable-background":"",fill:"rgb(0, 0, 0)","fill-opacity":"1","fill-rule":"nonzero",filter:"none","flood-color":"rgb(0, 0, 0)","flood-opacity":"1",font:"","font-family":"normal","font-size":"medium","font-size-adjust":"auto","font-stretch":"normal","font-style":"normal","font-variant":"normal","font-weight":"400","glyph-orientation-horizontal":"0deg","glyph-orientation-vertical":"auto","image-rendering":"auto",kerning:"auto","letter-spacing":"0","lighting-color":"rgb(255, 255, 255)",marker:"","marker-end":"none","marker-mid":"none","marker-start":"none",mask:"none",opacity:"1",overflow:"visible","paint-order":"fill","pointer-events":"auto","shape-rendering":"auto","stop-color":"rgb(0, 0, 0)","stop-opacity":"1",stroke:"none","stroke-dasharray":"none","stroke-dashoffset":"0","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-miterlimit":"4","stroke-opacity":"1","stroke-width":"1","text-anchor":"start","text-decoration":"none","text-rendering":"auto","unicode-bidi":"normal",visibility:"visible","word-spacing":"0px","writing-mode":"lr-tb"},b=["id","xml: base","xml: lang","xml: space","height","result","width","x","y","xlink: href","href","style","class","d","pathLength","x","y","dx","dy","glyphRef","format","x1","y1","x2","y2","rotate","textLength","cx","cy","r","rx","ry","fx","fy","width","height","refX","refY","orient","markerUnits","markerWidth","markerHeight","maskUnits","transform","viewBox","version","preserveAspectRatio","xmlns","points","offset","xlink:href"],w=["clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cursor","direction","fill","fill-opacity","fill-rule","font","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-orientation-horizontal","glyph-orientation-vertical","image-rendering","kerning","letter-spacing","marker","marker-end","marker-mid","marker-start","pointer-events","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-rendering","transform","visibility","white-space","word-spacing","writing-mode"],x=function(e){return"function"==typeof e},_=function(e){return void 0!==e},S=function(e){return void 0===e},C=function(e){return null!==e&&"object"==typeof e},k="undefined"!=typeof document&&"download"in document.createElement("a")&&"function"==typeof MouseEvent,A=!!window.MSInputMethodContext&&!!document.documentMode;w.forEach(function(e){e in y&&(y[e]=!0)});var E=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=t.attrs,r=t.styles;o(this,e),this.attrs=void 0===n?b:n,this.styles=void 0===r?y:r}return d(e,null,[{key:"getSvg",value:function(e){if(S(e)||""===e?e=document.body.querySelector("svg"):"string"==typeof e&&(e=document.body.querySelector(e)),e&&"svg"!==e.tagName&&(e=e.querySelector("svg")),!i(e))throw new Error("svgsaver: Can't find an svg element");return e}},{key:"getFilename",value:function(e,t,n){return t&&""!==t||(t=(e.getAttribute("title")||"untitled")+"."+n),encodeURI(t)}}]),d(e,[{key:"cloneSVG",value:function(t){t=e.getSvg(t);var n=u(t,this.attrs,this.styles);return n.setAttribute("xmlns","http://www.w3.org/2000/svg"),n.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),n.setAttribute("version",1.1),n.setAttribute("width",n.getAttribute("width")||"500"),n.setAttribute("height",n.getAttribute("height")||"900"),n}},{key:"getHTML",value:function(e){var t=this.cloneSVG(e),n=t.outerHTML;return n||(t.removeAttribute("xmlns"),t.removeAttribute("xmlns:xlink"),t.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),t.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),(new window.XMLSerializer).serializeToString(t))}},{key:"getBlob",value:function(e){var t=this.getHTML(e);return new Blob([t],{type:"text/xml"})}},{key:"getUri",value:function(e){var t=encodeURIComponent(this.getHTML(e));return _(window.btoa)?"data:image/svg+xml;base64,"+window.btoa(unescape(t)):"data:image/svg+xml,"+t}},{key:"asSvg",value:function(t,n){return t=e.getSvg(t),n=e.getFilename(t,n,"svg"),x(Blob)?v.default.saveAs(this.getBlob(t),n):c(this.getUri(t),n)}},{key:"getPngUri",value:function(t,n){A&&console.error("svgsaver: getPngUri not supported on IE11"),t=e.getSvg(t);var r=e.getFilename(t,null,"png");return p(this.getUri(t),r,function(e){n(e.toDataURL("image/png"))})}},{key:"asPng",value:function(t,n){return A&&console.error("svgsaver: asPng not supported on IE11"),t=e.getSvg(t),n=e.getFilename(t,n,"png"),f(this.getUri(t),n)}}]),e}();t.default=E,e.exports=t.default},function(e,t,n){"use strict";function r(e){return!!a(e)&&(i(window)&&a(window.Node)?e instanceof window.Node:"number"==typeof e.nodeType&&"string"==typeof e.nodeName)}function o(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=arguments.length<=2||void 0===arguments[2]||arguments[2];if(!r(e))throw new Error("parameter 1 is not of type 'Element'");if(!1===n)return t;if(s)var o=e.ownerDocument.defaultView.getComputedStyle(e,null),a=!0===n?o:Object.keys(n);else var o=i(e.currentStyle)?e.currentStyle:e.style,a=!0===n?Object.keys(o):Object.keys(n);for(var l=0,u=a.length;l<u;l++){var c=a[l],p=!0===n||n[c];if(!1!==p&&i(p)){var f=s?o.getPropertyValue(c):o[c];"string"==typeof f&&""!==f&&(!0!==p&&f===p||(t[c]=f))}}return t}Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return void 0!==e},a=function(e){return null!==e&&"object"==typeof e},s=i(window)&&i(window.getComputedStyle);t.default=o,e.exports=t.default},function(e,t,n){var r,o=o||function(e){"use strict";if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=t.createElementNS("http://www.w3.org/1999/xhtml","a"),o="download"in r,i=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},a=/constructor/i.test(e.HTMLElement)||e.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent),l=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},u=function(e){var t=function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()};setTimeout(t,4e4)},c=function(e,t,n){t=[].concat(t);for(var r=t.length;r--;){var o=e["on"+t[r]];if("function"==typeof o)try{o.call(e,n||e)}catch(e){l(e)}}},p=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},f=function(t,l,f){f||(t=p(t));var d,h=this,m=t.type,g="application/octet-stream"===m,v=function(){c(h,"writestart progress write writeend".split(" "))};if(h.readyState=h.INIT,o)return d=n().createObjectURL(t),void setTimeout(function(){r.href=d,r.download=l,i(r),v(),u(d),h.readyState=h.DONE});!function(){if((s||g&&a)&&e.FileReader){var r=new FileReader;return r.onloadend=function(){var t=s?r.result:r.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,h.readyState=h.DONE,v()},r.readAsDataURL(t),void(h.readyState=h.INIT)}if(d||(d=n().createObjectURL(t)),g)e.location.href=d;else{e.open(d,"_blank")||(e.location.href=d)}h.readyState=h.DONE,v(),u(d)}()},d=f.prototype,h=function(e,t,n){return new f(e,t||e.name||"download",n)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=p(e)),navigator.msSaveOrOpenBlob(e,t)}:(d.abort=function(){},d.readyState=d.INIT=0,d.WRITING=1,d.DONE=2,d.error=d.onwritestart=d.onprogress=d.onwrite=d.onabort=d.onerror=d.onwriteend=null,h)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);void 0!==e&&e.exports?e.exports.saveAs=o:null!==n(278)&&null!==n(1010)&&void 0!==(r=function(){return o}.call(t,n,t,e))&&(e.exports=r)},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t,n){"use strict";function r(e){var t=[],n=1;return e.forEach(function(r,o){if(r.status){var i=e.length-o,a=n*((i-1)/i);n=a,t.push(a)}else t.push(n)}),t}function o(e,t){for(var n="NA",r=0;r<t.length;r++)if(t[r]<=.5){n=e[r].months.toString();break}return n}function i(e,t){var n=[];return n.push({x:0,y:100}),e.forEach(function(e,r){n.push({x:e.months,y:100*t[r]})}),n}function a(e,t){return e.map(function(e,n){return{x:e.months,y:100*t[n],patientId:e.patientId,studyId:e.studyId,status:e.status}})}function s(e,t){var n=a(e,t),r=[],o=void 0;return e.forEach(function(e,i){var a=t[i],s=1;o&&a!==o&&(s=0),o=a,r.push(Object.assign({},n[i],{opacity:s}))}),r}function l(e,t){return[e.length,e.filter(function(e){return!0===e.status}).length,o(e,t)]}function u(e,t){for(var n=0,r=0,o=0,i=0,a=0;n<e.length&&r<t.length;){var s=0,l=0,u=e.length-n,c=t.length-r,p=e[n],f=t[r];(p.months<f.months||p.months===f.months)&&(p.status&&(s=1),n+=1),(p.months>f.months||p.months===f.months)&&(f.status&&(l=1),r+=1);var d=s+l,m=u+c,g=u/m*d,v=d*(m-d)*u*c/(m*m*(m-1));o+=s,i+=g,a+=v}var y=(o-i)*(o-i)/a;return 1-h.default.chisquare.cdf(y,1)}function c(e,t,n,r,o){var i=n+"\n\n"+r+"\n";return i+=(0,f.tsvFormat)(p(e))+"\n\n"+o+"\n",i+=(0,f.tsvFormat)(p(t))}function p(e){var t=[];return e.map(function(n,r){t.push({"Case ID":n.patientId,"Study ID":n.studyId,"Number at Risk":e.length-r,Status:n.status?"deceased":"censored","Survival Rate":n.y/100,"Time (months)":n.x})}),t}Object.defineProperty(t,"__esModule",{value:!0}),t.getEstimates=r,t.getMedian=o,t.getLineData=i,t.getScatterData=a,t.getScatterDataWithOpacity=s,t.getStats=l,t.calculateLogRank=u,t.getDownloadContent=c,t.convertScatterDataToDownloadData=p;var f=n(1012),d=n(1015),h=function(e){return e&&e.__esModule?e:{default:e}}(d)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(894);n.d(t,"dsvFormat",function(){return r.a});var o=n(1013);n.d(t,"csvParse",function(){return o.c}),n.d(t,"csvParseRows",function(){return o.d}),n.d(t,"csvFormat",function(){return o.a}),n.d(t,"csvFormatRows",function(){return o.b});var i=n(1014);n.d(t,"tsvParse",function(){return i.c}),n.d(t,"tsvParseRows",function(){return i.d}),n.d(t,"tsvFormat",function(){return i.a}),n.d(t,"tsvFormatRows",function(){return i.b})},function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"d",function(){return a}),n.d(t,"a",function(){return s}),n.d(t,"b",function(){return l});var r=n(894),o=Object(r.a)(","),i=o.parse,a=o.parseRows,s=o.format,l=o.formatRows},function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"d",function(){return a}),n.d(t,"a",function(){return s}),n.d(t,"b",function(){return l});var r=n(894),o=Object(r.a)("\t"),i=o.parse,a=o.parseRows,s=o.format,l=o.formatRows},function(e,t,n){!function(t,n){e.exports=n()}(0,function(){var e=function(e,t){function n(t,n){var r=t>n?t:n;return e.pow(10,17-~~(e.log(r>0?r:-r)*e.LOG10E))}function r(e){return"[object Function]"===d.call(e)}function o(e){return"number"==typeof e&&e===e}function a(e){return p.apply([],e)}function s(){return new s._init(arguments)}function l(){return 0}function u(){return 1}function c(e,t){return e===t?1:0}var p=Array.prototype.concat,f=Array.prototype.slice,d=Object.prototype.toString,h=Array.isArray||function(e){return"[object Array]"===d.call(e)};s.fn=s.prototype,s._init=function(e){var t;if(h(e[0]))if(h(e[0][0])){r(e[1])&&(e[0]=s.map(e[0],e[1]));for(var t=0;t<e[0].length;t++)this[t]=e[0][t];this.length=e[0].length}else this[0]=r(e[1])?s.map(e[0],e[1]):e[0],this.length=1;else if(o(e[0]))this[0]=s.seq.apply(null,e),this.length=1;else{if(e[0]instanceof s)return s(e[0].toArray());this[0]=[],this.length=1}return this},s._init.prototype=s.prototype,s._init.constructor=s,s.utils={calcRdx:n,isArray:h,isFunction:r,isNumber:o,toVector:a},s.extend=function(e){var t,n;if(1===arguments.length){for(n in e)s[n]=e[n];return this}for(var t=1;t<arguments.length;t++)for(n in arguments[t])e[n]=arguments[t][n];return e},s.rows=function(e){return e.length||1},s.cols=function(e){return e[0].length||1},s.dimensions=function(e){return{rows:s.rows(e),cols:s.cols(e)}},s.row=function(e,t){return h(t)?t.map(function(t){return s.row(e,t)}):e[t]},s.rowa=function(e,t){return s.row(e,t)},s.col=function(e,t){if(h(t)){var n=s.arange(e.length).map(function(e){return new Array(t.length)});return t.forEach(function(t,r){s.arange(e.length).forEach(function(o){n[o][r]=e[o][t]})}),n}for(var r=new Array(e.length),o=0;o<e.length;o++)r[o]=[e[o][t]];return r},s.cola=function(e,t){return s.col(e,t).map(function(e){return e[0]})},s.diag=function(e){for(var t=s.rows(e),n=new Array(t),r=0;r<t;r++)n[r]=[e[r][r]];return n},s.antidiag=function(e){for(var t=s.rows(e)-1,n=new Array(t),r=0;t>=0;t--,r++)n[r]=[e[r][t]];return n},s.transpose=function(e){var t,n,r,o,i,a=[];h(e[0])||(e=[e]),n=e.length,r=e[0].length;for(var i=0;i<r;i++){for(t=new Array(n),o=0;o<n;o++)t[o]=e[o][i];a.push(t)}return 1===a.length?a[0]:a},s.map=function(e,t,n){var r,o,i,a,s;for(h(e[0])||(e=[e]),o=e.length,i=e[0].length,a=n?e:new Array(o),r=0;r<o;r++)for(a[r]||(a[r]=new Array(i)),s=0;s<i;s++)a[r][s]=t(e[r][s],r,s);return 1===a.length?a[0]:a},s.cumreduce=function(e,t,n){var r,o,i,a,s;for(h(e[0])||(e=[e]),o=e.length,i=e[0].length,a=n?e:new Array(o),r=0;r<o;r++)for(a[r]||(a[r]=new Array(i)),i>0&&(a[r][0]=e[r][0]),s=1;s<i;s++)a[r][s]=t(a[r][s-1],e[r][s]);return 1===a.length?a[0]:a},s.alter=function(e,t){return s.map(e,t,!0)},s.create=function(e,t,n){var o,i,a=new Array(e);r(t)&&(n=t,t=e);for(var o=0;o<e;o++)for(a[o]=new Array(t),i=0;i<t;i++)a[o][i]=n(o,i);return a},s.zeros=function(e,t){return o(t)||(t=e),s.create(e,t,l)},s.ones=function(e,t){return o(t)||(t=e),s.create(e,t,u)},s.rand=function(t,n){return o(n)||(n=t),s.create(t,n,e.random)},s.identity=function(e,t){return o(t)||(t=e),s.create(e,t,c)},s.symmetric=function(e){var t,n,r=e.length;if(e.length!==e[0].length)return!1;for(t=0;t<r;t++)for(n=0;n<r;n++)if(e[n][t]!==e[t][n])return!1;return!0},s.clear=function(e){return s.alter(e,l)},s.seq=function(e,t,o,i){r(i)||(i=!1);var a,s=[],l=n(e,t),u=(t*l-e*l)/((o-1)*l),c=e;for(a=0;c<=t&&a<o;a++,c=(e*l+u*l*a)/l)s.push(i?i(c,a):c);return s},s.arange=function(e,n,r){var o=[];if(r=r||1,n===t&&(n=e,e=0),e===n||0===r)return[];if(e<n&&r<0)return[];if(e>n&&r>0)return[];if(r>0)for(i=e;i<n;i+=r)o.push(i);else for(i=e;i>n;i+=r)o.push(i);return o},s.slice=function(){function e(e,n,r,o){var i,a=[],l=e.length;if(n===t&&r===t&&o===t)return s.copy(e);if(n=n||0,r=r||e.length,n=n>=0?n:l+n,r=r>=0?r:l+r,o=o||1,n===r||0===o)return[];if(n<r&&o<0)return[];if(n>r&&o>0)return[];if(o>0)for(i=n;i<r;i+=o)a.push(e[i]);else for(i=n;i>r;i+=o)a.push(e[i]);return a}function n(t,n){if(n=n||{},o(n.row)){if(o(n.col))return t[n.row][n.col];var r=s.rowa(t,n.row),i=n.col||{};return e(r,i.start,i.end,i.step)}if(o(n.col)){var a=s.cola(t,n.col),l=n.row||{};return e(a,l.start,l.end,l.step)}var l=n.row||{},i=n.col||{};return e(t,l.start,l.end,l.step).map(function(t){return e(t,i.start,i.end,i.step)})}return n}(),s.sliceAssign=function(n,r,i){if(o(r.row)){if(o(r.col))return n[r.row][r.col]=i;r.col=r.col||{},r.col.start=r.col.start||0,r.col.end=r.col.end||n[0].length,r.col.step=r.col.step||1;var a=s.arange(r.col.start,e.min(n.length,r.col.end),r.col.step),l=r.row;return a.forEach(function(e,t){n[l][e]=i[t]}),n}if(o(r.col)){r.row=r.row||{},r.row.start=r.row.start||0,r.row.end=r.row.end||n.length,r.row.step=r.row.step||1;var u=s.arange(r.row.start,e.min(n[0].length,r.row.end),r.row.step),c=r.col;return u.forEach(function(e,t){n[e][c]=i[t]}),n}i[0].length===t&&(i=[i]),r.row.start=r.row.start||0,r.row.end=r.row.end||n.length,r.row.step=r.row.step||1,r.col.start=r.col.start||0,r.col.end=r.col.end||n[0].length,r.col.step=r.col.step||1;var u=s.arange(r.row.start,e.min(n.length,r.row.end),r.row.step),a=s.arange(r.col.start,e.min(n[0].length,r.col.end),r.col.step);return u.forEach(function(e,t){a.forEach(function(r,o){n[e][r]=i[t][o]})}),n},s.diagonal=function(e){var t=s.zeros(e.length,e.length);return e.forEach(function(e,n){t[n][n]=e}),t},s.copy=function(e){return e.map(function(e){return o(e)?e:e.map(function(e){return e})})};var m=s.prototype;return m.length=0,m.push=Array.prototype.push,m.sort=Array.prototype.sort,m.splice=Array.prototype.splice,m.slice=Array.prototype.slice,m.toArray=function(){return this.length>1?f.call(this):f.call(this)[0]},m.map=function(e,t){return s(s.map(this,e,t))},m.cumreduce=function(e,t){return s(s.cumreduce(this,e,t))},m.alter=function(e){return s.alter(this,e),this},function(e){for(var t=0;t<e.length;t++)!function(e){m[e]=function(t){var n,r=this;return t?(setTimeout(function(){t.call(r,m[e].call(r))}),this):(n=s[e](this),h(n)?s(n):n)}}(e[t])}("transpose clear symmetric rows cols dimensions diag antidiag".split(" ")),function(e){for(var t=0;t<e.length;t++)!function(e){m[e]=function(t,n){var r=this;return n?(setTimeout(function(){n.call(r,m[e].call(r,t))}),this):s(s[e](this,t))}}(e[t])}("row col".split(" ")),function(e){for(var t=0;t<e.length;t++)!function(e){m[e]=new Function("return jStat(jStat."+e+".apply(null, arguments));")}(e[t])}("create zeros ones rand identity".split(" ")),s}(Math);return function(e,t){function n(e,t){return e-t}function r(e,n,r){return t.max(n,t.min(e,r))}var o=e.utils.isFunction;e.sum=function(e){for(var t=0,n=e.length;--n>=0;)t+=e[n];return t},e.sumsqrd=function(e){for(var t=0,n=e.length;--n>=0;)t+=e[n]*e[n];return t},e.sumsqerr=function(t){for(var n,r=e.mean(t),o=0,i=t.length;--i>=0;)n=t[i]-r,o+=n*n;return o},e.sumrow=function(e){for(var t=0,n=e.length;--n>=0;)t+=e[n];return t},e.product=function(e){for(var t=1,n=e.length;--n>=0;)t*=e[n];return t},e.min=function(e){for(var t=e[0],n=0;++n<e.length;)e[n]<t&&(t=e[n]);return t},e.max=function(e){for(var t=e[0],n=0;++n<e.length;)e[n]>t&&(t=e[n]);return t},e.unique=function(e){for(var t={},n=[],r=0;r<e.length;r++)t[e[r]]||(t[e[r]]=!0,n.push(e[r]));return n},e.mean=function(t){return e.sum(t)/t.length},e.meansqerr=function(t){return e.sumsqerr(t)/t.length},e.geomean=function(n){return t.pow(e.product(n),1/n.length)},e.median=function(e){var t=e.length,r=e.slice().sort(n);return 1&t?r[t/2|0]:(r[t/2-1]+r[t/2])/2},e.cumsum=function(t){return e.cumreduce(t,function(e,t){return e+t})},e.cumprod=function(t){return e.cumreduce(t,function(e,t){return e*t})},e.diff=function(e){for(var t,n=[],r=e.length,t=1;t<r;t++)n.push(e[t]-e[t-1]);return n},e.rank=function(e){for(var t=e.length,r=e.slice().sort(n),o=new Array(t),i=0;i<t;i++){var a=r.indexOf(e[i]),s=r.lastIndexOf(e[i]);if(a===s)var l=a;else var l=(a+s)/2;o[i]=l+1}return o},e.mode=function(e){for(var t,r=e.length,o=e.slice().sort(n),i=1,a=0,s=0,l=[],t=0;t<r;t++)o[t]===o[t+1]?i++:(i>a?(l=[o[t]],a=i,s=0):i===a&&(l.push(o[t]),s++),i=1);return 0===s?l[0]:l},e.range=function(t){return e.max(t)-e.min(t)},e.variance=function(t,n){return e.sumsqerr(t)/(t.length-(n?1:0))},e.pooledvariance=function(t){return t.reduce(function(t,n){return t+e.sumsqerr(n)},0)/(t.reduce(function(e,t){return e+t.length},0)-t.length)},e.deviation=function(t){for(var n=e.mean(t),r=t.length,o=new Array(r),i=0;i<r;i++)o[i]=t[i]-n;return o},e.stdev=function(n,r){return t.sqrt(e.variance(n,r))},e.pooledstdev=function(n){return t.sqrt(e.pooledvariance(n))},e.meandev=function(n){for(var r=e.mean(n),o=[],i=n.length-1;i>=0;i--)o.push(t.abs(n[i]-r));return e.mean(o)},e.meddev=function(n){for(var r=e.median(n),o=[],i=n.length-1;i>=0;i--)o.push(t.abs(n[i]-r));return e.median(o)},e.coeffvar=function(t){return e.stdev(t)/e.mean(t)},e.quartiles=function(e){var r=e.length,o=e.slice().sort(n);return[o[t.round(r/4)-1],o[t.round(r/2)-1],o[t.round(3*r/4)-1]]},e.quantiles=function(e,o,i,a){var s,l,u,c,p,f,d=e.slice().sort(n),h=[o.length],m=e.length;void 0===i&&(i=3/8),void 0===a&&(a=3/8);for(var s=0;s<o.length;s++)l=o[s],u=i+l*(1-i-a),c=m*l+u,p=t.floor(r(c,1,m-1)),f=r(c-p,0,1),h[s]=(1-f)*d[p-1]+f*d[p];return h},e.percentile=function(e,t){var r=e.slice().sort(n),o=t*(r.length-1),i=parseInt(o),a=o-i;return i+1<r.length?r[i]*(1-a)+r[i+1]*a:r[i]},e.percentileOfScore=function(e,t,n){var r,o,i=0,a=e.length,s=!1;"strict"===n&&(s=!0);for(var o=0;o<a;o++)r=e[o],(s&&r<t||!s&&r<=t)&&i++;return i/a},e.histogram=function(n,r){for(var o,i=e.min(n),a=r||4,s=(e.max(n)-i)/a,l=n.length,r=[],o=0;o<a;o++)r[o]=0;for(var o=0;o<l;o++)r[t.min(t.floor((n[o]-i)/s),a-1)]+=1;return r},e.covariance=function(t,n){for(var r,o=e.mean(t),i=e.mean(n),a=t.length,s=new Array(a),r=0;r<a;r++)s[r]=(t[r]-o)*(n[r]-i);return e.sum(s)/(a-1)},e.corrcoeff=function(t,n){return e.covariance(t,n)/e.stdev(t,1)/e.stdev(n,1)},e.spearmancoeff=function(t,n){return t=e.rank(t),n=e.rank(n),e.corrcoeff(t,n)},e.stanMoment=function(n,r){for(var o=e.mean(n),i=e.stdev(n),a=n.length,s=0,l=0;l<a;l++)s+=t.pow((n[l]-o)/i,r);return s/n.length},e.skewness=function(t){return e.stanMoment(t,3)},e.kurtosis=function(t){return e.stanMoment(t,4)-3};var i=e.prototype;!function(t){for(var n=0;n<t.length;n++)!function(t){i[t]=function(n,r){var a=[],s=0,l=this;if(o(n)&&(r=n,n=!1),r)return setTimeout(function(){r.call(l,i[t].call(l,n))}),this;if(this.length>1){for(l=!0===n?this:this.transpose();s<l.length;s++)a[s]=e[t](l[s]);return a}return e[t](this[0],n)}}(t[n])}("cumsum cumprod".split(" ")),function(t){for(var n=0;n<t.length;n++)!function(t){i[t]=function(n,r){var a=[],s=0,l=this;if(o(n)&&(r=n,n=!1),r)return setTimeout(function(){r.call(l,i[t].call(l,n))}),this;if(this.length>1){for("sumrow"!==t&&(l=!0===n?this:this.transpose());s<l.length;s++)a[s]=e[t](l[s]);return!0===n?e[t](e.utils.toVector(a)):a}return e[t](this[0],n)}}(t[n])}("sum sumsqrd sumsqerr sumrow product min max unique mean meansqerr geomean median diff rank mode range variance deviation stdev meandev meddev coeffvar quartiles histogram skewness kurtosis".split(" ")),function(t){for(var n=0;n<t.length;n++)!function(t){i[t]=function(){var n=[],r=0,a=this,s=Array.prototype.slice.call(arguments);if(o(s[s.length-1])){var l=s[s.length-1],u=s.slice(0,s.length-1);return setTimeout(function(){l.call(a,i[t].apply(a,u))}),this}var l=void 0,c=function(n){return e[t].apply(a,[n].concat(s))};if(this.length>1){for(a=a.transpose();r<a.length;r++)n[r]=c(a[r]);return n}return c(this[0])}}(t[n])}("quantiles percentileOfScore".split(" "))}(e,Math),function(e,t){e.gammaln=function(e){var n,r,o,i=0,a=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],s=1.000000000190015;for(o=(r=n=e)+5.5,o-=(n+.5)*t.log(o);i<6;i++)s+=a[i]/++r;return t.log(2.5066282746310007*s/n)-o},e.gammafn=function(e){var n,r,o,i,a=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],s=[-30.8402300119739,315.35062697960416,-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.2596755535],l=!1,u=0,c=0,p=0,f=e;if(f<=0){if(!(i=f%1+3.6e-16))return 1/0;l=(1&f?-1:1)*t.PI/t.sin(t.PI*i),f=1-f}o=f,r=f<1?f++:(f-=u=(0|f)-1)-1;for(var n=0;n<8;++n)p=(p+a[n])*r,c=c*r+s[n];if(i=p/c+1,o<f)i/=o;else if(o>f)for(var n=0;n<u;++n)i*=f,f++;return l&&(i=l/i),i},e.gammap=function(t,n){return e.lowRegGamma(t,n)*e.gammafn(t)},e.lowRegGamma=function(n,r){var o,i=e.gammaln(n),a=n,s=1/n,l=s,u=r+1-n,c=1/1e-30,p=1/u,f=p,d=1,h=-~(8.5*t.log(n>=1?n:1/n)+.4*n+17);if(r<0||n<=0)return NaN;if(r<n+1){for(;d<=h;d++)s+=l*=r/++a;return s*t.exp(-r+n*t.log(r)-i)}for(;d<=h;d++)o=-d*(d-n),u+=2,p=o*p+u,c=u+o/c,p=1/p,f*=p*c;return 1-f*t.exp(-r+n*t.log(r)-i)},e.factorialln=function(t){return t<0?NaN:e.gammaln(t+1)},e.factorial=function(t){return t<0?NaN:e.gammafn(t+1)},e.combination=function(n,r){return n>170||r>170?t.exp(e.combinationln(n,r)):e.factorial(n)/e.factorial(r)/e.factorial(n-r)},e.combinationln=function(t,n){return e.factorialln(t)-e.factorialln(n)-e.factorialln(t-n)},e.permutation=function(t,n){return e.factorial(t)/e.factorial(t-n)},e.betafn=function(n,r){if(!(n<=0||r<=0))return n+r>170?t.exp(e.betaln(n,r)):e.gammafn(n)*e.gammafn(r)/e.gammafn(n+r)},e.betaln=function(t,n){return e.gammaln(t)+e.gammaln(n)-e.gammaln(t+n)},e.betacf=function(e,n,r){var o,i,a,s,l=1,u=n+r,c=n+1,p=n-1,f=1,d=1-u*e/c;for(t.abs(d)<1e-30&&(d=1e-30),d=1/d,s=d;l<=100&&(o=2*l,i=l*(r-l)*e/((p+o)*(n+o)),d=1+i*d,t.abs(d)<1e-30&&(d=1e-30),f=1+i/f,t.abs(f)<1e-30&&(f=1e-30),d=1/d,s*=d*f,i=-(n+l)*(u+l)*e/((n+o)*(c+o)),d=1+i*d,t.abs(d)<1e-30&&(d=1e-30),f=1+i/f,t.abs(f)<1e-30&&(f=1e-30),d=1/d,a=d*f,s*=a,!(t.abs(a-1)<3e-7));l++);return s},e.gammapinv=function(n,r){var o,i,a,s,l,u,c,p=0,f=r-1,d=e.gammaln(r);if(n>=1)return t.max(100,r+100*t.sqrt(r));if(n<=0)return 0;for(r>1?(u=t.log(f),c=t.exp(f*(u-1)-d),l=n<.5?n:1-n,a=t.sqrt(-2*t.log(l)),o=(2.30753+.27061*a)/(1+a*(.99229+.04481*a))-a,n<.5&&(o=-o),o=t.max(.001,r*t.pow(1-1/(9*r)-o/(3*t.sqrt(r)),3))):(a=1-r*(.253+.12*r),o=n<a?t.pow(n/a,1/r):1-t.log(1-(n-a)/(1-a)));p<12;p++){if(o<=0)return 0;if(i=e.lowRegGamma(r,o)-n,a=r>1?c*t.exp(-(o-f)+f*(t.log(o)-u)):t.exp(-o+f*t.log(o)-d),s=i/a,o-=a=s/(1-.5*t.min(1,s*((r-1)/o-1))),o<=0&&(o=.5*(o+a)),t.abs(a)<1e-8*o)break}return o},e.erf=function(e){var n,r,o,i,a=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17,1.5626441722e-8,-8.5238095915e-8,6.529054439e-9,5.059343495e-9,-9.91364156e-10,-2.27365122e-10,9.6467911e-11,2.394038e-12,-6.886027e-12,8.94487e-13,3.13092e-13,-1.12708e-13,3.81e-16,7.106e-15,-1.523e-15,-9.4e-17,1.21e-16,-2.8e-17],s=a.length-1,l=!1,u=0,c=0;for(e<0&&(e=-e,l=!0),n=2/(2+e),r=4*n-2;s>0;s--)o=u,u=r*u-c+a[s],c=o;return i=n*t.exp(-e*e+.5*(a[0]+r*u)-c),l?i-1:1-i},e.erfc=function(t){return 1-e.erf(t)},e.erfcinv=function(n){var r,o,i,a,s=0;if(n>=2)return-100;if(n<=0)return 100;for(a=n<1?n:2-n,i=t.sqrt(-2*t.log(a/2)),r=-.70711*((2.30753+.27061*i)/(1+i*(.99229+.04481*i))-i);s<2;s++)o=e.erfc(r)-a,r+=o/(1.1283791670955126*t.exp(-r*r)-r*o);return n<1?r:-r},e.ibetainv=function(n,r,o){var i,a,s,l,u,c,p,f,d,h,m,g=r-1,v=o-1,y=0;if(n<=0)return 0;if(n>=1)return 1;for(r>=1&&o>=1?(s=n<.5?n:1-n,l=t.sqrt(-2*t.log(s)),p=(2.30753+.27061*l)/(1+l*(.99229+.04481*l))-l,n<.5&&(p=-p),f=(p*p-3)/6,d=2/(1/(2*r-1)+1/(2*o-1)),h=p*t.sqrt(f+d)/d-(1/(2*o-1)-1/(2*r-1))*(f+5/6-2/(3*d)),p=r/(r+o*t.exp(2*h))):(i=t.log(r/(r+o)),a=t.log(o/(r+o)),l=t.exp(r*i)/r,u=t.exp(o*a)/o,h=l+u,p=n<l/h?t.pow(r*h*n,1/r):1-t.pow(o*h*(1-n),1/o)),m=-e.gammaln(r)-e.gammaln(o)+e.gammaln(r+o);y<10;y++){if(0===p||1===p)return p;if(c=e.ibeta(p,r,o)-n,l=t.exp(g*t.log(p)+v*t.log(1-p)+m),u=c/l,p-=l=u/(1-.5*t.min(1,u*(g/p-v/(1-p)))),p<=0&&(p=.5*(p+l)),p>=1&&(p=.5*(p+l+1)),t.abs(l)<1e-8*p&&y>0)break}return p},e.ibeta=function(n,r,o){var i=0===n||1===n?0:t.exp(e.gammaln(r+o)-e.gammaln(r)-e.gammaln(o)+r*t.log(n)+o*t.log(1-n));return!(n<0||n>1)&&(n<(r+1)/(r+o+2)?i*e.betacf(n,r,o)/r:1-i*e.betacf(1-n,o,r)/o)},e.randn=function(n,r){var o,i,a,s,l;if(r||(r=n),n)return e.create(n,r,function(){return e.randn()});do{o=t.random(),i=1.7156*(t.random()-.5),a=o-.449871,s=t.abs(i)+.386595,l=a*a+s*(.196*s-.25472*a)}while(l>.27597&&(l>.27846||i*i>-4*t.log(o)*o*o));return i/o},e.randg=function(n,r,o){var i,a,s,l,u,c,p=n;if(o||(o=r),n||(n=1),r)return c=e.zeros(r,o),c.alter(function(){return e.randg(n)}),c;n<1&&(n+=1),i=n-1/3,a=1/t.sqrt(9*i);do{do{u=e.randn(),l=1+a*u}while(l<=0);l*=l*l,s=t.random()}while(s>1-.331*t.pow(u,4)&&t.log(s)>.5*u*u+i*(1-l+t.log(l)));if(n==p)return i*l;do{s=t.random()}while(0===s);return t.pow(s,1/p)*i*l},function(t){for(var n=0;n<t.length;n++)!function(t){e.fn[t]=function(){return e(e.map(this,function(n){return e[t](n)}))}}(t[n])}("gammaln gammafn factorial factorialln".split(" ")),function(t){for(var n=0;n<t.length;n++)!function(t){e.fn[t]=function(){return e(e[t].apply(null,arguments))}}(t[n])}("randn".split(" "))}(e,Math),function(e,t){function n(e){return e/t.abs(e)}function r(n,r,o){var i=[.9815606342467192,.9041172563704749,.7699026741943047,.5873179542866175,.3678314989981802,.1252334085114689],a=[.04717533638651183,.10693932599531843,.16007832854334622,.20316742672306592,.2334925365383548,.24914704581340277],s=.5*n;if(s>=8)return 1;var l=2*e.normal.cdf(s,0,1,1,0)-1;l=l>=t.exp(-50/o)?t.pow(l,o):0;var u;u=n>3?2:3;for(var c=s,p=(8-s)/u,f=c+p,d=0,h=o-1,m=1;m<=u;m++){for(var g=0,v=.5*(f+c),y=.5*(f-c),b=1;b<=12;b++){var w,x;6<b?(w=12-b+1,x=i[w-1]):(w=b,x=-i[w-1]);var _=y*x,S=v+_,C=S*S;if(C>60)break;var k=2*e.normal.cdf(S,0,1,1,0),A=2*e.normal.cdf(S,n,1,1,0),E=.5*k-.5*A;E>=t.exp(-30/h)&&(E=a[w-1]*t.exp(-.5*C)*t.pow(E,h),g+=E)}g*=2*y*o/t.sqrt(2*t.PI),d+=g,c=f,f+=p}return(l+=d)<=t.exp(-30/r)?0:(l=t.pow(l,r),l>=1?1:l)}function o(e,n,r){var o=.5-.5*e,i=t.sqrt(t.log(1/(o*o))),a=i+((((-453642210148e-16*i-.204231210125)*i-.342242088547)*i-1)*i+.322232421088)/((((.0038560700634*i+.10353775285)*i+.531103462366)*i+.588581570495)*i+.099348462606);r<120&&(a+=(a*a*a+a)/r/4);var s=.8832-.2368*a;return r<120&&(s+=-1.214/r+1.208*a/r),a*(s*t.log(n-1)+1.4142)}!function(t){for(var n=0;n<t.length;n++)!function(t){e[t]=function(e,t,n){return this instanceof arguments.callee?(this._a=e,this._b=t,this._c=n,this):new arguments.callee(e,t,n)},e.fn[t]=function(n,r,o){var i=e[t](n,r,o);return i.data=this,i},e[t].prototype.sample=function(n){var r=this._a,o=this._b,i=this._c;return n?e.alter(n,function(){return e[t].sample(r,o,i)}):e[t].sample(r,o,i)},function(n){for(var r=0;r<n.length;r++)!function(n){e[t].prototype[n]=function(r){var o=this._a,i=this._b,a=this._c;return r||0===r||(r=this.data),"number"!=typeof r?e.fn.map.call(r,function(r){return e[t][n](r,o,i,a)}):e[t][n](r,o,i,a)}}(n[r])}("pdf cdf inv".split(" ")),function(n){for(var r=0;r<n.length;r++)!function(n){e[t].prototype[n]=function(){return e[t][n](this._a,this._b,this._c)}}(n[r])}("mean median mode variance".split(" "))}(t[n])}("beta centralF cauchy chisquare exponential gamma invgamma kumaraswamy laplace lognormal noncentralt normal pareto studentt weibull uniform binomial negbin hypgeom poisson triangular tukey arcsine".split(" ")),e.extend(e.beta,{pdf:function(n,r,o){return n>1||n<0?0:1==r&&1==o?1:r<512&&o<512?t.pow(n,r-1)*t.pow(1-n,o-1)/e.betafn(r,o):t.exp((r-1)*t.log(n)+(o-1)*t.log(1-n)-e.betaln(r,o))},cdf:function(t,n,r){return t>1||t<0?1*(t>1):e.ibeta(t,n,r)},inv:function(t,n,r){return e.ibetainv(t,n,r)},mean:function(e,t){return e/(e+t)},median:function(t,n){return e.ibetainv(.5,t,n)},mode:function(e,t){return(e-1)/(e+t-2)},sample:function(t,n){var r=e.randg(t);return r/(r+e.randg(n))},variance:function(e,n){return e*n/(t.pow(e+n,2)*(e+n+1))}}),e.extend(e.centralF,{pdf:function(n,r,o){var i,a;return n<0?0:r<=2?0===n&&r<2?1/0:0===n&&2===r?1:1/e.betafn(r/2,o/2)*t.pow(r/o,r/2)*t.pow(n,r/2-1)*t.pow(1+r/o*n,-(r+o)/2):(i=r*n/(o+n*r),a=o/(o+n*r),r*a/2*e.binomial.pdf((r-2)/2,(r+o-2)/2,i))},cdf:function(t,n,r){return t<0?0:e.ibeta(n*t/(n*t+r),n/2,r/2)},inv:function(t,n,r){return r/(n*(1/e.ibetainv(t,n/2,r/2)-1))},mean:function(e,t){return t>2?t/(t-2):void 0},mode:function(e,t){return e>2?t*(e-2)/(e*(t+2)):void 0},sample:function(t,n){return 2*e.randg(t/2)/t/(2*e.randg(n/2)/n)},variance:function(e,t){if(!(t<=4))return 2*t*t*(e+t-2)/(e*(t-2)*(t-2)*(t-4))}}),e.extend(e.cauchy,{pdf:function(e,n,r){return r<0?0:r/(t.pow(e-n,2)+t.pow(r,2))/t.PI},cdf:function(e,n,r){return t.atan((e-n)/r)/t.PI+.5},inv:function(e,n,r){return n+r*t.tan(t.PI*(e-.5))},median:function(e,t){return e},mode:function(e,t){return e},sample:function(n,r){return e.randn()*t.sqrt(1/(2*e.randg(.5)))*r+n}}),e.extend(e.chisquare,{pdf:function(n,r){return n<0?0:0===n&&2===r?.5:t.exp((r/2-1)*t.log(n)-n/2-r/2*t.log(2)-e.gammaln(r/2))},cdf:function(t,n){return t<0?0:e.lowRegGamma(n/2,t/2)},inv:function(t,n){return 2*e.gammapinv(t,.5*n)},mean:function(e){return e},median:function(e){return e*t.pow(1-2/(9*e),3)},mode:function(e){return e-2>0?e-2:0},sample:function(t){return 2*e.randg(t/2)},variance:function(e){return 2*e}}),e.extend(e.exponential,{pdf:function(e,n){return e<0?0:n*t.exp(-n*e)},cdf:function(e,n){return e<0?0:1-t.exp(-n*e)},inv:function(e,n){return-t.log(1-e)/n},mean:function(e){return 1/e},median:function(e){return 1/e*t.log(2)},mode:function(e){return 0},sample:function(e){return-1/e*t.log(t.random())},variance:function(e){return t.pow(e,-2)}}),e.extend(e.gamma,{pdf:function(n,r,o){return n<0?0:0===n&&1===r?1/o:t.exp((r-1)*t.log(n)-n/o-e.gammaln(r)-r*t.log(o))},cdf:function(t,n,r){return t<0?0:e.lowRegGamma(n,t/r)},inv:function(t,n,r){return e.gammapinv(t,n)*r},mean:function(e,t){return e*t},mode:function(e,t){if(e>1)return(e-1)*t},sample:function(t,n){return e.randg(t)*n},variance:function(e,t){return e*t*t}}),e.extend(e.invgamma,{pdf:function(n,r,o){return n<=0?0:t.exp(-(r+1)*t.log(n)-o/n-e.gammaln(r)+r*t.log(o))},cdf:function(t,n,r){return t<=0?0:1-e.lowRegGamma(n,r/t)},inv:function(t,n,r){return r/e.gammapinv(1-t,n)},mean:function(e,t){return e>1?t/(e-1):void 0},mode:function(e,t){return t/(e+1)},sample:function(t,n){return n/e.randg(t)},variance:function(e,t){if(!(e<=2))return t*t/((e-1)*(e-1)*(e-2))}}),e.extend(e.kumaraswamy,{pdf:function(e,n,r){return 0===e&&1===n?r:1===e&&1===r?n:t.exp(t.log(n)+t.log(r)+(n-1)*t.log(e)+(r-1)*t.log(1-t.pow(e,n)))},cdf:function(e,n,r){return e<0?0:e>1?1:1-t.pow(1-t.pow(e,n),r)},inv:function(e,n,r){return t.pow(1-t.pow(1-e,1/r),1/n)},mean:function(t,n){return n*e.gammafn(1+1/t)*e.gammafn(n)/e.gammafn(1+1/t+n)},median:function(e,n){return t.pow(1-t.pow(2,-1/n),1/e)},mode:function(e,n){if(e>=1&&n>=1&&1!==e&&1!==n)return t.pow((e-1)/(e*n-1),1/e)},variance:function(e,t){throw new Error("variance not yet implemented")}}),e.extend(e.lognormal,{pdf:function(e,n,r){return e<=0?0:t.exp(-t.log(e)-.5*t.log(2*t.PI)-t.log(r)-t.pow(t.log(e)-n,2)/(2*r*r))},cdf:function(n,r,o){return n<0?0:.5+.5*e.erf((t.log(n)-r)/t.sqrt(2*o*o))},inv:function(n,r,o){return t.exp(-1.4142135623730951*o*e.erfcinv(2*n)+r)},mean:function(e,n){return t.exp(e+n*n/2)},median:function(e,n){return t.exp(e)},mode:function(e,n){return t.exp(e-n*n)},sample:function(n,r){return t.exp(e.randn()*r+n)},variance:function(e,n){return(t.exp(n*n)-1)*t.exp(2*e+n*n)}}),e.extend(e.noncentralt,{pdf:function(n,r,o){return t.abs(o)<1e-14?e.studentt.pdf(n,r):t.abs(n)<1e-14?t.exp(e.gammaln((r+1)/2)-o*o/2-.5*t.log(t.PI*r)-e.gammaln(r/2)):r/n*(e.noncentralt.cdf(n*t.sqrt(1+2/r),r+2,o)-e.noncentralt.cdf(n,r,o))},cdf:function(n,r,o){if(t.abs(o)<1e-14)return e.studentt.cdf(n,r);var i=!1;n<0&&(i=!0,o=-o);for(var a=e.normal.cdf(-o,0,1),s=1e-14+1,l=s,u=n*n/(n*n+r),c=0,p=t.exp(-o*o/2),f=t.exp(-o*o/2-.5*t.log(2)-e.gammaln(1.5))*o;c<200||l>1e-14||s>1e-14;)l=s,c>0&&(p*=o*o/(2*c),f*=o*o/(2*(c+.5))),s=p*e.beta.cdf(u,c+.5,r/2)+f*e.beta.cdf(u,c+1,r/2),a+=.5*s,c++;return i?1-a:a}}),e.extend(e.normal,{pdf:function(e,n,r){return t.exp(-.5*t.log(2*t.PI)-t.log(r)-t.pow(e-n,2)/(2*r*r))},cdf:function(n,r,o){return.5*(1+e.erf((n-r)/t.sqrt(2*o*o)))},inv:function(t,n,r){return-1.4142135623730951*r*e.erfcinv(2*t)+n},mean:function(e,t){return e},median:function(e,t){return e},mode:function(e,t){return e},sample:function(t,n){return e.randn()*n+t},variance:function(e,t){return t*t}}),e.extend(e.pareto,{pdf:function(e,n,r){return e<n?0:r*t.pow(n,r)/t.pow(e,r+1)},cdf:function(e,n,r){return e<n?0:1-t.pow(n/e,r)},inv:function(e,n,r){return n/t.pow(1-e,1/r)},mean:function(e,n){if(!(n<=1))return n*t.pow(e,n)/(n-1)},median:function(e,n){return e*(n*t.SQRT2)},mode:function(e,t){return e},variance:function(e,n){if(!(n<=2))return e*e*n/(t.pow(n-1,2)*(n-2))}}),e.extend(e.studentt,{pdf:function(n,r){return r=r>1e100?1e100:r,1/(t.sqrt(r)*e.betafn(.5,r/2))*t.pow(1+n*n/r,-(r+1)/2)},cdf:function(n,r){var o=r/2;return e.ibeta((n+t.sqrt(n*n+r))/(2*t.sqrt(n*n+r)),o,o)},inv:function(n,r){var o=e.ibetainv(2*t.min(n,1-n),.5*r,.5);return o=t.sqrt(r*(1-o)/o),n>.5?o:-o},mean:function(e){return e>1?0:void 0},median:function(e){return 0},mode:function(e){return 0},sample:function(n){return e.randn()*t.sqrt(n/(2*e.randg(n/2)))},variance:function(e){return e>2?e/(e-2):e>1?1/0:void 0}}),e.extend(e.weibull,{pdf:function(e,n,r){return e<0||n<0||r<0?0:r/n*t.pow(e/n,r-1)*t.exp(-t.pow(e/n,r))},cdf:function(e,n,r){return e<0?0:1-t.exp(-t.pow(e/n,r))},inv:function(e,n,r){return n*t.pow(-t.log(1-e),1/r)},mean:function(t,n){return t*e.gammafn(1+1/n)},median:function(e,n){return e*t.pow(t.log(2),1/n)},mode:function(e,n){return n<=1?0:e*t.pow((n-1)/n,1/n)},sample:function(e,n){return e*t.pow(-t.log(t.random()),1/n)},variance:function(n,r){return n*n*e.gammafn(1+2/r)-t.pow(e.weibull.mean(n,r),2)}}),e.extend(e.uniform,{pdf:function(e,t,n){return e<t||e>n?0:1/(n-t)},cdf:function(e,t,n){return e<t?0:e<n?(e-t)/(n-t):1},inv:function(e,t,n){return t+e*(n-t)},mean:function(e,t){return.5*(e+t)},median:function(t,n){return e.mean(t,n)},mode:function(e,t){throw new Error("mode is not yet implemented")},sample:function(e,n){return e/2+n/2+(n/2-e/2)*(2*t.random()-1)},variance:function(e,n){return t.pow(n-e,2)/12}}),e.extend(e.binomial,{pdf:function(n,r,o){return 0===o||1===o?r*o===n?1:0:e.combination(r,n)*t.pow(o,n)*t.pow(1-o,r-n)},cdf:function(t,n,r){var o=[],i=0;if(t<0)return 0;if(t<n){for(;i<=t;i++)o[i]=e.binomial.pdf(i,n,r);return e.sum(o)}return 1}}),e.extend(e.negbin,{pdf:function(n,r,o){return n===n>>>0&&(n<0?0:e.combination(n+r-1,r-1)*t.pow(1-o,n)*t.pow(o,r))},cdf:function(t,n,r){var o=0,i=0;if(t<0)return 0;for(;i<=t;i++)o+=e.negbin.pdf(i,n,r);return o}}),e.extend(e.hypgeom,{pdf:function(n,r,o,i){if(n!==n|0)return!1;if(n<0||n<o-(r-i))return 0;if(n>i||n>o)return 0;if(2*o>r)return 2*i>r?e.hypgeom.pdf(r-o-i+n,r,r-o,r-i):e.hypgeom.pdf(i-n,r,r-o,i);if(2*i>r)return e.hypgeom.pdf(o-n,r,o,r-i);if(o<i)return e.hypgeom.pdf(n,r,i,o);for(var a=1,s=0,l=0;l<n;l++){for(;a>1&&s<i;)a*=1-o/(r-s),s++;a*=(i-l)*(o-l)/((l+1)*(r-o-i+l+1))}for(;s<i;s++)a*=1-o/(r-s);return t.min(1,t.max(0,a))},cdf:function(n,r,o,i){if(n<0||n<o-(r-i))return 0;if(n>=i||n>=o)return 1;if(2*o>r)return 2*i>r?e.hypgeom.cdf(r-o-i+n,r,r-o,r-i):1-e.hypgeom.cdf(i-n-1,r,r-o,i);if(2*i>r)return 1-e.hypgeom.cdf(o-n-1,r,o,r-i);if(o<i)return e.hypgeom.cdf(n,r,i,o);for(var a=1,s=1,l=0,u=0;u<n;u++){for(;a>1&&l<i;){var c=1-o/(r-l);s*=c,a*=c,l++}s*=(i-u)*(o-u)/((u+1)*(r-o-i+u+1)),a+=s}for(;l<i;l++)a*=1-o/(r-l);return t.min(1,t.max(0,a))}}),e.extend(e.poisson,{pdf:function(n,r){return r<0||n%1!=0||n<0?0:t.pow(r,n)*t.exp(-r)/e.factorial(n)},cdf:function(t,n){var r=[],o=0;if(t<0)return 0;for(;o<=t;o++)r.push(e.poisson.pdf(o,n));return e.sum(r)},mean:function(e){return e},variance:function(e){return e},sample:function(e){var n=1,r=0,o=t.exp(-e);do{r++,n*=t.random()}while(n>o);return r-1}}),e.extend(e.triangular,{pdf:function(e,t,n,r){return n<=t||r<t||r>n?NaN:e<t||e>n?0:e<r?2*(e-t)/((n-t)*(r-t)):e===r?2/(n-t):2*(n-e)/((n-t)*(n-r))},cdf:function(e,n,r,o){return r<=n||o<n||o>r?NaN:e<=n?0:e>=r?1:e<=o?t.pow(e-n,2)/((r-n)*(o-n)):1-t.pow(r-e,2)/((r-n)*(r-o))},inv:function(e,n,r,o){return r<=n||o<n||o>r?NaN:e<=(o-n)/(r-n)?n+(r-n)*t.sqrt(e*((o-n)/(r-n))):n+(r-n)*(1-t.sqrt((1-e)*(1-(o-n)/(r-n))))},mean:function(e,t,n){return(e+t+n)/3},median:function(e,n,r){return r<=(e+n)/2?n-t.sqrt((n-e)*(n-r))/t.sqrt(2):r>(e+n)/2?e+t.sqrt((n-e)*(r-e))/t.sqrt(2):void 0},mode:function(e,t,n){return n},sample:function(e,n,r){var o=t.random();return o<(r-e)/(n-e)?e+t.sqrt(o*(n-e)*(r-e)):n-t.sqrt((1-o)*(n-e)*(n-r))},variance:function(e,t,n){return(e*e+t*t+n*n-e*t-e*n-t*n)/18}}),e.extend(e.arcsine,{pdf:function(e,n,r){return r<=n?NaN:e<=n||e>=r?0:2/t.PI*t.pow(t.pow(r-n,2)-t.pow(2*e-n-r,2),-.5)},cdf:function(e,n,r){return e<n?0:e<r?2/t.PI*t.asin(t.sqrt((e-n)/(r-n))):1},inv:function(e,n,r){return n+(.5-.5*t.cos(t.PI*e))*(r-n)},mean:function(e,t){return t<=e?NaN:(e+t)/2},median:function(e,t){return t<=e?NaN:(e+t)/2},mode:function(e,t){throw new Error("mode is not yet implemented")},sample:function(n,r){return(n+r)/2+(r-n)/2*t.sin(2*t.PI*e.uniform.sample(0,1))},variance:function(e,n){return n<=e?NaN:t.pow(n-e,2)/8}}),e.extend(e.laplace,{pdf:function(e,n,r){return r<=0?0:t.exp(-t.abs(e-n)/r)/(2*r)},cdf:function(e,n,r){return r<=0?0:e<n?.5*t.exp((e-n)/r):1-.5*t.exp(-(e-n)/r)},mean:function(e,t){return e},median:function(e,t){return e},mode:function(e,t){return e},variance:function(e,t){return 2*t*t},sample:function(e,r){var o=t.random()-.5;return e-r*n(o)*t.log(1-2*t.abs(o))}}),e.extend(e.tukey,{cdf:function(n,o,i){var a=o,s=[.9894009349916499,.9445750230732326,.8656312023878318,.755404408355003,.6178762444026438,.45801677765722737,.2816035507792589,.09501250983763744],l=[.027152459411754096,.062253523938647894,.09515851168249279,.12462897125553388,.14959598881657674,.16915651939500254,.18260341504492358,.1894506104550685];if(n<=0)return 0;if(i<2||a<2)return NaN;if(!Number.isFinite(n))return 1;if(i>25e3)return r(n,1,a);var u,c=.5*i,p=c*t.log(i)-i*t.log(2)-e.gammaln(c),f=c-1,d=.25*i;u=i<=100?1:i<=800?.5:i<=5e3?.25:.125,p+=t.log(u);for(var h=0,m=1;m<=50;m++){for(var g=0,v=(2*m-1)*u,y=1;y<=16;y++){var b,w;8<y?(b=y-8-1,w=p+f*t.log(v+s[b]*u)-(s[b]*u+v)*d):(b=y-1,w=p+f*t.log(v-s[b]*u)+(s[b]*u-v)*d);var x;if(w>=-30){x=8<y?n*t.sqrt(.5*(s[b]*u+v)):n*t.sqrt(.5*(-s[b]*u+v));g+=r(x,1,a)*l[b]*t.exp(w)}}if(m*u>=1&&g<=1e-14)break;h+=g}if(g>1e-14)throw new Error("tukey.cdf failed to converge");return h>1&&(h=1),h},inv:function(n,r,i){var a=r;if(i<2||a<2)return NaN;if(n<0||n>1)return NaN;if(0===n)return 0;if(1===n)return 1/0;var s,l=o(n,a,i),u=e.tukey.cdf(l,r,i)-n;s=u>0?t.max(0,l-1):l+1;for(var c,p=e.tukey.cdf(s,r,i)-n,f=1;f<50;f++){c=s-p*(s-l)/(p-u),u=p,l=s,c<0&&(c=0,p=-n),p=e.tukey.cdf(c,r,i)-n,s=c;if(t.abs(s-l)<1e-4)return c}throw new Error("tukey.inv failed to converge")}})}(e,Math),function(e,t){function n(t){return a(t)||t instanceof e}var o=Array.prototype.push,a=e.utils.isArray;e.extend({add:function(t,r){return n(r)?(n(r[0])||(r=[r]),e.map(t,function(e,t,n){return e+r[t][n]})):e.map(t,function(e){return e+r})},subtract:function(t,r){return n(r)?(n(r[0])||(r=[r]),e.map(t,function(e,t,n){return e-r[t][n]||0})):e.map(t,function(e){return e-r})},divide:function(t,r){return n(r)?(n(r[0])||(r=[r]),e.multiply(t,e.inv(r))):e.map(t,function(e){return e/r})},multiply:function(t,r){var o,i,a,s,l,u,c,p;if(void 0===t.length&&void 0===r.length)return t*r;if(l=t.length,u=t[0].length,c=e.zeros(l,a=n(r)?r[0].length:u),p=0,n(r)){for(;p<a;p++)for(o=0;o<l;o++){for(s=0,i=0;i<u;i++)s+=t[o][i]*r[i][p];c[o][p]=s}return 1===l&&1===p?c[0][0]:c}return e.map(t,function(e){return e*r})},outer:function(t,n){return e.multiply(t.map(function(e){return[e]}),[n])},outer:function(t,n){return e.multiply(t.map(function(e){return[e]}),[n])},dot:function(t,r){n(t[0])||(t=[t]),n(r[0])||(r=[r]);for(var o,i,a=1===t[0].length&&1!==t.length?e.transpose(t):t,s=1===r[0].length&&1!==r.length?e.transpose(r):r,l=[],u=0,c=a.length,p=a[0].length;u<c;u++){for(l[u]=[],o=0,i=0;i<p;i++)o+=a[u][i]*s[u][i];l[u]=o}return 1===l.length?l[0]:l},pow:function(n,r){return e.map(n,function(e){return t.pow(e,r)})},exp:function(n){return e.map(n,function(e){return t.exp(e)})},log:function(n){return e.map(n,function(e){return t.log(e)})},abs:function(n){return e.map(n,function(e){return t.abs(e)})},norm:function(e,r){var o=0,i=0;for(isNaN(r)&&(r=2),n(e[0])&&(e=e[0]);i<e.length;i++)o+=t.pow(t.abs(e[i]),r);return t.pow(o,1/r)},angle:function(n,r){return t.acos(e.dot(n,r)/(e.norm(n)*e.norm(r)))},aug:function(e,t){for(var n=[],r=0;r<e.length;r++)n.push(e[r].slice());for(var r=0;r<n.length;r++)o.apply(n[r],t[r]);return n},inv:function(t){for(var n,r=t.length,o=t[0].length,i=e.identity(r,o),a=e.gauss_jordan(t,i),s=[],l=0;l<r;l++)for(s[l]=[],n=o;n<a[0].length;n++)s[l][n-o]=a[l][n];return s},det:function(e){var t,n=e.length,r=2*n,o=new Array(r),i=n-1,a=r-1,s=i-n+1,l=a,u=0,c=0;if(2===n)return e[0][0]*e[1][1]-e[0][1]*e[1][0];for(;u<r;u++)o[u]=1;for(var u=0;u<n;u++){for(t=0;t<n;t++)o[s<0?s+n:s]*=e[u][t],o[l<n?l+n:l]*=e[u][t],s++,l--;s=--i-n+1,l=--a}for(var u=0;u<n;u++)c+=o[u];for(;u<r;u++)c-=o[u];return c},gauss_elimination:function(n,r){var o,i,a,s,l=0,u=0,c=n.length,p=n[0].length,f=1,d=0,h=[];n=e.aug(n,r),o=n[0].length;for(var l=0;l<c;l++){for(i=n[l][l],u=l,s=l+1;s<p;s++)i<t.abs(n[s][l])&&(i=n[s][l],u=s);if(u!=l)for(s=0;s<o;s++)a=n[l][s],n[l][s]=n[u][s],n[u][s]=a;for(u=l+1;u<c;u++)for(f=n[u][l]/n[l][l],s=l;s<o;s++)n[u][s]=n[u][s]-f*n[l][s]}for(var l=c-1;l>=0;l--){for(d=0,u=l+1;u<=c-1;u++)d+=h[u]*n[l][u];h[l]=(n[l][o-1]-d)/n[l][l]}return h},gauss_jordan:function(n,r){for(var o=e.aug(n,r),i=o.length,a=o[0].length,s=0,l=0;l<i;l++){for(var u=l,c=l+1;c<i;c++)t.abs(o[c][l])>t.abs(o[u][l])&&(u=c);var p=o[l];o[l]=o[u],o[u]=p;for(var c=l+1;c<i;c++){s=o[c][l]/o[l][l];for(var f=l;f<a;f++)o[c][f]-=o[l][f]*s}}for(var l=i-1;l>=0;l--){s=o[l][l];for(var c=0;c<l;c++)for(var f=a-1;f>l-1;f--)o[c][f]-=o[l][f]*o[c][l]/s;o[l][l]/=s;for(var f=i;f<a;f++)o[l][f]/=s}return o},triaUpSolve:function(t,n){var r,o=t[0].length,i=e.zeros(1,o)[0],a=!1;return void 0!=n[0].length&&(n=n.map(function(e){return e[0]}),a=!0),e.arange(o-1,-1,-1).forEach(function(a){r=e.arange(a+1,o).map(function(e){return i[e]*t[a][e]}),i[a]=(n[a]-e.sum(r))/t[a][a]}),a?i.map(function(e){return[e]}):i},triaLowSolve:function(t,n){var r,o=t[0].length,i=e.zeros(1,o)[0],a=!1;return void 0!=n[0].length&&(n=n.map(function(e){return e[0]}),a=!0),e.arange(o).forEach(function(o){r=e.arange(o).map(function(e){return t[o][e]*i[e]}),i[o]=(n[o]-e.sum(r))/t[o][o]}),a?i.map(function(e){return[e]}):i},lu:function(t){var n,r=t.length,o=e.identity(r),a=e.zeros(t.length,t[0].length);return e.arange(r).forEach(function(e){a[0][e]=t[0][e]}),e.arange(1,r).forEach(function(s){e.arange(s).forEach(function(r){n=e.arange(r).map(function(e){return o[s][e]*a[e][r]}),o[s][r]=(t[s][r]-e.sum(n))/a[r][r]}),e.arange(s,r).forEach(function(r){n=e.arange(s).map(function(e){return o[s][e]*a[e][r]}),a[s][r]=t[i][r]-e.sum(n)})}),[o,a]},cholesky:function(n){var r,o=n.length,i=e.zeros(n.length,n[0].length);return e.arange(o).forEach(function(a){r=e.arange(a).map(function(e){return t.pow(i[a][e],2)}),i[a][a]=t.sqrt(n[a][a]-e.sum(r)),e.arange(a+1,o).forEach(function(t){r=e.arange(a).map(function(e){return i[a][e]*i[t][e]}),i[t][a]=(n[a][t]-e.sum(r))/i[a][a]})}),i},gauss_jacobi:function(n,r,o,i){for(var a,s,l,u,c=0,p=0,f=n.length,d=[],h=[],m=[];c<f;c++)for(d[c]=[],h[c]=[],m[c]=[],p=0;p<f;p++)c>p?(d[c][p]=n[c][p],h[c][p]=m[c][p]=0):c<p?(h[c][p]=n[c][p],d[c][p]=m[c][p]=0):(m[c][p]=n[c][p],d[c][p]=h[c][p]=0);for(l=e.multiply(e.multiply(e.inv(m),e.add(d,h)),-1),s=e.multiply(e.inv(m),r),a=o,u=e.add(e.multiply(l,o),s),c=2;t.abs(e.norm(e.subtract(u,a)))>i;)a=u,u=e.add(e.multiply(l,a),s),c++;return u},gauss_seidel:function(n,r,o,i){for(var a,s,l,u,c,p=0,f=n.length,d=[],h=[],m=[];p<f;p++)for(d[p]=[],h[p]=[],m[p]=[],a=0;a<f;a++)p>a?(d[p][a]=n[p][a],h[p][a]=m[p][a]=0):p<a?(h[p][a]=n[p][a],d[p][a]=m[p][a]=0):(m[p][a]=n[p][a],d[p][a]=h[p][a]=0);for(u=e.multiply(e.multiply(e.inv(e.add(m,d)),h),-1),l=e.multiply(e.inv(e.add(m,d)),r),s=o,c=e.add(e.multiply(u,o),l),p=2;t.abs(e.norm(e.subtract(c,s)))>i;)s=c,c=e.add(e.multiply(u,s),l),p+=1;return c},SOR:function(n,r,o,i,a){for(var s,l,u,c,p,f=0,d=n.length,h=[],m=[],g=[];f<d;f++)for(h[f]=[],m[f]=[],g[f]=[],s=0;s<d;s++)f>s?(h[f][s]=n[f][s],m[f][s]=g[f][s]=0):f<s?(m[f][s]=n[f][s],h[f][s]=g[f][s]=0):(g[f][s]=n[f][s],h[f][s]=m[f][s]=0);for(c=e.multiply(e.inv(e.add(g,e.multiply(h,a))),e.subtract(e.multiply(g,1-a),e.multiply(m,a))),u=e.multiply(e.multiply(e.inv(e.add(g,e.multiply(h,a))),r),a),l=o,p=e.add(e.multiply(c,o),u),f=2;t.abs(e.norm(e.subtract(p,l)))>i;)l=p,p=e.add(e.multiply(c,l),u),f++;return p},householder:function(n){for(var r,o,i,a,s,l=n.length,u=n[0].length,c=0,p=[],f=[];c<l-1;c++){for(r=0,a=c+1;a<u;a++)r+=n[a][c]*n[a][c];for(s=n[c+1][c]>0?-1:1,r=s*t.sqrt(r),o=t.sqrt((r*r-n[c+1][c]*r)/2),p=e.zeros(l,1),p[c+1][0]=(n[c+1][c]-r)/(2*o),i=c+2;i<l;i++)p[i][0]=n[i][c]/(2*o);f=e.subtract(e.identity(l,u),e.multiply(e.multiply(p,e.transpose(p)),2)),n=e.multiply(f,e.multiply(n,f))}return n},QR:function(){function n(n){var a=n.length,s=n[0].length;n=e.copy(n),r=e.zeros(s,s);var l,u,c;for(u=0;u<s;u++){for(r[u][u]=t.sqrt(o(i(a).map(function(e){return n[e][u]*n[e][u]}))),l=0;l<a;l++)n[l][u]=n[l][u]/r[u][u];for(c=u+1;c<s;c++)for(r[u][c]=o(i(a).map(function(e){return n[e][u]*n[e][c]})),l=0;l<a;l++)n[l][c]=n[l][c]-n[l][u]*r[u][c]}return[n,r]}var o=e.sum,i=e.arange;return n}(),lstsq:function(t,n){function r(t){t=e.copy(t);var n=t.length,r=e.identity(n);return e.arange(n-1,-1,-1).forEach(function(n){e.sliceAssign(r,{row:n},e.divide(e.slice(r,{row:n}),t[n][n])),e.sliceAssign(t,{row:n},e.divide(e.slice(t,{row:n}),t[n][n])),e.arange(n).forEach(function(o){var i=e.multiply(t[o][n],-1),a=e.slice(t,{row:o}),s=e.multiply(e.slice(t,{row:n}),i);e.sliceAssign(t,{row:o},e.add(a,s));var l=e.slice(r,{row:o}),u=e.multiply(e.slice(r,{row:n}),i);e.sliceAssign(r,{row:o},e.add(l,u))})}),r}function o(t,n){var o=!1;void 0===n[0].length&&(n=n.map(function(e){return[e]}),o=!0);var i=e.QR(t),a=i[0],s=i[1],l=t[0].length,u=e.slice(a,{col:{end:l}}),c=e.slice(s,{row:{end:l}}),p=r(c),f=e.transpose(u);void 0===f[0].length&&(f=[f]);var d=e.multiply(e.multiply(p,f),n);return void 0===d.length&&(d=[[d]]),o?d.map(function(e){return e[0]}):d}return o}(),jacobi:function(n){for(var r,o,i,a,s,l,u,c,p=1,f=0,d=n.length,h=e.identity(d,d),m=[];1===p;){f++,l=n[0][1],a=0,s=1;for(var o=0;o<d;o++)for(i=0;i<d;i++)o!=i&&l<t.abs(n[o][i])&&(l=t.abs(n[o][i]),a=o,s=i);u=n[a][a]===n[s][s]?n[a][s]>0?t.PI/4:-t.PI/4:t.atan(2*n[a][s]/(n[a][a]-n[s][s]))/2,c=e.identity(d,d),c[a][a]=t.cos(u),c[a][s]=-t.sin(u),c[s][a]=t.sin(u),c[s][s]=t.cos(u),h=e.multiply(h,c),r=e.multiply(e.multiply(e.inv(c),n),c),n=r,p=0;for(var o=1;o<d;o++)for(i=1;i<d;i++)o!=i&&t.abs(n[o][i])>.001&&(p=1)}for(var o=0;o<d;o++)m.push(n[o][o]);return[h,m]},rungekutta:function(e,t,n,r,o,i){var a,s,l,u,c;if(2===i)for(;r<=n;)a=t*e(r,o),s=t*e(r+t,o+a),l=o+(a+s)/2,o=l,r+=t;if(4===i)for(;r<=n;)a=t*e(r,o),s=t*e(r+t/2,o+a/2),u=t*e(r+t/2,o+s/2),c=t*e(r+t,o+u),l=o+(a+2*s+2*u+c)/6,o=l,r+=t;return o},romberg:function(e,n,r,o){for(var i,a,s,l,u,c=0,p=(r-n)/2,f=[],d=[],h=[];c<o/2;){for(u=e(n),s=n,l=0;s<=r;s+=p,l++)f[l]=s;for(i=f.length,s=1;s<i-1;s++)u+=(s%2!=0?4:2)*e(f[s]);u=p/3*(u+e(r)),h[c]=u,p/=2,c++}for(a=h.length,i=1;1!==a;){for(s=0;s<a-1;s++)d[s]=(t.pow(4,i)*h[s+1]-h[s])/(t.pow(4,i)-1);a=d.length,h=d,d=[],i++}return h},richardson:function(e,n,r,o){function i(e,t){for(var n,r=0,o=e.length;r<o;r++)e[r]===t&&(n=r);return n}for(var a,s,l,u,c,p=(e.length,t.abs(r-e[i(e,r)+1])),f=0,d=[],h=[];o>=p;)a=i(e,r+o),s=i(e,r),d[f]=(n[a]-2*n[s]+n[2*s-a])/(o*o),o/=2,f++;for(u=d.length,l=1;1!=u;){for(c=0;c<u-1;c++)h[c]=(t.pow(4,l)*d[c+1]-d[c])/(t.pow(4,l)-1);u=h.length,d=h,h=[],l++}return d},simpson:function(e,t,n,r){for(var o,i=(n-t)/r,a=e(t),s=[],l=t,u=0,c=1;l<=n;l+=i,u++)s[u]=l;for(o=s.length;c<o-1;c++)a+=(c%2!=0?4:2)*e(s[c]);return i/3*(a+e(n))},hermite:function(e,t,n,r){for(var o,i=e.length,a=0,s=0,l=[],u=[],c=[],p=[];s<i;s++){for(l[s]=1,o=0;o<i;o++)s!=o&&(l[s]*=(r-e[o])/(e[s]-e[o]));for(u[s]=0,o=0;o<i;o++)s!=o&&(u[s]+=1/(e[s]-e[o]));c[s]=(1-2*(r-e[s])*u[s])*(l[s]*l[s]),p[s]=(r-e[s])*(l[s]*l[s]),a+=c[s]*t[s]+p[s]*n[s]}return a},lagrange:function(e,t,n){for(var r,o,i=0,a=0,s=e.length;a<s;a++){for(o=t[a],r=0;r<s;r++)a!=r&&(o*=(n-e[r])/(e[a]-e[r]));i+=o}return i},cubic_spline:function(t,n,r){for(var o,i=t.length,a=0,s=[],l=[],u=[],c=[],p=[],f=[],d=[];a<i-1;a++)p[a]=t[a+1]-t[a];u[0]=0;for(var a=1;a<i-1;a++)u[a]=3/p[a]*(n[a+1]-n[a])-3/p[a-1]*(n[a]-n[a-1]);for(var a=1;a<i-1;a++)s[a]=[],l[a]=[],s[a][a-1]=p[a-1],s[a][a]=2*(p[a-1]+p[a]),s[a][a+1]=p[a],l[a][0]=u[a];for(c=e.multiply(e.inv(s),l),o=0;o<i-1;o++)f[o]=(n[o+1]-n[o])/p[o]-p[o]*(c[o+1][0]+2*c[o][0])/3,d[o]=(c[o+1][0]-c[o][0])/(3*p[o]);for(o=0;o<i&&!(t[o]>r);o++);return o-=1,n[o]+(r-t[o])*f[o]+e.sq(r-t[o])*c[o]+(r-t[o])*e.sq(r-t[o])*d[o]},gauss_quadrature:function(){throw new Error("gauss_quadrature not yet implemented")},PCA:function(t){for(var n,r,o=t.length,i=t[0].length,a=0,s=[],l=[],u=[],c=[],p=[],f=[],d=[],h=[],m=[],g=[],a=0;a<o;a++)s[a]=e.sum(t[a])/i;for(var a=0;a<i;a++)for(d[a]=[],n=0;n<o;n++)d[a][n]=t[n][a]-s[n];d=e.transpose(d);for(var a=0;a<o;a++)for(h[a]=[],n=0;n<o;n++)h[a][n]=e.dot([d[a]],[d[n]])/(i-1);u=e.jacobi(h),m=u[0],l=u[1],g=e.transpose(m);for(var a=0;a<l.length;a++)for(n=a;n<l.length;n++)l[a]<l[n]&&(r=l[a],l[a]=l[n],l[n]=r,c=g[a],g[a]=g[n],g[n]=c);f=e.transpose(d);for(var a=0;a<o;a++)for(p[a]=[],n=0;n<f.length;n++)p[a][n]=e.dot([g[a]],[f[n]]);return[t,l,g,p]}}),function(t){for(var n=0;n<t.length;n++)!function(t){e.fn[t]=function(n,r){var o=this;return r?(setTimeout(function(){r.call(o,e.fn[t].call(o,n))},15),this):"number"==typeof e[t](this,n)?e[t](this,n):e(e[t](this,n))}}(t[n])}("add divide multiply subtract dot pow exp log abs norm angle".split(" "))}(e,Math),function(e,t){function n(e,n,r,o){if(e>1||r>1||e<=0||r<=0)throw new Error("Proportions should be greater than 0 and less than 1");var i=(e*n+r*o)/(n+o);return(e-r)/t.sqrt(i*(1-i)*(1/n+1/o))}var r=[].slice,o=e.utils.isNumber,i=e.utils.isArray;e.extend({zscore:function(){var t=r.call(arguments);return o(t[1])?(t[0]-t[1])/t[2]:(t[0]-e.mean(t[1]))/e.stdev(t[1],t[2])},ztest:function(){var n,o=r.call(arguments);return i(o[1])?(n=e.zscore(o[0],o[1],o[3]),1===o[2]?e.normal.cdf(-t.abs(n),0,1):2*e.normal.cdf(-t.abs(n),0,1)):o.length>2?(n=e.zscore(o[0],o[1],o[2]),1===o[3]?e.normal.cdf(-t.abs(n),0,1):2*e.normal.cdf(-t.abs(n),0,1)):(n=o[0],1===o[1]?e.normal.cdf(-t.abs(n),0,1):2*e.normal.cdf(-t.abs(n),0,1))}}),e.extend(e.fn,{zscore:function(e,t){return(e-this.mean())/this.stdev(t)},ztest:function(n,r,o){var i=t.abs(this.zscore(n,o));return 1===r?e.normal.cdf(-i,0,1):2*e.normal.cdf(-i,0,1)}}),e.extend({tscore:function(){var n=r.call(arguments);return 4===n.length?(n[0]-n[1])/(n[2]/t.sqrt(n[3])):(n[0]-e.mean(n[1]))/(e.stdev(n[1],!0)/t.sqrt(n[1].length))},ttest:function(){var n,i=r.call(arguments);return 5===i.length?(n=t.abs(e.tscore(i[0],i[1],i[2],i[3])),1===i[4]?e.studentt.cdf(-n,i[3]-1):2*e.studentt.cdf(-n,i[3]-1)):o(i[1])?(n=t.abs(i[0]),1==i[2]?e.studentt.cdf(-n,i[1]-1):2*e.studentt.cdf(-n,i[1]-1)):(n=t.abs(e.tscore(i[0],i[1])),1==i[2]?e.studentt.cdf(-n,i[1].length-1):2*e.studentt.cdf(-n,i[1].length-1))}}),e.extend(e.fn,{tscore:function(e){return(e-this.mean())/(this.stdev(!0)/t.sqrt(this.cols()))},ttest:function(n,r){return 1===r?1-e.studentt.cdf(t.abs(this.tscore(n)),this.cols()-1):2*e.studentt.cdf(-t.abs(this.tscore(n)),this.cols()-1)}}),e.extend({anovafscore:function(){var n,o,i,a,s,l,u,c,p=r.call(arguments);if(1===p.length){s=new Array(p[0].length);for(var u=0;u<p[0].length;u++)s[u]=p[0][u];p=s}if(2===p.length)return e.variance(p[0])/e.variance(p[1]);o=new Array;for(var u=0;u<p.length;u++)o=o.concat(p[u]);i=e.mean(o),n=0;for(var u=0;u<p.length;u++)n+=p[u].length*t.pow(e.mean(p[u])-i,2);n/=p.length-1,l=0;for(var u=0;u<p.length;u++)for(a=e.mean(p[u]),c=0;c<p[u].length;c++)l+=t.pow(p[u][c]-a,2);return l/=o.length-p.length,n/l},anovaftest:function(){var t,n,i,a,s=r.call(arguments);if(o(s[0]))return 1-e.centralF.cdf(s[0],s[1],s[2]);anovafscore=e.anovafscore(s),t=s.length-1,i=0;for(var a=0;a<s.length;a++)i+=s[a].length;return n=i-t-1,1-e.centralF.cdf(anovafscore,t,n)},ftest:function(t,n,r){return 1-e.centralF.cdf(t,n,r)}}),e.extend(e.fn,{anovafscore:function(){return e.anovafscore(this.toArray())},anovaftes:function(){for(var t,n=0,t=0;t<this.length;t++)n+=this[t].length;return e.ftest(this.anovafscore(),this.length-1,n-this.length)}}),e.extend({qscore:function(){var n,i,a,s,l,u=r.call(arguments);return o(u[0])?(n=u[0],i=u[1],a=u[2],s=u[3],l=u[4]):(n=e.mean(u[0]),i=e.mean(u[1]),a=u[0].length,s=u[1].length,l=u[2]),t.abs(n-i)/(l*t.sqrt((1/a+1/s)/2))},qtest:function(){var t,n=r.call(arguments);3===n.length?(t=n[0],n=n.slice(1)):7===n.length?(t=e.qscore(n[0],n[1],n[2],n[3],n[4]),n=n.slice(5)):(t=e.qscore(n[0],n[1],n[2]),n=n.slice(3));var o=n[0],i=n[1];return 1-e.tukey.cdf(t,i,o-i)},tukeyhsd:function(t){for(var n=e.pooledstdev(t),r=t.map(function(t){return e.mean(t)}),o=t.reduce(function(e,t){return e+t.length},0),i=[],a=0;a<t.length;++a)for(var s=a+1;s<t.length;++s){var l=e.qtest(r[a],r[s],t[a].length,t[s].length,n,o,t.length);i.push([[a,s],l])}return i}}),e.extend({normalci:function(){var n,o=r.call(arguments),i=new Array(2);return n=4===o.length?t.abs(e.normal.inv(o[1]/2,0,1)*o[2]/t.sqrt(o[3])):t.abs(e.normal.inv(o[1]/2,0,1)*e.stdev(o[2])/t.sqrt(o[2].length)),i[0]=o[0]-n,i[1]=o[0]+n,i},tci:function(){var n,o=r.call(arguments),i=new Array(2);return n=4===o.length?t.abs(e.studentt.inv(o[1]/2,o[3]-1)*o[2]/t.sqrt(o[3])):t.abs(e.studentt.inv(o[1]/2,o[2].length-1)*e.stdev(o[2],!0)/t.sqrt(o[2].length)),i[0]=o[0]-n,i[1]=o[0]+n,i},significant:function(e,t){return e<t}}),e.extend(e.fn,{normalci:function(t,n){return e.normalci(t,n,this.toArray())},tci:function(t,n){return e.tci(t,n,this.toArray())}}),e.extend(e.fn,{oneSidedDifferenceOfProportions:function(t,r,o,i){var a=n(t,r,o,i);return e.ztest(a,1)},twoSidedDifferenceOfProportions:function(t,r,o,i){var a=n(t,r,o,i);return e.ztest(a,2)}})}(e,Math),e.models=function(){function t(e,t){return n(e,t)}function t(t){var r=t[0].length;return e.arange(r).map(function(o){var i=e.arange(r).filter(function(e){return e!==o});return n(e.col(t,o).map(function(e){return e[0]}),e.col(t,i))})}function n(t,n){var r=t.length,o=n[0].length-1,i=r-o-1,a=e.lstsq(n,t),s=e.multiply(n,a.map(function(e){return[e]})).map(function(e){return e[0]}),l=e.subtract(t,s),u=e.mean(t),c=e.sum(s.map(function(e){return Math.pow(e-u,2)})),p=e.sum(t.map(function(e,t){return Math.pow(e-s[t],2)})),f=c+p;return{exog:n,endog:t,nobs:r,df_model:o,df_resid:i,coef:a,predict:s,resid:l,ybar:u,SST:f,SSE:c,SSR:p,R2:c/f}}function r(n){var r=t(n.exog),o=Math.sqrt(n.SSR/n.df_resid),i=r.map(function(e){var t=e.SST,n=e.R2;return o/Math.sqrt(t*(1-n))}),a=n.coef.map(function(e,t){return(e-0)/i[t]}),s=a.map(function(t){var r=e.studentt.cdf(t,n.df_resid);return 2*(r>.5?1-r:r)}),l=e.studentt.inv(.975,n.df_resid),u=n.coef.map(function(e,t){var n=l*i[t];return[e-n,e+n]});return{se:i,t:a,p:s,sigmaHat:o,interval95:u}}function o(t){var n=t.R2/t.df_model/((1-t.R2)/t.df_resid);return{F_statistic:n,pvalue:1-function(t,n,r){return e.beta.cdf(t/(r/n+t),n/2,r/2)}(n,t.df_model,t.df_resid)}}function i(e,t){var i=n(e,t),a=r(i),s=o(i),l=1-(1-i.rsquared)*((i.nobs-1)/i.df_resid);return i.t=a,i.f=s,i.adjust_R2=l,i}return{ols:i}}(),e.jStat=e,e})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),p=n(10),f=n(1017),d=r(f),h=n(168),m=r(h),g=n(8),v=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},y=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.isReady=!1,e}return a(t,e),s(t,[{key:"componentDidMount",value:function(){this.addAddThis()}},{key:"componentDidUpdate",value:function(){this.addAddThis()}},{key:"addAddThis",value:function(){var e=this,t=this.props.store,n=t.bitlyShortenedURL,r=t.sessionIdURL;if(n.isError||n.isComplete){var o=n.result||r;(0,d.default)({pubid:"ra-59959e35901cdde7"},this.props.getParameters.setup(o),function(){e.isReady=!0})}}},{key:"render",value:function(){var e=this.props.store.bitlyShortenedURL,t=e.isComplete,n=e.isError;return this.isReady&&(t||n)?c.createElement("div",{className:this.props.getParameters.className}):c.createElement(m.default,{isLoading:!0})}}]),t}(c.Component);v([g.observable],y.prototype,"isReady",void 0),y=v([p.observer],y),t.default=y},function(e,t,n){function r(e,t,n){window.addthis_share=t,window.addthis_config=e,o("https://s7.addthis.com/js/300/addthis_widget.js#domready=1").onload=n}var o=n(1018);e.exports=r},function(e,t){e.exports=function(e,t){var n=document.createElement("script");return n.src=e,"boolean"==typeof t&&(n.async=t),(document.head||document.body).appendChild(n),n}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=n(1),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l),c=n(84),p=function(e){return e&&e.__esModule?e:{default:e}}(c),f=n(10),d=n(811),h=n(8),m=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":s(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},g=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.downloadSegmentData=e.downloadSegmentData.bind(e),e}return i(t,e),a(t,[{key:"getIframeBody",value:function(){var e=1.5*this.props.sampleIds.length,t=300+2*this.props.sampleIds.length;t=Math.min(t,800);return'<head>    <link rel="stylesheet" type="text/css"  href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/themes/smoothness/jquery-ui.css"/><link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css"><link rel="stylesheet" type="text/css" href="css/igv.css"><script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"><\/script><script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js"><\/script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"><\/script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.7/es5-shim.min.js"><\/script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/es6-shim/0.35.3/es6-shim.js"><\/script><script type="text/javascript" src="js/lib/igv.min.js"><\/script></head><body style="margin:0"><div id="igvDiv" style="padding-top: 10px;padding-bottom: 10px;"></div><script type="text/javascript">  $(document).ready(function () {    var div = $("#igvDiv"),   options = {divId: "igvDiv", showNavigation: true, showRuler: true, genome: "hg19", divId: "igvDiv", locus: "'+this.props.gene.hugoGeneSymbol+'", tracks: [  { url: "api-legacy/copynumbersegments", indexed: false, isLog: true, contentType: "application/x-www-form-urlencoded", name: "Alt click to sort", type:"seg", json: true, method: "POST", height: '+e+', sendData: "cancerStudyId='+this.props.studyId+"&chromosome="+this.props.gene.chromosome+"&sampleIds="+this.props.sampleIds.join(",")+'"},{name: "Genes", url: "https://s3.amazonaws.com/igv.broadinstitute.org/annotations/hg19/genes/gencode.v18.collapsed.bed", order: Number.MAX_VALUE,  displayMode: "EXPANDED"}]};igv.createBrowser(div, options);});<\/script></body>'}},{key:"downloadSegmentData",value:function(){var e=this,t=new XMLHttpRequest,n="cancerStudyId="+e.props.studyId+"&sampleIds="+e.props.sampleIds.join(",");t.onreadystatechange=function(){var n;4===t.readyState&&200===t.status&&(n=document.createElement("a"),n.href=window.URL.createObjectURL(t.response),n.download=e.props.studyId+"_segments.seg",n.style.display="none",document.body.appendChild(n),n.click(),setTimeout(function(){(0,p.default)(n).remove()},200))},t.open("POST","api-legacy/segmentfile"),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.responseType="blob",t.send(n)}},{key:"componentDidMount",value:function(){var e=document.createElement("iframe");e.id="cnSegmentsFrame",(0,p.default)(e).css({width:"100%",height:630,border:"none"}).appendTo((0,p.default)(this.iframeDiv).empty()),e.contentWindow.document.open(),e.contentWindow.document.write(this.getIframeBody()),e.contentWindow.document.close()}},{key:"render",value:function(){var e=this;return u.createElement("div",null,u.createElement("div",{style:{border:"1px solid #ddd",marginBottom:10},ref:function(t){return e.iframeDiv=t}}),u.createElement("p",null,"Download a copy number segment file for the selected samples ",u.createElement("button",{onClick:this.downloadSegmentData,className:"btn btn-default btn-sm"},"Download")))}}]),t}(u.Component),v=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"render",value:function(){var e=this;return this.props.store.samples.isComplete&&this.props.store.genes.isComplete&&this.props.store.studyIds.isComplete?u.createElement(d.MSKTabs,{tabButtonStyle:"pills",activeTabId:this.activeTabId,className:"secondaryTabs",onTabClick:function(t){e.activeTabId=t}},this.props.store.genes.result.map(function(t){return u.createElement(d.MSKTab,{key:t.hugoGeneSymbol,id:"CNSegmentsTab"+t.hugoGeneSymbol,linkText:t.hugoGeneSymbol},u.createElement(g,{studyId:e.props.store.studyIds.result[0],sampleIds:e.props.store.samples.result.map(function(e){return e.sampleId}),gene:t}))})):null}}]),t}(u.Component);m([h.observable],v.prototype,"activeTabId",void 0),v=m([f.observer],v),t.default=v},function(e,t){},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(1),p=o(c),f=n(10),d=n(8),h=n(86),m=n(909),g=r(m),v=n(1030),y=r(v),b=n(910),w=n(3),x=r(w),_=n(277),S=r(_),C=n(51),k=r(C),A=n(168),E=r(A),M=n(170),T=r(M),O=n(906),I=r(O),P=n(50),j=r(P),D=n(28),N=n(1062),R=r(N),F=n(271),L=n(99),z=o(L),B=n(18),q=r(B),V=n(1063),U=r(V),H=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},G=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}l((r=r.apply(e,t||[])).next())})},W=[{clinicalAttributeId:F.SpecialAttribute.FractionGenomeAltered,datatype:"NUMBER",description:"Fraction Genome Altered",displayName:"Fraction Genome Altered",patientAttribute:!1},{clinicalAttributeId:F.SpecialAttribute.MutationCount,datatype:"NUMBER",description:"Number of mutations",displayName:"Total mutations",patientAttribute:!1},{clinicalAttributeId:F.SpecialAttribute.StudyOfOrigin,datatype:"STRING",description:"Study which the sample is a part of.",displayName:"Study of origin",patientAttribute:!1},{clinicalAttributeId:F.SpecialAttribute.MutationSpectrum,datatype:"COUNTS_MAP",description:"Number of point mutations in the sample counted by different types of nucleotide changes.",displayName:"Mutation spectrum",patientAttribute:!1}],Z="show_samples",Y="clinicallist",X="heatmap_track_groups",K=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.columnMode="patient",n.sortMode={type:"data"},n.distinguishMutationType=!0,n.distinguishDrivers=!0,n.sortByMutationType=!0,n.sortByDrivers=!0,n.showUnalteredColumns=!0,n.showWhitespaceBetweenColumns=!0,n.showClinicalTrackLegends=!0,n.showMinimap=!1,n.selectedHeatmapProfile="",n.heatmapGeneInputValue="",n.horzZoom=.5,n.mouseInsideBounds=!1,n.selectedClinicalAttributeIds=d.observable.shallowMap(),n.molecularProfileIdToHeatmapTracks=d.observable.map(),n.unalteredKeys=(0,h.remoteData)({await:function(){return[n.props.store.unalteredSampleKeys,n.props.store.unalteredPatientKeys]},invoke:function(){return G(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("sample"!==this.columnMode){e.next=4;break}return e.abrupt("return",this.props.store.unalteredSampleKeys.result);case 4:return e.abrupt("return",this.props.store.unalteredPatientKeys.result);case 5:case"end":return e.stop()}},e,this)}))},default:[]}),n.clinicalAttributes=(0,h.remoteData)({await:function(){return[n.props.store.clinicalAttributes]},invoke:function(){var e=x.default.sortBy(n.props.store.clinicalAttributes.result,function(e){return e.displayName});return e=W.concat(e),e=x.default.uniqBy(e,function(e){return e.clinicalAttributeId}),Promise.resolve(e)}}),n.clinicalAttributesById=(0,h.remoteData)({await:function(){return[n.clinicalAttributes]},invoke:function(){return Promise.resolve(x.default.reduce(n.clinicalAttributes.result,function(e,t){return e[t.clinicalAttributeId]=t,e},{}))}}),n.sampleGeneticTracks=(0,b.makeGeneticTracksMobxPromise)(n,!0),n.patientGeneticTracks=(0,b.makeGeneticTracksMobxPromise)(n,!1),n.sampleClinicalTracks=(0,b.makeClinicalTracksMobxPromise)(n,!0),n.patientClinicalTracks=(0,b.makeClinicalTracksMobxPromise)(n,!1),n.sampleHeatmapTracks=(0,b.makeHeatmapTracksMobxPromise)(n,!0),n.patientHeatmapTracks=(0,b.makeHeatmapTracksMobxPromise)(n,!1),n.caseSetName=(0,h.remoteData)({await:function(){return[n.props.store.sampleLists]},invoke:function(){return 1===n.props.store.sampleLists.result.length?Promise.resolve(n.props.store.sampleLists.result[0].name):Promise.resolve(void 0)}}),window.resultsViewOncoprint=n,n.initFromUrlParams(z.parse(window.location.href,!0).query),(0,S.default)(e.store.studyIds,function(e){e.length>1&&n.selectedClinicalAttributeIds.set(F.SpecialAttribute.StudyOfOrigin,!0)});var r=n;return n.onChangeSelectedClinicalTracks=n.onChangeSelectedClinicalTracks.bind(n),n.onDeleteClinicalTrack=n.onDeleteClinicalTrack.bind(n),n.onMinimapClose=n.onMinimapClose.bind(n),n.oncoprintRef=n.oncoprintRef.bind(n),n.toggleColumnMode=n.toggleColumnMode.bind(n),n.onTrackSortDirectionChange=n.onTrackSortDirectionChange.bind(n),(0,S.default)(n.props.store.heatmapMolecularProfiles,function(e){e.length&&(n.selectedHeatmapProfile=e[0].molecularProfileId)}),n.heatmapGeneInputValueUpdater=(0,S.default)(n.props.store.genes,function(e){n.heatmapGeneInputValue=e.map(function(e){return e.hugoGeneSymbol}).join(" ")},Number.POSITIVE_INFINITY),n.onMouseEnter=n.onMouseEnter.bind(n),n.onMouseLeave=n.onMouseLeave.bind(n),n.urlParamsReaction=(0,d.reaction)(function(){return[n.columnMode,n.heatmapTrackGroupsUrlParam,n.clinicalTracksUrlParam]},function(){var e=z.parse(window.location.href,!0),t=Object.assign({},e.query);t[Z]=("sample"===n.columnMode)+"",n.clinicalTracksUrlParam?t[Y]=n.clinicalTracksUrlParam:delete t[Y],n.heatmapTrackGroupsUrlParam?t[X]=n.heatmapTrackGroupsUrlParam:delete t[X];var r=Object.assign(e,{query:t,search:null});window.history.replaceState({},"",z.format(r))}),n.controlsHandlers=n.buildControlsHandlers(),n.controlsState=(0,d.observable)({get selectedClinicalAttributeIds(){return r.selectedClinicalAttributeIds.keys()},get selectedColumnType(){return r.columnMode},get showUnalteredColumns(){return r.showUnalteredColumns},get showWhitespaceBetweenColumns(){return r.showWhitespaceBetweenColumns},get showClinicalTrackLegends(){return r.showClinicalTrackLegends},get showMinimap(){return r.showMinimap},get hideHeatmapMenu(){return r.props.store.queryStore.isVirtualCohortQuery},get sortByMutationType(){return r.sortByMutationType},get distinguishMutationType(){return r.distinguishMutationType},get distinguishDrivers(){return r.distinguishDrivers},get annotateDriversOncoKb(){return r.props.store.mutationAnnotationSettings.oncoKb},get annotateDriversHotspots(){return r.props.store.mutationAnnotationSettings.hotspots},get annotateDriversCBioPortal(){return r.props.store.mutationAnnotationSettings.cbioportalCount},get annotateDriversCOSMIC(){return r.props.store.mutationAnnotationSettings.cosmicCount},get hidePutativePassengers(){return r.props.store.mutationAnnotationSettings.ignoreUnknown},get annotateCBioPortalInputValue(){return r.props.store.mutationAnnotationSettings.cbioportalCountThreshold+""},get annotateCOSMICInputValue(){return r.props.store.mutationAnnotationSettings.cosmicCountThreshold+""},get clinicalAttributesPromise(){return r.clinicalAttributes},get sortMode(){return r.sortMode},get sortByDrivers(){return r.sortByDrivers},get heatmapProfilesPromise(){return r.props.store.heatmapMolecularProfiles},get selectedHeatmapProfile(){return r.selectedHeatmapProfile},get clusterHeatmapButtonDisabled(){return"heatmap"===r.sortMode.type&&r.selectedHeatmapProfile===r.sortMode.clusteredHeatmapProfile},get hideClusterHeatmapButton(){return!r.molecularProfileIdToHeatmapTracks.get(r.selectedHeatmapProfile)},get heatmapGeneInputValue(){return r.heatmapGeneInputValue},get customDriverAnnotationBinaryMenuLabel(){var e=k.default.oncoprintCustomDriverAnnotationBinaryMenuLabel,t=r.props.store.customDriverAnnotationReport.result;return e&&t&&t.hasBinary?e:void 0},get customDriverAnnotationTiersMenuLabel(){var e=k.default.oncoprintCustomDriverAnnotationTiersMenuLabel,t=r.props.store.customDriverAnnotationReport.result;return e&&t&&t.tiers.length?e:void 0},get customDriverAnnotationTiers(){var e=r.props.store.customDriverAnnotationReport.result;return e&&e.tiers.length?e.tiers:void 0},get annotateCustomDriverBinary(){return r.props.store.mutationAnnotationSettings.driverFilter},get selectedCustomDriverAnnotationTiers(){return r.props.store.mutationAnnotationSettings.driverTiers},get columnMode(){return r.columnMode},get horzZoom(){return isNaN(r.horzZoom)?1:r.horzZoom}}),n}return s(t,e),l(t,[{key:"onMouseEnter",value:function(){this.mouseInsideBounds=!0}},{key:"onMouseLeave",value:function(){this.mouseInsideBounds=!1}},{key:"componentWillUnmount",value:function(){this.putativeDriverSettingsReaction(),this.urlParamsReaction()}},{key:"buildControlsHandlers",value:function(){var e=this,t=(0,d.action)(function(){e.props.store.mutationAnnotationSettings.oncoKb||e.props.store.mutationAnnotationSettings.hotspots||e.props.store.mutationAnnotationSettings.cbioportalCount||e.props.store.mutationAnnotationSettings.cosmicCount||e.props.store.mutationAnnotationSettings.driverFilter||e.props.store.mutationAnnotationSettings.driverTiers.entries().reduce(function(e,t){return e||t[1]},!1)?e.distinguishDrivers=!0:(e.distinguishDrivers=!1,e.props.store.mutationAnnotationSettings.ignoreUnknown=!1)});return{onSelectColumnType:function(t){e.setColumnMode(t)},onSelectShowUnalteredColumns:function(t){e.showUnalteredColumns=t},onSelectShowWhitespaceBetweenColumns:function(t){e.showWhitespaceBetweenColumns=t},onSelectShowClinicalTrackLegends:function(t){e.showClinicalTrackLegends=t},onSelectShowMinimap:function(t){e.showMinimap=t},onSelectDistinguishMutationType:function(t){e.distinguishMutationType=t},onSelectDistinguishDrivers:(0,d.action)(function(t){e.distinguishDrivers=t,e.distinguishDrivers?(e.props.store.mutationAnnotationSettings.oncoKb=!0,e.props.store.mutationAnnotationSettings.hotspots=!0,e.props.store.mutationAnnotationSettings.cbioportalCount=!0,e.props.store.mutationAnnotationSettings.cosmicCount=!0,e.props.store.mutationAnnotationSettings.driverFilter=!0,e.props.store.mutationAnnotationSettings.driverTiers.forEach(function(t,n){e.props.store.mutationAnnotationSettings.driverTiers.set(n,!0)})):(e.props.store.mutationAnnotationSettings.oncoKb=!1,e.props.store.mutationAnnotationSettings.hotspots=!1,e.props.store.mutationAnnotationSettings.cbioportalCount=!1,e.props.store.mutationAnnotationSettings.cosmicCount=!1,e.props.store.mutationAnnotationSettings.driverFilter=!1,e.props.store.mutationAnnotationSettings.driverTiers.forEach(function(t,n){e.props.store.mutationAnnotationSettings.driverTiers.set(n,!1)}),e.props.store.mutationAnnotationSettings.ignoreUnknown=!1)}),onSelectAnnotateOncoKb:(0,d.action)(function(n){e.props.store.mutationAnnotationSettings.oncoKb=n,t()}),onSelectAnnotateHotspots:(0,d.action)(function(n){e.props.store.mutationAnnotationSettings.hotspots=n,t()}),onSelectAnnotateCBioPortal:(0,d.action)(function(n){e.props.store.mutationAnnotationSettings.cbioportalCount=n,t()}),onSelectAnnotateCOSMIC:(0,d.action)(function(n){e.props.store.mutationAnnotationSettings.cosmicCount=n,t()}),onChangeAnnotateCBioPortalInputValue:(0,d.action)(function(t){e.props.store.mutationAnnotationSettings.cbioportalCountThreshold=parseInt(t,10),e.controlsHandlers.onSelectAnnotateCBioPortal&&e.controlsHandlers.onSelectAnnotateCBioPortal(!0)}),onChangeAnnotateCOSMICInputValue:(0,d.action)(function(t){e.props.store.mutationAnnotationSettings.cosmicCountThreshold=parseInt(t,10),e.controlsHandlers.onSelectAnnotateCOSMIC&&e.controlsHandlers.onSelectAnnotateCOSMIC(!0)}),onSelectCustomDriverAnnotationBinary:(0,d.action)(function(t){e.props.store.mutationAnnotationSettings.driverFilter=t,e.props.store.mutationAnnotationSettings.driverFilter&&(e.distinguishDrivers=!0)}),onSelectCustomDriverAnnotationTier:(0,d.action)(function(t,n){e.props.store.mutationAnnotationSettings.driverTiers.set(t,n),n&&(e.distinguishDrivers=!0)}),onSelectHidePutativePassengers:function(t){e.props.store.mutationAnnotationSettings.ignoreUnknown=t},onSelectSortByMutationType:function(t){e.sortByMutationType=t},onClickSortAlphabetical:function(){e.sortMode={type:"alphabetical"}},onClickSortCaseListOrder:function(){e.sortMode={type:"caseList"}},onSelectSortByDrivers:function(t){e.sortByDrivers=t},onClickSortByData:function(){e.sortMode={type:"data"}},onChangeSelectedClinicalTracks:this.onChangeSelectedClinicalTracks,onChangeHeatmapGeneInputValue:(0,d.action)(function(t){e.heatmapGeneInputValue=t,e.heatmapGeneInputValueUpdater()}),onSelectHeatmapProfile:function(t){e.selectedHeatmapProfile=t},onClickAddGenesToHeatmap:function(){e.addHeatmapTracks(e.selectedHeatmapProfile,e.heatmapGeneInputValue.toUpperCase().trim().split(/\s+/))},onClickRemoveHeatmap:(0,d.action)(function(){e.molecularProfileIdToHeatmapTracks.clear(),"heatmap"===e.sortMode.type&&e.sortByData()}),onClickClusterHeatmap:function(){e.sortMode={type:"heatmap",clusteredHeatmapProfile:e.selectedHeatmapProfile}},onClickDownload:function(t){switch(t){case"pdf":(0,I.default)("oncoprint.pdf",e.oncoprint.toSVG(!0))||alert("Oncoprint too big to download as PDF - please download as SVG.");break;case"png":e.oncoprint.toCanvas(function(e,t){e.toBlob(function(n){t&&alert("Oncoprint too large - PNG truncated to "+e.getAttribute("width")+"x"+e.getAttribute("height")),(0,T.default)(n,"oncoprint.png")})},2);break;case"svg":(0,T.default)((new XMLSerializer).serializeToString(e.oncoprint.toSVG(!1)),"oncoprint.svg");break;case"order":var n=e.columnMode[0].toUpperCase()+e.columnMode.slice(1);(0,S.default)([e.props.store.sampleKeyToSample,e.props.store.patientKeyToPatient],function(t,r){var o=n+" order in the Oncoprint is:\n",i=(e.columnMode,e.oncoprint.getIdOrder().map("sample"===e.columnMode?function(e){return t[e].sampleId}:function(e){return r[e].patientId})),a=!0,s=!1,l=void 0;try{for(var u,c=i[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){o+=u.value+"\n"}}catch(e){s=!0,l=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw l}}(0,T.default)(o,"OncoPrint"+n+"s.txt")});break;case"tabular":(0,S.default)([e.props.store.sampleKeyToSample,e.props.store.patientKeyToPatient],function(t,n){(0,R.default)(e.geneticTracks.result,e.clinicalTracks.result,e.heatmapTracks.result,e.oncoprint.getIdOrder(),"sample"===e.columnMode?function(e){return t[e].sampleId}:function(e){return n[e].patientId},e.columnMode,e.distinguishDrivers)})}},onSetHorzZoom:function(t){e.oncoprint.setHorzZoom(t)},onClickZoomIn:function(){e.oncoprint.setHorzZoom(e.oncoprint.getHorzZoom()/.7)},onClickZoomOut:function(){e.oncoprint.setHorzZoom(.7*e.oncoprint.getHorzZoom())}}}},{key:"initFromUrlParams",value:function(e){var t=this;if(e[Z]&&(this.columnMode=e[Z]&&"true"===e[Z]?"sample":"patient"),e[X]){var n=e[X].split(";").map(function(e){return e.split(",")}),r=!0,o=!1,i=void 0;try{for(var a,s=n[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;this.addHeatmapTracks(l[0],l.slice(1))}}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}}if(e[Y]){e[Y].split(",").map(function(e){return t.selectedClinicalAttributeIds.set(e,!0)})}}},{key:"sortByData",value:function(){this.sortMode={type:"data"}}},{key:"addHeatmapTracks",value:function(e,t){var n=this.molecularProfileIdToHeatmapTracks.get(e);if(!n){var r=2,o=!0,i=!1,a=void 0;try{for(var s,l=this.molecularProfileIdToHeatmapTracks.values()[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var u=s.value;r=Math.max(r,u.trackGroupIndex+1)}}catch(e){i=!0,a=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw a}}n=(0,d.observable)({trackGroupIndex:r,molecularProfileId:e,genes:d.observable.shallowMap({})})}var c=!0,p=!1,f=void 0;try{for(var h,m=t[Symbol.iterator]();!(c=(h=m.next()).done);c=!0){var g=h.value;n.genes.set(g,!0)}}catch(e){p=!0,f=e}finally{try{!c&&m.return&&m.return()}finally{if(p)throw f}}this.molecularProfileIdToHeatmapTracks.set(e,n)}},{key:"toggleColumnMode",value:function(){"sample"===this.columnMode?this.controlsHandlers.onSelectColumnType&&this.controlsHandlers.onSelectColumnType("patient"):this.controlsHandlers.onSelectColumnType&&this.controlsHandlers.onSelectColumnType("sample")}},{key:"oncoprintRef",value:function(e){var t=this;this.oncoprint=e,this.props.addOnBecomeVisibleListener&&this.props.addOnBecomeVisibleListener(function(){return t.oncoprint.triggerPendingResizeAndOrganize()}),this.oncoprint.onHorzZoom(function(e){return t.horzZoom=e}),this.horzZoom=this.oncoprint.getHorzZoom(),(0,S.default)([this.props.store.alteredSampleKeys,this.props.store.alteredPatientKeys],function(e,n){t.oncoprint.setHorzZoomToFit("sample"===t.columnMode?e:n)})}},{key:"setColumnMode",value:function(e){this.columnMode!==e&&(this.columnMode=e)}},{key:"onMinimapClose",value:function(){this.showMinimap=!1}},{key:"clinicalTrackKeyToAttributeId",value:function(e){return e.substr("CLINICALTRACK_".length)}},{key:"clinicalAttributeIdToTrackKey",value:function(e){return"CLINICALTRACK_"+e}},{key:"onChangeSelectedClinicalTracks",value:function(e){this.selectedClinicalAttributeIds.clear();var t=!0,n=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;this.selectedClinicalAttributeIds.set(a,!0)}}catch(e){n=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw r}}}},{key:"onDeleteClinicalTrack",value:function(e){this.selectedClinicalAttributeIds.delete(this.clinicalTrackKeyToAttributeId(e))}},{key:"onTrackSortDirectionChange",value:function(e,t){1!==t&&-1!==t||this.sortByData()}},{key:"render",value:function(){var e=this.clinicalTracks.isPending||this.geneticTracks.isPending||this.heatmapTracks.isPending;return p.createElement("div",{className:"cbioportal-frontend",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},this.caseSetInfo,this.oncoprint&&!this.oncoprint.webgl_unavailable&&p.createElement(U.default,{showByDefault:!0,show:this.mouseInsideBounds},p.createElement(y.default,{handlers:this.controlsHandlers,state:this.controlsState})),p.createElement("div",{className:(0,q.default)({hidden:e})},this.alterationInfo,p.createElement(g.default,{oncoprintRef:this.oncoprintRef,clinicalTracks:this.clinicalTracks.result,geneticTracks:this.geneticTracks.result,heatmapTracks:this.heatmapTracks.result,divId:this.props.divId,width:1050,suppressRendering:this.clinicalTracks.isPending||this.geneticTracks.isPending||this.heatmapTracks.isPending,hiddenIds:this.showUnalteredColumns?void 0:this.unalteredKeys.result,horzZoomToFitIds:this.horzZoomToFitIds,distinguishMutationType:this.distinguishMutationType,distinguishDrivers:this.distinguishDrivers,sortConfig:this.sortConfig,showClinicalTrackLegends:this.showClinicalTrackLegends,showWhitespaceBetweenColumns:this.showWhitespaceBetweenColumns,showMinimap:this.showMinimap,onMinimapClose:this.onMinimapClose,onDeleteClinicalTrack:this.onDeleteClinicalTrack,onTrackSortDirectionChange:this.onTrackSortDirectionChange})),e&&p.createElement("div",{className:"oncoprintLoadingIndicator"},p.createElement("div",null,"Loading Oncoprint data"),p.createElement(E.default,{style:{display:"block"},isLoading:!0})))}},{key:"clinicalTracksUrlParam",get:function(){return this.selectedClinicalAttributeIds.keys().join(",")}},{key:"heatmapTrackGroupsUrlParam",get:function(){return x.default.sortBy(this.molecularProfileIdToHeatmapTracks.values(),function(e){return e.trackGroupIndex}).filter(function(e){return!!e.genes.size}).map(function(e){return e.molecularProfileId+","+e.genes.keys().join(",")}).join(";")}},{key:"horzZoomToFitIds",get:function(){return"sample"===this.columnMode&&this.props.store.alteredSampleKeys.isComplete?this.props.store.alteredSampleKeys.result:"patient"===this.columnMode&&this.props.store.alteredPatientKeys.isComplete?this.props.store.alteredPatientKeys.result:[]}},{key:"sortOrder",get:function(){if("alphabetical"===this.sortMode.type)return"sample"===this.columnMode?this.alphabeticalSampleOrder:this.alphabeticalPatientOrder;if("caseList"===this.sortMode.type)return"sample"===this.columnMode&&this.props.store.samples.isComplete?this.props.store.samples.result.map(function(e){return e.uniqueSampleKey}):"patient"===this.columnMode&&this.props.store.patients.isComplete?this.props.store.patients.result.map(function(e){return e.uniquePatientKey}):void 0}},{key:"alphabeticalSampleOrder",get:function(){return this.props.store.samples.isComplete?x.default.sortBy(this.props.store.samples.result,function(e){return e.sampleId}).map(function(e){return e.uniqueSampleKey}):void 0}},{key:"alphabeticalPatientOrder",get:function(){return this.props.store.patients.isComplete?x.default.sortBy(this.props.store.patients.result,function(e){return e.patientId}).map(function(e){return e.uniquePatientKey}):void 0}},{key:"geneticTracks",get:function(){return"sample"===this.columnMode?this.sampleGeneticTracks:this.patientGeneticTracks}},{key:"clinicalTracks",get:function(){return"sample"===this.columnMode?this.sampleClinicalTracks:this.patientClinicalTracks}},{key:"heatmapTracks",get:function(){return"sample"===this.columnMode?this.sampleHeatmapTracks:this.patientHeatmapTracks}},{key:"clusterHeatmapTrackGroupIndex",get:function(){return"heatmap"===this.sortMode.type?this.molecularProfileIdToHeatmapTracks.get(this.sortMode.clusteredHeatmapProfile).trackGroupIndex:void 0}},{key:"sortConfig",get:function(){return{sortByMutationType:this.sortByMutationType,sortByDrivers:this.sortByDrivers,order:this.sortOrder,clusterHeatmapTrackGroupIndex:this.clusterHeatmapTrackGroupIndex}}},{key:"headerColumnModeButton",get:function(){if(!this.props.store.samples.isComplete||!this.props.store.patients.isComplete||this.props.store.samples.result.length===this.props.store.patients.result.length)return null;var e=void 0,t=void 0;return"sample"===this.columnMode?(e="Show only one column per patient.",t="Each sample for each patient is in a separate column. Click to show only one column per patient"):(e="Show all samples",t="All samples from a patient are merged into one column. Click to split samples into multiple columns."),p.createElement(j.default,{overlay:p.createElement("div",{style:{maxWidth:"400px"}},t),placement:"top"},p.createElement(D.Button,{bsSize:"xs",bsStyle:"primary",style:{fontSize:"11px",display:"inline-block",color:"white",marginLeft:"5px"},onClick:this.toggleColumnMode},e))}},{key:"caseSetInfo",get:function(){var e=null;if(this.props.store.patients.isComplete&&this.props.store.samples.isComplete&&this.caseSetName.isComplete){var t=this.caseSetName.result||"User-defined Patient List",n=this.props.store.patients.result.length,r=this.props.store.samples.result.length;e=p.createElement("span",null,"Case Set: ",t," (",n," patients / ",r," samples)")}return p.createElement("div",null,e,this.headerColumnModeButton)}},{key:"alterationInfo",get:function(){var e="sample"===this.columnMode?this.props.store.alteredSampleKeys:this.props.store.alteredPatientKeys,t="sample"===this.columnMode?this.props.store.sequencedSampleKeys:this.props.store.sequencedPatientKeys,n="sample"===this.columnMode?this.props.store.samples:this.props.store.patients;return n.isComplete&&e.isComplete&&t.isComplete?p.createElement("span",{style:{marginTop:"15px",marginBottom:"15px",display:"block"}},"Altered in "+e.result.length+" ("+(0,b.percentAltered)(e.result.length,t.result.length)+") of "+t.result.length+" sequenced "+("sample"===this.columnMode?"samples":"cases/patients")+" ("+n.result.length+" total)"):null}}]),t}(p.Component);H([d.observable],K.prototype,"columnMode",void 0),H([d.observable],K.prototype,"sortMode",void 0),H([d.observable],K.prototype,"distinguishMutationType",void 0),H([d.observable],K.prototype,"distinguishDrivers",void 0),H([d.observable],K.prototype,"sortByMutationType",void 0),H([d.observable],K.prototype,"sortByDrivers",void 0),H([d.observable],K.prototype,"showUnalteredColumns",void 0),H([d.observable],K.prototype,"showWhitespaceBetweenColumns",void 0),H([d.observable],K.prototype,"showClinicalTrackLegends",void 0),H([d.observable],K.prototype,"showMinimap",void 0),H([d.observable],K.prototype,"selectedHeatmapProfile",void 0),H([d.observable],K.prototype,"heatmapGeneInputValue",void 0),H([d.observable],K.prototype,"horzZoom",void 0),H([d.observable],K.prototype,"mouseInsideBounds",void 0),H([d.action],K.prototype,"initFromUrlParams",null),H([d.action],K.prototype,"sortByData",null),H([d.computed],K.prototype,"clinicalTracksUrlParam",null),H([d.computed],K.prototype,"heatmapTrackGroupsUrlParam",null),H([d.computed],K.prototype,"horzZoomToFitIds",null),H([d.action],K.prototype,"onChangeSelectedClinicalTracks",null),H([d.computed],K.prototype,"sortOrder",null),H([d.computed],K.prototype,"alphabeticalSampleOrder",null),H([d.computed],K.prototype,"alphabeticalPatientOrder",null),H([d.computed],K.prototype,"geneticTracks",null),H([d.computed],K.prototype,"clinicalTracks",null),H([d.computed],K.prototype,"heatmapTracks",null),H([d.computed],K.prototype,"clusterHeatmapTrackGroupIndex",null),H([d.computed],K.prototype,"sortConfig",null),H([d.computed],K.prototype,"headerColumnModeButton",null),H([d.computed],K.prototype,"caseSetInfo",null),H([d.computed],K.prototype,"alterationInfo",null),K=H([f.observer],K),t.default=K},function(e,t,n){(function(t){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=11)}([function(e,t,n){var r,o;!function(t,n){"object"==typeof e&&"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,function(n,i){function a(e){var t=!!e&&"length"in e&&e.length,n=ge.type(e);return"function"!==n&&!ge.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function s(e,t,n){if(ge.isFunction(t))return ge.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return ge.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(Ae.test(t))return ge.filter(t,e,n);t=ge.filter(t,e)}return ge.grep(e,function(e){return ge.inArray(e,t)>-1!==n})}function l(e,t){do{e=e[t]}while(e&&1!==e.nodeType);return e}function u(e){var t={};return ge.each(e.match(Ie)||[],function(e,n){t[n]=!0}),t}function c(){se.addEventListener?(se.removeEventListener("DOMContentLoaded",p),n.removeEventListener("load",p)):(se.detachEvent("onreadystatechange",p),n.detachEvent("onload",p))}function p(){(se.addEventListener||"load"===n.event.type||"complete"===se.readyState)&&(c(),ge.ready())}function f(e,t,n){if(void 0===n&&1===e.nodeType){var r="data-"+t.replace(Re,"-$1").toLowerCase();if("string"==typeof(n=e.getAttribute(r))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:Ne.test(n)?ge.parseJSON(n):n)}catch(e){}ge.data(e,t,n)}else n=void 0}return n}function d(e){var t;for(t in e)if(("data"!==t||!ge.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function h(e,t,n,r){if(De(e)){var o,i,a=ge.expando,s=e.nodeType,l=s?ge.cache:e,u=s?e[a]:e[a]&&a;if(u&&l[u]&&(r||l[u].data)||void 0!==n||"string"!=typeof t)return u||(u=s?e[a]=ae.pop()||ge.guid++:a),l[u]||(l[u]=s?{}:{toJSON:ge.noop}),"object"!=typeof t&&"function"!=typeof t||(r?l[u]=ge.extend(l[u],t):l[u].data=ge.extend(l[u].data,t)),i=l[u],r||(i.data||(i.data={}),i=i.data),void 0!==n&&(i[ge.camelCase(t)]=n),"string"==typeof t?null==(o=i[t])&&(o=i[ge.camelCase(t)]):o=i,o}}function m(e,t,n){if(De(e)){var r,o,i=e.nodeType,a=i?ge.cache:e,s=i?e[ge.expando]:ge.expando;if(a[s]){if(t&&(r=n?a[s]:a[s].data)){ge.isArray(t)?t=t.concat(ge.map(t,ge.camelCase)):t in r?t=[t]:(t=ge.camelCase(t),t=t in r?[t]:t.split(" ")),o=t.length;for(;o--;)delete r[t[o]];if(n?!d(r):!ge.isEmptyObject(r))return}(n||(delete a[s].data,d(a[s])))&&(i?ge.cleanData([e],!0):me.deleteExpando||a!=a.window?delete a[s]:a[s]=void 0)}}}function g(e,t,n,r){var o,i=1,a=20,s=r?function(){return r.cur()}:function(){return ge.css(e,t,"")},l=s(),u=n&&n[3]||(ge.cssNumber[t]?"":"px"),c=(ge.cssNumber[t]||"px"!==u&&+l)&&Le.exec(ge.css(e,t));if(c&&c[3]!==u){u=u||c[3],n=n||[],c=+l||1;do{i=i||".5",c/=i,ge.style(e,t,c+u)}while(i!==(i=s()/l)&&1!==i&&--a)}return n&&(c=+c||+l||0,o=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=u,r.start=c,r.end=o)),o}function v(e){var t=We.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function y(e,t){var n,r,o=0,i=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):void 0;if(!i)for(i=[],n=e.childNodes||e;null!=(r=n[o]);o++)!t||ge.nodeName(r,t)?i.push(r):ge.merge(i,y(r,t));return void 0===t||t&&ge.nodeName(e,t)?ge.merge([e],i):i}function b(e,t){for(var n,r=0;null!=(n=e[r]);r++)ge._data(n,"globalEval",!t||ge._data(t[r],"globalEval"))}function w(e){Ve.test(e.type)&&(e.defaultChecked=e.checked)}function x(e,t,n,r,o){for(var i,a,s,l,u,c,p,f=e.length,d=v(t),h=[],m=0;m<f;m++)if((a=e[m])||0===a)if("object"===ge.type(a))ge.merge(h,a.nodeType?[a]:a);else if(Ye.test(a)){for(l=l||d.appendChild(t.createElement("div")),u=(Ue.exec(a)||["",""])[1].toLowerCase(),p=Ze[u]||Ze._default,l.innerHTML=p[1]+ge.htmlPrefilter(a)+p[2],i=p[0];i--;)l=l.lastChild;if(!me.leadingWhitespace&&Ge.test(a)&&h.push(t.createTextNode(Ge.exec(a)[0])),!me.tbody)for(a="table"!==u||Xe.test(a)?"<table>"!==p[1]||Xe.test(a)?0:l:l.firstChild,i=a&&a.childNodes.length;i--;)ge.nodeName(c=a.childNodes[i],"tbody")&&!c.childNodes.length&&a.removeChild(c);for(ge.merge(h,l.childNodes),l.textContent="";l.firstChild;)l.removeChild(l.firstChild);l=d.lastChild}else h.push(t.createTextNode(a));for(l&&d.removeChild(l),me.appendChecked||ge.grep(y(h,"input"),w),m=0;a=h[m++];)if(r&&ge.inArray(a,r)>-1)o&&o.push(a);else if(s=ge.contains(a.ownerDocument,a),l=y(d.appendChild(a),"script"),s&&b(l),n)for(i=0;a=l[i++];)He.test(a.type||"")&&n.push(a);return l=null,d}function _(){return!0}function S(){return!1}function C(){try{return se.activeElement}catch(e){}}function k(e,t,n,r,o,i){var a,s;if("object"==typeof t){"string"!=typeof n&&(r=r||n,n=void 0);for(s in t)k(e,s,n,r,t[s],i);return e}if(null==r&&null==o?(o=n,r=n=void 0):null==o&&("string"==typeof n?(o=r,r=void 0):(o=r,r=n,n=void 0)),!1===o)o=S;else if(!o)return e;return 1===i&&(a=o,o=function(e){return ge().off(e),a.apply(this,arguments)},o.guid=a.guid||(a.guid=ge.guid++)),e.each(function(){ge.event.add(this,t,o,r,n)})}function A(e,t){return ge.nodeName(e,"table")&&ge.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function E(e){return e.type=(null!==ge.find.attr(e,"type"))+"/"+e.type,e}function M(e){var t=at.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function T(e,t){if(1===t.nodeType&&ge.hasData(e)){var n,r,o,i=ge._data(e),a=ge._data(t,i),s=i.events;if(s){delete a.handle,a.events={};for(n in s)for(r=0,o=s[n].length;r<o;r++)ge.event.add(t,n,s[n][r])}a.data&&(a.data=ge.extend({},a.data))}}function O(e,t){var n,r,o;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!me.noCloneEvent&&t[ge.expando]){o=ge._data(t);for(r in o.events)ge.removeEvent(t,r,o.handle);t.removeAttribute(ge.expando)}"script"===n&&t.text!==e.text?(E(t).text=e.text,M(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),me.html5Clone&&e.innerHTML&&!ge.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Ve.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}}function I(e,t,n,r){t=ue.apply([],t);var o,i,a,s,l,u,c=0,p=e.length,f=p-1,d=t[0],h=ge.isFunction(d);if(h||p>1&&"string"==typeof d&&!me.checkClone&&it.test(d))return e.each(function(o){var i=e.eq(o);h&&(t[0]=d.call(this,o,i.html())),I(i,t,n,r)});if(p&&(u=x(t,e[0].ownerDocument,!1,e,r),o=u.firstChild,1===u.childNodes.length&&(u=o),o||r)){for(s=ge.map(y(u,"script"),E),a=s.length;c<p;c++)i=u,c!==f&&(i=ge.clone(i,!0,!0),a&&ge.merge(s,y(i,"script"))),n.call(e[c],i,c);if(a)for(l=s[s.length-1].ownerDocument,ge.map(s,M),c=0;c<a;c++)i=s[c],He.test(i.type||"")&&!ge._data(i,"globalEval")&&ge.contains(l,i)&&(i.src?ge._evalUrl&&ge._evalUrl(i.src):ge.globalEval((i.text||i.textContent||i.innerHTML||"").replace(st,"")));u=o=null}return e}function P(e,t,n){for(var r,o=t?ge.filter(t,e):e,i=0;null!=(r=o[i]);i++)n||1!==r.nodeType||ge.cleanData(y(r)),r.parentNode&&(n&&ge.contains(r.ownerDocument,r)&&b(y(r,"script")),r.parentNode.removeChild(r));return e}function j(e,t){var n=ge(t.createElement(e)).appendTo(t.body),r=ge.css(n[0],"display");return n.detach(),r}function D(e){var t=se,n=pt[e];return n||(n=j(e,t),"none"!==n&&n||(ct=(ct||ge("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(ct[0].contentWindow||ct[0].contentDocument).document,t.write(),t.close(),n=j(e,t),ct.detach()),pt[e]=n),n}function N(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function R(e){if(e in At)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=kt.length;n--;)if((e=kt[n]+t)in At)return e}function F(e,t){for(var n,r,o,i=[],a=0,s=e.length;a<s;a++)r=e[a],r.style&&(i[a]=ge._data(r,"olddisplay"),n=r.style.display,t?(i[a]||"none"!==n||(r.style.display=""),""===r.style.display&&Be(r)&&(i[a]=ge._data(r,"olddisplay",D(r.nodeName)))):(o=Be(r),(n&&"none"!==n||!o)&&ge._data(r,"olddisplay",o?n:ge.css(r,"display"))));for(a=0;a<s;a++)r=e[a],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?i[a]||"":"none"));return e}function L(e,t,n){var r=_t.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function z(e,t,n,r,o){for(var i=n===(r?"border":"content")?4:"width"===t?1:0,a=0;i<4;i+=2)"margin"===n&&(a+=ge.css(e,n+ze[i],!0,o)),r?("content"===n&&(a-=ge.css(e,"padding"+ze[i],!0,o)),"margin"!==n&&(a-=ge.css(e,"border"+ze[i]+"Width",!0,o))):(a+=ge.css(e,"padding"+ze[i],!0,o),"padding"!==n&&(a+=ge.css(e,"border"+ze[i]+"Width",!0,o)));return a}function B(e,t,n){var r=!0,o="width"===t?e.offsetWidth:e.offsetHeight,i=gt(e),a=me.boxSizing&&"border-box"===ge.css(e,"boxSizing",!1,i);if(o<=0||null==o){if(o=vt(e,t,i),(o<0||null==o)&&(o=e.style[t]),dt.test(o))return o;r=a&&(me.boxSizingReliable()||o===e.style[t]),o=parseFloat(o)||0}return o+z(e,t,n||(a?"border":"content"),r,i)+"px"}function q(e,t,n,r,o){return new q.prototype.init(e,t,n,r,o)}function V(){return n.setTimeout(function(){Et=void 0}),Et=ge.now()}function U(e,t){var n,r={height:e},o=0;for(t=t?1:0;o<4;o+=2-t)n=ze[o],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function H(e,t,n){for(var r,o=(Z.tweeners[t]||[]).concat(Z.tweeners["*"]),i=0,a=o.length;i<a;i++)if(r=o[i].call(n,t,e))return r}function G(e,t,n){var r,o,i,a,s,l,u,c=this,p={},f=e.style,d=e.nodeType&&Be(e),h=ge._data(e,"fxshow");n.queue||(s=ge._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,c.always(function(){c.always(function(){s.unqueued--,ge.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],u=ge.css(e,"display"),"inline"===("none"===u?ge._data(e,"olddisplay")||D(e.nodeName):u)&&"none"===ge.css(e,"float")&&(me.inlineBlockNeedsLayout&&"inline"!==D(e.nodeName)?f.zoom=1:f.display="inline-block")),n.overflow&&(f.overflow="hidden",me.shrinkWrapBlocks()||c.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}));for(r in t)if(o=t[r],Tt.exec(o)){if(delete t[r],i=i||"toggle"===o,o===(d?"hide":"show")){if("show"!==o||!h||void 0===h[r])continue;d=!0}p[r]=h&&h[r]||ge.style(e,r)}else u=void 0;if(ge.isEmptyObject(p))"inline"===("none"===u?D(e.nodeName):u)&&(f.display=u);else{h?"hidden"in h&&(d=h.hidden):h=ge._data(e,"fxshow",{}),i&&(h.hidden=!d),d?ge(e).show():c.done(function(){ge(e).hide()}),c.done(function(){var t;ge._removeData(e,"fxshow");for(t in p)ge.style(e,t,p[t])});for(r in p)a=H(d?h[r]:0,r,c),r in h||(h[r]=a.start,d&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}}function W(e,t){var n,r,o,i,a;for(n in e)if(r=ge.camelCase(n),o=t[r],i=e[n],ge.isArray(i)&&(o=i[1],i=e[n]=i[0]),n!==r&&(e[r]=i,delete e[n]),(a=ge.cssHooks[r])&&"expand"in a){i=a.expand(i),delete e[r];for(n in i)n in e||(e[n]=i[n],t[n]=o)}else t[r]=o}function Z(e,t,n){var r,o,i=0,a=Z.prefilters.length,s=ge.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var t=Et||V(),n=Math.max(0,u.startTime+u.duration-t),r=n/u.duration||0,i=1-r,a=0,l=u.tweens.length;a<l;a++)u.tweens[a].run(i);return s.notifyWith(e,[u,i,n]),i<1&&l?n:(s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:ge.extend({},t),opts:ge.extend(!0,{specialEasing:{},easing:ge.easing._default},n),originalProperties:t,originalOptions:n,startTime:Et||V(),duration:n.duration,tweens:[],createTween:function(t,n){var r=ge.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(r),r},stop:function(t){var n=0,r=t?u.tweens.length:0;if(o)return this;for(o=!0;n<r;n++)u.tweens[n].run(1);return t?(s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u,t])):s.rejectWith(e,[u,t]),this}}),c=u.props;for(W(c,u.opts.specialEasing);i<a;i++)if(r=Z.prefilters[i].call(u,e,c,u.opts))return ge.isFunction(r.stop)&&(ge._queueHooks(u.elem,u.opts.queue).stop=ge.proxy(r.stop,r)),r;return ge.map(c,H,u),ge.isFunction(u.opts.start)&&u.opts.start.call(e,u),ge.fx.timer(ge.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function Y(e){return ge.attr(e,"class")||""}function X(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,o=0,i=t.toLowerCase().match(Ie)||[];if(ge.isFunction(n))for(;r=i[o++];)"+"===r.charAt(0)?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function K(e,t,n,r){function o(s){var l;return i[s]=!0,ge.each(e[s]||[],function(e,s){var u=s(t,n,r);return"string"!=typeof u||a||i[u]?a?!(l=u):void 0:(t.dataTypes.unshift(u),o(u),!1)}),l}var i={},a=e===en;return o(t.dataTypes[0])||!i["*"]&&o("*")}function Q(e,t){var n,r,o=ge.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((o[r]?e:n||(n={}))[r]=t[r]);return n&&ge.extend(!0,e,n),e}function J(e,t,n){for(var r,o,i,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===o&&(o=e.mimeType||t.getResponseHeader("Content-Type"));if(o)for(a in s)if(s[a]&&s[a].test(o)){l.unshift(a);break}if(l[0]in n)i=l[0];else{for(a in n){if(!l[0]||e.converters[a+" "+l[0]]){i=a;break}r||(r=a)}i=i||r}if(i)return i!==l[0]&&l.unshift(i),n[i]}function $(e,t,n,r){var o,i,a,s,l,u={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];for(i=c.shift();i;)if(e.responseFields[i]&&(n[e.responseFields[i]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=i,i=c.shift())if("*"===i)i=l;else if("*"!==l&&l!==i){if(!(a=u[l+" "+i]||u["* "+i]))for(o in u)if(s=o.split(" "),s[1]===i&&(a=u[l+" "+s[0]]||u["* "+s[0]])){!0===a?a=u[o]:!0!==u[o]&&(i=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+i}}}return{state:"success",data:t}}function ee(e){return e.style&&e.style.display||ge.css(e,"display")}function te(e){if(!ge.contains(e.ownerDocument||se,e))return!0;for(;e&&1===e.nodeType;){if("none"===ee(e)||"hidden"===e.type)return!0;e=e.parentNode}return!1}function ne(e,t,n,r){var o;if(ge.isArray(t))ge.each(t,function(t,o){n||an.test(e)?r(e,o):ne(e+"["+("object"==typeof o&&null!=o?t:"")+"]",o,n,r)});else if(n||"object"!==ge.type(t))r(e,t);else for(o in t)ne(e+"["+o+"]",t[o],n,r)}function re(){try{return new n.XMLHttpRequest}catch(e){}}function oe(){try{return new n.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function ie(e){return ge.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}var ae=[],se=n.document,le=ae.slice,ue=ae.concat,ce=ae.push,pe=ae.indexOf,fe={},de=fe.toString,he=fe.hasOwnProperty,me={},ge=function(e,t){return new ge.fn.init(e,t)},ve=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ye=/^-ms-/,be=/-([\da-z])/gi,we=function(e,t){return t.toUpperCase()};ge.fn=ge.prototype={jquery:"1.12.4",constructor:ge,selector:"",length:0,toArray:function(){return le.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:le.call(this)},pushStack:function(e){var t=ge.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return ge.each(this,e)},map:function(e){return this.pushStack(ge.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(le.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:ce,sort:ae.sort,splice:ae.splice},ge.extend=ge.fn.extend=function(){var e,t,n,r,o,i,a=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"==typeof a||ge.isFunction(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(o=arguments[s]))for(r in o)e=a[r],n=o[r],a!==n&&(u&&n&&(ge.isPlainObject(n)||(t=ge.isArray(n)))?(t?(t=!1,i=e&&ge.isArray(e)?e:[]):i=e&&ge.isPlainObject(e)?e:{},a[r]=ge.extend(u,i,n)):void 0!==n&&(a[r]=n));return a},ge.extend({expando:"jQuery"+("1.12.4"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===ge.type(e)},isArray:Array.isArray||function(e){return"array"===ge.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){var t=e&&e.toString();return!ge.isArray(e)&&t-parseFloat(t)+1>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==ge.type(e)||e.nodeType||ge.isWindow(e))return!1;try{if(e.constructor&&!he.call(e,"constructor")&&!he.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}if(!me.ownFirst)for(t in e)return he.call(e,t);for(t in e);return void 0===t||he.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?fe[de.call(e)]||"object":typeof e},globalEval:function(e){e&&ge.trim(e)&&(n.execScript||function(e){n.eval.call(n,e)})(e)},camelCase:function(e){return e.replace(ye,"ms-").replace(be,we)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var n,r=0;if(a(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(ve,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(a(Object(e))?ge.merge(n,"string"==typeof e?[e]:e):ce.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(pe)return pe.call(t,e,n);for(r=t.length,n=n?n<0?Math.max(0,r+n):n:0;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){for(var n=+t.length,r=0,o=e.length;r<n;)e[o++]=t[r++];if(n!==n)for(;void 0!==t[r];)e[o++]=t[r++];return e.length=o,e},grep:function(e,t,n){for(var r=[],o=0,i=e.length,a=!n;o<i;o++)!t(e[o],o)!==a&&r.push(e[o]);return r},map:function(e,t,n){var r,o,i=0,s=[];if(a(e))for(r=e.length;i<r;i++)null!=(o=t(e[i],i,n))&&s.push(o);else for(i in e)null!=(o=t(e[i],i,n))&&s.push(o);return ue.apply([],s)},guid:1,proxy:function(e,t){var n,r,o;if("string"==typeof t&&(o=e[t],t=e,e=o),ge.isFunction(e))return n=le.call(arguments,2),r=function(){return e.apply(t||this,n.concat(le.call(arguments)))},r.guid=e.guid=e.guid||ge.guid++,r},now:function(){return+new Date},support:me}),"function"==typeof Symbol&&(ge.fn[Symbol.iterator]=ae[Symbol.iterator]),ge.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){fe["[object "+t+"]"]=t.toLowerCase()});var xe=function(e){function t(e,t,n,r){var o,i,a,s,u,p,f,d,h=t&&t.ownerDocument,m=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==m&&9!==m&&11!==m)return n;if(!r&&((t?t.ownerDocument||t:L)!==O&&T(t),t=t||O,P)){if(11!==m&&(p=me.exec(e)))if(o=p[1]){if(9===m){if(!(a=t.getElementById(o)))return n;if(a.id===o)return n.push(a),n}else if(h&&(a=h.getElementById(o))&&R(t,a)&&a.id===o)return n.push(a),n}else{if(p[2])return K.apply(n,t.getElementsByTagName(e)),n;if((o=p[3])&&b.getElementsByClassName&&t.getElementsByClassName)return K.apply(n,t.getElementsByClassName(o)),n}if(b.qsa&&!U[e+" "]&&(!j||!j.test(e))){if(1!==m)h=t,d=e;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(ve,"\\$&"):t.setAttribute("id",s=F),f=S(e),i=f.length,u=ce.test(s)?"#"+s:"[id='"+s+"']";i--;)f[i]=u+" "+c(f[i]);d=f.join(","),h=ge.test(e)&&l(t.parentNode)||t}if(d)try{return K.apply(n,h.querySelectorAll(d)),n}catch(e){}finally{s===F&&t.removeAttribute("id")}}}return k(e.replace(ie,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>w.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[F]=!0,e}function o(e){var t=O.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function i(e,t){for(var n=e.split("|"),r=n.length;r--;)w.attrHandle[n[r]]=t}function a(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||G)-(~e.sourceIndex||G);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return r(function(t){return t=+t,r(function(n,r){for(var o,i=e([],n.length,t),a=i.length;a--;)n[o=i[a]]&&(n[o]=!(r[o]=n[o]))})})}function l(e){return e&&void 0!==e.getElementsByTagName&&e}function u(){}function c(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function p(e,t,n){var r=t.dir,o=n&&"parentNode"===r,i=B++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||o)return e(t,n,i)}:function(t,n,a){var s,l,u,c=[z,i];if(a){for(;t=t[r];)if((1===t.nodeType||o)&&e(t,n,a))return!0}else for(;t=t[r];)if(1===t.nodeType||o){if(u=t[F]||(t[F]={}),l=u[t.uniqueID]||(u[t.uniqueID]={}),(s=l[r])&&s[0]===z&&s[1]===i)return c[2]=s[2];if(l[r]=c,c[2]=e(t,n,a))return!0}}}function f(e){return e.length>1?function(t,n,r){for(var o=e.length;o--;)if(!e[o](t,n,r))return!1;return!0}:e[0]}function d(e,n,r){for(var o=0,i=n.length;o<i;o++)t(e,n[o],r);return r}function h(e,t,n,r,o){for(var i,a=[],s=0,l=e.length,u=null!=t;s<l;s++)(i=e[s])&&(n&&!n(i,r,o)||(a.push(i),u&&t.push(s)));return a}function m(e,t,n,o,i,a){return o&&!o[F]&&(o=m(o)),i&&!i[F]&&(i=m(i,a)),r(function(r,a,s,l){var u,c,p,f=[],m=[],g=a.length,v=r||d(t||"*",s.nodeType?[s]:s,[]),y=!e||!r&&t?v:h(v,f,e,s,l),b=n?i||(r?e:g||o)?[]:a:y;if(n&&n(y,b,s,l),o)for(u=h(b,m),o(u,[],s,l),c=u.length;c--;)(p=u[c])&&(b[m[c]]=!(y[m[c]]=p));if(r){if(i||e){if(i){for(u=[],c=b.length;c--;)(p=b[c])&&u.push(y[c]=p);i(null,b=[],u,l)}for(c=b.length;c--;)(p=b[c])&&(u=i?J(r,p):f[c])>-1&&(r[u]=!(a[u]=p))}}else b=h(b===a?b.splice(g,b.length):b),i?i(null,a,b,l):K.apply(a,b)})}function g(e){for(var t,n,r,o=e.length,i=w.relative[e[0].type],a=i||w.relative[" "],s=i?1:0,l=p(function(e){return e===t},a,!0),u=p(function(e){return J(t,e)>-1},a,!0),d=[function(e,n,r){var o=!i&&(r||n!==A)||((t=n).nodeType?l(e,n,r):u(e,n,r));return t=null,o}];s<o;s++)if(n=w.relative[e[s].type])d=[p(f(d),n)];else{if(n=w.filter[e[s].type].apply(null,e[s].matches),n[F]){for(r=++s;r<o&&!w.relative[e[r].type];r++);return m(s>1&&f(d),s>1&&c(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(ie,"$1"),n,s<r&&g(e.slice(s,r)),r<o&&g(e=e.slice(r)),r<o&&c(e))}d.push(n)}return f(d)}function v(e,n){var o=n.length>0,i=e.length>0,a=function(r,a,s,l,u){var c,p,f,d=0,m="0",g=r&&[],v=[],y=A,b=r||i&&w.find.TAG("*",u),x=z+=null==y?1:Math.random()||.1,_=b.length;for(u&&(A=a===O||a||u);m!==_&&null!=(c=b[m]);m++){if(i&&c){for(p=0,a||c.ownerDocument===O||(T(c),s=!P);f=e[p++];)if(f(c,a||O,s)){l.push(c);break}u&&(z=x)}o&&((c=!f&&c)&&d--,r&&g.push(c))}if(d+=m,o&&m!==d){for(p=0;f=n[p++];)f(g,v,a,s);if(r){if(d>0)for(;m--;)g[m]||v[m]||(v[m]=Y.call(l));v=h(v)}K.apply(l,v),u&&!r&&v.length>0&&d+n.length>1&&t.uniqueSort(l)}return u&&(z=x,A=y),g};return o?r(a):a}var y,b,w,x,_,S,C,k,A,E,M,T,O,I,P,j,D,N,R,F="sizzle"+1*new Date,L=e.document,z=0,B=0,q=n(),V=n(),U=n(),H=function(e,t){return e===t&&(M=!0),0},G=1<<31,W={}.hasOwnProperty,Z=[],Y=Z.pop,X=Z.push,K=Z.push,Q=Z.slice,J=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},$="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ee="[\\x20\\t\\r\\n\\f]",te="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ne="\\["+ee+"*("+te+")(?:"+ee+"*([*^$|!~]?=)"+ee+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+te+"))|)"+ee+"*\\]",re=":("+te+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ne+")*)|.*)\\)|)",oe=new RegExp(ee+"+","g"),ie=new RegExp("^"+ee+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ee+"+$","g"),ae=new RegExp("^"+ee+"*,"+ee+"*"),se=new RegExp("^"+ee+"*([>+~]|"+ee+")"+ee+"*"),le=new RegExp("="+ee+"*([^\\]'\"]*?)"+ee+"*\\]","g"),ue=new RegExp(re),ce=new RegExp("^"+te+"$"),pe={ID:new RegExp("^#("+te+")"),CLASS:new RegExp("^\\.("+te+")"),TAG:new RegExp("^("+te+"|[*])"),ATTR:new RegExp("^"+ne),PSEUDO:new RegExp("^"+re),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ee+"*(even|odd|(([+-]|)(\\d*)n|)"+ee+"*(?:([+-]|)"+ee+"*(\\d+)|))"+ee+"*\\)|)","i"),bool:new RegExp("^(?:"+$+")$","i"),needsContext:new RegExp("^"+ee+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ee+"*((?:-\\d)?\\d*)"+ee+"*\\)|)(?=[^-]|$)","i")},fe=/^(?:input|select|textarea|button)$/i,de=/^h\d$/i,he=/^[^{]+\{\s*\[native \w/,me=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ge=/[+~]/,ve=/'|\\/g,ye=new RegExp("\\\\([\\da-f]{1,6}"+ee+"?|("+ee+")|.)","ig"),be=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},we=function(){T()};try{K.apply(Z=Q.call(L.childNodes),L.childNodes),Z[L.childNodes.length].nodeType}catch(e){K={apply:Z.length?function(e,t){X.apply(e,Q.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}b=t.support={},_=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},T=t.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:L;return r!==O&&9===r.nodeType&&r.documentElement?(O=r,I=O.documentElement,P=!_(O),(n=O.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",we,!1):n.attachEvent&&n.attachEvent("onunload",we)),b.attributes=o(function(e){return e.className="i",!e.getAttribute("className")}),b.getElementsByTagName=o(function(e){return e.appendChild(O.createComment("")),!e.getElementsByTagName("*").length}),b.getElementsByClassName=he.test(O.getElementsByClassName),b.getById=o(function(e){return I.appendChild(e).id=F,!O.getElementsByName||!O.getElementsByName(F).length}),b.getById?(w.find.ID=function(e,t){if(void 0!==t.getElementById&&P){var n=t.getElementById(e);return n?[n]:[]}},w.filter.ID=function(e){var t=e.replace(ye,be);return function(e){return e.getAttribute("id")===t}}):(delete w.find.ID,w.filter.ID=function(e){var t=e.replace(ye,be);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),w.find.TAG=b.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):b.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],o=0,i=t.getElementsByTagName(e);if("*"===e){for(;n=i[o++];)1===n.nodeType&&r.push(n);return r}return i},w.find.CLASS=b.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&P)return t.getElementsByClassName(e)},D=[],j=[],(b.qsa=he.test(O.querySelectorAll))&&(o(function(e){I.appendChild(e).innerHTML="<a id='"+F+"'></a><select id='"+F+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&j.push("[*^$]="+ee+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||j.push("\\["+ee+"*(?:value|"+$+")"),e.querySelectorAll("[id~="+F+"-]").length||j.push("~="),e.querySelectorAll(":checked").length||j.push(":checked"),e.querySelectorAll("a#"+F+"+*").length||j.push(".#.+[+~]")}),o(function(e){var t=O.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&j.push("name"+ee+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||j.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),j.push(",.*:")})),(b.matchesSelector=he.test(N=I.matches||I.webkitMatchesSelector||I.mozMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&o(function(e){b.disconnectedMatch=N.call(e,"div"),N.call(e,"[s!='']:x"),D.push("!=",re)}),j=j.length&&new RegExp(j.join("|")),D=D.length&&new RegExp(D.join("|")),t=he.test(I.compareDocumentPosition),R=t||he.test(I.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},H=t?function(e,t){if(e===t)return M=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!b.sortDetached&&t.compareDocumentPosition(e)===n?e===O||e.ownerDocument===L&&R(L,e)?-1:t===O||t.ownerDocument===L&&R(L,t)?1:E?J(E,e)-J(E,t):0:4&n?-1:1)}:function(e,t){if(e===t)return M=!0,0;var n,r=0,o=e.parentNode,i=t.parentNode,s=[e],l=[t];if(!o||!i)return e===O?-1:t===O?1:o?-1:i?1:E?J(E,e)-J(E,t):0;if(o===i)return a(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;s[r]===l[r];)r++;return r?a(s[r],l[r]):s[r]===L?-1:l[r]===L?1:0},O):O},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==O&&T(e),n=n.replace(le,"='$1']"),b.matchesSelector&&P&&!U[n+" "]&&(!D||!D.test(n))&&(!j||!j.test(n)))try{var r=N.call(e,n);if(r||b.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return t(n,O,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==O&&T(e),R(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==O&&T(e);var n=w.attrHandle[t.toLowerCase()],r=n&&W.call(w.attrHandle,t.toLowerCase())?n(e,t,!P):void 0;return void 0!==r?r:b.attributes||!P?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,o=0;if(M=!b.detectDuplicates,E=!b.sortStable&&e.slice(0),e.sort(H),M){for(;t=e[o++];)t===e[o]&&(r=n.push(o));for(;r--;)e.splice(n[r],1)}return E=null,e},x=t.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=x(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[r++];)n+=x(t);return n},w=t.selectors={cacheLength:50,createPseudo:r,match:pe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ye,be),e[3]=(e[3]||e[4]||e[5]||"").replace(ye,be),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return pe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&ue.test(n)&&(t=S(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ye,be).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=q[e+" "];return t||(t=new RegExp("(^|"+ee+")"+e+"("+ee+"|$)"))&&q(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(o){var i=t.attr(o,e);return null==i?"!="===n:!n||(i+="","="===n?i===r:"!="===n?i!==r:"^="===n?r&&0===i.indexOf(r):"*="===n?r&&i.indexOf(r)>-1:"$="===n?r&&i.slice(-r.length)===r:"~="===n?(" "+i.replace(oe," ")+" ").indexOf(r)>-1:"|="===n&&(i===r||i.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,n,r,o){var i="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===o?function(e){return!!e.parentNode}:function(t,n,l){var u,c,p,f,d,h,m=i!==a?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!l&&!s,b=!1;if(g){if(i){for(;m;){for(f=t;f=f[m];)if(s?f.nodeName.toLowerCase()===v:1===f.nodeType)return!1;h=m="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?g.firstChild:g.lastChild],a&&y){for(f=g,p=f[F]||(f[F]={}),c=p[f.uniqueID]||(p[f.uniqueID]={}),u=c[e]||[],d=u[0]===z&&u[1],b=d&&u[2],f=d&&g.childNodes[d];f=++d&&f&&f[m]||(b=d=0)||h.pop();)if(1===f.nodeType&&++b&&f===t){c[e]=[z,d,b];break}}else if(y&&(f=t,p=f[F]||(f[F]={}),c=p[f.uniqueID]||(p[f.uniqueID]={}),u=c[e]||[],d=u[0]===z&&u[1],b=d),!1===b)for(;(f=++d&&f&&f[m]||(b=d=0)||h.pop())&&((s?f.nodeName.toLowerCase()!==v:1!==f.nodeType)||!++b||(y&&(p=f[F]||(f[F]={}),c=p[f.uniqueID]||(p[f.uniqueID]={}),c[e]=[z,b]),f!==t)););return(b-=o)===r||b%r==0&&b/r>=0}}},PSEUDO:function(e,n){var o,i=w.pseudos[e]||w.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return i[F]?i(n):i.length>1?(o=[e,e,"",n],w.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,o=i(e,n),a=o.length;a--;)r=J(e,o[a]),e[r]=!(t[r]=o[a])}):function(e){return i(e,0,o)}):i}},pseudos:{not:r(function(e){var t=[],n=[],o=C(e.replace(ie,"$1"));return o[F]?r(function(e,t,n,r){for(var i,a=o(e,null,r,[]),s=e.length;s--;)(i=a[s])&&(e[s]=!(t[s]=i))}):function(e,r,i){return t[0]=e,o(t,null,i,n),t[0]=null,!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return e=e.replace(ye,be),function(t){return(t.textContent||t.innerText||x(t)).indexOf(e)>-1}}),lang:r(function(e){return ce.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(ye,be).toLowerCase(),function(t){var n;do{if(n=P?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===I},focus:function(e){return e===O.activeElement&&(!O.hasFocus||O.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!w.pseudos.empty(e)},header:function(e){return de.test(e.nodeName)},input:function(e){return fe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:s(function(){return[0]}),last:s(function(e,t){return[t-1]}),eq:s(function(e,t,n){return[n<0?n+t:n]}),even:s(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:s(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:s(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:s(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},w.pseudos.nth=w.pseudos.eq;for(y in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[y]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(y);for(y in{submit:!0,reset:!0})w.pseudos[y]=function(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}(y);return u.prototype=w.filters=w.pseudos,w.setFilters=new u,S=t.tokenize=function(e,n){var r,o,i,a,s,l,u,c=V[e+" "];if(c)return n?0:c.slice(0);for(s=e,l=[],u=w.preFilter;s;){r&&!(o=ae.exec(s))||(o&&(s=s.slice(o[0].length)||s),l.push(i=[])),r=!1,(o=se.exec(s))&&(r=o.shift(),i.push({value:r,type:o[0].replace(ie," ")}),s=s.slice(r.length));for(a in w.filter)!(o=pe[a].exec(s))||u[a]&&!(o=u[a](o))||(r=o.shift(),i.push({value:r,type:a,matches:o}),s=s.slice(r.length));if(!r)break}return n?s.length:s?t.error(e):V(e,l).slice(0)},C=t.compile=function(e,t){var n,r=[],o=[],i=U[e+" "];if(!i){for(t||(t=S(e)),n=t.length;n--;)i=g(t[n]),i[F]?r.push(i):o.push(i);i=U(e,v(o,r)),i.selector=e}return i},k=t.select=function(e,t,n,r){var o,i,a,s,u,p="function"==typeof e&&e,f=!r&&S(e=p.selector||e);if(n=n||[],1===f.length){if(i=f[0]=f[0].slice(0),i.length>2&&"ID"===(a=i[0]).type&&b.getById&&9===t.nodeType&&P&&w.relative[i[1].type]){if(!(t=(w.find.ID(a.matches[0].replace(ye,be),t)||[])[0]))return n;p&&(t=t.parentNode),e=e.slice(i.shift().value.length)}for(o=pe.needsContext.test(e)?0:i.length;o--&&(a=i[o],!w.relative[s=a.type]);)if((u=w.find[s])&&(r=u(a.matches[0].replace(ye,be),ge.test(i[0].type)&&l(t.parentNode)||t))){if(i.splice(o,1),!(e=r.length&&c(i)))return K.apply(n,r),n;break}}return(p||C(e,f))(r,t,!P,n,!t||ge.test(e)&&l(t.parentNode)||t),n},b.sortStable=F.split("").sort(H).join("")===F,b.detectDuplicates=!!M,T(),b.sortDetached=o(function(e){return 1&e.compareDocumentPosition(O.createElement("div"))}),o(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||i("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),b.attributes&&o(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||i("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),o(function(e){return null==e.getAttribute("disabled")})||i($,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(n);ge.find=xe,ge.expr=xe.selectors,ge.expr[":"]=ge.expr.pseudos,ge.uniqueSort=ge.unique=xe.uniqueSort,ge.text=xe.getText,ge.isXMLDoc=xe.isXML,ge.contains=xe.contains;var _e=function(e,t,n){for(var r=[],o=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&ge(e).is(n))break;r.push(e)}return r},Se=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},Ce=ge.expr.match.needsContext,ke=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Ae=/^.[^:#\[\.,]*$/;ge.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?ge.find.matchesSelector(r,e)?[r]:[]:ge.find.matches(e,ge.grep(t,function(e){return 1===e.nodeType}))},ge.fn.extend({find:function(e){var t,n=[],r=this,o=r.length;if("string"!=typeof e)return this.pushStack(ge(e).filter(function(){for(t=0;t<o;t++)if(ge.contains(r[t],this))return!0}));for(t=0;t<o;t++)ge.find(e,r[t],n);return n=this.pushStack(o>1?ge.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(s(this,e||[],!1))},not:function(e){return this.pushStack(s(this,e||[],!0))},is:function(e){return!!s(this,"string"==typeof e&&Ce.test(e)?ge(e):e||[],!1).length}});var Ee,Me=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(ge.fn.init=function(e,t,n){var r,o;if(!e)return this;if(n=n||Ee,"string"==typeof e){if(!(r="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:Me.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof ge?t[0]:t,ge.merge(this,ge.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:se,!0)),ke.test(r[1])&&ge.isPlainObject(t))for(r in t)ge.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}if((o=se.getElementById(r[2]))&&o.parentNode){if(o.id!==r[2])return Ee.find(e);this.length=1,this[0]=o}return this.context=se,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):ge.isFunction(e)?void 0!==n.ready?n.ready(e):e(ge):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),ge.makeArray(e,this))}).prototype=ge.fn,Ee=ge(se);var Te=/^(?:parents|prev(?:Until|All))/,Oe={children:!0,contents:!0,next:!0,prev:!0};ge.fn.extend({has:function(e){var t,n=ge(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(ge.contains(this,n[t]))return!0})},closest:function(e,t){for(var n,r=0,o=this.length,i=[],a=Ce.test(e)||"string"!=typeof e?ge(e,t||this.context):0;r<o;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&ge.find.matchesSelector(n,e))){i.push(n);break}return this.pushStack(i.length>1?ge.uniqueSort(i):i)},index:function(e){return e?"string"==typeof e?ge.inArray(this[0],ge(e)):ge.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ge.uniqueSort(ge.merge(this.get(),ge(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ge.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return _e(e,"parentNode")},parentsUntil:function(e,t,n){return _e(e,"parentNode",n)},next:function(e){return l(e,"nextSibling")},prev:function(e){return l(e,"previousSibling")},nextAll:function(e){return _e(e,"nextSibling")},prevAll:function(e){return _e(e,"previousSibling")},nextUntil:function(e,t,n){return _e(e,"nextSibling",n)},prevUntil:function(e,t,n){return _e(e,"previousSibling",n)},siblings:function(e){return Se((e.parentNode||{}).firstChild,e)},children:function(e){return Se(e.firstChild)},contents:function(e){return ge.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:ge.merge([],e.childNodes)}},function(e,t){ge.fn[e]=function(n,r){var o=ge.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(o=ge.filter(r,o)),this.length>1&&(Oe[e]||(o=ge.uniqueSort(o)),Te.test(e)&&(o=o.reverse())),this.pushStack(o)}});var Ie=/\S+/g;ge.Callbacks=function(e){e="string"==typeof e?u(e):ge.extend({},e);var t,n,r,o,i=[],a=[],s=-1,l=function(){for(o=e.once,r=t=!0;a.length;s=-1)for(n=a.shift();++s<i.length;)!1===i[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=i.length,n=!1);e.memory||(n=!1),t=!1,o&&(i=n?[]:"")},c={add:function(){return i&&(n&&!t&&(s=i.length-1,a.push(n)),function t(n){ge.each(n,function(n,r){ge.isFunction(r)?e.unique&&c.has(r)||i.push(r):r&&r.length&&"string"!==ge.type(r)&&t(r)})}(arguments),n&&!t&&l()),this},remove:function(){return ge.each(arguments,function(e,t){for(var n;(n=ge.inArray(t,i,n))>-1;)i.splice(n,1),n<=s&&s--}),this},has:function(e){return e?ge.inArray(e,i)>-1:i.length>0},empty:function(){return i&&(i=[]),this},disable:function(){return o=a=[],i=n="",this},disabled:function(){return!i},lock:function(){return o=!0,n||c.disable(),this},locked:function(){return!!o},fireWith:function(e,n){return o||(n=n||[],n=[e,n.slice?n.slice():n],a.push(n),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},ge.extend({Deferred:function(e){var t=[["resolve","done",ge.Callbacks("once memory"),"resolved"],["reject","fail",ge.Callbacks("once memory"),"rejected"],["notify","progress",ge.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return ge.Deferred(function(n){ge.each(t,function(t,i){var a=ge.isFunction(e[t])&&e[t];o[i[1]](function(){var e=a&&a.apply(this,arguments);e&&ge.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[i[0]+"With"](this===r?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?ge.extend(e,r):r}},o={};return r.pipe=r.then,ge.each(t,function(e,i){var a=i[2],s=i[3];r[i[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),o[i[0]]=function(){return o[i[0]+"With"](this===o?r:this,arguments),this},o[i[0]+"With"]=a.fireWith}),r.promise(o),e&&e.call(o,o),o},when:function(e){var t,n,r,o=0,i=le.call(arguments),a=i.length,s=1!==a||e&&ge.isFunction(e.promise)?a:0,l=1===s?e:ge.Deferred(),u=function(e,n,r){return function(o){n[e]=this,r[e]=arguments.length>1?le.call(arguments):o,r===t?l.notifyWith(n,r):--s||l.resolveWith(n,r)}};if(a>1)for(t=new Array(a),n=new Array(a),r=new Array(a);o<a;o++)i[o]&&ge.isFunction(i[o].promise)?i[o].promise().progress(u(o,n,t)).done(u(o,r,i)).fail(l.reject):--s;return s||l.resolveWith(r,i),l.promise()}});var Pe;ge.fn.ready=function(e){return ge.ready.promise().done(e),this},ge.extend({isReady:!1,readyWait:1,holdReady:function(e){e?ge.readyWait++:ge.ready(!0)},ready:function(e){(!0===e?--ge.readyWait:ge.isReady)||(ge.isReady=!0,!0!==e&&--ge.readyWait>0||(Pe.resolveWith(se,[ge]),ge.fn.triggerHandler&&(ge(se).triggerHandler("ready"),ge(se).off("ready"))))}}),ge.ready.promise=function(e){if(!Pe)if(Pe=ge.Deferred(),"complete"===se.readyState||"loading"!==se.readyState&&!se.documentElement.doScroll)n.setTimeout(ge.ready);else if(se.addEventListener)se.addEventListener("DOMContentLoaded",p),n.addEventListener("load",p);else{se.attachEvent("onreadystatechange",p),n.attachEvent("onload",p);var t=!1;try{t=null==n.frameElement&&se.documentElement}catch(e){}t&&t.doScroll&&function e(){if(!ge.isReady){try{t.doScroll("left")}catch(t){return n.setTimeout(e,50)}c(),ge.ready()}}()}return Pe.promise(e)},ge.ready.promise();var je;for(je in ge(me))break;me.ownFirst="0"===je,me.inlineBlockNeedsLayout=!1,ge(function(){var e,t,n,r;(n=se.getElementsByTagName("body")[0])&&n.style&&(t=se.createElement("div"),r=se.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),void 0!==t.style.zoom&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",me.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(n.style.zoom=1)),n.removeChild(r))}),function(){var e=se.createElement("div");me.deleteExpando=!0;try{delete e.test}catch(e){me.deleteExpando=!1}e=null}();var De=function(e){var t=ge.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return(1===n||9===n)&&(!t||!0!==t&&e.getAttribute("classid")===t)},Ne=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Re=/([A-Z])/g;ge.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return!!(e=e.nodeType?ge.cache[e[ge.expando]]:e[ge.expando])&&!d(e)},data:function(e,t,n){return h(e,t,n)},removeData:function(e,t){return m(e,t)},_data:function(e,t,n){return h(e,t,n,!0)},_removeData:function(e,t){return m(e,t,!0)}}),ge.fn.extend({data:function(e,t){var n,r,o,i=this[0],a=i&&i.attributes;if(void 0===e){if(this.length&&(o=ge.data(i),1===i.nodeType&&!ge._data(i,"parsedAttrs"))){for(n=a.length;n--;)a[n]&&(r=a[n].name,0===r.indexOf("data-")&&(r=ge.camelCase(r.slice(5)),f(i,r,o[r])));ge._data(i,"parsedAttrs",!0)}return o}return"object"==typeof e?this.each(function(){ge.data(this,e)}):arguments.length>1?this.each(function(){ge.data(this,e,t)}):i?f(i,e,ge.data(i,e)):void 0},removeData:function(e){return this.each(function(){ge.removeData(this,e)})}}),ge.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=ge._data(e,t),n&&(!r||ge.isArray(n)?r=ge._data(e,t,ge.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=ge.queue(e,t),r=n.length,o=n.shift(),i=ge._queueHooks(e,t),a=function(){ge.dequeue(e,t)};"inprogress"===o&&(o=n.shift(),r--),o&&("fx"===t&&n.unshift("inprogress"),delete i.stop,o.call(e,a,i)),!r&&i&&i.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ge._data(e,n)||ge._data(e,n,{empty:ge.Callbacks("once memory").add(function(){ge._removeData(e,t+"queue"),ge._removeData(e,n)})})}}),ge.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?ge.queue(this[0],e):void 0===t?this:this.each(function(){var n=ge.queue(this,e,t);ge._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&ge.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ge.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,o=ge.Deferred(),i=this,a=this.length,s=function(){--r||o.resolveWith(i,[i])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=ge._data(i[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),o.promise(t)}}),function(){var e;me.shrinkWrapBlocks=function(){if(null!=e)return e;e=!1;var t,n,r;return(n=se.getElementsByTagName("body")[0])&&n.style?(t=se.createElement("div"),r=se.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),void 0!==t.style.zoom&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(se.createElement("div")).style.width="5px",e=3!==t.offsetWidth),n.removeChild(r),e):void 0}}();var Fe=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Le=new RegExp("^(?:([+-])=|)("+Fe+")([a-z%]*)$","i"),ze=["Top","Right","Bottom","Left"],Be=function(e,t){return e=t||e,"none"===ge.css(e,"display")||!ge.contains(e.ownerDocument,e)},qe=function(e,t,n,r,o,i,a){var s=0,l=e.length,u=null==n;if("object"===ge.type(n)){o=!0;for(s in n)qe(e,t,s,n[s],!0,i,a)}else if(void 0!==r&&(o=!0,ge.isFunction(r)||(a=!0),u&&(a?(t.call(e,r),t=null):(u=t,t=function(e,t,n){return u.call(ge(e),n)})),t))for(;s<l;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return o?e:u?t.call(e):l?t(e[0],n):i},Ve=/^(?:checkbox|radio)$/i,Ue=/<([\w:-]+)/,He=/^$|\/(?:java|ecma)script/i,Ge=/^\s+/,We="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video";!function(){var e=se.createElement("div"),t=se.createDocumentFragment(),n=se.createElement("input");e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",me.leadingWhitespace=3===e.firstChild.nodeType,me.tbody=!e.getElementsByTagName("tbody").length,me.htmlSerialize=!!e.getElementsByTagName("link").length,me.html5Clone="<:nav></:nav>"!==se.createElement("nav").cloneNode(!0).outerHTML,n.type="checkbox",n.checked=!0,t.appendChild(n),me.appendChecked=n.checked,e.innerHTML="<textarea>x</textarea>",me.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,t.appendChild(e),n=se.createElement("input"),n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),me.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,me.noCloneEvent=!!e.addEventListener,e[ge.expando]=1,me.attributes=!e.getAttribute(ge.expando)}();var Ze={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:me.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]};Ze.optgroup=Ze.option,Ze.tbody=Ze.tfoot=Ze.colgroup=Ze.caption=Ze.thead,Ze.th=Ze.td;var Ye=/<|&#?\w+;/,Xe=/<tbody/i;!function(){var e,t,r=se.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})t="on"+e,(me[e]=t in n)||(r.setAttribute(t,"t"),me[e]=!1===r.attributes[t].expando);r=null}();var Ke=/^(?:input|select|textarea)$/i,Qe=/^key/,Je=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,$e=/^(?:focusinfocus|focusoutblur)$/,et=/^([^.]*)(?:\.(.+)|)/;ge.event={global:{},add:function(e,t,n,r,o){var i,a,s,l,u,c,p,f,d,h,m,g=ge._data(e);if(g){for(n.handler&&(l=n,n=l.handler,o=l.selector),n.guid||(n.guid=ge.guid++),(a=g.events)||(a=g.events={}),(c=g.handle)||(c=g.handle=function(e){return void 0===ge||e&&ge.event.triggered===e.type?void 0:ge.event.dispatch.apply(c.elem,arguments)},c.elem=e),t=(t||"").match(Ie)||[""],s=t.length;s--;)i=et.exec(t[s])||[],d=m=i[1],h=(i[2]||"").split(".").sort(),d&&(u=ge.event.special[d]||{},d=(o?u.delegateType:u.bindType)||d,u=ge.event.special[d]||{},p=ge.extend({type:d,origType:m,data:r,handler:n,guid:n.guid,selector:o,needsContext:o&&ge.expr.match.needsContext.test(o),namespace:h.join(".")},l),(f=a[d])||(f=a[d]=[],f.delegateCount=0,u.setup&&!1!==u.setup.call(e,r,h,c)||(e.addEventListener?e.addEventListener(d,c,!1):e.attachEvent&&e.attachEvent("on"+d,c))),u.add&&(u.add.call(e,p),p.handler.guid||(p.handler.guid=n.guid)),o?f.splice(f.delegateCount++,0,p):f.push(p),ge.event.global[d]=!0);e=null}},remove:function(e,t,n,r,o){var i,a,s,l,u,c,p,f,d,h,m,g=ge.hasData(e)&&ge._data(e);if(g&&(c=g.events)){for(t=(t||"").match(Ie)||[""],u=t.length;u--;)if(s=et.exec(t[u])||[],d=m=s[1],h=(s[2]||"").split(".").sort(),d){for(p=ge.event.special[d]||{},d=(r?p.delegateType:p.bindType)||d,f=c[d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=i=f.length;i--;)a=f[i],!o&&m!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||r&&r!==a.selector&&("**"!==r||!a.selector)||(f.splice(i,1),a.selector&&f.delegateCount--,p.remove&&p.remove.call(e,a));l&&!f.length&&(p.teardown&&!1!==p.teardown.call(e,h,g.handle)||ge.removeEvent(e,d,g.handle),delete c[d])}else for(d in c)ge.event.remove(e,d+t[u],n,r,!0);ge.isEmptyObject(c)&&(delete g.handle,ge._removeData(e,"events"))}},trigger:function(e,t,r,o){var i,a,s,l,u,c,p,f=[r||se],d=he.call(e,"type")?e.type:e,h=he.call(e,"namespace")?e.namespace.split("."):[];if(s=c=r=r||se,3!==r.nodeType&&8!==r.nodeType&&!$e.test(d+ge.event.triggered)&&(d.indexOf(".")>-1&&(h=d.split("."),d=h.shift(),h.sort()),a=d.indexOf(":")<0&&"on"+d,e=e[ge.expando]?e:new ge.Event(d,"object"==typeof e&&e),e.isTrigger=o?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:ge.makeArray(t,[e]),u=ge.event.special[d]||{},o||!u.trigger||!1!==u.trigger.apply(r,t))){if(!o&&!u.noBubble&&!ge.isWindow(r)){for(l=u.delegateType||d,$e.test(l+d)||(s=s.parentNode);s;s=s.parentNode)f.push(s),c=s;c===(r.ownerDocument||se)&&f.push(c.defaultView||c.parentWindow||n)}for(p=0;(s=f[p++])&&!e.isPropagationStopped();)e.type=p>1?l:u.bindType||d,i=(ge._data(s,"events")||{})[e.type]&&ge._data(s,"handle"),i&&i.apply(s,t),(i=a&&s[a])&&i.apply&&De(s)&&(e.result=i.apply(s,t),!1===e.result&&e.preventDefault());if(e.type=d,!o&&!e.isDefaultPrevented()&&(!u._default||!1===u._default.apply(f.pop(),t))&&De(r)&&a&&r[d]&&!ge.isWindow(r)){c=r[a],c&&(r[a]=null),ge.event.triggered=d;try{r[d]()}catch(e){}ge.event.triggered=void 0,c&&(r[a]=c)}return e.result}},dispatch:function(e){e=ge.event.fix(e);var t,n,r,o,i,a=[],s=le.call(arguments),l=(ge._data(this,"events")||{})[e.type]||[],u=ge.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,e)){for(a=ge.event.handlers.call(this,e,l),t=0;(o=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,n=0;(i=o.handlers[n++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(i.namespace)||(e.handleObj=i,e.data=i.data,void 0!==(r=((ge.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,s))&&!1===(e.result=r)&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,o,i,a=[],s=t.delegateCount,l=e.target;if(s&&l.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==e.type)){for(r=[],n=0;n<s;n++)i=t[n],o=i.selector+" ",void 0===r[o]&&(r[o]=i.needsContext?ge(o,this).index(l)>-1:ge.find(o,this,null,[l]).length),r[o]&&r.push(i);r.length&&a.push({elem:l,handlers:r})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},fix:function(e){if(e[ge.expando])return e;var t,n,r,o=e.type,i=e,a=this.fixHooks[o];for(a||(this.fixHooks[o]=a=Je.test(o)?this.mouseHooks:Qe.test(o)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,e=new ge.Event(i),t=r.length;t--;)n=r[t],e[n]=i[n];return e.target||(e.target=i.srcElement||se),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,a.filter?a.filter(e,i):e},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,o,i=t.button,a=t.fromElement;return null==e.pageX&&null!=t.clientX&&(r=e.target.ownerDocument||se,o=r.documentElement,n=r.body,e.pageX=t.clientX+(o&&o.scrollLeft||n&&n.scrollLeft||0)-(o&&o.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(o&&o.scrollTop||n&&n.scrollTop||0)-(o&&o.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?t.toElement:a),e.which||void 0===i||(e.which=1&i?1:2&i?3:4&i?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==C()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===C()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(ge.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(e){return ge.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n){var r=ge.extend(new ge.Event,n,{type:e,isSimulated:!0});ge.event.trigger(r,null,t),r.isDefaultPrevented()&&n.preventDefault()}},ge.removeEvent=se.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)}:function(e,t,n){var r="on"+t;e.detachEvent&&(void 0===e[r]&&(e[r]=null),e.detachEvent(r,n))},ge.Event=function(e,t){if(!(this instanceof ge.Event))return new ge.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?_:S):this.type=e,t&&ge.extend(this,t),this.timeStamp=e&&e.timeStamp||ge.now(),this[ge.expando]=!0},ge.Event.prototype={constructor:ge.Event,isDefaultPrevented:S,isPropagationStopped:S,isImmediatePropagationStopped:S,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=_,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=_,e&&!this.isSimulated&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=_,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},ge.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){ge.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,o=e.relatedTarget,i=e.handleObj;return o&&(o===r||ge.contains(r,o))||(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}}),me.submit||(ge.event.special.submit={setup:function(){if(ge.nodeName(this,"form"))return!1;ge.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=ge.nodeName(t,"input")||ge.nodeName(t,"button")?ge.prop(t,"form"):void 0;n&&!ge._data(n,"submit")&&(ge.event.add(n,"submit._submit",function(e){e._submitBubble=!0}),ge._data(n,"submit",!0))})},postDispatch:function(e){e._submitBubble&&(delete e._submitBubble,this.parentNode&&!e.isTrigger&&ge.event.simulate("submit",this.parentNode,e))},teardown:function(){if(ge.nodeName(this,"form"))return!1;ge.event.remove(this,"._submit")}}),me.change||(ge.event.special.change={setup:function(){if(Ke.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(ge.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._justChanged=!0)}),ge.event.add(this,"click._change",function(e){this._justChanged&&!e.isTrigger&&(this._justChanged=!1),ge.event.simulate("change",this,e)})),!1;ge.event.add(this,"beforeactivate._change",function(e){var t=e.target;Ke.test(t.nodeName)&&!ge._data(t,"change")&&(ge.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||ge.event.simulate("change",this.parentNode,e)}),ge._data(t,"change",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type)return e.handleObj.handler.apply(this,arguments)},teardown:function(){return ge.event.remove(this,"._change"),!Ke.test(this.nodeName)}}),me.focusin||ge.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){ge.event.simulate(t,e.target,ge.event.fix(e))};ge.event.special[t]={setup:function(){var r=this.ownerDocument||this,o=ge._data(r,t);o||r.addEventListener(e,n,!0),ge._data(r,t,(o||0)+1)},teardown:function(){var r=this.ownerDocument||this,o=ge._data(r,t)-1;o?ge._data(r,t,o):(r.removeEventListener(e,n,!0),ge._removeData(r,t))}}}),ge.fn.extend({on:function(e,t,n,r){return k(this,e,t,n,r)},one:function(e,t,n,r){return k(this,e,t,n,r,1)},off:function(e,t,n){var r,o;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,ge(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=S),this.each(function(){ge.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){ge.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return ge.event.trigger(e,t,n,!0)}});var tt=/ jQuery\d+="(?:null|\d+)"/g,nt=new RegExp("<(?:"+We+")[\\s/>]","i"),rt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,ot=/<script|<style|<link/i,it=/checked\s*(?:[^=]|=\s*.checked.)/i,at=/^true\/(.*)/,st=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,lt=v(se),ut=lt.appendChild(se.createElement("div"));ge.extend({htmlPrefilter:function(e){return e.replace(rt,"<$1></$2>")},clone:function(e,t,n){var r,o,i,a,s,l=ge.contains(e.ownerDocument,e);if(me.html5Clone||ge.isXMLDoc(e)||!nt.test("<"+e.nodeName+">")?i=e.cloneNode(!0):(ut.innerHTML=e.outerHTML,ut.removeChild(i=ut.firstChild)),!(me.noCloneEvent&&me.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ge.isXMLDoc(e)))for(r=y(i),s=y(e),a=0;null!=(o=s[a]);++a)r[a]&&O(o,r[a]);if(t)if(n)for(s=s||y(e),r=r||y(i),a=0;null!=(o=s[a]);a++)T(o,r[a]);else T(e,i);return r=y(i,"script"),r.length>0&&b(r,!l&&y(e,"script")),r=s=o=null,i},cleanData:function(e,t){for(var n,r,o,i,a=0,s=ge.expando,l=ge.cache,u=me.attributes,c=ge.event.special;null!=(n=e[a]);a++)if((t||De(n))&&(o=n[s],i=o&&l[o])){if(i.events)for(r in i.events)c[r]?ge.event.remove(n,r):ge.removeEvent(n,r,i.handle);l[o]&&(delete l[o],u||void 0===n.removeAttribute?n[s]=void 0:n.removeAttribute(s),ae.push(o))}}}),ge.fn.extend({domManip:I,detach:function(e){return P(this,e,!0)},remove:function(e){return P(this,e)},text:function(e){return qe(this,function(e){return void 0===e?ge.text(this):this.empty().append((this[0]&&this[0].ownerDocument||se).createTextNode(e))},null,e,arguments.length)},append:function(){return I(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){A(this,e).appendChild(e)}})},prepend:function(){return I(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=A(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return I(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return I(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&ge.cleanData(y(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&ge.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return ge.clone(this,e,t)})},html:function(e){return qe(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(tt,""):void 0;if("string"==typeof e&&!ot.test(e)&&(me.htmlSerialize||!nt.test(e))&&(me.leadingWhitespace||!Ge.test(e))&&!Ze[(Ue.exec(e)||["",""])[1].toLowerCase()]){e=ge.htmlPrefilter(e);try{for(;n<r;n++)t=this[n]||{},1===t.nodeType&&(ge.cleanData(y(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return I(this,arguments,function(t){var n=this.parentNode;ge.inArray(this,e)<0&&(ge.cleanData(y(this)),n&&n.replaceChild(t,this))},e)}}),ge.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ge.fn[e]=function(e){for(var n,r=0,o=[],i=ge(e),a=i.length-1;r<=a;r++)n=r===a?this:this.clone(!0),ge(i[r])[t](n),ce.apply(o,n.get());return this.pushStack(o)}});var ct,pt={HTML:"block",BODY:"block"},ft=/^margin/,dt=new RegExp("^("+Fe+")(?!px)[a-z%]+$","i"),ht=function(e,t,n,r){var o,i,a={};for(i in t)a[i]=e.style[i],e.style[i]=t[i];o=n.apply(e,r||[]);for(i in t)e.style[i]=a[i];return o},mt=se.documentElement;!function(){function e(){var e,c,p=se.documentElement;p.appendChild(l),u.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",t=o=s=!1,r=a=!0,n.getComputedStyle&&(c=n.getComputedStyle(u),t="1%"!==(c||{}).top,s="2px"===(c||{}).marginLeft,o="4px"===(c||{width:"4px"}).width,u.style.marginRight="50%",r="4px"===(c||{marginRight:"4px"}).marginRight,e=u.appendChild(se.createElement("div")),e.style.cssText=u.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",e.style.marginRight=e.style.width="0",u.style.width="1px",a=!parseFloat((n.getComputedStyle(e)||{}).marginRight),u.removeChild(e)),u.style.display="none",i=0===u.getClientRects().length,i&&(u.style.display="",u.innerHTML="<table><tr><td></td><td>t</td></tr></table>",u.childNodes[0].style.borderCollapse="separate",e=u.getElementsByTagName("td"),e[0].style.cssText="margin:0;border:0;padding:0;display:none",(i=0===e[0].offsetHeight)&&(e[0].style.display="",e[1].style.display="none",i=0===e[0].offsetHeight)),p.removeChild(l)}var t,r,o,i,a,s,l=se.createElement("div"),u=se.createElement("div");u.style&&(u.style.cssText="float:left;opacity:.5",me.opacity="0.5"===u.style.opacity,me.cssFloat=!!u.style.cssFloat,u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",me.clearCloneStyle="content-box"===u.style.backgroundClip,l=se.createElement("div"),l.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",u.innerHTML="",l.appendChild(u),me.boxSizing=""===u.style.boxSizing||""===u.style.MozBoxSizing||""===u.style.WebkitBoxSizing,ge.extend(me,{reliableHiddenOffsets:function(){return null==t&&e(),i},boxSizingReliable:function(){return null==t&&e(),o},pixelMarginRight:function(){return null==t&&e(),r},pixelPosition:function(){return null==t&&e(),t},reliableMarginRight:function(){return null==t&&e(),a},reliableMarginLeft:function(){return null==t&&e(),s}}))}();var gt,vt,yt=/^(top|right|bottom|left)$/;n.getComputedStyle?(gt=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=n),t.getComputedStyle(e)},vt=function(e,t,n){var r,o,i,a,s=e.style;return n=n||gt(e),a=n?n.getPropertyValue(t)||n[t]:void 0,""!==a&&void 0!==a||ge.contains(e.ownerDocument,e)||(a=ge.style(e,t)),n&&!me.pixelMarginRight()&&dt.test(a)&&ft.test(t)&&(r=s.width,o=s.minWidth,i=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=o,s.maxWidth=i),void 0===a?a:a+""}):mt.currentStyle&&(gt=function(e){return e.currentStyle},vt=function(e,t,n){var r,o,i,a,s=e.style;return n=n||gt(e),a=n?n[t]:void 0,null==a&&s&&s[t]&&(a=s[t]),dt.test(a)&&!yt.test(t)&&(r=s.left,o=e.runtimeStyle,i=o&&o.left,i&&(o.left=e.currentStyle.left),s.left="fontSize"===t?"1em":a,a=s.pixelLeft+"px",s.left=r,i&&(o.left=i)),void 0===a?a:a+""||"auto"});var bt=/alpha\([^)]*\)/i,wt=/opacity\s*=\s*([^)]*)/i,xt=/^(none|table(?!-c[ea]).+)/,_t=new RegExp("^("+Fe+")(.*)$","i"),St={position:"absolute",visibility:"hidden",display:"block"},Ct={letterSpacing:"0",fontWeight:"400"},kt=["Webkit","O","Moz","ms"],At=se.createElement("div").style;ge.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=vt(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:me.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,i,a,s=ge.camelCase(t),l=e.style;if(t=ge.cssProps[s]||(ge.cssProps[s]=R(s)||s),a=ge.cssHooks[t]||ge.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(o=a.get(e,!1,r))?o:l[t];if(i=typeof n,"string"===i&&(o=Le.exec(n))&&o[1]&&(n=g(e,t,o),i="number"),null!=n&&n===n&&("number"===i&&(n+=o&&o[3]||(ge.cssNumber[s]?"":"px")),me.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),!(a&&"set"in a&&void 0===(n=a.set(e,n,r)))))try{l[t]=n}catch(e){}}},css:function(e,t,n,r){var o,i,a,s=ge.camelCase(t);return t=ge.cssProps[s]||(ge.cssProps[s]=R(s)||s),a=ge.cssHooks[t]||ge.cssHooks[s],a&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=vt(e,t,r)),"normal"===i&&t in Ct&&(i=Ct[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),ge.each(["height","width"],function(e,t){ge.cssHooks[t]={get:function(e,n,r){if(n)return xt.test(ge.css(e,"display"))&&0===e.offsetWidth?ht(e,St,function(){return B(e,t,r)}):B(e,t,r)},set:function(e,n,r){var o=r&&gt(e);return L(e,n,r?z(e,t,r,me.boxSizing&&"border-box"===ge.css(e,"boxSizing",!1,o),o):0)}}}),me.opacity||(ge.cssHooks.opacity={get:function(e,t){return wt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,o=ge.isNumeric(t)?"alpha(opacity="+100*t+")":"",i=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===ge.trim(i.replace(bt,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=bt.test(i)?i.replace(bt,o):i+" "+o)}}),ge.cssHooks.marginRight=N(me.reliableMarginRight,function(e,t){if(t)return ht(e,{display:"inline-block"},vt,[e,"marginRight"])}),ge.cssHooks.marginLeft=N(me.reliableMarginLeft,function(e,t){if(t)return(parseFloat(vt(e,"marginLeft"))||(ge.contains(e.ownerDocument,e)?e.getBoundingClientRect().left-ht(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}):0))+"px"}),ge.each({margin:"",padding:"",border:"Width"},function(e,t){ge.cssHooks[e+t]={expand:function(n){for(var r=0,o={},i="string"==typeof n?n.split(" "):[n];r<4;r++)o[e+ze[r]+t]=i[r]||i[r-2]||i[0];return o}},ft.test(e)||(ge.cssHooks[e+t].set=L)}),ge.fn.extend({css:function(e,t){return qe(this,function(e,t,n){var r,o,i={},a=0;if(ge.isArray(t)){for(r=gt(e),o=t.length;a<o;a++)i[t[a]]=ge.css(e,t[a],!1,r);return i}return void 0!==n?ge.style(e,t,n):ge.css(e,t)},e,t,arguments.length>1)},show:function(){return F(this,!0)},hide:function(){return F(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Be(this)?ge(this).show():ge(this).hide()})}}),ge.Tween=q,q.prototype={constructor:q,init:function(e,t,n,r,o,i){this.elem=e,this.prop=n,this.easing=o||ge.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=i||(ge.cssNumber[n]?"":"px")},cur:function(){var e=q.propHooks[this.prop];return e&&e.get?e.get(this):q.propHooks._default.get(this)},run:function(e){var t,n=q.propHooks[this.prop];return this.options.duration?this.pos=t=ge.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):q.propHooks._default.set(this),this}},q.prototype.init.prototype=q.prototype,q.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=ge.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){ge.fx.step[e.prop]?ge.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[ge.cssProps[e.prop]]&&!ge.cssHooks[e.prop]?e.elem[e.prop]=e.now:ge.style(e.elem,e.prop,e.now+e.unit)}}},q.propHooks.scrollTop=q.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ge.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},ge.fx=q.prototype.init,ge.fx.step={};var Et,Mt,Tt=/^(?:toggle|show|hide)$/,Ot=/queueHooks$/;ge.Animation=ge.extend(Z,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return g(n.elem,e,Le.exec(t),n),n}]},tweener:function(e,t){ge.isFunction(e)?(t=e,e=["*"]):e=e.match(Ie);for(var n,r=0,o=e.length;r<o;r++)n=e[r],Z.tweeners[n]=Z.tweeners[n]||[],Z.tweeners[n].unshift(t)},prefilters:[G],prefilter:function(e,t){t?Z.prefilters.unshift(e):Z.prefilters.push(e)}}),ge.speed=function(e,t,n){var r=e&&"object"==typeof e?ge.extend({},e):{complete:n||!n&&t||ge.isFunction(e)&&e,duration:e,easing:n&&t||t&&!ge.isFunction(t)&&t};return r.duration=ge.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in ge.fx.speeds?ge.fx.speeds[r.duration]:ge.fx.speeds._default,null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){ge.isFunction(r.old)&&r.old.call(this),r.queue&&ge.dequeue(this,r.queue)},r},ge.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Be).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var o=ge.isEmptyObject(e),i=ge.speed(t,n,r),a=function(){var t=Z(this,ge.extend({},e),i);(o||ge._data(this,"finish"))&&t.stop(!0)};return a.finish=a,o||!1===i.queue?this.each(a):this.queue(i.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,o=null!=e&&e+"queueHooks",i=ge.timers,a=ge._data(this);if(o)a[o]&&a[o].stop&&r(a[o]);else for(o in a)a[o]&&a[o].stop&&Ot.test(o)&&r(a[o]);for(o=i.length;o--;)i[o].elem!==this||null!=e&&i[o].queue!==e||(i[o].anim.stop(n),t=!1,i.splice(o,1));!t&&n||ge.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=ge._data(this),r=n[e+"queue"],o=n[e+"queueHooks"],i=ge.timers,a=r?r.length:0;for(n.finish=!0,ge.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=i.length;t--;)i[t].elem===this&&i[t].queue===e&&(i[t].anim.stop(!0),i.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),ge.each(["toggle","show","hide"],function(e,t){var n=ge.fn[t];ge.fn[t]=function(e,r,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(U(t,!0),e,r,o)}}),ge.each({slideDown:U("show"),slideUp:U("hide"),slideToggle:U("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ge.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),ge.timers=[],ge.fx.tick=function(){var e,t=ge.timers,n=0;for(Et=ge.now();n<t.length;n++)(e=t[n])()||t[n]!==e||t.splice(n--,1);t.length||ge.fx.stop(),Et=void 0},ge.fx.timer=function(e){ge.timers.push(e),e()?ge.fx.start():ge.timers.pop()},ge.fx.interval=13,ge.fx.start=function(){Mt||(Mt=n.setInterval(ge.fx.tick,ge.fx.interval))},ge.fx.stop=function(){n.clearInterval(Mt),Mt=null},ge.fx.speeds={slow:600,fast:200,_default:400},ge.fn.delay=function(e,t){return e=ge.fx?ge.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,r){var o=n.setTimeout(t,e);r.stop=function(){n.clearTimeout(o)}})},function(){var e,t=se.createElement("input"),n=se.createElement("div"),r=se.createElement("select"),o=r.appendChild(se.createElement("option"));n=se.createElement("div"),n.setAttribute("className","t"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",e=n.getElementsByTagName("a")[0],t.setAttribute("type","checkbox"),n.appendChild(t),e=n.getElementsByTagName("a")[0],e.style.cssText="top:1px",me.getSetAttribute="t"!==n.className,me.style=/top/.test(e.getAttribute("style")),me.hrefNormalized="/a"===e.getAttribute("href"),me.checkOn=!!t.value,me.optSelected=o.selected,me.enctype=!!se.createElement("form").enctype,r.disabled=!0,me.optDisabled=!o.disabled,t=se.createElement("input"),t.setAttribute("value",""),me.input=""===t.getAttribute("value"),t.value="t",t.setAttribute("type","radio"),me.radioValue="t"===t.value}();var It=/\r/g,Pt=/[\x20\t\r\n\f]+/g;ge.fn.extend({val:function(e){var t,n,r,o=this[0];{if(arguments.length)return r=ge.isFunction(e),this.each(function(n){var o;1===this.nodeType&&(o=r?e.call(this,n,ge(this).val()):e,null==o?o="":"number"==typeof o?o+="":ge.isArray(o)&&(o=ge.map(o,function(e){return null==e?"":e+""})),(t=ge.valHooks[this.type]||ge.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))});if(o)return(t=ge.valHooks[o.type]||ge.valHooks[o.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(o,"value"))?n:(n=o.value,"string"==typeof n?n.replace(It,""):null==n?"":n)}}}),ge.extend({valHooks:{option:{get:function(e){var t=ge.find.attr(e,"value");return null!=t?t:ge.trim(ge.text(e)).replace(Pt," ")}},select:{get:function(e){for(var t,n,r=e.options,o=e.selectedIndex,i="select-one"===e.type||o<0,a=i?null:[],s=i?o+1:r.length,l=o<0?s:i?o:0;l<s;l++)if(n=r[l],(n.selected||l===o)&&(me.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!ge.nodeName(n.parentNode,"optgroup"))){if(t=ge(n).val(),i)return t;a.push(t)}return a},set:function(e,t){for(var n,r,o=e.options,i=ge.makeArray(t),a=o.length;a--;)if(r=o[a],ge.inArray(ge.valHooks.option.get(r),i)>-1)try{r.selected=n=!0}catch(e){r.scrollHeight}else r.selected=!1;return n||(e.selectedIndex=-1),o}}}}),ge.each(["radio","checkbox"],function(){ge.valHooks[this]={set:function(e,t){if(ge.isArray(t))return e.checked=ge.inArray(ge(e).val(),t)>-1}},me.checkOn||(ge.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var jt,Dt,Nt=ge.expr.attrHandle,Rt=/^(?:checked|selected)$/i,Ft=me.getSetAttribute,Lt=me.input;ge.fn.extend({attr:function(e,t){return qe(this,ge.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){ge.removeAttr(this,e)})}}),ge.extend({attr:function(e,t,n){var r,o,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return void 0===e.getAttribute?ge.prop(e,t,n):(1===i&&ge.isXMLDoc(e)||(t=t.toLowerCase(),o=ge.attrHooks[t]||(ge.expr.match.bool.test(t)?Dt:jt)),void 0!==n?null===n?void ge.removeAttr(e,t):o&&"set"in o&&void 0!==(r=o.set(e,n,t))?r:(e.setAttribute(t,n+""),n):o&&"get"in o&&null!==(r=o.get(e,t))?r:(r=ge.find.attr(e,t),null==r?void 0:r))},attrHooks:{type:{set:function(e,t){if(!me.radioValue&&"radio"===t&&ge.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r,o=0,i=t&&t.match(Ie);if(i&&1===e.nodeType)for(;n=i[o++];)r=ge.propFix[n]||n,ge.expr.match.bool.test(n)?Lt&&Ft||!Rt.test(n)?e[r]=!1:e[ge.camelCase("default-"+n)]=e[r]=!1:ge.attr(e,n,""),e.removeAttribute(Ft?n:r)}}),Dt={set:function(e,t,n){return!1===t?ge.removeAttr(e,n):Lt&&Ft||!Rt.test(n)?e.setAttribute(!Ft&&ge.propFix[n]||n,n):e[ge.camelCase("default-"+n)]=e[n]=!0,n}},ge.each(ge.expr.match.bool.source.match(/\w+/g),function(e,t){var n=Nt[t]||ge.find.attr;Lt&&Ft||!Rt.test(t)?Nt[t]=function(e,t,r){var o,i;return r||(i=Nt[t],Nt[t]=o,o=null!=n(e,t,r)?t.toLowerCase():null,Nt[t]=i),o}:Nt[t]=function(e,t,n){if(!n)return e[ge.camelCase("default-"+t)]?t.toLowerCase():null}}),Lt&&Ft||(ge.attrHooks.value={set:function(e,t,n){if(!ge.nodeName(e,"input"))return jt&&jt.set(e,t,n);e.defaultValue=t}}),Ft||(jt={set:function(e,t,n){var r=e.getAttributeNode(n);if(r||e.setAttributeNode(r=e.ownerDocument.createAttribute(n)),r.value=t+="","value"===n||t===e.getAttribute(n))return t}},Nt.id=Nt.name=Nt.coords=function(e,t,n){var r;if(!n)return(r=e.getAttributeNode(t))&&""!==r.value?r.value:null},ge.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);if(n&&n.specified)return n.value},set:jt.set},ge.attrHooks.contenteditable={set:function(e,t,n){jt.set(e,""!==t&&t,n)}},ge.each(["width","height"],function(e,t){ge.attrHooks[t]={set:function(e,n){if(""===n)return e.setAttribute(t,"auto"),n}}})),me.style||(ge.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var zt=/^(?:input|select|textarea|button|object)$/i,Bt=/^(?:a|area)$/i;ge.fn.extend({prop:function(e,t){return qe(this,ge.prop,e,t,arguments.length>1)},removeProp:function(e){return e=ge.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(e){}})}}),ge.extend({prop:function(e,t,n){var r,o,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return 1===i&&ge.isXMLDoc(e)||(t=ge.propFix[t]||t,o=ge.propHooks[t]),void 0!==n?o&&"set"in o&&void 0!==(r=o.set(e,n,t))?r:e[t]=n:o&&"get"in o&&null!==(r=o.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=ge.find.attr(e,"tabindex");return t?parseInt(t,10):zt.test(e.nodeName)||Bt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),me.hrefNormalized||ge.each(["href","src"],function(e,t){ge.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),me.optSelected||(ge.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),ge.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ge.propFix[this.toLowerCase()]=this}),me.enctype||(ge.propFix.enctype="encoding");var qt=/[\t\r\n\f]/g;ge.fn.extend({addClass:function(e){var t,n,r,o,i,a,s,l=0;if(ge.isFunction(e))return this.each(function(t){ge(this).addClass(e.call(this,t,Y(this)))});if("string"==typeof e&&e)for(t=e.match(Ie)||[];n=this[l++];)if(o=Y(n),r=1===n.nodeType&&(" "+o+" ").replace(qt," ")){for(a=0;i=t[a++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");s=ge.trim(r),o!==s&&ge.attr(n,"class",s)}return this},removeClass:function(e){var t,n,r,o,i,a,s,l=0;if(ge.isFunction(e))return this.each(function(t){ge(this).removeClass(e.call(this,t,Y(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(Ie)||[];n=this[l++];)if(o=Y(n),r=1===n.nodeType&&(" "+o+" ").replace(qt," ")){for(a=0;i=t[a++];)for(;r.indexOf(" "+i+" ")>-1;)r=r.replace(" "+i+" "," ");s=ge.trim(r),o!==s&&ge.attr(n,"class",s)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):ge.isFunction(e)?this.each(function(n){ge(this).toggleClass(e.call(this,n,Y(this),t),t)}):this.each(function(){var t,r,o,i;if("string"===n)for(r=0,o=ge(this),i=e.match(Ie)||[];t=i[r++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==n||(t=Y(this),t&&ge._data(this,"__className__",t),ge.attr(this,"class",t||!1===e?"":ge._data(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+Y(n)+" ").replace(qt," ").indexOf(t)>-1)return!0;return!1}}),ge.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){ge.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),ge.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}});var Vt=n.location,Ut=ge.now(),Ht=/\?/,Gt=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;ge.parseJSON=function(e){if(n.JSON&&n.JSON.parse)return n.JSON.parse(e+"");var t,r=null,o=ge.trim(e+"");return o&&!ge.trim(o.replace(Gt,function(e,n,o,i){return t&&n&&(r=0),0===r?e:(t=o||n,r+=!i-!o,"")}))?Function("return "+o)():ge.error("Invalid JSON: "+e)},ge.parseXML=function(e){var t,r;if(!e||"string"!=typeof e)return null;try{n.DOMParser?(r=new n.DOMParser,t=r.parseFromString(e,"text/xml")):(t=new n.ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e))}catch(e){t=void 0}return t&&t.documentElement&&!t.getElementsByTagName("parsererror").length||ge.error("Invalid XML: "+e),t};var Wt=/#.*$/,Zt=/([?&])_=[^&]*/,Yt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Xt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Kt=/^(?:GET|HEAD)$/,Qt=/^\/\//,Jt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,$t={},en={},tn="*/".concat("*"),nn=Vt.href,rn=Jt.exec(nn.toLowerCase())||[];ge.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:nn,type:"GET",isLocal:Xt.test(rn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":tn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ge.parseJSON,"text xml":ge.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Q(Q(e,ge.ajaxSettings),t):Q(ge.ajaxSettings,e)},ajaxPrefilter:X($t),ajaxTransport:X(en),ajax:function(e,t){function r(e,t,r,o){var i,p,y,b,x,S=t;2!==w&&(w=2,l&&n.clearTimeout(l),c=void 0,s=o||"",_.readyState=e>0?4:0,i=e>=200&&e<300||304===e,r&&(b=J(f,_,r)),b=$(f,b,_,i),i?(f.ifModified&&(x=_.getResponseHeader("Last-Modified"),x&&(ge.lastModified[a]=x),(x=_.getResponseHeader("etag"))&&(ge.etag[a]=x)),204===e||"HEAD"===f.type?S="nocontent":304===e?S="notmodified":(S=b.state,p=b.data,y=b.error,i=!y)):(y=S,!e&&S||(S="error",e<0&&(e=0))),_.status=e,_.statusText=(t||S)+"",i?m.resolveWith(d,[p,S,_]):m.rejectWith(d,[_,S,y]),_.statusCode(v),v=void 0,u&&h.trigger(i?"ajaxSuccess":"ajaxError",[_,f,i?p:y]),g.fireWith(d,[_,S]),u&&(h.trigger("ajaxComplete",[_,f]),--ge.active||ge.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var o,i,a,s,l,u,c,p,f=ge.ajaxSetup({},t),d=f.context||f,h=f.context&&(d.nodeType||d.jquery)?ge(d):ge.event,m=ge.Deferred(),g=ge.Callbacks("once memory"),v=f.statusCode||{},y={},b={},w=0,x="canceled",_={readyState:0,getResponseHeader:function(e){var t;if(2===w){if(!p)for(p={};t=Yt.exec(s);)p[t[1].toLowerCase()]=t[2];t=p[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===w?s:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return w||(e=b[n]=b[n]||e,y[e]=t),this},overrideMimeType:function(e){return w||(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(w<2)for(t in e)v[t]=[v[t],e[t]];else _.always(e[_.status]);return this},abort:function(e){var t=e||x;return c&&c.abort(t),r(0,t),this}};if(m.promise(_).complete=g.add,_.success=_.done,_.error=_.fail,f.url=((e||f.url||nn)+"").replace(Wt,"").replace(Qt,rn[1]+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=ge.trim(f.dataType||"*").toLowerCase().match(Ie)||[""],null==f.crossDomain&&(o=Jt.exec(f.url.toLowerCase()),f.crossDomain=!(!o||o[1]===rn[1]&&o[2]===rn[2]&&(o[3]||("http:"===o[1]?"80":"443"))===(rn[3]||("http:"===rn[1]?"80":"443")))),f.data&&f.processData&&"string"!=typeof f.data&&(f.data=ge.param(f.data,f.traditional)),K($t,f,t,_),2===w)return _;u=ge.event&&f.global,u&&0==ge.active++&&ge.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Kt.test(f.type),a=f.url,f.hasContent||(f.data&&(a=f.url+=(Ht.test(a)?"&":"?")+f.data,delete f.data),!1===f.cache&&(f.url=Zt.test(a)?a.replace(Zt,"$1_="+Ut++):a+(Ht.test(a)?"&":"?")+"_="+Ut++)),f.ifModified&&(ge.lastModified[a]&&_.setRequestHeader("If-Modified-Since",ge.lastModified[a]),ge.etag[a]&&_.setRequestHeader("If-None-Match",ge.etag[a])),(f.data&&f.hasContent&&!1!==f.contentType||t.contentType)&&_.setRequestHeader("Content-Type",f.contentType),_.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+tn+"; q=0.01":""):f.accepts["*"]);for(i in f.headers)_.setRequestHeader(i,f.headers[i]);if(f.beforeSend&&(!1===f.beforeSend.call(d,_,f)||2===w))return _.abort();x="abort";for(i in{success:1,error:1,complete:1})_[i](f[i]);if(c=K(en,f,t,_)){if(_.readyState=1,u&&h.trigger("ajaxSend",[_,f]),2===w)return _;f.async&&f.timeout>0&&(l=n.setTimeout(function(){_.abort("timeout")},f.timeout));try{w=1,c.send(y,r)}catch(e){if(!(w<2))throw e;r(-1,e)}}else r(-1,"No Transport");return _},getJSON:function(e,t,n){return ge.get(e,t,n,"json")},getScript:function(e,t){return ge.get(e,void 0,t,"script")}}),ge.each(["get","post"],function(e,t){ge[t]=function(e,n,r,o){return ge.isFunction(n)&&(o=o||r,r=n,n=void 0),ge.ajax(ge.extend({url:e,type:t,dataType:o,data:n,success:r},ge.isPlainObject(e)&&e))}}),ge._evalUrl=function(e){return ge.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},ge.fn.extend({wrapAll:function(e){if(ge.isFunction(e))return this.each(function(t){ge(this).wrapAll(e.call(this,t))});if(this[0]){var t=ge(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return ge.isFunction(e)?this.each(function(t){ge(this).wrapInner(e.call(this,t))}):this.each(function(){var t=ge(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=ge.isFunction(e);return this.each(function(n){ge(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){ge.nodeName(this,"body")||ge(this).replaceWith(this.childNodes)}).end()}}),ge.expr.filters.hidden=function(e){return me.reliableHiddenOffsets()?e.offsetWidth<=0&&e.offsetHeight<=0&&!e.getClientRects().length:te(e)},ge.expr.filters.visible=function(e){return!ge.expr.filters.hidden(e)};var on=/%20/g,an=/\[\]$/,sn=/\r?\n/g,ln=/^(?:submit|button|image|reset|file)$/i,un=/^(?:input|select|textarea|keygen)/i;ge.param=function(e,t){var n,r=[],o=function(e,t){t=ge.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=ge.ajaxSettings&&ge.ajaxSettings.traditional),ge.isArray(e)||e.jquery&&!ge.isPlainObject(e))ge.each(e,function(){o(this.name,this.value)});else for(n in e)ne(n,e[n],t,o);return r.join("&").replace(on,"+")},ge.fn.extend({serialize:function(){return ge.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ge.prop(this,"elements");return e?ge.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ge(this).is(":disabled")&&un.test(this.nodeName)&&!ln.test(e)&&(this.checked||!Ve.test(e))}).map(function(e,t){var n=ge(this).val();return null==n?null:ge.isArray(n)?ge.map(n,function(e){return{name:t.name,value:e.replace(sn,"\r\n")}}):{name:t.name,value:n.replace(sn,"\r\n")}}).get()}}),ge.ajaxSettings.xhr=void 0!==n.ActiveXObject?function(){return this.isLocal?oe():se.documentMode>8?re():/^(get|post|head|put|delete|options)$/i.test(this.type)&&re()||oe()}:re;var cn=0,pn={},fn=ge.ajaxSettings.xhr();n.attachEvent&&n.attachEvent("onunload",function(){for(var e in pn)pn[e](void 0,!0)}),me.cors=!!fn&&"withCredentials"in fn,fn=me.ajax=!!fn,fn&&ge.ajaxTransport(function(e){if(!e.crossDomain||me.cors){var t;return{send:function(r,o){var i,a=e.xhr(),s=++cn;if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)a[i]=e.xhrFields[i];e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(i in r)void 0!==r[i]&&a.setRequestHeader(i,r[i]+"");a.send(e.hasContent&&e.data||null),t=function(n,r){var i,l,u;if(t&&(r||4===a.readyState))if(delete pn[s],t=void 0,a.onreadystatechange=ge.noop,r)4!==a.readyState&&a.abort();else{u={},i=a.status,"string"==typeof a.responseText&&(u.text=a.responseText);try{l=a.statusText}catch(e){l=""}i||!e.isLocal||e.crossDomain?1223===i&&(i=204):i=u.text?200:404}u&&o(i,l,u,a.getAllResponseHeaders())},e.async?4===a.readyState?n.setTimeout(t):a.onreadystatechange=pn[s]=t:t()},abort:function(){t&&t(void 0,!0)}}}}),ge.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return ge.globalEval(e),e}}}),ge.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),ge.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=se.head||ge("head")[0]||se.documentElement;return{send:function(r,o){t=se.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||o(200,"success"))},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var dn=[],hn=/(=)\?(?=&|$)|\?\?/;ge.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=dn.pop()||ge.expando+"_"+Ut++;return this[e]=!0,e}}),ge.ajaxPrefilter("json jsonp",function(e,t,r){var o,i,a,s=!1!==e.jsonp&&(hn.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&hn.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return o=e.jsonpCallback=ge.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(hn,"$1"+o):!1!==e.jsonp&&(e.url+=(Ht.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return a||ge.error(o+" was not called"),a[0]},e.dataTypes[0]="json",i=n[o],n[o]=function(){a=arguments},r.always(function(){void 0===i?ge(n).removeProp(o):n[o]=i,e[o]&&(e.jsonpCallback=t.jsonpCallback,dn.push(o)),a&&ge.isFunction(i)&&i(a[0]),a=i=void 0}),"script"}),ge.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||se;var r=ke.exec(e),o=!n&&[];return r?[t.createElement(r[1])]:(r=x([e],t,o),o&&o.length&&ge(o).remove(),ge.merge([],r.childNodes))};var mn=ge.fn.load;ge.fn.load=function(e,t,n){if("string"!=typeof e&&mn)return mn.apply(this,arguments);var r,o,i,a=this,s=e.indexOf(" ");return s>-1&&(r=ge.trim(e.slice(s,e.length)),e=e.slice(0,s)),ge.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),a.length>0&&ge.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done(function(e){i=arguments,a.html(r?ge("<div>").append(ge.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,i||[e.responseText,t,e])})}),this},ge.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ge.fn[t]=function(e){return this.on(t,e)}}),ge.expr.filters.animated=function(e){return ge.grep(ge.timers,function(t){return e===t.elem}).length},ge.offset={setOffset:function(e,t,n){var r,o,i,a,s,l,u,c=ge.css(e,"position"),p=ge(e),f={};"static"===c&&(e.style.position="relative"),s=p.offset(),i=ge.css(e,"top"),l=ge.css(e,"left"),u=("absolute"===c||"fixed"===c)&&ge.inArray("auto",[i,l])>-1,u?(r=p.position(),a=r.top,o=r.left):(a=parseFloat(i)||0,o=parseFloat(l)||0),ge.isFunction(t)&&(t=t.call(e,n,ge.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+o),"using"in t?t.using.call(e,f):p.css(f)}},ge.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){ge.offset.setOffset(this,e,t)});var t,n,r={top:0,left:0},o=this[0],i=o&&o.ownerDocument;if(i)return t=i.documentElement,ge.contains(t,o)?(void 0!==o.getBoundingClientRect&&(r=o.getBoundingClientRect()),n=ie(i),{top:r.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:r.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):r},position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===ge.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),ge.nodeName(e[0],"html")||(n=e.offset()),n.top+=ge.css(e[0],"borderTopWidth",!0),n.left+=ge.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-ge.css(r,"marginTop",!0),left:t.left-n.left-ge.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&!ge.nodeName(e,"html")&&"static"===ge.css(e,"position");)e=e.offsetParent;return e||mt})}}),ge.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=/Y/.test(t);ge.fn[e]=function(r){return qe(this,function(e,r,o){var i=ie(e);if(void 0===o)return i?t in i?i[t]:i.document.documentElement[r]:e[r];i?i.scrollTo(n?ge(i).scrollLeft():o,n?o:ge(i).scrollTop()):e[r]=o},e,r,arguments.length,null)}}),ge.each(["top","left"],function(e,t){ge.cssHooks[t]=N(me.pixelPosition,function(e,n){if(n)return n=vt(e,t),dt.test(n)?ge(e).position()[t]+"px":n})}),ge.each({Height:"height",Width:"width"},function(e,t){ge.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){ge.fn[r]=function(r,o){var i=arguments.length&&(n||"boolean"!=typeof r),a=n||(!0===r||!0===o?"margin":"border");return qe(this,function(t,n,r){var o;return ge.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===r?ge.css(t,n,a):ge.style(t,n,r,a)},t,i?r:void 0,i,null)}})}),ge.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),ge.fn.size=function(){return this.length},ge.fn.andSelf=ge.fn.addBack,r=[],void 0!==(o=function(){return ge}.apply(t,r))&&(e.exports=o);var gn=n.jQuery,vn=n.$;return ge.noConflict=function(e){return n.$===ge&&(n.$=vn),e&&n.jQuery===ge&&(n.jQuery=gn),ge},i||(n.jQuery=n.$=ge),ge})},function(e,t){var n={};n.EPSILON=1e-6,n.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,n.RANDOM=Math.random,n.ENABLE_SIMD=!1,n.SIMD_AVAILABLE=n.ARRAY_TYPE===Float32Array&&"SIMD"in this,n.USE_SIMD=n.ENABLE_SIMD&&n.SIMD_AVAILABLE,n.setMatrixArrayType=function(e){n.ARRAY_TYPE=e};var r=Math.PI/180;n.toRadian=function(e){return e*r},n.equals=function(e,t){return Math.abs(e-t)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))},e.exports=n},function(e,t,n){var r=n(24),o=n(25),i=n(3),a=function(e){if(e.indexOf("rgb(")>-1)return{rgb:e,opacity:1};var t=i(e);return{rgb:"rgb("+Math.round(255*t[0])+","+Math.round(255*t[1])+","+Math.round(255*t[2])+")",opacity:t[3]}},s=function(){var e=0;return function(){return e+=1}}();e.exports={text:function(e,t,n,o,i,a,s){o=o||12;var l=o;"middle"===s?l=o/2:"bottom"===s&&(l=0);var u=r("text",{x:t||0,y:(n||0)+l,"font-size":o,"font-family":i||"serif","font-weight":a||"normal","text-anchor":"start"});return u.textContent=e+"",u},group:function(e,t){return e=e||0,t=t||0,r("g",{transform:"translate("+e+","+t+")",x:e,y:t})},svg:function(e,t){return r("svg",{width:e||0,height:t||0})},wrapText:function(e,t){var n=e.textContent;e.textContent="";var o=n.split(" "),i=0,a=r("tspan",{x:"0",dy:i});e.appendChild(a);for(var s=[],l=0;l<o.length;l++)s.push(o[l]),a.textContent=s.join(" "),a.getComputedTextLength()>t&&(a.textContent=s.slice(0,s.length-1).join(" "),i=e.getBBox().height,s=[o[l]],a=r("tspan",{x:"0",dy:i}),e.appendChild(a),a.textContent=o[l])},fromShape:function(e,t,n){return o(e,t,n)},polygon:function(e,t){return r("polygon",{points:e,fill:t})},rect:function(e,t,n,o,i){return r("rect",{x:e,y:t,width:n,height:o,fill:i})},bgrect:function(e,t,n){return r("rect",{width:e,height:t,fill:n})},path:function(e,t,n,o){e=e.map(function(e){return e.join(",")}),e[0]="M"+e[0];for(var i=1;i<e.length;i++)e[i]="L"+e[i];return o||(t=a(t),n=a(n)),r("path",{d:e.join(" "),stroke:o?"url(#"+o.getAttribute("id")+")":t.rgb,"stroke-opacity":o?0:t.opacity,fill:o?"url(#"+o.getAttribute("id")+")":n.rgb,"fill-opacity":o?1:n.opacity})},stop:function(e,t){var n=a(t);return r("stop",{offset:e+"%","stop-color":n.rgb,"stop-opacity":n.opacity})},linearGradient:function(){return r("linearGradient",{id:"linearGradient"+s()})},defs:function(){return r("defs")},gradient:function(e){for(var t=r("linearGradient",{id:"gradient"+s(),x1:0,y1:0,x2:1,y2:0}),n=0;n<=100;n++)t.appendChild(this.stop(n,e(n/100)));return t}}},function(e,t){e.exports=function(e){var t=[0,0,0,1];if("#"===e[0]){e="rgba("+parseInt(e[1]+e[2],16)+","+parseInt(e[3]+e[4],16)+","+parseInt(e[5]+e[6],16)+",1)"}var n=e.match(/^[\s]*rgba\([\s]*([0-9.]+)[\s]*,[\s]*([0-9.]+)[\s]*,[\s]*([0-9.]+)[\s]*,[\s]*([0-9.]+)[\s]*\)[\s]*$/);return n&&5===n.length&&(t=[parseFloat(n[1])/255,parseFloat(n[2])/255,parseFloat(n[3])/255,parseFloat(n[4])]),t}},function(e,t){e.exports=function(e,t,n,r){for(var o,i=e.length,a=0;a<i;){o=Math.floor((i+a)/2);var s=n(e[o]);if(s===t)return o;if(t>s)a=o+1;else{if(!(t<s))return-1;i=o}}return r?a-1:-1}},function(e,t){var n=function(){function e(e,t){this.value=e,this.updateFn=t,this.bound_properties=[]}return e.prototype.update=function(){this.value=this.updateFn.apply(null,arguments);for(var e=0;e<this.bound_properties.length;e++)this.bound_properties[e].update()},e.prototype.get=function(){return this.value},e.prototype.updateAndGet=function(){return this.update(),this.get()},e.prototype.addBoundProperty=function(e){this.bound_properties.push(e)},e}();e.exports=n},function(e,t,n){t.glMatrix=n(1),t.mat2=n(19),t.mat2d=n(20),t.mat3=n(7),t.mat4=n(21),t.quat=n(22),t.vec2=n(23),t.vec3=n(8),t.vec4=n(9)},function(e,t,n){var r=n(1),o={};o.create=function(){var e=new r.ARRAY_TYPE(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},o.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},o.clone=function(e){var t=new r.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},o.fromValues=function(e,t,n,o,i,a,s,l,u){var c=new r.ARRAY_TYPE(9);return c[0]=e,c[1]=t,c[2]=n,c[3]=o,c[4]=i,c[5]=a,c[6]=s,c[7]=l,c[8]=u,c},o.set=function(e,t,n,r,o,i,a,s,l,u){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e[4]=i,e[5]=a,e[6]=s,e[7]=l,e[8]=u,e},o.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},o.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],o=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=o}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},o.invert=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],p=c*a-s*u,f=-c*i+s*l,d=u*i-a*l,h=n*p+r*f+o*d;return h?(h=1/h,e[0]=p*h,e[1]=(-c*r+o*u)*h,e[2]=(s*r-o*a)*h,e[3]=f*h,e[4]=(c*n-o*l)*h,e[5]=(-s*n+o*i)*h,e[6]=d*h,e[7]=(-u*n+r*l)*h,e[8]=(a*n-r*i)*h,e):null},o.adjoint=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8];return e[0]=a*c-s*u,e[1]=o*u-r*c,e[2]=r*s-o*a,e[3]=s*l-i*c,e[4]=n*c-o*l,e[5]=o*i-n*s,e[6]=i*u-a*l,e[7]=r*l-n*u,e[8]=n*a-r*i,e},o.determinant=function(e){var t=e[0],n=e[1],r=e[2],o=e[3],i=e[4],a=e[5],s=e[6],l=e[7],u=e[8];return t*(u*i-a*l)+n*(-u*o+a*s)+r*(l*o-i*s)},o.multiply=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],p=t[8],f=n[0],d=n[1],h=n[2],m=n[3],g=n[4],v=n[5],y=n[6],b=n[7],w=n[8];return e[0]=f*r+d*a+h*u,e[1]=f*o+d*s+h*c,e[2]=f*i+d*l+h*p,e[3]=m*r+g*a+v*u,e[4]=m*o+g*s+v*c,e[5]=m*i+g*l+v*p,e[6]=y*r+b*a+w*u,e[7]=y*o+b*s+w*c,e[8]=y*i+b*l+w*p,e},o.mul=o.multiply,o.translate=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],p=t[8],f=n[0],d=n[1];return e[0]=r,e[1]=o,e[2]=i,e[3]=a,e[4]=s,e[5]=l,e[6]=f*r+d*a+u,e[7]=f*o+d*s+c,e[8]=f*i+d*l+p,e},o.rotate=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],p=t[8],f=Math.sin(n),d=Math.cos(n);return e[0]=d*r+f*a,e[1]=d*o+f*s,e[2]=d*i+f*l,e[3]=d*a-f*r,e[4]=d*s-f*o,e[5]=d*l-f*i,e[6]=u,e[7]=c,e[8]=p,e},o.scale=function(e,t,n){var r=n[0],o=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=o*t[3],e[4]=o*t[4],e[5]=o*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},o.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e},o.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},o.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},o.fromMat2d=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},o.fromQuat=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=n+n,s=r+r,l=o+o,u=n*a,c=r*a,p=r*s,f=o*a,d=o*s,h=o*l,m=i*a,g=i*s,v=i*l;return e[0]=1-p-h,e[3]=c-v,e[6]=f+g,e[1]=c+v,e[4]=1-u-h,e[7]=d-m,e[2]=f-g,e[5]=d+m,e[8]=1-u-p,e},o.normalFromMat4=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],p=t[9],f=t[10],d=t[11],h=t[12],m=t[13],g=t[14],v=t[15],y=n*s-r*a,b=n*l-o*a,w=n*u-i*a,x=r*l-o*s,_=r*u-i*s,S=o*u-i*l,C=c*m-p*h,k=c*g-f*h,A=c*v-d*h,E=p*g-f*m,M=p*v-d*m,T=f*v-d*g,O=y*T-b*M+w*E+x*A-_*k+S*C;return O?(O=1/O,e[0]=(s*T-l*M+u*E)*O,e[1]=(l*A-a*T-u*k)*O,e[2]=(a*M-s*A+u*C)*O,e[3]=(o*M-r*T-i*E)*O,e[4]=(n*T-o*A+i*k)*O,e[5]=(r*A-n*M-i*C)*O,e[6]=(m*S-g*_+v*x)*O,e[7]=(g*w-h*S-v*b)*O,e[8]=(h*_-m*w+v*y)*O,e):null},o.str=function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},o.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e},o.sub=o.subtract,o.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e},o.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},o.equals=function(e,t){var n=e[0],o=e[1],i=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],p=e[8],f=t[0],d=t[1],h=t[2],m=t[3],g=t[4],v=t[5],y=e[6],b=t[7],w=t[8];return Math.abs(n-f)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(o-d)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(i-h)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(a-m)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(s-g)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(l-v)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(u-y)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(c-b)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(p-w)<=r.EPSILON*Math.max(1,Math.abs(p),Math.abs(w))},e.exports=o},function(e,t,n){var r=n(1),o={};o.create=function(){var e=new r.ARRAY_TYPE(3);return e[0]=0,e[1]=0,e[2]=0,e},o.clone=function(e){var t=new r.ARRAY_TYPE(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},o.fromValues=function(e,t,n){var o=new r.ARRAY_TYPE(3);return o[0]=e,o[1]=t,o[2]=n,o},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},o.set=function(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e},o.sub=o.subtract,o.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e},o.mul=o.multiply,o.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e},o.div=o.divide,o.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e},o.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e},o.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e},o.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e},o.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e},o.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e},o.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e},o.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2];return Math.sqrt(n*n+r*r+o*o)},o.dist=o.distance,o.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2];return n*n+r*r+o*o},o.sqrDist=o.squaredDistance,o.length=function(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)},o.len=o.length,o.squaredLength=function(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r},o.sqrLen=o.squaredLength,o.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},o.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},o.normalize=function(e,t){var n=t[0],r=t[1],o=t[2],i=n*n+r*r+o*o;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i),e},o.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},o.cross=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=n[0],s=n[1],l=n[2];return e[0]=o*l-i*s,e[1]=i*a-r*l,e[2]=r*s-o*a,e},o.lerp=function(e,t,n,r){var o=t[0],i=t[1],a=t[2];return e[0]=o+r*(n[0]-o),e[1]=i+r*(n[1]-i),e[2]=a+r*(n[2]-a),e},o.hermite=function(e,t,n,r,o,i){var a=i*i,s=a*(2*i-3)+1,l=a*(i-2)+i,u=a*(i-1),c=a*(3-2*i);return e[0]=t[0]*s+n[0]*l+r[0]*u+o[0]*c,e[1]=t[1]*s+n[1]*l+r[1]*u+o[1]*c,e[2]=t[2]*s+n[2]*l+r[2]*u+o[2]*c,e},o.bezier=function(e,t,n,r,o,i){var a=1-i,s=a*a,l=i*i,u=s*a,c=3*i*s,p=3*l*a,f=l*i;return e[0]=t[0]*u+n[0]*c+r[0]*p+o[0]*f,e[1]=t[1]*u+n[1]*c+r[1]*p+o[1]*f,e[2]=t[2]*u+n[2]*c+r[2]*p+o[2]*f,e},o.random=function(e,t){t=t||1;var n=2*r.RANDOM()*Math.PI,o=2*r.RANDOM()-1,i=Math.sqrt(1-o*o)*t;return e[0]=Math.cos(n)*i,e[1]=Math.sin(n)*i,e[2]=o*t,e},o.transformMat4=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=n[3]*r+n[7]*o+n[11]*i+n[15];return a=a||1,e[0]=(n[0]*r+n[4]*o+n[8]*i+n[12])/a,e[1]=(n[1]*r+n[5]*o+n[9]*i+n[13])/a,e[2]=(n[2]*r+n[6]*o+n[10]*i+n[14])/a,e},o.transformMat3=function(e,t,n){var r=t[0],o=t[1],i=t[2];return e[0]=r*n[0]+o*n[3]+i*n[6],e[1]=r*n[1]+o*n[4]+i*n[7],e[2]=r*n[2]+o*n[5]+i*n[8],e},o.transformQuat=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=n[0],s=n[1],l=n[2],u=n[3],c=u*r+s*i-l*o,p=u*o+l*r-a*i,f=u*i+a*o-s*r,d=-a*r-s*o-l*i;return e[0]=c*u+d*-a+p*-l-f*-s,e[1]=p*u+d*-s+f*-a-c*-l,e[2]=f*u+d*-l+c*-s-p*-a,e},o.rotateX=function(e,t,n,r){var o=[],i=[];return o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],i[0]=o[0],i[1]=o[1]*Math.cos(r)-o[2]*Math.sin(r),i[2]=o[1]*Math.sin(r)+o[2]*Math.cos(r),e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e},o.rotateY=function(e,t,n,r){var o=[],i=[];return o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],i[0]=o[2]*Math.sin(r)+o[0]*Math.cos(r),i[1]=o[1],i[2]=o[2]*Math.cos(r)-o[0]*Math.sin(r),e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e},o.rotateZ=function(e,t,n,r){var o=[],i=[];return o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],i[0]=o[0]*Math.cos(r)-o[1]*Math.sin(r),i[1]=o[0]*Math.sin(r)+o[1]*Math.cos(r),i[2]=o[2],e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e},o.forEach=function(){var e=o.create();return function(t,n,r,o,i,a){var s,l;for(n||(n=3),r||(r=0),l=o?Math.min(o*n+r,t.length):t.length,s=r;s<l;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],i(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2];return t}}(),o.angle=function(e,t){var n=o.fromValues(e[0],e[1],e[2]),r=o.fromValues(t[0],t[1],t[2]);o.normalize(n,n),o.normalize(r,r);var i=o.dot(n,r);return i>1?0:Math.acos(i)},o.str=function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},o.equals=function(e,t){var n=e[0],o=e[1],i=e[2],a=t[0],s=t[1],l=t[2];return Math.abs(n-a)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(o-s)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(i-l)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))},e.exports=o},function(e,t,n){var r=n(1),o={};o.create=function(){var e=new r.ARRAY_TYPE(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e},o.clone=function(e){var t=new r.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},o.fromValues=function(e,t,n,o){var i=new r.ARRAY_TYPE(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=o,i},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},o.set=function(e,t,n,r,o){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e},o.sub=o.subtract,o.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e},o.mul=o.multiply,o.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e},o.div=o.divide,o.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},o.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},o.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e},o.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e},o.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},o.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},o.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e},o.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2],i=t[3]-e[3];return Math.sqrt(n*n+r*r+o*o+i*i)},o.dist=o.distance,o.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2],i=t[3]-e[3];return n*n+r*r+o*o+i*i},o.sqrDist=o.squaredDistance,o.length=function(e){var t=e[0],n=e[1],r=e[2],o=e[3];return Math.sqrt(t*t+n*n+r*r+o*o)},o.len=o.length,o.squaredLength=function(e){var t=e[0],n=e[1],r=e[2],o=e[3];return t*t+n*n+r*r+o*o},o.sqrLen=o.squaredLength,o.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},o.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},o.normalize=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=n*n+r*r+o*o+i*i;return a>0&&(a=1/Math.sqrt(a),e[0]=n*a,e[1]=r*a,e[2]=o*a,e[3]=i*a),e},o.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},o.lerp=function(e,t,n,r){var o=t[0],i=t[1],a=t[2],s=t[3];return e[0]=o+r*(n[0]-o),e[1]=i+r*(n[1]-i),e[2]=a+r*(n[2]-a),e[3]=s+r*(n[3]-s),e},o.random=function(e,t){return t=t||1,e[0]=r.RANDOM(),e[1]=r.RANDOM(),e[2]=r.RANDOM(),e[3]=r.RANDOM(),o.normalize(e,e),o.scale(e,e,t),e},o.transformMat4=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3];return e[0]=n[0]*r+n[4]*o+n[8]*i+n[12]*a,e[1]=n[1]*r+n[5]*o+n[9]*i+n[13]*a,e[2]=n[2]*r+n[6]*o+n[10]*i+n[14]*a,e[3]=n[3]*r+n[7]*o+n[11]*i+n[15]*a,e},o.transformQuat=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=n[0],s=n[1],l=n[2],u=n[3],c=u*r+s*i-l*o,p=u*o+l*r-a*i,f=u*i+a*o-s*r,d=-a*r-s*o-l*i;return e[0]=c*u+d*-a+p*-l-f*-s,e[1]=p*u+d*-s+f*-a-c*-l,e[2]=f*u+d*-l+c*-s-p*-a,e[3]=t[3],e},o.forEach=function(){var e=o.create();return function(t,n,r,o,i,a){var s,l;for(n||(n=4),r||(r=0),l=o?Math.min(o*n+r,t.length):t.length,s=r;s<l;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],i(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2],t[s+3]=e[3];return t}}(),o.str=function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},o.equals=function(e,t){var n=e[0],o=e[1],i=e[2],a=e[3],s=t[0],l=t[1],u=t[2],c=t[3];return Math.abs(n-s)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-l)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(i-u)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(a-c)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))},e.exports=o},function(e,t){var n=function(){function e(e){this.params=e,this.params_with_type={},this.completeWithDefaults(),this.markParameterTypes()}var t={width:"100%",height:"100%",x:"0%",y:"0%",z:0,x1:"0%",x2:"0%",x3:"0%",y1:"0%",y2:"0%",y3:"0%",stroke:"rgba(0,0,0,0)",fill:"rgba(23,23,23,1)","stroke-width":"0","stroke-opacity":"0"},n={"stroke-width":0,width:0,x:0,x1:0,x2:0,x3:0,height:1,y:1,y1:1,y2:1,y3:1},r=Object.keys(t).concat("type"),o=function(){var t={};return function(n){var r=e.hashComputedShape(n);return t[r]=t[r]||Object.freeze(n),t[r]}}();return e.prototype.completeWithDefaults=function(){for(var e=this.getRequiredParameters(),n=0;n<e.length;n++){var r=e[n];this.params[r]=void 0===this.params[r]?t[r]:this.params[r]}},e.prototype.markParameterTypes=function(){for(var e=Object.keys(this.params),t=0;t<e.length;t++){var n=e[t],r=this.params[n];this.params_with_type[n]="function"==typeof r?{type:"function",value:r}:{type:"value",value:r}}},e.prototype.getComputedParams=function(e,t,r){for(var i={},a=Object.keys(this.params_with_type),s=[t,r],l=0;l<a.length;l++){var u=a[l],c=this.params_with_type[u],p=c.value;"type"!==u&&("function"===c.type&&(p=p(e)),"%"===p[p.length-1]&&(p="100%"===p?1:parseFloat(p)/100,p*=s[n[u]])),i[u]=p}return o(i)},e.hashComputedShape=function(e,t){return r.reduce(function(t,n){return t+","+e[n]},"")+","+t},e}(),r=function(){function e(e){n.call(this,e)}return e.prototype=Object.create(n.prototype),e.prototype.getRequiredParameters=function(){return["width","height","x","y","z","stroke","fill","stroke-width"]},e}(),o=function(){function e(e){n.call(this,e)}return e.prototype=Object.create(n.prototype),e.prototype.getRequiredParameters=function(){return["x1","x2","x3","y1","y2","y3","z","stroke","fill","stroke-width"]},e}(),i=function(){function e(e){n.call(this,e)}return e.prototype=Object.create(n.prototype),e.prototype.getRequiredParameters=function(){return["width","height","x","y","z","stroke","fill","stroke-width"]},e}(),a=function(){function e(e){n.call(this,e)}return e.prototype=Object.create(n.prototype),e.prototype.getRequiredParameters=function(){return["x1","x2","y1","y2","z","stroke","stroke-width"]},e}();e.exports={Rectangle:r,Triangle:o,Ellipse:i,Line:a,Shape:n}},function(e,t,n){n(12);var r=n(13),o=n(18),i=n(27),a=n(28),s=n(30),l=n(31),u=n(32),c=n(33),p=n(34),f=n(2),d=n(0),h=function(e,t,n){return Math.min(Math.max(e,t),n)},m=function(){function e(e,t){var n=this;if(this.webgl_unavailable=null===document.createElement("canvas").getContext("experimental-webgl"),this.webgl_unavailable)return void d(e).append("<p class='oncoprintjs__webgl_unavailable_message'>WebGL context cannot be retrieved, so oncoprint cannot be used. Please visit <a href='http://webglreport.com'>WebGL Report</a> to explore your browsers WebGL capabilities.</p>");this.ctr_selector=e;var a=d("<span></span>").css({position:"relative",display:"inline-block"}).appendTo(e),f=d("<div></div>").css({position:"absolute",display:"inline-block"}).appendTo(a),m=d("<span></span>").css({position:"absolute"}).appendTo(e),g=d("<div></div>").css({position:"absolute",display:"inline-block",top:0,left:0,"min-height":1}).appendTo(a),y=d("<canvas></canvas>").css({display:"inline-block",position:"absolute",left:"0px",top:"0px"}).addClass("noselect").attr({width:"150",height:"250"}),S=d("<div></div>").css({position:"absolute",left:"150px",top:"0px"}).addClass("noselect").attr({width:"50",height:"250"}),C=d("<div></div>").css({position:"absolute",top:"250px","min-height":1}).addClass("noselect"),k=d("<div>").css({width:t,display:"inline-block",position:"absolute",left:"200px",top:"0px"}).addClass("noselect"),E=d("<canvas></canvas>").attr({width:"0px",height:"0px"}).css({position:"absolute",top:"0px",left:"0px"}).addClass("noselect"),M=d("<div>").css({position:"absolute","overflow-x":"scroll","overflow-y":"scroll",top:"0",left:"0px",height:"1px"}).addClass("oncoprintjs__scroll_div"),T=d("<div>").appendTo(M),O=d("<canvas></canvas>").attr({width:"0px",height:"0px"}).css({position:"absolute",top:"0px",left:"0px"}).addClass("noselect"),I=d("<div>").css({position:"absolute"}),P=d("<div>").css({position:"absolute",outline:"solid 1px black",display:"none"}).addClass("noselect"),j=d("<canvas></canvas>").attr("width",300).attr("height",300).css({position:"absolute",top:"0px",left:"0px","z-index":0}).addClass("noselect"),D=d("<canvas></canvas>").attr("width",300).attr("height",300).css({position:"absolute",top:"0px",left:"0px","z-index":1}).addClass("noselect");y.appendTo(f),k.appendTo(f),S.appendTo(f),I.appendTo(f),C.appendTo(g),P.appendTo(a),E.appendTo(k),O.appendTo(k),M.appendTo(k),M.on("mousemove mousedown mouseup",function(e){O.trigger(e)}),j.appendTo(P),D.appendTo(P),this.$ctr=a,this.$oncoprint_ctr=f,this.$cell_div=k,this.$legend_div=C,this.$track_options_div=S,this.$track_info_div=I,this.$dummy_scroll_div=M,this.$minimap_div=P,this.$cell_canvas=E,this.$cell_overlay_canvas=O,this.model=new r,this.cell_view=new o(k,E,O,T,this.model,new u(m),function(e,t){var r=n.model.getIdsInLeftInterval(e,t);n.setHorzZoom(n.model.getHorzZoomToFit(n.cell_view.visible_area_width,r)),n.$dummy_scroll_div.scrollLeft(n.model.getZoomedColumnLeft(r[0])),n.id_clipboard=r},function(){var e=null,t=null;return function(r,o){null===r?(t=null,n.highlightTrack(null),clearTimeout(e)):t!==r&&(n.highlightTrack(null),clearTimeout(e),t=r,e=setTimeout(function(){n.highlightTrack(t)},250))}}()),this.minimap_view=new p(P,j,D,this.model,this.cell_view,150,150,function(e,t){n.setScroll(e,t)},function(e){n.setViewport(e.col,e.scroll_y_proportion,e.num_cols,e.zoom_y)},function(e){var t=n.cell_view.getViewportOncoprintSpace(n.model),r=(t.left+t.right)/2,o=Math.floor(r/(n.model.getCellWidth(!0)+n.model.getCellPadding(!0)));n.setHorzZoom(e);var i=n.cell_view.getViewportOncoprintSpace(n.model),a=o*(n.model.getCellWidth()+n.model.getCellPadding()),s=n.model.getHorzZoom()*(i.right-i.left)/2;n.setHorzScroll(a-s)},function(e){var t=n.cell_view.getViewportOncoprintSpace(n.model),r=(t.top+t.bottom)/2;n.setVertZoom(e);var o=n.cell_view.getViewportOncoprintSpace(n.model),i=n.model.getVertZoom()*(o.bottom-o.top)/2;n.setVertScroll(r*n.model.getVertZoom()-i)},function(){_(n);var e=n.model.getZoomedColumnLeft();n.setHorzScroll(Math.min.apply(null,n.keep_horz_zoomed_to_fit_ids.map(function(t){return e[t]})))},function(){n.setMinimapVisible(!1)}),this.track_options_view=new s(S,function(e){var t=n.model.getContainingTrackGroup(e),r=t.indexOf(e);if(r>0){var o=null;r>=2&&(o=t[r-2]),n.moveTrack(e,o)}},function(e){var t=n.model.getContainingTrackGroup(e),r=t.indexOf(e);r<t.length-1&&n.moveTrack(e,t[r+1])},function(e){n.removeTrack(e)},function(e,t){n.setTrackSortDirection(e,t)}),this.track_info_view=new c(I),this.label_view=new i(y,this.model,new u(m,{noselect:!0})),this.label_view.setDragCallback(function(e,t){n.moveTrack(e,t)}),this.legend_view=new l(C,10,20),this.keep_sorted=!1,this.keep_horz_zoomed_to_fit=!1,this.keep_horz_zoomed_to_fit_ids=[];this.cell_view,this.model;this.target_dummy_scroll_left=0,this.target_dummy_scroll_top=0,function(e){M.scroll(function(t){var r=M.scrollLeft(),o=M.scrollTop();if(r!==n.target_dummy_scroll_left||o!==n.target_dummy_scroll_top){n.target_dummy_scroll_left=r,n.target_dummy_scroll_top=o;var i=x(e),a=i.left,s=i.top,l=a>0?r/a:0,u=s>0?o/s:0;l=h(l,0,1),u=h(u,0,1);var c=b(n),p=w(n),f=Math.round(c*l),d=Math.round(p*u);n.keep_horz_zoomed_to_fit=!1,A(n,f,d)}})}(n),this.horz_zoom_callbacks=[],this.minimap_close_callbacks=[],d(window).resize(function(){v(n)}),this.id_clipboard=[],this.clipboard_change_callbacks=[],this.pending_resize_and_organize=!1}var t=function(){var e=0;return function(){return e+=1}}(),n=function(e){e.model.rendering_suppressed_depth>0||e.$legend_div.css({top:e.model.getCellViewHeight()+30})},m=function(e){e.model.rendering_suppressed_depth>0||setTimeout(function(){g(e),n(e)},0)},g=function(e){e.$ctr.css({"min-height":e.model.getCellViewHeight()+Math.max(e.$legend_div.outerHeight(),e.$minimap_div.is(":visible")?e.$minimap_div.outerHeight():0)+30})},v=function(e){if(!(e.model.rendering_suppressed_depth>0)){var t=d(e.ctr_selector).width();if(0===t)return void(e.pending_resize_and_organize=!0);e.$track_options_div.css({left:e.label_view.getWidth()}),e.$track_info_div.css({left:e.label_view.getWidth()+e.track_options_view.getWidth()});var r=e.label_view.getWidth()+e.track_options_view.getWidth()+e.track_info_view.getWidth();e.$cell_div.css("left",r),e.cell_view.setWidth(t-r-20,e.model),n(e),e.legend_view.setWidth(t-e.$minimap_div.outerWidth()-20,e.model),g(e),e.$ctr.css({"min-width":t}),setTimeout(function(){e.keep_horz_zoomed_to_fit&&_(e)},0)}},y=function(e){e.model.rendering_suppressed_depth>0||setTimeout(function(){v(e)},0)},b=function(e){return Math.max(0,e.model.getOncoprintWidth()-e.cell_view.getWidth())},w=function(e){return Math.max(0,e.model.getOncoprintHeight()-e.model.getCellViewHeight())},x=function(e){var t=e.cell_view.getDummyScrollDivClientSize();return{left:Math.max(0,e.$dummy_scroll_div[0].scrollWidth-t.width),top:Math.max(0,e.$dummy_scroll_div[0].scrollHeight-t.height)}};e.prototype.setMinimapVisible=function(e){this.webgl_unavailable||(e?this.$minimap_div.css({display:"block",top:this.model.getCellViewHeight()+30,left:d(this.ctr_selector).width()-this.$minimap_div.outerWidth()-10}):(this.$minimap_div.css("display","none"),k(this)),y(this))},e.prototype.scrollTo=function(e){this.webgl_unavailable||this.$dummy_scroll_div.scrollLeft(e)},e.prototype.onHorzZoom=function(e){this.webgl_unavailable||this.horz_zoom_callbacks.push(e)},e.prototype.onMinimapClose=function(e){this.webgl_unavailable||this.minimap_close_callbacks.push(e)},e.prototype.moveTrack=function(e,t){this.webgl_unavailable||(this.model.moveTrack(e,t),this.cell_view.moveTrack(this.model),this.label_view.moveTrack(this.model),this.track_options_view.moveTrack(this.model),this.track_info_view.moveTrack(this.model),this.minimap_view.moveTrack(this.model,this.cell_view),this.keep_sorted&&this.model.isSortAffected([e,t],"track")&&this.sort(),y(this))},e.prototype.setTrackGroupOrder=function(e,t,n){this.webgl_unavailable||(this.model.setTrackGroupOrder(e,t),this.cell_view.setTrackGroupOrder(this.model),this.label_view.setTrackGroupOrder(this.model),this.track_options_view.setTrackGroupOrder(this.model),this.track_info_view.setTrackGroupOrder(this.model),!n&&this.keep_sorted&&this.model.isSortAffected(e,"group")&&this.sort(),y(this))},e.prototype.setTrackGroupLegendOrder=function(e){this.webgl_unavailable||(this.model.setTrackGroupLegendOrder(e),this.legend_view.setTrackGroupLegendOrder(this.model),y(this))},e.prototype.keepSorted=function(e){this.webgl_unavailable||(this.keep_sorted=void 0===e||e,this.keep_sorted&&this.sort())},e.prototype.addTracks=function(e){if(!this.webgl_unavailable){var n=[];return e=e.map(function(e){return e.track_id=t(),e.rule_set=a(e.rule_set_params),n.push(e.track_id),e}),this.model.addTracks(e),this.cell_view.addTracks(this.model,n),this.label_view.addTracks(this.model,n),this.track_options_view.addTracks(this.model),this.track_info_view.addTracks(this.model),this.legend_view.addTracks(this.model),this.minimap_view.addTracks(this.model,this.cell_view),this.keep_sorted&&this.model.isSortAffected(n,"track")&&this.sort(),y(this),n}},e.prototype.removeTrack=function(e){this.webgl_unavailable||(this.model.removeTrack(e),this.cell_view.removeTrack(this.model,e),this.label_view.removeTrack(this.model,e),this.track_options_view.removeTrack(this.model,e),this.track_info_view.removeTrack(this.model),this.legend_view.removeTrack(this.model),this.minimap_view.removeTrack(this.model,this.cell_view),this.keep_sorted&&this.model.isSortAffected(e,"track")&&this.sort(),y(this))},e.prototype.removeTracks=function(e){if(!this.webgl_unavailable){this.keepSorted(!1),this.suppressRendering();for(var t=0;t<e.length;t++)this.removeTrack(e[t]);this.keepSorted(!0),this.releaseRendering()}},e.prototype.getTracks=function(){if(!this.webgl_unavailable)return this.model.getTracks().slice()},e.prototype.removeAllTracks=function(){if(!this.webgl_unavailable){var e=this.model.getTracks();this.removeTracks(e)}},e.prototype.setHorzZoomToFit=function(e){this.webgl_unavailable||(this.keep_horz_zoomed_to_fit=!0,this.updateHorzZoomToFitIds(e),_(this))},e.prototype.updateHorzZoomToFitIds=function(e){this.webgl_unavailable||(this.keep_horz_zoomed_to_fit_ids=e.slice(),this.keep_horz_zoomed_to_fit&&_(this))};var _=function(e){e.setHorzZoom(S(e,e.keep_horz_zoomed_to_fit_ids),!0)},S=function(e,t){return t=t||[],e.model.getHorzZoomToFit(e.cell_view.visible_area_width,t)},C=function(e){for(var t=0;t<e.horz_zoom_callbacks.length;t++)e.horz_zoom_callbacks[t](e.model.getHorzZoom())},k=function(e){for(var t=0;t<e.minimap_close_callbacks.length;t++)e.minimap_close_callbacks[t]()};e.prototype.getHorzZoom=function(){if(!this.webgl_unavailable)return this.model.getHorzZoom()},e.prototype.setHorzZoom=function(e,t){if(!this.webgl_unavailable)return this.keep_horz_zoomed_to_fit=this.keep_horz_zoomed_to_fit&&t,this.model.setHorzZoom(e),this.cell_view.setHorzZoom(this.model),this.minimap_view.setHorzZoom(this.model,this.cell_view),C(this),this.model.getHorzZoom()},e.prototype.getVertZoom=function(){if(!this.webgl_unavailable)return this.model.getVertZoom()},e.prototype.setVertZoom=function(e){if(!this.webgl_unavailable)return this.model.setVertZoom(e),this.cell_view.setVertZoom(this.model,e),this.label_view.setVertZoom(this.model,e),this.track_info_view.setVertZoom(this.model),this.track_options_view.setVertZoom(this.model),this.minimap_view.setVertZoom(this.model,this.cell_view),y(this),this.model.getVertZoom()};var A=function(e,t,n){t=Math.min(t,b(e)),n=Math.min(n,w(e)),e.model.setScroll(t,n),e.cell_view.setScroll(e.model),e.label_view.setScroll(e.model),e.track_info_view.setScroll(e.model),e.track_options_view.setScroll(e.model),e.minimap_view.setScroll(e.model,e.cell_view)},E=function(e){var t=e.model.getHorzScroll(),n=e.model.getVertScroll(),r=b(e),o=w(e),i=r>0?t/r:0,a=o>0?n/o:0;i=h(i,0,1),a=h(a,0,1);var s=x(e),l=s.left,u=s.top;e.target_dummy_scroll_left=Math.round(i*l),e.target_dummy_scroll_top=Math.round(a*u),e.$dummy_scroll_div.scrollLeft(e.target_dummy_scroll_left),e.$dummy_scroll_div.scrollTop(e.target_dummy_scroll_top)};return e.prototype.setScroll=function(e,t){this.webgl_unavailable||(A(this,e,t),E(this))},e.prototype.setZoom=function(e,t){this.webgl_unavailable||(this.model.setZoom(e,t),this.cell_view.setZoom(this.model),this.label_view.setZoom(this.model),this.track_info_view.setZoom(this.model),this.track_options_view.setZoom(this.model),this.minimap_view.setZoom(this.model,this.cell_view))},e.prototype.setHorzScroll=function(e){if(!this.webgl_unavailable)return this.model.setHorzScroll(Math.min(e,b(this))),this.cell_view.setHorzScroll(this.model),this.label_view.setHorzScroll(this.model),this.track_info_view.setHorzScroll(this.model),this.track_options_view.setHorzScroll(this.model),this.minimap_view.setHorzScroll(this.model,this.cell_view),E(this),this.model.getHorzScroll()},e.prototype.setVertScroll=function(e){if(!this.webgl_unavailable)return this.model.setVertScroll(Math.min(e,w(this))),this.cell_view.setVertScroll(this.model),this.label_view.setVertScroll(this.model),this.track_info_view.setVertScroll(this.model),this.track_options_view.setVertScroll(this.model),this.minimap_view.setVertScroll(this.model,this.cell_view),E(this),this.model.getVertScroll()},e.prototype.setViewport=function(e,t,n,r){if(!this.webgl_unavailable){var o=this.model.getHorzZoomToFitNumCols(this.cell_view.getWidth(),n);this.setZoom(o,r);var i=Math.min(e*(this.model.getCellWidth()+this.model.getCellPadding()),b(this)),a=Math.min(t*this.model.getOncoprintHeight(),w(this));this.setScroll(i,a),C(this)}},e.prototype.getTrackData=function(e){if(!this.webgl_unavailable)return this.model.getTrackData(e)},e.prototype.getTrackDataIdKey=function(e){if(!this.webgl_unavailable)return this.model.getTrackDataIdKey(e)},e.prototype.setTrackData=function(e,t,n){this.webgl_unavailable||(this.model.setTrackData(e,t,n),this.cell_view.setTrackData(this.model,e),this.legend_view.setTrackData(this.model),this.minimap_view.setTrackData(this.model,this.cell_view),this.keep_sorted&&this.model.isSortAffected(e,"track")&&this.sort(),y(this))},e.prototype.setTrackGroupSortPriority=function(e){this.webgl_unavailable||(this.model.setTrackGroupSortPriority(e),this.cell_view.setTrackGroupSortPriority(this.model),this.keep_sorted&&this.sort(),y(this))},e.prototype.setTrackSortDirection=function(e,t){if(!this.webgl_unavailable)return this.model.isTrackSortDirectionChangeable(e)&&(this.model.setTrackSortDirection(e,t),this.keep_sorted&&this.model.isSortAffected(e,"track")&&this.sort()),this.model.getTrackSortDirection(e)},e.prototype.setTrackSortComparator=function(e,t){this.webgl_unavailable||(this.model.setTrackSortComparator(e,t),this.keep_sorted&&this.model.isSortAffected(e,"track")&&this.sort())},e.prototype.getTrackSortDirection=function(e){if(!this.webgl_unavailable)return this.model.getTrackSortDirection(e)},e.prototype.setTrackInfo=function(e,t){this.webgl_unavailable||(this.model.setTrackInfo(e,t),this.track_info_view.setTrackInfo(this.model))},e.prototype.setTrackTooltipFn=function(e,t){this.webgl_unavailable||this.model.setTrackTooltipFn(e,t)},e.prototype.sort=function(){if(!this.webgl_unavailable){var e=this;this.model.sort().then(function(t){e.cell_view.sort(e.model),e.minimap_view.sort(e.model,e.cell_view),t&&e.setTrackGroupOrder(t.track_group_index,t.track_id_order,!0)})}},e.prototype.shareRuleSet=function(e,t){this.webgl_unavailable||(this.model.shareRuleSet(e,t),this.cell_view.shareRuleSet(this.model,t),this.legend_view.shareRuleSet(this.model),this.minimap_view.shareRuleSet(this.model,this.cell_view))},e.prototype.setRuleSet=function(e,t){this.webgl_unavailable||(this.model.setRuleSet(e,a(t)),this.cell_view.setRuleSet(this.model,e),this.legend_view.setRuleSet(this.model),this.minimap_view.setRuleSet(this.model,this.cell_view),y(this))},e.prototype.setSortConfig=function(e){this.webgl_unavailable||(this.model.setSortConfig(e),this.cell_view.setSortConfig(this.model),this.track_options_view.setSortConfig(this.model),this.keep_sorted&&this.sort())},e.prototype.setIdOrder=function(e){this.webgl_unavailable||(this.model.setIdOrder(e),this.cell_view.setIdOrder(this.model,e),this.minimap_view.setIdOrder(this.model,this.cell_view),this.keep_sorted&&this.sort())},e.prototype.disableInteraction=function(){this.webgl_unavailable||this.track_options_view.disableInteraction()},e.prototype.enableInteraction=function(){this.webgl_unavailable||this.track_options_view.enableInteraction()},e.prototype.suppressRendering=function(){this.webgl_unavailable||(this.model.rendering_suppressed_depth+=1,this.label_view.suppressRendering(),this.cell_view.suppressRendering(),this.track_options_view.suppressRendering(),this.track_info_view.suppressRendering(),this.legend_view.suppressRendering(),this.minimap_view.suppressRendering())},e.prototype.releaseRendering=function(){this.webgl_unavailable||(this.model.rendering_suppressed_depth-=1,this.model.rendering_suppressed_depth=Math.max(0,this.model.rendering_suppressed_depth),0===this.model.rendering_suppressed_depth&&(this.label_view.releaseRendering(this.model),this.cell_view.releaseRendering(this.model),this.track_options_view.releaseRendering(this.model),this.track_info_view.releaseRendering(this.model),this.legend_view.releaseRendering(this.model),this.minimap_view.releaseRendering(this.model,this.cell_view),y(this)))},e.prototype.triggerPendingResizeAndOrganize=function(){this.webgl_unavailable||this.pending_resize_and_organize&&(this.pending_resize_and_organize=!1,y(this))},e.prototype.hideIds=function(e,t){this.webgl_unavailable||(this.model.hideIds(e,t),this.cell_view.hideIds(this.model),this.minimap_view.hideIds(this.model,this.cell_view))},e.prototype.hideTrackLegends=function(e){this.webgl_unavailable||(e=[].concat(e),this.model.hideTrackLegends(e),this.legend_view.hideTrackLegends(this.model),m(this))},e.prototype.showTrackLegends=function(e){this.webgl_unavailable||(e=[].concat(e),this.model.showTrackLegends(e),this.legend_view.showTrackLegends(this.model),m(this))},e.prototype.setCellPaddingOn=function(e){this.webgl_unavailable||(this.model.setCellPaddingOn(e),this.cell_view.setCellPaddingOn(this.model))},e.prototype.toSVG=function(e){if(!this.webgl_unavailable){var t=f.svg(10,10);this.$ctr.append(t);var n=f.group(0,0);t.appendChild(n);var r=f.bgrect(10,10,"#ffffff");e&&n.appendChild(r);var o=this.label_view.toSVGGroup(this.model,!0,0,0);n.appendChild(o);var i=o.getBBox().width+30,a=this.track_info_view.toSVGGroup(this.model,i,0);n.appendChild(a);var s=i+a.getBBox().width+10;n.appendChild(this.cell_view.toSVGGroup(this.model,s,0)),n.appendChild(this.legend_view.toSVGGroup(this.model,0,o.getBBox().y+o.getBBox().height+20));var l=n.getBBox(),u=l.x+l.width,c=l.y+l.height;return t.setAttribute("width",u),t.setAttribute("height",c),e&&(r.setAttribute("width",u),r.setAttribute("height",c)),t.parentNode.removeChild(t),t}},e.prototype.toCanvas=function(e,t){if(!this.webgl_unavailable){var n=this.toSVG(!0);n.setAttribute("xmlns","http://www.w3.org/2000/svg");var r=parseInt(n.getAttribute("width"),10),o=parseInt(n.getAttribute("height"),10),i=document.createElement("canvas");t=t||1;var a=r*t>8192||o*t>8192;i.setAttribute("width",Math.min(8192,r*t)),i.setAttribute("height",Math.min(8192,o*t));var s=document.createElement("div");s.appendChild(n);var l=s.innerHTML,u="data:image/svg+xml;base64,"+window.btoa(l),c=i.getContext("2d");c.setTransform(t,0,0,t,0,0);var p=new Image;return p.onload=function(){c.drawImage(p,0,0),e(i,a)},p.onerror=function(){console.log("IMAGE LOAD ERROR")},p.src=u,p}},e.prototype.toDataUrl=function(e){this.webgl_unavailable||this.toCanvas(function(t){e(t.toDataURL())})},e.prototype.highlightTrack=function(e){this.webgl_unavailable||this.label_view.highlightTrack(e,this.model)},e.prototype.getIdOrder=function(e){if(!this.webgl_unavailable)return this.model.getIdOrder(e)},e.prototype.setIdClipboardContents=function(e){if(!this.webgl_unavailable){this.id_clipboard=e.slice();for(var t=0;t<this.clipboard_change_callbacks.length;t++)this.clipboard_change_callbacks[t](e)}},e.prototype.getIdClipboardContents=function(){if(!this.webgl_unavailable)return this.id_clipboard.slice()},e.prototype.onClipboardChange=function(e){this.webgl_unavailable||this.clipboard_change_callbacks.push(e)},e}();e.exports=m},function(e,t){e.exports=function(){Math.log2=Math.log2||function(e){return Math.log(e)/Math.LN2}}()},function(e,t,n){function r(e,t){return void 0===e?t:e}var o=n(4),i=n(14),a=n(5),s=n(15),l=n(0),u=function(){function e(){this.union_count={},this.sets={}}var t=function(e){var t={};for(var n in e)void 0!==e[n]&&(t[n]=!0);return t};return e.prototype.putSet=function(e,t){this.removeSet(e),this.sets[e]=t;this.union_count;for(var n in t)t[n]&&(this.union_count[n]=this.union_count[n]||0,this.union_count[n]+=1)},e.prototype.removeSet=function(e){var t=this.union_count,n=this.sets[e]||{};for(var r in n)n[r]&&(t[r]-=1,0===t[r]&&delete t[r]);delete this.sets[e]},e.prototype.getUnion=function(){return t(this.union_count)},e}(),c=function(e){for(var t={},n=[],r=0;r<e.length;r++)void 0===t[e[r]]&&(t[e[r]]=!0,n.push(e[r]));return n},p=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},f=function(e,t,n){return Math.min(n,Math.max(t,e))},d=function(){function e(e,t,n,o,i,s){var l=this;this.sort_config={},this.rendering_suppressed_depth=0,this.max_height=500,this.cell_width=r(i,6),this.horz_zoom=r(n,1),this.vert_zoom=r(o,1),this.horz_scroll=0,this.vert_scroll=0,this.bottom_padding=0,this.track_group_padding=r(s,10),this.cell_padding=r(e,3),this.cell_padding_on=r(t,!0),this.cell_padding_off_cell_width_threshold=2,this.cell_padding_off_because_of_zoom=this.getCellWidth()<this.cell_padding_off_cell_width_threshold,this.id_order=[],this.hidden_ids={},this.track_group_legend_order=[],this.track_label={},this.track_description={},this.cell_height={},this.track_padding={},this.track_data_id_key={},this.track_tooltip_fn={},this.track_removable={},this.track_remove_callback={},this.track_sort_cmp_fn={},this.track_sort_direction_changeable={},this.track_sort_direction={},this.track_sort_direction_change_callback={},this.track_data={},this.track_rule_set_id={},this.track_active_rules={},this.track_info={},this.track_has_column_spacing={},this.rule_sets={},this.rule_set_active_rules={},this.visible_id_order=new a([],function(){var e=l.hidden_ids;return l.id_order.filter(function(t){return!e[t]})}),this.track_id_to_datum=new a({},function(e,t){var n=e.track_id_to_datum.get();if(null!==e.getContainingTrackGroup(t)){for(var r={},o=e.getTrackData(t)||[],i=e.getTrackDataIdKey(t)||"",a=0;a<o.length;a++)r[o[a][i]]=o[a];n[t]=r}else delete n[t];return n}),this.track_present_ids=new a(new u,function(e,t){var n=e.track_present_ids.get();if(null!==e.getContainingTrackGroup(t)){for(var r={},o=e.getTrackData(t)||[],i=e.getTrackDataIdKey(t)||"",a=0;a<o.length;a++)r[o[a][i]]=!0;n.putSet(t,r)}else n.removeSet(t);return n}),this.present_ids=new a({},function(){return l.track_present_ids.get().getUnion()}),this.track_present_ids.addBoundProperty(this.present_ids),this.id_to_index=new a({},function(){for(var e={},t=l.getIdOrder(!0),n=0;n<t.length;n++)e[t[n]]=n;return e}),this.visible_id_to_index=new a({},function(){for(var e={},t=l.getIdOrder(),n=0;n<t.length;n++)e[t[n]]=n;return e}),this.visible_id_order.addBoundProperty(this.visible_id_to_index),this.track_groups=[],this.track_group_sort_priority=[],this.track_group_header=[],this.track_tops=new a({},function(){for(var e={},t=l.getTrackGroups(),n=0,r=0;r<t.length;r++){var o=t[r];l.getTrackGroupHeader(r).length>0&&o.length>0&&(n+=l.getTrackGroupHeaderSize());for(var i=0;i<o.length;i++){var a=o[i];e[a]=n,n+=l.getTrackHeight(a,!0)}o.length>0&&(n+=l.getTrackGroupPadding(!0))}return e}),this.cell_tops=new a({},function(){var e=l.track_tops.get(),t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]+l.getTrackPadding(n,!0));return t}),this.label_tops=new a({},function(){return l.cell_tops.get()}),this.track_tops.addBoundProperty(this.cell_tops),this.cell_tops.addBoundProperty(this.label_tops),this.track_tops_zoomed=new a({},function(){for(var e={},t=l.getTrackGroups(),n=0,r=0;r<t.length;r++){for(var o=t[r],i=0;i<o.length;i++){var a=o[i];e[a]=n,n+=l.getTrackHeight(a)}o.length>0&&(n+=l.getTrackGroupPadding())}return e}),this.cell_tops_zoomed=new a({},function(){var e=l.track_tops_zoomed.get(),t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]+l.getTrackPadding(n));return t}),this.label_tops_zoomed=new a({},function(){return l.cell_tops_zoomed.get()}),this.track_tops.addBoundProperty(this.track_tops_zoomed),this.track_tops_zoomed.addBoundProperty(this.cell_tops_zoomed),this.cell_tops_zoomed.addBoundProperty(this.label_tops_zoomed),this.column_left=new a({},function(){for(var e=l.getCellWidth(!0),t=l.getCellPadding(!0),n={},r=l.getIdOrder(),o=0;o<r.length;o++)n[r[o]]=o*(e+t);return n}),this.zoomed_column_left=new a({},function(){for(var e=l.getCellWidth(),t=l.getCellPadding(),n={},r=l.getIdOrder(),o=0;o<r.length;o++)n[r[o]]=o*(e+t);return n}),this.column_left_no_padding=new a({},function(){for(var e=l.getCellWidth(!0),t={},n=l.getIdOrder(),r=0;r<n.length;r++)t[n[r]]=r*e;return t}),this.column_left.addBoundProperty(this.zoomed_column_left),this.column_left.addBoundProperty(this.column_left_no_padding),this.precomputed_comparator=new a({},function(e,t){var n=e.precomputed_comparator.get();return n[t]=new h(e.getTrackData(t),e.getTrackSortComparator(t),e.getTrackSortDirection(t),e.getTrackDataIdKey(t)),n})}e.prototype.toggleCellPadding=function(){return this.cell_padding_on=!this.cell_padding_on,this.column_left.update(),this.cell_padding_on},e.prototype.getCellPadding=function(e,t){return this.cell_padding*(e?1:this.horz_zoom)*+this.cell_padding_on*(t?1:+!this.cell_padding_off_because_of_zoom)},e.prototype.getHorzZoom=function(){return this.horz_zoom},e.prototype.getHorzZoomToFitNumCols=function(e,t){var n,r=this.getCellWidth(!0),o=f(e/(t*(r+this.cell_padding)),0,1),i=f(e/(t*r),0,1);if(this.cell_padding_on)if(r*o<this.cell_padding_off_cell_width_threshold)if(r*i>=this.cell_padding_off_cell_width_threshold){var a=this.cell_padding_off_cell_width_threshold/r,s=e/(a*r),l=Math.ceil(s);n=e/(l*r)}else n=i;else n=o;else n=i;return n},e.prototype.getHorzZoomToFit=function(e,t){if(t=t||[],0===t.length)return 1;for(var n=this.getVisibleIdToIndexMap(),r=t.map(function(e){return n[e]}),o=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY,a=0;a<r.length;a++)o=Math.max(r[a],o),i=Math.min(r[a],i);var s=o-i+1;return this.getHorzZoomToFitNumCols(e,s)},e.prototype.getMinHorzZoom=function(){return Math.min(100/(this.getIdOrder().length*this.getCellWidth(!0)+(this.getIdOrder().length-1)*this.getCellPadding(!0)),1)},e.prototype.getMinVertZoom=function(){return this.max_height/this.getOncoprintHeight(!0)},e.prototype.setHorzScroll=function(e){return this.horz_scroll=Math.max(0,e),this.horz_scroll},e.prototype.setVertScroll=function(e){return this.vert_scroll=Math.max(0,e),this.vert_scroll},e.prototype.setScroll=function(e,t){this.setHorzScroll(e),this.setVertScroll(t)},e.prototype.getHorzScroll=function(){return this.horz_scroll},e.prototype.getVertScroll=function(){return this.vert_scroll},e.prototype.setZoom=function(e,t){this.setHorzZoom(e),this.setVertZoom(t)};var t=function(e,t){e.cell_padding_off_because_of_zoom=t,e.column_left.update()};e.prototype.setHorzZoom=function(e){var n=this.getMinHorzZoom();return this.horz_zoom=f(e,n,1),this.column_left.update(),this.getCellWidth()<this.cell_padding_off_cell_width_threshold&&!this.cell_padding_off_because_of_zoom?t(this,!0):this.getCellWidth()>=this.cell_padding_off_cell_width_threshold&&this.cell_padding_off_because_of_zoom&&t(this,!1),this.horz_zoom},e.prototype.getVertZoom=function(){return this.vert_zoom},e.prototype.setVertZoom=function(e){var t=this.getMinVertZoom();return this.vert_zoom=f(e,t,1),this.track_tops.update(),this.vert_zoom},e.prototype.hideTrackLegends=function(e){e=[].concat(e);for(var t=0;t<e.length;t++)this.getRuleSet(e[t]).exclude_from_legend=!0},e.prototype.showTrackLegends=function(e){e=[].concat(e);for(var t=0;t<e.length;t++)this.getRuleSet(e[t]).exclude_from_legend=!1};var n=function(e,t){for(var n=e.track_rule_set_id[t],r=e.track_active_rules[t],o=e.rule_set_active_rules[n],i=Object.keys(r),a=0;a<i.length;a++){var s=i[a];o.hasOwnProperty(s)&&(o[s]-=1,o[s]<=0&&delete o[s])}e.track_active_rules[t]={}},i=function(e,t,r){n(e,t),e.track_active_rules[t]=r;for(var o=e.track_rule_set_id[t],i=e.rule_set_active_rules[o],a=Object.keys(r),s=0;s<a.length;s++){var l=a[s];i[l]=i[l]||0,i[l]+=1}};e.prototype.getIdentifiedShapeListList=function(e,t,n){var r={},o=this.getTrackData(e),a=this.getTrackDataIdKey(e),s=this.getTrackHasColumnSpacing(e),l=this.getCellWidth(t)+(s?0:this.getCellPadding(t,!0)),u=this.getRuleSet(e).apply(o,l,this.getCellHeight(e,t),r);i(this,e,r);var c=function(e,t){var n=parseFloat(e.z),r=parseFloat(t.z);return n<r?-1:n>r?1:0};return u.map(function(e,t){return n&&e.sort(c),{id:o[t][a],shape_list:e}})},e.prototype.getActiveRules=function(e){var t=this.rule_set_active_rules[e];return t?this.rule_sets[e].getRulesWithId().filter(function(e){return!!t[e.id]}):[]},e.prototype.getRuleSets=function(){for(var e=this,t=this.getTrackGroupLegendOrder(),n={},r=this.getTrackGroups(),o=[],i=0;i<t.length;i++)n[t[i]]=!0,o.push(r[t[i]]);for(var i=0;i<r.length;i++)n[i]||o.push(r[i]);var a=o.reduce(function(e,t){return e.concat(t)},[]),s=a.map(function(t){return e.track_rule_set_id[t]});return c(s).map(function(t){return e.rule_sets[t]})},e.prototype.getTrackHasColumnSpacing=function(e){return!!this.track_has_column_spacing[e]},e.prototype.getCellWidth=function(e){return this.cell_width*(e?1:this.horz_zoom)},e.prototype.getCellHeight=function(e,t){return this.cell_height[e]*(t?1:this.vert_zoom)},e.prototype.getTrackInfo=function(e){return this.track_info[e]},e.prototype.setTrackInfo=function(e,t){this.track_info[e]=t},e.prototype.getTrackHeight=function(e,t){return this.getCellHeight(e,t)+2*this.getTrackPadding(e,t)},e.prototype.getTrackPadding=function(e,t){return this.track_padding[e]*(t?1:this.vert_zoom)},e.prototype.getBottomPadding=function(){return this.bottom_padding},e.prototype.getTrackSortDirection=function(e){return this.track_sort_direction[e]},e.prototype.setTrackSortDirection=function(e,t,n){this.track_sort_direction[e]=t,n||this.track_sort_direction_change_callback[e](e,t),this.precomputed_comparator.update(this,e)},e.prototype.setCellPaddingOn=function(e){this.cell_padding_on=e,this.column_left.update()},e.prototype.getIdOrder=function(e){return e?this.id_order:this.visible_id_order.get()},e.prototype.getIdToIndexMap=function(){return this.id_to_index.get()},e.prototype.getVisibleIdToIndexMap=function(){return this.visible_id_to_index.get()},e.prototype.getHiddenIds=function(){var e=this.hidden_ids;return this.id_order.filter(function(t){return!!e[t]})},e.prototype.isSortAffected=function(e,t){e=[].concat(e);var n,r=this;return n="track"===t?e.map(function(e){return r.getContainingTrackGroupIndex(e)}):e,"cluster"!==this.sort_config.type||n.indexOf(this.sort_config.track_group_index)>-1},e.prototype.setIdOrder=function(e){this.id_order=e.slice(),Object.freeze(this.id_order),this.id_to_index.update(),this.visible_id_order.update(),this.column_left.update()},e.prototype.hideIds=function(e,t){t&&(this.hidden_ids={});for(var n=0,r=e.length;n<r;n++)this.hidden_ids[e[n]]=!0;this.visible_id_order.update(),this.column_left.update()},e.prototype.setTrackGroupOrder=function(e,t){this.track_groups[e]=t,this.track_tops.update()},e.prototype.moveTrackGroup=function(e,t){for(var n=[],r=[],o=this.track_groups[e],i=0;i<this.track_groups.length;i++)i!==e&&i!==t&&(n.push(this.track_groups[i]),r.push(this.track_group_header[i])),i===t&&(n.push(o),r.push(this.track_group_header[e]));return this.track_groups=n,this.track_group_header=r,this.track_tops.update(),this.track_groups},e.prototype.addTracks=function(e){for(var t=0;t<e.length;t++){var n=e[t];d(this,n.track_id,n.target_group,n.track_group_header,n.cell_height,n.track_padding,n.has_column_spacing,n.data_id_key,n.tooltipFn,n.removable,n.removeCallback,n.label,n.description,n.track_info,n.sortCmpFn,n.sort_direction_changeable,n.init_sort_direction,n.onSortDirectionChange,n.data,n.rule_set)}this.track_tops.update()};var d=function(e,t,n,o,i,a,s,l,u,c,p,f,d,h,m,g,v,y,b,w){for(e.track_label[t]=r(f,"Label"),e.track_description[t]=r(d,""),e.cell_height[t]=r(i,23),e.track_padding[t]=r(a,5),e.track_has_column_spacing[t]=r(s,!0),e.track_tooltip_fn[t]=r(u,function(e){return e+""}),e.track_removable[t]=r(c,!1),e.track_remove_callback[t]=r(p,function(){}),e.track_sort_cmp_fn[t]=r(m,function(){return 0}),e.track_sort_direction_changeable[t]=r(g,!1),e.track_sort_direction_change_callback[t]=r(y,function(){}),e.track_data[t]=r(b,[]),e.track_data_id_key[t]=r(l,"id"),e.track_info[t]=r(h,""),void 0!==w&&(e.rule_sets[w.rule_set_id]=w,e.rule_set_active_rules[w.rule_set_id]={},e.track_rule_set_id[t]=w.rule_set_id),e.track_active_rules[t]={},e.track_sort_direction[t]=r(v,1),n=r(n,0);n>=e.track_groups.length;)e.track_groups.push([]),e.track_group_header.push("");o&&(e.track_group_header[n]=o),e.track_groups[n].push(t),e.track_id_to_datum.update(e,t),e.track_present_ids.update(e,t),e.precomputed_comparator.update(e,t),e.setIdOrder(Object.keys(e.present_ids.get()))},m=function(e,t,n,r){var o;t=parseInt(t);var i;for(i=0;i<e.track_groups.length;i++)if(e.track_groups[i].indexOf(t)>-1){o=e.track_groups[i];break}return o?r?i:n?o:o.slice():null},g=function(e,t){for(var n=!1,r=e.getTracks(),o=0;o<r.length;o++)if(e.track_rule_set_id[r[o]]===t){n=!0;break}return n},v=function(e,t){delete e.rule_sets[t],delete e.rule_set_active_rules[t]};e.prototype.removeTrack=function(e){var t=this.track_rule_set_id[e];this.track_remove_callback[e](e),delete this.track_data[e],delete this.track_rule_set_id[e],delete this.track_label[e],delete this.cell_height[e],delete this.track_padding[e],delete this.track_data_id_key[e],delete this.track_tooltip_fn[e],delete this.track_removable[e],delete this.track_remove_callback[e],delete this.track_sort_cmp_fn[e],delete this.track_sort_direction_changeable[e],delete this.track_sort_direction[e],delete this.track_info[e],delete this.track_has_column_spacing[e];var n=m(this,e,!0);null!==n&&n.splice(n.indexOf(e),1),this.track_tops.update(),this.track_present_ids.update(this,e),this.track_id_to_datum.update(this,e),this.setIdOrder(Object.keys(this.present_ids.get())),g(this,t)||v(this,t)},e.prototype.getOverlappingCell=function(e,t){var n=this.getIdOrder(),r=this.getZoomedColumnLeft(),i=o(n,e,function(e){return r[e]},!0);if(-1===i)return null;var a=n[i],s=this.getTracks(),l=this.getCellTops(),u=o(s,t,function(e){return l[e]},!0);if(-1===u)return null;var c=s[u],p=r[a]+this.getCellWidth();return this.getTrackHasColumnSpacing(c)||(p+=this.getCellPadding()),e<=p&&t<l[c]+this.getCellHeight(c)?{id:a,track:c,top:l[c],left:r[a]}:null},e.prototype.getTrackDatum=function(e,t){var n=this.track_id_to_datum.get()[e][t];return void 0===n&&(n=null),n},e.prototype.getTrackTops=function(e){return void 0===e?p(this.track_tops.get()):this.track_tops.get()[e]},e.prototype.getZoomedTrackTops=function(e){return void 0===e?p(this.track_tops_zoomed.get()):this.track_tops_zoomed.get()[e]},e.prototype.getCellTops=function(e,t){return void 0===e?p((t?this.cell_tops:this.cell_tops_zoomed).get()):(t?this.cell_tops:this.cell_tops_zoomed).get()[e]},e.prototype.getLabelTops=function(e,t){return void 0===e?p((t?this.label_tops:this.label_tops_zoomed).get()):(t?this.label_tops:this.label_tops_zoomed).get()[e]},e.prototype.getContainingTrackGroup=function(e){return m(this,e,!1)},e.prototype.getContainingTrackGroupIndex=function(e){return m(this,e,!1,!0)},e.prototype.setTrackGroupHeader=function(e,t){this.track_group_header[e]=t,this.track_tops.update()},e.prototype.getTrackGroupHeader=function(e){return this.track_group_header[e]||""},e.prototype.getTrackGroupHeaderSize=function(){return 20},e.prototype.getTrackGroups=function(){return this.track_groups},e.prototype.getTracks=function(){for(var e=[],t=0;t<this.track_groups.length;t++)for(var n=0;n<this.track_groups[t].length;n++)e.push(this.track_groups[t][n]);return e},e.prototype.getIdsInLeftInterval=function(e,t){var n=this.getCellWidth(),r=this.getCellPadding(),o=this.getIdOrder(),i=Math.floor(e/(n+r));e-i*(n+r)>n&&(i+=1);var a=Math.floor(t/(n+r));return o.slice(i,a+1)},e.prototype.getColumnLeft=function(e){return void 0===e?this.column_left.get():this.column_left.get()[e]},e.prototype.getColumnLeftNoPadding=function(e){return void 0===e?this.column_left_no_padding.get():this.column_left_no_padding.get()[e]},e.prototype.getZoomedColumnLeft=function(e){return void 0===e?this.zoomed_column_left.get():this.zoomed_column_left.get()[e]},e.prototype.getOncoprintHeight=function(e){var t=this.getTracks(),n=t[t.length-1];return(e?this.getTrackTops(n):this.getZoomedTrackTops(n))+this.getTrackHeight(n,e)+this.getBottomPadding()},e.prototype.getOncoprintWidth=function(e){return this.getIdOrder().length*(this.getCellWidth(e)+this.getCellPadding(e))},e.prototype.getOncoprintWidthNoColumnPadding=function(e){return this.getIdOrder().length*this.getCellWidth(e)},e.prototype.getCellViewHeight=function(){return Math.min(this.max_height,this.getOncoprintHeight())},e.prototype.getCellViewWidth=function(){return this.getOncoprintWidth()},e.prototype.moveTrack=function(e,t){var n=m(this,e,!0);if(null!==n){n.splice(n.indexOf(e),1);var r=null===t?0:n.indexOf(t)+1;n.splice(r,0,e)}this.track_tops.update()},e.prototype.getTrackLabel=function(e){return this.track_label[e]},e.prototype.getTrackDescription=function(e){return this.track_description[e]},e.prototype.getTrackTooltipFn=function(e){return this.track_tooltip_fn[e]},e.prototype.setTrackTooltipFn=function(e,t){this.track_tooltip_fn[e]=t},e.prototype.getTrackDataIdKey=function(e){return this.track_data_id_key[e]},e.prototype.getTrackGroupPadding=function(e){return this.track_group_padding*(e?1:this.vert_zoom)},e.prototype.isTrackRemovable=function(e){return this.track_removable[e]},e.prototype.isTrackSortDirectionChangeable=function(e){return this.track_sort_direction_changeable[e]},e.prototype.getRuleSet=function(e){return this.rule_sets[this.track_rule_set_id[e]]},e.prototype.shareRuleSet=function(e,t){i(this,t,{});var n=this.track_rule_set_id[t];this.track_rule_set_id[t]=this.track_rule_set_id[e],g(this,n)||v(this,n)},e.prototype.setRuleSet=function(e,t){i(this,e,{});var n=this.track_rule_set_id[e];this.rule_sets[t.rule_set_id]=t,this.rule_set_active_rules[t.rule_set_id]={},this.track_rule_set_id[e]=t.rule_set_id,g(this,n)||v(this,n)},e.prototype.getTrackSortComparator=function(e){return this.track_sort_cmp_fn[e]},e.prototype.setTrackSortComparator=function(e,t){this.track_sort_cmp_fn[e]=t,this.precomputed_comparator.update(this,e)},e.prototype.getTrackData=function(e){return this.track_data[e]},e.prototype.clusterTrackGroup=function(e,t){for(var n=new l.Deferred,r={},o=this.getTrackGroups()[e],i=0;i<o.length;i++)for(var a=o[i],u=this.getTrackDataIdKey(a),c=this.getTrackData(a),p=0;p<c.length;p++){var f=c[p][u],d=t(c[p]);r[f]=r[f]||{},r[f][a]=d}var h=this;return l.when(s.hclusterColumns(r),s.hclusterTracks(r)).then(function(t,r){h.setIdOrder(t.map(function(e){return e.caseId})),n.resolve({track_group_index:e,track_id_order:r.map(function(e){return parseInt(e.entityId,10)})})}).fail(function(){n.reject()}),n.promise()},e.prototype.setTrackData=function(e,t,n){this.track_data[e]=t,this.track_data_id_key[e]=n,this.track_id_to_datum.update(this,e),this.track_present_ids.update(this,e),this.setIdOrder(Object.keys(this.present_ids.get())),this.precomputed_comparator.update(this,e)},e.prototype.computeTrackIdToDatum=function(e){this.track_id_to_datum[e]={};for(var t=this.track_data[e]||[],n=this.track_data_id_key[e],r=0;r<t.length;r++)this.track_id_to_datum[e][t[r][n]]=t[r]},e.prototype.setTrackGroupLegendOrder=function(e){this.track_group_legend_order=e.slice()},e.prototype.getTrackGroupLegendOrder=function(){return this.track_group_legend_order},e.prototype.setTrackGroupSortPriority=function(e){this.track_group_sort_priority=e,this.sort()};var y=function(e){var t=e.getIdOrder(!0).slice();t.sort(function(e,t){return e.localeCompare(t)}),e.setIdOrder(t)},b=function(e){var t,n=e.track_group_sort_priority,r=e.getTrackGroups();t=n.length<r.length?r:n.map(function(e){return r[e]});var o=t.reduce(function(e,t){return e.concat(t)},[]),i=e.precomputed_comparator.get(),a=e.getIdToIndexMap(),s=function(e,t){for(var n=0,r=0,s=0;s<o.length;s++){var l=i[o[s]].compare(e,t),u=Math.abs(l);if(u>r&&(n=l,r=u),1===r)break}return 0===n&&(n=a[e]<a[t]?-1:1),n>0?1:-1},l=e.getIdOrder(!0).slice();l.sort(s),e.setIdOrder(l)};return e.prototype.sort=function(){var e=new l.Deferred;return this.sort_config=this.sort_config||{},"alphabetical"===this.sort_config.type?(y(this),e.resolve()):"order"===this.sort_config.type?(this.setIdOrder(this.sort_config.order),e.resolve()):"cluster"===this.sort_config.type?this.clusterTrackGroup(this.sort_config.track_group_index,this.sort_config.clusterValueFn).then(function(t){e.resolve(t)}):(b(this),e.resolve()),e.promise()},e.prototype.setSortConfig=function(e){if(this.sort_config=e,"cluster"===this.sort_config.type)for(var t=this.getTrackGroups()[this.sort_config.track_group_index],n=0;n<t.length;n++)this.setTrackSortDirection(t[n],0,!0)},e.prototype.isTrackInClusteredGroup=function(e){return"cluster"===this.sort_config.type&&this.sort_config.track_group_index===this.getContainingTrackGroupIndex(e)},e}(),h=function(){function e(e,t,n,r){var o,i;"function"==typeof t?(o=t,i=t):(o=t.preferred,i=t.mandatory);var a=function(e){return function(t,r){if(0===n)return 0;var o=e(t,r);return 2===o?1:-2===o?-1:o*n}},s=a(o),l=a(i),u=e.sort(s);this.preferred_change_points=[],this.mandatory_change_points=[];for(var c=0;c<u.length&&c!==u.length-1;c++)0!==l(u[c],u[c+1])?this.mandatory_change_points.push(c):0!==s(u[c],u[c+1])&&this.preferred_change_points.push(c);this.id_to_index={};for(var c=0;c<u.length;c++)this.id_to_index[u[c][r]]=c}return e.prototype.compare=function(e,t){var n=this.id_to_index[e],r=this.id_to_index[t];if(void 0===n&&void 0===r)return 0;if(void 0===n)return 1;if(void 0===r)return-1;var o=!1;if(n===r)return 0;if(n>r){var a=n;n=r,r=a,o=!0}var s=0;return i(this.mandatory_change_points,function(e){return e},n,r)?s=-1:i(this.preferred_change_points,function(e){return e},n,r)&&(s=-.5),o&&(s*=-1),s},e}();e.exports=d},function(e,t){e.exports=function(e,t,n,r){for(var o,i,a=0,s=e.length,l=!1;;){if(a>=s)break;if(o=Math.floor((a+s)/2),(i=t(e[o]))>=r)s=o;else{if(!(i<n)){l=!0;break}a=o+1}}return l}},function(e,n,r){var o=r(16),i=function(e,n){var r=new o,i=new Object,a=new t.Deferred;return i.casesAndEntitites=e,i.dimension=n,r.postMessage(i),r.onmessage=function(e){a.resolve(e.data)},a.promise()},a=function(e){return i(e,"CASES")},s=function(e){return i(e,"ENTITIES")};e.exports={hclusterColumns:a,hclusterTracks:s}},function(e,t,n){e.exports=function(){return n(17)("/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 2);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\n  euclidean: function(v1, v2) {\n      var total = 0;\n      for (var i = 0; i < v1.length; i++) {\n         total += Math.pow(v2[i] - v1[i], 2);      \n      }\n      return Math.sqrt(total);\n   },\n   manhattan: function(v1, v2) {\n     var total = 0;\n     for (var i = 0; i < v1.length ; i++) {\n        total += Math.abs(v2[i] - v1[i]);      \n     }\n     return total;\n   },\n   max: function(v1, v2) {\n     var max = 0;\n     for (var i = 0; i < v1.length; i++) {\n        max = Math.max(max , Math.abs(v2[i] - v1[i]));      \n     }\n     return max;\n   }\n};\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar distances = __webpack_require__(0);\n\nfunction KMeans(centroids) {\n   this.centroids = centroids || [];\n}\n\nKMeans.prototype.randomCentroids = function(points, k) {\n   var centroids = points.slice(0); // copy\n   centroids.sort(function() {\n      return (Math.round(Math.random()) - 0.5);\n   });\n   return centroids.slice(0, k);\n}\n\nKMeans.prototype.classify = function(point, distance) {\n   var min = Infinity,\n       index = 0;\n\n   distance = distance || \"euclidean\";\n   if (typeof distance == \"string\") {\n      distance = distances[distance];\n   }\n\n   for (var i = 0; i < this.centroids.length; i++) {\n      var dist = distance(point, this.centroids[i]);\n      if (dist < min) {\n         min = dist;\n         index = i;\n      }\n   }\n\n   return index;\n}\n\nKMeans.prototype.cluster = function(points, k, distance, snapshotPeriod, snapshotCb) {\n   k = k || Math.max(2, Math.ceil(Math.sqrt(points.length / 2)));\n\n   distance = distance || \"euclidean\";\n   if (typeof distance == \"string\") {\n      distance = distances[distance];\n   }\n\n   this.centroids = this.randomCentroids(points, k);\n\n   var assignment = new Array(points.length);\n   var clusters = new Array(k);\n\n   var iterations = 0;\n   var movement = true;\n   while (movement) {\n      // update point-to-centroid assignments\n      for (var i = 0; i < points.length; i++) {\n         assignment[i] = this.classify(points[i], distance);\n      }\n\n      // update location of each centroid\n      movement = false;\n      for (var j = 0; j < k; j++) {\n         var assigned = [];\n         for (var i = 0; i < assignment.length; i++) {\n            if (assignment[i] == j) {\n               assigned.push(points[i]);\n            }\n         }\n\n         if (!assigned.length) {\n            continue;\n         }\n\n         var centroid = this.centroids[j];\n         var newCentroid = new Array(centroid.length);\n\n         for (var g = 0; g < centroid.length; g++) {\n            var sum = 0;\n            for (var i = 0; i < assigned.length; i++) {\n               sum += assigned[i][g];\n            }\n            newCentroid[g] = sum / assigned.length;\n\n            if (newCentroid[g] != centroid[g]) {\n               movement = true;\n            }\n         }\n\n         this.centroids[j] = newCentroid;\n         clusters[j] = assigned;\n      }\n\n      if (snapshotCb && (iterations++ % snapshotPeriod == 0)) {\n         snapshotCb(clusters);\n      }\n   }\n\n   return clusters;\n}\n\nKMeans.prototype.toJSON = function() {\n   return JSON.stringify(this.centroids);\n}\n\nKMeans.prototype.fromJSON = function(json) {\n   this.centroids = JSON.parse(json);\n   return this;\n}\n\nmodule.exports = KMeans;\n\nmodule.exports.kmeans = function(vectors, k) {\n   return (new KMeans()).cluster(vectors, k);\n}\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*\n * Copyright (c) 2016 The Hyve B.V.\n * This code is licensed under the GNU Affero General Public License,\n * version 3, or (at your option) any later version.\n */\n\n/*\n * This file is part of cBioPortal.\n *\n * cBioPortal is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar clusterfck = __webpack_require__(3);\nvar jStat = __webpack_require__(5);\n\n/**\n * \"Routing\" logic for this worker, based on given message.\n *\n * @param m : message object with m.dimension (CASES or ENTITIES) and m.casesAndEntitites\n *      which is the input for the clustering method.\n */\nonmessage = function(m) {\n    console.log('Clustering worker received message');\n    var result = null;\n    if (m.data.dimension === \"CASES\") {\n        result = hclusterCases(m.data.casesAndEntitites);\n    } else if (m.data.dimension === \"ENTITIES\") {\n        result = hclusterGeneticEntities(m.data.casesAndEntitites);\n    } else {\n        throw new Error(\"Illegal argument given to clustering-worker.js for m.data.dimension: \" + m.data.dimension);\n    }\n    console.log('Posting clustering result back to main script');\n    postMessage(result);\n}\n\n/**\n * Returns false if any value is a valid number != 0.0,\n * and true otherwise.\n */\nvar isAllNaNs = function(values) {\n    for (var i = 0; i < values.length; i++) {\n        var val = values[i];\n        if (!isNaN(val) && val != null && val != 0.0 ) {\n            return false;\n        }\n    }\n    return true;\n}\n\n/**\n * Distance measure using 1-spearman's correlation. This function does expect that item1 and item2\n * are an item than contains a item.preProcessedValueList attribute which is the ranked version\n * of item.orderedValueList.\n *\n */\nvar preRankedSpearmanDist = function(item1, item2) {\n    //rules for NaN values:\n    if (item1.isAllNaNs && item2.isAllNaNs) {\n        //return distance 0\n        return 0;\n    }\n    else if (item1.isAllNaNs || item2.isAllNaNs) {\n        //return large distance:\n        return 3;\n    }\n    //take the arrays from the preProcessedValueList:\n    var ranks1 = item1.preProcessedValueList;\n    var ranks2 = item2.preProcessedValueList;\n    //calculate spearman's rank correlation coefficient, using pearson's distance\n    //for correlation of the ranks:\n    var r = jStat.corrcoeff(ranks1, ranks2);\n    if (isNaN(r)) {\n        //assuming the ranks1 and ranks2 lists do not contain NaN entries (and this code DOES assume all missing values have been imputed by a valid number),\n        //this specific scenario should not occur, unless all values are the same (and given the same rank). In this case, there is no variation, and\n        //correlation returns NaN. In theory this could happen on small number of entities being clustered. We give this a large distance:\n        console.log(\"NaN in correlation calculation\");\n        r = -2;\n    }\n    return 1 - r;\n}\n\n/**\n * Prepares the data for using spearman method in the distance function.\n * It will pre-calculate ranks and deviation and store this in inputItems[x].preProcessedValueList.\n * This pre-calculation significantly improves the performance of the clustering step itself.\n */\nvar _prepareForDistanceFunction = function(inputItems) {\n    //pre-calculate ranks and configure to use last step of SPEARMAN as distance function, and\n    // split up into allNaN and notAllNaN\n    var allNaN = [];\n    var notAllNaN = [];\n    for (var i = 0; i < inputItems.length; i++) {\n        var inputItem = inputItems[i];\n        //check if all NaNs:\n        inputItem.isAllNaNs = isAllNaNs(inputItem.orderedValueList);\n        if (inputItem.isAllNaNs) {\n            allNaN.push(inputItem);\n            continue;\n        } else {\n            notAllNaN.push(inputItem);\n        }\n        //rank using fractional ranking:\n        var ranks = jStat.rank(inputItem.orderedValueList);\n        //calculate deviation:\n        inputItem.preProcessedValueList = ranks;\n    }\n    return {\n        notAllNaN: notAllNaN,\n        allNaN: allNaN\n    };\n}\n\n/**\n * @param casesAndEntitites: Object with sample(or patient)Id and map\n * of geneticEntity/value pairs. Example:\n *\n * var a =\n *  {\n *    \"TCGA-AO-AA98-01\":\n *    {\n *    \t\"TP53\": 0.045,\n *    \t\"BRA1\": -0.89\n *    }\n *   },\n *   ...\n *\n *   @return the reordered list of sample(or patient) ids, after clustering.\n */\nvar hclusterCases = function(casesAndEntitites) {\n    var refEntityList = null;\n    var inputItems = [];\n    //add orderedValueList to all items, so the values are\n    //compared in same order:\n    for (var caseId in casesAndEntitites) {\n        if (casesAndEntitites.hasOwnProperty(caseId)) {\n            var caseObj = casesAndEntitites[caseId];\n            var inputItem = new Object();\n            inputItem.caseId = caseId;\n            inputItem.orderedValueList = [];\n            if (refEntityList == null) {\n                refEntityList = getRefList(caseObj);\n            }\n            for (var j = 0; j < refEntityList.length; j++) {\n                var entityId = refEntityList[j];\n                var value = caseObj[entityId];\n                inputItem.orderedValueList.push(value);\n            }\n            inputItems.push(inputItem);\n        }\n    }\n    if (refEntityList.length == 1) {\n        //this is a special case, where the \"clustering\" becomes a simple sorting in 1 dimension:\n        //so, just sort and return inputItems:\n        inputItems.sort(function (i1, i2) {\n            var val1 = i1.orderedValueList[0];\n            var val2 = i2.orderedValueList[0];\n            //ensure NaNs are moved out (NaN or null which are seen here as equivalents to NA (not available)) to the end of the list:\n            val1 = (val1 == null || isNaN(val1) ? Number.MAX_VALUE : val1);\n            val2 = (val2 == null || isNaN(val2) ? Number.MAX_VALUE : val2);\n            if (val1 > val2) {\n                return 1;\n            }\n            else if (val1 < val2) {\n                return -1;\n            }\n            return 0;\n        });\n        return inputItems;\n    }\n    //else, normal clustering:\n    inputItems = _prepareForDistanceFunction(inputItems);\n    var clusters = clusterfck.hcluster(inputItems.notAllNaN, preRankedSpearmanDist);\n    return clusters.clusters(1)[0].concat(inputItems.allNaN); // add all nan elements to the end post-sorting\n}\n\nvar getRefList = function(caseItem) {\n    var result = [];\n    for (var entityId in caseItem) {\n        if (caseItem.hasOwnProperty(entityId)) {\n            result.push(entityId);\n        }\n    }\n    return result;\n}\n\n/**\n * @param casesAndEntitites: same as used in hclusterCases above.\n *\n * @return the reordered list of entity ids, after clustering.\n */\nvar hclusterGeneticEntities = function(casesAndEntitites) {\n    var refEntityList = null;\n    var inputItems = [];\n    var refCaseIdList = [];\n    //add orderedValueList to all items, so the values are\n    //compared in same order:\n    for (var caseId in casesAndEntitites) {\n        if (casesAndEntitites.hasOwnProperty(caseId)) {\n            var caseObj = casesAndEntitites[caseId];\n            if (refEntityList == null) {\n                refEntityList = getRefList(caseObj);\n            }\n            //refCaseIdList:\n            refCaseIdList.push(caseId);\n        }\n    }\n    //iterate over genes, and get sample values:\n    for (var i = 0; i < refEntityList.length; i++) {\n        var entityId = refEntityList[i];\n        var inputItem = new Object();\n        inputItem.entityId = entityId;\n        inputItem.orderedValueList = [];\n        for (var j = 0; j < refCaseIdList.length; j++) {\n            var caseId = refCaseIdList[j];\n            var caseObj = casesAndEntitites[caseId];\n            var value = caseObj[entityId];\n            inputItem.orderedValueList.push(value);\n        }\n        inputItems.push(inputItem);\n    }\n    inputItems = _prepareForDistanceFunction(inputItems);\n    var clusters = clusterfck.hcluster(inputItems.notAllNaN, preRankedSpearmanDist);\n    return clusters.clusters(1)[0].concat(inputItems.allNaN); // add all nan elements to the end post-sorting\n}\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = {\n   hcluster: __webpack_require__(4),\n   Kmeans: __webpack_require__(1),\n   kmeans: __webpack_require__(1).kmeans\n};\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar distances = __webpack_require__(0);\n\nvar HierarchicalClustering = function(distance, linkage, threshold) {\n   this.distance = distance;\n   this.linkage = linkage;\n   this.threshold = threshold == undefined ? Infinity : threshold;\n}\n\nHierarchicalClustering.prototype = {\n   tree: function(items, snapshotPeriod, snapshotCb) {\n      this.tree = [];\n      this.dists = [];  // distances between each pair of clusters\n      this.mins = []; // closest cluster for each cluster\n      this.index = []; // keep a hash of all clusters by key\n\n      for (var i = 0; i < items.length; i++) {\n         var cluster = {\n            value: items[i],\n            key: i,\n            index: i,\n            size: 1\n         };\n         this.tree[i] = cluster;\n         this.index[i] = cluster;\n         this.dists[i] = [];\n         this.mins[i] = 0;\n      }\n\n      for (var i = 0; i < this.tree.length; i++) {\n         for (var j = 0; j <= i; j++) {\n            var dist = (i == j) ? Infinity :\n               this.distance(this.tree[i].value, this.tree[j].value);\n            this.dists[i][j] = dist;\n            this.dists[j][i] = dist;\n\n            if (dist < this.dists[i][this.mins[i]]) {\n               this.mins[i] = j;\n            }\n         }\n      }\n\n      var merged = this.mergeClosest();\n      var i = 0;\n      while (merged) {\n        if (snapshotCb && (i++ % snapshotPeriod) == 0) {\n           snapshotCb(this.tree);\n        }\n        merged = this.mergeClosest();\n      }\n\n      this.tree.forEach(function(cluster) {\n        // clean up metadata used for clustering\n        delete cluster.key;\n        delete cluster.index;\n      });\n\n      return this.tree;\n   },\n\n   mergeClosest: function() {\n      // find two closest clusters from cached mins\n      var minKey = 0, min = Infinity;\n      for (var i = 0; i < this.tree.length; i++) {\n         var key = this.tree[i].key,\n             dist = this.dists[key][this.mins[key]];\n         if (dist < min) {\n            minKey = key;\n            min = dist;\n         }\n      }\n      if (min >= this.threshold) {\n         return false;\n      }\n\n      var c1 = this.index[minKey],\n          c2 = this.index[this.mins[minKey]];\n\n      // merge two closest clusters\n      var merged = {\n         dist: min,\n         left: c1,\n         right: c2,\n         key: c1.key,\n         size: c1.size + c2.size\n      };\n\n      this.tree[c1.index] = merged;\n      this.tree.splice(c2.index, 1);\n      this.index[c1.key] = merged;\n\n      // update distances with new merged cluster\n      for (var i = 0; i < this.tree.length; i++) {\n         var ci = this.tree[i];\n         var dist;\n         if (c1.key == ci.key) {\n            dist = Infinity;\n         }\n         else if (this.linkage == \"single\") {\n            dist = this.dists[c1.key][ci.key];\n            if (this.dists[c1.key][ci.key] > this.dists[c2.key][ci.key]) {\n               dist = this.dists[c2.key][ci.key];\n            }\n         }\n         else if (this.linkage == \"complete\") {\n            dist = this.dists[c1.key][ci.key];\n            if (this.dists[c1.key][ci.key] < this.dists[c2.key][ci.key]) {\n               dist = this.dists[c2.key][ci.key];\n            }\n         }\n         else if (this.linkage == \"average\") {\n            dist = (this.dists[c1.key][ci.key] * c1.size\n                   + this.dists[c2.key][ci.key] * c2.size) / (c1.size + c2.size);\n         }\n         else {\n            dist = this.distance(ci.value, c1.value);\n         }\n\n         this.dists[c1.key][ci.key] = this.dists[ci.key][c1.key] = dist;\n      }\n\n\n      // update cached mins\n      for (var i = 0; i < this.tree.length; i++) {\n         var key1 = this.tree[i].key;\n         if (this.mins[key1] == c1.key || this.mins[key1] == c2.key) {\n            var min = key1;\n            for (var j = 0; j < this.tree.length; j++) {\n               var key2 = this.tree[j].key;\n               if (this.dists[key1][key2] < this.dists[key1][min]) {\n                  min = key2;\n               }\n            }\n            this.mins[key1] = min;\n         }\n         this.tree[i].index = i;\n      }\n\n      // clean up metadata used for clustering\n      delete c1.key; delete c2.key;\n      delete c1.index; delete c2.index;\n\n      return true;\n   },\n   clusters: function(num){\n     //  Return all nodes if num is invalid\n     if(num > this.tree.size || num < 1) num = this.tree.size\n\n     var result = [],\n         subtrees = [this.tree];\n\n    //  Get a list of root nodes for num different clusters\n     while(num > 1){\n       var furthest = _findNextFurthest(subtrees);\n       subtrees.splice(subtrees.indexOf(furthest), 1);\n       subtrees.push(furthest.left, furthest.right);\n       num--;\n     }\n\n     //  Transform the subtrees node list into a list of the subtrees leaf values\n     subtrees.forEach(function(tree) {\n       result.push(_getValues(tree));\n     })\n\n     //  Split the next furthest distance root node\n     function _findNextFurthest(subtrees) {\n       var max = -1,\n           furthest;\n       subtrees.forEach(function(tree){\n         if(tree.dist > max) {\n           max = tree.dist;\n           furthest = tree;\n         }\n       });\n       return furthest;\n     }\n\n     //  Traverse the tree and yield a list of the leaf node values\n     function _getValues(tree) {\n       if(tree.size === 1) return [tree.value];\n       return _getValues(tree.left).concat(_getValues(tree.right));\n     }\n\n     return result;\n   }\n}\n\nvar hcluster = function(items, distance, linkage, threshold, snapshot, snapshotCallback) {\n   distance = distance || \"euclidean\";\n   linkage = linkage || \"average\";\n\n   if (typeof distance == \"string\") {\n     distance = distances[distance];\n   }\n  var hc = new HierarchicalClustering(distance, linkage, threshold),\n      tree = hc.tree(items, snapshot, snapshotCallback);\n\n   return {\n     tree: (threshold === undefined ? tree[0] : tree),\n     clusters: hc.clusters\n   };\n}\n\nmodule.exports = hcluster;\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n(function (window, factory) {\n    if (true) {\n        module.exports = factory();\n    } else if (typeof define === 'function' && define.amd) {\n        define(factory);\n    } else {\n        window.jStat = factory();\n    }\n})(this, function () {\nvar jStat = (function(Math, undefined) {\n\n// For quick reference.\nvar concat = Array.prototype.concat;\nvar slice = Array.prototype.slice;\nvar toString = Object.prototype.toString;\n\n// Calculate correction for IEEE error\n// TODO: This calculation can be improved.\nfunction calcRdx(n, m) {\n  var val = n > m ? n : m;\n  return Math.pow(10,\n                  17 - ~~(Math.log(((val > 0) ? val : -val)) * Math.LOG10E));\n}\n\n\nvar isArray = Array.isArray || function isArray(arg) {\n  return toString.call(arg) === '[object Array]';\n};\n\n\nfunction isFunction(arg) {\n  return toString.call(arg) === '[object Function]';\n}\n\n\nfunction isNumber(arg) {\n  return typeof arg === 'number' && arg === arg;\n}\n\n\n// Converts the jStat matrix to vector.\nfunction toVector(arr) {\n  return concat.apply([], arr);\n}\n\n\n// The one and only jStat constructor.\nfunction jStat() {\n  return new jStat._init(arguments);\n}\n\n\n// TODO: Remove after all references in src files have been removed.\njStat.fn = jStat.prototype;\n\n\n// By separating the initializer from the constructor it's easier to handle\n// always returning a new instance whether \"new\" was used or not.\njStat._init = function _init(args) {\n  var i;\n\n  // If first argument is an array, must be vector or matrix.\n  if (isArray(args[0])) {\n    // Check if matrix.\n    if (isArray(args[0][0])) {\n      // See if a mapping function was also passed.\n      if (isFunction(args[1]))\n        args[0] = jStat.map(args[0], args[1]);\n      // Iterate over each is faster than this.push.apply(this, args[0].\n      for (var i = 0; i < args[0].length; i++)\n        this[i] = args[0][i];\n      this.length = args[0].length;\n\n    // Otherwise must be a vector.\n    } else {\n      this[0] = isFunction(args[1]) ? jStat.map(args[0], args[1]) : args[0];\n      this.length = 1;\n    }\n\n  // If first argument is number, assume creation of sequence.\n  } else if (isNumber(args[0])) {\n    this[0] = jStat.seq.apply(null, args);\n    this.length = 1;\n\n  // Handle case when jStat object is passed to jStat.\n  } else if (args[0] instanceof jStat) {\n    // Duplicate the object and pass it back.\n    return jStat(args[0].toArray());\n\n  // Unexpected argument value, return empty jStat object.\n  // TODO: This is strange behavior. Shouldn't this throw or some such to let\n  // the user know they had bad arguments?\n  } else {\n    this[0] = [];\n    this.length = 1;\n  }\n\n  return this;\n};\njStat._init.prototype = jStat.prototype;\njStat._init.constructor = jStat;\n\n\n// Utility functions.\n// TODO: for internal use only?\njStat.utils = {\n  calcRdx: calcRdx,\n  isArray: isArray,\n  isFunction: isFunction,\n  isNumber: isNumber,\n  toVector: toVector\n};\n\n\n// Easily extend the jStat object.\n// TODO: is this seriously necessary?\njStat.extend = function extend(obj) {\n  var i, j;\n\n  if (arguments.length === 1) {\n    for (j in obj)\n      jStat[j] = obj[j];\n    return this;\n  }\n\n  for (var i = 1; i < arguments.length; i++) {\n    for (j in arguments[i])\n      obj[j] = arguments[i][j];\n  }\n\n  return obj;\n};\n\n\n// Returns the number of rows in the matrix.\njStat.rows = function rows(arr) {\n  return arr.length || 1;\n};\n\n\n// Returns the number of columns in the matrix.\njStat.cols = function cols(arr) {\n  return arr[0].length || 1;\n};\n\n\n// Returns the dimensions of the object { rows: i, cols: j }\njStat.dimensions = function dimensions(arr) {\n  return {\n    rows: jStat.rows(arr),\n    cols: jStat.cols(arr)\n  };\n};\n\n\n// Returns a specified row as a vector or return a sub matrix by pick some rows\njStat.row = function row(arr, index) {\n  if (isArray(index)) {\n    return index.map(function(i) {\n      return jStat.row(arr, i);\n    })\n  }\n  return arr[index];\n};\n\n\n// return row as array\n// rowa([[1,2],[3,4]],0) -> [1,2]\njStat.rowa = function rowa(arr, i) {\n  return jStat.row(arr, i);\n};\n\n\n// Returns the specified column as a vector or return a sub matrix by pick some\n// columns\njStat.col = function col(arr, index) {\n  if (isArray(index)) {\n    var submat = jStat.arange(arr.length).map(function(i) {\n      return new Array(index.length);\n    });\n    index.forEach(function(ind, i){\n      jStat.arange(arr.length).forEach(function(j) {\n        submat[j][i] = arr[j][ind];\n      });\n    });\n    return submat;\n  }\n  var column = new Array(arr.length);\n  for (var i = 0; i < arr.length; i++)\n    column[i] = [arr[i][index]];\n  return column;\n};\n\n\n// return column as array\n// cola([[1,2],[3,4]],0) -> [1,3]\njStat.cola = function cola(arr, i) {\n  return jStat.col(arr, i).map(function(a){ return a[0] });\n};\n\n\n// Returns the diagonal of the matrix\njStat.diag = function diag(arr) {\n  var nrow = jStat.rows(arr);\n  var res = new Array(nrow);\n  for (var row = 0; row < nrow; row++)\n    res[row] = [arr[row][row]];\n  return res;\n};\n\n\n// Returns the anti-diagonal of the matrix\njStat.antidiag = function antidiag(arr) {\n  var nrow = jStat.rows(arr) - 1;\n  var res = new Array(nrow);\n  for (var i = 0; nrow >= 0; nrow--, i++)\n    res[i] = [arr[i][nrow]];\n  return res;\n};\n\n// Transpose a matrix or array.\njStat.transpose = function transpose(arr) {\n  var obj = [];\n  var objArr, rows, cols, j, i;\n\n  // Make sure arr is in matrix format.\n  if (!isArray(arr[0]))\n    arr = [arr];\n\n  rows = arr.length;\n  cols = arr[0].length;\n\n  for (var i = 0; i < cols; i++) {\n    objArr = new Array(rows);\n    for (j = 0; j < rows; j++)\n      objArr[j] = arr[j][i];\n    obj.push(objArr);\n  }\n\n  // If obj is vector, return only single array.\n  return obj.length === 1 ? obj[0] : obj;\n};\n\n\n// Map a function to an array or array of arrays.\n// \"toAlter\" is an internal variable.\njStat.map = function map(arr, func, toAlter) {\n  var row, nrow, ncol, res, col;\n\n  if (!isArray(arr[0]))\n    arr = [arr];\n\n  nrow = arr.length;\n  ncol = arr[0].length;\n  res = toAlter ? arr : new Array(nrow);\n\n  for (row = 0; row < nrow; row++) {\n    // if the row doesn't exist, create it\n    if (!res[row])\n      res[row] = new Array(ncol);\n    for (col = 0; col < ncol; col++)\n      res[row][col] = func(arr[row][col], row, col);\n  }\n\n  return res.length === 1 ? res[0] : res;\n};\n\n\n// Cumulatively combine the elements of an array or array of arrays using a function.\njStat.cumreduce = function cumreduce(arr, func, toAlter) {\n  var row, nrow, ncol, res, col;\n\n  if (!isArray(arr[0]))\n    arr = [arr];\n\n  nrow = arr.length;\n  ncol = arr[0].length;\n  res = toAlter ? arr : new Array(nrow);\n\n  for (row = 0; row < nrow; row++) {\n    // if the row doesn't exist, create it\n    if (!res[row])\n      res[row] = new Array(ncol);\n    if (ncol > 0)\n      res[row][0] = arr[row][0];\n    for (col = 1; col < ncol; col++)\n      res[row][col] = func(res[row][col-1], arr[row][col]);\n  }\n  return res.length === 1 ? res[0] : res;\n};\n\n\n// Destructively alter an array.\njStat.alter = function alter(arr, func) {\n  return jStat.map(arr, func, true);\n};\n\n\n// Generate a rows x cols matrix according to the supplied function.\njStat.create = function  create(rows, cols, func) {\n  var res = new Array(rows);\n  var i, j;\n\n  if (isFunction(cols)) {\n    func = cols;\n    cols = rows;\n  }\n\n  for (var i = 0; i < rows; i++) {\n    res[i] = new Array(cols);\n    for (j = 0; j < cols; j++)\n      res[i][j] = func(i, j);\n  }\n\n  return res;\n};\n\n\nfunction retZero() { return 0; }\n\n\n// Generate a rows x cols matrix of zeros.\njStat.zeros = function zeros(rows, cols) {\n  if (!isNumber(cols))\n    cols = rows;\n  return jStat.create(rows, cols, retZero);\n};\n\n\nfunction retOne() { return 1; }\n\n\n// Generate a rows x cols matrix of ones.\njStat.ones = function ones(rows, cols) {\n  if (!isNumber(cols))\n    cols = rows;\n  return jStat.create(rows, cols, retOne);\n};\n\n\n// Generate a rows x cols matrix of uniformly random numbers.\njStat.rand = function rand(rows, cols) {\n  if (!isNumber(cols))\n    cols = rows;\n  return jStat.create(rows, cols, Math.random);\n};\n\n\nfunction retIdent(i, j) { return i === j ? 1 : 0; }\n\n\n// Generate an identity matrix of size row x cols.\njStat.identity = function identity(rows, cols) {\n  if (!isNumber(cols))\n    cols = rows;\n  return jStat.create(rows, cols, retIdent);\n};\n\n\n// Tests whether a matrix is symmetric\njStat.symmetric = function symmetric(arr) {\n  var issymmetric = true;\n  var size = arr.length;\n  var row, col;\n\n  if (arr.length !== arr[0].length)\n    return false;\n\n  for (row = 0; row < size; row++) {\n    for (col = 0; col < size; col++)\n      if (arr[col][row] !== arr[row][col])\n        return false;\n  }\n\n  return true;\n};\n\n\n// Set all values to zero.\njStat.clear = function clear(arr) {\n  return jStat.alter(arr, retZero);\n};\n\n\n// Generate sequence.\njStat.seq = function seq(min, max, length, func) {\n  if (!isFunction(func))\n    func = false;\n\n  var arr = [];\n  var hival = calcRdx(min, max);\n  var step = (max * hival - min * hival) / ((length - 1) * hival);\n  var current = min;\n  var cnt;\n\n  // Current is assigned using a technique to compensate for IEEE error.\n  // TODO: Needs better implementation.\n  for (cnt = 0;\n       current <= max && cnt < length;\n       cnt++, current = (min * hival + step * hival * cnt) / hival) {\n    arr.push((func ? func(current, cnt) : current));\n  }\n\n  return arr;\n};\n\n\n// arange(5) -> [0,1,2,3,4]\n// arange(1,5) -> [1,2,3,4]\n// arange(5,1,-1) -> [5,4,3,2]\njStat.arange = function arange(start, end, step) {\n  var rl = [];\n  step = step || 1;\n  if (end === undefined) {\n    end = start;\n    start = 0;\n  }\n  if (start === end || step === 0) {\n    return [];\n  }\n  if (start < end && step < 0) {\n    return [];\n  }\n  if (start > end && step > 0) {\n    return [];\n  }\n  if (step > 0) {\n    for (i = start; i < end; i += step) {\n      rl.push(i);\n    }\n  } else {\n    for (i = start; i > end; i += step) {\n      rl.push(i);\n    }\n  }\n  return rl;\n};\n\n\n// A=[[1,2,3],[4,5,6],[7,8,9]]\n// slice(A,{row:{end:2},col:{start:1}}) -> [[2,3],[5,6]]\n// slice(A,1,{start:1}) -> [5,6]\n// as numpy code A[:2,1:]\njStat.slice = (function(){\n  function _slice(list, start, end, step) {\n    // note it's not equal to range.map mode it's a bug\n    var i;\n    var rl = [];\n    var length = list.length;\n    if (start === undefined && end === undefined && step === undefined) {\n      return jStat.copy(list);\n    }\n\n    start = start || 0;\n    end = end || list.length;\n    start = start >= 0 ? start : length + start;\n    end = end >= 0 ? end : length + end;\n    step = step || 1;\n    if (start === end || step === 0) {\n      return [];\n    }\n    if (start < end && step < 0) {\n      return [];\n    }\n    if (start > end && step > 0) {\n      return [];\n    }\n    if (step > 0) {\n      for (i = start; i < end; i += step) {\n        rl.push(list[i]);\n      }\n    } else {\n      for (i = start; i > end;i += step) {\n        rl.push(list[i]);\n      }\n    }\n    return rl;\n  }\n\n  function slice(list, rcSlice) {\n    rcSlice = rcSlice || {};\n    if (isNumber(rcSlice.row)) {\n      if (isNumber(rcSlice.col))\n        return list[rcSlice.row][rcSlice.col];\n      var row = jStat.rowa(list, rcSlice.row);\n      var colSlice = rcSlice.col || {};\n      return _slice(row, colSlice.start, colSlice.end, colSlice.step);\n    }\n\n    if (isNumber(rcSlice.col)) {\n      var col = jStat.cola(list, rcSlice.col);\n      var rowSlice = rcSlice.row || {};\n      return _slice(col, rowSlice.start, rowSlice.end, rowSlice.step);\n    }\n\n    var rowSlice = rcSlice.row || {};\n    var colSlice = rcSlice.col || {};\n    var rows = _slice(list, rowSlice.start, rowSlice.end, rowSlice.step);\n    return rows.map(function(row) {\n      return _slice(row, colSlice.start, colSlice.end, colSlice.step);\n    });\n  }\n\n  return slice;\n}());\n\n\n// A=[[1,2,3],[4,5,6],[7,8,9]]\n// sliceAssign(A,{row:{start:1},col:{start:1}},[[0,0],[0,0]])\n// A=[[1,2,3],[4,0,0],[7,0,0]]\njStat.sliceAssign = function sliceAssign(A, rcSlice, B) {\n  if (isNumber(rcSlice.row)) {\n    if (isNumber(rcSlice.col))\n      return A[rcSlice.row][rcSlice.col] = B;\n    rcSlice.col = rcSlice.col || {};\n    rcSlice.col.start = rcSlice.col.start || 0;\n    rcSlice.col.end = rcSlice.col.end || A[0].length;\n    rcSlice.col.step = rcSlice.col.step || 1;\n    var nl = jStat.arange(rcSlice.col.start,\n                          Math.min(A.length, rcSlice.col.end),\n                          rcSlice.col.step);\n    var m = rcSlice.row;\n    nl.forEach(function(n, i) {\n      A[m][n] = B[i];\n    });\n    return A;\n  }\n\n  if (isNumber(rcSlice.col)) {\n    rcSlice.row = rcSlice.row || {};\n    rcSlice.row.start = rcSlice.row.start || 0;\n    rcSlice.row.end = rcSlice.row.end || A.length;\n    rcSlice.row.step = rcSlice.row.step || 1;\n    var ml = jStat.arange(rcSlice.row.start,\n                          Math.min(A[0].length, rcSlice.row.end),\n                          rcSlice.row.step);\n    var n = rcSlice.col;\n    ml.forEach(function(m, j) {\n      A[m][n] = B[j];\n    });\n    return A;\n  }\n\n  if (B[0].length === undefined) {\n    B = [B];\n  }\n  rcSlice.row.start = rcSlice.row.start || 0;\n  rcSlice.row.end = rcSlice.row.end || A.length;\n  rcSlice.row.step = rcSlice.row.step || 1;\n  rcSlice.col.start = rcSlice.col.start || 0;\n  rcSlice.col.end = rcSlice.col.end || A[0].length;\n  rcSlice.col.step = rcSlice.col.step || 1;\n  var ml = jStat.arange(rcSlice.row.start,\n                        Math.min(A.length, rcSlice.row.end),\n                        rcSlice.row.step);\n  var nl = jStat.arange(rcSlice.col.start,\n                        Math.min(A[0].length, rcSlice.col.end),\n                        rcSlice.col.step);\n  ml.forEach(function(m, i) {\n    nl.forEach(function(n, j) {\n      A[m][n] = B[i][j];\n    });\n  });\n  return A;\n};\n\n\n// [1,2,3] ->\n// [[1,0,0],[0,2,0],[0,0,3]]\njStat.diagonal = function diagonal(diagArray) {\n  var mat = jStat.zeros(diagArray.length, diagArray.length);\n  diagArray.forEach(function(t, i) {\n    mat[i][i] = t;\n  });\n  return mat;\n};\n\n\n// return copy of A\njStat.copy = function copy(A) {\n  return A.map(function(row) {\n    if (isNumber(row))\n      return row;\n    return row.map(function(t) {\n      return t;\n    });\n  });\n};\n\n\n// TODO: Go over this entire implementation. Seems a tragic waste of resources\n// doing all this work. Instead, and while ugly, use new Function() to generate\n// a custom function for each static method.\n\n// Quick reference.\nvar jProto = jStat.prototype;\n\n// Default length.\njProto.length = 0;\n\n// For internal use only.\n// TODO: Check if they're actually used, and if they are then rename them\n// to _*\njProto.push = Array.prototype.push;\njProto.sort = Array.prototype.sort;\njProto.splice = Array.prototype.splice;\njProto.slice = Array.prototype.slice;\n\n\n// Return a clean array.\njProto.toArray = function toArray() {\n  return this.length > 1 ? slice.call(this) : slice.call(this)[0];\n};\n\n\n// Map a function to a matrix or vector.\njProto.map = function map(func, toAlter) {\n  return jStat(jStat.map(this, func, toAlter));\n};\n\n\n// Cumulatively combine the elements of a matrix or vector using a function.\njProto.cumreduce = function cumreduce(func, toAlter) {\n  return jStat(jStat.cumreduce(this, func, toAlter));\n};\n\n\n// Destructively alter an array.\njProto.alter = function alter(func) {\n  jStat.alter(this, func);\n  return this;\n};\n\n\n// Extend prototype with methods that have no argument.\n(function(funcs) {\n  for (var i = 0; i < funcs.length; i++) (function(passfunc) {\n    jProto[passfunc] = function(func) {\n      var self = this,\n      results;\n      // Check for callback.\n      if (func) {\n        setTimeout(function() {\n          func.call(self, jProto[passfunc].call(self));\n        });\n        return this;\n      }\n      results = jStat[passfunc](this);\n      return isArray(results) ? jStat(results) : results;\n    };\n  })(funcs[i]);\n})('transpose clear symmetric rows cols dimensions diag antidiag'.split(' '));\n\n\n// Extend prototype with methods that have one argument.\n(function(funcs) {\n  for (var i = 0; i < funcs.length; i++) (function(passfunc) {\n    jProto[passfunc] = function(index, func) {\n      var self = this;\n      // check for callback\n      if (func) {\n        setTimeout(function() {\n          func.call(self, jProto[passfunc].call(self, index));\n        });\n        return this;\n      }\n      return jStat(jStat[passfunc](this, index));\n    };\n  })(funcs[i]);\n})('row col'.split(' '));\n\n\n// Extend prototype with simple shortcut methods.\n(function(funcs) {\n  for (var i = 0; i < funcs.length; i++) (function(passfunc) {\n    jProto[passfunc] = new Function(\n        'return jStat(jStat.' + passfunc + '.apply(null, arguments));');\n  })(funcs[i]);\n})('create zeros ones rand identity'.split(' '));\n\n\n// Exposing jStat.\nreturn jStat;\n\n}(Math));\n(function(jStat, Math) {\n\nvar isFunction = jStat.utils.isFunction;\n\n// Ascending functions for sort\nfunction ascNum(a, b) { return a - b; }\n\nfunction clip(arg, min, max) {\n  return Math.max(min, Math.min(arg, max));\n}\n\n\n// sum of an array\njStat.sum = function sum(arr) {\n  var sum = 0;\n  var i = arr.length;\n  while (--i >= 0)\n    sum += arr[i];\n  return sum;\n};\n\n\n// sum squared\njStat.sumsqrd = function sumsqrd(arr) {\n  var sum = 0;\n  var i = arr.length;\n  while (--i >= 0)\n    sum += arr[i] * arr[i];\n  return sum;\n};\n\n\n// sum of squared errors of prediction (SSE)\njStat.sumsqerr = function sumsqerr(arr) {\n  var mean = jStat.mean(arr);\n  var sum = 0;\n  var i = arr.length;\n  var tmp;\n  while (--i >= 0) {\n    tmp = arr[i] - mean;\n    sum += tmp * tmp;\n  }\n  return sum;\n};\n\n// sum of an array in each row\njStat.sumrow = function sumrow(arr) {\n  var sum = 0;\n  var i = arr.length;\n  while (--i >= 0)\n    sum += arr[i];\n  return sum;\n};\n\n// product of an array\njStat.product = function product(arr) {\n  var prod = 1;\n  var i = arr.length;\n  while (--i >= 0)\n    prod *= arr[i];\n  return prod;\n};\n\n\n// minimum value of an array\njStat.min = function min(arr) {\n  var low = arr[0];\n  var i = 0;\n  while (++i < arr.length)\n    if (arr[i] < low)\n      low = arr[i];\n  return low;\n};\n\n\n// maximum value of an array\njStat.max = function max(arr) {\n  var high = arr[0];\n  var i = 0;\n  while (++i < arr.length)\n    if (arr[i] > high)\n      high = arr[i];\n  return high;\n};\n\n\n// unique values of an array\njStat.unique = function unique(arr) {\n  var hash = {}, _arr = [];\n  for(var i = 0; i < arr.length; i++) {\n    if (!hash[arr[i]]) {\n      hash[arr[i]] = true;\n      _arr.push(arr[i]);\n    }\n  }\n  return _arr;\n};\n\n\n// mean value of an array\njStat.mean = function mean(arr) {\n  return jStat.sum(arr) / arr.length;\n};\n\n\n// mean squared error (MSE)\njStat.meansqerr = function meansqerr(arr) {\n  return jStat.sumsqerr(arr) / arr.length;\n};\n\n\n// geometric mean of an array\njStat.geomean = function geomean(arr) {\n  return Math.pow(jStat.product(arr), 1 / arr.length);\n};\n\n\n// median of an array\njStat.median = function median(arr) {\n  var arrlen = arr.length;\n  var _arr = arr.slice().sort(ascNum);\n  // check if array is even or odd, then return the appropriate\n  return !(arrlen & 1)\n    ? (_arr[(arrlen / 2) - 1 ] + _arr[(arrlen / 2)]) / 2\n    : _arr[(arrlen / 2) | 0 ];\n};\n\n\n// cumulative sum of an array\njStat.cumsum = function cumsum(arr) {\n  return jStat.cumreduce(arr, function (a, b) { return a + b; });\n};\n\n\n// cumulative product of an array\njStat.cumprod = function cumprod(arr) {\n  return jStat.cumreduce(arr, function (a, b) { return a * b; });\n};\n\n\n// successive differences of a sequence\njStat.diff = function diff(arr) {\n  var diffs = [];\n  var arrLen = arr.length;\n  var i;\n  for (var i = 1; i < arrLen; i++)\n    diffs.push(arr[i] - arr[i - 1]);\n  return diffs;\n};\n\n\n// ranks of an array\njStat.rank = function (arr) {\n  var arrlen = arr.length;\n  var sorted = arr.slice().sort(ascNum);\n  var ranks = new Array(arrlen);\n  for (var i = 0; i < arrlen; i++) {\n    var first = sorted.indexOf(arr[i]);\n    var last = sorted.lastIndexOf(arr[i]);\n    if (first === last) {\n      var val = first;\n    } else {\n      var val = (first + last) / 2;\n    }\n    ranks[i] = val + 1;\n  }\n  return ranks;\n};\n\n\n// mode of an array\n// if there are multiple modes of an array, return all of them\n// is this the appropriate way of handling it?\njStat.mode = function mode(arr) {\n  var arrLen = arr.length;\n  var _arr = arr.slice().sort(ascNum);\n  var count = 1;\n  var maxCount = 0;\n  var numMaxCount = 0;\n  var mode_arr = [];\n  var i;\n\n  for (var i = 0; i < arrLen; i++) {\n    if (_arr[i] === _arr[i + 1]) {\n      count++;\n    } else {\n      if (count > maxCount) {\n        mode_arr = [_arr[i]];\n        maxCount = count;\n        numMaxCount = 0;\n      }\n      // are there multiple max counts\n      else if (count === maxCount) {\n        mode_arr.push(_arr[i]);\n        numMaxCount++;\n      }\n      // resetting count for new value in array\n      count = 1;\n    }\n  }\n\n  return numMaxCount === 0 ? mode_arr[0] : mode_arr;\n};\n\n\n// range of an array\njStat.range = function range(arr) {\n  return jStat.max(arr) - jStat.min(arr);\n};\n\n// variance of an array\n// flag = true indicates sample instead of population\njStat.variance = function variance(arr, flag) {\n  return jStat.sumsqerr(arr) / (arr.length - (flag ? 1 : 0));\n};\n\n// pooled variance of an array of arrays\njStat.pooledvariance = function pooledvariance(arr) {\n  var sumsqerr = arr.reduce(function (a, samples) {return a + jStat.sumsqerr(samples);}, 0);\n  var count = arr.reduce(function (a, samples) {return a + samples.length;}, 0);\n  return sumsqerr / (count - arr.length);\n};\n\n// deviation of an array\njStat.deviation = function (arr) {\n  var mean = jStat.mean(arr);\n  var arrlen = arr.length;\n  var dev = new Array(arrlen);\n  for (var i = 0; i < arrlen; i++) {\n    dev[i] = arr[i] - mean;\n  }\n  return dev;\n};\n\n// standard deviation of an array\n// flag = true indicates sample instead of population\njStat.stdev = function stdev(arr, flag) {\n  return Math.sqrt(jStat.variance(arr, flag));\n};\n\n// pooled standard deviation of an array of arrays\njStat.pooledstdev = function pooledstdev(arr) {\n  return Math.sqrt(jStat.pooledvariance(arr));\n};\n\n// mean deviation (mean absolute deviation) of an array\njStat.meandev = function meandev(arr) {\n  var mean = jStat.mean(arr);\n  var a = [];\n  for (var i = arr.length - 1; i >= 0; i--) {\n    a.push(Math.abs(arr[i] - mean));\n  }\n  return jStat.mean(a);\n};\n\n\n// median deviation (median absolute deviation) of an array\njStat.meddev = function meddev(arr) {\n  var median = jStat.median(arr);\n  var a = [];\n  for (var i = arr.length - 1; i >= 0; i--) {\n    a.push(Math.abs(arr[i] - median));\n  }\n  return jStat.median(a);\n};\n\n\n// coefficient of variation\njStat.coeffvar = function coeffvar(arr) {\n  return jStat.stdev(arr) / jStat.mean(arr);\n};\n\n\n// quartiles of an array\njStat.quartiles = function quartiles(arr) {\n  var arrlen = arr.length;\n  var _arr = arr.slice().sort(ascNum);\n  return [\n    _arr[ Math.round((arrlen) / 4) - 1 ],\n    _arr[ Math.round((arrlen) / 2) - 1 ],\n    _arr[ Math.round((arrlen) * 3 / 4) - 1 ]\n  ];\n};\n\n\n// Arbitary quantiles of an array. Direct port of the scipy.stats\n// implementation by Pierre GF Gerard-Marchant.\njStat.quantiles = function quantiles(arr, quantilesArray, alphap, betap) {\n  var sortedArray = arr.slice().sort(ascNum);\n  var quantileVals = [quantilesArray.length];\n  var n = arr.length;\n  var i, p, m, aleph, k, gamma;\n\n  if (typeof alphap === 'undefined')\n    alphap = 3 / 8;\n  if (typeof betap === 'undefined')\n    betap = 3 / 8;\n\n  for (var i = 0; i < quantilesArray.length; i++) {\n    p = quantilesArray[i];\n    m = alphap + p * (1 - alphap - betap);\n    aleph = n * p + m;\n    k = Math.floor(clip(aleph, 1, n - 1));\n    gamma = clip(aleph - k, 0, 1);\n    quantileVals[i] = (1 - gamma) * sortedArray[k - 1] + gamma * sortedArray[k];\n  }\n\n  return quantileVals;\n};\n\n// Returns the k-th percentile of values in a range, where k is in the\n// range 0..1, exclusive.\njStat.percentile = function percentile(arr, k) {\n  var _arr = arr.slice().sort(ascNum);\n  var realIndex = k * (_arr.length - 1);\n  var index = parseInt(realIndex);\n  var frac = realIndex - index;\n\n  if (index + 1 < _arr.length) {\n    return _arr[index] * (1 - frac) + _arr[index + 1] * frac;\n  } else {\n    return _arr[index];\n  }\n}\n\n\n// The percentile rank of score in a given array. Returns the percentage\n// of all values in the input array that are less than (kind='strict') or\n// less or equal than (kind='weak') score. Default is weak.\njStat.percentileOfScore = function percentileOfScore(arr, score, kind) {\n  var counter = 0;\n  var len = arr.length;\n  var strict = false;\n  var value, i;\n\n  if (kind === 'strict')\n    strict = true;\n\n  for (var i = 0; i < len; i++) {\n    value = arr[i];\n    if ((strict && value < score) ||\n        (!strict && value <= score)) {\n      counter++;\n    }\n  }\n\n  return counter / len;\n};\n\n\n// Histogram (bin count) data\njStat.histogram = function histogram(arr, bins) {\n  var first = jStat.min(arr);\n  var binCnt = bins || 4;\n  var binWidth = (jStat.max(arr) - first) / binCnt;\n  var len = arr.length;\n  var bins = [];\n  var i;\n\n  for (var i = 0; i < binCnt; i++)\n    bins[i] = 0;\n  for (var i = 0; i < len; i++)\n    bins[Math.min(Math.floor(((arr[i] - first) / binWidth)), binCnt - 1)] += 1;\n\n  return bins;\n};\n\n\n// covariance of two arrays\njStat.covariance = function covariance(arr1, arr2) {\n  var u = jStat.mean(arr1);\n  var v = jStat.mean(arr2);\n  var arr1Len = arr1.length;\n  var sq_dev = new Array(arr1Len);\n  var i;\n\n  for (var i = 0; i < arr1Len; i++)\n    sq_dev[i] = (arr1[i] - u) * (arr2[i] - v);\n\n  return jStat.sum(sq_dev) / (arr1Len - 1);\n};\n\n\n// (pearson's) population correlation coefficient, rho\njStat.corrcoeff = function corrcoeff(arr1, arr2) {\n  return jStat.covariance(arr1, arr2) /\n      jStat.stdev(arr1, 1) /\n      jStat.stdev(arr2, 1);\n};\n\n  // (spearman's) rank correlation coefficient, sp\njStat.spearmancoeff =  function (arr1, arr2) {\n  arr1 = jStat.rank(arr1);\n  arr2 = jStat.rank(arr2);\n  //return pearson's correlation of the ranks:\n  return jStat.corrcoeff(arr1, arr2);\n}\n\n\n// statistical standardized moments (general form of skew/kurt)\njStat.stanMoment = function stanMoment(arr, n) {\n  var mu = jStat.mean(arr);\n  var sigma = jStat.stdev(arr);\n  var len = arr.length;\n  var skewSum = 0;\n\n  for (var i = 0; i < len; i++)\n    skewSum += Math.pow((arr[i] - mu) / sigma, n);\n\n  return skewSum / arr.length;\n};\n\n// (pearson's) moment coefficient of skewness\njStat.skewness = function skewness(arr) {\n  return jStat.stanMoment(arr, 3);\n};\n\n// (pearson's) (excess) kurtosis\njStat.kurtosis = function kurtosis(arr) {\n  return jStat.stanMoment(arr, 4) - 3;\n};\n\n\nvar jProto = jStat.prototype;\n\n\n// Extend jProto with method for calculating cumulative sums and products.\n// This differs from the similar extension below as cumsum and cumprod should\n// not be run again in the case fullbool === true.\n// If a matrix is passed, automatically assume operation should be done on the\n// columns.\n(function(funcs) {\n  for (var i = 0; i < funcs.length; i++) (function(passfunc) {\n    // If a matrix is passed, automatically assume operation should be done on\n    // the columns.\n    jProto[passfunc] = function(fullbool, func) {\n      var arr = [];\n      var i = 0;\n      var tmpthis = this;\n      // Assignment reassignation depending on how parameters were passed in.\n      if (isFunction(fullbool)) {\n        func = fullbool;\n        fullbool = false;\n      }\n      // Check if a callback was passed with the function.\n      if (func) {\n        setTimeout(function() {\n          func.call(tmpthis, jProto[passfunc].call(tmpthis, fullbool));\n        });\n        return this;\n      }\n      // Check if matrix and run calculations.\n      if (this.length > 1) {\n        tmpthis = fullbool === true ? this : this.transpose();\n        for (; i < tmpthis.length; i++)\n          arr[i] = jStat[passfunc](tmpthis[i]);\n        return arr;\n      }\n      // Pass fullbool if only vector, not a matrix. for variance and stdev.\n      return jStat[passfunc](this[0], fullbool);\n    };\n  })(funcs[i]);\n})(('cumsum cumprod').split(' '));\n\n\n// Extend jProto with methods which don't require arguments and work on columns.\n(function(funcs) {\n  for (var i = 0; i < funcs.length; i++) (function(passfunc) {\n    // If a matrix is passed, automatically assume operation should be done on\n    // the columns.\n    jProto[passfunc] = function(fullbool, func) {\n      var arr = [];\n      var i = 0;\n      var tmpthis = this;\n      // Assignment reassignation depending on how parameters were passed in.\n      if (isFunction(fullbool)) {\n        func = fullbool;\n        fullbool = false;\n      }\n      // Check if a callback was passed with the function.\n      if (func) {\n        setTimeout(function() {\n          func.call(tmpthis, jProto[passfunc].call(tmpthis, fullbool));\n        });\n        return this;\n      }\n      // Check if matrix and run calculations.\n      if (this.length > 1) {\n        if (passfunc !== 'sumrow')\n          tmpthis = fullbool === true ? this : this.transpose();\n        for (; i < tmpthis.length; i++)\n          arr[i] = jStat[passfunc](tmpthis[i]);\n        return fullbool === true\n            ? jStat[passfunc](jStat.utils.toVector(arr))\n            : arr;\n      }\n      // Pass fullbool if only vector, not a matrix. for variance and stdev.\n      return jStat[passfunc](this[0], fullbool);\n    };\n  })(funcs[i]);\n})(('sum sumsqrd sumsqerr sumrow product min max unique mean meansqerr ' +\n    'geomean median diff rank mode range variance deviation stdev meandev ' +\n    'meddev coeffvar quartiles histogram skewness kurtosis').split(' '));\n\n\n// Extend jProto with functions that take arguments. Operations on matrices are\n// done on columns.\n(function(funcs) {\n  for (var i = 0; i < funcs.length; i++) (function(passfunc) {\n    jProto[passfunc] = function() {\n      var arr = [];\n      var i = 0;\n      var tmpthis = this;\n      var args = Array.prototype.slice.call(arguments);\n\n      // If the last argument is a function, we assume it's a callback; we\n      // strip the callback out and call the function again.\n      if (isFunction(args[args.length - 1])) {\n        var callbackFunction = args[args.length - 1];\n        var argsToPass = args.slice(0, args.length - 1);\n\n        setTimeout(function() {\n          callbackFunction.call(tmpthis,\n                                jProto[passfunc].apply(tmpthis, argsToPass));\n        });\n        return this;\n\n      // Otherwise we curry the function args and call normally.\n      } else {\n        var callbackFunction = undefined;\n        var curriedFunction = function curriedFunction(vector) {\n          return jStat[passfunc].apply(tmpthis, [vector].concat(args));\n        }\n      }\n\n      // If this is a matrix, run column-by-column.\n      if (this.length > 1) {\n        tmpthis = tmpthis.transpose();\n        for (; i < tmpthis.length; i++)\n          arr[i] = curriedFunction(tmpthis[i]);\n        return arr;\n      }\n\n      // Otherwise run on the vector.\n      return curriedFunction(this[0]);\n    };\n  })(funcs[i]);\n})('quantiles percentileOfScore'.split(' '));\n\n}(jStat, Math));\n// Special functions //\n(function(jStat, Math) {\n\n// Log-gamma function\njStat.gammaln = function gammaln(x) {\n  var j = 0;\n  var cof = [\n    76.18009172947146, -86.50532032941677, 24.01409824083091,\n    -1.231739572450155, 0.1208650973866179e-2, -0.5395239384953e-5\n  ];\n  var ser = 1.000000000190015;\n  var xx, y, tmp;\n  tmp = (y = xx = x) + 5.5;\n  tmp -= (xx + 0.5) * Math.log(tmp);\n  for (; j < 6; j++)\n    ser += cof[j] / ++y;\n  return Math.log(2.5066282746310005 * ser / xx) - tmp;\n};\n\n\n// gamma of x\njStat.gammafn = function gammafn(x) {\n  var p = [-1.716185138865495, 24.76565080557592, -379.80425647094563,\n           629.3311553128184, 866.9662027904133, -31451.272968848367,\n           -36144.413418691176, 66456.14382024054\n  ];\n  var q = [-30.8402300119739, 315.35062697960416, -1015.1563674902192,\n           -3107.771671572311, 22538.118420980151, 4755.8462775278811,\n           -134659.9598649693, -115132.2596755535];\n  var fact = false;\n  var n = 0;\n  var xden = 0;\n  var xnum = 0;\n  var y = x;\n  var i, z, yi, res, sum, ysq;\n  if (y <= 0) {\n    res = y % 1 + 3.6e-16;\n    if (res) {\n      fact = (!(y & 1) ? 1 : -1) * Math.PI / Math.sin(Math.PI * res);\n      y = 1 - y;\n    } else {\n      return Infinity;\n    }\n  }\n  yi = y;\n  if (y < 1) {\n    z = y++;\n  } else {\n    z = (y -= n = (y | 0) - 1) - 1;\n  }\n  for (var i = 0; i < 8; ++i) {\n    xnum = (xnum + p[i]) * z;\n    xden = xden * z + q[i];\n  }\n  res = xnum / xden + 1;\n  if (yi < y) {\n    res /= yi;\n  } else if (yi > y) {\n    for (var i = 0; i < n; ++i) {\n      res *= y;\n      y++;\n    }\n  }\n  if (fact) {\n    res = fact / res;\n  }\n  return res;\n};\n\n\n// lower incomplete gamma function, which is usually typeset with a\n// lower-case greek gamma as the function symbol\njStat.gammap = function gammap(a, x) {\n  return jStat.lowRegGamma(a, x) * jStat.gammafn(a);\n};\n\n\n// The lower regularized incomplete gamma function, usually written P(a,x)\njStat.lowRegGamma = function lowRegGamma(a, x) {\n  var aln = jStat.gammaln(a);\n  var ap = a;\n  var sum = 1 / a;\n  var del = sum;\n  var b = x + 1 - a;\n  var c = 1 / 1.0e-30;\n  var d = 1 / b;\n  var h = d;\n  var i = 1;\n  // calculate maximum number of itterations required for a\n  var ITMAX = -~(Math.log((a >= 1) ? a : 1 / a) * 8.5 + a * 0.4 + 17);\n  var an, endval;\n\n  if (x < 0 || a <= 0) {\n    return NaN;\n  } else if (x < a + 1) {\n    for (; i <= ITMAX; i++) {\n      sum += del *= x / ++ap;\n    }\n    return (sum * Math.exp(-x + a * Math.log(x) - (aln)));\n  }\n\n  for (; i <= ITMAX; i++) {\n    an = -i * (i - a);\n    b += 2;\n    d = an * d + b;\n    c = b + an / c;\n    d = 1 / d;\n    h *= d * c;\n  }\n\n  return (1 - h * Math.exp(-x + a * Math.log(x) - (aln)));\n};\n\n// natural log factorial of n\njStat.factorialln = function factorialln(n) {\n  return n < 0 ? NaN : jStat.gammaln(n + 1);\n};\n\n// factorial of n\njStat.factorial = function factorial(n) {\n  return n < 0 ? NaN : jStat.gammafn(n + 1);\n};\n\n// combinations of n, m\njStat.combination = function combination(n, m) {\n  // make sure n or m don't exceed the upper limit of usable values\n  return (n > 170 || m > 170)\n      ? Math.exp(jStat.combinationln(n, m))\n      : (jStat.factorial(n) / jStat.factorial(m)) / jStat.factorial(n - m);\n};\n\n\njStat.combinationln = function combinationln(n, m){\n  return jStat.factorialln(n) - jStat.factorialln(m) - jStat.factorialln(n - m);\n};\n\n\n// permutations of n, m\njStat.permutation = function permutation(n, m) {\n  return jStat.factorial(n) / jStat.factorial(n - m);\n};\n\n\n// beta function\njStat.betafn = function betafn(x, y) {\n  // ensure arguments are positive\n  if (x <= 0 || y <= 0)\n    return undefined;\n  // make sure x + y doesn't exceed the upper limit of usable values\n  return (x + y > 170)\n      ? Math.exp(jStat.betaln(x, y))\n      : jStat.gammafn(x) * jStat.gammafn(y) / jStat.gammafn(x + y);\n};\n\n\n// natural logarithm of beta function\njStat.betaln = function betaln(x, y) {\n  return jStat.gammaln(x) + jStat.gammaln(y) - jStat.gammaln(x + y);\n};\n\n\n// Evaluates the continued fraction for incomplete beta function by modified\n// Lentz's method.\njStat.betacf = function betacf(x, a, b) {\n  var fpmin = 1e-30;\n  var m = 1;\n  var qab = a + b;\n  var qap = a + 1;\n  var qam = a - 1;\n  var c = 1;\n  var d = 1 - qab * x / qap;\n  var m2, aa, del, h;\n\n  // These q's will be used in factors that occur in the coefficients\n  if (Math.abs(d) < fpmin)\n    d = fpmin;\n  d = 1 / d;\n  h = d;\n\n  for (; m <= 100; m++) {\n    m2 = 2 * m;\n    aa = m * (b - m) * x / ((qam + m2) * (a + m2));\n    // One step (the even one) of the recurrence\n    d = 1 + aa * d;\n    if (Math.abs(d) < fpmin)\n      d = fpmin;\n    c = 1 + aa / c;\n    if (Math.abs(c) < fpmin)\n      c = fpmin;\n    d = 1 / d;\n    h *= d * c;\n    aa = -(a + m) * (qab + m) * x / ((a + m2) * (qap + m2));\n    // Next step of the recurrence (the odd one)\n    d = 1 + aa * d;\n    if (Math.abs(d) < fpmin)\n      d = fpmin;\n    c = 1 + aa / c;\n    if (Math.abs(c) < fpmin)\n      c = fpmin;\n    d = 1 / d;\n    del = d * c;\n    h *= del;\n    if (Math.abs(del - 1.0) < 3e-7)\n      break;\n  }\n\n  return h;\n};\n\n\n// Returns the inverse of the lower regularized inomplete gamma function\njStat.gammapinv = function gammapinv(p, a) {\n  var j = 0;\n  var a1 = a - 1;\n  var EPS = 1e-8;\n  var gln = jStat.gammaln(a);\n  var x, err, t, u, pp, lna1, afac;\n\n  if (p >= 1)\n    return Math.max(100, a + 100 * Math.sqrt(a));\n  if (p <= 0)\n    return 0;\n  if (a > 1) {\n    lna1 = Math.log(a1);\n    afac = Math.exp(a1 * (lna1 - 1) - gln);\n    pp = (p < 0.5) ? p : 1 - p;\n    t = Math.sqrt(-2 * Math.log(pp));\n    x = (2.30753 + t * 0.27061) / (1 + t * (0.99229 + t * 0.04481)) - t;\n    if (p < 0.5)\n      x = -x;\n    x = Math.max(1e-3,\n                 a * Math.pow(1 - 1 / (9 * a) - x / (3 * Math.sqrt(a)), 3));\n  } else {\n    t = 1 - a * (0.253 + a * 0.12);\n    if (p < t)\n      x = Math.pow(p / t, 1 / a);\n    else\n      x = 1 - Math.log(1 - (p - t) / (1 - t));\n  }\n\n  for(; j < 12; j++) {\n    if (x <= 0)\n      return 0;\n    err = jStat.lowRegGamma(a, x) - p;\n    if (a > 1)\n      t = afac * Math.exp(-(x - a1) + a1 * (Math.log(x) - lna1));\n    else\n      t = Math.exp(-x + a1 * Math.log(x) - gln);\n    u = err / t;\n    x -= (t = u / (1 - 0.5 * Math.min(1, u * ((a - 1) / x - 1))));\n    if (x <= 0)\n      x = 0.5 * (x + t);\n    if (Math.abs(t) < EPS * x)\n      break;\n  }\n\n  return x;\n};\n\n\n// Returns the error function erf(x)\njStat.erf = function erf(x) {\n  var cof = [-1.3026537197817094, 6.4196979235649026e-1, 1.9476473204185836e-2,\n             -9.561514786808631e-3, -9.46595344482036e-4, 3.66839497852761e-4,\n             4.2523324806907e-5, -2.0278578112534e-5, -1.624290004647e-6,\n             1.303655835580e-6, 1.5626441722e-8, -8.5238095915e-8,\n             6.529054439e-9, 5.059343495e-9, -9.91364156e-10,\n             -2.27365122e-10, 9.6467911e-11, 2.394038e-12,\n             -6.886027e-12, 8.94487e-13, 3.13092e-13,\n             -1.12708e-13, 3.81e-16, 7.106e-15,\n             -1.523e-15, -9.4e-17, 1.21e-16,\n             -2.8e-17];\n  var j = cof.length - 1;\n  var isneg = false;\n  var d = 0;\n  var dd = 0;\n  var t, ty, tmp, res;\n\n  if (x < 0) {\n    x = -x;\n    isneg = true;\n  }\n\n  t = 2 / (2 + x);\n  ty = 4 * t - 2;\n\n  for(; j > 0; j--) {\n    tmp = d;\n    d = ty * d - dd + cof[j];\n    dd = tmp;\n  }\n\n  res = t * Math.exp(-x * x + 0.5 * (cof[0] + ty * d) - dd);\n  return isneg ? res - 1 : 1 - res;\n};\n\n\n// Returns the complmentary error function erfc(x)\njStat.erfc = function erfc(x) {\n  return 1 - jStat.erf(x);\n};\n\n\n// Returns the inverse of the complementary error function\njStat.erfcinv = function erfcinv(p) {\n  var j = 0;\n  var x, err, t, pp;\n  if (p >= 2)\n    return -100;\n  if (p <= 0)\n    return 100;\n  pp = (p < 1) ? p : 2 - p;\n  t = Math.sqrt(-2 * Math.log(pp / 2));\n  x = -0.70711 * ((2.30753 + t * 0.27061) /\n                  (1 + t * (0.99229 + t * 0.04481)) - t);\n  for (; j < 2; j++) {\n    err = jStat.erfc(x) - pp;\n    x += err / (1.12837916709551257 * Math.exp(-x * x) - x * err);\n  }\n  return (p < 1) ? x : -x;\n};\n\n\n// Returns the inverse of the incomplete beta function\njStat.ibetainv = function ibetainv(p, a, b) {\n  var EPS = 1e-8;\n  var a1 = a - 1;\n  var b1 = b - 1;\n  var j = 0;\n  var lna, lnb, pp, t, u, err, x, al, h, w, afac;\n  if (p <= 0)\n    return 0;\n  if (p >= 1)\n    return 1;\n  if (a >= 1 && b >= 1) {\n    pp = (p < 0.5) ? p : 1 - p;\n    t = Math.sqrt(-2 * Math.log(pp));\n    x = (2.30753 + t * 0.27061) / (1 + t* (0.99229 + t * 0.04481)) - t;\n    if (p < 0.5)\n      x = -x;\n    al = (x * x - 3) / 6;\n    h = 2 / (1 / (2 * a - 1)  + 1 / (2 * b - 1));\n    w = (x * Math.sqrt(al + h) / h) - (1 / (2 * b - 1) - 1 / (2 * a - 1)) *\n        (al + 5 / 6 - 2 / (3 * h));\n    x = a / (a + b * Math.exp(2 * w));\n  } else {\n    lna = Math.log(a / (a + b));\n    lnb = Math.log(b / (a + b));\n    t = Math.exp(a * lna) / a;\n    u = Math.exp(b * lnb) / b;\n    w = t + u;\n    if (p < t / w)\n      x = Math.pow(a * w * p, 1 / a);\n    else\n      x = 1 - Math.pow(b * w * (1 - p), 1 / b);\n  }\n  afac = -jStat.gammaln(a) - jStat.gammaln(b) + jStat.gammaln(a + b);\n  for(; j < 10; j++) {\n    if (x === 0 || x === 1)\n      return x;\n    err = jStat.ibeta(x, a, b) - p;\n    t = Math.exp(a1 * Math.log(x) + b1 * Math.log(1 - x) + afac);\n    u = err / t;\n    x -= (t = u / (1 - 0.5 * Math.min(1, u * (a1 / x - b1 / (1 - x)))));\n    if (x <= 0)\n      x = 0.5 * (x + t);\n    if (x >= 1)\n      x = 0.5 * (x + t + 1);\n    if (Math.abs(t) < EPS * x && j > 0)\n      break;\n  }\n  return x;\n};\n\n\n// Returns the incomplete beta function I_x(a,b)\njStat.ibeta = function ibeta(x, a, b) {\n  // Factors in front of the continued fraction.\n  var bt = (x === 0 || x === 1) ?  0 :\n    Math.exp(jStat.gammaln(a + b) - jStat.gammaln(a) -\n             jStat.gammaln(b) + a * Math.log(x) + b *\n             Math.log(1 - x));\n  if (x < 0 || x > 1)\n    return false;\n  if (x < (a + 1) / (a + b + 2))\n    // Use continued fraction directly.\n    return bt * jStat.betacf(x, a, b) / a;\n  // else use continued fraction after making the symmetry transformation.\n  return 1 - bt * jStat.betacf(1 - x, b, a) / b;\n};\n\n\n// Returns a normal deviate (mu=0, sigma=1).\n// If n and m are specified it returns a object of normal deviates.\njStat.randn = function randn(n, m) {\n  var u, v, x, y, q, mat;\n  if (!m)\n    m = n;\n  if (n)\n    return jStat.create(n, m, function() { return jStat.randn(); });\n  do {\n    u = Math.random();\n    v = 1.7156 * (Math.random() - 0.5);\n    x = u - 0.449871;\n    y = Math.abs(v) + 0.386595;\n    q = x * x + y * (0.19600 * y - 0.25472 * x);\n  } while (q > 0.27597 && (q > 0.27846 || v * v > -4 * Math.log(u) * u * u));\n  return v / u;\n};\n\n\n// Returns a gamma deviate by the method of Marsaglia and Tsang.\njStat.randg = function randg(shape, n, m) {\n  var oalph = shape;\n  var a1, a2, u, v, x, mat;\n  if (!m)\n    m = n;\n  if (!shape)\n    shape = 1;\n  if (n) {\n    mat = jStat.zeros(n,m);\n    mat.alter(function() { return jStat.randg(shape); });\n    return mat;\n  }\n  if (shape < 1)\n    shape += 1;\n  a1 = shape - 1 / 3;\n  a2 = 1 / Math.sqrt(9 * a1);\n  do {\n    do {\n      x = jStat.randn();\n      v = 1 + a2 * x;\n    } while(v <= 0);\n    v = v * v * v;\n    u = Math.random();\n  } while(u > 1 - 0.331 * Math.pow(x, 4) &&\n          Math.log(u) > 0.5 * x*x + a1 * (1 - v + Math.log(v)));\n  // alpha > 1\n  if (shape == oalph)\n    return a1 * v;\n  // alpha < 1\n  do {\n    u = Math.random();\n  } while(u === 0);\n  return Math.pow(u, 1 / oalph) * a1 * v;\n};\n\n\n// making use of static methods on the instance\n(function(funcs) {\n  for (var i = 0; i < funcs.length; i++) (function(passfunc) {\n    jStat.fn[passfunc] = function() {\n      return jStat(\n          jStat.map(this, function(value) { return jStat[passfunc](value); }));\n    }\n  })(funcs[i]);\n})('gammaln gammafn factorial factorialln'.split(' '));\n\n\n(function(funcs) {\n  for (var i = 0; i < funcs.length; i++) (function(passfunc) {\n    jStat.fn[passfunc] = function() {\n      return jStat(jStat[passfunc].apply(null, arguments));\n    };\n  })(funcs[i]);\n})('randn'.split(' '));\n\n}(jStat, Math));\n(function(jStat, Math) {\n\n// generate all distribution instance methods\n(function(list) {\n  for (var i = 0; i < list.length; i++) (function(func) {\n    // distribution instance method\n    jStat[func] = function(a, b, c) {\n      if (!(this instanceof arguments.callee))\n        return new arguments.callee(a, b, c);\n      this._a = a;\n      this._b = b;\n      this._c = c;\n      return this;\n    };\n    // distribution method to be used on a jStat instance\n    jStat.fn[func] = function(a, b, c) {\n      var newthis = jStat[func](a, b, c);\n      newthis.data = this;\n      return newthis;\n    };\n    // sample instance method\n    jStat[func].prototype.sample = function(arr) {\n      var a = this._a;\n      var b = this._b;\n      var c = this._c;\n      if (arr)\n        return jStat.alter(arr, function() {\n          return jStat[func].sample(a, b, c);\n        });\n      else\n        return jStat[func].sample(a, b, c);\n    };\n    // generate the pdf, cdf and inv instance methods\n    (function(vals) {\n      for (var i = 0; i < vals.length; i++) (function(fnfunc) {\n        jStat[func].prototype[fnfunc] = function(x) {\n          var a = this._a;\n          var b = this._b;\n          var c = this._c;\n          if (!x && x !== 0)\n            x = this.data;\n          if (typeof x !== 'number') {\n            return jStat.fn.map.call(x, function(x) {\n              return jStat[func][fnfunc](x, a, b, c);\n            });\n          }\n          return jStat[func][fnfunc](x, a, b, c);\n        };\n      })(vals[i]);\n    })('pdf cdf inv'.split(' '));\n    // generate the mean, median, mode and variance instance methods\n    (function(vals) {\n      for (var i = 0; i < vals.length; i++) (function(fnfunc) {\n        jStat[func].prototype[fnfunc] = function() {\n          return jStat[func][fnfunc](this._a, this._b, this._c);\n        };\n      })(vals[i]);\n    })('mean median mode variance'.split(' '));\n  })(list[i]);\n})((\n  'beta centralF cauchy chisquare exponential gamma invgamma kumaraswamy ' +\n  'laplace lognormal noncentralt normal pareto studentt weibull uniform ' +\n  'binomial negbin hypgeom poisson triangular tukey arcsine'\n).split(' '));\n\n\n\n// extend beta function with static methods\njStat.extend(jStat.beta, {\n  pdf: function pdf(x, alpha, beta) {\n    // PDF is zero outside the support\n    if (x > 1 || x < 0)\n      return 0;\n    // PDF is one for the uniform case\n    if (alpha == 1 && beta == 1)\n      return 1;\n\n    if (alpha < 512 && beta < 512) {\n      return (Math.pow(x, alpha - 1) * Math.pow(1 - x, beta - 1)) /\n          jStat.betafn(alpha, beta);\n    } else {\n      return Math.exp((alpha - 1) * Math.log(x) +\n                      (beta - 1) * Math.log(1 - x) -\n                      jStat.betaln(alpha, beta));\n    }\n  },\n\n  cdf: function cdf(x, alpha, beta) {\n    return (x > 1 || x < 0) ? (x > 1) * 1 : jStat.ibeta(x, alpha, beta);\n  },\n\n  inv: function inv(x, alpha, beta) {\n    return jStat.ibetainv(x, alpha, beta);\n  },\n\n  mean: function mean(alpha, beta) {\n    return alpha / (alpha + beta);\n  },\n\n  median: function median(alpha, beta) {\n    return jStat.ibetainv(0.5, alpha, beta);\n  },\n\n  mode: function mode(alpha, beta) {\n    return (alpha - 1 ) / ( alpha + beta - 2);\n  },\n\n  // return a random sample\n  sample: function sample(alpha, beta) {\n    var u = jStat.randg(alpha);\n    return u / (u + jStat.randg(beta));\n  },\n\n  variance: function variance(alpha, beta) {\n    return (alpha * beta) / (Math.pow(alpha + beta, 2) * (alpha + beta + 1));\n  }\n});\n\n// extend F function with static methods\njStat.extend(jStat.centralF, {\n  // This implementation of the pdf function avoids float overflow\n  // See the way that R calculates this value:\n  // https://svn.r-project.org/R/trunk/src/nmath/df.c\n  pdf: function pdf(x, df1, df2) {\n    var p, q, f;\n\n    if (x < 0)\n      return 0;\n\n    if (df1 <= 2) {\n      if (x === 0 && df1 < 2) {\n        return Infinity;\n      }\n      if (x === 0 && df1 === 2) {\n        return 1;\n      }\n      return (1 / jStat.betafn(df1 / 2, df2 / 2)) *\n              Math.pow(df1 / df2, df1 / 2) *\n              Math.pow(x, (df1/2) - 1) *\n              Math.pow((1 + (df1 / df2) * x), -(df1 + df2) / 2);\n    }\n\n    p = (df1 * x) / (df2 + x * df1);\n    q = df2 / (df2 + x * df1);\n    f = df1 * q / 2.0;\n    return f * jStat.binomial.pdf((df1 - 2) / 2, (df1 + df2 - 2) / 2, p);\n  },\n\n  cdf: function cdf(x, df1, df2) {\n    if (x < 0)\n      return 0;\n    return jStat.ibeta((df1 * x) / (df1 * x + df2), df1 / 2, df2 / 2);\n  },\n\n  inv: function inv(x, df1, df2) {\n    return df2 / (df1 * (1 / jStat.ibetainv(x, df1 / 2, df2 / 2) - 1));\n  },\n\n  mean: function mean(df1, df2) {\n    return (df2 > 2) ? df2 / (df2 - 2) : undefined;\n  },\n\n  mode: function mode(df1, df2) {\n    return (df1 > 2) ? (df2 * (df1 - 2)) / (df1 * (df2 + 2)) : undefined;\n  },\n\n  // return a random sample\n  sample: function sample(df1, df2) {\n    var x1 = jStat.randg(df1 / 2) * 2;\n    var x2 = jStat.randg(df2 / 2) * 2;\n    return (x1 / df1) / (x2 / df2);\n  },\n\n  variance: function variance(df1, df2) {\n    if (df2 <= 4)\n      return undefined;\n    return 2 * df2 * df2 * (df1 + df2 - 2) /\n        (df1 * (df2 - 2) * (df2 - 2) * (df2 - 4));\n  }\n});\n\n\n// extend cauchy function with static methods\njStat.extend(jStat.cauchy, {\n  pdf: function pdf(x, local, scale) {\n    if (scale < 0) { return 0; }\n\n    return (scale / (Math.pow(x - local, 2) + Math.pow(scale, 2))) / Math.PI;\n  },\n\n  cdf: function cdf(x, local, scale) {\n    return Math.atan((x - local) / scale) / Math.PI + 0.5;\n  },\n\n  inv: function(p, local, scale) {\n    return local + scale * Math.tan(Math.PI * (p - 0.5));\n  },\n\n  median: function median(local, scale) {\n    return local;\n  },\n\n  mode: function mode(local, scale) {\n    return local;\n  },\n\n  sample: function sample(local, scale) {\n    return jStat.randn() *\n        Math.sqrt(1 / (2 * jStat.randg(0.5))) * scale + local;\n  }\n});\n\n\n\n// extend chisquare function with static methods\njStat.extend(jStat.chisquare, {\n  pdf: function pdf(x, dof) {\n    if (x < 0)\n      return 0;\n    return (x === 0 && dof === 2) ? 0.5 :\n        Math.exp((dof / 2 - 1) * Math.log(x) - x / 2 - (dof / 2) *\n                 Math.log(2) - jStat.gammaln(dof / 2));\n  },\n\n  cdf: function cdf(x, dof) {\n    if (x < 0)\n      return 0;\n    return jStat.lowRegGamma(dof / 2, x / 2);\n  },\n\n  inv: function(p, dof) {\n    return 2 * jStat.gammapinv(p, 0.5 * dof);\n  },\n\n  mean : function(dof) {\n    return dof;\n  },\n\n  // TODO: this is an approximation (is there a better way?)\n  median: function median(dof) {\n    return dof * Math.pow(1 - (2 / (9 * dof)), 3);\n  },\n\n  mode: function mode(dof) {\n    return (dof - 2 > 0) ? dof - 2 : 0;\n  },\n\n  sample: function sample(dof) {\n    return jStat.randg(dof / 2) * 2;\n  },\n\n  variance: function variance(dof) {\n    return 2 * dof;\n  }\n});\n\n\n\n// extend exponential function with static methods\njStat.extend(jStat.exponential, {\n  pdf: function pdf(x, rate) {\n    return x < 0 ? 0 : rate * Math.exp(-rate * x);\n  },\n\n  cdf: function cdf(x, rate) {\n    return x < 0 ? 0 : 1 - Math.exp(-rate * x);\n  },\n\n  inv: function(p, rate) {\n    return -Math.log(1 - p) / rate;\n  },\n\n  mean : function(rate) {\n    return 1 / rate;\n  },\n\n  median: function (rate) {\n    return (1 / rate) * Math.log(2);\n  },\n\n  mode: function mode(rate) {\n    return 0;\n  },\n\n  sample: function sample(rate) {\n    return -1 / rate * Math.log(Math.random());\n  },\n\n  variance : function(rate) {\n    return Math.pow(rate, -2);\n  }\n});\n\n\n\n// extend gamma function with static methods\njStat.extend(jStat.gamma, {\n  pdf: function pdf(x, shape, scale) {\n    if (x < 0)\n      return 0;\n    return (x === 0 && shape === 1) ? 1 / scale :\n            Math.exp((shape - 1) * Math.log(x) - x / scale -\n                    jStat.gammaln(shape) - shape * Math.log(scale));\n  },\n\n  cdf: function cdf(x, shape, scale) {\n    if (x < 0)\n      return 0;\n    return jStat.lowRegGamma(shape, x / scale);\n  },\n\n  inv: function(p, shape, scale) {\n    return jStat.gammapinv(p, shape) * scale;\n  },\n\n  mean : function(shape, scale) {\n    return shape * scale;\n  },\n\n  mode: function mode(shape, scale) {\n    if(shape > 1) return (shape - 1) * scale;\n    return undefined;\n  },\n\n  sample: function sample(shape, scale) {\n    return jStat.randg(shape) * scale;\n  },\n\n  variance: function variance(shape, scale) {\n    return shape * scale * scale;\n  }\n});\n\n// extend inverse gamma function with static methods\njStat.extend(jStat.invgamma, {\n  pdf: function pdf(x, shape, scale) {\n    if (x <= 0)\n      return 0;\n    return Math.exp(-(shape + 1) * Math.log(x) - scale / x -\n                    jStat.gammaln(shape) + shape * Math.log(scale));\n  },\n\n  cdf: function cdf(x, shape, scale) {\n    if (x <= 0)\n      return 0;\n    return 1 - jStat.lowRegGamma(shape, scale / x);\n  },\n\n  inv: function(p, shape, scale) {\n    return scale / jStat.gammapinv(1 - p, shape);\n  },\n\n  mean : function(shape, scale) {\n    return (shape > 1) ? scale / (shape - 1) : undefined;\n  },\n\n  mode: function mode(shape, scale) {\n    return scale / (shape + 1);\n  },\n\n  sample: function sample(shape, scale) {\n    return scale / jStat.randg(shape);\n  },\n\n  variance: function variance(shape, scale) {\n    if (shape <= 2)\n      return undefined;\n    return scale * scale / ((shape - 1) * (shape - 1) * (shape - 2));\n  }\n});\n\n\n// extend kumaraswamy function with static methods\njStat.extend(jStat.kumaraswamy, {\n  pdf: function pdf(x, alpha, beta) {\n    if (x === 0 && alpha === 1)\n      return beta;\n    else if (x === 1 && beta === 1)\n      return alpha;\n    return Math.exp(Math.log(alpha) + Math.log(beta) + (alpha - 1) *\n                    Math.log(x) + (beta - 1) *\n                    Math.log(1 - Math.pow(x, alpha)));\n  },\n\n  cdf: function cdf(x, alpha, beta) {\n    if (x < 0)\n      return 0;\n    else if (x > 1)\n      return 1;\n    return (1 - Math.pow(1 - Math.pow(x, alpha), beta));\n  },\n\n  inv: function inv(p, alpha, beta) {\n    return Math.pow(1 - Math.pow(1 - p, 1 / beta), 1 / alpha);\n  },\n\n  mean : function(alpha, beta) {\n    return (beta * jStat.gammafn(1 + 1 / alpha) *\n            jStat.gammafn(beta)) / (jStat.gammafn(1 + 1 / alpha + beta));\n  },\n\n  median: function median(alpha, beta) {\n    return Math.pow(1 - Math.pow(2, -1 / beta), 1 / alpha);\n  },\n\n  mode: function mode(alpha, beta) {\n    if (!(alpha >= 1 && beta >= 1 && (alpha !== 1 && beta !== 1)))\n      return undefined;\n    return Math.pow((alpha - 1) / (alpha * beta - 1), 1 / alpha);\n  },\n\n  variance: function variance(alpha, beta) {\n    throw new Error('variance not yet implemented');\n    // TODO: complete this\n  }\n});\n\n\n\n// extend lognormal function with static methods\njStat.extend(jStat.lognormal, {\n  pdf: function pdf(x, mu, sigma) {\n    if (x <= 0)\n      return 0;\n    return Math.exp(-Math.log(x) - 0.5 * Math.log(2 * Math.PI) -\n                    Math.log(sigma) - Math.pow(Math.log(x) - mu, 2) /\n                    (2 * sigma * sigma));\n  },\n\n  cdf: function cdf(x, mu, sigma) {\n    if (x < 0)\n      return 0;\n    return 0.5 +\n        (0.5 * jStat.erf((Math.log(x) - mu) / Math.sqrt(2 * sigma * sigma)));\n  },\n\n  inv: function(p, mu, sigma) {\n    return Math.exp(-1.41421356237309505 * sigma * jStat.erfcinv(2 * p) + mu);\n  },\n\n  mean: function mean(mu, sigma) {\n    return Math.exp(mu + sigma * sigma / 2);\n  },\n\n  median: function median(mu, sigma) {\n    return Math.exp(mu);\n  },\n\n  mode: function mode(mu, sigma) {\n    return Math.exp(mu - sigma * sigma);\n  },\n\n  sample: function sample(mu, sigma) {\n    return Math.exp(jStat.randn() * sigma + mu);\n  },\n\n  variance: function variance(mu, sigma) {\n    return (Math.exp(sigma * sigma) - 1) * Math.exp(2 * mu + sigma * sigma);\n  }\n});\n\n\n\n// extend noncentralt function with static methods\njStat.extend(jStat.noncentralt, {\n  pdf: function pdf(x, dof, ncp) {\n    var tol = 1e-14;\n    if (Math.abs(ncp) < tol)  // ncp approx 0; use student-t\n      return jStat.studentt.pdf(x, dof)\n\n    if (Math.abs(x) < tol) {  // different formula for x == 0\n      return Math.exp(jStat.gammaln((dof + 1) / 2) - ncp * ncp / 2 -\n                      0.5 * Math.log(Math.PI * dof) - jStat.gammaln(dof / 2));\n    }\n\n    // formula for x != 0\n    return dof / x *\n        (jStat.noncentralt.cdf(x * Math.sqrt(1 + 2 / dof), dof+2, ncp) -\n         jStat.noncentralt.cdf(x, dof, ncp));\n  },\n\n  cdf: function cdf(x, dof, ncp) {\n    var tol = 1e-14;\n    var min_iterations = 200;\n\n    if (Math.abs(ncp) < tol)  // ncp approx 0; use student-t\n      return jStat.studentt.cdf(x, dof);\n\n    // turn negative x into positive and flip result afterwards\n    var flip = false;\n    if (x < 0) {\n      flip = true;\n      ncp = -ncp;\n    }\n\n    var prob = jStat.normal.cdf(-ncp, 0, 1);\n    var value = tol + 1;\n    // use value at last two steps to determine convergence\n    var lastvalue = value;\n    var y = x * x / (x * x + dof);\n    var j = 0;\n    var p = Math.exp(-ncp * ncp / 2);\n    var q = Math.exp(-ncp * ncp / 2 - 0.5 * Math.log(2) -\n                     jStat.gammaln(3 / 2)) * ncp;\n    while (j < min_iterations || lastvalue > tol || value > tol) {\n      lastvalue = value;\n      if (j > 0) {\n        p *= (ncp * ncp) / (2 * j);\n        q *= (ncp * ncp) / (2 * (j + 1 / 2));\n      }\n      value = p * jStat.beta.cdf(y, j + 0.5, dof / 2) +\n          q * jStat.beta.cdf(y, j+1, dof/2);\n      prob += 0.5 * value;\n      j++;\n    }\n\n    return flip ? (1 - prob) : prob;\n  }\n});\n\n\n// extend normal function with static methods\njStat.extend(jStat.normal, {\n  pdf: function pdf(x, mean, std) {\n    return Math.exp(-0.5 * Math.log(2 * Math.PI) -\n                    Math.log(std) - Math.pow(x - mean, 2) / (2 * std * std));\n  },\n\n  cdf: function cdf(x, mean, std) {\n    return 0.5 * (1 + jStat.erf((x - mean) / Math.sqrt(2 * std * std)));\n  },\n\n  inv: function(p, mean, std) {\n    return -1.41421356237309505 * std * jStat.erfcinv(2 * p) + mean;\n  },\n\n  mean : function(mean, std) {\n    return mean;\n  },\n\n  median: function median(mean, std) {\n    return mean;\n  },\n\n  mode: function (mean, std) {\n    return mean;\n  },\n\n  sample: function sample(mean, std) {\n    return jStat.randn() * std + mean;\n  },\n\n  variance : function(mean, std) {\n    return std * std;\n  }\n});\n\n\n\n// extend pareto function with static methods\njStat.extend(jStat.pareto, {\n  pdf: function pdf(x, scale, shape) {\n    if (x < scale)\n      return 0;\n    return (shape * Math.pow(scale, shape)) / Math.pow(x, shape + 1);\n  },\n\n  cdf: function cdf(x, scale, shape) {\n    if (x < scale)\n      return 0;\n    return 1 - Math.pow(scale / x, shape);\n  },\n\n  inv: function inv(p, scale, shape) {\n    return scale / Math.pow(1 - p, 1 / shape);\n  },\n\n  mean: function mean(scale, shape) {\n    if (shape <= 1)\n      return undefined;\n    return (shape * Math.pow(scale, shape)) / (shape - 1);\n  },\n\n  median: function median(scale, shape) {\n    return scale * (shape * Math.SQRT2);\n  },\n\n  mode: function mode(scale, shape) {\n    return scale;\n  },\n\n  variance : function(scale, shape) {\n    if (shape <= 2)\n      return undefined;\n    return (scale*scale * shape) / (Math.pow(shape - 1, 2) * (shape - 2));\n  }\n});\n\n\n\n// extend studentt function with static methods\njStat.extend(jStat.studentt, {\n  pdf: function pdf(x, dof) {\n    dof = dof > 1e100 ? 1e100 : dof;\n    return (1/(Math.sqrt(dof) * jStat.betafn(0.5, dof/2))) *\n        Math.pow(1 + ((x * x) / dof), -((dof + 1) / 2));\n  },\n\n  cdf: function cdf(x, dof) {\n    var dof2 = dof / 2;\n    return jStat.ibeta((x + Math.sqrt(x * x + dof)) /\n                       (2 * Math.sqrt(x * x + dof)), dof2, dof2);\n  },\n\n  inv: function(p, dof) {\n    var x = jStat.ibetainv(2 * Math.min(p, 1 - p), 0.5 * dof, 0.5);\n    x = Math.sqrt(dof * (1 - x) / x);\n    return (p > 0.5) ? x : -x;\n  },\n\n  mean: function mean(dof) {\n    return (dof > 1) ? 0 : undefined;\n  },\n\n  median: function median(dof) {\n    return 0;\n  },\n\n  mode: function mode(dof) {\n    return 0;\n  },\n\n  sample: function sample(dof) {\n    return jStat.randn() * Math.sqrt(dof / (2 * jStat.randg(dof / 2)));\n  },\n\n  variance: function variance(dof) {\n    return (dof  > 2) ? dof / (dof - 2) : (dof > 1) ? Infinity : undefined;\n  }\n});\n\n\n\n// extend weibull function with static methods\njStat.extend(jStat.weibull, {\n  pdf: function pdf(x, scale, shape) {\n    if (x < 0 || scale < 0 || shape < 0)\n      return 0;\n    return (shape / scale) * Math.pow((x / scale), (shape - 1)) *\n        Math.exp(-(Math.pow((x / scale), shape)));\n  },\n\n  cdf: function cdf(x, scale, shape) {\n    return x < 0 ? 0 : 1 - Math.exp(-Math.pow((x / scale), shape));\n  },\n\n  inv: function(p, scale, shape) {\n    return scale * Math.pow(-Math.log(1 - p), 1 / shape);\n  },\n\n  mean : function(scale, shape) {\n    return scale * jStat.gammafn(1 + 1 / shape);\n  },\n\n  median: function median(scale, shape) {\n    return scale * Math.pow(Math.log(2), 1 / shape);\n  },\n\n  mode: function mode(scale, shape) {\n    if (shape <= 1)\n      return 0;\n    return scale * Math.pow((shape - 1) / shape, 1 / shape);\n  },\n\n  sample: function sample(scale, shape) {\n    return scale * Math.pow(-Math.log(Math.random()), 1 / shape);\n  },\n\n  variance: function variance(scale, shape) {\n    return scale * scale * jStat.gammafn(1 + 2 / shape) -\n        Math.pow(jStat.weibull.mean(scale, shape), 2);\n  }\n});\n\n\n\n// extend uniform function with static methods\njStat.extend(jStat.uniform, {\n  pdf: function pdf(x, a, b) {\n    return (x < a || x > b) ? 0 : 1 / (b - a);\n  },\n\n  cdf: function cdf(x, a, b) {\n    if (x < a)\n      return 0;\n    else if (x < b)\n      return (x - a) / (b - a);\n    return 1;\n  },\n\n  inv: function(p, a, b) {\n    return a + (p * (b - a));\n  },\n\n  mean: function mean(a, b) {\n    return 0.5 * (a + b);\n  },\n\n  median: function median(a, b) {\n    return jStat.mean(a, b);\n  },\n\n  mode: function mode(a, b) {\n    throw new Error('mode is not yet implemented');\n  },\n\n  sample: function sample(a, b) {\n    return (a / 2 + b / 2) + (b / 2 - a / 2) * (2 * Math.random() - 1);\n  },\n\n  variance: function variance(a, b) {\n    return Math.pow(b - a, 2) / 12;\n  }\n});\n\n\n\n// extend uniform function with static methods\njStat.extend(jStat.binomial, {\n  pdf: function pdf(k, n, p) {\n    return (p === 0 || p === 1) ?\n      ((n * p) === k ? 1 : 0) :\n      jStat.combination(n, k) * Math.pow(p, k) * Math.pow(1 - p, n - k);\n  },\n\n  cdf: function cdf(x, n, p) {\n    var binomarr = [],\n    k = 0;\n    if (x < 0) {\n      return 0;\n    }\n    if (x < n) {\n      for (; k <= x; k++) {\n        binomarr[ k ] = jStat.binomial.pdf(k, n, p);\n      }\n      return jStat.sum(binomarr);\n    }\n    return 1;\n  }\n});\n\n\n\n// extend uniform function with static methods\njStat.extend(jStat.negbin, {\n  pdf: function pdf(k, r, p) {\n    if (k !== k >>> 0)\n      return false;\n    if (k < 0)\n      return 0;\n    return jStat.combination(k + r - 1, r - 1) *\n        Math.pow(1 - p, k) * Math.pow(p, r);\n  },\n\n  cdf: function cdf(x, r, p) {\n    var sum = 0,\n    k = 0;\n    if (x < 0) return 0;\n    for (; k <= x; k++) {\n      sum += jStat.negbin.pdf(k, r, p);\n    }\n    return sum;\n  }\n});\n\n\n\n// extend uniform function with static methods\njStat.extend(jStat.hypgeom, {\n  pdf: function pdf(k, N, m, n) {\n    // Hypergeometric PDF.\n\n    // A simplification of the CDF algorithm below.\n\n    // k = number of successes drawn\n    // N = population size\n    // m = number of successes in population\n    // n = number of items drawn from population\n\n    if(k !== k | 0) {\n      return false;\n    } else if(k < 0 || k < m - (N - n)) {\n      // It's impossible to have this few successes drawn.\n      return 0;\n    } else if(k > n || k > m) {\n      // It's impossible to have this many successes drawn.\n      return 0;\n    } else if (m * 2 > N) {\n      // More than half the population is successes.\n\n      if(n * 2 > N) {\n        // More than half the population is sampled.\n\n        return jStat.hypgeom.pdf(N - m - n + k, N, N - m, N - n)\n      } else {\n        // Half or less of the population is sampled.\n\n        return jStat.hypgeom.pdf(n - k, N, N - m, n);\n      }\n\n    } else if(n * 2 > N) {\n      // Half or less is successes.\n\n      return jStat.hypgeom.pdf(m - k, N, m, N - n);\n\n    } else if(m < n) {\n      // We want to have the number of things sampled to be less than the\n      // successes available. So swap the definitions of successful and sampled.\n      return jStat.hypgeom.pdf(k, N, n, m);\n    } else {\n      // If we get here, half or less of the population was sampled, half or\n      // less of it was successes, and we had fewer sampled things than\n      // successes. Now we can do this complicated iterative algorithm in an\n      // efficient way.\n\n      // The basic premise of the algorithm is that we partially normalize our\n      // intermediate product to keep it in a numerically good region, and then\n      // finish the normalization at the end.\n\n      // This variable holds the scaled probability of the current number of\n      // successes.\n      var scaledPDF = 1;\n\n      // This keeps track of how much we have normalized.\n      var samplesDone = 0;\n\n      for(var i = 0; i < k; i++) {\n        // For every possible number of successes up to that observed...\n\n        while(scaledPDF > 1 && samplesDone < n) {\n          // Intermediate result is growing too big. Apply some of the\n          // normalization to shrink everything.\n\n          scaledPDF *= 1 - (m / (N - samplesDone));\n\n          // Say we've normalized by this sample already.\n          samplesDone++;\n        }\n\n        // Work out the partially-normalized hypergeometric PDF for the next\n        // number of successes\n        scaledPDF *= (n - i) * (m - i) / ((i + 1) * (N - m - n + i + 1));\n      }\n\n      for(; samplesDone < n; samplesDone++) {\n        // Apply all the rest of the normalization\n        scaledPDF *= 1 - (m / (N - samplesDone));\n      }\n\n      // Bound answer sanely before returning.\n      return Math.min(1, Math.max(0, scaledPDF));\n    }\n  },\n\n  cdf: function cdf(x, N, m, n) {\n    // Hypergeometric CDF.\n\n    // This algorithm is due to Prof. Thomas S. Ferguson, <tom@math.ucla.edu>,\n    // and comes from his hypergeometric test calculator at\n    // <http://www.math.ucla.edu/~tom/distributions/Hypergeometric.html>.\n\n    // x = number of successes drawn\n    // N = population size\n    // m = number of successes in population\n    // n = number of items drawn from population\n\n    if(x < 0 || x < m - (N - n)) {\n      // It's impossible to have this few successes drawn or fewer.\n      return 0;\n    } else if(x >= n || x >= m) {\n      // We will always have this many successes or fewer.\n      return 1;\n    } else if (m * 2 > N) {\n      // More than half the population is successes.\n\n      if(n * 2 > N) {\n        // More than half the population is sampled.\n\n        return jStat.hypgeom.cdf(N - m - n + x, N, N - m, N - n)\n      } else {\n        // Half or less of the population is sampled.\n\n        return 1 - jStat.hypgeom.cdf(n - x - 1, N, N - m, n);\n      }\n\n    } else if(n * 2 > N) {\n      // Half or less is successes.\n\n      return 1 - jStat.hypgeom.cdf(m - x - 1, N, m, N - n);\n\n    } else if(m < n) {\n      // We want to have the number of things sampled to be less than the\n      // successes available. So swap the definitions of successful and sampled.\n      return jStat.hypgeom.cdf(x, N, n, m);\n    } else {\n      // If we get here, half or less of the population was sampled, half or\n      // less of it was successes, and we had fewer sampled things than\n      // successes. Now we can do this complicated iterative algorithm in an\n      // efficient way.\n\n      // The basic premise of the algorithm is that we partially normalize our\n      // intermediate sum to keep it in a numerically good region, and then\n      // finish the normalization at the end.\n\n      // Holds the intermediate, scaled total CDF.\n      var scaledCDF = 1;\n\n      // This variable holds the scaled probability of the current number of\n      // successes.\n      var scaledPDF = 1;\n\n      // This keeps track of how much we have normalized.\n      var samplesDone = 0;\n\n      for(var i = 0; i < x; i++) {\n        // For every possible number of successes up to that observed...\n\n        while(scaledCDF > 1 && samplesDone < n) {\n          // Intermediate result is growing too big. Apply some of the\n          // normalization to shrink everything.\n\n          var factor = 1 - (m / (N - samplesDone));\n\n          scaledPDF *= factor;\n          scaledCDF *= factor;\n\n          // Say we've normalized by this sample already.\n          samplesDone++;\n        }\n\n        // Work out the partially-normalized hypergeometric PDF for the next\n        // number of successes\n        scaledPDF *= (n - i) * (m - i) / ((i + 1) * (N - m - n + i + 1));\n\n        // Add to the CDF answer.\n        scaledCDF += scaledPDF;\n      }\n\n      for(; samplesDone < n; samplesDone++) {\n        // Apply all the rest of the normalization\n        scaledCDF *= 1 - (m / (N - samplesDone));\n      }\n\n      // Bound answer sanely before returning.\n      return Math.min(1, Math.max(0, scaledCDF));\n    }\n  }\n});\n\n\n\n// extend uniform function with static methods\njStat.extend(jStat.poisson, {\n  pdf: function pdf(k, l) {\n    if (l < 0 || (k % 1) !== 0 || k < 0) {\n      return 0;\n    }\n\n    return Math.pow(l, k) * Math.exp(-l) / jStat.factorial(k);\n  },\n\n  cdf: function cdf(x, l) {\n    var sumarr = [],\n    k = 0;\n    if (x < 0) return 0;\n    for (; k <= x; k++) {\n      sumarr.push(jStat.poisson.pdf(k, l));\n    }\n    return jStat.sum(sumarr);\n  },\n\n  mean : function(l) {\n    return l;\n  },\n\n  variance : function(l) {\n    return l;\n  },\n\n  sample: function sample(l) {\n    var p = 1, k = 0, L = Math.exp(-l);\n    do {\n      k++;\n      p *= Math.random();\n    } while (p > L);\n    return k - 1;\n  }\n});\n\n// extend triangular function with static methods\njStat.extend(jStat.triangular, {\n  pdf: function pdf(x, a, b, c) {\n    if (b <= a || c < a || c > b) {\n      return NaN;\n    } else {\n      if (x < a || x > b) {\n        return 0;\n      } else if (x < c) {\n          return (2 * (x - a)) / ((b - a) * (c - a));\n      } else if (x === c) {\n          return (2 / (b - a));\n      } else { // x > c\n          return (2 * (b - x)) / ((b - a) * (b - c));\n      }\n    }\n  },\n\n  cdf: function cdf(x, a, b, c) {\n    if (b <= a || c < a || c > b)\n      return NaN;\n    if (x <= a)\n      return 0;\n    else if (x >= b)\n      return 1;\n    if (x <= c)\n      return Math.pow(x - a, 2) / ((b - a) * (c - a));\n    else // x > c\n      return 1 - Math.pow(b - x, 2) / ((b - a) * (b - c));\n  },\n\n  inv: function inv(p, a, b, c) {\n    if (b <= a || c < a || c > b) {\n      return NaN;\n    } else {\n      if (p <= ((c - a) / (b - a))) {\n        return a + (b - a) * Math.sqrt(p * ((c - a) / (b - a)));\n      } else { // p > ((c - a) / (b - a))\n        return a + (b - a) * (1 - Math.sqrt((1 - p) * (1 - ((c - a) / (b - a)))));\n      }\n    }\n  },\n\n  mean: function mean(a, b, c) {\n    return (a + b + c) / 3;\n  },\n\n  median: function median(a, b, c) {\n    if (c <= (a + b) / 2) {\n      return b - Math.sqrt((b - a) * (b - c)) / Math.sqrt(2);\n    } else if (c > (a + b) / 2) {\n      return a + Math.sqrt((b - a) * (c - a)) / Math.sqrt(2);\n    }\n  },\n\n  mode: function mode(a, b, c) {\n    return c;\n  },\n\n  sample: function sample(a, b, c) {\n    var u = Math.random();\n    if (u < ((c - a) / (b - a)))\n      return a + Math.sqrt(u * (b - a) * (c - a))\n    return b - Math.sqrt((1 - u) * (b - a) * (b - c));\n  },\n\n  variance: function variance(a, b, c) {\n    return (a * a + b * b + c * c - a * b - a * c - b * c) / 18;\n  }\n});\n\n\n// extend arcsine function with static methods\njStat.extend(jStat.arcsine, {\n  pdf: function pdf(x, a, b) {\n    if (b <= a) return NaN;\n\n    return (x <= a || x >= b) ? 0 :\n      (2 / Math.PI) *\n        Math.pow(Math.pow(b - a, 2) -\n                  Math.pow(2 * x - a - b, 2), -0.5);\n  },\n\n  cdf: function cdf(x, a, b) {\n    if (x < a)\n      return 0;\n    else if (x < b)\n      return (2 / Math.PI) * Math.asin(Math.sqrt((x - a)/(b - a)));\n    return 1;\n  },\n\n  inv: function(p, a, b) {\n    return a + (0.5 - 0.5 * Math.cos(Math.PI * p)) * (b - a);\n  },\n\n  mean: function mean(a, b) {\n    if (b <= a) return NaN;\n    return (a + b) / 2;\n  },\n\n  median: function median(a, b) {\n    if (b <= a) return NaN;\n    return (a + b) / 2;\n  },\n\n  mode: function mode(a, b) {\n    throw new Error('mode is not yet implemented');\n  },\n\n  sample: function sample(a, b) {\n    return ((a + b) / 2) + ((b - a) / 2) *\n      Math.sin(2 * Math.PI * jStat.uniform.sample(0, 1));\n  },\n\n  variance: function variance(a, b) {\n    if (b <= a) return NaN;\n    return Math.pow(b - a, 2) / 8;\n  }\n});\n\n\nfunction laplaceSign(x) { return x / Math.abs(x); }\n\njStat.extend(jStat.laplace, {\n  pdf: function pdf(x, mu, b) {\n    return (b <= 0) ? 0 : (Math.exp(-Math.abs(x - mu) / b)) / (2 * b);\n  },\n\n  cdf: function cdf(x, mu, b) {\n    if (b <= 0) { return 0; }\n\n    if(x < mu) {\n      return 0.5 * Math.exp((x - mu) / b);\n    } else {\n      return 1 - 0.5 * Math.exp(- (x - mu) / b);\n    }\n  },\n\n  mean: function(mu, b) {\n    return mu;\n  },\n\n  median: function(mu, b) {\n    return mu;\n  },\n\n  mode: function(mu, b) {\n    return mu;\n  },\n\n  variance: function(mu, b) {\n    return 2 * b * b;\n  },\n\n  sample: function sample(mu, b) {\n    var u = Math.random() - 0.5;\n\n    return mu - (b * laplaceSign(u) * Math.log(1 - (2 * Math.abs(u))));\n  }\n});\n\nfunction tukeyWprob(w, rr, cc) {\n  var nleg = 12;\n  var ihalf = 6;\n\n  var C1 = -30;\n  var C2 = -50;\n  var C3 = 60;\n  var bb   = 8;\n  var wlar = 3;\n  var wincr1 = 2;\n  var wincr2 = 3;\n  var xleg = [\n    0.981560634246719250690549090149,\n    0.904117256370474856678465866119,\n    0.769902674194304687036893833213,\n    0.587317954286617447296702418941,\n    0.367831498998180193752691536644,\n    0.125233408511468915472441369464\n  ];\n  var aleg = [\n    0.047175336386511827194615961485,\n    0.106939325995318430960254718194,\n    0.160078328543346226334652529543,\n    0.203167426723065921749064455810,\n    0.233492536538354808760849898925,\n    0.249147045813402785000562436043\n  ];\n\n  var qsqz = w * 0.5;\n\n  // if w >= 16 then the integral lower bound (occurs for c=20)\n  // is 0.99999999999995 so return a value of 1.\n\n  if (qsqz >= bb)\n    return 1.0;\n\n  // find (f(w/2) - 1) ^ cc\n  // (first term in integral of hartley's form).\n\n  var pr_w = 2 * jStat.normal.cdf(qsqz, 0, 1, 1, 0) - 1; // erf(qsqz / M_SQRT2)\n  // if pr_w ^ cc < 2e-22 then set pr_w = 0\n  if (pr_w >= Math.exp(C2 / cc))\n    pr_w = Math.pow(pr_w, cc);\n  else\n    pr_w = 0.0;\n\n  // if w is large then the second component of the\n  // integral is small, so fewer intervals are needed.\n\n  var wincr;\n  if (w > wlar)\n    wincr = wincr1;\n  else\n    wincr = wincr2;\n\n  // find the integral of second term of hartley's form\n  // for the integral of the range for equal-length\n  // intervals using legendre quadrature.  limits of\n  // integration are from (w/2, 8).  two or three\n  // equal-length intervals are used.\n\n  // blb and bub are lower and upper limits of integration.\n\n  var blb = qsqz;\n  var binc = (bb - qsqz) / wincr;\n  var bub = blb + binc;\n  var einsum = 0.0;\n\n  // integrate over each interval\n\n  var cc1 = cc - 1.0;\n  for (var wi = 1; wi <= wincr; wi++) {\n    var elsum = 0.0;\n    var a = 0.5 * (bub + blb);\n\n    // legendre quadrature with order = nleg\n\n    var b = 0.5 * (bub - blb);\n\n    for (var jj = 1; jj <= nleg; jj++) {\n      var j, xx;\n      if (ihalf < jj) {\n        j = (nleg - jj) + 1;\n        xx = xleg[j-1];\n      } else {\n        j = jj;\n        xx = -xleg[j-1];\n      }\n      var c = b * xx;\n      var ac = a + c;\n\n      // if exp(-qexpo/2) < 9e-14,\n      // then doesn't contribute to integral\n\n      var qexpo = ac * ac;\n      if (qexpo > C3)\n        break;\n\n      var pplus = 2 * jStat.normal.cdf(ac, 0, 1, 1, 0);\n      var pminus= 2 * jStat.normal.cdf(ac, w, 1, 1, 0);\n\n      // if rinsum ^ (cc-1) < 9e-14,\n      // then doesn't contribute to integral\n\n      var rinsum = (pplus * 0.5) - (pminus * 0.5);\n      if (rinsum >= Math.exp(C1 / cc1)) {\n        rinsum = (aleg[j-1] * Math.exp(-(0.5 * qexpo))) * Math.pow(rinsum, cc1);\n        elsum += rinsum;\n      }\n    }\n    elsum *= (((2.0 * b) * cc) / Math.sqrt(2 * Math.PI));\n    einsum += elsum;\n    blb = bub;\n    bub += binc;\n  }\n\n  // if pr_w ^ rr < 9e-14, then return 0\n  pr_w += einsum;\n  if (pr_w <= Math.exp(C1 / rr))\n    return 0;\n\n  pr_w = Math.pow(pr_w, rr);\n  if (pr_w >= 1) // 1 was iMax was eps\n    return 1;\n  return pr_w;\n}\n\nfunction tukeyQinv(p, c, v) {\n  var p0 = 0.322232421088;\n  var q0 = 0.993484626060e-01;\n  var p1 = -1.0;\n  var q1 = 0.588581570495;\n  var p2 = -0.342242088547;\n  var q2 = 0.531103462366;\n  var p3 = -0.204231210125;\n  var q3 = 0.103537752850;\n  var p4 = -0.453642210148e-04;\n  var q4 = 0.38560700634e-02;\n  var c1 = 0.8832;\n  var c2 = 0.2368;\n  var c3 = 1.214;\n  var c4 = 1.208;\n  var c5 = 1.4142;\n  var vmax = 120.0;\n\n  var ps = 0.5 - 0.5 * p;\n  var yi = Math.sqrt(Math.log(1.0 / (ps * ps)));\n  var t = yi + (((( yi * p4 + p3) * yi + p2) * yi + p1) * yi + p0)\n     / (((( yi * q4 + q3) * yi + q2) * yi + q1) * yi + q0);\n  if (v < vmax) t += (t * t * t + t) / v / 4.0;\n  var q = c1 - c2 * t;\n  if (v < vmax) q += -c3 / v + c4 * t / v;\n  return t * (q * Math.log(c - 1.0) + c5);\n}\n\njStat.extend(jStat.tukey, {\n  cdf: function cdf(q, nmeans, df) {\n    // Identical implementation as the R ptukey() function as of commit 68947\n    var rr = 1;\n    var cc = nmeans;\n\n    var nlegq = 16;\n    var ihalfq = 8;\n\n    var eps1 = -30.0;\n    var eps2 = 1.0e-14;\n    var dhaf  = 100.0;\n    var dquar = 800.0;\n    var deigh = 5000.0;\n    var dlarg = 25000.0;\n    var ulen1 = 1.0;\n    var ulen2 = 0.5;\n    var ulen3 = 0.25;\n    var ulen4 = 0.125;\n    var xlegq = [\n      0.989400934991649932596154173450,\n      0.944575023073232576077988415535,\n      0.865631202387831743880467897712,\n      0.755404408355003033895101194847,\n      0.617876244402643748446671764049,\n      0.458016777657227386342419442984,\n      0.281603550779258913230460501460,\n      0.950125098376374401853193354250e-1\n    ];\n    var alegq = [\n      0.271524594117540948517805724560e-1,\n      0.622535239386478928628438369944e-1,\n      0.951585116824927848099251076022e-1,\n      0.124628971255533872052476282192,\n      0.149595988816576732081501730547,\n      0.169156519395002538189312079030,\n      0.182603415044923588866763667969,\n      0.189450610455068496285396723208\n    ];\n\n    if (q <= 0)\n      return 0;\n\n    // df must be > 1\n    // there must be at least two values\n\n    if (df < 2 || rr < 1 || cc < 2) return NaN;\n\n    if (!Number.isFinite(q))\n      return 1;\n\n    if (df > dlarg)\n      return tukeyWprob(q, rr, cc);\n\n    // calculate leading constant\n\n    var f2 = df * 0.5;\n    var f2lf = ((f2 * Math.log(df)) - (df * Math.log(2))) - jStat.gammaln(f2);\n    var f21 = f2 - 1.0;\n\n    // integral is divided into unit, half-unit, quarter-unit, or\n    // eighth-unit length intervals depending on the value of the\n    // degrees of freedom.\n\n    var ff4 = df * 0.25;\n    var ulen;\n    if      (df <= dhaf)  ulen = ulen1;\n    else if (df <= dquar) ulen = ulen2;\n    else if (df <= deigh) ulen = ulen3;\n    else                  ulen = ulen4;\n\n    f2lf += Math.log(ulen);\n\n    // integrate over each subinterval\n\n    var ans = 0.0;\n\n    for (var i = 1; i <= 50; i++) {\n      var otsum = 0.0;\n\n      // legendre quadrature with order = nlegq\n      // nodes (stored in xlegq) are symmetric around zero.\n\n      var twa1 = (2 * i - 1) * ulen;\n\n      for (var jj = 1; jj <= nlegq; jj++) {\n        var j, t1;\n        if (ihalfq < jj) {\n          j = jj - ihalfq - 1;\n          t1 = (f2lf + (f21 * Math.log(twa1 + (xlegq[j] * ulen))))\n              - (((xlegq[j] * ulen) + twa1) * ff4);\n        } else {\n          j = jj - 1;\n          t1 = (f2lf + (f21 * Math.log(twa1 - (xlegq[j] * ulen))))\n              + (((xlegq[j] * ulen) - twa1) * ff4);\n        }\n\n        // if exp(t1) < 9e-14, then doesn't contribute to integral\n        var qsqz;\n        if (t1 >= eps1) {\n          if (ihalfq < jj) {\n            qsqz = q * Math.sqrt(((xlegq[j] * ulen) + twa1) * 0.5);\n          } else {\n            qsqz = q * Math.sqrt(((-(xlegq[j] * ulen)) + twa1) * 0.5);\n          }\n\n          // call wprob to find integral of range portion\n\n          var wprb = tukeyWprob(qsqz, rr, cc);\n          var rotsum = (wprb * alegq[j]) * Math.exp(t1);\n          otsum += rotsum;\n        }\n        // end legendre integral for interval i\n        // L200:\n      }\n\n      // if integral for interval i < 1e-14, then stop.\n      // However, in order to avoid small area under left tail,\n      // at least  1 / ulen  intervals are calculated.\n      if (i * ulen >= 1.0 && otsum <= eps2)\n        break;\n\n      // end of interval i\n      // L330:\n\n      ans += otsum;\n    }\n\n    if (otsum > eps2) { // not converged\n      throw new Error('tukey.cdf failed to converge');\n    }\n    if (ans > 1)\n      ans = 1;\n    return ans;\n  },\n\n  inv: function(p, nmeans, df) {\n    // Identical implementation as the R qtukey() function as of commit 68947\n    var rr = 1;\n    var cc = nmeans;\n\n    var eps = 0.0001;\n    var maxiter = 50;\n\n    // df must be > 1 ; there must be at least two values\n    if (df < 2 || rr < 1 || cc < 2) return NaN;\n\n    if (p < 0 || p > 1) return NaN;\n    if (p === 0) return 0;\n    if (p === 1) return Infinity;\n\n    // Initial value\n\n    var x0 = tukeyQinv(p, cc, df);\n\n    // Find prob(value < x0)\n\n    var valx0 = jStat.tukey.cdf(x0, nmeans, df) - p;\n\n    // Find the second iterate and prob(value < x1).\n    // If the first iterate has probability value\n    // exceeding p then second iterate is 1 less than\n    // first iterate; otherwise it is 1 greater.\n\n    var x1;\n    if (valx0 > 0.0)\n      x1 = Math.max(0.0, x0 - 1.0);\n    else\n      x1 = x0 + 1.0;\n    var valx1 = jStat.tukey.cdf(x1, nmeans, df) - p;\n\n    // Find new iterate\n\n    var ans;\n    for(var iter = 1; iter < maxiter; iter++) {\n      ans = x1 - ((valx1 * (x1 - x0)) / (valx1 - valx0));\n      valx0 = valx1;\n\n      // New iterate must be >= 0\n\n      x0 = x1;\n      if (ans < 0.0) {\n        ans = 0.0;\n        valx1 = -p;\n      }\n      // Find prob(value < new iterate)\n\n      valx1 = jStat.tukey.cdf(ans, nmeans, df) - p;\n      x1 = ans;\n\n      // If the difference between two successive\n      // iterates is less than eps, stop\n\n      var xabs = Math.abs(x1 - x0);\n      if (xabs < eps)\n        return ans;\n    }\n\n    throw new Error('tukey.inv failed to converge');\n  }\n});\n\n}(jStat, Math));\n/* Provides functions for the solution of linear system of equations, integration, extrapolation,\n * interpolation, eigenvalue problems, differential equations and PCA analysis. */\n\n(function(jStat, Math) {\n\nvar push = Array.prototype.push;\nvar isArray = jStat.utils.isArray;\n\nfunction isUsable(arg) {\n  return isArray(arg) || arg instanceof jStat;\n}\n\njStat.extend({\n\n  // add a vector/matrix to a vector/matrix or scalar\n  add: function add(arr, arg) {\n    // check if arg is a vector or scalar\n    if (isUsable(arg)) {\n      if (!isUsable(arg[0])) arg = [ arg ];\n      return jStat.map(arr, function(value, row, col) {\n        return value + arg[row][col];\n      });\n    }\n    return jStat.map(arr, function(value) { return value + arg; });\n  },\n\n  // subtract a vector or scalar from the vector\n  subtract: function subtract(arr, arg) {\n    // check if arg is a vector or scalar\n    if (isUsable(arg)) {\n      if (!isUsable(arg[0])) arg = [ arg ];\n      return jStat.map(arr, function(value, row, col) {\n        return value - arg[row][col] || 0;\n      });\n    }\n    return jStat.map(arr, function(value) { return value - arg; });\n  },\n\n  // matrix division\n  divide: function divide(arr, arg) {\n    if (isUsable(arg)) {\n      if (!isUsable(arg[0])) arg = [ arg ];\n      return jStat.multiply(arr, jStat.inv(arg));\n    }\n    return jStat.map(arr, function(value) { return value / arg; });\n  },\n\n  // matrix multiplication\n  multiply: function multiply(arr, arg) {\n    var row, col, nrescols, sum, nrow, ncol, res, rescols;\n    // eg: arr = 2 arg = 3 -> 6 for res[0][0] statement closure\n    if (arr.length === undefined && arg.length === undefined) {\n      return arr * arg;\n    }\n    nrow = arr.length,\n    ncol = arr[0].length,\n    res = jStat.zeros(nrow, nrescols = (isUsable(arg)) ? arg[0].length : ncol),\n    rescols = 0;\n    if (isUsable(arg)) {\n      for (; rescols < nrescols; rescols++) {\n        for (row = 0; row < nrow; row++) {\n          sum = 0;\n          for (col = 0; col < ncol; col++)\n          sum += arr[row][col] * arg[col][rescols];\n          res[row][rescols] = sum;\n        }\n      }\n      return (nrow === 1 && rescols === 1) ? res[0][0] : res;\n    }\n    return jStat.map(arr, function(value) { return value * arg; });\n  },\n\n  // outer([1,2,3],[4,5,6])\n  // ===\n  // [[1],[2],[3]] times [[4,5,6]]\n  // ->\n  // [[4,5,6],[8,10,12],[12,15,18]]\n  outer:function outer(A, B) {\n    return jStat.multiply(A.map(function(t){ return [t] }), [B]);\n  },\n\n\n  // Returns the dot product of two matricies\n  dot: function dot(arr, arg) {\n    if (!isUsable(arr[0])) arr = [ arr ];\n    if (!isUsable(arg[0])) arg = [ arg ];\n    // convert column to row vector\n    var left = (arr[0].length === 1 && arr.length !== 1) ? jStat.transpose(arr) : arr,\n    right = (arg[0].length === 1 && arg.length !== 1) ? jStat.transpose(arg) : arg,\n    res = [],\n    row = 0,\n    nrow = left.length,\n    ncol = left[0].length,\n    sum, col;\n    for (; row < nrow; row++) {\n      res[row] = [];\n      sum = 0;\n      for (col = 0; col < ncol; col++)\n      sum += left[row][col] * right[row][col];\n      res[row] = sum;\n    }\n    return (res.length === 1) ? res[0] : res;\n  },\n\n  // raise every element by a scalar\n  pow: function pow(arr, arg) {\n    return jStat.map(arr, function(value) { return Math.pow(value, arg); });\n  },\n\n  // exponentiate every element\n  exp: function exp(arr) {\n    return jStat.map(arr, function(value) { return Math.exp(value); });\n  },\n\n  // generate the natural log of every element\n  log: function exp(arr) {\n    return jStat.map(arr, function(value) { return Math.log(value); });\n  },\n\n  // generate the absolute values of the vector\n  abs: function abs(arr) {\n    return jStat.map(arr, function(value) { return Math.abs(value); });\n  },\n\n  // computes the p-norm of the vector\n  // In the case that a matrix is passed, uses the first row as the vector\n  norm: function norm(arr, p) {\n    var nnorm = 0,\n    i = 0;\n    // check the p-value of the norm, and set for most common case\n    if (isNaN(p)) p = 2;\n    // check if multi-dimensional array, and make vector correction\n    if (isUsable(arr[0])) arr = arr[0];\n    // vector norm\n    for (; i < arr.length; i++) {\n      nnorm += Math.pow(Math.abs(arr[i]), p);\n    }\n    return Math.pow(nnorm, 1 / p);\n  },\n\n  // computes the angle between two vectors in rads\n  // In case a matrix is passed, this uses the first row as the vector\n  angle: function angle(arr, arg) {\n    return Math.acos(jStat.dot(arr, arg) / (jStat.norm(arr) * jStat.norm(arg)));\n  },\n\n  // augment one matrix by another\n  // Note: this function returns a matrix, not a jStat object\n  aug: function aug(a, b) {\n    var newarr = [];\n    for (var i = 0; i < a.length; i++) {\n      newarr.push(a[i].slice());\n    }\n    for (var i = 0; i < newarr.length; i++) {\n      push.apply(newarr[i], b[i]);\n    }\n    return newarr;\n  },\n\n  // The inv() function calculates the inverse of a matrix\n  // Create the inverse by augmenting the matrix by the identity matrix of the\n  // appropriate size, and then use G-J elimination on the augmented matrix.\n  inv: function inv(a) {\n    var rows = a.length;\n    var cols = a[0].length;\n    var b = jStat.identity(rows, cols);\n    var c = jStat.gauss_jordan(a, b);\n    var result = [];\n    var i = 0;\n    var j;\n\n    //We need to copy the inverse portion to a new matrix to rid G-J artifacts\n    for (; i < rows; i++) {\n      result[i] = [];\n      for (j = cols; j < c[0].length; j++)\n        result[i][j - cols] = c[i][j];\n    }\n    return result;\n  },\n\n  // calculate the determinant of a matrix\n  det: function det(a) {\n    var alen = a.length,\n    alend = alen * 2,\n    vals = new Array(alend),\n    rowshift = alen - 1,\n    colshift = alend - 1,\n    mrow = rowshift - alen + 1,\n    mcol = colshift,\n    i = 0,\n    result = 0,\n    j;\n    // check for special 2x2 case\n    if (alen === 2) {\n      return a[0][0] * a[1][1] - a[0][1] * a[1][0];\n    }\n    for (; i < alend; i++) {\n      vals[i] = 1;\n    }\n    for (var i = 0; i < alen; i++) {\n      for (j = 0; j < alen; j++) {\n        vals[(mrow < 0) ? mrow + alen : mrow ] *= a[i][j];\n        vals[(mcol < alen) ? mcol + alen : mcol ] *= a[i][j];\n        mrow++;\n        mcol--;\n      }\n      mrow = --rowshift - alen + 1;\n      mcol = --colshift;\n    }\n    for (var i = 0; i < alen; i++) {\n      result += vals[i];\n    }\n    for (; i < alend; i++) {\n      result -= vals[i];\n    }\n    return result;\n  },\n\n  gauss_elimination: function gauss_elimination(a, b) {\n    var i = 0,\n    j = 0,\n    n = a.length,\n    m = a[0].length,\n    factor = 1,\n    sum = 0,\n    x = [],\n    maug, pivot, temp, k;\n    a = jStat.aug(a, b);\n    maug = a[0].length;\n    for(var i = 0; i < n; i++) {\n      pivot = a[i][i];\n      j = i;\n      for (k = i + 1; k < m; k++) {\n        if (pivot < Math.abs(a[k][i])) {\n          pivot = a[k][i];\n          j = k;\n        }\n      }\n      if (j != i) {\n        for(k = 0; k < maug; k++) {\n          temp = a[i][k];\n          a[i][k] = a[j][k];\n          a[j][k] = temp;\n        }\n      }\n      for (j = i + 1; j < n; j++) {\n        factor = a[j][i] / a[i][i];\n        for(k = i; k < maug; k++) {\n          a[j][k] = a[j][k] - factor * a[i][k];\n        }\n      }\n    }\n    for (var i = n - 1; i >= 0; i--) {\n      sum = 0;\n      for (j = i + 1; j<= n - 1; j++) {\n        sum = sum + x[j] * a[i][j];\n      }\n      x[i] =(a[i][maug - 1] - sum) / a[i][i];\n    }\n    return x;\n  },\n\n  gauss_jordan: function gauss_jordan(a, b) {\n    var m = jStat.aug(a, b),\n    h = m.length,\n    w = m[0].length;\n    var c = 0;\n    // find max pivot\n    for (var y = 0; y < h; y++) {\n      var maxrow = y;\n      for (var y2 = y+1; y2 < h; y2++) {\n        if (Math.abs(m[y2][y]) > Math.abs(m[maxrow][y]))\n          maxrow = y2;\n      }\n      var tmp = m[y];\n      m[y] = m[maxrow];\n      m[maxrow] = tmp\n      for (var y2 = y+1; y2 < h; y2++) {\n        c = m[y2][y] / m[y][y];\n        for (var x = y; x < w; x++) {\n          m[y2][x] -= m[y][x] * c;\n        }\n      }\n    }\n    // backsubstitute\n    for (var y = h-1; y >= 0; y--) {\n      c = m[y][y];\n      for (var y2 = 0; y2 < y; y2++) {\n        for (var x = w-1; x > y-1; x--) {\n          m[y2][x] -= m[y][x] * m[y2][y] / c;\n        }\n      }\n      m[y][y] /= c;\n      for (var x = h; x < w; x++) {\n        m[y][x] /= c;\n      }\n    }\n    return m;\n  },\n\n  // solve equation\n  // Ax=b\n  // A is upper triangular matrix\n  // A=[[1,2,3],[0,4,5],[0,6,7]]\n  // b=[1,2,3]\n  // triaUpSolve(A,b) // -> [2.666,0.1666,1.666]\n  // if you use matrix style\n  // A=[[1,2,3],[0,4,5],[0,6,7]]\n  // b=[[1],[2],[3]]\n  // will return [[2.666],[0.1666],[1.666]]\n  triaUpSolve: function triaUpSolve(A, b) {\n    var size = A[0].length;\n    var x = jStat.zeros(1, size)[0];\n    var parts;\n    var matrix_mode = false;\n\n    if (b[0].length != undefined) {\n      b = b.map(function(i){ return i[0] });\n      matrix_mode = true;\n    }\n\n    jStat.arange(size - 1, -1, -1).forEach(function(i) {\n      parts = jStat.arange(i + 1, size).map(function(j) {\n        return x[j] * A[i][j];\n      });\n      x[i] = (b[i] - jStat.sum(parts)) / A[i][i];\n    });\n\n    if (matrix_mode)\n      return x.map(function(i){ return [i] });\n    return x;\n  },\n\n  triaLowSolve: function triaLowSolve(A, b) {\n    // like to triaUpSolve but A is lower triangular matrix\n    var size = A[0].length;\n    var x = jStat.zeros(1, size)[0];\n    var parts;\n\n    var matrix_mode=false;\n    if (b[0].length != undefined) {\n      b = b.map(function(i){ return i[0] });\n      matrix_mode = true;\n    }\n\n    jStat.arange(size).forEach(function(i) {\n      parts = jStat.arange(i).map(function(j) {\n        return A[i][j] * x[j];\n      });\n      x[i] = (b[i] - jStat.sum(parts)) / A[i][i];\n    })\n\n    if (matrix_mode)\n      return x.map(function(i){ return [i] });\n    return x;\n  },\n\n\n  // A -> [L,U]\n  // A=LU\n  // L is lower triangular matrix\n  // U is upper triangular matrix\n  lu: function lu(A) {\n    var size = A.length;\n    //var L=jStat.diagonal(jStat.ones(1,size)[0]);\n    var L = jStat.identity(size);\n    var R = jStat.zeros(A.length, A[0].length);\n    var parts;\n    jStat.arange(size).forEach(function(t) {\n      R[0][t] = A[0][t];\n    });\n    jStat.arange(1, size).forEach(function(l) {\n      jStat.arange(l).forEach(function(i) {\n        parts = jStat.arange(i).map(function(jj) {\n          return L[l][jj] * R[jj][i];\n        });\n        L[l][i] = (A[l][i] - jStat.sum(parts)) / R[i][i];\n      });\n      jStat.arange(l, size).forEach(function(j) {\n        parts = jStat.arange(l).map(function(jj) {\n          return L[l][jj] * R[jj][j];\n        });\n        R[l][j] = A[i][j] - jStat.sum(parts);\n      });\n    });\n    return [L, R];\n  },\n\n  // A -> T\n  // A=TT'\n  // T is lower triangular matrix\n  cholesky: function cholesky(A) {\n    var size = A.length;\n    var T = jStat.zeros(A.length, A[0].length);\n    var parts;\n    jStat.arange(size).forEach(function(i) {\n      parts = jStat.arange(i).map(function(t) {\n        return Math.pow(T[i][t],2);\n      });\n      T[i][i] = Math.sqrt(A[i][i] - jStat.sum(parts));\n      jStat.arange(i + 1, size).forEach(function(j) {\n        parts = jStat.arange(i).map(function(t) {\n          return T[i][t] * T[j][t];\n        });\n        T[j][i] = (A[i][j] - jStat.sum(parts)) / T[i][i];\n      });\n    });\n    return T;\n  },\n\n\n  gauss_jacobi: function gauss_jacobi(a, b, x, r) {\n    var i = 0;\n    var j = 0;\n    var n = a.length;\n    var l = [];\n    var u = [];\n    var d = [];\n    var xv, c, h, xk;\n    for (; i < n; i++) {\n      l[i] = [];\n      u[i] = [];\n      d[i] = [];\n      for (j = 0; j < n; j++) {\n        if (i > j) {\n          l[i][j] = a[i][j];\n          u[i][j] = d[i][j] = 0;\n        } else if (i < j) {\n          u[i][j] = a[i][j];\n          l[i][j] = d[i][j] = 0;\n        } else {\n          d[i][j] = a[i][j];\n          l[i][j] = u[i][j] = 0;\n        }\n      }\n    }\n    h = jStat.multiply(jStat.multiply(jStat.inv(d), jStat.add(l, u)), -1);\n    c = jStat.multiply(jStat.inv(d), b);\n    xv = x;\n    xk = jStat.add(jStat.multiply(h, x), c);\n    i = 2;\n    while (Math.abs(jStat.norm(jStat.subtract(xk,xv))) > r) {\n      xv = xk;\n      xk = jStat.add(jStat.multiply(h, xv), c);\n      i++;\n    }\n    return xk;\n  },\n\n  gauss_seidel: function gauss_seidel(a, b, x, r) {\n    var i = 0;\n    var n = a.length;\n    var l = [];\n    var u = [];\n    var d = [];\n    var j, xv, c, h, xk;\n    for (; i < n; i++) {\n      l[i] = [];\n      u[i] = [];\n      d[i] = [];\n      for (j = 0; j < n; j++) {\n        if (i > j) {\n          l[i][j] = a[i][j];\n          u[i][j] = d[i][j] = 0;\n        } else if (i < j) {\n          u[i][j] = a[i][j];\n          l[i][j] = d[i][j] = 0;\n        } else {\n          d[i][j] = a[i][j];\n          l[i][j] = u[i][j] = 0;\n        }\n      }\n    }\n    h = jStat.multiply(jStat.multiply(jStat.inv(jStat.add(d, l)), u), -1);\n    c = jStat.multiply(jStat.inv(jStat.add(d, l)), b);\n    xv = x;\n    xk = jStat.add(jStat.multiply(h, x), c);\n    i = 2;\n    while (Math.abs(jStat.norm(jStat.subtract(xk, xv))) > r) {\n      xv = xk;\n      xk = jStat.add(jStat.multiply(h, xv), c);\n      i = i + 1;\n    }\n    return xk;\n  },\n\n  SOR: function SOR(a, b, x, r, w) {\n    var i = 0;\n    var n = a.length;\n    var l = [];\n    var u = [];\n    var d = [];\n    var j, xv, c, h, xk;\n    for (; i < n; i++) {\n      l[i] = [];\n      u[i] = [];\n      d[i] = [];\n      for (j = 0; j < n; j++) {\n        if (i > j) {\n          l[i][j] = a[i][j];\n          u[i][j] = d[i][j] = 0;\n        } else if (i < j) {\n          u[i][j] = a[i][j];\n          l[i][j] = d[i][j] = 0;\n        } else {\n          d[i][j] = a[i][j];\n          l[i][j] = u[i][j] = 0;\n        }\n      }\n    }\n    h = jStat.multiply(jStat.inv(jStat.add(d, jStat.multiply(l, w))),\n                       jStat.subtract(jStat.multiply(d, 1 - w),\n                                      jStat.multiply(u, w)));\n    c = jStat.multiply(jStat.multiply(jStat.inv(jStat.add(d,\n        jStat.multiply(l, w))), b), w);\n    xv = x;\n    xk = jStat.add(jStat.multiply(h, x), c);\n    i = 2;\n    while (Math.abs(jStat.norm(jStat.subtract(xk, xv))) > r) {\n      xv = xk;\n      xk = jStat.add(jStat.multiply(h, xv), c);\n      i++;\n    }\n    return xk;\n  },\n\n  householder: function householder(a) {\n    var m = a.length;\n    var n = a[0].length;\n    var i = 0;\n    var w = [];\n    var p = [];\n    var alpha, r, k, j, factor;\n    for (; i < m - 1; i++) {\n      alpha = 0;\n      for (j = i + 1; j < n; j++)\n      alpha += (a[j][i] * a[j][i]);\n      factor = (a[i + 1][i] > 0) ? -1 : 1;\n      alpha = factor * Math.sqrt(alpha);\n      r = Math.sqrt((((alpha * alpha) - a[i + 1][i] * alpha) / 2));\n      w = jStat.zeros(m, 1);\n      w[i + 1][0] = (a[i + 1][i] - alpha) / (2 * r);\n      for (k = i + 2; k < m; k++) w[k][0] = a[k][i] / (2 * r);\n      p = jStat.subtract(jStat.identity(m, n),\n          jStat.multiply(jStat.multiply(w, jStat.transpose(w)), 2));\n      a = jStat.multiply(p, jStat.multiply(a, p));\n    }\n    return a;\n  },\n\n  // A -> [Q,R]\n  // Q is orthogonal matrix\n  // R is upper triangular\n  QR: (function() {\n    // x -> Q\n    // find a orthogonal matrix Q st.\n    // Qx=y\n    // y is [||x||,0,0,...]\n\n    // quick ref\n    var sum   = jStat.sum;\n    var range = jStat.arange;\n\n    function get_Q1(x) {\n      var size = x.length;\n      var norm_x = jStat.norm(x, 2);\n      var e1 = jStat.zeros(1, size)[0];\n      e1[0] = 1;\n      var u = jStat.add(jStat.multiply(jStat.multiply(e1, norm_x), -1), x);\n      var norm_u = jStat.norm(u, 2);\n      var v = jStat.divide(u, norm_u);\n      var Q = jStat.subtract(jStat.identity(size),\n                             jStat.multiply(jStat.outer(v, v), 2));\n      return Q;\n    }\n\n    function qr(A) {\n      var size = A[0].length;\n      var QList = [];\n      jStat.arange(size).forEach(function(i) {\n        var x = jStat.slice(A, { row: { start: i }, col: i });\n        var Q = get_Q1(x);\n        var Qn = jStat.identity(A.length);\n        Qn = jStat.sliceAssign(Qn, { row: { start: i }, col: { start: i }}, Q);\n        A = jStat.multiply(Qn, A);\n        QList.push(Qn);\n      });\n      var Q = QList.reduce(function(x, y){ return jStat.multiply(x,y) });\n      var R = A;\n      return [Q, R];\n    }\n\n    function qr2(x) {\n      // quick impletation\n      // https://www.stat.wisc.edu/~larget/math496/qr.html\n\n      var n = x.length;\n      var p = x[0].length;\n\n      x = jStat.copy(x);\n      r = jStat.zeros(p, p);\n\n      var i,j,k;\n      for(j = 0; j < p; j++){\n        r[j][j] = Math.sqrt(sum(range(n).map(function(i){\n          return x[i][j] * x[i][j];\n        })));\n        for(i = 0; i < n; i++){\n          x[i][j] = x[i][j] / r[j][j];\n        }\n        for(k = j+1; k < p; k++){\n          r[j][k] = sum(range(n).map(function(i){\n            return x[i][j] * x[i][k];\n          }));\n          for(i = 0; i < n; i++){\n            x[i][k] = x[i][k] - x[i][j]*r[j][k];\n          }\n        }\n      }\n      return [x, r];\n    }\n\n    return qr2;\n  }()),\n\n  lstsq: (function(A, b) {\n    // solve least squard problem for Ax=b as QR decomposition way if b is\n    // [[b1],[b2],[b3]] form will return [[x1],[x2],[x3]] array form solution\n    // else b is [b1,b2,b3] form will return [x1,x2,x3] array form solution\n    function R_I(A) {\n      A = jStat.copy(A);\n      var size = A.length;\n      var I = jStat.identity(size);\n      jStat.arange(size - 1, -1, -1).forEach(function(i) {\n        jStat.sliceAssign(\n            I, { row: i }, jStat.divide(jStat.slice(I, { row: i }), A[i][i]));\n        jStat.sliceAssign(\n            A, { row: i }, jStat.divide(jStat.slice(A, { row: i }), A[i][i]));\n        jStat.arange(i).forEach(function(j) {\n          var c = jStat.multiply(A[j][i], -1);\n          var Aj = jStat.slice(A, { row: j });\n          var cAi = jStat.multiply(jStat.slice(A, { row: i }), c);\n          jStat.sliceAssign(A, { row: j }, jStat.add(Aj, cAi));\n          var Ij = jStat.slice(I, { row: j });\n          var cIi = jStat.multiply(jStat.slice(I, { row: i }), c);\n          jStat.sliceAssign(I, { row: j }, jStat.add(Ij, cIi));\n        })\n      });\n      return I;\n    }\n\n    function qr_solve(A, b){\n      var array_mode = false;\n      if (b[0].length === undefined) {\n        // [c1,c2,c3] mode\n        b = b.map(function(x){ return [x] });\n        array_mode = true;\n      }\n      var QR = jStat.QR(A);\n      var Q = QR[0];\n      var R = QR[1];\n      var attrs = A[0].length;\n      var Q1 = jStat.slice(Q,{col:{end:attrs}});\n      var R1 = jStat.slice(R,{row:{end:attrs}});\n      var RI = R_I(R1);\n\t  var Q2 = jStat.transpose(Q1);\n\n\t  if(Q2[0].length === undefined){\n\t\t  Q2 = [Q2]; // The confusing jStat.multifly implementation threat nature process again.\n\t  }\n\n      var x = jStat.multiply(jStat.multiply(RI, Q2), b);\n\n\t  if(x.length === undefined){\n\t\t  x = [[x]]; // The confusing jStat.multifly implementation threat nature process again.\n\t  }\n\n\n      if (array_mode)\n        return x.map(function(i){ return i[0] });\n      return x;\n    }\n\n    return qr_solve;\n  }()),\n\n  jacobi: function jacobi(a) {\n    var condition = 1;\n    var count = 0;\n    var n = a.length;\n    var e = jStat.identity(n, n);\n    var ev = [];\n    var b, i, j, p, q, maxim, theta, s;\n    // condition === 1 only if tolerance is not reached\n    while (condition === 1) {\n      count++;\n      maxim = a[0][1];\n      p = 0;\n      q = 1;\n      for (var i = 0; i < n; i++) {\n        for (j = 0; j < n; j++) {\n          if (i != j) {\n            if (maxim < Math.abs(a[i][j])) {\n              maxim = Math.abs(a[i][j]);\n              p = i;\n              q = j;\n            }\n          }\n        }\n      }\n      if (a[p][p] === a[q][q])\n        theta = (a[p][q] > 0) ? Math.PI / 4 : -Math.PI / 4;\n      else\n        theta = Math.atan(2 * a[p][q] / (a[p][p] - a[q][q])) / 2;\n      s = jStat.identity(n, n);\n      s[p][p] = Math.cos(theta);\n      s[p][q] = -Math.sin(theta);\n      s[q][p] = Math.sin(theta);\n      s[q][q] = Math.cos(theta);\n      // eigen vector matrix\n      e = jStat.multiply(e, s);\n      b = jStat.multiply(jStat.multiply(jStat.inv(s), a), s);\n      a = b;\n      condition = 0;\n      for (var i = 1; i < n; i++) {\n        for (j = 1; j < n; j++) {\n          if (i != j && Math.abs(a[i][j]) > 0.001) {\n            condition = 1;\n          }\n        }\n      }\n    }\n    for (var i = 0; i < n; i++) ev.push(a[i][i]);\n    //returns both the eigenvalue and eigenmatrix\n    return [e, ev];\n  },\n\n  rungekutta: function rungekutta(f, h, p, t_j, u_j, order) {\n    var k1, k2, u_j1, k3, k4;\n    if (order === 2) {\n      while (t_j <= p) {\n        k1 = h * f(t_j, u_j);\n        k2 = h * f(t_j + h, u_j + k1);\n        u_j1 = u_j + (k1 + k2) / 2;\n        u_j = u_j1;\n        t_j = t_j + h;\n      }\n    }\n    if (order === 4) {\n      while (t_j <= p) {\n        k1 = h * f(t_j, u_j);\n        k2 = h * f(t_j + h / 2, u_j + k1 / 2);\n        k3 = h * f(t_j + h / 2, u_j + k2 / 2);\n        k4 = h * f(t_j +h, u_j + k3);\n        u_j1 = u_j + (k1 + 2 * k2 + 2 * k3 + k4) / 6;\n        u_j = u_j1;\n        t_j = t_j + h;\n      }\n    }\n    return u_j;\n  },\n\n  romberg: function romberg(f, a, b, order) {\n    var i = 0;\n    var h = (b - a) / 2;\n    var x = [];\n    var h1 = [];\n    var g = [];\n    var m, a1, j, k, I, d;\n    while (i < order / 2) {\n      I = f(a);\n      for (j = a, k = 0; j <= b; j = j + h, k++) x[k] = j;\n      m = x.length;\n      for (j = 1; j < m - 1; j++) {\n        I += (((j % 2) !== 0) ? 4 : 2) * f(x[j]);\n      }\n      I = (h / 3) * (I + f(b));\n      g[i] = I;\n      h /= 2;\n      i++;\n    }\n    a1 = g.length;\n    m = 1;\n    while (a1 !== 1) {\n      for (j = 0; j < a1 - 1; j++)\n      h1[j] = ((Math.pow(4, m)) * g[j + 1] - g[j]) / (Math.pow(4, m) - 1);\n      a1 = h1.length;\n      g = h1;\n      h1 = [];\n      m++;\n    }\n    return g;\n  },\n\n  richardson: function richardson(X, f, x, h) {\n    function pos(X, x) {\n      var i = 0;\n      var n = X.length;\n      var p;\n      for (; i < n; i++)\n        if (X[i] === x) p = i;\n      return p;\n    }\n    var n = X.length,\n    h_min = Math.abs(x - X[pos(X, x) + 1]),\n    i = 0,\n    g = [],\n    h1 = [],\n    y1, y2, m, a, j;\n    while (h >= h_min) {\n      y1 = pos(X, x + h);\n      y2 = pos(X, x);\n      g[i] = (f[y1] - 2 * f[y2] + f[2 * y2 - y1]) / (h * h);\n      h /= 2;\n      i++;\n    }\n    a = g.length;\n    m = 1;\n    while (a != 1) {\n      for (j = 0; j < a - 1; j++)\n      h1[j] = ((Math.pow(4, m)) * g[j + 1] - g[j]) / (Math.pow(4, m) - 1);\n      a = h1.length;\n      g = h1;\n      h1 = [];\n      m++;\n    }\n    return g;\n  },\n\n  simpson: function simpson(f, a, b, n) {\n    var h = (b - a) / n;\n    var I = f(a);\n    var x = [];\n    var j = a;\n    var k = 0;\n    var i = 1;\n    var m;\n    for (; j <= b; j = j + h, k++)\n      x[k] = j;\n    m = x.length;\n    for (; i < m - 1; i++) {\n      I += ((i % 2 !== 0) ? 4 : 2) * f(x[i]);\n    }\n    return (h / 3) * (I + f(b));\n  },\n\n  hermite: function hermite(X, F, dF, value) {\n    var n = X.length;\n    var p = 0;\n    var i = 0;\n    var l = [];\n    var dl = [];\n    var A = [];\n    var B = [];\n    var j;\n    for (; i < n; i++) {\n      l[i] = 1;\n      for (j = 0; j < n; j++) {\n        if (i != j) l[i] *= (value - X[j]) / (X[i] - X[j]);\n      }\n      dl[i] = 0;\n      for (j = 0; j < n; j++) {\n        if (i != j) dl[i] += 1 / (X [i] - X[j]);\n      }\n      A[i] = (1 - 2 * (value - X[i]) * dl[i]) * (l[i] * l[i]);\n      B[i] = (value - X[i]) * (l[i] * l[i]);\n      p += (A[i] * F[i] + B[i] * dF[i]);\n    }\n    return p;\n  },\n\n  lagrange: function lagrange(X, F, value) {\n    var p = 0;\n    var i = 0;\n    var j, l;\n    var n = X.length;\n    for (; i < n; i++) {\n      l = F[i];\n      for (j = 0; j < n; j++) {\n        // calculating the lagrange polynomial L_i\n        if (i != j) l *= (value - X[j]) / (X[i] - X[j]);\n      }\n      // adding the lagrange polynomials found above\n      p += l;\n    }\n    return p;\n  },\n\n  cubic_spline: function cubic_spline(X, F, value) {\n    var n = X.length;\n    var i = 0, j;\n    var A = [];\n    var B = [];\n    var alpha = [];\n    var c = [];\n    var h = [];\n    var b = [];\n    var d = [];\n    for (; i < n - 1; i++)\n      h[i] = X[i + 1] - X[i];\n    alpha[0] = 0;\n    for (var i = 1; i < n - 1; i++) {\n      alpha[i] = (3 / h[i]) * (F[i + 1] - F[i]) -\n          (3 / h[i-1]) * (F[i] - F[i-1]);\n    }\n    for (var i = 1; i < n - 1; i++) {\n      A[i] = [];\n      B[i] = [];\n      A[i][i-1] = h[i-1];\n      A[i][i] = 2 * (h[i - 1] + h[i]);\n      A[i][i+1] = h[i];\n      B[i][0] = alpha[i];\n    }\n    c = jStat.multiply(jStat.inv(A), B);\n    for (j = 0; j < n - 1; j++) {\n      b[j] = (F[j + 1] - F[j]) / h[j] - h[j] * (c[j + 1][0] + 2 * c[j][0]) / 3;\n      d[j] = (c[j + 1][0] - c[j][0]) / (3 * h[j]);\n    }\n    for (j = 0; j < n; j++) {\n      if (X[j] > value) break;\n    }\n    j -= 1;\n    return F[j] + (value - X[j]) * b[j] + jStat.sq(value-X[j]) *\n        c[j] + (value - X[j]) * jStat.sq(value - X[j]) * d[j];\n  },\n\n  gauss_quadrature: function gauss_quadrature() {\n    throw new Error('gauss_quadrature not yet implemented');\n  },\n\n  PCA: function PCA(X) {\n    var m = X.length;\n    var n = X[0].length;\n    var flag = false;\n    var i = 0;\n    var j, temp1;\n    var u = [];\n    var D = [];\n    var result = [];\n    var temp2 = [];\n    var Y = [];\n    var Bt = [];\n    var B = [];\n    var C = [];\n    var V = [];\n    var Vt = [];\n    for (var i = 0; i < m; i++) {\n      u[i] = jStat.sum(X[i]) / n;\n    }\n    for (var i = 0; i < n; i++) {\n      B[i] = [];\n      for(j = 0; j < m; j++) {\n        B[i][j] = X[j][i] - u[j];\n      }\n    }\n    B = jStat.transpose(B);\n    for (var i = 0; i < m; i++) {\n      C[i] = [];\n      for (j = 0; j < m; j++) {\n        C[i][j] = (jStat.dot([B[i]], [B[j]])) / (n - 1);\n      }\n    }\n    result = jStat.jacobi(C);\n    V = result[0];\n    D = result[1];\n    Vt = jStat.transpose(V);\n    for (var i = 0; i < D.length; i++) {\n      for (j = i; j < D.length; j++) {\n        if(D[i] < D[j])  {\n          temp1 = D[i];\n          D[i] = D[j];\n          D[j] = temp1;\n          temp2 = Vt[i];\n          Vt[i] = Vt[j];\n          Vt[j] = temp2;\n        }\n      }\n    }\n    Bt = jStat.transpose(B);\n    for (var i = 0; i < m; i++) {\n      Y[i] = [];\n      for (j = 0; j < Bt.length; j++) {\n        Y[i][j] = jStat.dot([Vt[i]], [Bt[j]]);\n      }\n    }\n    return [X, D, Vt, Y];\n  }\n});\n\n// extend jStat.fn with methods that require one argument\n(function(funcs) {\n  for (var i = 0; i < funcs.length; i++) (function(passfunc) {\n    jStat.fn[passfunc] = function(arg, func) {\n      var tmpthis = this;\n      // check for callback\n      if (func) {\n        setTimeout(function() {\n          func.call(tmpthis, jStat.fn[passfunc].call(tmpthis, arg));\n        }, 15);\n        return this;\n      }\n      if (typeof jStat[passfunc](this, arg) === 'number')\n        return jStat[passfunc](this, arg);\n      else\n        return jStat(jStat[passfunc](this, arg));\n    };\n  }(funcs[i]));\n}('add divide multiply subtract dot pow exp log abs norm angle'.split(' ')));\n\n}(jStat, Math));\n(function(jStat, Math) {\n\nvar slice = [].slice;\nvar isNumber = jStat.utils.isNumber;\nvar isArray = jStat.utils.isArray;\n\n// flag==true denotes use of sample standard deviation\n// Z Statistics\njStat.extend({\n  // 2 different parameter lists:\n  // (value, mean, sd)\n  // (value, array, flag)\n  zscore: function zscore() {\n    var args = slice.call(arguments);\n    if (isNumber(args[1])) {\n      return (args[0] - args[1]) / args[2];\n    }\n    return (args[0] - jStat.mean(args[1])) / jStat.stdev(args[1], args[2]);\n  },\n\n  // 3 different paramter lists:\n  // (value, mean, sd, sides)\n  // (zscore, sides)\n  // (value, array, sides, flag)\n  ztest: function ztest() {\n    var args = slice.call(arguments);\n    var z;\n    if (isArray(args[1])) {\n      // (value, array, sides, flag)\n      z = jStat.zscore(args[0],args[1],args[3]);\n      return (args[2] === 1) ?\n        (jStat.normal.cdf(-Math.abs(z), 0, 1)) :\n        (jStat.normal.cdf(-Math.abs(z), 0, 1)*2);\n    } else {\n      if (args.length > 2) {\n        // (value, mean, sd, sides)\n        z = jStat.zscore(args[0],args[1],args[2]);\n        return (args[3] === 1) ?\n          (jStat.normal.cdf(-Math.abs(z),0,1)) :\n          (jStat.normal.cdf(-Math.abs(z),0,1)* 2);\n      } else {\n        // (zscore, sides)\n        z = args[0];\n        return (args[1] === 1) ?\n          (jStat.normal.cdf(-Math.abs(z),0,1)) :\n          (jStat.normal.cdf(-Math.abs(z),0,1)*2);\n      }\n    }\n  }\n});\n\njStat.extend(jStat.fn, {\n  zscore: function zscore(value, flag) {\n    return (value - this.mean()) / this.stdev(flag);\n  },\n\n  ztest: function ztest(value, sides, flag) {\n    var zscore = Math.abs(this.zscore(value, flag));\n    return (sides === 1) ?\n      (jStat.normal.cdf(-zscore, 0, 1)) :\n      (jStat.normal.cdf(-zscore, 0, 1) * 2);\n  }\n});\n\n// T Statistics\njStat.extend({\n  // 2 parameter lists\n  // (value, mean, sd, n)\n  // (value, array)\n  tscore: function tscore() {\n    var args = slice.call(arguments);\n    return (args.length === 4) ?\n      ((args[0] - args[1]) / (args[2] / Math.sqrt(args[3]))) :\n      ((args[0] - jStat.mean(args[1])) /\n       (jStat.stdev(args[1], true) / Math.sqrt(args[1].length)));\n  },\n\n  // 3 different paramter lists:\n  // (value, mean, sd, n, sides)\n  // (tscore, n, sides)\n  // (value, array, sides)\n  ttest: function ttest() {\n    var args = slice.call(arguments);\n    var tscore;\n    if (args.length === 5) {\n      tscore = Math.abs(jStat.tscore(args[0], args[1], args[2], args[3]));\n      return (args[4] === 1) ?\n        (jStat.studentt.cdf(-tscore, args[3]-1)) :\n        (jStat.studentt.cdf(-tscore, args[3]-1)*2);\n    }\n    if (isNumber(args[1])) {\n      tscore = Math.abs(args[0])\n      return (args[2] == 1) ?\n        (jStat.studentt.cdf(-tscore, args[1]-1)) :\n        (jStat.studentt.cdf(-tscore, args[1]-1) * 2);\n    }\n    tscore = Math.abs(jStat.tscore(args[0], args[1]))\n    return (args[2] == 1) ?\n      (jStat.studentt.cdf(-tscore, args[1].length-1)) :\n      (jStat.studentt.cdf(-tscore, args[1].length-1) * 2);\n  }\n});\n\njStat.extend(jStat.fn, {\n  tscore: function tscore(value) {\n    return (value - this.mean()) / (this.stdev(true) / Math.sqrt(this.cols()));\n  },\n\n  ttest: function ttest(value, sides) {\n    return (sides === 1) ?\n      (1 - jStat.studentt.cdf(Math.abs(this.tscore(value)), this.cols()-1)) :\n      (jStat.studentt.cdf(-Math.abs(this.tscore(value)), this.cols()-1)*2);\n  }\n});\n\n// F Statistics\njStat.extend({\n  // Paramter list is as follows:\n  // (array1, array2, array3, ...)\n  // or it is an array of arrays\n  // array of arrays conversion\n  anovafscore: function anovafscore() {\n    var args = slice.call(arguments),\n    expVar, sample, sampMean, sampSampMean, tmpargs, unexpVar, i, j;\n    if (args.length === 1) {\n      tmpargs = new Array(args[0].length);\n      for (var i = 0; i < args[0].length; i++) {\n        tmpargs[i] = args[0][i];\n      }\n      args = tmpargs;\n    }\n    // 2 sample case\n    if (args.length === 2) {\n      return jStat.variance(args[0]) / jStat.variance(args[1]);\n    }\n    // Builds sample array\n    sample = new Array();\n    for (var i = 0; i < args.length; i++) {\n      sample = sample.concat(args[i]);\n    }\n    sampMean = jStat.mean(sample);\n    // Computes the explained variance\n    expVar = 0;\n    for (var i = 0; i < args.length; i++) {\n      expVar = expVar + args[i].length * Math.pow(jStat.mean(args[i]) - sampMean, 2);\n    }\n    expVar /= (args.length - 1);\n    // Computes unexplained variance\n    unexpVar = 0;\n    for (var i = 0; i < args.length; i++) {\n      sampSampMean = jStat.mean(args[i]);\n      for (j = 0; j < args[i].length; j++) {\n        unexpVar += Math.pow(args[i][j] - sampSampMean, 2);\n      }\n    }\n    unexpVar /= (sample.length - args.length);\n    return expVar / unexpVar;\n  },\n\n  // 2 different paramter setups\n  // (array1, array2, array3, ...)\n  // (anovafscore, df1, df2)\n  anovaftest: function anovaftest() {\n    var args = slice.call(arguments),\n    df1, df2, n, i;\n    if (isNumber(args[0])) {\n      return 1 - jStat.centralF.cdf(args[0], args[1], args[2]);\n    }\n    anovafscore = jStat.anovafscore(args);\n    df1 = args.length - 1;\n    n = 0;\n    for (var i = 0; i < args.length; i++) {\n      n = n + args[i].length;\n    }\n    df2 = n - df1 - 1;\n    return 1 - jStat.centralF.cdf(anovafscore, df1, df2);\n  },\n\n  ftest: function ftest(fscore, df1, df2) {\n    return 1 - jStat.centralF.cdf(fscore, df1, df2);\n  }\n});\n\njStat.extend(jStat.fn, {\n  anovafscore: function anovafscore() {\n    return jStat.anovafscore(this.toArray());\n  },\n\n  anovaftes: function anovaftes() {\n    var n = 0;\n    var i;\n    for (var i = 0; i < this.length; i++) {\n      n = n + this[i].length;\n    }\n    return jStat.ftest(this.anovafscore(), this.length - 1, n - this.length);\n  }\n});\n\n// Tukey's range test\njStat.extend({\n  // 2 parameter lists\n  // (mean1, mean2, n1, n2, sd)\n  // (array1, array2, sd)\n  qscore: function qscore() {\n    var args = slice.call(arguments);\n    var mean1, mean2, n1, n2, sd;\n    if (isNumber(args[0])) {\n        mean1 = args[0];\n        mean2 = args[1];\n        n1 = args[2];\n        n2 = args[3];\n        sd = args[4];\n    } else {\n        mean1 = jStat.mean(args[0]);\n        mean2 = jStat.mean(args[1]);\n        n1 = args[0].length;\n        n2 = args[1].length;\n        sd = args[2];\n    }\n    return Math.abs(mean1 - mean2) / (sd * Math.sqrt((1 / n1 + 1 / n2) / 2));\n  },\n\n  // 3 different parameter lists:\n  // (qscore, n, k)\n  // (mean1, mean2, n1, n2, sd, n, k)\n  // (array1, array2, sd, n, k)\n  qtest: function qtest() {\n    var args = slice.call(arguments);\n\n    var qscore;\n    if (args.length === 3) {\n      qscore = args[0];\n      args = args.slice(1);\n    } else if (args.length === 7) {\n      qscore = jStat.qscore(args[0], args[1], args[2], args[3], args[4]);\n      args = args.slice(5);\n    } else {\n      qscore = jStat.qscore(args[0], args[1], args[2]);\n      args = args.slice(3);\n    }\n\n    var n = args[0];\n    var k = args[1];\n\n    return 1 - jStat.tukey.cdf(qscore, k, n - k);\n  },\n\n  tukeyhsd: function tukeyhsd(arrays) {\n    var sd = jStat.pooledstdev(arrays);\n    var means = arrays.map(function (arr) {return jStat.mean(arr);});\n    var n = arrays.reduce(function (n, arr) {return n + arr.length;}, 0);\n\n    var results = [];\n    for (var i = 0; i < arrays.length; ++i) {\n        for (var j = i + 1; j < arrays.length; ++j) {\n            var p = jStat.qtest(means[i], means[j], arrays[i].length, arrays[j].length, sd, n, arrays.length);\n            results.push([[i, j], p]);\n        }\n    }\n\n    return results;\n  }\n});\n\n// Error Bounds\njStat.extend({\n  // 2 different parameter setups\n  // (value, alpha, sd, n)\n  // (value, alpha, array)\n  normalci: function normalci() {\n    var args = slice.call(arguments),\n    ans = new Array(2),\n    change;\n    if (args.length === 4) {\n      change = Math.abs(jStat.normal.inv(args[1] / 2, 0, 1) *\n                        args[2] / Math.sqrt(args[3]));\n    } else {\n      change = Math.abs(jStat.normal.inv(args[1] / 2, 0, 1) *\n                        jStat.stdev(args[2]) / Math.sqrt(args[2].length));\n    }\n    ans[0] = args[0] - change;\n    ans[1] = args[0] + change;\n    return ans;\n  },\n\n  // 2 different parameter setups\n  // (value, alpha, sd, n)\n  // (value, alpha, array)\n  tci: function tci() {\n    var args = slice.call(arguments),\n    ans = new Array(2),\n    change;\n    if (args.length === 4) {\n      change = Math.abs(jStat.studentt.inv(args[1] / 2, args[3] - 1) *\n                        args[2] / Math.sqrt(args[3]));\n    } else {\n      change = Math.abs(jStat.studentt.inv(args[1] / 2, args[2].length - 1) *\n                        jStat.stdev(args[2], true) / Math.sqrt(args[2].length));\n    }\n    ans[0] = args[0] - change;\n    ans[1] = args[0] + change;\n    return ans;\n  },\n\n  significant: function significant(pvalue, alpha) {\n    return pvalue < alpha;\n  }\n});\n\njStat.extend(jStat.fn, {\n  normalci: function normalci(value, alpha) {\n    return jStat.normalci(value, alpha, this.toArray());\n  },\n\n  tci: function tci(value, alpha) {\n    return jStat.tci(value, alpha, this.toArray());\n  }\n});\n\n// internal method for calculating the z-score for a difference of proportions test\nfunction differenceOfProportions(p1, n1, p2, n2) {\n  if (p1 > 1 || p2 > 1 || p1 <= 0 || p2 <= 0) {\n    throw new Error(\"Proportions should be greater than 0 and less than 1\")\n  }\n  var pooled = (p1 * n1 + p2 * n2) / (n1 + n2);\n  var se = Math.sqrt(pooled * (1 - pooled) * ((1/n1) + (1/n2)));\n  return (p1 - p2) / se;\n}\n\n// Difference of Proportions\njStat.extend(jStat.fn, {\n  oneSidedDifferenceOfProportions: function oneSidedDifferenceOfProportions(p1, n1, p2, n2) {\n    var z = differenceOfProportions(p1, n1, p2, n2);\n    return jStat.ztest(z, 1);\n  },\n\n  twoSidedDifferenceOfProportions: function twoSidedDifferenceOfProportions(p1, n1, p2, n2) {\n    var z = differenceOfProportions(p1, n1, p2, n2);\n    return jStat.ztest(z, 2);\n  }\n});\n\n}(jStat, Math));\njStat.models = (function(){\n\n  function sub_regress(endog, exog) {\n    return ols(endog, exog);\n  }\n\n  function sub_regress(exog) {\n    var var_count = exog[0].length;\n    var modelList = jStat.arange(var_count).map(function(endog_index) {\n      var exog_index =\n          jStat.arange(var_count).filter(function(i){return i!==endog_index});\n      return ols(jStat.col(exog, endog_index).map(function(x){ return x[0] }),\n                 jStat.col(exog, exog_index))\n    });\n    return modelList;\n  }\n\n  // do OLS model regress\n  // exog have include const columns ,it will not generate it .In fact, exog is\n  // \"design matrix\" look at\n  //https://en.wikipedia.org/wiki/Design_matrix\n  function ols(endog, exog) {\n    var nobs = endog.length;\n    var df_model = exog[0].length - 1;\n    var df_resid = nobs-df_model - 1;\n    var coef = jStat.lstsq(exog, endog);\n    var predict =\n        jStat.multiply(exog, coef.map(function(x) { return [x] }))\n            .map(function(p) { return p[0] });\n    var resid = jStat.subtract(endog, predict);\n    var ybar = jStat.mean(endog);\n    // constant cause problem\n    // var SST = jStat.sum(endog.map(function(y) {\n    //   return Math.pow(y-ybar,2);\n    // }));\n    var SSE = jStat.sum(predict.map(function(f) {\n      return Math.pow(f - ybar, 2);\n    }));\n    var SSR = jStat.sum(endog.map(function(y, i) {\n      return Math.pow(y - predict[i], 2);\n    }));\n    var SST = SSE + SSR;\n    var R2 = (SSE / SST);\n    return {\n        exog:exog,\n        endog:endog,\n        nobs:nobs,\n        df_model:df_model,\n        df_resid:df_resid,\n        coef:coef,\n        predict:predict,\n        resid:resid,\n        ybar:ybar,\n        SST:SST,\n        SSE:SSE,\n        SSR:SSR,\n        R2:R2\n    };\n  }\n\n  // H0: b_I=0\n  // H1: b_I!=0\n  function t_test(model) {\n    var subModelList = sub_regress(model.exog);\n    //var sigmaHat=jStat.stdev(model.resid);\n    var sigmaHat = Math.sqrt(model.SSR / (model.df_resid));\n    var seBetaHat = subModelList.map(function(mod) {\n      var SST = mod.SST;\n      var R2 = mod.R2;\n      return sigmaHat / Math.sqrt(SST * (1 - R2));\n    });\n    var tStatistic = model.coef.map(function(coef, i) {\n      return (coef - 0) / seBetaHat[i];\n    });\n    var pValue = tStatistic.map(function(t) {\n      var leftppf = jStat.studentt.cdf(t, model.df_resid);\n      return (leftppf > 0.5 ? 1 - leftppf : leftppf) * 2;\n    });\n    var c = jStat.studentt.inv(0.975, model.df_resid);\n    var interval95 = model.coef.map(function(coef, i) {\n      var d = c * seBetaHat[i];\n      return [coef - d, coef + d];\n    })\n    return {\n        se: seBetaHat,\n        t: tStatistic,\n        p: pValue,\n        sigmaHat: sigmaHat,\n        interval95: interval95\n    };\n  }\n\n  function F_test(model) {\n    var F_statistic =\n        (model.R2 / model.df_model) / ((1 - model.R2) / model.df_resid);\n    var fcdf = function(x, n1, n2) {\n      return jStat.beta.cdf(x / (n2 / n1 + x), n1 / 2, n2 / 2)\n    }\n    var pvalue = 1 - fcdf(F_statistic, model.df_model, model.df_resid);\n    return { F_statistic: F_statistic, pvalue: pvalue };\n  }\n\n  function ols_wrap(endog, exog) {\n    var model = ols(endog,exog);\n    var ttest = t_test(model);\n    var ftest = F_test(model);\n    // Provide the Wherry / Ezekiel / McNemar / Cohen Adjusted R^2\n    // Which matches the 'adjusted R^2' provided by R's lm package\n    var adjust_R2 =\n        1 - (1 - model.R2) * ((model.nobs - 1) / (model.df_resid));\n    model.t = ttest;\n    model.f = ftest;\n    model.adjust_R2 = adjust_R2;\n    return model;\n  }\n\n  return { ols: ols_wrap };\n})();\n  // Make it compatible with previous version.\n  jStat.jStat = jStat;\n\n  return jStat;\n});\n\n\n/***/ })\n/******/ ]);",null)}},function(e,t,n){"use strict";var r=window.URL||window.webkitURL;e.exports=function(e,t){try{try{var n;try{var o=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;n=new o,n.append(e),n=n.getBlob()}catch(t){n=new Blob([e])}return new Worker(r.createObjectURL(n))}catch(t){return new Worker("data:application/javascript,"+encodeURIComponent(e))}}catch(e){if(!t)throw Error("Inline worker is not supported");return new Worker(t)}}},function(e,t,n){var r=n(6),o=n(2),i=n(26),a=n(5),s=n(10),l=n(0),u=function(e,t){return e<t?-1:e>t?1:0},c=function(e,t,n){n=n||0;for(var r=n;r<e.length;r++)if(t(e[r]))return r;return-1},p=function(e){var t=e.$canvas[0],n=t.cloneNode(),r=t.parentNode;r.removeChild(t),r.insertBefore(n,e.$overlay_canvas[0]),e.$canvas=l(n)},f=function(e){try{var t=e.$canvas[0],n=t.getContext("experimental-webgl",{alpha:!1,antialias:e.antialias});return n.clearColor(1,1,1,1),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),n.viewportWidth=t.width,n.viewportHeight=t.height,n.viewport(0,0,n.viewportWidth,n.viewportHeight),n.enable(n.DEPTH_TEST),n.enable(n.BLEND),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA),n.depthMask(!1),n}catch(e){return null}},d=function(e,t,n){var r=e.ctx.createProgram();if(e.ctx.attachShader(r,t),e.ctx.attachShader(r,n),e.ctx.linkProgram(r),!e.ctx.getProgramParameter(r,e.ctx.LINK_STATUS)){var o=e.ctx.getProgramInfoLog(r);throw e.ctx.deleteProgram(r),"Unable to link shader program: "+o}return r},h=function(e,t,n){var r=e.ctx.createShader(e.ctx[n]);if(e.ctx.shaderSource(r,t),e.ctx.compileShader(r),!e.ctx.getShaderParameter(r,e.ctx.COMPILE_STATUS)){var o=e.ctx.getShaderInfoLog(r);throw e.ctx.deleteShader(r),"Unable to compile shader: "+o}return r},m=function(){function e(e,r,o,i,s,u,c,p){this.$container=e,this.$canvas=r,this.$overlay_canvas=o,this.supersampling_ratio=2,this.antialias=!0,this.antialias_on_cell_width_thresh=5,this.position_bit_pack_base=128,v(this),y(this),g(this),this.visible_area_width=r[0].width;var f=this;this.tooltip=u,this.tooltip.center=!0,this.scroll_x=0,this.scroll_y=0,this.$dummy_scroll_div_contents=i,this.dummy_scroll_div_client_size=new a({width:i.parent()[0].clientWidth,height:i.parent()[0].clientHeight},function(){return{width:i.parent()[0].clientWidth,height:i.parent()[0].clientHeight}}),this.identified_shape_list_list={},this.vertex_data={},this.vertex_column_array={},this.vertex_position_buffer={},this.vertex_color_buffer={},this.vertex_column_buffer={},this.color_texture={},this.id_to_first_vertex_index={},this.rendering_suppressed=!1,this.highlight_area_callback=void 0===c?function(){}:c,function(e){var r,o,i=!1,a=null,c=function(e,t){return Math.abs(e-t)>=10},f=function(){if(i&&(i=!1,c(r,o))){var t=Math.min(r,o),n=Math.max(r,o);e.highlight_area_callback(t+e.scroll_x,n+e.scroll_x)}},d=function(t,n){var r=e.$overlay_canvas.offset(),o=e.$overlay_canvas.width(),i=e.$overlay_canvas.height();return t>=r.left&&t<o+r.left&&n>=r.top&&n<i+r.top};l(document).on("mousemove",function(t){d(t.pageX,t.pageY)||(m(e),u.hide(),p(null))}),e.$overlay_canvas.on("mouseout mouseleave",function(t){m(e),u.hide()}),e.$overlay_canvas.on("mousemove",function(l){if(!e.rendering_suppressed){m(e);var f=e.$overlay_canvas.offset(),d=l.pageX-f.left,h=l.pageY-f.top;if(i){b=null,o=d;var g=Math.min(d,r),v=Math.max(d,r),y=c(r,o)?"rgba(0,0,0,0.3)":"rgba(0,0,0,0.2)";n(e,g,0,v-g,s.getCellViewHeight(),y)}else{var b=s.getOverlappingCell(d+e.scroll_x,h+e.scroll_y),w=null===b?null:s.getTrackDatum(b.track,b.id),x=(s.getCellWidth(),s.getCellPadding());if(null!==w){p(b.track,b.id);var g=s.getZoomedColumnLeft(b.id)-e.scroll_x;t(e,g,s.getCellTops(b.track)-e.scroll_y,s.getCellWidth()+(s.getTrackHasColumnSpacing(b.track)?0:x),s.getCellHeight(b.track),"rgba(0,0,0,1)");for(var _=s.getTracks(),S=0;S<_.length;S++)null!==s.getTrackDatum(_[S],b.id)&&t(e,g,s.getCellTops(_[S])-e.scroll_y,s.getCellWidth()+(s.getTrackHasColumnSpacing(_[S])?0:x),s.getCellHeight(_[S]),"rgba(0,0,0,0.5)");u.show(250,s.getZoomedColumnLeft(b.id)+s.getCellWidth()/2+f.left-e.scroll_x,s.getCellTops(b.track)+f.top-e.scroll_y,s.getTrackTooltipFn(b.track)(w)),a=b}else u.hideIfNotAlreadyGoingTo(150),b=null}null===b&&p(null)}}),e.$overlay_canvas.on("mousedown",function(t){d(t.pageX,t.pageY)&&(i=!0,r=t.pageX-e.$overlay_canvas.offset().left,o=r,u.hide())}),e.$overlay_canvas.on("mouseup",function(e){d(e.pageX,e.pageY)&&f()}),e.$overlay_canvas.on("mouseleave",function(e){f()})}(this),i.parent().scroll(function(){m(f)})}var t=function(e,t,n,r,o,i){var a=e.overlay_ctx;a.strokeStyle=i,a.strokeWidth=10,a.strokeRect(e.supersampling_ratio*t,e.supersampling_ratio*n,e.supersampling_ratio*r,e.supersampling_ratio*o)},n=function(e,t,n,r,o,i){var a=e.overlay_ctx;a.fillStyle=i,a.fillRect(e.supersampling_ratio*t,e.supersampling_ratio*n,e.supersampling_ratio*r,e.supersampling_ratio*o)},m=function(e){e.overlay_ctx.fillStyle="rgba(0,0,0,0)",e.overlay_ctx.clearRect(0,0,e.$overlay_canvas[0].width,e.$overlay_canvas[0].height)},g=function(e){e.overlay_ctx=e.$overlay_canvas[0].getContext("2d"),m(e)},v=function(e){e.ctx=f(e),function(e){var t=r.mat4.create();r.mat4.lookAt(t,[0,0,1],[0,0,0],[0,1,0]),e.mvMatrix=t;var n=r.mat4.create();r.mat4.ortho(n,0,e.ctx.viewportWidth,e.ctx.viewportHeight,0,-5,1e3),e.pMatrix=n}(e)},y=function(e){var t=["precision highp float;","attribute float aPosVertex;","attribute float aColVertex;","attribute float aVertexOncoprintColumn;","uniform float columnWidth;","uniform float scrollX;","uniform float zoomX;","uniform float scrollY;","uniform float zoomY;","uniform mat4 uMVMatrix;","uniform mat4 uPMatrix;","uniform float offsetY;","uniform float supersamplingRatio;","uniform float positionBitPackBase;","uniform float texSize;","varying float texCoord;","vec3 unpackVec3(float packedVec3, float base) {","\tfloat pos0 = floor(packedVec3 / (base*base));","\tfloat pos0Contr = pos0*base*base;","\tfloat pos1 = floor((packedVec3 - pos0Contr)/base);","\tfloat pos1Contr = pos1*base;","\tfloat pos2 = packedVec3 - pos0Contr - pos1Contr;","\treturn vec3(pos0, pos1, pos2);","}","void main(void) {","\tgl_Position = vec4(unpackVec3(aPosVertex, positionBitPackBase), 1.0);","\tgl_Position[0] += aVertexOncoprintColumn*columnWidth;","\tgl_Position *= vec4(zoomX, zoomY, 1.0, 1.0);","\tgl_Position[1] += offsetY;","\tgl_Position -= vec4(scrollX, scrollY, 0.0, 0.0);","\tgl_Position[0] *= supersamplingRatio;","\tgl_Position[1] *= supersamplingRatio;","\tgl_Position = uPMatrix * uMVMatrix * gl_Position;","\ttexCoord = (aColVertex + 0.5) / texSize;","}"].join("\n"),n=["precision mediump float;","varying float texCoord;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vec2(texCoord, 0.5));","}"].join("\n"),r=h(e,t,"VERTEX_SHADER"),o=h(e,n,"FRAGMENT_SHADER"),i=d(e,r,o);i.vertexPositionAttribute=e.ctx.getAttribLocation(i,"aPosVertex"),e.ctx.enableVertexAttribArray(i.vertexPositionAttribute),i.vertexColorAttribute=e.ctx.getAttribLocation(i,"aColVertex"),e.ctx.enableVertexAttribArray(i.vertexColorAttribute),i.vertexOncoprintColumnAttribute=e.ctx.getAttribLocation(i,"aVertexOncoprintColumn"),e.ctx.enableVertexAttribArray(i.vertexOncoprintColumnAttribute),i.samplerUniform=e.ctx.getUniformLocation(i,"uSampler"),i.pMatrixUniform=e.ctx.getUniformLocation(i,"uPMatrix"),i.mvMatrixUniform=e.ctx.getUniformLocation(i,"uMVMatrix"),i.columnWidthUniform=e.ctx.getUniformLocation(i,"columnWidth"),i.scrollXUniform=e.ctx.getUniformLocation(i,"scrollX"),i.scrollYUniform=e.ctx.getUniformLocation(i,"scrollY"),i.zoomXUniform=e.ctx.getUniformLocation(i,"zoomX"),i.zoomYUniform=e.ctx.getUniformLocation(i,"zoomY"),i.offsetYUniform=e.ctx.getUniformLocation(i,"offsetY"),i.supersamplingRatioUniform=e.ctx.getUniformLocation(i,"supersamplingRatio"),i.positionBitPackBaseUniform=e.ctx.getUniformLocation(i,"positionBitPackBase"),i.texSizeUniform=e.ctx.getUniformLocation(i,"texSize"),e.shader_program=i},b=function(e,t){var n=t.getCellViewHeight(),r=e.getTotalWidth(t),o=e.visible_area_width;e.$dummy_scroll_div_contents.css({"min-width":r,"min-height":t.getOncoprintHeight()}),e.$dummy_scroll_div_contents.parent().css({height:n+20,width:o+20}),e.dummy_scroll_div_client_size.update(),e.$canvas[0].height=e.supersampling_ratio*n,e.$canvas[0].style.height=n+"px",e.$overlay_canvas[0].height=e.supersampling_ratio*n,e.$overlay_canvas[0].style.height=n+"px",e.$canvas[0].width=e.supersampling_ratio*o,e.$canvas[0].style.width=o+"px",e.$overlay_canvas[0].width=e.supersampling_ratio*o,e.$overlay_canvas[0].style.width=o+"px",e.$container.css("height",n),e.$container.css("width",o),v(e),y(e),g(e)},w=function(e,t,n){if(!e.rendering_suppressed){var r=e.scroll_x,o=e.scroll_y,i=t.getHorzZoom(),a=t.getVertZoom(),s=e.getViewportOncoprintSpace(t),l=s.left,u=s.right,p=s.top,f=s.bottom,d=t.getColumnLeft(),h=t.getIdOrder(),m=c(h,function(e){return d[e]>=l}),g=c(h,function(e){return d[e]>u},m+1),v=m<1?h[0]:h[m-1],y=-1===g?null:h[g];n||b(e,t),e.ctx.clearColor(1,1,1,1),e.ctx.clear(e.ctx.COLOR_BUFFER_BIT|e.ctx.DEPTH_BUFFER_BIT);for(var w=t.getTracks(),x=0;x<w.length;x++){var _=w[x],C=t.getCellTops(_),k=t.getCellHeight(_);if(!(C/a>=f||(C+k)/a<p)){var A=S(e,_);if(0!==A.position.numItems){var E=e.id_to_first_vertex_index[_][v],M=null===y?A.position.numItems:e.id_to_first_vertex_index[_][y];e.ctx.useProgram(e.shader_program),e.ctx.bindBuffer(e.ctx.ARRAY_BUFFER,A.position),e.ctx.vertexAttribPointer(e.shader_program.vertexPositionAttribute,A.position.itemSize,e.ctx.FLOAT,!1,0,0),e.ctx.bindBuffer(e.ctx.ARRAY_BUFFER,A.color),e.ctx.vertexAttribPointer(e.shader_program.vertexColorAttribute,A.color.itemSize,e.ctx.FLOAT,!1,0,0),e.ctx.bindBuffer(e.ctx.ARRAY_BUFFER,A.column),e.ctx.vertexAttribPointer(e.shader_program.vertexOncoprintColumnAttribute,A.column.itemSize,e.ctx.FLOAT,!1,0,0),e.ctx.activeTexture(e.ctx.TEXTURE0),e.ctx.bindTexture(e.ctx.TEXTURE_2D,A.color_tex.texture),e.ctx.uniform1i(e.shader_program.samplerUniform,0),e.ctx.uniform1f(e.shader_program.texSizeUniform,A.color_tex.size),e.ctx.uniformMatrix4fv(e.shader_program.pMatrixUniform,!1,e.pMatrix),e.ctx.uniformMatrix4fv(e.shader_program.mvMatrixUniform,!1,e.mvMatrix),e.ctx.uniform1f(e.shader_program.columnWidthUniform,t.getCellWidth(!0)+t.getCellPadding(!0)),e.ctx.uniform1f(e.shader_program.scrollXUniform,r),e.ctx.uniform1f(e.shader_program.scrollYUniform,o),e.ctx.uniform1f(e.shader_program.zoomXUniform,i),e.ctx.uniform1f(e.shader_program.zoomYUniform,a),e.ctx.uniform1f(e.shader_program.offsetYUniform,C),e.ctx.uniform1f(e.shader_program.supersamplingRatioUniform,e.supersampling_ratio),e.ctx.uniform1f(e.shader_program.positionBitPackBaseUniform,e.position_bit_pack_base),e.ctx.drawArrays(e.ctx.TRIANGLES,E,M-E)}}}}},x=function(e,t,n){var r;r=void 0===n?t.getTracks():[n];for(var o=0;o<r.length;o++)e.vertex_position_buffer[r[o]]&&(e.ctx.deleteBuffer(e.vertex_position_buffer[r[o]]),delete e.vertex_position_buffer[r[o]]),e.vertex_color_buffer[r[o]]&&(e.ctx.deleteBuffer(e.vertex_color_buffer[r[o]]),delete e.vertex_color_buffer[r[o]]),e.color_texture[r[o]]&&(e.ctx.deleteTexture(e.color_texture[r[o]].texture),delete e.color_texture[r[o]])},_=function(e,t,n){var r;r=void 0===n?t.getTracks():[n];for(var o=0;o<r.length;o++)e.vertex_column_buffer[r[o]]&&(e.ctx.deleteBuffer(e.vertex_column_buffer[r[o]]),delete e.vertex_column_buffer[r[o]])},S=function(e,t){if(void 0===e.vertex_position_buffer[t]){var n=e.ctx.createBuffer(),r=e.vertex_data[t].pos_array;e.ctx.bindBuffer(e.ctx.ARRAY_BUFFER,n),e.ctx.bufferData(e.ctx.ARRAY_BUFFER,new Float32Array(r),e.ctx.STATIC_DRAW),n.itemSize=1,n.numItems=r.length/n.itemSize,e.vertex_position_buffer[t]=n}if(void 0===e.vertex_color_buffer[t]){var o=e.ctx.createBuffer(),i=e.vertex_data[t].col_array;e.ctx.bindBuffer(e.ctx.ARRAY_BUFFER,o),e.ctx.bufferData(e.ctx.ARRAY_BUFFER,new Float32Array(i),e.ctx.STATIC_DRAW),o.itemSize=1,o.numItems=i.length/o.itemSize,e.vertex_color_buffer[t]=o}if(void 0===e.color_texture[t]){var a=e.ctx.createTexture();e.ctx.bindTexture(e.ctx.TEXTURE_2D,a);for(var s=e.vertex_data[t].col_bank,l=Math.pow(2,Math.ceil(Math.log2(s.length/4)));s.length<4*l;)s.push(0);e.ctx.texImage2D(e.ctx.TEXTURE_2D,0,e.ctx.RGBA,l,1,0,e.ctx.RGBA,e.ctx.UNSIGNED_BYTE,new Uint8Array(s)),e.ctx.texParameteri(e.ctx.TEXTURE_2D,e.ctx.TEXTURE_MIN_FILTER,e.ctx.NEAREST),e.ctx.texParameteri(e.ctx.TEXTURE_2D,e.ctx.TEXTURE_MAG_FILTER,e.ctx.NEAREST),e.color_texture[t]={texture:a,size:l}}if(void 0===e.vertex_column_buffer[t]){var u=e.ctx.createBuffer(),c=e.vertex_column_array[t];e.ctx.bindBuffer(e.ctx.ARRAY_BUFFER,u),e.ctx.bufferData(e.ctx.ARRAY_BUFFER,new Float32Array(c),e.ctx.STATIC_DRAW),u.itemSize=1,u.numItems=c.length/u.itemSize,e.vertex_column_buffer[t]=u}return{position:e.vertex_position_buffer[t],color:e.vertex_color_buffer[t],color_tex:e.color_texture[t],column:e.vertex_column_buffer[t]}},C=function(e,t,n){if(!e.rendering_suppressed){for(var r=e.vertex_data[n].pos_array.length,o=e.id_to_first_vertex_index[n],i=t.getVisibleIdToIndexMap(),a=Object.keys(o).map(function(e){return[e,o[e]]}).sort(function(e,t){return u(e[1],t[1])}),s=[],l=0;l<a.length;l++)for(var c=(l===a.length-1?r:a[l+1][1])-a[l][1],p=i[a[l][0]],f=0;f<c;f++)s.push(p);e.vertex_column_array[n]=s,_(e,t,n)}},k=function(e,t,n){if(!e.rendering_suppressed){var r=e.identified_shape_list_list[n],o=t.getIdToIndexMap();r.sort(function(e,t){return u(o[e.id],o[t.id])});for(var a=[],l=[],c={},p=[],f={},d=function(e){return e.join(",")},h=e.position_bit_pack_base,m=function(e){return h*h*e[0]+h*e[1]+e[2]},g={},v=0;v<r.length;v++){var y=r[v].shape_list;c[r[v].id]=a.length;for(var b=0;b<y.length;b++){var w=y[b],_=s.Shape.hashComputedShape(w,b);if(!g.hasOwnProperty(_)){g[_]={position:[],color:[]};var S=g[_].position,C=g[_].color;i(w,b,function(e,t){e=e.map(Math.round),t=t.map(function(e){return Math.round(255*e)}),S.push(m(e));var n=d(t),r=f[n];void 0===r&&(r=p.length,p.push(t),f[n]=r),C.push(r)})}a.push.apply(a,g[_].position),l.push.apply(l,g[_].color)}}p=p.reduce(function(e,t){return e.concat(t)},[]),0===p.length&&p.push(0,0,0,0),e.vertex_data[n]={pos_array:a,col_array:l,col_bank:p},e.id_to_first_vertex_index[n]=c,x(e,t,n)}},A=function(e,t,n){e.rendering_suppressed||(e.identified_shape_list_list[n]=t.getIdentifiedShapeListList(n,!0,!0))},E=function(e,t){x(e,t),_(e,t),p(e),v(e,t),y(e)};e.prototype.getViewportOncoprintSpace=function(e){var t=this.scroll_x,n=this.scroll_y,r=e.getHorzZoom(),o=e.getVertZoom(),i=Math.round(t/r),a=Math.round((t+this.visible_area_width)/r);return{top:Math.round(n/o),bottom:Math.round((n+e.getCellViewHeight())/o),left:i,right:a}},e.prototype.isUsable=function(){return null!==this.ctx},e.prototype.removeTrack=function(e,t){delete this.identified_shape_list_list[t],delete this.vertex_data[t],delete this.vertex_column_array[t],delete this.id_to_first_vertex_index[t],x(this,e,t),_(this,e,t),this.rendering_suppressed||w(this,e)},e.prototype.moveTrack=function(e){this.rendering_suppressed||w(this,e)},e.prototype.setTrackGroupOrder=function(e){w(this,e)},e.prototype.addTracks=function(e,t){if(!this.rendering_suppressed){for(var n=0;n<t.length;n++)A(this,e,t[n]),k(this,e,t[n]),C(this,e,t[n]);w(this,e)}},e.prototype.setIdOrder=function(e,t){if(!this.rendering_suppressed){for(var n=e.getTracks(),r=0;r<n.length;r++)C(this,e,n[r]);w(this,e)}},e.prototype.setTrackGroupSortPriority=function(e){this.rendering_suppressed||w(this,e)},e.prototype.sort=function(e){if(!this.rendering_suppressed){for(var t=e.getTracks(),n=0;n<t.length;n++)k(this,e,t[n]),C(this,e,t[n]);w(this,e)}},e.prototype.suppressRendering=function(){this.rendering_suppressed=!0},e.prototype.releaseRendering=function(e){this.rendering_suppressed=!1;for(var t=e.getTracks(),n=0;n<t.length;n++)A(this,e,t[n]),k(this,e,t[n]),C(this,e,t[n]);w(this,e)},e.prototype.hideIds=function(e){if(!this.rendering_suppressed){for(var t=e.getTracks(),n=0;n<t.length;n++)C(this,e,t[n]);w(this,e)}},e.prototype.setTrackData=function(e,t){this.rendering_suppressed||(A(this,e,t),k(this,e,t),C(this,e,t),w(this,e))},e.prototype.setRuleSet=function(e,t){this.rendering_suppressed||(A(this,e,t),k(this,e,t),w(this,e))},e.prototype.shareRuleSet=function(e,t){this.rendering_suppressed||(A(this,e,t),k(this,e,t),w(this,e))},e.prototype.setSortConfig=function(e){this.rendering_suppressed||this.sort(e)},e.prototype.setHorzScroll=function(e){this.setScroll(e)},e.prototype.setVertScroll=function(e){this.setScroll(e)},e.prototype.setScroll=function(e){this.scroll_x=e.getHorzScroll(),this.scroll_y=e.getVertScroll(),this.rendering_suppressed||w(this,e,!0)};var M=function(e,t){t.getCellWidth()<e.antialias_on_cell_width_thresh?e.antialias||(e.antialias=!0,E(e,t)):e.antialias&&(e.antialias=!1,E(e,t))};return e.prototype.setZoom=function(e){M(this,e),this.rendering_suppressed||w(this,e)},e.prototype.setHorzZoom=function(e){M(this,e),this.rendering_suppressed||w(this,e)},e.prototype.setVertZoom=function(e){this.rendering_suppressed||w(this,e)},e.prototype.setViewport=function(e){this.scroll_x=e.getHorzScroll(),this.scroll_y=e.getVertScroll(),M(this,e),this.rendering_suppressed||w(this,e)},e.prototype.getTotalWidth=function(e,t){return(e.getCellWidth(t)+e.getCellPadding(t))*e.getIdOrder().length},e.prototype.getWidth=function(){return this.visible_area_width},e.prototype.setWidth=function(e,t){this.visible_area_width=e,this.rendering_suppressed||w(this,t)},e.prototype.setCellPaddingOn=function(e){if(!this.rendering_suppressed){for(var t=e.getTracks(),n=0;n<t.length;n++)e.getTrackHasColumnSpacing(t[n])||(A(this,e,t[n]),k(this,e,t[n])),C(this,e,t[n]);w(this,e)}},e.prototype.getDummyScrollDivClientSize=function(){return this.dummy_scroll_div_client_size.get()},e.prototype.toSVGGroup=function(e,t,n){for(var r=o.group(t||0,n||0),i=e.getCellTops(),a=e.getTracks(),s=e.getZoomedColumnLeft(),l=0;l<a.length;l++)for(var u=a[l],n=i[u],c=e.getIdentifiedShapeListList(u,!1,!0),p=0;p<c.length;p++){var f=c[p],d=f.id,h=f.shape_list,t=s[d];if(void 0!==t)for(var m=0;m<h.length;m++)r.appendChild(o.fromShape(h[m],t,n))}return r},e}();e.exports=m},function(e,t,n){var r=n(1),o={};o.create=function(){var e=new r.ARRAY_TYPE(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},o.clone=function(e){var t=new r.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},o.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},o.fromValues=function(e,t,n,o){var i=new r.ARRAY_TYPE(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=o,i},o.set=function(e,t,n,r,o){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e},o.transpose=function(e,t){if(e===t){var n=t[1];e[1]=t[2],e[2]=n}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e},o.invert=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=n*i-o*r;return a?(a=1/a,e[0]=i*a,e[1]=-r*a,e[2]=-o*a,e[3]=n*a,e):null},o.adjoint=function(e,t){var n=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=n,e},o.determinant=function(e){return e[0]*e[3]-e[2]*e[1]},o.multiply=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=n[0],l=n[1],u=n[2],c=n[3];return e[0]=r*s+i*l,e[1]=o*s+a*l,e[2]=r*u+i*c,e[3]=o*u+a*c,e},o.mul=o.multiply,o.rotate=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+i*s,e[1]=o*l+a*s,e[2]=r*-s+i*l,e[3]=o*-s+a*l,e},o.scale=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=n[0],l=n[1];return e[0]=r*s,e[1]=o*s,e[2]=i*l,e[3]=a*l,e},o.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e},o.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e},o.str=function(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},o.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2))},o.LDU=function(e,t,n,r){return e[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-e[2]*n[1],[e,t,n]},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e},o.sub=o.subtract,o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},o.equals=function(e,t){var n=e[0],o=e[1],i=e[2],a=e[3],s=t[0],l=t[1],u=t[2],c=t[3];return Math.abs(n-s)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-l)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(i-u)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(a-c)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))},o.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},o.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e},e.exports=o},function(e,t,n){var r=n(1),o={};o.create=function(){var e=new r.ARRAY_TYPE(6);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},o.clone=function(e){var t=new r.ARRAY_TYPE(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},o.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},o.fromValues=function(e,t,n,o,i,a){var s=new r.ARRAY_TYPE(6);return s[0]=e,s[1]=t,s[2]=n,s[3]=o,s[4]=i,s[5]=a,s},o.set=function(e,t,n,r,o,i,a){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e[4]=i,e[5]=a,e},o.invert=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],l=n*i-r*o;return l?(l=1/l,e[0]=i*l,e[1]=-r*l,e[2]=-o*l,e[3]=n*l,e[4]=(o*s-i*a)*l,e[5]=(r*a-n*s)*l,e):null},o.determinant=function(e){return e[0]*e[3]-e[1]*e[2]},o.multiply=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],l=t[5],u=n[0],c=n[1],p=n[2],f=n[3],d=n[4],h=n[5];return e[0]=r*u+i*c,e[1]=o*u+a*c,e[2]=r*p+i*f,e[3]=o*p+a*f,e[4]=r*d+i*h+s,e[5]=o*d+a*h+l,e},o.mul=o.multiply,o.rotate=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],l=t[5],u=Math.sin(n),c=Math.cos(n);return e[0]=r*c+i*u,e[1]=o*c+a*u,e[2]=r*-u+i*c,e[3]=o*-u+a*c,e[4]=s,e[5]=l,e},o.scale=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],l=t[5],u=n[0],c=n[1];return e[0]=r*u,e[1]=o*u,e[2]=i*c,e[3]=a*c,e[4]=s,e[5]=l,e},o.translate=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],l=t[5],u=n[0],c=n[1];return e[0]=r,e[1]=o,e[2]=i,e[3]=a,e[4]=r*u+i*c+s,e[5]=o*u+a*c+l,e},o.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e[4]=0,e[5]=0,e},o.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e},o.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e},o.str=function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},o.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e},o.sub=o.subtract,o.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e},o.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},o.equals=function(e,t){var n=e[0],o=e[1],i=e[2],a=e[3],s=e[4],l=e[5],u=t[0],c=t[1],p=t[2],f=t[3],d=t[4],h=t[5];return Math.abs(n-u)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(o-c)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(i-p)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(a-f)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(s-d)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(d))&&Math.abs(l-h)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(h))},e.exports=o},function(e,t,n){var r=n(1),o={scalar:{},SIMD:{}};o.create=function(){var e=new r.ARRAY_TYPE(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.clone=function(e){var t=new r.ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},o.fromValues=function(e,t,n,o,i,a,s,l,u,c,p,f,d,h,m,g){var v=new r.ARRAY_TYPE(16);return v[0]=e,v[1]=t,v[2]=n,v[3]=o,v[4]=i,v[5]=a,v[6]=s,v[7]=l,v[8]=u,v[9]=c,v[10]=p,v[11]=f,v[12]=d,v[13]=h,v[14]=m,v[15]=g,v},o.set=function(e,t,n,r,o,i,a,s,l,u,c,p,f,d,h,m,g){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e[4]=i,e[5]=a,e[6]=s,e[7]=l,e[8]=u,e[9]=c,e[10]=p,e[11]=f,e[12]=d,e[13]=h,e[14]=m,e[15]=g,e},o.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.scalar.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],o=t[3],i=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=i,e[11]=t[14],e[12]=o,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},o.SIMD.transpose=function(e,t){var n,r,o,i,a,s,l,u,c,p;return n=SIMD.Float32x4.load(t,0),r=SIMD.Float32x4.load(t,4),o=SIMD.Float32x4.load(t,8),i=SIMD.Float32x4.load(t,12),a=SIMD.Float32x4.shuffle(n,r,0,1,4,5),s=SIMD.Float32x4.shuffle(o,i,0,1,4,5),l=SIMD.Float32x4.shuffle(a,s,0,2,4,6),u=SIMD.Float32x4.shuffle(a,s,1,3,5,7),SIMD.Float32x4.store(e,0,l),SIMD.Float32x4.store(e,4,u),a=SIMD.Float32x4.shuffle(n,r,2,3,6,7),s=SIMD.Float32x4.shuffle(o,i,2,3,6,7),c=SIMD.Float32x4.shuffle(a,s,0,2,4,6),p=SIMD.Float32x4.shuffle(a,s,1,3,5,7),SIMD.Float32x4.store(e,8,c),SIMD.Float32x4.store(e,12,p),e},o.transpose=r.USE_SIMD?o.SIMD.transpose:o.scalar.transpose,o.scalar.invert=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],p=t[9],f=t[10],d=t[11],h=t[12],m=t[13],g=t[14],v=t[15],y=n*s-r*a,b=n*l-o*a,w=n*u-i*a,x=r*l-o*s,_=r*u-i*s,S=o*u-i*l,C=c*m-p*h,k=c*g-f*h,A=c*v-d*h,E=p*g-f*m,M=p*v-d*m,T=f*v-d*g,O=y*T-b*M+w*E+x*A-_*k+S*C;return O?(O=1/O,e[0]=(s*T-l*M+u*E)*O,e[1]=(o*M-r*T-i*E)*O,e[2]=(m*S-g*_+v*x)*O,e[3]=(f*_-p*S-d*x)*O,e[4]=(l*A-a*T-u*k)*O,e[5]=(n*T-o*A+i*k)*O,e[6]=(g*w-h*S-v*b)*O,e[7]=(c*S-f*w+d*b)*O,e[8]=(a*M-s*A+u*C)*O,e[9]=(r*A-n*M-i*C)*O,e[10]=(h*_-m*w+v*y)*O,e[11]=(p*w-c*_-d*y)*O,e[12]=(s*k-a*E-l*C)*O,e[13]=(n*E-r*k+o*C)*O,e[14]=(m*b-h*x-g*y)*O,e[15]=(c*x-p*b+f*y)*O,e):null},o.SIMD.invert=function(e,t){var n,r,o,i,a,s,l,u,c,p,f=SIMD.Float32x4.load(t,0),d=SIMD.Float32x4.load(t,4),h=SIMD.Float32x4.load(t,8),m=SIMD.Float32x4.load(t,12);return a=SIMD.Float32x4.shuffle(f,d,0,1,4,5),r=SIMD.Float32x4.shuffle(h,m,0,1,4,5),n=SIMD.Float32x4.shuffle(a,r,0,2,4,6),r=SIMD.Float32x4.shuffle(r,a,1,3,5,7),a=SIMD.Float32x4.shuffle(f,d,2,3,6,7),i=SIMD.Float32x4.shuffle(h,m,2,3,6,7),o=SIMD.Float32x4.shuffle(a,i,0,2,4,6),i=SIMD.Float32x4.shuffle(i,a,1,3,5,7),a=SIMD.Float32x4.mul(o,i),a=SIMD.Float32x4.swizzle(a,1,0,3,2),s=SIMD.Float32x4.mul(r,a),l=SIMD.Float32x4.mul(n,a),a=SIMD.Float32x4.swizzle(a,2,3,0,1),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,a),s),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,a),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),a=SIMD.Float32x4.mul(r,o),a=SIMD.Float32x4.swizzle(a,1,0,3,2),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,a),s),c=SIMD.Float32x4.mul(n,a),a=SIMD.Float32x4.swizzle(a,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(i,a)),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,a),c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),a=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(r,2,3,0,1),i),a=SIMD.Float32x4.swizzle(a,1,0,3,2),o=SIMD.Float32x4.swizzle(o,2,3,0,1),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,a),s),u=SIMD.Float32x4.mul(n,a),a=SIMD.Float32x4.swizzle(a,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(o,a)),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,a),u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),a=SIMD.Float32x4.mul(n,r),a=SIMD.Float32x4.swizzle(a,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,a),u),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,a),c),a=SIMD.Float32x4.swizzle(a,2,3,0,1),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,a),u),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(o,a)),a=SIMD.Float32x4.mul(n,i),a=SIMD.Float32x4.swizzle(a,1,0,3,2),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(o,a)),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,a),u),a=SIMD.Float32x4.swizzle(a,2,3,0,1),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,a),l),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(r,a)),a=SIMD.Float32x4.mul(n,o),a=SIMD.Float32x4.swizzle(a,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,a),l),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(r,a)),a=SIMD.Float32x4.swizzle(a,2,3,0,1),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(i,a)),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,a),c),p=SIMD.Float32x4.mul(n,s),p=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(p,2,3,0,1),p),p=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(p,1,0,3,2),p),a=SIMD.Float32x4.reciprocalApproximation(p),p=SIMD.Float32x4.sub(SIMD.Float32x4.add(a,a),SIMD.Float32x4.mul(p,SIMD.Float32x4.mul(a,a))),(p=SIMD.Float32x4.swizzle(p,0,0,0,0))?(SIMD.Float32x4.store(e,0,SIMD.Float32x4.mul(p,s)),SIMD.Float32x4.store(e,4,SIMD.Float32x4.mul(p,l)),SIMD.Float32x4.store(e,8,SIMD.Float32x4.mul(p,u)),SIMD.Float32x4.store(e,12,SIMD.Float32x4.mul(p,c)),e):null},o.invert=r.USE_SIMD?o.SIMD.invert:o.scalar.invert,o.scalar.adjoint=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],p=t[9],f=t[10],d=t[11],h=t[12],m=t[13],g=t[14],v=t[15];return e[0]=s*(f*v-d*g)-p*(l*v-u*g)+m*(l*d-u*f),e[1]=-(r*(f*v-d*g)-p*(o*v-i*g)+m*(o*d-i*f)),e[2]=r*(l*v-u*g)-s*(o*v-i*g)+m*(o*u-i*l),e[3]=-(r*(l*d-u*f)-s*(o*d-i*f)+p*(o*u-i*l)),e[4]=-(a*(f*v-d*g)-c*(l*v-u*g)+h*(l*d-u*f)),e[5]=n*(f*v-d*g)-c*(o*v-i*g)+h*(o*d-i*f),e[6]=-(n*(l*v-u*g)-a*(o*v-i*g)+h*(o*u-i*l)),e[7]=n*(l*d-u*f)-a*(o*d-i*f)+c*(o*u-i*l),e[8]=a*(p*v-d*m)-c*(s*v-u*m)+h*(s*d-u*p),e[9]=-(n*(p*v-d*m)-c*(r*v-i*m)+h*(r*d-i*p)),e[10]=n*(s*v-u*m)-a*(r*v-i*m)+h*(r*u-i*s),e[11]=-(n*(s*d-u*p)-a*(r*d-i*p)+c*(r*u-i*s)),e[12]=-(a*(p*g-f*m)-c*(s*g-l*m)+h*(s*f-l*p)),e[13]=n*(p*g-f*m)-c*(r*g-o*m)+h*(r*f-o*p),e[14]=-(n*(s*g-l*m)-a*(r*g-o*m)+h*(r*l-o*s)),e[15]=n*(s*f-l*p)-a*(r*f-o*p)+c*(r*l-o*s),e},o.SIMD.adjoint=function(e,t){var n,r,o,i,a,s,l,u,c,p,f,d,h,n=SIMD.Float32x4.load(t,0),r=SIMD.Float32x4.load(t,4),o=SIMD.Float32x4.load(t,8),i=SIMD.Float32x4.load(t,12);return c=SIMD.Float32x4.shuffle(n,r,0,1,4,5),s=SIMD.Float32x4.shuffle(o,i,0,1,4,5),a=SIMD.Float32x4.shuffle(c,s,0,2,4,6),s=SIMD.Float32x4.shuffle(s,c,1,3,5,7),c=SIMD.Float32x4.shuffle(n,r,2,3,6,7),u=SIMD.Float32x4.shuffle(o,i,2,3,6,7),l=SIMD.Float32x4.shuffle(c,u,0,2,4,6),u=SIMD.Float32x4.shuffle(u,c,1,3,5,7),c=SIMD.Float32x4.mul(l,u),c=SIMD.Float32x4.swizzle(c,1,0,3,2),p=SIMD.Float32x4.mul(s,c),f=SIMD.Float32x4.mul(a,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,c),p),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,c),f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),c=SIMD.Float32x4.mul(s,l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),p=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),p),h=SIMD.Float32x4.mul(a,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(u,c)),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,c),h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),c=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,3,0,1),u),c=SIMD.Float32x4.swizzle(c,1,0,3,2),l=SIMD.Float32x4.swizzle(l,2,3,0,1),p=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),p),d=SIMD.Float32x4.mul(a,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(l,c)),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,c),d),d=SIMD.Float32x4.swizzle(d,2,3,0,1),c=SIMD.Float32x4.mul(a,s),c=SIMD.Float32x4.swizzle(c,1,0,3,2),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),d),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,c),h),c=SIMD.Float32x4.swizzle(c,2,3,0,1),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,c),d),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(l,c)),c=SIMD.Float32x4.mul(a,u),c=SIMD.Float32x4.swizzle(c,1,0,3,2),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(l,c)),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),d),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),f),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(s,c)),c=SIMD.Float32x4.mul(a,l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),f),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(s,c)),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(u,c)),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),h),SIMD.Float32x4.store(e,0,p),SIMD.Float32x4.store(e,4,f),SIMD.Float32x4.store(e,8,d),SIMD.Float32x4.store(e,12,h),e},o.adjoint=r.USE_SIMD?o.SIMD.adjoint:o.scalar.adjoint,o.determinant=function(e){var t=e[0],n=e[1],r=e[2],o=e[3],i=e[4],a=e[5],s=e[6],l=e[7],u=e[8],c=e[9],p=e[10],f=e[11],d=e[12],h=e[13],m=e[14],g=e[15];return(t*a-n*i)*(p*g-f*m)-(t*s-r*i)*(c*g-f*h)+(t*l-o*i)*(c*m-p*h)+(n*s-r*a)*(u*g-f*d)-(n*l-o*a)*(u*m-p*d)+(r*l-o*s)*(u*h-c*d)},o.SIMD.multiply=function(e,t,n){var r=SIMD.Float32x4.load(t,0),o=SIMD.Float32x4.load(t,4),i=SIMD.Float32x4.load(t,8),a=SIMD.Float32x4.load(t,12),s=SIMD.Float32x4.load(n,0),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,2,2,2),i),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,3,3,3,3),a))));SIMD.Float32x4.store(e,0,l);var u=SIMD.Float32x4.load(n,4),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,2,2,2),i),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,3,3,3,3),a))));SIMD.Float32x4.store(e,4,c);var p=SIMD.Float32x4.load(n,8),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(p,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(p,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(p,2,2,2,2),i),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(p,3,3,3,3),a))));SIMD.Float32x4.store(e,8,f);var d=SIMD.Float32x4.load(n,12),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,2,2,2),i),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,3,3,3,3),a))));return SIMD.Float32x4.store(e,12,h),e},o.scalar.multiply=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],p=t[8],f=t[9],d=t[10],h=t[11],m=t[12],g=t[13],v=t[14],y=t[15],b=n[0],w=n[1],x=n[2],_=n[3];return e[0]=b*r+w*s+x*p+_*m,e[1]=b*o+w*l+x*f+_*g,e[2]=b*i+w*u+x*d+_*v,e[3]=b*a+w*c+x*h+_*y,b=n[4],w=n[5],x=n[6],_=n[7],e[4]=b*r+w*s+x*p+_*m,e[5]=b*o+w*l+x*f+_*g,e[6]=b*i+w*u+x*d+_*v,e[7]=b*a+w*c+x*h+_*y,b=n[8],w=n[9],x=n[10],_=n[11],e[8]=b*r+w*s+x*p+_*m,e[9]=b*o+w*l+x*f+_*g,e[10]=b*i+w*u+x*d+_*v,e[11]=b*a+w*c+x*h+_*y,b=n[12],w=n[13],x=n[14],_=n[15],e[12]=b*r+w*s+x*p+_*m,e[13]=b*o+w*l+x*f+_*g,e[14]=b*i+w*u+x*d+_*v,e[15]=b*a+w*c+x*h+_*y,e},o.multiply=r.USE_SIMD?o.SIMD.multiply:o.scalar.multiply,o.mul=o.multiply,o.scalar.translate=function(e,t,n){var r,o,i,a,s,l,u,c,p,f,d,h,m=n[0],g=n[1],v=n[2];return t===e?(e[12]=t[0]*m+t[4]*g+t[8]*v+t[12],e[13]=t[1]*m+t[5]*g+t[9]*v+t[13],e[14]=t[2]*m+t[6]*g+t[10]*v+t[14],e[15]=t[3]*m+t[7]*g+t[11]*v+t[15]):(r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],p=t[8],f=t[9],d=t[10],h=t[11],e[0]=r,e[1]=o,e[2]=i,e[3]=a,e[4]=s,e[5]=l,e[6]=u,e[7]=c,e[8]=p,e[9]=f,e[10]=d,e[11]=h,e[12]=r*m+s*g+p*v+t[12],e[13]=o*m+l*g+f*v+t[13],e[14]=i*m+u*g+d*v+t[14],e[15]=a*m+c*g+h*v+t[15]),e},o.SIMD.translate=function(e,t,n){var r=SIMD.Float32x4.load(t,0),o=SIMD.Float32x4.load(t,4),i=SIMD.Float32x4.load(t,8),a=SIMD.Float32x4.load(t,12),s=SIMD.Float32x4(n[0],n[1],n[2],0);t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11]),r=SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(s,0,0,0,0)),o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(s,1,1,1,1)),i=SIMD.Float32x4.mul(i,SIMD.Float32x4.swizzle(s,2,2,2,2));var l=SIMD.Float32x4.add(r,SIMD.Float32x4.add(o,SIMD.Float32x4.add(i,a)));return SIMD.Float32x4.store(e,12,l),e},o.translate=r.USE_SIMD?o.SIMD.translate:o.scalar.translate,o.scalar.scale=function(e,t,n){var r=n[0],o=n[1],i=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*o,e[5]=t[5]*o,e[6]=t[6]*o,e[7]=t[7]*o,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},o.SIMD.scale=function(e,t,n){var r,o,i,a=SIMD.Float32x4(n[0],n[1],n[2],0);return r=SIMD.Float32x4.load(t,0),SIMD.Float32x4.store(e,0,SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(a,0,0,0,0))),o=SIMD.Float32x4.load(t,4),SIMD.Float32x4.store(e,4,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(a,1,1,1,1))),i=SIMD.Float32x4.load(t,8),SIMD.Float32x4.store(e,8,SIMD.Float32x4.mul(i,SIMD.Float32x4.swizzle(a,2,2,2,2))),e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},o.scale=r.USE_SIMD?o.SIMD.scale:o.scalar.scale,o.rotate=function(e,t,n,o){var i,a,s,l,u,c,p,f,d,h,m,g,v,y,b,w,x,_,S,C,k,A,E,M,T=o[0],O=o[1],I=o[2],P=Math.sqrt(T*T+O*O+I*I);return Math.abs(P)<r.EPSILON?null:(P=1/P,T*=P,O*=P,I*=P,i=Math.sin(n),a=Math.cos(n),s=1-a,l=t[0],u=t[1],c=t[2],p=t[3],f=t[4],d=t[5],h=t[6],m=t[7],g=t[8],v=t[9],y=t[10],b=t[11],w=T*T*s+a,x=O*T*s+I*i,_=I*T*s-O*i,S=T*O*s-I*i,C=O*O*s+a,k=I*O*s+T*i,A=T*I*s+O*i,E=O*I*s-T*i,M=I*I*s+a,e[0]=l*w+f*x+g*_,e[1]=u*w+d*x+v*_,e[2]=c*w+h*x+y*_,e[3]=p*w+m*x+b*_,e[4]=l*S+f*C+g*k,e[5]=u*S+d*C+v*k,e[6]=c*S+h*C+y*k,e[7]=p*S+m*C+b*k,e[8]=l*A+f*E+g*M,e[9]=u*A+d*E+v*M,e[10]=c*A+h*E+y*M,e[11]=p*A+m*E+b*M,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)},o.scalar.rotateX=function(e,t,n){var r=Math.sin(n),o=Math.cos(n),i=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=t[9],p=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=i*o+u*r,e[5]=a*o+c*r,e[6]=s*o+p*r,e[7]=l*o+f*r,e[8]=u*o-i*r,e[9]=c*o-a*r,e[10]=p*o-s*r,e[11]=f*o-l*r,e},o.SIMD.rotateX=function(e,t,n){var r=SIMD.Float32x4.splat(Math.sin(n)),o=SIMD.Float32x4.splat(Math.cos(n));t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var i=SIMD.Float32x4.load(t,4),a=SIMD.Float32x4.load(t,8);return SIMD.Float32x4.store(e,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(i,o),SIMD.Float32x4.mul(a,r))),SIMD.Float32x4.store(e,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,o),SIMD.Float32x4.mul(i,r))),e},o.rotateX=r.USE_SIMD?o.SIMD.rotateX:o.scalar.rotateX,o.scalar.rotateY=function(e,t,n){var r=Math.sin(n),o=Math.cos(n),i=t[0],a=t[1],s=t[2],l=t[3],u=t[8],c=t[9],p=t[10],f=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*o-u*r,e[1]=a*o-c*r,e[2]=s*o-p*r,e[3]=l*o-f*r,e[8]=i*r+u*o,e[9]=a*r+c*o,e[10]=s*r+p*o,e[11]=l*r+f*o,e},o.SIMD.rotateY=function(e,t,n){var r=SIMD.Float32x4.splat(Math.sin(n)),o=SIMD.Float32x4.splat(Math.cos(n));t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var i=SIMD.Float32x4.load(t,0),a=SIMD.Float32x4.load(t,8);return SIMD.Float32x4.store(e,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,o),SIMD.Float32x4.mul(a,r))),SIMD.Float32x4.store(e,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(i,r),SIMD.Float32x4.mul(a,o))),e},o.rotateY=r.USE_SIMD?o.SIMD.rotateY:o.scalar.rotateY,o.scalar.rotateZ=function(e,t,n){var r=Math.sin(n),o=Math.cos(n),i=t[0],a=t[1],s=t[2],l=t[3],u=t[4],c=t[5],p=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*o+u*r,e[1]=a*o+c*r,e[2]=s*o+p*r,e[3]=l*o+f*r,e[4]=u*o-i*r,e[5]=c*o-a*r,e[6]=p*o-s*r,e[7]=f*o-l*r,e},o.SIMD.rotateZ=function(e,t,n){var r=SIMD.Float32x4.splat(Math.sin(n)),o=SIMD.Float32x4.splat(Math.cos(n));t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var i=SIMD.Float32x4.load(t,0),a=SIMD.Float32x4.load(t,4);return SIMD.Float32x4.store(e,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(i,o),SIMD.Float32x4.mul(a,r))),SIMD.Float32x4.store(e,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,o),SIMD.Float32x4.mul(i,r))),e},o.rotateZ=r.USE_SIMD?o.SIMD.rotateZ:o.scalar.rotateZ,o.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},o.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.fromRotation=function(e,t,n){var o,i,a,s=n[0],l=n[1],u=n[2],c=Math.sqrt(s*s+l*l+u*u);return Math.abs(c)<r.EPSILON?null:(c=1/c,s*=c,l*=c,u*=c,o=Math.sin(t),i=Math.cos(t),a=1-i,e[0]=s*s*a+i,e[1]=l*s*a+u*o,e[2]=u*s*a-l*o,e[3]=0,e[4]=s*l*a-u*o,e[5]=l*l*a+i,e[6]=u*l*a+s*o,e[7]=0,e[8]=s*u*a+l*o,e[9]=l*u*a-s*o,e[10]=u*u*a+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},o.fromXRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.fromYRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.fromZRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.fromRotationTranslation=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=r+r,l=o+o,u=i+i,c=r*s,p=r*l,f=r*u,d=o*l,h=o*u,m=i*u,g=a*s,v=a*l,y=a*u;return e[0]=1-(d+m),e[1]=p+y,e[2]=f-v,e[3]=0,e[4]=p-y,e[5]=1-(c+m),e[6]=h+g,e[7]=0,e[8]=f+v,e[9]=h-g,e[10]=1-(c+d),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},o.getTranslation=function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},o.getRotation=function(e,t){var n=t[0]+t[5]+t[10],r=0;return n>0?(r=2*Math.sqrt(n+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e},o.fromRotationTranslationScale=function(e,t,n,r){var o=t[0],i=t[1],a=t[2],s=t[3],l=o+o,u=i+i,c=a+a,p=o*l,f=o*u,d=o*c,h=i*u,m=i*c,g=a*c,v=s*l,y=s*u,b=s*c,w=r[0],x=r[1],_=r[2];return e[0]=(1-(h+g))*w,e[1]=(f+b)*w,e[2]=(d-y)*w,e[3]=0,e[4]=(f-b)*x,e[5]=(1-(p+g))*x,e[6]=(m+v)*x,e[7]=0,e[8]=(d+y)*_,e[9]=(m-v)*_,e[10]=(1-(p+h))*_,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},o.fromRotationTranslationScaleOrigin=function(e,t,n,r,o){var i=t[0],a=t[1],s=t[2],l=t[3],u=i+i,c=a+a,p=s+s,f=i*u,d=i*c,h=i*p,m=a*c,g=a*p,v=s*p,y=l*u,b=l*c,w=l*p,x=r[0],_=r[1],S=r[2],C=o[0],k=o[1],A=o[2];return e[0]=(1-(m+v))*x,e[1]=(d+w)*x,e[2]=(h-b)*x,e[3]=0,e[4]=(d-w)*_,e[5]=(1-(f+v))*_,e[6]=(g+y)*_,e[7]=0,e[8]=(h+b)*S,e[9]=(g-y)*S,e[10]=(1-(f+m))*S,e[11]=0,e[12]=n[0]+C-(e[0]*C+e[4]*k+e[8]*A),e[13]=n[1]+k-(e[1]*C+e[5]*k+e[9]*A),e[14]=n[2]+A-(e[2]*C+e[6]*k+e[10]*A),e[15]=1,e},o.fromQuat=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=n+n,s=r+r,l=o+o,u=n*a,c=r*a,p=r*s,f=o*a,d=o*s,h=o*l,m=i*a,g=i*s,v=i*l;return e[0]=1-p-h,e[1]=c+v,e[2]=f-g,e[3]=0,e[4]=c-v,e[5]=1-u-h,e[6]=d+m,e[7]=0,e[8]=f+g,e[9]=d-m,e[10]=1-u-p,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.frustum=function(e,t,n,r,o,i,a){var s=1/(n-t),l=1/(o-r),u=1/(i-a);return e[0]=2*i*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*i*l,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(o+r)*l,e[10]=(a+i)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*i*2*u,e[15]=0,e},o.perspective=function(e,t,n,r,o){var i=1/Math.tan(t/2),a=1/(r-o);return e[0]=i/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(o+r)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*o*r*a,e[15]=0,e},o.perspectiveFromFieldOfView=function(e,t,n,r){var o=Math.tan(t.upDegrees*Math.PI/180),i=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),l=2/(a+s),u=2/(o+i);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=-(a-s)*l*.5,e[9]=(o-i)*u*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e},o.ortho=function(e,t,n,r,o,i,a){var s=1/(t-n),l=1/(r-o),u=1/(i-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+n)*s,e[13]=(o+r)*l,e[14]=(a+i)*u,e[15]=1,e},o.lookAt=function(e,t,n,i){var a,s,l,u,c,p,f,d,h,m,g=t[0],v=t[1],y=t[2],b=i[0],w=i[1],x=i[2],_=n[0],S=n[1],C=n[2];return Math.abs(g-_)<r.EPSILON&&Math.abs(v-S)<r.EPSILON&&Math.abs(y-C)<r.EPSILON?o.identity(e):(f=g-_,d=v-S,h=y-C,m=1/Math.sqrt(f*f+d*d+h*h),f*=m,d*=m,h*=m,a=w*h-x*d,s=x*f-b*h,l=b*d-w*f,m=Math.sqrt(a*a+s*s+l*l),m?(m=1/m,a*=m,s*=m,l*=m):(a=0,s=0,l=0),u=d*l-h*s,c=h*a-f*l,p=f*s-d*a,m=Math.sqrt(u*u+c*c+p*p),m?(m=1/m,u*=m,c*=m,p*=m):(u=0,c=0,p=0),e[0]=a,e[1]=u,e[2]=f,e[3]=0,e[4]=s,e[5]=c,e[6]=d,e[7]=0,e[8]=l,e[9]=p,e[10]=h,e[11]=0,e[12]=-(a*g+s*v+l*y),e[13]=-(u*g+c*v+p*y),e[14]=-(f*g+d*v+h*y),e[15]=1,e)},o.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},o.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e},o.sub=o.subtract,o.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e},o.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},o.equals=function(e,t){var n=e[0],o=e[1],i=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],p=e[8],f=e[9],d=e[10],h=e[11],m=e[12],g=e[13],v=e[14],y=e[15],b=t[0],w=t[1],x=t[2],_=t[3],S=t[4],C=t[5],k=t[6],A=t[7],E=t[8],M=t[9],T=t[10],O=t[11],I=t[12],P=t[13],j=t[14],D=t[15];return Math.abs(n-b)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(o-w)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(i-x)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(a-_)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(s-S)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(l-C)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(C))&&Math.abs(u-k)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(k))&&Math.abs(c-A)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(A))&&Math.abs(p-E)<=r.EPSILON*Math.max(1,Math.abs(p),Math.abs(E))&&Math.abs(f-M)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(M))&&Math.abs(d-T)<=r.EPSILON*Math.max(1,Math.abs(d),Math.abs(T))&&Math.abs(h-O)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(O))&&Math.abs(m-I)<=r.EPSILON*Math.max(1,Math.abs(m),Math.abs(I))&&Math.abs(g-P)<=r.EPSILON*Math.max(1,Math.abs(g),Math.abs(P))&&Math.abs(v-j)<=r.EPSILON*Math.max(1,Math.abs(v),Math.abs(j))&&Math.abs(y-D)<=r.EPSILON*Math.max(1,Math.abs(y),Math.abs(D))},e.exports=o},function(e,t,n){var r=n(1),o=n(7),i=n(8),a=n(9),s={};s.create=function(){var e=new r.ARRAY_TYPE(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},s.rotationTo=function(){var e=i.create(),t=i.fromValues(1,0,0),n=i.fromValues(0,1,0);return function(r,o,a){var l=i.dot(o,a);return l<-.999999?(i.cross(e,t,o),i.length(e)<1e-6&&i.cross(e,n,o),i.normalize(e,e),s.setAxisAngle(r,e,Math.PI),r):l>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(i.cross(e,o,a),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=1+l,s.normalize(r,r))}}(),s.setAxes=function(){var e=o.create();return function(t,n,r,o){return e[0]=r[0],e[3]=r[1],e[6]=r[2],e[1]=o[0],e[4]=o[1],e[7]=o[2],e[2]=-n[0],e[5]=-n[1],e[8]=-n[2],s.normalize(t,s.fromMat3(t,e))}}(),s.clone=a.clone,s.fromValues=a.fromValues,s.copy=a.copy,s.set=a.set,s.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},s.setAxisAngle=function(e,t,n){n*=.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e},s.getAxisAngle=function(e,t){var n=2*Math.acos(t[3]),r=Math.sin(n/2);return 0!=r?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0),n},s.add=a.add,s.multiply=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=n[0],l=n[1],u=n[2],c=n[3];return e[0]=r*c+a*s+o*u-i*l,e[1]=o*c+a*l+i*s-r*u,e[2]=i*c+a*u+r*l-o*s,e[3]=a*c-r*s-o*l-i*u,e},s.mul=s.multiply,s.scale=a.scale,s.rotateX=function(e,t,n){n*=.5;var r=t[0],o=t[1],i=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+a*s,e[1]=o*l+i*s,e[2]=i*l-o*s,e[3]=a*l-r*s,e},s.rotateY=function(e,t,n){n*=.5;var r=t[0],o=t[1],i=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l-i*s,e[1]=o*l+a*s,e[2]=i*l+r*s,e[3]=a*l-o*s,e},s.rotateZ=function(e,t,n){n*=.5;var r=t[0],o=t[1],i=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+o*s,e[1]=o*l-r*s,e[2]=i*l+a*s,e[3]=a*l-i*s,e},s.calculateW=function(e,t){var n=t[0],r=t[1],o=t[2];return e[0]=n,e[1]=r,e[2]=o,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-o*o)),e},s.dot=a.dot,s.lerp=a.lerp,s.slerp=function(e,t,n,r){var o,i,a,s,l,u=t[0],c=t[1],p=t[2],f=t[3],d=n[0],h=n[1],m=n[2],g=n[3];return i=u*d+c*h+p*m+f*g,i<0&&(i=-i,d=-d,h=-h,m=-m,g=-g),1-i>1e-6?(o=Math.acos(i),a=Math.sin(o),s=Math.sin((1-r)*o)/a,l=Math.sin(r*o)/a):(s=1-r,l=r),e[0]=s*u+l*d,e[1]=s*c+l*h,e[2]=s*p+l*m,e[3]=s*f+l*g,e},s.sqlerp=function(){var e=s.create(),t=s.create();return function(n,r,o,i,a,l){return s.slerp(e,r,a,l),s.slerp(t,o,i,l),s.slerp(n,e,t,2*l*(1-l)),n}}(),s.invert=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=n*n+r*r+o*o+i*i,s=a?1/a:0;return e[0]=-n*s,e[1]=-r*s,e[2]=-o*s,e[3]=i*s,e},s.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},s.length=a.length,s.len=s.length,s.squaredLength=a.squaredLength,s.sqrLen=s.squaredLength,s.normalize=a.normalize,s.fromMat3=function(e,t){var n,r=t[0]+t[4]+t[8];if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var o=0;t[4]>t[0]&&(o=1),t[8]>t[3*o+o]&&(o=2);var i=(o+1)%3,a=(o+2)%3;n=Math.sqrt(t[3*o+o]-t[3*i+i]-t[3*a+a]+1),e[o]=.5*n,n=.5/n,e[3]=(t[3*i+a]-t[3*a+i])*n,e[i]=(t[3*i+o]+t[3*o+i])*n,e[a]=(t[3*a+o]+t[3*o+a])*n}return e},s.str=function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},s.exactEquals=a.exactEquals,s.equals=a.equals,e.exports=s},function(e,t,n){var r=n(1),o={};o.create=function(){var e=new r.ARRAY_TYPE(2);return e[0]=0,e[1]=0,e},o.clone=function(e){var t=new r.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t},o.fromValues=function(e,t){var n=new r.ARRAY_TYPE(2);return n[0]=e,n[1]=t,n},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},o.set=function(e,t,n){return e[0]=t,e[1]=n,e},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e},o.sub=o.subtract,o.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e},o.mul=o.multiply,o.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e},o.div=o.divide,o.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e},o.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e},o.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e},o.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e},o.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e},o.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e},o.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e},o.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)},o.dist=o.distance,o.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r},o.sqrDist=o.squaredDistance,o.length=function(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)},o.len=o.length,o.squaredLength=function(e){var t=e[0],n=e[1];return t*t+n*n},o.sqrLen=o.squaredLength,o.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},o.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},o.normalize=function(e,t){var n=t[0],r=t[1],o=n*n+r*r;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o),e},o.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},o.cross=function(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e},o.lerp=function(e,t,n,r){var o=t[0],i=t[1];return e[0]=o+r*(n[0]-o),e[1]=i+r*(n[1]-i),e},o.random=function(e,t){t=t||1;var n=2*r.RANDOM()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e},o.transformMat2=function(e,t,n){var r=t[0],o=t[1];return e[0]=n[0]*r+n[2]*o,e[1]=n[1]*r+n[3]*o,e},o.transformMat2d=function(e,t,n){var r=t[0],o=t[1];return e[0]=n[0]*r+n[2]*o+n[4],e[1]=n[1]*r+n[3]*o+n[5],e},o.transformMat3=function(e,t,n){var r=t[0],o=t[1];return e[0]=n[0]*r+n[3]*o+n[6],e[1]=n[1]*r+n[4]*o+n[7],e},o.transformMat4=function(e,t,n){var r=t[0],o=t[1];return e[0]=n[0]*r+n[4]*o+n[12],e[1]=n[1]*r+n[5]*o+n[13],e},o.forEach=function(){var e=o.create();return function(t,n,r,o,i,a){var s,l;for(n||(n=2),r||(r=0),l=o?Math.min(o*n+r,t.length):t.length,s=r;s<l;s+=n)e[0]=t[s],e[1]=t[s+1],i(e,e,a),t[s]=e[0],t[s+1]=e[1];return t}}(),o.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]},o.equals=function(e,t){var n=e[0],o=e[1],i=t[0],a=t[1];return Math.abs(n-i)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(o-a)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(a))},e.exports=o},function(e,t){e.exports=function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg",e);for(var r in t)t.hasOwnProperty(r)&&n.setAttribute(r,t[r]);return n}},function(e,t,n){var r=function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg",e);for(var r in t)t.hasOwnProperty(r)&&n.setAttribute(r,t[r]);return n},o=n(3),i=function(e){if(e.indexOf("rgb(")>-1)return{rgb:e,opacity:1};var t=o(e);return{rgb:"rgb("+255*t[0]+","+255*t[1]+","+255*t[2]+")",opacity:t[3]}},a=function(e,t,n){var o=i(e.stroke),a=i(e.fill);return r("rect",{width:e.width,height:e.height,x:parseFloat(e.x)+t,y:parseFloat(e.y)+n,stroke:o.rgb,"stroke-opacity":o.opacity,"stroke-width":e["stroke-width"],fill:a.rgb,"fill-opacity":a.opacity})},s=function(e,t,n){var o=i(e.stroke),a=i(e.fill);return r("polygon",{points:[[parseFloat(e.x1)+t,parseFloat(e.y1)+n],[parseFloat(e.x2)+t,parseFloat(e.y2)+n],[parseFloat(e.x3)+t,parseFloat(e.y3)+n]].map(function(e){return e[0]+","+e[1]}).join(" "),stroke:o.rgb,"stroke-opacity":o.opacity,"stroke-width":e["stroke-width"],fill:a.rgb,"fill-opacity":a.opacity})},l=function(e,t,n){var o=i(e.stroke),a=i(e.fill);return r("ellipse",{rx:parseFloat(e.width)/2,height:parseFloat(e.height)/2,cx:parseFloat(e.x)+t,cy:parseFloat(e.y)+n,stroke:o.rgb,"stroke-opacity":o.opacity,"stroke-width":e["stroke-width"],fill:a.rgb,"fill-opacity":a.opacity})},u=function(e,t,n){var o=i(e.stroke);return r("line",{x1:parseFloat(e.x1)+t,y1:parseFloat(e.y1)+n,x2:parseFloat(e.x2)+t,y2:parseFloat(e.y2)+n,stroke:o.rgb,"stroke-opacity":o.opacity,"stroke-width":e["stroke-width"]})};e.exports=function(e,t,n){var r=e.type;return"rectangle"===r?a(e,t,n):"triangle"===r?s(e,t,n):"ellipse"===r?l(e,t,n):"line"===r?u(e,t,n):void 0}},function(e,t){var n=Math.sqrt(2)/2,r=function(e){var t=[0,0,0,1];if("#"===e[0]){e="rgba("+parseInt(e[1]+e[2],16)+","+parseInt(e[3]+e[4],16)+","+parseInt(e[5]+e[6],16)+",1)"}var n=e.match(/^[\s]*rgba\([\s]*([0-9]+)[\s]*,[\s]*([0-9]+)[\s]*,[\s]*([0-9]+)[\s]*,[\s]*([0-9.]+)[\s]*\)[\s]*$/);return n&&5===n.length&&(t=[parseFloat(n[1])/255,parseFloat(n[2])/255,parseFloat(n[3])/255,parseFloat(n[4])]),t},o=function(e,t,n){var o=parseFloat(e.x),i=parseFloat(e.y),a=parseFloat(e.height),s=parseFloat(e.width),l=r(e.fill);n([o,i,t],l),n([o+s,i,t],l),n([o+s,i+a,t],l),n([o,i,t],l),n([o+s,i+a,t],l),n([o,i+a,t],l);var u=parseFloat(e["stroke-width"]);if(u>0){var c=r(e.stroke);n([o,i,t],c),n([o+u,i,t],c),n([o+u,i+a,t],c),n([o,i,t],c),n([o+u,i+a,t],c),n([o,i+a,t],c),n([o+s,i,t],c),n([o+s-u,i,t],c),n([o+s-u,i+a,t],c),n([o+s,i,t],c),n([o+s-u,i+a,t],c),n([o+s,i+a,t],c),n([o,i,t],c),n([o+s,i,t],c),n([o+s,i+u,t],c),n([o,i,t],c),n([o+s,i+u,t],c),n([o,i+u,t],c),n([o,i+a,t],c),n([o+s,i+a,t],c),n([o+s,i+a-u,t],c),n([o,i+a,t],c),n([o+s,i+a-u,t],c),n([o,i+a-u,t],c)}},i=function(e,t,n){var o=r(e.fill);n([parseFloat(e.x1),parseFloat(e.y1),t],o),n([parseFloat(e.x2),parseFloat(e.y2),t],o),n([parseFloat(e.x3),parseFloat(e.y3),t],o)},a=function(e,t,o){var i={x:parseFloat(e.x)+parseFloat(e.width)/2,y:parseFloat(e.y)+parseFloat(e.height)/2},a=parseFloat(e.width)/2,s=parseFloat(e.height)/2,l=r(e.fill);o([i.x,i.y,t],l),o([i.x+a,i.y,t],l),o([i.x+n*a,i.y+n*s,t],l),o([i.x,i.y,t],l),o([i.x+n*a,i.y+n*s,t],l),o([i.x,i.y+s,t],l),o([i.x,i.y,t],l),o([i.x,i.y+s,t],l),o([i.x-n*a,i.y+n*s,t],l),o([i.x,i.y,t],l),o([i.x-n*a,i.y+n*s,t],l),o([i.x-a,i.y,t],l),o([i.x,i.y,t],l),o([i.x-a,i.y,t],l),o([i.x-n*a,i.y-n*s,t],l),o([i.x,i.y,t],l),o([i.x-n*a,i.y-n*s,t],l),o([i.x,i.y-s,t],l),o([i.x,i.y,t],l),o([i.x,i.y-s,t],l),o([i.x+n*a,i.y-n*s,t],l),o([i.x,i.y,t],l),o([i.x+n*a,i.y-n*s,t],l),o([i.x+a,i.y,t],l)},s=function(e,t,n){var o=parseFloat(e.x1),i=parseFloat(e.x2),a=parseFloat(e.y1),s=parseFloat(e.y2);if(o!==i&&Math.min(o,i)===i){var l=o,u=a;o=i,a=s,i=l,s=u}var c=[s-a,o-i],p=Math.sqrt(c[0]*c[0]+c[1]*c[1]),f=[c[0]/p,c[1]/p],d=parseFloat(e["stroke-width"])/2,h=[f[0]*d,f[1]*d],m=[-1*h[0],-1*h[1]],g=[o+h[0],a+h[1]],v=[o+m[0],a+m[1]],y=[i+h[0],s+h[1]],b=[i+m[0],s+m[1]],w=r(e.stroke);n([g[0],g[1],t],w),n([v[0],v[1],t],w),n([y[0],y[1],t],w),n([y[0],y[1],t],w),n([b[0],b[1],t],w),n([v[0],v[1],t],w)};e.exports=function(e,t,n){var r=e.type;return"rectangle"===r?o(e,t,n):"triangle"===r?i(e,t,n):"ellipse"===r?a(e,t,n):"line"===r?s(e,t,n):void 0}},function(e,t,n){var r=n(2),o=n(0),i=function(){function e(e,n,r){this.supersampling_ratio=2,this.$canvas=e,this.base_font_size=14,this.model=n,this.tooltip=r,this.tooltip.center=!1,this.cell_tops={},this.cell_tops_view_space={},this.cell_heights={},this.cell_heights_view_space={},this.label_middles_view_space={},this.labels={},this.track_descriptions={},this.tracks=[],this.minimum_track_height=Number.POSITIVE_INFINITY,this.maximum_label_width=Number.NEGATIVE_INFINITY,this.maximum_label_length=18,this.rendering_suppressed=!1,this.highlighted_track=null,i(this),function(e){e.drag_callback=function(e,t){},e.dragged_label_track_id=null,e.drag_mouse_y=null,e.$canvas.on("mousedown",function(t){e.tooltip.hide();var r=c(e,t.offsetY);null!==r&&n.getContainingTrackGroup(r).length>1&&!n.isTrackInClusteredGroup(r)&&d(e,r,t.offsetY)}),e.$canvas.on("mousemove",function(r){if(null!==e.dragged_label_track_id){var i=n.getContainingTrackGroup(e.dragged_label_track_id),a=e.track_tops[i[i.length-1]]+n.getTrackHeight(i[i.length-1])-e.scroll_y,l=e.track_tops[i[0]]-5-e.scroll_y;e.drag_mouse_y=Math.min(r.pageY-e.$canvas.offset().top,a),e.drag_mouse_y=Math.max(e.drag_mouse_y,l),u(e)}else{var p=c(e,r.pageY-e.$canvas.offset().top);if(null!==p){var f=o("<div>"),d=e.$canvas.offset();s(e,e.labels[p])&&f.append(o("<b>"+e.labels[p]+"</b><br>"));var h=e.track_descriptions[p].replace("<","&lt;").replace(">","&gt;");h.length>0&&f.append(h+"<br>"),n.isTrackInClusteredGroup(p)?(e.$canvas.css("cursor","not-allowed"),f.append("<b>dragging disabled for clustered tracks</b>")):n.getContainingTrackGroup(p).length>1&&(e.$canvas.css("cursor","move"),f.append("<b>hold to drag</b>")),e.tooltip.fadeIn(200,t(e,e.labels[p])+d.left,e.cell_tops[p]+d.top-e.scroll_y,f)}else e.$canvas.css("cursor","auto"),e.tooltip.hide()}}),e.$canvas.on("mouseup mouseleave",function(t){if(null!==e.dragged_label_track_id){var r=n.getContainingTrackGroup(e.dragged_label_track_id),o=p(e,r,t.offsetY,e.dragged_label_track_id);h(e,o)}e.tooltip.hide()})}(this)}var t=function(e,t){return e.ctx.measureText(l(e,t)).width/e.supersampling_ratio},n=function(e,t){if(!e.rendering_suppressed){e.scroll_y=t.getVertScroll(),e.track_tops=t.getZoomedTrackTops(),e.cell_tops=t.getCellTops(),e.cell_tops_view_space={},e.cell_heights={},e.tracks=t.getTracks(),e.track_descriptions={},e.ctx.font="bold "+e.getFontSize()+"px Arial",e.minimum_track_height=Number.POSITIVE_INFINITY,e.maximum_label_width=0;for(var n=0;n<e.tracks.length;n++){e.minimum_track_height=Math.min(e.minimum_track_height,t.getTrackHeight(e.tracks[n]));var r=l(e,e.labels[e.tracks[n]]);e.maximum_label_width=Math.max(e.maximum_label_width,e.ctx.measureText(r).width),e.cell_tops_view_space[e.tracks[n]]=e.cell_tops[e.tracks[n]]*e.supersampling_ratio-e.scroll_y*e.supersampling_ratio,e.track_descriptions[e.tracks[n]]=t.getTrackDescription(e.tracks[n]),e.cell_heights[e.tracks[n]]=t.getCellHeight(e.tracks[n]),e.cell_heights_view_space[e.tracks[n]]=e.cell_heights[e.tracks[n]]*e.supersampling_ratio,e.label_middles_view_space[e.tracks[n]]=e.cell_tops_view_space[e.tracks[n]]+e.cell_heights_view_space[e.tracks[n]]/2}}},i=function(e){e.ctx=e.$canvas[0].getContext("2d"),e.ctx.textAlign="start",e.ctx.textBaseline="middle"},a=function(e,t){if(!e.rendering_suppressed){var n=t.getCellViewHeight(),r=e.getWidth();e.$canvas[0].height=e.supersampling_ratio*n,e.$canvas[0].width=e.supersampling_ratio*r,e.$canvas[0].style.height=n+"px",e.$canvas[0].style.width=r+"px",i(e)}},s=function(e,t){return t.length>e.maximum_label_length},l=function(e,t){return s(e,t)?t.substring(0,e.maximum_label_length-3)+"...":t},u=function(e){if(!e.rendering_suppressed){e.ctx.clearRect(0,0,e.$canvas[0].width,e.$canvas[0].height),null!==e.highlighted_track&&e.cell_tops_view_space.hasOwnProperty(e.highlighted_track)&&(e.ctx.fillStyle="rgba(255,255,0,0.4)",e.ctx.fillRect(0,e.cell_tops_view_space[e.highlighted_track],e.getWidth()*e.supersampling_ratio,e.cell_heights_view_space[e.highlighted_track]));var t=e.getFontSize();e.ctx.font="bold "+t+"px Arial",e.ctx.fillStyle="black";for(var n=e.tracks,r=0;r<n.length;r++)e.ctx.fillText(l(e,e.labels[n[r]]),0,e.label_middles_view_space[n[r]]);if(null!==e.dragged_label_track_id){e.ctx.fillStyle="rgba(255,0,0,0.95)",e.ctx.fillText(l(e,e.labels[e.dragged_label_track_id]),0,e.supersampling_ratio*e.drag_mouse_y),e.ctx.fillStyle="rgba(0,0,0,0.15)";var o,i,a=e.model.getContainingTrackGroup(e.dragged_label_track_id),s=p(e,a,e.drag_mouse_y,null),u=f(e,a,e.drag_mouse_y,null);if(s===e.dragged_label_track_id||u===e.dragged_label_track_id)return;null!==s&&null!==u?(o=e.cell_tops_view_space[s]+e.cell_heights_view_space[s],i=e.cell_tops_view_space[u]-o):null===s?(o=e.cell_tops_view_space[a[0]]-e.ctx.measureText("m").width,i=e.ctx.measureText("m").width):null===u&&(o=e.cell_tops_view_space[a[a.length-1]]+e.cell_heights_view_space[a[a.length-1]],i=e.ctx.measureText("m").width);i=Math.max(i,4),e.ctx.fillRect(0,o,e.getWidth()*e.supersampling_ratio,i)}}},c=function(e,t){var n=p(e,e.tracks,t,null);return null===n?null:t<=e.cell_tops[n]-e.scroll_y+e.cell_heights[n]?n:null},p=function(e,t,n,r){if(n<e.cell_tops[t[0]]-e.scroll_y)return null;for(var o=null,i=0;i<t.length;i++)if(null===r||r!==t[i]){if(e.cell_tops[t[i]]-e.scroll_y>n)break;o=t[i]}return o},f=function(e,t,n,r){if(n>e.cell_tops[t[t.length-1]]-e.scroll_y)return null;for(var o=null,i=t.length-1;i>=0;i--)if(null===r||r!==t[i]){if(e.cell_tops[t[i]]-e.scroll_y<n)break;o=t[i]}return o},d=function(e,t,n){e.dragged_label_track_id=t,e.drag_mouse_y=n,u(e)},h=function(e,t){e.drag_callback(e.dragged_label_track_id,t),e.dragged_label_track_id=null,u(e)};return e.prototype.getWidth=function(){return Math.max(this.maximum_label_width/this.supersampling_ratio+10,70)},e.prototype.getFontSize=function(e){return(e?1:this.supersampling_ratio)*Math.max(Math.min(this.base_font_size,this.minimum_track_height),7)},e.prototype.setDragCallback=function(e){this.drag_callback=e},e.prototype.removeTrack=function(e,t){n(this,e),a(this,e),u(this,e)},e.prototype.moveTrack=function(e){n(this,e),a(this,e),u(this,e)},e.prototype.setTrackGroupOrder=function(e){n(this,e),a(this,e),u(this,e)},e.prototype.addTracks=function(e,t){for(var r=0;r<t.length;r++)this.labels[t[r]]=e.getTrackLabel(t[r]);n(this,e),a(this,e),u(this,e)},e.prototype.setScroll=function(e){this.setVertScroll(e)},e.prototype.setHorzScroll=function(e){},e.prototype.setViewport=function(e){this.setVertScroll(e)},e.prototype.setVertScroll=function(e){n(this,e),a(this,e),u(this,e)},e.prototype.setVertZoom=function(e){n(this,e),a(this,e),u(this,e)},e.prototype.setZoom=function(e){this.setVertZoom(e)},e.prototype.highlightTrack=function(e,t){this.highlighted_track=e,u(this,t)},e.prototype.suppressRendering=function(){this.rendering_suppressed=!0},e.prototype.releaseRendering=function(e){this.rendering_suppressed=!1,n(this,e),a(this,e),u(this)},e.prototype.toSVGGroup=function(e,t,n,o){for(var i=r.group(n||0,o||0),a=e.getCellTops(),s=e.getTracks(),u=0;u<s.length;u++){var c=s[u],p=a[c]+e.getCellHeight(c)/2,f=e.getTrackLabel(c),d=r.text(t?f:l(this,f),0,p,this.getFontSize(!0),"Arial","bold","bottom");d.setAttribute("dy","0.35em"),i.appendChild(d)}return i},e}();e.exports=i},function(e,t,n){function r(e,t){return void 0===e?t:e}function o(){var e=0;return function(){return e+=1}}function i(e){for(var t=[],n=0;n<e;n++)t.push(n);return t}function a(e){e=e||[];for(var t=["#3366cc","#dc3912","#ff9900","#109618","#990099","#0099c6","#dd4477","#66aa00","#b82e2e","#316395","#994499","#22aa99","#aaaa11","#6633cc","#e67300","#8b0707","#651067","#329262","#5574a6","#3b3eac","#b77322","#16d620","#b91383","#f4359e","#9c5935","#a9c413","#2a778d","#668d1c","#bea413","#0c5922","#743411"],n=0,r={},o=0;o<e.length;o++)r[e[o]]=!0;return function(){for(var e=t[n%t.length];r[e];){var o=g(e);if(o===e)break;e=o}return r[e]=!0,n+=1,e}}function s(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}function l(e){return Object.keys(e).map(function(t){return e[t]})}var u=n(10),c=(n(3),n(29)),p=n(4),f=function(e){return[{type:"rectangle",fill:"rgba(255,255,255,1)",z:e},{type:"line",stroke:"rgba(190,190,190,1)","stroke-width":"1",x1:"0%",x2:"100%",y1:"50%",y2:"50%",z:e}]},d="na",h="N/A",m=function(e){var t,n,r,o=e.match(/^[\s]*rgba\([\s]*([0-9]+)[\s]*,[\s]*([0-9]+)[\s]*,[\s]*([0-9]+)[\s]*,[\s]*([0-9.]+)[\s]*\)[\s]*$/);if(o&&5===o.length)return t=parseInt(o[1]).toString(16),n=parseInt(o[2]).toString(16),r=parseInt(o[3]).toString(16),1===t.length&&(t="0"+t),1===n.length&&(n="0"+n),1===r.length&&(r="0"+r),"#"+t+n+r;var i=e.match(/^[\s]*rgb\([\s]*([0-9]+)[\s]*,[\s]*([0-9]+)[\s]*,[\s]*([0-9]+)[\s]*\)[\s]*$/);return i&&4===i.length?(t=parseInt(i[1]).toString(16),n=parseInt(i[2]).toString(16),r=parseInt(i[3]).toString(16),1===t.length&&(t="0"+t),1===n.length&&(n="0"+n),1===r.length&&(r="0"+r),"#"+t+n+r):e},g=function(e){var t=e[1]+e[2],n=e[3]+e[4],r=e[5]+e[6],o=function(e){return e=parseInt(e,16),e*=.95,e=Math.round(e),e=e.toString(16),1===e.length&&(e="0"+e),e};return t=o(t),n=o(n),r=o(r),"#"+t+n+r},v=function(){function e(e){this.rule_set_id=t(),this.legend_label=e.legend_label,this.exclude_from_legend=e.exclude_from_legend,this.active_rule_ids={},this.rules_with_id=[]}var t=o(),n=o();return e.prototype.getLegendLabel=function(){return this.legend_label},e.prototype.getRuleSetId=function(){return this.rule_set_id},e.prototype.addRules=function(e){var t=this;return e.map(function(e){return t.addRule(e)})},e.prototype.addRule=function(e){var t=n();return this.rules_with_id.push({id:t,rule:new A(e)}),t},e.prototype.removeRule=function(e){for(var t=-1,n=0;n<this.rules_with_id.length;n++)if(this.rules_with_id[n].id===e){t=n;break}t>-1&&this.rules_with_id.splice(t,1),delete this.active_rule_ids[e]},e.prototype.getRuleWithId=function(e){for(var t=null,n=0;n<this.rules_with_id.length;n++)if(this.rules_with_id[n].id===e){t=this.rules_with_id[n];break}return t},e.prototype.isExcludedFromLegend=function(){return this.exclude_from_legend},e.prototype.getRecentlyUsedRules=function(){var e=this;return Object.keys(this.active_rule_ids).map(function(t){return e.getRule(t)})},e.prototype.applyRulesToDatum=function(e,t,n,r){for(var o=[],i=e.length,a=0;a<i;a++)o=o.concat(e[a].rule.apply(t,n,r));return o},e.prototype.apply=function(e,t,n,r){for(var o=[],i=0;i<e.length;i++){var a=this.getRulesWithId(e[i]);if(void 0!==r)for(var s=0;s<a.length;s++)r[a[s].id]=!0;o.push(this.applyRulesToDatum(a,e[i],t,n))}return o},e}(),y=function(){function e(e){v.call(this,e),this.lookup_map_by_key_and_value={},this.lookup_map_by_key={},this.universal_rules=[],this.rule_id_to_conditions={}}e.prototype=Object.create(v.prototype),e.prototype.getRulesWithId=function(e){if(void 0===e)return this.rules_with_id;var t=[];t=t.concat(this.universal_rules);for(var n in e)if(void 0!==e[n]){var r=this.lookup_map_by_key[n];void 0!==r&&t.push(r);var o=this.lookup_map_by_key_and_value[n]&&this.lookup_map_by_key_and_value[n][e[n]]||void 0;void 0!==o&&t.push(o)}return t};var t=function(e,t,n,r){null===t?e.universal_rules.push(r):null===n?e.lookup_map_by_key[t]=r:(e.lookup_map_by_key_and_value[t]=e.lookup_map_by_key_and_value[t]||{},e.lookup_map_by_key_and_value[t][n]=r),e.rule_id_to_conditions[r.id]=e.rule_id_to_conditions[r.id]||[],e.rule_id_to_conditions[r.id].push({key:t,value:n})};return e.prototype.addRule=function(e,n,r){var o=v.prototype.addRule.call(this,r);return t(this,e,n,this.getRuleWithId(o)),o},e.prototype.linkExistingRule=function(e,n,r){t(this,e,n,this.getRuleWithId(r))},e.prototype.removeRule=function(e){for(v.prototype.removeRule.call(this,e);this.rule_id_to_conditions[e].length>0;){var t=this.rule_id_to_conditions[e].pop();if(null===t.key){for(var n=-1,r=0;r<this.universal_rules.length;r++)if(this.universal_rules[r].id===e){n=r;break}n>-1&&this.universal_rules.splice(n,1)}else null===t.value?delete this.lookup_map_by_key[t.key]:delete this.lookup_map_by_key_and_value[t.key][t.value]}delete this.rule_id_to_conditions[e]},e}(),b=function(){function e(e){v.call(this,e),this.rule_id_to_condition={},this.addRule(function(e){return!0===e[d]},{shapes:f(e.na_z||1e3),legend_label:h,exclude_from_legend:!1,legend_config:{type:"rule",target:{na:!0}}})}return e.prototype=Object.create(v.prototype),e.prototype.getRulesWithId=function(e){if(void 0===e)return this.rules_with_id;for(var t=[],n=0;n<this.rules_with_id.length;n++)this.rule_id_to_condition[this.rules_with_id[n].id](e)&&t.push(this.rules_with_id[n]);return t},e.prototype.addRule=function(e,t){var n=v.prototype.addRule.call(this,t);return this.rule_id_to_condition[n]=e,n},e.prototype.removeRule=function(e){v.prototype.removeRule.call(this,e),delete this.rule_id_to_condition[e]},e}(),w=function(){function e(e){y.call(this,e),this.addRule(d,!0,{shapes:f(e.na_z||1e3),legend_label:h,exclude_from_legend:!1,legend_config:{type:"rule",target:{na:!0}}}),this.category_key=e.category_key,this.category_to_color=r(e.category_to_color,{}),this.getUnusedColor=a(l(this.category_to_color).map(m));for(var n in this.category_to_color)if(this.category_to_color.hasOwnProperty(n)){var o=this.category_to_color[n];t(this,n,o),this.used_colors[m(o)]=!0}}e.prototype=Object.create(y.prototype);var t=function(e,t,n){var r={};r[e.category_key]=t;var o={shapes:[{type:"rectangle",fill:n}],legend_label:t,exclude_from_legend:!1,legend_config:{type:"rule",target:r}};e.addRule(e.category_key,t,o)};return e.prototype.apply=function(e,n,r,o){for(var i=0,a=e.length;i<a;i++)if(!e[i][d]){var s=e[i][this.category_key];if(!this.category_to_color.hasOwnProperty(s)){var l=this.getUnusedColor(this);this.category_to_color[s]=l,t(this,s,l)}}return y.prototype.apply.call(this,e,n,r,o)},e}(),x=function(){function e(e){b.call(this,e),this.value_key=e.value_key,this.value_range=e.value_range,this.log_scale=e.log_scale,this.type=e.type,this.rangeTypes={ALL:"ALL",NON_NEGATIVE:"NON_NEGATIVE",NON_POSITIVE:"NON_POSITIVE"},this.makeInterpFn=function(){var e=this.getEffectiveValueRange(),t=this.getValueRangeType(),n=this.type,r=this.rangeTypes;if(this.log_scale){var o=Math.abs(e[0])+1,i=Math.log(e[1]+o)-Math.log(e[0]+o),a=Math.log(e[0]+o);return function(e){return e=parseFloat(e),(Math.log(e+o)-a)/i}}return function(o){var i=e[1]-e[0],a=e[0],s=e[1];return"bar"!==n?(o-a)/i:t===r.NON_POSITIVE?(o-s)/i:t===r.NON_NEGATIVE?(o-a)/i:t===r.ALL?(i=Math.abs(e[0])>e[1]?Math.abs(e[0]):e[1],o/i):void 0}}}return e.prototype=Object.create(b.prototype),e.prototype.getEffectiveValueRange=function(){var e=this.value_range&&this.value_range.slice()||[void 0,void 0];return void 0===e[0]&&(e[0]=this.inferred_value_range[0]),void 0===e[1]&&(e[1]=this.inferred_value_range[1]),e[0]===e[1]&&(e[0]-=e[0]/2,e[1]+=e[1]/2),e},e.prototype.getValueRangeType=function(){var e=this.getEffectiveValueRange();return e[0]<0&&e[1]<=0?this.rangeTypes.NON_POSITIVE:e[0]>=0&&e[1]>0?this.rangeTypes.NON_NEGATIVE:this.rangeTypes.ALL},e.prototype.apply=function(e,t,n,r){for(var o=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,a=0,s=e.length;a<s;a++){var l=e[a];isNaN(l[this.value_key])||(o=Math.min(o,l[this.value_key]),i=Math.max(i,l[this.value_key]))}return o===Number.POSITIVE_INFINITY&&(o=0),i===Number.NEGATIVE_INFINITY&&(i=0),this.inferred_value_range=[o,i],this.updateLinearRules(),b.prototype.apply.call(this,e,t,n,r)},e.prototype.updateLinearRules=function(){throw"Not implemented in abstract class"},e}(),_=function(){function e(e){x.call(this,e),this.colors=[],e.colors?this.colors=e.colors||[]:e.colormap_name&&(this.colors=c[e.colormap_name]||[]),0===this.colors.length&&this.colors.push([0,0,0,1],[255,0,0,1]),this.value_stop_points=e.value_stop_points,this.null_color=e.null_color||"rgba(211,211,211,1)"}e.prototype=Object.create(x.prototype);var t=function(e,t,n){return[Math.round(t[0]*(1-e)+n[0]*e),Math.round(t[1]*(1-e)+n[1]*e),Math.round(t[2]*(1-e)+n[2]*e),t[3]*(1-e)+n[3]*e]};return e.prototype.makeColorFn=function(e,n){var r,o=this.value_stop_points;return r=o?o.map(n):i(e.length).map(function(t){return t/(e.length-1)}),function(n){var o=p(r,n,function(e){return e},!0);if(-1===o)return"rgba(0,0,0,1)";var i=Math.min(e.length-1,o+1),a=r[i]-r[o];if(0===a)return"rgba("+e[i].join(",")+")";var s=(n-r[o])/a,l=e[o],u=e[i];return"rgba("+t(s,l,u).join(",")+")"}},e.prototype.updateLinearRules=function(){void 0!==this.gradient_rule&&this.removeRule(this.gradient_rule);var e=this.makeInterpFn(),t=this.makeColorFn(this.colors,e),n=this.value_key,r=this.null_color;this.gradient_rule=this.addRule(function(e){return!0!==e[d]},{shapes:[{type:"rectangle",fill:function(o){if(o[n]){var i=e(o[n]);return t(i)}return r}}],exclude_from_legend:!1,legend_config:{type:"gradient",range:this.getEffectiveValueRange(),colorFn:t}})},e}(),S=function(){function e(e){x.call(this,e),this.fill=e.fill||"rgba(0,128,0,1)",this.negative_fill=e.negative_fill||"rgba(255,0,0,1)"}return e.prototype=Object.create(x.prototype),e.prototype.updateLinearRules=function(){void 0!==this.bar_rule&&this.removeRule(this.bar_rule);var e=this.makeInterpFn(),t=this.value_key,n=this.fill,r=this.negative_fill,o=this.getYPosPercentagesFn(),i=this.getCellHeightPercentagesFn();this.bar_rule=this.addRule(function(e){return!0!==e[d]},{shapes:[{type:"rectangle",y:function(n){var r=e(n[t]);return o(r)},height:function(n){var r=e(n[t]);return i(r)},fill:function(e){return e[t]<0?r:n}}],exclude_from_legend:!1,legend_config:{type:"number",range:this.getEffectiveValueRange(),range_type:this.getValueRangeType(),positive_color:n,negative_color:r,interpFn:e}})},e.prototype.getYPosPercentagesFn=function(){var e;switch(this.getValueRangeType()){case this.rangeTypes.NON_POSITIVE:e=function(e){return"0%"};break;case this.rangeTypes.NON_NEGATIVE:e=function(e){return 100*(1-e)+"%"};break;case this.rangeTypes.ALL:e=function(e){return 50*Math.min(1-e,1)+"%"}}return e},e.prototype.getCellHeightPercentagesFn=function(){var e;switch(this.getValueRangeType()){case this.rangeTypes.NON_POSITIVE:e=function(e){return 100*-e+"%"};break;case this.rangeTypes.NON_NEGATIVE:e=function(e){return 100*e+"%"};break;case this.rangeTypes.ALL:e=function(e){return 50*Math.abs(e)+"%"}}return e},e}(),C=function(){function e(e){b.call(this,e);for(var t=e.value_key,n=e.fills||[],r=e.categories||[],o=a(n);n.length<r.length;)n.push(o());for(var i=this,s=0;s<r.length;s++)!function(e){var o={};o[t]={};for(var a=0;a<r.length;a++)o[t][r[a]]=0;o[t][r[e]]=1,i.addRule(function(e){return!0!==e[d]},{shapes:[{type:"rectangle",fill:n[e],width:"100%",height:function(n){for(var o=0,i=0;i<r.length;i++)o+=parseFloat(n[t][r[i]]);return 100*parseFloat(n[t][r[e]])/o+"%"},y:function(n){for(var o=0,i=0,a=0;a<r.length;a++){var s=parseFloat(n[t][r[a]]);a<e&&(i+=s),o+=s}return 100*i/o+"%"}}],exclude_from_legend:!1,legend_config:{type:"rule",target:o},legend_label:r[e]})}(s)}return e.prototype=Object.create(b.prototype),e}(),k=function(){function e(e){y.call(this,e),function(t){var n=e.rule_params;for(var r in n)if(n.hasOwnProperty(r)){var o=n[r];if("*"===r)t.addRule(null,null,s(n["*"],{legend_config:{type:"rule",target:{}}}));else for(var i in o)if(o.hasOwnProperty(i)){var a=i.split(","),l={};l[a[0]]=i;for(var u=t.addRule(r,"*"===a[0]?null:a[0],s(o[i],{legend_config:{type:"rule",target:l}})),c=1;c<a.length;c++)t.linkExistingRule(r,"*"===a[c]?null:a[c],u)}}}(this),this.addRule(d,!0,{shapes:f(e.na_z||1),legend_label:"Not sequenced",exclude_from_legend:!1,legend_config:{type:"rule",target:{na:!0}}})}return e.prototype=Object.create(y.prototype),e}(),A=function(){function e(e){this.shapes=e.shapes.map(function(e){return"rectangle"===e.type?new u.Rectangle(e):"triangle"===e.type?new u.Triangle(e):"ellipse"===e.type?new u.Ellipse(e):"line"===e.type?new u.Line(e):void 0}),this.legend_label=void 0===e.legend_label?"":e.legend_label,this.exclude_from_legend=e.exclude_from_legend,this.legend_config=e.legend_config}return e.prototype.getLegendConfig=function(){return this.legend_config},e.prototype.apply=function(e,t,n){for(var r=[],o=0,i=this.shapes.length;o<i;o++)r.push(this.shapes[o].getComputedParams(e,t,n));return r},e.prototype.isExcludedFromLegend=function(){return this.exclude_from_legend},e}();e.exports=function(e){return"categorical"===e.type?new w(e):"gradient"===e.type?new _(e):"bar"===e.type?new S(e):"stacked_bar"===e.type?new C(e):"gene"===e.type?new k(e):void 0}},function(e,t){e.exports={viridis:[[68.08602,1.24287,84.000825,1],[68.47005,2.449275,85.533885,1],[68.83572,3.729375,87.051645,1],[69.182775,5.08521,88.553595,1],[69.51147,6.518565,90.038715,1],[69.821295,8.031735,91.507515,1],[70.11276,9.62676,92.958465,1],[70.38561,11.262585,94.39182,1],[70.63959,12.83772,95.807325,1],[70.874955,14.36262,97.203705,1],[71.091705,15.846975,98.58096,1],[71.28933,17.29818,99.938835,1],[71.468085,18.721335,101.276565,1],[71.62797,20.121285,102.593895,1],[71.76873,21.5016,103.89057,1],[71.89062,22.86483,105.165825,1],[71.993385,24.213525,106.419405,1],[72.07728,25.54998,107.6508,1],[72.14205,26.875215,108.86001,1],[72.188205,28.191015,110.04627,1],[72.215235,29.4984,111.209325,1],[72.223395,30.798135,112.34892,1],[72.212685,32.09124,113.4648,1],[72.18336,33.378225,114.556455,1],[72.13542,34.6596,115.623885,1],[72.068865,35.93613,116.666835,1],[71.98395,37.20756,117.68505,1],[71.881185,38.474655,118.678275,1],[71.76006,39.73767,119.646255,1],[71.62134,40.996605,120.589245,1],[71.465025,42.251715,121.50699,1],[71.29137,43.502745,122.399235,1],[71.10063,44.74995,123.266235,1],[70.89306,45.993585,124.107735,1],[70.66917,47.23314,124.92399,1],[70.42947,48.46887,125.715255,1],[70.173705,49.700775,126.481275,1],[69.90264,50.928855,127.222305,1],[69.61653,52.1526,127.938855,1],[69.31614,53.372265,128.63067,1],[69.001725,54.587595,129.29826,1],[68.67354,55.79859,129.942135,1],[68.33184,57.004995,130.56204,1],[67.9779,58.20681,131.158995,1],[67.611975,59.40378,131.732745,1],[67.234065,60.595905,132.28431,1],[66.84519,61.78293,132.813435,1],[66.445605,62.96511,133.32114,1],[66.036075,64.141935,133.80768,1],[65.61711,65.31315,134.273565,1],[65.189475,66.479265,134.71956,1],[64.753425,67.63977,135.145665,1],[64.30947,68.794665,135.552645,1],[63.858375,69.94395,135.941265,1],[63.400395,71.087625,136.31178,1],[62.936805,72.225435,136.664955,1],[62.46786,73.357125,137.0013,1],[61.993815,74.48346,137.32158,1],[61.515435,75.603675,137.625795,1],[61.03323,76.718025,137.91522,1],[60.547455,77.82651,138.189855,1],[60.05913,78.929385,138.45072,1],[59.568765,80.02614,138.69807,1],[59.07687,81.11703,138.93267,1],[58.583445,82.202055,139.15503,1],[58.08951,83.28147,139.36566,1],[57.595065,84.355275,139.56507,1],[57.100875,85.42347,139.753515,1],[56.607195,86.486055,139.93176,1],[56.114535,87.543285,140.100315,1],[55.62315,88.59516,140.25969,1],[55.13355,89.641425,140.409885,1],[54.64599,90.682845,140.55192,1],[54.160725,91.719165,140.68605,1],[53.678265,92.750385,140.81253,1],[53.198865,93.77676,140.932125,1],[52.72278,94.79829,141.044835,1],[52.250265,95.81523,141.150915,1],[51.781065,96.82758,141.250875,1],[51.315945,97.83585,141.34497,1],[50.85465,98.839785,141.43371,1],[50.39718,99.83964,141.517095,1],[49.9443,100.835415,141.59538,1],[49.4955,101.827365,141.669075,1],[49.051035,102.815745,141.73818,1],[48.610905,103.800555,141.802695,1],[48.175365,104.78205,141.86313,1],[47.743905,105.76023,141.919485,1],[47.31678,106.73535,141.972015,1],[46.89399,107.707665,142.02072,1],[46.47528,108.67692,142.0656,1],[46.060395,109.643625,142.10691,1],[45.649845,110.60778,142.14465,1],[45.242865,111.569385,142.179075,1],[44.839455,112.52895,142.209675,1],[44.43987,113.48622,142.23696,1],[44.043345,114.441705,142.260675,1],[43.64988,115.39515,142.281075,1],[43.25973,116.34681,142.29765,1],[42.87213,117.29694,142.31091,1],[42.487335,118.24554,142.320345,1],[42.104835,119.192865,142.325955,1],[41.724375,120.138915,142.32774,1],[41.34621,121.08369,142.3257,1],[40.969575,122.0277,142.319325,1],[40.59447,122.970435,142.308615,1],[40.220895,123.91266,142.293315,1],[39.84885,124.85412,142.27368,1],[39.477825,125.794815,142.2492,1],[39.10782,126.735,142.21962,1],[38.73909,127.674675,142.184685,1],[38.37138,128.614095,142.14465,1],[38.004945,129.553005,142.09875,1],[37.639785,130.491915,142.047495,1],[37.2759,131.430315,141.989865,1],[36.913545,132.368715,141.92586,1],[36.552465,133.307115,141.855225,1],[36.193425,134.245515,141.777705,1],[35.83668,135.18366,141.693045,1],[35.482485,136.12206,141.60099,1],[35.13135,137.06046,141.50103,1],[34.78404,137.999115,141.393165,1],[34.44183,138.937515,141.277395,1],[34.104465,139.876425,141.152955,1],[33.77322,140.81508,141.01959,1],[33.44886,141.754245,140.877045,1],[33.132915,142.69341,140.72532,1],[32.825895,143.632575,140.563395,1],[32.52984,144.571995,140.39178,1],[32.245515,145.511415,140.209455,1],[31.97547,146.45109,140.01693,1],[31.720725,147.39051,139.813185,1],[31.483065,148.330185,139.598475,1],[31.26453,149.269605,139.372035,1],[31.066905,150.209025,139.133865,1],[30.89274,151.148445,138.883455,1],[30.744075,152.08761,138.620805,1],[30.62346,153.02652,138.34515,1],[30.53319,153.965175,138.057,1],[30.47556,154.90332,137.75559,1],[30.452865,155.840955,137.44041,1],[30.468165,156.778335,137.11146,1],[30.523245,157.71495,136.768485,1],[30.620655,158.651055,136.41123,1],[30.76269,159.58614,136.03944,1],[30.9519,160.52046,135.653115,1],[31.18956,161.454015,135.25149,1],[31.47822,162.386295,134.834565,1],[31.8189,163.317555,134.40234,1],[32.21313,164.247285,133.954305,1],[32.662185,165.175995,133.490205,1],[33.167085,166.10292,133.01004,1],[33.72834,167.02857,132.513555,1],[34.34646,167.95218,132.000495,1],[35.021445,168.87426,131.470605,1],[35.75355,169.794045,130.923885,1],[36.542265,170.712045,130.359825,1],[37.38708,171.62775,129.77868,1],[38.28774,172.540905,129.180195,1],[39.24297,173.451765,128.56386,1],[40.252005,174.360075,127.92993,1],[41.31408,175.26558,127.277895,1],[42.427665,176.16828,126.60801,1],[43.59174,177.06792,125.919765,1],[44.805285,177.9645,125.213415,1],[46.066515,178.85751,124.488195,1],[47.374665,179.747205,123.744615,1],[48.72795,180.63333,122.98242,1],[50.125605,181.515885,122.201355,1],[51.565845,182.39436,121.40142,1],[53.04765,183.268755,120.582615,1],[54.57,184.13907,119.74494,1],[56.13162,185.004795,118.88763,1],[57.731235,185.86644,118.011195,1],[59.367825,186.722985,117.115635,1],[61.04037,187.57494,116.20044,1],[62.74785,188.42205,115.26612,1],[64.489245,189.263805,114.31242,1],[66.263535,190.10046,113.339085,1],[68.069955,190.931505,112.346115,1],[69.907995,191.75694,111.333255,1],[71.776635,192.576765,110.30076,1],[73.674855,193.39047,109.24863,1],[75.602145,194.198055,108.176865,1],[77.55774,194.99952,107.085465,1],[79.540875,195.79461,105.97443,1],[81.551295,196.58307,104.84376,1],[83.58798,197.3649,103.6932,1],[85.650675,198.13959,102.522495,1],[87.73887,198.907395,101.332155,1],[89.8518,199.667805,100.12218,1],[91.988955,200.42082,98.89257,1],[94.14957,201.16644,97.64307,1],[96.333645,201.904155,96.374445,1],[98.540415,202.63422,95.08593,1],[100.76937,203.356125,93.778035,1],[103.020255,204.070125,92.45076,1],[105.292815,204.775455,91.103595,1],[107.58654,205.47237,89.73705,1],[109.900665,206.160615,88.35138,1],[112.234935,206.84019,86.946585,1],[114.58884,207.51084,85.52292,1],[116.96187,208.172565,84.080385,1],[119.353515,208.824855,82.61949,1],[121.76352,209.46822,81.139725,1],[124.19163,210.101895,79.641855,1],[126.636825,210.72588,78.126135,1],[129.099105,211.34043,76.59231,1],[131.57796,211.94529,75.041145,1],[134.07288,212.540205,73.472385,1],[136.583355,213.125175,71.88654,1],[139.10862,213.699945,70.28463,1],[141.64842,214.26477,68.666655,1],[144.20199,214.81965,67.033635,1],[146.768565,215.36433,65.385825,1],[149.34789,215.898555,63.723735,1],[151.938945,216.422835,62.048895,1],[154.541475,216.936915,60.36156,1],[157.154715,217.440795,58.66326,1],[159.777645,217.934475,56.955015,1],[162.41001,218.41821,55.2381,1],[165.050535,218.892,53.514555,1],[167.69871,219.355845,51.78591,1],[170.35377,219.809745,50.054715,1],[173.014695,220.25421,48.323265,1],[175.68072,220.68924,46.594875,1],[178.350825,221.114835,44.872605,1],[181.02399,221.531505,43.160535,1],[183.699705,221.93925,41.463765,1],[186.376695,222.33858,39.787395,1],[189.05394,222.729495,38.138055,1],[191.73042,223.112505,36.52314,1],[194.405115,223.48812,34.95132,1],[197.07726,223.85634,33.432795,1],[199.745325,224.217675,31.978275,1],[202.4088,224.57289,30.601275,1],[205.06641,224.92173,29.316075,1],[207.71688,225.265215,28.138485,1],[210.3597,225.6036,27.085335,1],[212.99385,225.937395,26.17473,1],[215.618055,226.26711,25.42401,1],[218.23155,226.593255,24.85026,1],[220.833315,226.91634,24.468015,1],[223.42284,227.236875,24.28875,1],[225.999105,227.55537,24.32037,1],[228.5616,227.87208,24.565425,1],[231.109305,228.188025,25.021875,1],[233.64171,228.503205,25.682835,1],[236.15703,228.81915,26.538105,1],[238.65552,229.13535,27.573405,1],[241.13718,229.452825,28.77369,1],[243.6015,229.771575,30.12264,1],[246.04797,230.092365,31.604955,1],[248.476335,230.41545,33.204825,1],[250.88634,230.741085,34.908735,1],[253.27824,231.070035,36.70368,1]],inferno:[[.37281,.11883,3.53583,1],[.578085,.32385,4.73535,1],[.841245,.573495,6.180945,1],[1.159485,.86496,7.881795,1],[1.53153,1.19646,9.83229,1],[1.95738,1.56468,11.94318,1],[2.438055,1.966815,14.061465,1],[2.974065,2.401335,16.1823,1],[3.568725,2.862375,18.32481,1],[4.223055,3.34968,20.47191,1],[4.940115,3.858915,22.635585,1],[5.723985,4.385745,24.818385,1],[6.577215,4.929405,27.01215,1],[7.50516,5.483265,29.228355,1],[8.513175,6.04401,31.466235,1],[9.60534,6.609855,33.71916,1],[10.774515,7.175445,35.990955,1],[11.963325,7.73262,38.29182,1],[13.16922,8.28087,40.60977,1],[14.394495,8.815095,42.94557,1],[15.6417,9.33045,45.29871,1],[16.914405,9.81852,47.67531,1],[18.214395,10.27497,50.07027,1],[19.542435,10.685775,52.478745,1],[20.90031,11.04864,54.898695,1],[22.289805,11.36178,57.327315,1],[23.71245,11.623665,59.76129,1],[25.16901,11.83251,62.19552,1],[26.660505,11.98704,64.62465,1],[28.18668,12.086745,67.04256,1],[29.74728,12.13137,69.441855,1],[31.34154,12.12168,71.81412,1],[32.967675,12.059715,74.15094,1],[34.62339,11.94828,76.44288,1],[36.30639,11.79171,78.681015,1],[38.013615,11.59434,80.856675,1],[39.74175,11.362545,82.96119,1],[41.485695,11.10627,84.985635,1],[43.241625,10.834695,86.92287,1],[45.005715,10.55751,88.768305,1],[46.774395,10.283895,90.517605,1],[48.543585,10.023795,92.168985,1],[50.310735,9.792,93.721425,1],[52.073295,9.59616,95.17569,1],[53.829225,9.44265,96.533565,1],[55.576995,9.336825,97.79811,1],[57.314565,9.283275,98.972895,1],[59.04219,9.283275,100.062,1],[60.759615,9.338355,101.070015,1],[62.466585,9.449025,102.001785,1],[64.1631,9.614775,102.86139,1],[65.84967,9.835605,103.653675,1],[67.52655,10.109985,104.382975,1],[69.193485,10.43511,105.05388,1],[70.85175,10.800015,105.66996,1],[72.501855,11.202915,106.23504,1],[74.144565,11.63922,106.752435,1],[75.78039,12.10485,107.225205,1],[77.40984,12.59598,107.65641,1],[79.033425,13.108785,108.048855,1],[80.65191,13.63995,108.40458,1],[82.26555,14.18667,108.726135,1],[83.874855,14.745885,109.015305,1],[85.480335,15.3153,109.27362,1],[87.0825,15.892875,109.503375,1],[88.681605,16.47708,109.705335,1],[90.27816,17.065875,109.88103,1],[91.87242,17.657985,110.031735,1],[93.464895,18.252645,110.15847,1],[95.05584,18.848325,110.262,1],[96.645255,19.444515,110.343345,1],[98.23314,20.040705,110.403525,1],[99.820515,20.636385,110.442795,1],[101.40687,21.230535,110.461665,1],[102.99297,21.8229,110.460645,1],[104.578815,22.41348,110.43999,1],[106.164405,23.001765,110.400465,1],[107.749995,23.587755,110.34207,1],[109.33584,24.17145,110.26506,1],[110.921685,24.752595,110.169945,1],[112.507785,25.33119,110.05647,1],[114.09414,25.907235,109.9254,1],[115.681005,26.48124,109.77699,1],[117.268125,27.052695,109.61073,1],[118.8555,27.62211,109.426875,1],[120.44364,28.189485,109.22517,1],[122.03229,28.75482,109.006125,1],[123.621195,29.31837,108.76974,1],[125.21061,29.880645,108.51576,1],[126.800535,30.441645,108.24444,1],[128.390715,31.001625,107.95578,1],[129.98115,31.561095,107.64978,1],[131.571585,32.1198,107.326185,1],[133.16253,32.67825,106.984995,1],[134.75322,33.236955,106.62621,1],[136.344165,33.79617,106.250085,1],[137.9346,34.355895,105.856365,1],[139.525035,34.916895,105.445305,1],[141.11496,35.47917,105.016395,1],[142.70412,36.04323,104.56989,1],[144.29277,36.609585,104.10579,1],[145.880655,37.178235,103.624095,1],[147.46752,37.749945,103.124805,1],[149.052855,38.32497,102.608175,1],[150.63717,38.903565,102.07395,1],[152.2197,39.48624,101.521875,1],[153.800445,40.073505,100.952205,1],[155.37915,40.66587,100.365195,1],[156.955815,41.263335,99.760845,1],[158.529675,41.86692,99.139155,1],[160.100985,42.476625,98.50038,1],[161.66949,43.09296,97.84452,1],[163.234425,43.71669,97.171575,1],[164.7963,44.34807,96.481545,1],[166.354095,44.987355,95.77443,1],[167.908065,45.63531,95.05074,1],[169.4577,46.292445,94.31073,1],[171.002745,46.959015,93.554145,1],[172.54269,47.635785,92.781495,1],[174.07728,48.322755,91.993035,1],[175.606515,49.020945,91.188765,1],[177.129885,49.730355,90.36894,1],[178.64688,50.452005,89.533815,1],[180.1575,51.18564,88.683135,1],[181.66098,51.93228,87.817665,1],[183.15732,52.69218,86.937405,1],[184.646265,53.46585,86.04312,1],[186.126795,54.253545,85.134555,1],[187.599165,55.05603,84.212475,1],[189.062865,55.87356,83.27688,1],[190.517385,56.70639,82.32828,1],[191.96247,57.55503,81.366675,1],[193.39761,58.419735,80.39283,1],[194.82255,59.30127,79.406745,1],[196.23678,60.199635,78.408675,1],[197.640045,61.115085,77.39913,1],[199.031835,62.048385,76.378365,1],[200.411895,62.99928,75.346635,1],[201.779715,63.96828,74.30445,1],[203.134785,64.95564,73.25232,1],[204.477105,65.96187,72.190245,1],[205.80591,66.98646,71.11899,1],[207.120945,68.03043,70.038555,1],[208.421955,69.09327,68.94945,1],[209.70843,70.175235,67.851675,1],[210.97986,71.276835,66.74625,1],[212.236245,72.397815,65.632665,1],[213.477075,73.538175,64.51194,1],[214.702095,74.697915,63.38382,1],[215.910795,75.877545,62.248815,1],[217.10292,77.0763,61.10718,1],[218.27796,78.29469,59.958915,1],[219.435915,79.53246,58.80453,1],[220.57653,80.78961,57.644025,1],[221.699295,82.065885,56.47791,1],[222.803955,83.36103,55.30593,1],[223.890255,84.6753,54.12834,1],[224.95794,86.008185,52.94514,1],[226.00701,87.35943,51.75684,1],[227.036955,88.729035,50.56293,1],[228.047775,90.116745,49.36392,1],[229.03896,91.522305,48.1593,1],[230.010765,92.94546,46.94958,1],[230.962425,94.3857,45.73425,1],[231.89445,95.84328,44.513565,1],[232.80633,97.31718,43.287525,1],[233.69781,98.807655,42.05562,1],[234.569145,100.314195,40.81785,1],[235.419825,101.836545,39.574215,1],[236.24985,103.374195,38.32446,1],[237.05922,104.927145,37.068585,1],[237.847935,106.494885,35.806335,1],[238.615485,108.076905,34.5372,1],[239.362125,109.673205,33.26169,1],[240.087855,111.283275,31.979295,1],[240.792675,112.90686,30.69027,1],[241.476075,114.543705,29.39436,1],[242.13831,116.1933,28.09182,1],[242.779125,117.85539,26.782905,1],[243.39903,119.52972,25.46787,1],[243.99726,121.21578,24.147225,1],[244.57407,122.91357,22.822245,1],[245.129715,124.62258,21.493695,1],[245.663685,126.34281,20.163615,1],[246.176235,128.073495,18.834045,1],[246.66711,129.81489,17.508045,1],[247.136565,131.56623,16.18944,1],[247.584345,133.327515,14.883585,1],[248.01045,135.09849,13.59762,1],[248.41488,136.8789,12.33996,1],[248.797635,138.66849,11.12259,1],[249.15846,140.46675,9.95775,1],[249.49761,142.273935,8.907405,1],[249.81483,144.089535,8.009295,1],[250.11012,145.913295,7.26954,1],[250.383225,147.74496,6.69375,1],[250.634655,149.58453,6.288555,1],[250.863645,151.431495,6.06135,1],[251.070705,153.28611,6.01953,1],[251.255325,155.14761,6.17151,1],[251.41776,157.01625,6.52596,1],[251.55801,158.891775,7.09257,1],[251.67582,160.773675,7.88154,1],[251.770935,162.66195,8.90358,1],[251.84361,164.5566,10.17093,1],[251.893845,166.457115,11.623155,1],[251.92113,168.36375,13.19625,1],[251.925975,170.27574,14.873895,1],[251.90787,172.193085,16.640535,1],[251.86707,174.115785,18.484695,1],[251.80332,176.04333,20.39745,1],[251.71662,177.97572,22.371405,1],[251.60697,179.9127,24.40197,1],[251.474625,181.854015,26.485065,1],[251.31933,183.79941,28.618395,1],[251.140575,185.748885,30.800175,1],[250.939125,187.702185,33.029385,1],[250.71498,189.65829,35.305515,1],[250.46814,191.61771,37.629075,1],[250.199115,193.579425,40.000065,1],[249.90816,195.543435,42.420015,1],[249.59553,197.508975,44.889435,1],[249.261735,199.47579,47.410365,1],[248.90754,201.44337,49.98459,1],[248.53269,203.41146,52.61466,1],[248.13744,205.379295,55.303635,1],[247.72434,207.34611,58.05279,1],[247.294665,209.310375,60.86493,1],[246.850455,211.271325,63.74286,1],[246.391965,213.228705,66.69117,1],[245.92047,215.18124,69.714705,1],[245.441835,217.12638,72.81423,1],[244.95963,219.062595,75.99255,1],[244.4736,220.98912,79.2591,1],[243.99267,222.902895,82.61337,1],[243.524235,224.800095,86.056125,1],[243.069825,226.68021,89.599095,1],[242.64423,228.53763,93.234885,1],[242.25459,230.369295,96.969105,1],[241.914165,232.170615,100.798695,1],[241.63647,233.936745,104.719575,1],[241.436295,235.66284,108.725115,1],[241.32996,237.344055,112.803585,1],[241.332765,238.975545,116.94096,1],[241.460265,240.55374,121.11735,1],[241.723935,242.07609,125.31363,1],[242.133975,243.541065,129.5043,1],[242.6937,244.949685,133.671765,1],[243.404895,246.30348,137.792055,1],[244.26348,247.605765,141.850125,1],[245.26206,248.86062,145.840875,1],[246.393495,250.07289,149.73753,1],[247.64631,251.24691,153.54927,1],[249.010305,252.387015,157.2738,1],[250.475535,253.497795,160.909335,1],[252.03231,254.58282,164.45562,1]]}},function(e,t,n){var r=n(0),o=function(){function e(e,t,n,o,i){var a=e.css("position");"absolute"!==a&&"relative"!==a&&console.log("WARNING: div passed to OncoprintTrackOptionsView must be absolute or relative positioned - layout problems will occur"),this.moveUpCallback=t,this.moveDownCallback=n,this.removeCallback=o,this.sortChangeCallback=i,this.$div=e,this.$ctr=r("<div></div>").css({position:"absolute","overflow-y":"hidden","overflow-x":"hidden"}).appendTo(this.$div),this.$buttons_ctr=r("<div></div>").css({position:"absolute"}).appendTo(this.$ctr),this.$dropdown_ctr=r("<div></div>").css({position:"absolute"}).appendTo(this.$div),this.img_size,this.rendering_suppressed=!1,this.track_options_$elts={},this.menu_shown={};var s=this;r(document).click(function(){r(s).trigger("oncoprint-track-options-view.click-out")}),this.interaction_disabled=!1}var t=function(e,t){if(!e.rendering_suppressed){r(e).off("oncoprint-track-options-view.click-out"),r(e).on("oncoprint-track-options-view.click-out",function(){for(var t in e.track_options_$elts)e.track_options_$elts.hasOwnProperty(t)&&i(e,t)}),e.$buttons_ctr.empty(),e.$dropdown_ctr.empty(),n(e,t.getVertScroll());for(var o=t.getTracks(),a=Number.POSITIVE_INFINITY,s=0;s<o.length;s++)a=Math.min(a,t.getTrackHeight(o[s]));e.img_size=Math.floor(.75*a);for(var s=0;s<o.length;s++)p(e,t,o[s])}},n=function(e,t){e.rendering_suppressed||(e.$buttons_ctr.css({top:-t}),e.$dropdown_ctr.css({top:-t}))},o=function(e,t){e.rendering_suppressed||(e.$div.css({width:e.getWidth(),height:t.getCellViewHeight()}),e.$ctr.css({width:e.getWidth(),height:t.getCellViewHeight()}))},i=function(e,t){e.menu_shown[t]=!1;var n=e.track_options_$elts[t];n.$dropdown.css({"z-index":1}),n.$dropdown.css({border:"1px solid rgba(125,125,125,0)"}),n.$img.css({border:"1px solid rgba(125,125,125,0)"}),n.$dropdown.fadeOut(100)},a=function(e,t){e.menu_shown[t]=!0;var n=e.track_options_$elts[t];n.$dropdown.css({"z-index":10}),n.$dropdown.css({border:"1px solid rgba(125,125,125,1)"}),n.$img.css({border:"1px solid rgba(125,125,125,1)"}),n.$dropdown.fadeIn(100)},s=function(e,t){t=t.toString();for(var n in e.track_options_$elts)if(e.track_options_$elts.hasOwnProperty(n)){if(n===t)continue;i(e,n)}},l=function(e,t,n,o){var i=r("<li>").text(e).css({"font-weight":t,"font-size":12,"border-bottom":"1px solid rgba(0,0,0,0.3)"});return n?i.css({color:"rgb(200, 200, 200)",cursor:"default"}):i.css({cursor:"pointer"}).click(o).hover(function(){r(this).css({"background-color":"rgb(200,200,200)"})},function(){r(this).css({"background-color":"rgba(255,255,255,0)"})}),i},u=function(){return r("<li>").css({"border-top":"1px solid black"})},c=function(e,t,n){var r="";t.isTrackSortDirectionChangeable(n)&&(r={1:'<i class="fa fa-signal" aria-hidden="true" title="Sorted ascending"></i>',"-1":'<i class="fa fa-signal" style="transform: scaleX(-1);" aria-hidden="true" title="Sorted descending"></i>',0:""}[t.getTrackSortDirection(n)]),e.html(r)},p=function(e,t,n){var o,p,f,d,h=t.getZoomedTrackTops(n);o=r("<div>").appendTo(e.$buttons_ctr).css({position:"absolute",left:"0px",top:h+"px","white-space":"nowrap"}),p=r("<img/>").appendTo(o).attr({src:"images/menudots.svg",width:e.img_size,height:e.img_size}).css({float:"left",cursor:"pointer",border:"1px solid rgba(125,125,125,0)"}).addClass("oncoprintjs__track_options__toggle_btn_img"),f=r("<span>").appendTo(o).css({position:"absolute",top:Math.floor(e.img_size/4)+"px"}),d=r("<ul>").appendTo(e.$dropdown_ctr).css({position:"absolute",width:120,display:"none","list-style-type":"none","padding-left":"6","padding-right":"6",float:"right","background-color":"rgb(255,255,255)",left:"0px",top:h+e.img_size+"px"}).addClass("oncoprintjs__track_options__dropdown"),e.track_options_$elts[n]={$div:o,$img:p,$dropdown:d},c(f,t,n),p.hover(function(t){e.menu_shown[n]||r(this).css({border:"1px solid rgba(125,125,125,0.3)"})},function(t){e.menu_shown[n]||r(this).css({border:"1px solid rgba(125,125,125,0)"})}),p.click(function(t){t.stopPropagation(),d.is(":visible")?(p.addClass("oncoprintjs__track_options__open"),i(e,n)):(p.removeClass("oncoprintjs__track_options__open"),a(e,n)),s(e,n)});var m=!t.isTrackInClusteredGroup(n),g=m;if(d.append(l("Move up","normal",!m,function(t){t.stopPropagation(),e.moveUpCallback(n)})),d.append(l("Move down","normal",!m,function(t){t.stopPropagation(),e.moveDownCallback(n)})),t.isTrackRemovable(n)&&d.append(l("Remove track","normal",!1,function(t){t.stopPropagation(),e.removeCallback(n)})),t.isTrackSortDirectionChangeable(n)){d.append(u());var v,y,b;v=l("Sort a-Z",1===t.getTrackSortDirection(n)?"bold":"normal",!g,function(r){r.stopPropagation(),v.css("font-weight","bold"),y.css("font-weight","normal"),b.css("font-weight","normal"),e.sortChangeCallback(n,1),c(f,t,n)}),y=l("Sort Z-a",-1===t.getTrackSortDirection(n)?"bold":"normal",!g,function(r){r.stopPropagation(),v.css("font-weight","normal"),y.css("font-weight","bold"),b.css("font-weight","normal"),e.sortChangeCallback(n,-1),c(f,t,n)}),b=l("Don't sort track",0===t.getTrackSortDirection(n)?"bold":"normal",!g,function(r){r.stopPropagation(),v.css("font-weight","normal"),y.css("font-weight","normal"),b.css("font-weight","bold"),e.sortChangeCallback(n,0),c(f,t,n)}),d.append(v),d.append(y),d.append(b)}};return e.prototype.enableInteraction=function(){this.interaction_disabled=!1},e.prototype.disableInteraction=function(){this.interaction_disabled=!0},e.prototype.suppressRendering=function(){this.rendering_suppressed=!0},e.prototype.releaseRendering=function(e){this.rendering_suppressed=!1,t(this,e),o(this,e),n(this,e.getVertScroll())},e.prototype.setScroll=function(e){this.setVertScroll(e)},e.prototype.setHorzScroll=function(e){},e.prototype.setVertScroll=function(e){n(this,e.getVertScroll())},e.prototype.setZoom=function(e){this.setVertZoom(e)},e.prototype.setVertZoom=function(e){t(this,e),o(this,e)},e.prototype.setViewport=function(e){t(this,e),o(this,e),n(this,e.getVertScroll())},e.prototype.getWidth=function(){return 18+this.img_size},e.prototype.addTracks=function(e){t(this,e),o(this,e)},e.prototype.moveTrack=function(e){t(this,e),o(this,e)},e.prototype.setTrackGroupOrder=function(e){t(this,e)},e.prototype.setSortConfig=function(e){t(this,e)},e.prototype.removeTrack=function(e,n){delete this.track_options_$elts[n],t(this,e),o(this,e)},e}();e.exports=o},function(e,t,n){var r=n(2),o=n(0),i=function(e){for(var t=!0;"html"!==e.tagName.toLowerCase();){if("none"===o(e).css("display")){t=!1;break}e=e.parentNode}return t},a=function(){function e(e,t,n){this.$div=e,this.$svg=o(r.svg(200,200)).appendTo(this.$div),this.base_width=t,this.base_height=n,this.rendering_suppressed=!1,this.width=e.width(),this.rule_set_label_config={weight:"bold",size:12,font:"Arial"},this.rule_label_config={weight:"normal",size:12,font:"Arial"},this.padding_after_rule_set_label=10,this.padding_between_rules=20,this.padding_between_rule_set_rows=10}var t=function(e,t,a,s){if(!e.rendering_suppressed&&(void 0===a&&(a=e.$svg[0]),i(a))){o(a).empty();var l=r.defs();a.appendChild(l);var u=r.group(0,0);a.appendChild(u);for(var c=t.getRuleSets(),p=0,f=0;f<c.length;f++)if(!c[f].exclude_from_legend||s){var d=r.group(0,p);u.appendChild(d),function(){if(void 0!==c[f].legend_label&&c[f].legend_label.length>0){var e=r.text(c[f].legend_label,0,0,12,"Arial","bold");d.appendChild(e),r.wrapText(e,200)}}();var h=200+e.padding_after_rule_set_label,m=0,g=t.getActiveRules(c[f].rule_set_id);g.sort(function(e,t){var n=e.rule.legend_label,r=t.rule.legend_label;return n&&r?n.localeCompare(r):n||r?n?r?void 0:1:-1:0});for(var v=0;v<g.length;v++){var y=g[v].rule;if(!y.exclude_from_legend){var b=n(y,e,t,a,l);b.setAttribute("transform","translate("+h+","+m+")"),d.appendChild(b),h+b.getBBox().width>e.width&&(h=200+e.padding_after_rule_set_label,m=d.getBBox().height+e.padding_between_rule_set_rows,b.setAttribute("transform","translate("+h+","+m+")")),h+=b.getBBox().width,h+=e.padding_between_rules}}p+=d.getBBox().height,p+=3*e.padding_between_rule_set_rows}var w=u.getBBox();e.$svg[0].setAttribute("width",w.width),e.$svg[0].setAttribute("height",w.height)}},n=function(e,t,n,o,i){var a=r.group(0,0),s=e.getLegendConfig();if("rule"===s.type){for(var l=e.apply(s.target,n.getCellWidth(!0),t.base_height),u=0;u<l.length;u++)a.appendChild(r.fromShape(l[u],0,0));if(void 0!==e.legend_label){var c=r.text(e.legend_label,n.getCellWidth(!0)+5,t.base_height/2,12,"Arial","normal");o.appendChild(c);var p=c.getBBox().height;c.setAttribute("y",parseFloat(c.getAttribute("y"))-p/2),o.removeChild(c),a.appendChild(c)}}else if("number"===s.type){var f=2,d=s.range.map(function(e){var t=Math.pow(10,f);return Math.round(e*t)/t});a.appendChild(r.text(d[0],0,0,12,"Arial","normal")),a.appendChild(r.text(d[1],50,0,12,"Arial","normal"));var h=[],m=r.linearGradient();if("NON_POSITIVE"===s.range_type)m.appendChild(r.stop(100,s.negative_color));else if("NON_NEGATIVE"===s.range_type)m.appendChild(r.stop(100,s.positive_color));else if("ALL"===s.range_type){var g=Math.abs(d[0])/(Math.abs(d[0])+d[1])*100;m.appendChild(r.stop(g,s.negative_color)),m.appendChild(r.stop(g,s.positive_color))}i.appendChild(m),h.push([5,20]);for(var u=0;u<100;u++){var v=u/100,y=s.interpFn((1-v)*s.range[0]+v*s.range[1]),p=20*y;h.push([5+40*u/100,20-p])}h.push([45,20]),a.appendChild(r.path(h,null,null,m))}else if("gradient"===s.type){var f=2,d=s.range.map(function(e){var t=Math.pow(10,f);return Math.round(e*t)/t}),b=r.gradient(s.colorFn),w=b.getAttribute("id");i.appendChild(b),a.appendChild(r.text(d[0],0,0,12,"Arial","normal")),a.appendChild(r.text(d[1],120,0,12,"Arial","normal")),a.appendChild(r.rect(30,0,60,20,"url(#"+w+")"))}return a};return e.prototype.setWidth=function(e,n){this.width=e,t(this,n)},e.prototype.removeTrack=function(e){t(this,e)},e.prototype.addTracks=function(e){t(this,e)},e.prototype.setTrackData=function(e){t(this,e)},e.prototype.shareRuleSet=function(e){t(this,e)},e.prototype.setRuleSet=function(e){t(this,e)},e.prototype.setTrackGroupLegendOrder=function(e){t(this,e)},e.prototype.hideTrackLegends=function(e){t(this,e)},e.prototype.showTrackLegends=function(e){t(this,e)},e.prototype.suppressRendering=function(){this.rendering_suppressed=!0},e.prototype.releaseRendering=function(e){this.rendering_suppressed=!1,t(this,e)},e.prototype.toSVGGroup=function(e,n,o){var i=r.group(n||0,o||0);return this.$svg.append(i),t(this,e,i,!0),i.parentNode.removeChild(i),i},e}();e.exports=a},function(e,t,n){var r=n(0),o=function(){function e(e,t){t=t||{},this.$container=e,this.$div=r("<div></div>").appendTo(e).css({"background-color":"rgba(255,255,255,1)",position:"absolute",display:"none",border:"1px solid black","max-width":300,"min-width":150}),t.noselect&&this.$div.addClass("noselect"),this.hide_timeout_id=void 0,this.show_timeout_id=void 0,this.center=!1,this.shown=!1;var n=this;this.$div.on("mousemove",function(e){e.stopPropagation(),i(n)}),this.$div.on("mouseleave",function(e){e.stopPropagation(),n.hide()})}e.prototype.show=function(e,n,r,a,s){if(i(this),void 0===e||this.shown)t(this,n,r,a,s);else{var l=this;o(this),this.show_timeout_id=setTimeout(function(){t(l,n,r,a,s)},e)}};var t=function(e,t,n,r,i){o(e),e.show_timeout_id=void 0,e.$div.empty(),e.$div.append(r),i?e.$div.stop().fadeIn("fast"):e.$div.show();var a=e.$container.offset(),s=t-a.left-(e.center?e.$div.width()/2:0),l=n-a.top-e.$div.height();e.$div.css({top:l,left:s,"z-index":9999}),e.shown=!0},n=function(e,t){i(e),e.hide_timeout_id=void 0,t?e.$div.fadeOut():e.$div.hide(),e.shown=!1},o=function(e){clearTimeout(e.show_timeout_id),e.show_timeout_id=void 0},i=function(e){clearTimeout(e.hide_timeout_id),e.hide_timeout_id=void 0};return e.prototype.showIfNotAlreadyGoingTo=function(e,t,n,r){void 0===this.show_timeout_id&&this.show(e,t,n,r)},e.prototype.hideIfNotAlreadyGoingTo=function(e){void 0===this.hide_timeout_id&&this.hide(e)},e.prototype.hide=function(e){if(o(this),this.shown)if(void 0!==e){var t=this;i(this),this.hide_timeout_id=setTimeout(function(){n(t)},e)}else n(this)},e.prototype.fadeIn=function(e,t,n,r){this.show(e,t,n,r,!0)},e}();e.exports=o},function(e,t,n){var r=n(2),o=n(0),i=function(){function e(e){this.$div=e,this.$ctr=o("<div></div>").css({position:"absolute","overflow-y":"hidden","overflow-x":"hidden"}).appendTo(this.$div),this.$text_ctr=o("<div></div>").css({position:"absolute"}).appendTo(this.$ctr),this.base_font_size=12,this.font_family="Arial",this.font_weight="bold",this.width=0,this.rendering_suppressed=!1}var t=function(e,t){if(!e.rendering_suppressed){e.$text_ctr.empty();var r=t.getTracks();e.minimum_track_height=Number.POSITIVE_INFINITY;for(var i=0;i<r.length;i++)e.minimum_track_height=Math.min(e.minimum_track_height,t.getTrackHeight(r[i]));e.width=32;var a=t.getLabelTops();n(e,t.getVertScroll());for(var s=e.getFontSize(),i=0;i<r.length;i++){var l=o("<span>").css({position:"absolute","font-family":e.font_family,"font-weight":e.font_weight,"font-size":s}).addClass("noselect");l.text(t.getTrackInfo(r[i])),l.appendTo(e.$text_ctr);var u=a[r[i]]+(t.getCellHeight(r[i])-l.outerHeight())/2;l.css({top:u+"px"}),e.width=Math.max(e.width,l[0].clientWidth)}}},n=function(e,t){e.rendering_suppressed||e.$text_ctr.css({top:-t})},i=function(e,t){e.rendering_suppressed||(e.$div.css({width:e.getWidth(),height:t.getCellViewHeight()}),e.$ctr.css({width:e.getWidth(),height:t.getCellViewHeight()}))};return e.prototype.getFontSize=function(){return Math.max(Math.min(this.base_font_size,this.minimum_track_height),7)},e.prototype.getWidth=function(){return this.width+10},e.prototype.addTracks=function(e){t(this,e),i(this,e)},e.prototype.moveTrack=function(e){t(this,e),i(this,e)},e.prototype.setTrackGroupOrder=function(e){t(this,e),i(this,e)},e.prototype.removeTrack=function(e){t(this,e),i(this,e)},e.prototype.setTrackInfo=function(e){t(this,e),i(this,e)},e.prototype.setScroll=function(e){this.setVertScroll(e)},e.prototype.setHorzScroll=function(e){},e.prototype.setVertScroll=function(e){n(this,e.getVertScroll())},e.prototype.setZoom=function(e){this.setVertZoom(e)},e.prototype.setViewport=function(e){t(this,e),i(this,e),n(this,e.getVertScroll())},e.prototype.setVertZoom=function(e){t(this,e),i(this,e)},e.prototype.suppressRendering=function(){this.rendering_suppressed=!0},e.prototype.releaseRendering=function(e){this.rendering_suppressed=!1,t(this,e),i(this,e),n(this,e.getVertScroll())},e.prototype.toSVGGroup=function(e,t,n){for(var o=r.group(t||0,n||0),i=e.getCellTops(),a=e.getTracks(),s=0;s<a.length;s++){var l=a[s],u=i[l]+e.getCellHeight(l)/2,c=e.getTrackInfo(l),p=r.text(c,0,u,this.font_size,this.font_family,this.font_weight,"bottom");p.setAttribute("dy","0.35em"),o.appendChild(p)}return o},e}();e.exports=i},function(e,t,n){var r=n(6),o=n(35),i=n(0),a=function(e){try{var t=e.$canvas[0],n=t.getContext("experimental-webgl",{alpha:!1,antialias:!0});return n.clearColor(1,1,1,1),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),n.viewportWidth=t.width,n.viewportHeight=t.height,n.viewport(0,0,n.viewportWidth,n.viewportHeight),n.enable(n.DEPTH_TEST),n.enable(n.BLEND),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA),n.depthMask(!1),n}catch(e){return null}},s=function(e,t,n){var r=e.ctx.createProgram();if(e.ctx.attachShader(r,t),e.ctx.attachShader(r,n),e.ctx.linkProgram(r),!e.ctx.getProgramParameter(r,e.ctx.LINK_STATUS)){var o=e.ctx.getProgramInfoLog(r);throw e.ctx.deleteProgram(r),"Unable to link shader program: "+o}return r},l=function(e,t,n){var r=e.ctx.createShader(e.ctx[n]);if(e.ctx.shaderSource(r,t),e.ctx.compileShader(r),!e.ctx.getShaderParameter(r,e.ctx.COMPILE_STATUS)){var o=e.ctx.getShaderInfoLog(r);throw e.ctx.deleteShader(r),"Unable to compile shader: "+o}return r},u=function(e){e.ctx=a(e),function(e){var t=r.mat4.create();r.mat4.lookAt(t,[0,0,1],[0,0,0],[0,1,0]),e.mvMatrix=t;var n=r.mat4.create();r.mat4.ortho(n,0,e.ctx.viewportWidth,e.ctx.viewportHeight,0,-5,1e3),e.pMatrix=n}(e)},c=function(e,t){var n=["precision highp float;","attribute float aPosVertex;","attribute float aColVertex;","attribute float aVertexOncoprintColumn;","uniform float columnWidth;","uniform float zoomX;","uniform float zoomY;","uniform mat4 uMVMatrix;","uniform mat4 uPMatrix;","uniform float offsetY;","uniform float positionBitPackBase;","uniform float texSize;","varying float texCoord;","vec3 unpackVec3(float packedVec3, float base) {","\tfloat pos0 = floor(packedVec3 / (base*base));","\tfloat pos0Contr = pos0*base*base;","\tfloat pos1 = floor((packedVec3 - pos0Contr)/base);","\tfloat pos1Contr = pos1*base;","\tfloat pos2 = packedVec3 - pos0Contr - pos1Contr;","\treturn vec3(pos0, pos1, pos2);","}","void main(void) {","\tgl_Position = vec4(unpackVec3(aPosVertex, positionBitPackBase), 1.0);","\tgl_Position[0] += aVertexOncoprintColumn*columnWidth;","\tgl_Position[1] += offsetY;","\tgl_Position *= vec4(zoomX, zoomY, 1.0, 1.0);","\tgl_Position = uPMatrix * uMVMatrix * gl_Position;","\ttexCoord = (aColVertex + 0.5) / texSize;","}"].join("\n"),r=["precision mediump float;","varying float texCoord;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vec2(texCoord, 0.5));","}"].join("\n"),o=l(e,n,"VERTEX_SHADER"),i=l(e,r,"FRAGMENT_SHADER"),a=s(e,o,i);a.vertexPositionAttribute=e.ctx.getAttribLocation(a,"aPosVertex"),e.ctx.enableVertexAttribArray(a.vertexPositionAttribute),a.vertexColorAttribute=e.ctx.getAttribLocation(a,"aColVertex"),e.ctx.enableVertexAttribArray(a.vertexColorAttribute),a.vertexOncoprintColumnAttribute=e.ctx.getAttribLocation(a,"aVertexOncoprintColumn"),e.ctx.enableVertexAttribArray(a.vertexOncoprintColumnAttribute),a.samplerUniform=e.ctx.getUniformLocation(a,"uSampler"),a.pMatrixUniform=e.ctx.getUniformLocation(a,"uPMatrix"),a.mvMatrixUniform=e.ctx.getUniformLocation(a,"uMVMatrix"),a.columnWidthUniform=e.ctx.getUniformLocation(a,"columnWidth"),a.zoomXUniform=e.ctx.getUniformLocation(a,"zoomX"),a.zoomYUniform=e.ctx.getUniformLocation(a,"zoomY"),a.offsetYUniform=e.ctx.getUniformLocation(a,"offsetY"),a.positionBitPackBaseUniform=e.ctx.getUniformLocation(a,"positionBitPackBase"),a.texSizeUniform=e.ctx.getUniformLocation(a,"texSize"),e.shader_program=a},p=function(e,t,n){return Math.max(t,Math.min(n,e))},f=function(){function e(e,t,n,s,l,f,d,h,m,g,v,y,b){this.$div=e,this.$canvas=t,this.$overlay_canvas=n;var w=this;this.layout_numbers={window_width:4+f+4+20,window_height:24+d+4+20,vertical_zoom_area_width:20,horizontal_zoom_area_height:20,padding:4,window_bar_height:20,canvas_left:4,canvas_top:24},this.$div.css({"min-width":this.layout_numbers.window_width,"min-height":this.layout_numbers.window_height,outline:"solid 1px black","background-color":"#ffffff"}),this.$window_bar=i("<div>").css({position:"absolute","min-width":this.layout_numbers.window_width,"min-height":this.layout_numbers.window_bar_height,"background-color":"#cccccc"}).appendTo(this.$div),this.$close_btn=i("<div>").css({position:"absolute",top:3,left:3,"min-width":this.layout_numbers.window_bar_height-6,"min-height":this.layout_numbers.window_bar_height-6,cursor:"pointer"}).appendTo(this.$div),i("<span>").addClass("icon fa fa-times-circle").css("font-size",this.layout_numbers.window_bar_height-6+"px").appendTo(this.$close_btn),this.$close_btn.click(b||function(){}),this.$canvas[0].width=f,this.$canvas[0].height=d,this.$canvas.css({top:this.layout_numbers.canvas_top,left:this.layout_numbers.canvas_left}),this.$overlay_canvas[0].width=f,this.$overlay_canvas[0].height=f,this.$overlay_canvas.css({top:this.layout_numbers.canvas_top,left:this.layout_numbers.canvas_left,outline:"solid 1px #444444"}),this.horizontal_zoom=new o(this.$div,{btn_size:this.layout_numbers.horizontal_zoom_area_height-4,horizontal:!0,width:f,init_val:s.getHorzZoom(),left:4,top:this.layout_numbers.canvas_top+d+4,onChange:function(e){g(e)}}),this.vertical_zoom=new o(this.$div,{btn_size:this.layout_numbers.vertical_zoom_area_width-4,vertical:!0,height:d,init_val:s.getVertZoom(),left:this.layout_numbers.canvas_left+f+4,top:this.layout_numbers.window_bar_height+4,onChange:function(e){v(e)}}),function(){var t=w.layout_numbers.horizontal_zoom_area_height-4,n=w.layout_numbers.vertical_zoom_area_width-4,r=i("<div>").css({position:"absolute","min-height":t,"min-width":n,outline:"solid 1px black",left:w.layout_numbers.canvas_left+f+4,top:w.layout_numbers.canvas_top+d+4,"background-size":n-4+"px "+(t-4)+"px","background-position":"2px 2px",cursor:"pointer"}).addClass("oncoprint-zoomtofit-btn").appendTo(e);r.hover(function(){i(this).css({"background-color":"#cccccc"})},function(){i(this).css({"background-color":"#ffffff"})}),y=y||function(){},r.click(y)}(),u(this),c(this),this.overlay_ctx=n[0].getContext("2d"),this.img=new Image,this.current_rect={top:0,left:0,width:0,height:0,col:0,num_cols:0};var w=this;this.img.onload=function(){w.ctx.drawImage(img,0,0)};var x=function(e,t){return e>=w.current_rect.left+5&&e<=w.current_rect.left+w.current_rect.width-5&&t>=w.current_rect.top+5&&t<=w.current_rect.top+w.current_rect.height-5},_=function(e,t){return e>=w.current_rect.left-5&&e<=w.current_rect.left+w.current_rect.width+5&&t>=w.current_rect.top-5&&t<=w.current_rect.top+w.current_rect.height+5},S=function(e,t){return!E(e,t)&&!T(e,t)&&!M(e,t)&&!O(e,t)&&_(e,t)&&Math.abs(e-(w.current_rect.left+w.current_rect.width))<5},C=function(e,t){return!E(e,t)&&!T(e,t)&&!M(e,t)&&!O(e,t)&&_(e,t)&&Math.abs(e-w.current_rect.left)<5},k=function(e,t){return!E(e,t)&&!T(e,t)&&!M(e,t)&&!O(e,t)&&_(e,t)&&Math.abs(t-w.current_rect.top)<5},A=function(e,t){return!E(e,t)&&!T(e,t)&&!M(e,t)&&!O(e,t)&&_(e,t)&&Math.abs(t-(w.current_rect.top+w.current_rect.height))<5},E=function(e,t){return Math.abs(t-w.current_rect.top)<5&&Math.abs(e-w.current_rect.left)<5},M=function(e,t){return Math.abs(t-(w.current_rect.top+w.current_rect.height))<5&&Math.abs(e-w.current_rect.left)<5},T=function(e,t){return Math.abs(t-w.current_rect.top)<5&&Math.abs(e-(w.current_rect.left+w.current_rect.width))<5},O=function(e,t){return Math.abs(t-(w.current_rect.top+w.current_rect.height))<5&&Math.abs(e-(w.current_rect.left+w.current_rect.width))<5};this.resize_hover=!1;var I=function(e,t){void 0===e?w.resize_hover=!1:S(e,t)?w.resize_hover="r":C(e,t)?w.resize_hover="l":k(e,t)?w.resize_hover="t":A(e,t)?w.resize_hover="b":E(e,t)?w.resize_hover="tl":O(e,t)?w.resize_hover="br":M(e,t)?w.resize_hover="bl":T(e,t)?w.resize_hover="tr":w.resize_hover=!1},P=function(t,n){var r;r=void 0===t?"auto":x(t,n)?"move":S(t,n)||C(t,n)?"ew-resize":k(t,n)||A(t,n)?"ns-resize":E(t,n)||O(t,n)?"nwse-resize":M(t,n)||T(t,n)?"nesw-resize":"auto",e.css("cursor",r)},j=function(e,t,n){var r=parseInt(e.$canvas[0].style.top,10),o=parseInt(e.$canvas[0].style.left,10),i=parseInt(e.$canvas[0].width,10),a=parseInt(e.$canvas[0].height,10),s=t-o,l=n-r;return{mouse_x:s,mouse_y:l,outside:s<0||s>=i||l<0||l>=a}},D=!1,N=!1,R=-1,F=-1,L=-1,z=-1,B=-1,q=-1;i(document).on("mousedown",function(e){var t=w.$div.offset(),n=e.pageX-t.left,r=e.pageY-t.top,o=j(w,n,r);if(!o.outside){var i=o.mouse_x,a=o.mouse_y;D=!1,N=!1,q=s.getOncoprintHeight()/parseInt(w.$canvas[0].height,10),x(i,a)?N="move":S(i,a)?N="resize_r":C(i,a)?N="resize_l":k(i,a)?N="resize_t":A(i,a)?N="resize_b":T(i,a)?N="resize_tr":O(i,a)?N="resize_br":E(i,a)?N="resize_tl":M(i,a)&&(N="resize_bl"),!1!==N&&(D=!0,L=i,z=a,R=Math.floor(s.getHorzScroll()/(s.getCellWidth()+s.getCellPadding())),F=s.getVertScroll(),B=s.getVertZoom(),drag_start_rect=w.current_rect)}}),i(document).on("mousemove",function(e){var t=w.$div.offset(),n=e.pageX-t.left,o=e.pageY-t.top,i=j(w,n,o),u=i.mouse_x,c=i.mouse_y,f=r(w,s),d=s.getCellWidth(!0)*f.x;if(D){e.preventDefault();var m=Math.floor(u/d)-Math.floor(L/d),g=c-z;if("move"===N){var v=g*q;h((R+m)*(s.getCellWidth()+s.getCellPadding()),F+v)}else{var y,f=r(w,s),b=s.getIdOrder().length,x=Math.ceil(l.getWidth()/(s.getCellWidth(!0)+s.getCellPadding(!0,!0))),_=s.getOncoprintHeight(!0)*f.y,S=s.getCellViewHeight()*f.y,C=drag_start_rect.col+drag_start_rect.num_cols,k=drag_start_rect.top+drag_start_rect.height;"resize_r"===N?(m=p(m,x-drag_start_rect.num_cols,b-drag_start_rect.num_cols),m=Math.min(m,b-C),y={top:drag_start_rect.top,col:drag_start_rect.col,num_cols:drag_start_rect.num_cols+m,height:drag_start_rect.height}):"resize_l"===N?(m=p(m,drag_start_rect.num_cols-b,drag_start_rect.num_cols-x),m=Math.max(m,-drag_start_rect.col),y={top:drag_start_rect.top,col:drag_start_rect.col+m,num_cols:drag_start_rect.num_cols-m,height:drag_start_rect.height}):"resize_t"===N?(g=p(g,drag_start_rect.height-_,drag_start_rect.height-S),g=Math.max(g,-drag_start_rect.top),y={top:drag_start_rect.top+g,col:drag_start_rect.col,num_cols:drag_start_rect.num_cols,height:drag_start_rect.height-g}):"resize_b"===N?(g=p(g,S-drag_start_rect.height,_-drag_start_rect.height),g=Math.min(g,_-k),y={top:drag_start_rect.top,col:drag_start_rect.col,num_cols:drag_start_rect.num_cols,height:drag_start_rect.height+g}):"resize_tr"===N?(m=p(m,x-drag_start_rect.num_cols,b-drag_start_rect.num_cols),m=Math.min(m,b-C),g=p(g,drag_start_rect.height-_,drag_start_rect.height-S),g=Math.max(g,-drag_start_rect.top),y={top:drag_start_rect.top+g,col:drag_start_rect.col,num_cols:drag_start_rect.num_cols+m,height:drag_start_rect.height-g}):"resize_tl"===N?(m=p(m,drag_start_rect.num_cols-b,drag_start_rect.num_cols-x),m=Math.max(m,-drag_start_rect.col),g=p(g,drag_start_rect.height-_,drag_start_rect.height-S),g=Math.max(g,-drag_start_rect.top),y={top:drag_start_rect.top+g,col:drag_start_rect.col+m,num_cols:drag_start_rect.num_cols-m,height:drag_start_rect.height-g}):"resize_br"===N?(g=p(g,S-drag_start_rect.height,_-drag_start_rect.height),g=Math.min(g,_-k),m=p(m,x-drag_start_rect.num_cols,b-drag_start_rect.num_cols),m=Math.min(m,b-C),y={top:drag_start_rect.top,col:drag_start_rect.col,num_cols:drag_start_rect.num_cols+m,height:drag_start_rect.height+g}):"resize_bl"===N&&(g=p(g,S-drag_start_rect.height,_-drag_start_rect.height),g=Math.min(g,_-k),m=p(m,drag_start_rect.num_cols-b,drag_start_rect.num_cols-x),m=Math.max(m,-drag_start_rect.col),y={top:drag_start_rect.top,col:drag_start_rect.col+m,num_cols:drag_start_rect.num_cols-m,height:drag_start_rect.height+g});var d=s.getCellWidth(!0)*f.x;y.left=y.col*d,y.width=y.num_cols*d,a(w,null,null,y)}}else i.outside?(P(),I()):(P(u,c),I(u,c)),a(w,s,l)});var V=function(){D&&(["resize_t","resize_b","resize_l","resize_r","resize_tl","resize_tr","resize_bl","resize_br"].indexOf(N)>-1&&m({col:w.current_rect.col,scroll_y_proportion:w.current_rect.top/parseInt(w.$canvas[0].height,10),num_cols:w.current_rect.num_cols,zoom_y:drag_start_rect.height/w.current_rect.height*B}),D=!1,N=!1)};i(document).on("mouseup",function(e){var t=w.$div.offset(),n=e.pageX-t.left,r=e.pageY-t.top;V();var o=j(w,n,r);if(o.outside)P(),I();else{var i=o.mouse_x,u=o.mouse_y;P(i,u),I(i,u)}a(w,s,l)}),function(){var e,t,n,r,o=function(o){o.preventDefault();var i=o.pageX-e,a=o.pageY-t;w.setWindowPosition(n+i,r+a)};w.$window_bar.hover(function(){i(this).css({cursor:"move"})},function(){i(this).css({cursor:"auto"})}),w.$window_bar.on("mousedown",function(a){e=a.pageX,t=a.pageY,n=parseInt(w.$div.css("left"),10),r=parseInt(w.$div.css("top"),10),i(document).on("mousemove",o)}),i(document).on("mouseup click",function(){i(document).off("mousemove",o)})}()}var t=function(e,t,n){var r=e.ctx.createBuffer(),o=t.vertex_data[n].pos_array;e.ctx.bindBuffer(e.ctx.ARRAY_BUFFER,r),e.ctx.bufferData(e.ctx.ARRAY_BUFFER,new Float32Array(o),e.ctx.STATIC_DRAW),r.itemSize=1,r.numItems=o.length/r.itemSize;var i=e.ctx.createBuffer(),a=t.vertex_data[n].col_array;e.ctx.bindBuffer(e.ctx.ARRAY_BUFFER,i),e.ctx.bufferData(e.ctx.ARRAY_BUFFER,new Float32Array(a),e.ctx.STATIC_DRAW),i.itemSize=1,i.numItems=a.length/i.itemSize;var s=e.ctx.createTexture();e.ctx.bindTexture(e.ctx.TEXTURE_2D,s);for(var l=t.vertex_data[n].col_bank,u=Math.pow(2,Math.ceil(Math.log2(l.length/4)));l.length<4*u;)l.push(0);e.ctx.texImage2D(e.ctx.TEXTURE_2D,0,e.ctx.RGBA,u,1,0,e.ctx.RGBA,e.ctx.UNSIGNED_BYTE,new Uint8Array(l)),e.ctx.texParameteri(e.ctx.TEXTURE_2D,e.ctx.TEXTURE_MIN_FILTER,e.ctx.NEAREST),e.ctx.texParameteri(e.ctx.TEXTURE_2D,e.ctx.TEXTURE_MAG_FILTER,e.ctx.NEAREST);var c={texture:s,size:u},p=e.ctx.createBuffer(),f=t.vertex_column_array[n];return e.ctx.bindBuffer(e.ctx.ARRAY_BUFFER,p),e.ctx.bufferData(e.ctx.ARRAY_BUFFER,new Float32Array(f),e.ctx.STATIC_DRAW),p.itemSize=1,p.numItems=f.length/p.itemSize,{position:r,color:i,color_tex:c,column:p}},n=function(e,n,o){if(!e.rendering_suppressed){var i=r(e,n);e.ctx.clearColor(1,1,1,1),e.ctx.clear(e.ctx.COLOR_BUFFER_BIT|e.ctx.DEPTH_BUFFER_BIT);for(var a=n.getTracks(),s=0;s<a.length;s++){var l=a[s],u=n.getCellTops(l,!0),c=t(e,o,l);0!==c.position.numItems&&(e.ctx.useProgram(e.shader_program),e.ctx.bindBuffer(e.ctx.ARRAY_BUFFER,c.position),e.ctx.vertexAttribPointer(e.shader_program.vertexPositionAttribute,c.position.itemSize,e.ctx.FLOAT,!1,0,0),e.ctx.bindBuffer(e.ctx.ARRAY_BUFFER,c.color),e.ctx.vertexAttribPointer(e.shader_program.vertexColorAttribute,c.color.itemSize,e.ctx.FLOAT,!1,0,0),e.ctx.bindBuffer(e.ctx.ARRAY_BUFFER,c.column),e.ctx.vertexAttribPointer(e.shader_program.vertexOncoprintColumnAttribute,c.column.itemSize,e.ctx.FLOAT,!1,0,0),e.ctx.activeTexture(e.ctx.TEXTURE0),e.ctx.bindTexture(e.ctx.TEXTURE_2D,c.color_tex.texture),e.ctx.uniform1i(e.shader_program.samplerUniform,0),e.ctx.uniform1f(e.shader_program.texSizeUniform,c.color_tex.size),e.ctx.uniformMatrix4fv(e.shader_program.pMatrixUniform,!1,e.pMatrix),e.ctx.uniformMatrix4fv(e.shader_program.mvMatrixUniform,!1,e.mvMatrix),e.ctx.uniform1f(e.shader_program.columnWidthUniform,n.getCellWidth(!0)),e.ctx.uniform1f(e.shader_program.zoomXUniform,i.x),e.ctx.uniform1f(e.shader_program.zoomYUniform,i.y),e.ctx.uniform1f(e.shader_program.offsetYUniform,u),e.ctx.uniform1f(e.shader_program.positionBitPackBaseUniform,o.position_bit_pack_base),e.ctx.drawArrays(e.ctx.TRIANGLES,0,c.position.numItems))}}},r=function(e,t){var n=parseInt(e.$canvas[0].width,10)/t.getOncoprintWidthNoColumnPadding(!0),r=parseInt(e.$canvas[0].height,10)/t.getOncoprintHeight(!0);return n=Math.max(0,Math.min(1,n)),r=Math.max(0,Math.min(1,r)),{x:n,y:r}},a=function(e,t,n,o){if(!e.rendering_suppressed){var i,a,s,l,u,c;if(o)i=o.left,a=o.width,s=o.top,l=o.height,u=o.col,c=o.num_cols;else{var p=t.getCellWidth(!0),f=t.getCellPadding(!0),d=n.getViewportOncoprintSpace(t),h=r(e,t);u=Math.floor(d.left/(p+f)),c=Math.min(t.getIdOrder().length-u,Math.floor(d.right/(p+f))-Math.floor(d.left/(p+f))),i=u*p*h.x,a=c*p*h.x,s=d.top*h.y,l=(d.bottom-d.top)*h.y}var m=e.overlay_ctx,g=e.$overlay_canvas[0],v=parseInt(g.width,10),y=parseInt(g.height,10);m.fillStyle="rgba(0,0,0,0)",m.clearRect(0,0,v,y),m.fillStyle="rgba(255,255,255,0.4)",m.fillRect(i,s,a,l);var b="t"===e.resize_hover||"tr"===e.resize_hover||"tl"===e.resize_hover,w="r"===e.resize_hover||"tr"===e.resize_hover||"br"===e.resize_hover,x="b"===e.resize_hover||"br"===e.resize_hover||"bl"===e.resize_hover,_="l"===e.resize_hover||"tl"===e.resize_hover||"bl"===e.resize_hover;m.beginPath(),m.moveTo(i,s),m.strokeStyle=b?"rgba(255,0,0,1)":"rgba(0,0,0,0.75)",m.lineWidth=b?2:1,m.lineTo(i+a,s),m.stroke(),m.beginPath(),m.moveTo(i+a,s),m.strokeStyle=w?"rgba(255,0,0,1)":"rgba(0,0,0,0.75)",m.lineWidth=w?2:1,m.lineTo(i+a,s+l),m.stroke(),m.beginPath(),m.moveTo(i+a,s+l),m.strokeStyle=x?"rgba(255,0,0,1)":"rgba(0,0,0,0.75)",m.lineWidth=x?2:1,m.lineTo(i,s+l),m.stroke(),m.beginPath(),m.moveTo(i,s+l),m.strokeStyle=_?"rgba(255,0,0,1)":"rgba(0,0,0,0.75)",m.lineWidth=_?2:1,m.lineTo(i,s),m.stroke(),e.current_rect={top:s,left:i,width:a,height:l,col:u,num_cols:c}}},s=function(e,t,r){e.rendering_suppressed||(n(e,t,r),a(e,t,r))};return e.prototype.moveTrack=function(e,t){s(this,e,t)},e.prototype.addTracks=function(e,t){s(this,e,t)},e.prototype.removeTrack=function(e,t){s(this,e,t)},e.prototype.setHorzZoom=function(e,t){a(this,e,t),this.horizontal_zoom.setSliderValue(e.getHorzZoom())},e.prototype.setVertZoom=function(e,t){a(this,e,t),this.vertical_zoom.setSliderValue(e.getVertZoom())},e.prototype.setZoom=function(e,t){a(this,e,t),this.horizontal_zoom.setSliderValue(e.getHorzZoom()),this.vertical_zoom.setSliderValue(e.getVertZoom())},e.prototype.setScroll=function(e,t){a(this,e,t)},e.prototype.setHorzScroll=function(e,t){a(this,e,t)},e.prototype.setVertScroll=function(e,t){a(this,e,t)},e.prototype.setViewport=function(e,t){a(this,e,t),this.horizontal_zoom.setSliderValue(e.getHorzZoom()),this.vertical_zoom.setSliderValue(e.getVertZoom())},e.prototype.sort=function(e,t){s(this,e,t)},e.prototype.setTrackData=function(e,t){s(this,e,t)},e.prototype.shareRuleSet=function(e,t){s(this,e,t)},e.prototype.setRuleSet=function(e,t){s(this,e,t)},e.prototype.setIdOrder=function(e,t){s(this,e,t)},e.prototype.suppressRendering=function(){this.rendering_suppressed=!0},e.prototype.releaseRendering=function(e,t){this.rendering_suppressed=!1,s(this,e,t)},e.prototype.hideIds=function(e,t){s(this,e,t)},e.prototype.setWindowPosition=function(e,t){this.$div.css({top:t,left:e})},e.prototype.setWidth=function(e,t,n){this.$canvas[0].width=e,this.$overlay_canvas[0].width=e,u(this),c(this),this.overlay_ctx=this.$overlay_canvas[0].getContext("2d"),s(this,t,n)},e}();e.exports=f},function(e,t,n){var r=n(0),o=function(){function e(e,n){this.$div=r("<div>").css({position:"absolute",top:n.top||0,left:n.left||0}).appendTo(e),n=n||{},n.btn_size=n.btn_size||13,this.onChange=n.onChange||function(){},o(this,n),this.value=n.init_val||.5,this.slider_bar_size=(this.orientation===t?n.height:n.width)-2*n.btn_size,s(this)}var t="v",n=function(e){return Math.max(Math.min(e,1),0)},o=function(e,n){var o=e.$div,i=Math.round(.7*n.btn_size),a=Math.round((n.btn_size-i)/2),s=r("<div>").css({position:"absolute","background-color":"#ffffff",outline:"solid 1px black"}).appendTo(o),l=r("<div>").css({position:"absolute","background-color":"#ffffff",border:"solid 1px black","border-radius":"3px",cursor:"pointer"}).appendTo(o),u=r("<div>").css({position:"absolute","min-height":n.btn_size,"min-width":n.btn_size,"background-color":"#ffffff",border:"solid 1px black","border-radius":"3px",cursor:"pointer"}).appendTo(o);r("<span>").addClass("icon fa fa-plus").css({position:"absolute",top:a,left:a,"min-width":i,"min-height":i}).appendTo(u);var c=r("<div>").css({position:"absolute","min-height":n.btn_size,"min-width":n.btn_size,"background-color":"#ffffff",border:"solid 1px black","border-radius":"3px",cursor:"pointer"}).appendTo(o);r("<span>").addClass("icon fa fa-minus").css({position:"absolute",top:a,left:a,"min-width":i,"min-height":i}).appendTo(c),n.vertical?(s.css({"min-height":n.height-2*n.btn_size,"min-width":Math.round(n.btn_size/5)}),l.css({"min-height":Math.round(n.btn_size/2),"min-width":n.btn_size}),u.css({top:0,left:0}),c.css({top:n.height-n.btn_size,left:0}),s.css({top:n.btn_size,left:.4*n.btn_size}),l.css({left:0}),e.orientation=t):(s.css({"min-height":Math.round(n.btn_size/5),"min-width":n.width-2*n.btn_size}),l.css({"min-height":n.btn_size,"min-width":Math.round(n.btn_size/2)}),u.css({top:0,left:n.width-n.btn_size}),c.css({top:0,left:0}),s.css({top:.4*n.btn_size,left:n.btn_size}),l.css({top:0}),e.orientation="h"),u.click(function(){e.value/=.7,n.onChange(e.value)}),c.click(function(){e.value*=.7,n.onChange(e.value)}),[l,u,c].map(function(e){e.hover(function(){r(this).css({"background-color":"#cccccc"})},function(){r(this).css({"background-color":"#ffffff"})})}),e.$slider=l,e.$plus_btn=u,e.$minus_btn=c,function(){var n,o,i,a=function(r){r.stopPropagation(),r.preventDefault();var i;i=e.orientation===t?n-r.pageY:r.pageX-n;var a=i/e.slider_bar_size;e.setSliderValue(o+a)},s=function(){i&&o!==e.value&&e.onChange(e.value),i=!1};e.$slider.on("mousedown",function(s){n=e.orientation===t?s.pageY:s.pageX,o=e.value,i=!0,r(document).on("mousemove",a)}),r(document).on("mouseup click",function(){r(document).off("mousemove",a),s()})}()},i=function(e,n){var r=e.$slider,o=a(e);e.orientation===t?r.css("top",o.bottom*(1-n)+o.top*n):"h"===e.orientation&&r.css("left",o.left*(1-n)+o.right*n)},a=function(e){return e.orientation===t?{bottom:parseInt(e.$minus_btn.css("top"),10)-parseInt(e.$slider.css("min-height"),10),top:parseInt(e.$plus_btn.css("top"),10)+parseInt(e.$plus_btn.css("min-height"),10)}:{left:parseInt(e.$minus_btn.css("left"),10)+parseInt(e.$minus_btn.css("min-width"),10),right:parseInt(e.$plus_btn.css("left"),10)-parseInt(e.$slider.css("min-width"),10)}},s=function(e){i(e,e.value)};return e.prototype.setSliderValue=function(e,t){this.value=n(e),s(this)},e}();e.exports=o}])}).call(t,n(84))},function(e,t,n){"use strict";function r(e,t,n,r){var l=d(e,t),u=m(e,t);u&&n.suppressRendering(),l&&n.keepSorted(!1),i(e,t,n),b(e,t,n),_(e,t,n),S(e,t,n),C(e,t,n),A(e,t,n,r),o(e,t,n),w(e,t,n),s(e,t,n),x(e,t,n,r),a(e,t,n),l&&n.keepSorted(!0),u&&n.releaseRendering()}function o(e,t,n){var r=N.default.sortBy(N.default.uniq((t.heatmapTracks||[]).map(function(e){return e.trackGroupIndex}))),o=N.default.sortBy(N.default.uniq(e.heatmapTracks.map(function(e){return e.trackGroupIndex})));N.default.xor(o,r).length&&n.setTrackGroupSortPriority([j.CLINICAL_TRACK_GROUP_INDEX].concat(o).concat(j.GENETIC_TRACK_GROUP_INDEX))}function i(e,t,n){e.suppressRendering&&!t.suppressRendering&&n.suppressRendering()}function a(e,t,n){!e.suppressRendering&&t.suppressRendering&&n.releaseRendering()}function s(e,t,n){e.horzZoomToFitIds!==t.horzZoomToFitIds&&n.updateHorzZoomToFitIds(e.horzZoomToFitIds||[])}function l(e,t){var n=N.default.keyBy(t,function(e){return e.key}),r=0,o=0,i=0,a=!0,s=!1,l=void 0;try{for(var u,c=e[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var p=u.value,f=n[p.key];f?(o+=1,f.data!==p.data&&(i+=1)):r+=1}}catch(e){s=!0,l=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw l}}return r+(t.length-o)+i}function u(e,t){return e.length!==t.length||l(e,t)>0}function c(e,t){return!!u(e.geneticTracks||[],t.geneticTracks||[])||(M(e)!==M(t)||T(e)!==T(t))}function p(e,t){if(u(e.geneticTracks||[],t.geneticTracks||[]))return!0}function f(e,t){if(u(e.geneticTracks||[],t.geneticTracks||[]))return!0}function d(e,t){return c(e,t)||p(e,t)||f(e,t)}function h(e){return(e.geneticTracks||[]).concat(e.clinicalTracks||[]).concat(e.heatmapTracks||[])}function m(e,t){return!e.suppressRendering&&(k(e,t)||l(h(e),h(t))>1)}function g(e){return e.sortConfig&&e.sortConfig.order}function v(e){return e.profile_data}function y(e){var t={},n=g(e);return n?t={type:"order",order:n}:e.sortConfig&&void 0!==e.sortConfig.clusterHeatmapTrackGroupIndex&&(t={type:"cluster",track_group_index:e.sortConfig.clusterHeatmapTrackGroupIndex,clusterValueFn:v}),t}function b(e,t,n){var r=y(t),o=y(e);("order"===r.type&&"order"===o.type&&r.order!==o.order||!N.default.isEqual(r,o))&&n.setSortConfig(o)}function w(e,t,n){e.hiddenIds!==t.hiddenIds&&n.hideIds(e.hiddenIds||[],!0)}function x(e,t,n,r){var o=r(),i=e.clinicalTracks.map(function(e){return o[e.key]});e.showClinicalTrackLegends&&!t.showClinicalTrackLegends?n.showTrackLegends(i):!e.showClinicalTrackLegends&&t.showClinicalTrackLegends&&n.hideTrackLegends(i)}function _(e,t,n){e.showWhitespaceBetweenColumns!==t.showWhitespaceBetweenColumns&&n.setCellPaddingOn(!!e.showWhitespaceBetweenColumns)}function S(e,t,n){e.showMinimap!==t.showMinimap&&n.setMinimapVisible(!!e.showMinimap)}function C(e,t,n){e.onMinimapClose&&e.onMinimapClose!==t.onMinimapClose&&n.onMinimapClose(e.onMinimapClose)}function k(e,t){return(0,R.getGeneticTrackRuleSetParams)(e.distinguishMutationType,e.distinguishDrivers)!==(0,R.getGeneticTrackRuleSetParams)(t.distinguishMutationType,t.distinguishDrivers)}function A(e,t,n,r){var o={genetic:void 0,heatmap:void 0},i=r();t.geneticTracks&&t.geneticTracks.length&&!k(e,t)&&(o.genetic=i[t.geneticTracks[0].key]),t.heatmapTracks&&t.heatmapTracks.length&&(o.heatmap=i[t.heatmapTracks[0].key]);var a=N.default.keyBy(t.geneticTracks||[],function(e){return e.key}),s=!0,l=!1,u=void 0;try{for(var c,p=e.geneticTracks[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){var f=c.value;O(f,a[f.key],r,n,e,t,o),delete a[f.key]}}catch(e){l=!0,u=e}finally{try{!s&&p.return&&p.return()}finally{if(l)throw u}}var d=!0,h=!1,m=void 0;try{for(var g,v=(t.geneticTracks||[])[Symbol.iterator]();!(d=(g=v.next()).done);d=!0){var y=g.value;a.hasOwnProperty(y.key)&&O(void 0,a[y.key],r,n,e,t,o)}}catch(e){h=!0,m=e}finally{try{!d&&v.return&&v.return()}finally{if(h)throw m}}var b=N.default.keyBy(t.clinicalTracks||[],function(e){return e.key}),w=!0,x=!1,_=void 0;try{for(var S,C=e.clinicalTracks[Symbol.iterator]();!(w=(S=C.next()).done);w=!0){var A=S.value;I(A,b[A.key],r,n,e),delete b[A.key]}}catch(e){x=!0,_=e}finally{try{!w&&C.return&&C.return()}finally{if(x)throw _}}var E=!0,M=!1,T=void 0;try{for(var j,D=(t.clinicalTracks||[])[Symbol.iterator]();!(E=(j=D.next()).done);E=!0){var R=j.value;b.hasOwnProperty(R.key)&&I(void 0,b[R.key],r,n,e)}}catch(e){M=!0,T=e}finally{try{!E&&D.return&&D.return()}finally{if(M)throw T}}var F=N.default.keyBy(t.heatmapTracks||[],function(e){return e.key}),L=!0,z=!1,B=void 0;try{for(var q,V=e.heatmapTracks[Symbol.iterator]();!(L=(q=V.next()).done);L=!0){var U=q.value;P(U,F[U.key],r,n,e,o),delete F[U.key]}}catch(e){z=!0,B=e}finally{try{!L&&V.return&&V.return()}finally{if(z)throw B}}var H=!0,G=!1,W=void 0;try{for(var Z,Y=(t.heatmapTracks||[])[Symbol.iterator]();!(H=(Z=Y.next()).done);H=!0){var X=Z.value;F.hasOwnProperty(X.key)&&P(void 0,F[X.key],r,n,e,o)}}catch(e){G=!0,W=e}finally{try{!H&&Y.return&&Y.return()}finally{if(G)throw W}}}function E(e,t,n,r){if(!e&&t){var o=n[t.key];return void 0!==o&&(r.removeTrack(o),delete n[t.key]),!0}return!1}function M(e){return e.distinguishMutationType&&e.sortConfig&&e.sortConfig.sortByMutationType}function T(e){return e.distinguishDrivers&&e.sortConfig&&e.sortConfig.sortByDrivers}function O(e,t,n,r,o,i,a){var s=n();if(!E(e,t,s,r))if(e&&!t){var l={rule_set_params:(0,R.getGeneticTrackRuleSetParams)(o.distinguishMutationType,o.distinguishDrivers),label:e.label,target_group:j.GENETIC_TRACK_GROUP_INDEX,sortCmpFn:(0,F.getGeneticTrackSortComparator)(M(o),T(o)),description:e.oql,data_id_key:"uid",data:e.data,tooltipFn:(0,L.makeGeneticTrackTooltip)(!0),track_info:e.info},u=r.addTracks([l])[0];s[e.key]=u,void 0!==a.genetic&&r.shareRuleSet(a.genetic,u),a.genetic=u}else if(e&&t){var c=s[e.key],p=M(o),f=T(o);p===M(i)&&f===T(i)||r.setTrackSortComparator(c,(0,F.getGeneticTrackSortComparator)(M(o),T(o))),e.data!==t.data&&r.setTrackData(c,e.data,"uid"),e.info!==t.info&&r.setTrackInfo(c,e.info),k(o,i)&&(void 0!==a.genetic?r.shareRuleSet(a.genetic,c):r.setRuleSet(c,(0,R.getGeneticTrackRuleSetParams)(o.distinguishMutationType,o.distinguishDrivers))),a.genetic=c}}function I(e,t,n,r,o){var i=n();if(!E(e,t,i,r))if(e&&!t){var a=(0,R.getClinicalTrackRuleSetParams)(e);a.legend_label=e.label,a.exclude_from_legend=!o.showClinicalTrackLegends;var s={rule_set_params:a,data:e.data,data_id_key:"uid",label:e.label,description:(e.label||"").trim()===(e.description||"").trim()?void 0:e.description,removable:!0,removeCallback:function(){delete n()[e.key],o.onDeleteClinicalTrack&&o.onDeleteClinicalTrack(e.key)},sort_direction_changeable:!0,tooltipFn:(0,L.makeClinicalTrackTooltip)(e,!0),sortCmpFn:(0,F.getClinicalTrackSortComparator)(e),init_sort_direction:0,target_group:j.CLINICAL_TRACK_GROUP_INDEX,onSortDirectionChange:o.onTrackSortDirectionChange};i[e.key]=r.addTracks([s])[0]}else if(e&&t){var l=i[e.key];e.data!==t.data&&r.setTrackData(l,e.data,"uid"),r.setTrackTooltipFn(l,(0,L.makeClinicalTrackTooltip)(e,!0))}}function P(e,t,n,r,o,i){var a=n();if(!E(e,t,a,r))if(e&&!t){var s={rule_set_params:(0,R.getHeatmapTrackRuleSetParams)(),data:e.data,data_id_key:"uid",has_column_spacing:!1,track_padding:0,label:e.label,target_group:e.trackGroupIndex,removable:!0,removeCallback:function(){delete n()[e.key],e.onRemove()},sort_direction_changeable:!0,sortCmpFn:F.heatmapTrackSortComparator,init_sort_direction:0,description:e.label+" data from "+e.molecularProfileId,tooltipFn:(0,L.makeHeatmapTrackTooltip)(e.molecularAlterationType,!0),onSortDirectionChange:o.onTrackSortDirectionChange},l=r.addTracks([s])[0];a[e.key]=l,void 0!==i.heatmap&&r.shareRuleSet(i.heatmap,l),i.heatmap=l}else if(e&&t){var u=a[e.key];e.data!==t.data&&r.setTrackData(u,e.data,"uid"),r.setTrackTooltipFn(u,(0,L.makeHeatmapTrackTooltip)(e.molecularAlterationType,!0))}}Object.defineProperty(t,"__esModule",{value:!0}),t.transition=r,t.transitionTrackGroupSortPriority=o,t.numTracksWhoseDataChanged=l,t.heatmapClusterValueFn=v,t.transitionSortConfig=b;var j=n(909),D=n(3),N=function(e){return e&&e.__esModule?e:{default:e}}(D),R=n(910),F=n(1027),L=n(1028)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.genetic_rule_set_different_colors_recurrence=t.genetic_rule_set_different_colors_no_recurrence=t.genetic_rule_set_same_color_for_all_recurrence=t.genetic_rule_set_same_color_for_all_no_recurrence=t.PROT_COLOR_DOWN=t.PROT_COLOR_UP=t.MUT_COLOR_PROMOTER=t.MUT_COLOR_FUSION=t.MUT_COLOR_TRUNC_PASSENGER=t.MUT_COLOR_TRUNC=t.MUT_COLOR_INFRAME_PASSENGER=t.MUT_COLOR_INFRAME=t.MUT_COLOR_MISSENSE_PASSENGER=t.MUT_COLOR_MISSENSE=void 0;var r=n(84),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(r),i=t.MUT_COLOR_MISSENSE="#008000",a=t.MUT_COLOR_MISSENSE_PASSENGER="#53D400",s=t.MUT_COLOR_INFRAME="#993404",l=t.MUT_COLOR_INFRAME_PASSENGER="#fe9929",u=t.MUT_COLOR_TRUNC="#000000",c=t.MUT_COLOR_TRUNC_PASSENGER="#708090",p=t.MUT_COLOR_FUSION="#8B00C9",f=t.MUT_COLOR_PROMOTER="#FFA942",d=t.PROT_COLOR_UP="#ff3df8",h=t.PROT_COLOR_DOWN="#00E1FF",m={"*":{shapes:[{type:"rectangle",fill:"rgba(190, 190, 190, 1)",z:1}],legend_label:"No alterations"},disp_cna:{amp:{shapes:[{type:"rectangle",fill:"rgba(255,0,0,1)",x:"0%",y:"0%",width:"100%",height:"100%",z:2}],legend_label:"Amplification"},gain:{shapes:[{type:"rectangle",fill:"rgba(255,182,193,1)",x:"0%",y:"0%",width:"100%",height:"100%",z:2}],legend_label:"Gain"},homdel:{shapes:[{type:"rectangle",fill:"rgba(0,0,255,1)",x:"0%",y:"0%",width:"100%",height:"100%",z:2}],legend_label:"Deep Deletion"},hetloss:{shapes:[{type:"rectangle",fill:"rgba(143, 216, 216,1)",x:"0%",y:"0%",width:"100%",height:"100%",z:2}],legend_label:"Shallow Deletion"}},disp_mrna:{up:{shapes:[{type:"rectangle",fill:"rgba(0, 0, 0, 0)",stroke:"rgba(255, 153, 153, 1)","stroke-width":"2",x:"0%",y:"0%",width:"100%",height:"100%",z:3}],legend_label:"mRNA Upregulation"},down:{shapes:[{type:"rectangle",fill:"rgba(0, 0, 0, 0)",stroke:"rgba(102, 153, 204, 1)","stroke-width":"2",x:"0%",y:"0%",width:"100%",height:"100%",z:3}],legend_label:"mRNA Downregulation"}},disp_prot:{up:{shapes:[{type:"rectangle",fill:d,x:"0%",y:"0%",width:"100%",height:"20%",z:4}],legend_label:"Protein Upregulation"},down:{shapes:[{type:"rectangle",fill:h,x:"0%",y:"80%",width:"100%",height:"20%",z:4}],legend_label:"Protein Downregulation"}},disp_fusion:{true:{shapes:[{type:"rectangle",fill:p,x:"0%",y:"20%",width:"100%",height:"60%",z:5}],legend_label:"Fusion"}}};t.genetic_rule_set_same_color_for_all_no_recurrence={type:"gene",legend_label:"Genetic Alteration",rule_params:o.extend({},m,{disp_mut:{"trunc,inframe,missense,promoter,trunc_rec,inframe_rec,missense_rec,promoter_rec":{shapes:[{type:"rectangle",fill:i,x:"0%",y:"33.33%",width:"100%",height:"33.33%",z:6}],legend_label:"Mutation"}}})},t.genetic_rule_set_same_color_for_all_recurrence={type:"gene",legend_label:"Genetic Alteration",rule_params:o.extend({},m,{disp_mut:{"missense_rec,inframe_rec,trunc_rec":{shapes:[{type:"rectangle",fill:i,x:"0%",y:"33.33%",width:"100%",height:"33.33%",z:6}],legend_label:"Mutation (putative driver)"},"missense,inframe,trunc,promoter,promoter_rec":{shapes:[{type:"rectangle",fill:a,x:"0%",y:"33.33%",width:"100%",height:"33.33%",z:6}],legend_label:"Mutation (unknown significance)"}}})},t.genetic_rule_set_different_colors_no_recurrence={type:"gene",legend_label:"Genetic Alteration",rule_params:o.extend({},m,{disp_mut:{"promoter,promoter_rec":{shapes:[{type:"rectangle",fill:f,x:"0%",y:"33.33%",width:"100%",height:"33.33%",z:6}],legend_label:"Promoter Mutation"},"trunc,trunc_rec":{shapes:[{type:"rectangle",fill:u,x:"0%",y:"33.33%",width:"100%",height:"33.33%",z:6}],legend_label:"Truncating Mutation"},"inframe,inframe_rec":{shapes:[{type:"rectangle",fill:s,x:"0%",y:"33.33%",width:"100%",height:"33.33%",z:6}],legend_label:"Inframe Mutation"},"missense,missense_rec":{shapes:[{type:"rectangle",fill:i,x:"0%",y:"33.33%",width:"100%",height:"33.33%",z:6}],legend_label:"Missense Mutation"}}})},t.genetic_rule_set_different_colors_recurrence={type:"gene",legend_label:"Genetic Alteration",rule_params:o.extend({},m,{disp_mut:{"promoter,promoter_rec":{shapes:[{type:"rectangle",fill:f,x:"0%",y:"33.33%",width:"100%",height:"33.33%",z:6}],legend_label:"Promoter Mutation"},trunc_rec:{shapes:[{type:"rectangle",fill:u,x:"0%",y:"33.33%",width:"100%",height:"33.33%",z:6}],legend_label:"Truncating Mutation (putative driver)"},trunc:{shapes:[{type:"rectangle",fill:c,x:"0%",y:"33.33%",width:"100%",height:"33.33%",z:6}],legend_label:"Truncating Mutation (unknown significance)"},inframe_rec:{shapes:[{type:"rectangle",fill:s,x:"0%",y:"33.33%",width:"100%",height:"33.33%",z:6}],legend_label:"Inframe Mutation (putative driver)"},inframe:{shapes:[{type:"rectangle",fill:l,x:"0%",y:"33.33%",width:"100%",height:"33.33%",z:6}],legend_label:"Inframe Mutation (unknown significance)"},missense_rec:{shapes:[{type:"rectangle",fill:i,x:"0%",y:"33.33%",width:"100%",height:"33.33%",z:6}],legend_label:"Missense Mutation (putative driver)"},missense:{shapes:[{type:"rectangle",fill:a,x:"0%",y:"33.33%",width:"100%",height:"33.33%",z:6}],legend_label:"Missense Mutation (unknown significance)"}}})}},function(e,t,n){"use strict";function r(e){return"missense"===e||"inframe"===e||"fusion"===e?e:"trunc"}function o(e,t){var n=Object.keys(e).map(function(t){return{key:t,value:e[t]}});return n.length>0?(n.sort(function(e,n){var r=t[e.key]-t[n.key];return r<0?-1:r>0?1:e.value<n.value?1:e.value>n.value?-1:0}),n[0].key):void 0}function i(e,t,n){e.gene=t,e.data=n;var i=!1,a={},s={},l={},u={},c=!0,p=!1,f=void 0;try{for(var d,m=n[Symbol.iterator]();!(c=(d=m.next()).done);c=!0){var g=d.value;switch(g.molecularProfileAlterationType){case"COPY_NUMBER_ALTERATION":var v=y[g.value];v&&(a[v]=a[v]||0,a[v]+=1);break;case"MRNA_EXPRESSION":if(g.alterationSubType){var S=g.alterationSubType;s[S]=s[S]||0,s[S]+=1}break;case"PROTEIN_LEVEL":if(g.alterationSubType){var C=g.alterationSubType;l[C]=l[C]||0,l[C]+=1}break;case"MUTATION_EXTENDED":var k=r((0,h.getSimplifiedMutationType)(g.mutationType));"fusion"===k?i=!0:(g.putativeDriver&&(k+="_rec"),u[k]=u[k]||0,u[k]+=1)}}}catch(e){p=!0,f=e}finally{try{!c&&m.return&&m.return()}finally{if(p)throw f}}return i&&(e.disp_fusion=!0),e.disp_cna=o(a,w),e.disp_mrna=o(s,x),e.disp_prot=o(l,_),e.disp_mut=o(u,b),e}function a(e,t,n,r){if(!n.length)return[];var o=[];if((0,d.isSampleList)(n)){var a=!0,s=!1,l=void 0;try{for(var u,c=n[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var p=u.value,f={};f.sample=p.sampleId,f.study_id=p.studyId,f.uid=p.uniqueSampleKey;var h=r.samples[p.uniqueSampleKey];h.wholeExomeSequenced||h.sequencedGenes.hasOwnProperty(t)?(h.sequencedGenes[t]&&(f.coverage=h.sequencedGenes[t]),h.wholeExomeSequenced&&(f.wholeExomeSequenced=!0)):f.na=!0,i(f,t,e[p.uniqueSampleKey]),o.push(f)}}catch(e){s=!0,l=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw l}}}else{var m=!0,g=!1,v=void 0;try{for(var y,b=n[Symbol.iterator]();!(m=(y=b.next()).done);m=!0){var w=y.value,x={};x.patient=w.patientId,x.study_id=w.studyId,x.uid=w.uniquePatientKey;var _=r.patients[w.uniquePatientKey];_.wholeExomeSequenced||_.sequencedGenes.hasOwnProperty(t)?(_.sequencedGenes[t]&&(x.coverage=_.sequencedGenes[t]),_.wholeExomeSequenced&&(x.wholeExomeSequenced=!0)):x.na=!0,i(x,t,e[w.uniquePatientKey]),o.push(x)}}catch(e){g=!0,v=e}finally{try{!m&&b.return&&b.return()}finally{if(g)throw v}}}return o}function s(e,t,n,r){if(e.hugo_gene_symbol=t,e.study=n.studyId,r&&r.length)if(1===r.length)e.profile_data=parseFloat(r[0].value);else{if((0,d.isSample)(n))throw Error("Unexpectedly received multiple heatmap profile data for one sample");e.profile_data=r.reduce(function(e,t){var n=parseFloat(t.value);return Math.abs(n)>Math.abs(e)?n:e},0)}else e.profile_data=null,e.na=!0;return e}function l(e,t,n){if(!t.length)return[];var r=((0,d.isSampleList)(t),void 0),o=void 0;return(0,d.isSampleList)(t)?(r=g.default.groupBy(n,function(e){return e.uniqueSampleKey}),o=t.map(function(t){var n={};n.sample=t.sampleId,n.uid=t.uniqueSampleKey;var o=r[t.uniqueSampleKey];return s(n,e,t,o),n})):(r=g.default.groupBy(n,function(e){return e.uniquePatientKey}),o=t.map(function(t){var n={};n.patient=t.patientId,n.uid=t.uniquePatientKey;var o=r[t.uniquePatientKey];return s(n,e,t,o),n})),o}function u(e,t){t.clinicalAttributeId===v.SpecialAttribute.MutationCount?e.attr_val=0:e.na=!0}function c(e,t,n,r){if(e.attr_id=t.clinicalAttributeId,e.study_id=n.studyId,e.attr_val_counts={},r&&r.length){if("number"===t.datatype.toLowerCase()){var o=0,i=0,a=!0,s=!1,l=void 0;try{for(var c,p=r[Symbol.iterator]();!(a=(c=p.next()).done);a=!0){var f=c.value;if((0,d.isMutationCount)(f))o+=1,i+=f.mutationCount;else{var h=parseFloat(f.value+"");isNaN(h)||(o+=1,i+=h)}}}catch(e){s=!0,l=e}finally{try{!a&&p.return&&p.return()}finally{if(s)throw l}}0===o?u(e,t):(e.attr_val=i/o,e.attr_val_counts[e.attr_val]=1)}else if("string"===t.datatype.toLowerCase()){var m=e.attr_val_counts,g=!0,y=!1,b=void 0;try{for(var w,x=r[Symbol.iterator]();!(g=(w=x.next()).done);g=!0){var _=w.value;m[_.value]=m[_.value]||0,m[_.value]+=1}}catch(e){y=!0,b=e}finally{try{!g&&x.return&&x.return()}finally{if(y)throw b}}var S=Object.keys(m);S.length>1?e.attr_val="Mixed":e.attr_val=S[0]}else if(t.clinicalAttributeId===v.SpecialAttribute.MutationSpectrum){var C=r,k=e.attr_val_counts;k["C>A"]=0,k["C>G"]=0,k["C>T"]=0,k["T>A"]=0,k["T>C"]=0,k["T>G"]=0;var A=!0,E=!1,M=void 0;try{for(var T,O=C[Symbol.iterator]();!(A=(T=O.next()).done);A=!0){var I=T.value;k["C>A"]+=I.CtoA,k["C>G"]+=I.CtoG,k["C>T"]+=I.CtoT,k["T>A"]+=I.TtoA,k["T>C"]+=I.TtoC,k["T>G"]+=I.TtoG}}catch(e){E=!0,M=e}finally{try{!A&&O.return&&O.return()}finally{if(E)throw M}}0===k["C>A"]&&0===k["C>G"]&&0===k["C>T"]&&0===k["T>A"]&&0===k["T>C"]&&0===k["T>G"]&&u(e,t),e.attr_val=e.attr_val_counts}}else u(e,t);return e}function p(e,t,n){if(e.patientAttribute){var r=g.default.groupBy(n,function(e){return e.uniquePatientKey});return function(e){return r[e.uniquePatientKey]}}var o="sample"===t?function(e){return e.uniqueSampleKey}:function(e){return e.uniquePatientKey},i=g.default.groupBy(n,o);return function(e){return i[o(e)]}}function f(e,t,n){var r=(g.default.groupBy(n,(0,d.isSampleList)(t)?function(e){return e.uniqueSampleKey}:function(e){return e.uniquePatientKey}),p(e,(0,d.isSampleList)(t)?"sample":"patient",n));return(0,d.isSampleList)(t)?t.map(function(t){var n={};return n.uid=t.uniqueSampleKey,n.sample=t.sampleId,c(n,e,t,r(t)),n}):t.map(function(t){var n={};return n.uid=t.uniquePatientKey,n.patient=t.patientId,c(n,e,t,r(t)),n})}Object.defineProperty(t,"__esModule",{value:!0}),t.getOncoprintMutationType=r,t.selectDisplayValue=o,t.fillGeneticTrackDatum=i,t.makeGeneticTrackData=a,t.fillHeatmapTrackDatum=s,t.makeHeatmapTrackData=l,t.fillClinicalTrackDatum=c,t.makeClinicalTrackData=f;var d=n(1026),h=n(124),m=n(3),g=function(e){return e&&e.__esModule?e:{default:e}}(m),v=n(271),y={"-2":"homdel","-1":"hetloss",0:void 0,1:"gain",2:"amp"},b={trunc_rec:1,inframe_rec:2,missense_rec:3,trunc:4,inframe:5,missense:6},w={amp:0,homdel:0,gain:1,hetloss:1},x={up:0,down:0},_={up:0,down:0}},function(e,t,n){"use strict";function r(e){return e.hasOwnProperty("mutationType")}function o(e){return e.hasOwnProperty("sampleId")}function i(e){return!e.length||o(e[0])}function a(e){return e.hasOwnProperty("mutationCount")}Object.defineProperty(t,"__esModule",{value:!0}),t.isMutation=r,t.isSample=o,t.isSampleList=i,t.isMutationCount=a},function(e,t,n){"use strict";function r(e){for(var t={},n=0;n<e.length;n++)for(var r=[].concat(e[n]),o=0;o<r.length;o++)t[r[o]]=n;return t}function o(e){return e>0?1:e<0?-1:0}function i(e,t){function n(e,t){if(e.disp_fusion&&!t.disp_fusion)return-1;if(!e.disp_fusion&&t.disp_fusion)return 1;var n=o(a[e.disp_cna+""]-a[t.disp_cna+""]);if(0!==n)return n;var r=o(s(e.disp_mut)-s(t.disp_mut));if(0!==r)return r;var i=o(l[e.disp_mrna+""]-l[t.disp_mrna+""]);if(0!==i)return i;var u=o(l[e.disp_prot+""]-l[t.disp_prot+""]);return 0!==u?u:0}function i(e,t){var r=o(+!!e.na-+!!t.na);return 0!==r?r:n(e,t)}var a=r(["amp","homdel","gain","hetloss","diploid",void 0]),s=function(){var n=void 0;return e||t?(!e&&t?n=r([["inframe_rec","missense_rec","promoter_rec","trunc_rec","inframe","promoter","trunc"],"missense",void 0]):e&&!t?n=r([["trunc","trunc_rec"],["inframe","inframe_rec"],["promoter","promoter_rec"],["missense","missense_rec"],void 0,!0,!1]):e&&t&&(n=r(["trunc_rec","inframe_rec","promoter_rec","missense_rec","trunc","inframe","promoter","missense",void 0,!0,!1])),function(e){return n[e]}):function(e){return{true:1,false:2}[!!e+""]}}(),l=r(["up","down",void 0]);return{preferred:u(i),mandatory:n}}function a(e){return function(t,n){return t.na&&n.na?0:t.na&&!n.na?2:!t.na&&n.na?-2:t[e]<n[e]?-1:t[e]===n[e]?0:1}}function s(e,t){return e.na&&t.na?0:e.na&&!t.na?2:!e.na&&t.na?-2:(0,f.default)(e.attr_val,t.attr_val)}function l(e){return function(t,n){if(t.na&&n.na)return 0;if(t.na&&!n.na)return 2;if(!t.na&&n.na)return-2;for(var r=0,i=0,a=0;a<e.length;a++)r+=t.attr_val[e[a]]||0,i+=n.attr_val[e[a]]||0;if(0===r&&0===i)return 0;if(0===r)return 1;if(0===i)return-1;for(var s=0,l=0,a=0;a<e.length;a++)t.attr_val[e[a]]>t.attr_val[e[s]]&&(s=a),n.attr_val[e[a]]>n.attr_val[e[l]]&&(l=a);if(s<l)return-1;if(s>l)return 1;var u=e[s];return o(t.attr_val[u]/r-n.attr_val[u]/i)}}function u(e){return function(t,n){var r=e(t,n);return 0===r?t.sample?(0,f.default)(t.sample,n.sample):(0,f.default)(t.patient,n.patient):r}}function c(e){if("number"===e.datatype){var t=a("attr_val");return{preferred:u(t),mandatory:t}}if("string"===e.datatype)return{preferred:u(s),mandatory:s};if("counts"===e.datatype){var n=l(e.countsCategoryLabels);return{preferred:u(n),mandatory:n}}}Object.defineProperty(t,"__esModule",{value:!0}),t.heatmapTrackSortComparator=void 0,t.getGeneticTrackSortComparator=i,t.stringClinicalComparator=s,t.alphabeticalDefault=u,t.getClinicalTrackSortComparator=c;var p=n(829),f=function(e){return e&&e.__esModule?e:{default:e}}(p);t.heatmapTrackSortComparator=function(){var e=a("profile_data");return{preferred:u(e),mandatory:e}}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return'<a href="'+(0,c.getSampleViewUrl)(e,t)+'" target="_blank">'+t+"</a>"}function i(e,t){return'<a href="'+(0,c.getPatientViewUrl)(e,t)+'" target="_blank">'+t+"</a>"}function a(e){var t=(0,f.default)('<a href="#" oncontextmenu="return false;">'+e+"</a>");return t.ready(function(){t.click(function(){h.default.getGenePanelUsingGET({genePanelId:e}).then(function(t){var n=t.genes.map(function(e){return e.hugoGeneSymbol}).sort(),r=open("","_blank","width=500,height=500");if(r){var o=r.document.createElement("div");r.document.body.appendChild(o),(0,f.default)('<h3 style="text-align:center;">'+e+"</h3><br>").appendTo(o),(0,f.default)("<span>"+n.join("<br>")+"</span>").appendTo(o)}})})}),t}function s(e,t){return function(n){var r="";if("counts"===e.datatype)for(var a=0;a<e.countsCategoryLabels.length;a++)r+='<span style="color:'+e.countsCategoryFills[a]+';font-weight:bold;">'+e.countsCategoryLabels[a]+"</span>: "+n.attr_val_counts[e.countsCategoryLabels[a]]+"<br>";else{var s=n.attr_val_counts&&Object.keys(n.attr_val_counts)||[];if(s.length>1){r+=e.label+":<br>";for(var l=0;l<s.length;l++){var u=s[l];r+="<b>"+u+"</b>: "+n.attr_val_counts[u]+"<br>"}}else if(1===s.length){var c=s[0];"number"===e.datatype&&(c=parseFloat(s[0]).toFixed(2),".00"===c.substring(c.length-3)&&(c=c.substring(0,c.length-3))),r+=e.label+": <b>"+c+"</b><br>"}}return r+="<span>"+(n.sample?"Sample":"Patient")+": ",r+=t?n.sample?o(n.study_id,n.sample):i(n.study_id,n.patient):n.sample?n.sample:n.patient,r+="</span>",(0,f.default)("<div>").addClass(m).append(r)}}function l(e,t){return function(n){var r="",a="N/A";"MRNA_EXPRESSION"===e?r="MRNA: ":"PROTEIN_LEVEL"===e&&(r="PROT: "),null!==n.profile_data&&void 0!==n.profile_data&&(a=n.profile_data.toFixed(2));var s=r+"<b>"+a+"</b><br>";return s+=n.sample?t?o(n.study,n.sample):n.sample:t?i(n.study,n.patient):n.patient,(0,f.default)("<div>").addClass(m).append(s)}}function u(e){function t(e){return e.map(function(e){var t=(0,f.default)("<span>");return t.append("<b>"+e.amino_acid_change+"</b>"),e.cancer_hotspots_hotspot&&t.append('<img src="images/cancer-hotspots.svg" title="Hotspot" style="height:11px; width:11px; margin-left:3px"/>'),e.oncokb_oncogenic&&t.append('<img src="images/oncokb-oncogenic-1.svg" title="'+e.oncokb_oncogenic+'" style="height:11px; width:11px;margin-left:3px"/>'),e.driver_filter&&"Putative_Driver"===e.driver_filter&&t.append('<img src="images/driver.png" title="'+e.driver_filter+": "+e.driver_filter_annotation+'" alt="driver filter" style="height:11px; width:11px;margin-left:3px"/>'),e.driver_tiers_filter&&t.append('<img src="images/driver_tiers.png" title="'+e.driver_tiers_filter+": "+e.driver_tiers_filter_annotation+'" alt="driver tiers filter" style="height:11px; width:11px;margin-left:3px"/>'),t})}function n(e){return e.map(function(e){var t=(0,f.default)("<span>");return t.append("<b>"+e.cna+"</b>"),e.oncokb_oncogenic&&t.append('<img src="images/oncokb-oncogenic-1.svg" title="'+e.oncokb_oncogenic+'" style="height:11px; width:11px;margin-left:3px"/>'),t})}var r={"-2":"HOMODELETED","-1":"HETLOSS",1:"GAIN",2:"AMPLIFIED"};return function(s){for(var l=(0,f.default)("<div>").addClass(m),u=[],c=[],p=[],d=[],h=[],g=0;g<s.data.length;g++){var v=s.data[g],y=v.molecularProfileAlterationType;switch(y){case"MUTATION_EXTENDED":var b={};b.amino_acid_change=v.proteinChange,b.driver_filter=v.driverFilter,b.driver_filter_annotation=v.driverFilterAnnotation,b.driver_tiers_filter=v.driverTiersFilter,b.driver_tiers_filter_annotation=v.driverTiersFilterAnnotation,v.isHotspot&&(b.cancer_hotspots_hotspot=!0);var w=v.oncoKbOncogenic;w&&(b.oncokb_oncogenic=w),("fusion"===v.alterationSubType?h:u).push(b);break;case"COPY_NUMBER_ALTERATION":if(r.hasOwnProperty(v.value)){var x={cna:r[v.value]},_=v.oncoKbOncogenic;_&&(x.oncokb_oncogenic=_),c.push(x)}break;case"MRNA_EXPRESSION":case"PROTEIN_LEVEL":var S=v.alterationSubType,C="MRNA_EXPRESSION"===y?p:d;"up"===S?C.push("UPREGULATED"):"down"===S&&C.push("DOWNREGULATED")}}if(h.length>0){l.append("Fusion: "),h=t(h);for(var k=0;k<h.length;k++)k>0&&l.append(","),l.append(h[k]);l.append("<br>")}if(u.length>0){l.append("Mutation: "),u=t(u);for(var k=0;k<u.length;k++)k>0&&l.append(","),l.append(u[k]);l.append("<br>")}if(c.length>0){l.append("Copy Number Alteration: "),c=n(c);for(var k=0;k<c.length;k++)k>0&&l.append(","),l.append(c[k]);l.append("<br>")}p.length>0&&l.append("MRNA: <b>"+p.join(", ")+"</b><br>"),d.length>0&&l.append("PROT: <b>"+d.join(", ")+"</b><br>");var A=(s.coverage||[]).map(function(e){return a(e.genePanelId)});if(s.wholeExomeSequenced&&A.push("Whole-Exome Sequencing"),A.length){l.append("Coverage: ");for(var k=0;k<A.length;k++)k>0&&l.append(","),l.append(A[k]);l.append("<br>")}s.na&&(l.append("Not sequenced"),l.append("<br>"));var E=void 0;return E=s.sample?e?o(s.study_id,s.sample):s.sample:s.patient?e?i(s.study_id,s.patient):s.patient:"",l.append(E),l}}Object.defineProperty(t,"__esModule",{value:!0}),t.TOOLTIP_DIV_CLASS=void 0,t.makeClinicalTrackTooltip=s,t.makeHeatmapTrackTooltip=l,t.makeGeneticTrackTooltip=u;var c=n(16),p=n(84),f=r(p),d=n(34),h=r(d);n(1029);var m=t.TOOLTIP_DIV_CLASS="oncoprint__tooltip"},function(e,t){},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),p=n(10),f=n(28),d=n(1031),h=r(d),m=n(98),g=r(m),v=n(8),y=n(3),b=r(y),w=n(168),x=r(w),_=n(50),S=r(_),C=n(902),k=r(C);n(903);var A=n(273),E=r(A);n(1054);var M=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},T=n(1055).CheckedSelect,O={columnTypeSample:"0",columnTypePatient:"1",showUnalteredColumns:"2",showWhitespaceBetweenColumns:"3",showClinicalTrackLegends:"4",distinguishMutationType:"5",sortByMutationType:"6",sortAlphabetical:"7",sortCaseListOrder:"8",sortByData:"9",sortByDrivers:"10",sortByHeatmapClustering:"11",heatmapGeneInput:"12",addGenesToHeatmap:"13",removeHeatmap:"14",distinguishDrivers:"15",annotateOncoKb:"16",annotateHotspots:"17",annotateCBioPortal:"18",annotateCOSMIC:"19",annotateCBioPortalInput:"20",annotateCOSMICInput:"21",hidePutativePassengers:"22",customDriverBinaryAnnotation:"23",customDriverTierAnnotation:"24",downloadPDF:"25",downloadPNG:"26",downloadSVG:"27",downloadOrder:"28",downloadTabular:"29",horzZoomSlider:"30"},I=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.clinicalTracksMenuFocused=!1,n.getHeatmapMenu=n.getHeatmapMenu.bind(n),n.getClinicalTracksMenu=n.getClinicalTracksMenu.bind(n),n.getSortMenu=n.getSortMenu.bind(n),n.getViewMenu=n.getViewMenu.bind(n),n.getDownloadMenu=n.getDownloadMenu.bind(n),n.onInputClick=n.onInputClick.bind(n),n.getMutationColorMenu=n.getMutationColorMenu.bind(n),n.getHorzZoomControls=n.getHorzZoomControls.bind(n),n.onSelect=n.onSelect.bind(n),n.onChangeSelectedClinicalTracks=n.onChangeSelectedClinicalTracks.bind(n),n.toggleShowMinimap=n.toggleShowMinimap.bind(n),n.onType=n.onType.bind(n),n.onHeatmapProfileSelect=n.onHeatmapProfileSelect.bind(n),n.onButtonClick=n.onButtonClick.bind(n),n.onZoomInClick=n.onZoomInClick.bind(n),n.onZoomOutClick=n.onZoomOutClick.bind(n),n.onCustomDriverTierCheckboxClick=n.onCustomDriverTierCheckboxClick.bind(n),n.onHorzZoomSliderChange=n.onHorzZoomSliderChange.bind(n),n.onHorzZoomSliderSet=n.onHorzZoomSliderSet.bind(n),n.onSetHorzZoomTextInput=n.onSetHorzZoomTextInput.bind(n),n.onClinicalTracksMenuFocus=n.onClinicalTracksMenuFocus.bind(n),n.horzZoomSliderState=e.state.horzZoom,(0,v.reaction)(function(){return n.props.state.horzZoom},function(e){return n.horzZoomSliderState=e}),n}return a(t,e),s(t,[{key:"onZoomInClick",value:function(){this.props.handlers.onClickZoomIn()}},{key:"onZoomOutClick",value:function(){this.props.handlers.onClickZoomOut()}},{key:"onSetHorzZoomTextInput",value:function(e){var t=parseFloat(e),n=t/100;this.props.handlers.onSetHorzZoom(n)}},{key:"onSelect",value:function(e){e===O.distinguishMutationType&&this.props.handlers.onSelectDistinguishMutationType&&this.props.handlers.onSelectDistinguishMutationType(!this.props.state.distinguishMutationType)}},{key:"onChangeSelectedClinicalTracks",value:function(e){this.props.handlers.onChangeSelectedClinicalTracks&&this.props.handlers.onChangeSelectedClinicalTracks(e.map(function(e){return e.value}))}},{key:"onHeatmapProfileSelect",value:function(e){this.props.handlers.onSelectHeatmapProfile&&this.props.handlers.onSelectHeatmapProfile(e.value)}},{key:"toggleShowMinimap",value:function(e){this.props.handlers.onSelectShowMinimap&&this.props.handlers.onSelectShowMinimap(!this.props.state.showMinimap)}},{key:"onInputClick",value:function(e){switch(e.target.value){case O.showUnalteredColumns:this.props.handlers.onSelectShowUnalteredColumns&&this.props.handlers.onSelectShowUnalteredColumns(!this.props.state.showUnalteredColumns);break;case O.showWhitespaceBetweenColumns:this.props.handlers.onSelectShowWhitespaceBetweenColumns&&this.props.handlers.onSelectShowWhitespaceBetweenColumns(!this.props.state.showWhitespaceBetweenColumns);break;case O.showClinicalTrackLegends:this.props.handlers.onSelectShowClinicalTrackLegends&&this.props.handlers.onSelectShowClinicalTrackLegends(!this.props.state.showClinicalTrackLegends);break;case O.columnTypeSample:this.props.handlers.onSelectColumnType&&this.props.handlers.onSelectColumnType("sample");break;case O.columnTypePatient:this.props.handlers.onSelectColumnType&&this.props.handlers.onSelectColumnType("patient");break;case O.sortByData:this.props.handlers.onClickSortByData&&this.props.handlers.onClickSortByData();break;case O.sortAlphabetical:this.props.handlers.onClickSortAlphabetical&&this.props.handlers.onClickSortAlphabetical();break;case O.sortCaseListOrder:this.props.handlers.onClickSortCaseListOrder&&this.props.handlers.onClickSortCaseListOrder();break;case O.sortByMutationType:this.props.handlers.onSelectSortByMutationType&&this.props.handlers.onSelectSortByMutationType(!this.props.state.sortByMutationType);break;case O.sortByDrivers:this.props.handlers.onSelectSortByDrivers&&this.props.handlers.onSelectSortByDrivers(!this.props.state.sortByDrivers);break;case O.distinguishDrivers:this.props.handlers.onSelectDistinguishDrivers&&this.props.handlers.onSelectDistinguishDrivers(!this.props.state.distinguishDrivers);break;case O.distinguishMutationType:this.props.handlers.onSelectDistinguishMutationType&&this.props.handlers.onSelectDistinguishMutationType(!this.props.state.distinguishMutationType);break;case O.annotateOncoKb:this.props.handlers.onSelectAnnotateOncoKb&&this.props.handlers.onSelectAnnotateOncoKb(!this.props.state.annotateDriversOncoKb);break;case O.annotateHotspots:this.props.handlers.onSelectAnnotateHotspots&&this.props.handlers.onSelectAnnotateHotspots(!this.props.state.annotateDriversHotspots);break;case O.annotateCBioPortal:this.props.handlers.onSelectAnnotateCBioPortal&&this.props.handlers.onSelectAnnotateCBioPortal(!this.props.state.annotateDriversCBioPortal);break;case O.annotateCOSMIC:this.props.handlers.onSelectAnnotateCOSMIC&&this.props.handlers.onSelectAnnotateCOSMIC(!this.props.state.annotateDriversCOSMIC);break;case O.hidePutativePassengers:this.props.handlers.onSelectHidePutativePassengers&&this.props.handlers.onSelectHidePutativePassengers(!this.props.state.hidePutativePassengers);break;case O.customDriverBinaryAnnotation:this.props.handlers.onSelectCustomDriverAnnotationBinary&&this.props.handlers.onSelectCustomDriverAnnotationBinary(!this.props.state.annotateCustomDriverBinary)}}},{key:"onHorzZoomSliderChange",value:function(e){this.horzZoomSliderState=e}},{key:"onHorzZoomSliderSet",value:function(){this.props.handlers.onSetHorzZoom(this.horzZoomSliderState),this.horzZoomSliderState=this.props.state.horzZoom}},{key:"onCustomDriverTierCheckboxClick",value:function(e){this.props.handlers.onSelectCustomDriverAnnotationTier&&this.props.handlers.onSelectCustomDriverAnnotationTier(e.target.value,!(this.props.state.selectedCustomDriverAnnotationTiers&&this.props.state.selectedCustomDriverAnnotationTiers.get(e.target.value)))}},{key:"onButtonClick",value:function(e){switch(e.target.name){case O.addGenesToHeatmap:this.props.handlers.onClickAddGenesToHeatmap&&this.props.handlers.onClickAddGenesToHeatmap();break;case O.removeHeatmap:this.props.handlers.onClickRemoveHeatmap&&this.props.handlers.onClickRemoveHeatmap();break;case O.downloadSVG:this.props.handlers.onClickDownload&&this.props.handlers.onClickDownload("svg");break;case O.downloadPNG:this.props.handlers.onClickDownload&&this.props.handlers.onClickDownload("png");break;case O.downloadPDF:this.props.handlers.onClickDownload&&this.props.handlers.onClickDownload("pdf");break;case O.downloadOrder:this.props.handlers.onClickDownload&&this.props.handlers.onClickDownload("order");break;case O.downloadTabular:this.props.handlers.onClickDownload&&this.props.handlers.onClickDownload("tabular");break;case O.sortByHeatmapClustering:this.props.handlers.onClickClusterHeatmap&&this.props.handlers.onClickClusterHeatmap()}}},{key:"onType",value:function(e){switch(e.target.name){case O.heatmapGeneInput:this.props.handlers.onChangeHeatmapGeneInputValue&&this.props.handlers.onChangeHeatmapGeneInputValue(e.target.value);break;case O.annotateCBioPortalInput:this.props.handlers.onChangeAnnotateCBioPortalInputValue&&this.props.handlers.onChangeAnnotateCBioPortalInputValue(e.target.value);break;case O.annotateCOSMICInput:this.props.handlers.onChangeAnnotateCOSMICInputValue&&this.props.handlers.onChangeAnnotateCOSMICInputValue(e.target.value)}}},{key:"onClinicalTracksMenuFocus",value:function(){this.clinicalTracksMenuFocused=!0}},{key:"getClinicalTracksMenu",value:function(){return this.props.handlers.onChangeSelectedClinicalTracks&&this.props.state.clinicalAttributesPromise?c.createElement("div",{onFocus:this.onClinicalTracksMenuFocus},c.createElement(T,{placeholder:"Add clinical tracks..",isLoading:this.clinicalTracksMenuLoading,noResultsText:this.clinicalTracksMenuLoading?"Loading...":"No matching clinical tracks found",onChange:this.onChangeSelectedClinicalTracks,options:this.clinicalTrackOptions,value:(this.props.state.selectedClinicalAttributeIds||[]).map(function(e){return{value:e}}),labelKey:"label"})):c.createElement("span",null)}},{key:"getHeatmapMenu",value:function(){if(this.props.state.hideHeatmapMenu||!this.props.state.heatmapProfilesPromise)return c.createElement("span",null);var e=c.createElement(x.default,{isLoading:!0});if(this.props.state.heatmapProfilesPromise.isComplete){if(!this.props.state.heatmapProfilesPromise.result.length)return c.createElement("span",null);e=c.createElement("div",{className:"oncoprint__controls__heatmap_menu"},c.createElement(g.default,{clearable:!1,searchable:!1,isLoading:this.props.state.heatmapProfilesPromise.isPending,onChange:this.onHeatmapProfileSelect,value:this.props.state.selectedHeatmapProfile,options:this.heatmapProfileOptions}),c.createElement("textarea",{placeholder:"Type space- or comma-separated genes here, then click 'Add Genes to Heatmap'",name:O.heatmapGeneInput,onChange:this.onType,value:this.props.state.heatmapGeneInputValue}),c.createElement("button",{className:"btn btn-sm btn-default",name:O.addGenesToHeatmap,onClick:this.onButtonClick},"Add Genes to Heatmap"),c.createElement("button",{className:"btn btn-sm btn-default",name:O.removeHeatmap,onClick:this.onButtonClick},"Remove Heatmap"),!this.props.state.hideClusterHeatmapButton&&c.createElement("button",{className:"btn btn-sm btn-default",name:O.sortByHeatmapClustering,onClick:this.onButtonClick,disabled:this.props.state.clusterHeatmapButtonDisabled},"Cluster Heatmap"))}else this.props.state.heatmapProfilesPromise.isError&&(e=c.createElement("span",null,"Error loading heatmap profiles."));return c.createElement(h.default,{bsStyle:"default",title:"Heatmap",id:"heatmapDropdown"},e)}},{key:"getSortMenu",value:function(){return c.createElement(h.default,{bsStyle:"default",title:"Sort",id:"sortDropdown"},c.createElement("div",null,c.createElement("div",{className:"radio"},c.createElement("label",null,c.createElement("input",{type:"radio",name:"sortBy",value:O.sortByData,checked:"data"===this.props.state.sortMode.type,onClick:this.onInputClick})," Sort by data")),c.createElement("div",{style:{marginLeft:"10px"}},c.createElement("div",{className:"checkbox"},c.createElement("label",null,c.createElement("input",{type:"checkbox",value:O.sortByMutationType,checked:this.props.state.sortByMutationType,onClick:this.onInputClick,disabled:"data"!==this.props.state.sortMode.type||!this.props.state.distinguishMutationType})," Mutation Type")),c.createElement("div",{className:"checkbox"},c.createElement("label",null,c.createElement("input",{type:"checkbox",value:O.sortByDrivers,checked:this.props.state.sortByDrivers,onClick:this.onInputClick,disabled:"data"!==this.props.state.sortMode.type||!this.props.state.distinguishDrivers})," Driver/Passenger"))),c.createElement("div",{className:"radio"},c.createElement("label",null,c.createElement("input",{type:"radio",name:"sortBy",value:O.sortAlphabetical,checked:"alphabetical"===this.props.state.sortMode.type,onClick:this.onInputClick})," Sort by case id (alphabetical)")),c.createElement("div",{className:"radio"},c.createElement("label",null,c.createElement("input",{type:"radio",name:"sortBy",value:O.sortCaseListOrder,checked:"caseList"===this.props.state.sortMode.type,onClick:this.onInputClick})," Sort by case list order")),this.props.state.heatmapProfilesPromise&&!(this.props.state.heatmapProfilesPromise.isComplete&&!this.props.state.heatmapProfilesPromise.result.length)&&c.createElement("div",{className:"radio"},c.createElement("label",null,c.createElement("input",{type:"radio",name:"sortBy",checked:"heatmap"===this.props.state.sortMode.type,disabled:!0})," Sorted by heatmap clustering order"))))}},{key:"getMutationColorMenu",value:function(){var e=this;return c.createElement(h.default,{bsStyle:"default",title:"Mutation Color",id:"mutationColorDropdown"},c.createElement("div",null,c.createElement("form",{action:"",style:{marginBottom:"0"}},c.createElement("div",{className:"checkbox"},c.createElement("label",null,c.createElement("input",{type:"checkbox",value:O.distinguishMutationType,checked:this.props.state.distinguishMutationType,onClick:this.onInputClick})," Type")),c.createElement("div",{className:"checkbox"},c.createElement("label",null,c.createElement("input",{type:"checkbox",value:O.distinguishDrivers,checked:this.props.state.distinguishDrivers,onClick:this.onInputClick})," Putative drivers based on:"),c.createElement(S.default,{overlay:c.createElement("span",null,"For missense, inframe, and truncating mutations.")},c.createElement("i",{className:"fa fa-md fa-info-circle",style:{cursor:"pointer",paddingTop:"0.2em"}}))),c.createElement("div",{style:{marginLeft:"20px"}},c.createElement("div",{className:"checkbox"},c.createElement("label",null,c.createElement("input",{type:"checkbox",value:O.annotateOncoKb,checked:this.props.state.annotateDriversOncoKb,onClick:this.onInputClick}),c.createElement(S.default,{overlay:c.createElement("span",null,"Oncogenicity from OncoKB"),placement:"top"},c.createElement("img",{src:"images/oncokb.png",style:{maxHeight:"12px",cursor:"pointer",marginRight:"5px"}})),"driver annotation")),c.createElement("div",{className:"checkbox"},c.createElement("label",null,c.createElement("input",{type:"checkbox",value:O.annotateHotspots,checked:this.props.state.annotateDriversHotspots,onClick:this.onInputClick})," Hotspots",c.createElement(S.default,{overlay:c.createElement("div",{style:{maxWidth:"400px"}},"Identified as a recurrent hotspot (statistically significant) in a population-scale cohort of tumor samples of various cancer types using methodology based in part on ",c.createElement("a",{href:"http://www.ncbi.nlm.nih.gov/pubmed/26619011",target:"_blank"},"Chang et al., Nat Biotechnol, 2016."),"Explore all mutations at ",c.createElement("a",{href:"http://cancerhotspots.org",target:"_blank"},"http://cancerhotspots.org")),placement:"top"},c.createElement("img",{src:"images/cancer-hotspots.svg",style:{height:"15px",width:"15px",cursor:"pointer",marginLeft:"5px"}})))),this.props.handlers.onChangeAnnotateCBioPortalInputValue&&c.createElement("div",{className:"checkbox"},c.createElement("label",null,c.createElement("input",{type:"checkbox",value:O.annotateCBioPortal,checked:this.props.state.annotateDriversCBioPortal,onClick:this.onInputClick}),"cBioPortal  >="),c.createElement(E.default,{value:this.props.state.annotateCBioPortalInputValue||"",setValue:this.props.handlers.onChangeAnnotateCBioPortalInputValue,numericOnly:!0,textFieldAppearance:!0,maxChars:6})),this.props.handlers.onChangeAnnotateCOSMICInputValue&&c.createElement("div",{className:"checkbox"},c.createElement("label",null,c.createElement("input",{type:"checkbox",value:O.annotateCOSMIC,checked:this.props.state.annotateDriversCOSMIC,onClick:this.onInputClick}),"COSMIC  >="),c.createElement(E.default,{value:this.props.state.annotateCOSMICInputValue||"",setValue:this.props.handlers.onChangeAnnotateCOSMICInputValue,numericOnly:!0,textFieldAppearance:!0,maxChars:6})),!!this.props.state.customDriverAnnotationBinaryMenuLabel&&c.createElement("div",{className:"checkbox"},c.createElement("label",null,c.createElement("input",{type:"checkbox",checked:this.props.state.annotateCustomDriverBinary,value:O.customDriverBinaryAnnotation,onClick:this.onInputClick})," ",this.props.state.customDriverAnnotationBinaryMenuLabel,c.createElement("img",{src:"images/driver.png",alt:"driver filter",style:{height:"15px",width:"15px",cursor:"pointer",marginLeft:"5px"}}))),!!this.props.state.customDriverAnnotationTiersMenuLabel&&c.createElement("span",null,c.createElement("span",{className:"caret"}),"",c.createElement("span",null,this.props.state.customDriverAnnotationTiersMenuLabel),"",c.createElement("img",{src:"images/driver_tiers.png",alt:"driver tiers filter",style:{height:"15px",width:"15px",cursor:"pointer",marginLeft:"5px"}}),c.createElement("div",{style:{marginLeft:"30px"}},(this.props.state.customDriverAnnotationTiers||[]).map(function(t){return c.createElement("div",{className:"checkbox"},c.createElement("label",null,c.createElement("input",{type:"checkbox",value:t,checked:!(!e.props.state.selectedCustomDriverAnnotationTiers||!e.props.state.selectedCustomDriverAnnotationTiers.get(t)),onClick:e.onCustomDriverTierCheckboxClick})," ",t))}))),c.createElement("div",{className:"checkbox"},c.createElement("label",null,c.createElement("input",{type:"checkbox",value:O.hidePutativePassengers,checked:this.props.state.hidePutativePassengers,onClick:this.onInputClick,disabled:!this.props.state.distinguishDrivers})," Hide VUS (variants of unknown significance)"))))))}},{key:"getViewMenu",value:function(){return c.createElement(h.default,{bsStyle:"default",title:"View",id:"viewDropdownButton"},c.createElement("strong",null,"Data type:"),c.createElement("div",{className:"radio"},c.createElement("label",null,c.createElement("input",{type:"radio",name:"columnType",value:O.columnTypeSample,checked:"sample"===this.props.state.selectedColumnType,onClick:this.onInputClick})," Events per sample")),c.createElement("div",{className:"radio"},c.createElement("label",null,c.createElement("input",{type:"radio",name:"columnType",value:O.columnTypePatient,checked:"patient"===this.props.state.selectedColumnType,onClick:this.onInputClick})," Events per patient")),c.createElement("hr",null),c.createElement("div",{className:"checkbox"},c.createElement("label",null,c.createElement("input",{type:"checkbox",value:O.showUnalteredColumns,checked:this.props.state.showUnalteredColumns,onClick:this.onInputClick})," Show unaltered columns")),c.createElement("div",{className:"checkbox"},c.createElement("label",null,c.createElement("input",{type:"checkbox",value:O.showWhitespaceBetweenColumns,checked:this.props.state.showWhitespaceBetweenColumns,onClick:this.onInputClick})," Show whitespace between columns")),c.createElement("div",{className:"checkbox"},c.createElement("label",null,c.createElement("input",{type:"checkbox",value:O.showClinicalTrackLegends,checked:this.props.state.showClinicalTrackLegends,onClick:this.onInputClick})," Show legends for clinical tracks")))}},{key:"getDownloadMenu",value:function(){return c.createElement(h.default,{bsStyle:"default",title:"Download",id:"downloadDropdownButton"},c.createElement("button",{className:"btn btn-sm btn-default",name:O.downloadPDF,onClick:this.onButtonClick},"PDF"),c.createElement("button",{className:"btn btn-sm btn-default",name:O.downloadPNG,onClick:this.onButtonClick},"PNG"),c.createElement("button",{className:"btn btn-sm btn-default",name:O.downloadSVG,onClick:this.onButtonClick},"SVG"),c.createElement("button",{className:"btn btn-sm btn-default",name:O.downloadOrder,onClick:this.onButtonClick},this.props.state.columnMode&&this.props.state.columnMode[0].toUpperCase()+this.props.state.columnMode.slice(1)||""," order"),c.createElement("button",{className:"btn btn-sm btn-default",name:O.downloadTabular,onClick:this.onButtonClick},"Tabular"))}},{key:"getHorzZoomControls",value:function(){return c.createElement("div",{className:"btn btn-default oncoprint__zoom-controls"},c.createElement(S.default,{overlay:c.createElement("span",null,"Zoom out of oncoprint.")},c.createElement("div",{onClick:this.onZoomOutClick},c.createElement("i",{className:"fa fa-search-minus"}))),c.createElement(S.default,{overlay:c.createElement("span",null,"Zoom in/out of oncoprint.")},c.createElement("div",{style:{width:"90px"}},c.createElement(k.default,{value:this.horzZoomSliderState,onChange:this.onHorzZoomSliderChange,onChangeComplete:this.onHorzZoomSliderSet,step:.01,max:1,min:0,tooltip:!1}))),c.createElement(E.default,{value:(100*this.horzZoomSliderState).toFixed(),setValue:this.onSetHorzZoomTextInput,maxChars:3,numericOnly:!0,textFieldAppearance:!0,style:{background:"white",minWidth:"30px",fontSize:"14px",fontFamily:"arial",border:"none",padding:0,marginTop:0,marginBottom:0,marginRight:2}}),c.createElement("div",null,"%"),c.createElement(S.default,{overlay:c.createElement("span",null,"Zoom in to oncoprint.")},c.createElement("div",{onClick:this.onZoomInClick},c.createElement("i",{className:"fa fa-search-plus"}))))}},{key:"render",value:function(){return c.createElement("div",{className:"oncoprint__controls"},c.createElement("div",{style:{width:220}},c.createElement(p.Observer,null,this.getClinicalTracksMenu)),c.createElement(f.ButtonGroup,null,c.createElement(p.Observer,null,this.getHeatmapMenu),c.createElement(p.Observer,null,this.getSortMenu),c.createElement(p.Observer,null,this.getMutationColorMenu),c.createElement(p.Observer,null,this.getViewMenu),c.createElement(p.Observer,null,this.getDownloadMenu),c.createElement(p.Observer,null,this.getHorzZoomControls),this.minimapButton))}},{key:"clinicalTrackOptions",get:function(){return this.clinicalTracksMenuFocused&&this.props.state.clinicalAttributesPromise&&this.props.state.clinicalAttributesPromise.result?b.default.map(this.props.state.clinicalAttributesPromise.result,function(e){return{label:e.displayName,value:e.clinicalAttributeId}}):[]}},{key:"heatmapProfileOptions",get:function(){return this.props.state.heatmapProfilesPromise&&this.props.state.heatmapProfilesPromise.result?b.default.map(this.props.state.heatmapProfilesPromise.result,function(e){return{label:e.name,value:e.molecularProfileId}}):[]}},{key:"clinicalTracksMenuLoading",get:function(){return this.clinicalTracksMenuFocused&&this.props.state.clinicalAttributesPromise&&this.props.state.clinicalAttributesPromise.isPending}},{key:"showMinimap",get:function(){return this.props.state.showMinimap}},{key:"minimapButton",get:function(){return c.createElement("div",{className:"btn-group"},c.createElement(S.default,{overlay:c.createElement("span",null,"Toggle minimap panel.")},c.createElement(f.Button,{active:this.showMinimap,onClick:this.toggleShowMinimap,className:"oncoprint__controls__minimap_button"},c.createElement("img",{src:n(1061),alt:"icon",style:{width:15,height:15,margin:2}}))))}}]),t}(c.Component);M([v.observable],I.prototype,"horzZoomSliderState",void 0),M([v.observable],I.prototype,"clinicalTracksMenuFocused",void 0),M([v.computed],I.prototype,"clinicalTrackOptions",null),M([v.computed],I.prototype,"heatmapProfileOptions",null),M([v.computed],I.prototype,"clinicalTracksMenuLoading",null),M([v.computed],I.prototype,"showMinimap",null),I=M([p.observer],I),t.default=I},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),p=n(28),f=n(1032),d=n(10),h=n(8),m=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},g=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]]);return n},v=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=(e.bsRole,e.title),n=g(e,["bsRole","title"]);return c.createElement(p.Button,a({className:"btn btn-default"},n),t," ",c.createElement("span",{className:"caret"}))}}]),t}(c.Component),y=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props.children;return c.createElement("div",{className:"dropdown-menu",style:{padding:"6px"}},e)}}]),t}(c.Component),b=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.open=!1,e.toggle=function(){e.open=!e.open},e.hide=function(){e.open=!1},e}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.id,r=g(e,["children","id"]);return c.createElement(f.RootCloseWrapper,{onRootClose:this.hide},c.createElement(p.Dropdown,{id:n+"",open:this.open},c.createElement(v,a({bsStyle:"default",bsRole:"toggle",title:"Custom Toggle",onClick:this.toggle},r)),c.createElement(y,{bsRole:"menu"},t)))}}]),t}(c.Component);m([h.observable],b.prototype,"open",void 0),b=m([d.observer],b),t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.RootCloseWrapper=t.Transition=t.Position=t.Portal=t.Overlay=t.Modal=t.AutoAffix=t.Affix=void 0;var o=n(911),i=r(o),a=n(1037),s=r(a),l=n(1038),u=r(l),c=n(1050),p=r(c),f=n(896),d=r(f),h=n(919),m=r(h),g=n(1053),v=r(g),y=n(920),b=r(y);t.Affix=i.default,t.AutoAffix=s.default,t.Modal=u.default,t.Overlay=p.default,t.Portal=d.default,t.Position=m.default,t.Transition=v.default,t.RootCloseWrapper=b.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=(0,l.default)(e);return n?n.innerHeight:t?e.clientHeight:(0,a.default)(e).height}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=n(824),a=r(i),s=n(912),l=r(s);e.exports=t.default},function(e,t,n){e.exports=n(4)(1235)},function(e,t,n){e.exports=n(4)(281)},function(e,t,n){"use strict";function r(e){var t=(0,i.default)(e);return t&&t.defaultView||t.parentWindow}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(895),i=function(e){return e&&e.__esModule?e:{default:e}}(o);e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=n(824),c=r(u),p=n(276),f=r(p),d=n(2),h=r(d),m=n(812),g=r(m),v=n(1),y=r(v),b=n(911),w=r(b),x=n(825),_=r(x),S=n(813),C=r(S),k=n(915),A=r(k),E=n(796),M=r(E),T=n(916),O=r(T),I=l({},w.default.propTypes,{container:h.default.oneOfType([g.default,h.default.func]),autoWidth:h.default.bool}),P={viewportOffsetTop:0,autoWidth:!0},j=function(e){function t(n,r){i(this,t);var o=a(this,e.call(this,n,r));return o.onWindowScroll=function(){o.onUpdate()},o.onWindowResize=function(){o.props.autoWidth&&(0,f.default)(function(){return o.onUpdate()})},o.onDocumentClick=function(){(0,f.default)(function(){return o.onUpdate()})},o.onUpdate=function(){if(o._isMounted){var e=(0,c.default)(o.positioner),t=e.top,n=e.width,r=(0,C.default)(o.props.container),i=void 0;if(r){var a=(0,A.default)((0,M.default)(o)),s=(0,c.default)(r);i=a-s.top-s.height}else i=null;o.updateState(t,i,n)}},o.updateState=function(e,t,n){e===o.state.offsetTop&&t===o.state.offsetBottom&&n===o.state.width||o.setState({offsetTop:e,offsetBottom:t,width:n})},o.state={offsetTop:null,offsetBottom:null,width:null},o}return s(t,e),t.prototype.componentDidMount=function(){var e=this;this._isMounted=!0,this._windowScrollListener=(0,_.default)((0,O.default)(this),"scroll",function(){return e.onWindowScroll()}),this._windowResizeListener=(0,_.default)((0,O.default)(this),"resize",function(){return e.onWindowResize()}),this._documentClickListener=(0,_.default)((0,M.default)(this),"click",function(){return e.onDocumentClick()}),this.onUpdate()},t.prototype.componentWillReceiveProps=function(){this._needPositionUpdate=!0},t.prototype.componentDidUpdate=function(){this._needPositionUpdate&&(this._needPositionUpdate=!1,this.onUpdate())},t.prototype.componentWillUnmount=function(){this._isMounted=!1,this._windowScrollListener&&this._windowScrollListener.remove(),this._documentClickListener&&this._documentClickListener.remove(),this._windowResizeListener&&this._windowResizeListener.remove()},t.prototype.render=function(){var e=this,t=this.props,n=t.autoWidth,r=t.viewportOffsetTop,i=t.children,a=o(t,["autoWidth","viewportOffsetTop","children"]),s=this.state,u=s.offsetTop,c=s.offsetBottom,p=s.width;delete a.container;var f=Math.max(u,r||0),d=this.props,h=d.affixStyle,m=d.bottomStyle;return n&&(h=l({width:p},h),m=l({width:p},m)),y.default.createElement("div",null,y.default.createElement("div",{ref:function(t){e.positioner=t}}),y.default.createElement(w.default,l({},a,{offsetTop:f,viewportOffsetTop:r,offsetBottom:c,affixStyle:h,bottomStyle:m}),i))},t}(y.default.Component);j.displayName="AutoAffix",j.propTypes=I,j.defaultProps=P,t.default=j,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=n(1039),u=r(l),c=n(917),p=r(c),f=n(288),d=r(f),h=n(2),m=r(h),g=n(812),v=r(g),y=n(1040),b=r(y),w=n(918),x=r(w),_=n(1),S=r(_),C=n(19),k=r(C),A=n(40),E=r(A),M=n(1041),T=r(M),O=n(896),I=r(O),P=n(1048),j=r(P),D=n(825),N=r(D),R=n(1049),F=r(R),L=n(813),z=r(L),B=n(796),q=r(B),V=new T.default,U=function(e){function t(){var n,r,a;o(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=i(this,e.call.apply(e,[this].concat(l))),H.call(r),a=n,i(r,a)}return a(t,e),t.prototype.omitProps=function(e,t){var n=Object.keys(e),r={};return n.map(function(n){Object.prototype.hasOwnProperty.call(t,n)||(r[n]=e[n])}),r},t.prototype.render=function(){var e=this.props,n=e.show,r=e.container,o=e.children,i=e.transition,a=e.backdrop,l=e.dialogTransitionTimeout,u=e.className,c=e.style,p=e.onExit,f=e.onExiting,d=e.onEnter,h=e.onEntering,m=e.onEntered,g=S.default.Children.only(o),v=this.omitProps(this.props,t.propTypes);if(!(n||i&&!this.state.exited))return null;var y=g.props,b=y.role,w=y.tabIndex;return void 0!==b&&void 0!==w||(g=(0,_.cloneElement)(g,{role:void 0===b?"document":b,tabIndex:null==w?"-1":w})),i&&(g=S.default.createElement(i,{transitionAppear:!0,unmountOnExit:!0,in:n,timeout:l,onExit:p,onExiting:f,onExited:this.handleHidden,onEnter:d,onEntering:h,onEntered:m},g)),S.default.createElement(I.default,{ref:this.setMountNode,container:r,onRendered:this.onPortalRendered},S.default.createElement("div",s({ref:this.setModalNodeRef,role:b||"dialog"},v,{style:c,className:u}),a&&this.renderBackdrop(),S.default.createElement(j.default,{ref:this.setDialogRef},g)))},t.prototype.componentWillReceiveProps=function(e){e.show?this.setState({exited:!1}):e.transition||this.setState({exited:!0})},t.prototype.componentWillUpdate=function(e){!this.props.show&&e.show&&this.checkForFocus()},t.prototype.componentDidMount=function(){this._isMounted=!0,this.props.show&&this.onShow()},t.prototype.componentDidUpdate=function(e){var t=this.props.transition;!e.show||this.props.show||t?!e.show&&this.props.show&&this.onShow():this.onHide()},t.prototype.componentWillUnmount=function(){var e=this.props,t=e.show,n=e.transition;this._isMounted=!1,(t||n&&!this.state.exited)&&this.onHide()},t.prototype.autoFocus=function(){if(this.props.autoFocus){var e=this.getDialogElement(),t=(0,u.default)((0,q.default)(this));e&&!(0,p.default)(e,t)&&(this.lastFocus=t,e.hasAttribute("tabIndex")||((0,E.default)(!1,'The modal content node does not accept focus. For the benefit of assistive technologies, the tabIndex of the node is being set to "-1".'),e.setAttribute("tabIndex",-1)),e.focus())}},t.prototype.restoreLastFocus=function(){this.lastFocus&&this.lastFocus.focus&&(this.lastFocus.focus(),this.lastFocus=null)},t.prototype.getDialogElement=function(){return k.default.findDOMNode(this.dialog)},t.prototype.isTopModal=function(){return this.props.manager.isTopModal(this)},t}(S.default.Component);U.propTypes=s({},I.default.propTypes,{show:m.default.bool,container:m.default.oneOfType([v.default,m.default.func]),onShow:m.default.func,onHide:m.default.func,backdrop:m.default.oneOfType([m.default.bool,m.default.oneOf(["static"])]),renderBackdrop:m.default.func,onEscapeKeyDown:m.default.func,onEscapeKeyUp:(0,b.default)(m.default.func,"Please use onEscapeKeyDown instead for consistency"),onBackdropClick:m.default.func,backdropStyle:m.default.object,backdropClassName:m.default.string,containerClassName:m.default.string,keyboard:m.default.bool,transition:x.default,dialogTransitionTimeout:m.default.number,backdropTransitionTimeout:m.default.number,autoFocus:m.default.bool,enforceFocus:m.default.bool,restoreFocus:m.default.bool,onEnter:m.default.func,onEntering:m.default.func,onEntered:m.default.func,onExit:m.default.func,onExiting:m.default.func,onExited:m.default.func,manager:m.default.object.isRequired}),U.defaultProps={show:!1,backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,onHide:function(){},manager:V,renderBackdrop:function(e){return S.default.createElement("div",e)}};var H=function(){var e=this;this.state={exited:!this.props.show},this.renderBackdrop=function(){var t=e.props,n=t.backdropStyle,r=t.backdropClassName,o=t.renderBackdrop,i=t.transition,a=t.backdropTransitionTimeout,s=function(t){return e.backdrop=t},l=o({ref:s,style:n,className:r,onClick:e.handleBackdropClick});return i&&(l=S.default.createElement(i,{transitionAppear:!0,in:e.props.show,timeout:a},l)),l},this.onPortalRendered=function(){e.autoFocus(),e.props.onShow&&e.props.onShow()},this.onShow=function(){var t=(0,q.default)(e),n=(0,z.default)(e.props.container,t.body);e.props.manager.add(e,n,e.props.containerClassName),e._onDocumentKeydownListener=(0,N.default)(t,"keydown",e.handleDocumentKeyDown),e._onDocumentKeyupListener=(0,N.default)(t,"keyup",e.handleDocumentKeyUp),e._onFocusinListener=(0,F.default)(e.enforceFocus)},this.onHide=function(){e.props.manager.remove(e),e._onDocumentKeydownListener.remove(),e._onDocumentKeyupListener.remove(),e._onFocusinListener.remove(),e.props.restoreFocus&&e.restoreLastFocus()},this.setMountNode=function(t){e.mountNode=t?t.getMountNode():t},this.setModalNodeRef=function(t){e.modalNode=t},this.setDialogRef=function(t){e.dialog=t},this.handleHidden=function(){if(e.setState({exited:!0}),e.onHide(),e.props.onExited){var t;(t=e.props).onExited.apply(t,arguments)}},this.handleBackdropClick=function(t){t.target===t.currentTarget&&(e.props.onBackdropClick&&e.props.onBackdropClick(t),!0===e.props.backdrop&&e.props.onHide())},this.handleDocumentKeyDown=function(t){e.props.keyboard&&27===t.keyCode&&e.isTopModal()&&(e.props.onEscapeKeyDown&&e.props.onEscapeKeyDown(t),e.props.onHide())},this.handleDocumentKeyUp=function(t){e.props.keyboard&&27===t.keyCode&&e.isTopModal()&&e.props.onEscapeKeyUp&&e.props.onEscapeKeyUp(t)},this.checkForFocus=function(){d.default&&(e.lastFocus=(0,u.default)())},this.enforceFocus=function(){if(e.props.enforceFocus&&e._isMounted&&e.isTopModal()){var t=e.getDialogElement(),n=(0,u.default)((0,q.default)(e));t&&!(0,p.default)(t,n)&&t.focus()}}};U.Manager=T.default,t.default=U,e.exports=t.default},function(e,t,n){e.exports=n(4)(590)},function(e,t,n){e.exports=n(4)(1216)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){var n=-1;return e.some(function(e,r){if(t(e,r))return n=r,!0}),n}function a(e,t){return i(e,function(e){return-1!==e.modals.indexOf(t)})}function s(e,t){var n={overflow:"hidden"};e.style={overflow:t.style.overflow,paddingRight:t.style.paddingRight},e.overflowing&&(n.paddingRight=parseInt((0,f.default)(t,"paddingRight")||0,10)+(0,h.default)()+"px"),(0,f.default)(t,n)}function l(e,t){var n=e.style;Object.keys(n).forEach(function(e){return t.style[e]=n[e]})}t.__esModule=!0;var u=n(1042),c=r(u),p=n(1043),f=r(p),d=n(1044),h=r(d),m=n(1045),g=r(m),v=n(1046),y=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.hideSiblingNodes,i=void 0===r||r,u=n.handleContainerOverflow,p=void 0===u||u;o(this,e),this.add=function(e,n,r){var o=t.modals.indexOf(e),i=t.containers.indexOf(n);if(-1!==o)return o;if(o=t.modals.length,t.modals.push(e),t.hideSiblingNodes&&(0,v.hideSiblings)(n,e.mountNode),-1!==i)return t.data[i].modals.push(e),o;var a={modals:[e],classes:r?r.split(/\s+/):[],overflowing:(0,g.default)(n)};return t.handleContainerOverflow&&s(a,n),a.classes.forEach(c.default.addClass.bind(null,n)),t.containers.push(n),t.data.push(a),o},this.remove=function(e){var n=t.modals.indexOf(e);if(-1!==n){var r=a(t.data,e),o=t.data[r],i=t.containers[r];o.modals.splice(o.modals.indexOf(e),1),t.modals.splice(n,1),0===o.modals.length?(o.classes.forEach(c.default.removeClass.bind(null,i)),t.handleContainerOverflow&&l(o,i),t.hideSiblingNodes&&(0,v.showSiblings)(i,e.mountNode),t.containers.splice(r,1),t.data.splice(r,1)):t.hideSiblingNodes&&(0,v.ariaHidden)(!1,o.modals[o.modals.length-1].mountNode)}},this.isTopModal=function(e){return!!t.modals.length&&t.modals[t.modals.length-1]===e},this.hideSiblingNodes=i,this.handleContainerOverflow=p,this.modals=[],this.containers=[],this.data=[]};t.default=y,e.exports=t.default},function(e,t,n){e.exports=n(4)(1218)},function(e,t,n){e.exports=n(4)(171)},function(e,t,n){e.exports=n(4)(596)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return e&&"body"===e.tagName.toLowerCase()}function i(e){var t=(0,c.default)(e),n=(0,l.default)(t),r=n.innerWidth;if(!r){var o=t.documentElement.getBoundingClientRect();r=o.right-Math.abs(o.left)}return t.body.clientWidth<r}function a(e){return(0,l.default)(e)||o(e)?i(e):e.scrollHeight>e.clientHeight}t.__esModule=!0,t.default=a;var s=n(912),l=r(s),u=n(895),c=r(u);e.exports=t.default},function(e,t,n){"use strict";function r(e,t){t&&(e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden"))}function o(e,t){l(e,t,function(e){return r(!0,e)})}function i(e,t){l(e,t,function(e){return r(!1,e)})}t.__esModule=!0,t.ariaHidden=r,t.hideSiblings=o,t.showSiblings=i;var a=["template","script","style"],s=function(e){var t=e.nodeType,n=e.tagName;return 1===t&&-1===a.indexOf(n.toLowerCase())},l=function(e,t,n){t=[].concat(t),[].forEach.call(e.children,function(e){-1===t.indexOf(e)&&s(e)&&n(e)})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=n(2),l=r(s),u=n(812),c=r(u),p=n(1),f=r(p),d=n(19),h=r(d),m=n(813),g=r(m),v=n(796),y=r(v),b=function(e){function t(){var n,r,a;o(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=i(this,e.call.apply(e,[this].concat(l))),r._mountOverlayTarget=function(){r._overlayTarget||(r._overlayTarget=document.createElement("div"),r._portalContainerNode=(0,g.default)(r.props.container,(0,y.default)(r).body),r._portalContainerNode.appendChild(r._overlayTarget))},r._unmountOverlayTarget=function(){r._overlayTarget&&(r._portalContainerNode.removeChild(r._overlayTarget),r._overlayTarget=null),r._portalContainerNode=null},r._renderOverlay=function(){var e=r.props.children?f.default.Children.only(r.props.children):null;if(null!==e){r._mountOverlayTarget();var t=!r._overlayInstance;r._overlayInstance=h.default.unstable_renderSubtreeIntoContainer(r,e,r._overlayTarget,function(){t&&r.props.onRendered&&r.props.onRendered()})}else r._unrenderOverlay(),r._unmountOverlayTarget()},r._unrenderOverlay=function(){r._overlayTarget&&(h.default.unmountComponentAtNode(r._overlayTarget),r._overlayInstance=null)},r.getMountNode=function(){return r._overlayTarget},a=n,i(r,a)}return a(t,e),t.prototype.componentDidMount=function(){this._isMounted=!0,this._renderOverlay()},t.prototype.componentDidUpdate=function(){this._renderOverlay()},t.prototype.componentWillReceiveProps=function(e){this._overlayTarget&&e.container!==this.props.container&&(this._portalContainerNode.removeChild(this._overlayTarget),this._portalContainerNode=(0,g.default)(e.container,(0,y.default)(this).body),this._portalContainerNode.appendChild(this._overlayTarget))},t.prototype.componentWillUnmount=function(){this._isMounted=!1,this._unrenderOverlay(),this._unmountOverlayTarget()},t.prototype.render=function(){return null},t}(f.default.Component);b.displayName="Portal",b.propTypes={container:l.default.oneOfType([c.default,l.default.func]),onRendered:l.default.func},t.default=b,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=n(2),l=r(s),u=n(1),c=r(u),p={children:l.default.node},f=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.render=function(){return this.props.children},t}(c.default.Component);f.propTypes=p,t.default=f,e.exports=t.default},function(e,t,n){"use strict";function r(e){var t=!document.addEventListener,n=void 0;return t?(document.attachEvent("onfocusin",e),n=function(){return document.detachEvent("onfocusin",e)}):(document.addEventListener("focus",e,!0),n=function(){return document.removeEventListener("focus",e,!0)}),{remove:n}}t.__esModule=!0,t.default=r,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=n(2),c=r(u),p=n(918),f=r(p),d=n(1),h=r(d),m=n(896),g=r(m),v=n(919),y=r(v),b=n(920),w=r(b),x=function(e){function t(n,r){i(this,t);var o=a(this,e.call(this,n,r));return o.handleHidden=function(){if(o.setState({exited:!0}),o.props.onExited){var e;(e=o.props).onExited.apply(e,arguments)}},o.state={exited:!n.show},o.onHiddenListener=o.handleHidden.bind(o),o}return s(t,e),t.prototype.componentWillReceiveProps=function(e){e.show?this.setState({exited:!1}):e.transition||this.setState({exited:!0})},t.prototype.render=function(){var e=this.props,t=e.container,n=e.containerPadding,r=e.target,i=e.placement,a=e.shouldUpdatePosition,s=e.rootClose,l=e.children,u=e.transition,c=o(e,["container","containerPadding","target","placement","shouldUpdatePosition","rootClose","children","transition"]);if(!(c.show||u&&!this.state.exited))return null;var p=l;if(p=h.default.createElement(y.default,{container:t,containerPadding:n,target:r,placement:i,shouldUpdatePosition:a},p),u){var f=c.onExit,d=c.onExiting,m=c.onEnter,v=c.onEntering,b=c.onEntered;p=h.default.createElement(u,{in:c.show,transitionAppear:!0,onExit:f,onExiting:d,onExited:this.onHiddenListener,onEnter:m,onEntering:v,onEntered:b},p)}return s&&(p=h.default.createElement(w.default,{onRootClose:c.onHide},p)),h.default.createElement(g.default,{container:t},p)},t}(h.default.Component);x.propTypes=l({},g.default.propTypes,y.default.propTypes,{show:c.default.bool,rootClose:c.default.bool,onHide:function(e){var t=c.default.func;e.rootClose&&(t=t.isRequired);for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return t.apply(void 0,[e].concat(r))},transition:f.default,onEnter:c.default.func,onEntering:c.default.func,onEntered:c.default.func,onExit:c.default.func,onExiting:c.default.func,onExited:c.default.func}),t.default=x,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=void 0,n=void 0,r=void 0;if("BODY"===e.tagName)t=window.innerWidth,n=window.innerHeight,r=(0,d.default)((0,m.default)(e).documentElement)||(0,d.default)(e);else{var o=(0,u.default)(e);t=o.width,n=o.height,r=(0,d.default)(e)}return{width:t,height:n,scroll:r}}function i(e,t,n,r){var i=o(n),a=i.scroll,s=i.height,l=e-r-a,u=e+r-a+t;return l<0?-l:u>s?s-u:0}function a(e,t,n,r){var i=o(n),a=i.width,s=e-r,l=e+r+t;return s<0?-s:l>a?a-l:0}function s(e,t,n,r,o){var s="BODY"===r.tagName?(0,u.default)(n):(0,p.default)(n,r),l=(0,u.default)(t),c=l.height,f=l.width,d=void 0,h=void 0,m=void 0,g=void 0;if("left"===e||"right"===e){h=s.top+(s.height-c)/2,d="left"===e?s.left-f:s.left+s.width;var v=i(h,c,r,o);h+=v,g=50*(1-2*v/c)+"%",m=void 0}else{if("top"!==e&&"bottom"!==e)throw new Error('calcOverlayPosition(): No such placement of "'+e+'" found.');d=s.left+(s.width-f)/2,h="top"===e?s.top-c:s.top+s.height;var y=a(d,f,r,o);d+=y,m=50*(1-2*y/f)+"%",g=void 0}return{positionLeft:d,positionTop:h,arrowOffsetLeft:m,arrowOffsetTop:g}}t.__esModule=!0,t.default=s;var l=n(824),u=r(l),c=n(1052),p=r(c),f=n(913),d=r(f),h=n(796),m=r(h);e.exports=t.default},function(e,t,n){e.exports=n(4)(1234)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(){}t.__esModule=!0,t.EXITING=t.ENTERED=t.ENTERING=t.EXITED=t.UNMOUNTED=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=n(18),p=r(c),f=n(914),d=r(f),h=n(289),m=r(h),g=n(2),v=r(g),y=n(1),b=r(y),w=n(19),x=r(w),_=m.default.end,S=t.UNMOUNTED=0,C=t.EXITED=1,k=t.ENTERING=2,A=t.ENTERED=3,E=t.EXITING=4,M=function(e){function t(n,r){i(this,t);var o=a(this,e.call(this,n,r));o.updateStatus=function(){if(null!==o.nextStatus){o.cancelNextCallback();var e=x.default.findDOMNode(o);o.nextStatus===k?(o.props.onEnter(e),o.safeSetState({status:k},function(){o.props.onEntering(e),o.onTransitionEnd(e,function(){o.safeSetState({status:A},function(){o.props.onEntered(e)})})})):(o.props.onExit(e),o.safeSetState({status:E},function(){o.props.onExiting(e),o.onTransitionEnd(e,function(){o.safeSetState({status:C},function(){o.props.onExited(e)})})})),o.nextStatus=null}else o.props.unmountOnExit&&o.state.status===C&&o.setState({status:S})},o.cancelNextCallback=function(){null!==o.nextCallback&&(o.nextCallback.cancel(),o.nextCallback=null)},o.safeSetState=function(e,t){o.setState(e,o.setNextCallback(t))},o.setNextCallback=function(e){var t=!0;return o.nextCallback=function(n){t&&(t=!1,o.nextCallback=null,e(n))},o.nextCallback.cancel=function(){t=!1},o.nextCallback},o.onTransitionEnd=function(e,t){o.setNextCallback(t),e?((0,d.default)(e,_,o.nextCallback),setTimeout(o.nextCallback,o.props.timeout)):setTimeout(o.nextCallback,0)};var s=void 0;return o.nextStatus=null,n.in?n.transitionAppear?(s=C,o.nextStatus=k):s=A:s=n.unmountOnExit||n.mountOnEnter?S:C,o.state={status:s},o.nextCallback=null,o}return s(t,e),t.prototype.componentDidMount=function(){this.updateStatus()},t.prototype.componentWillReceiveProps=function(e){var t=this.state.status;e.in?(t===S&&this.setState({status:C}),t!==k&&t!==A&&(this.nextStatus=k)):t!==k&&t!==A||(this.nextStatus=E)},t.prototype.componentDidUpdate=function(){this.updateStatus()},t.prototype.componentWillUnmount=function(){this.cancelNextCallback()},t.prototype.render=function(){var e=this.state.status;if(e===S)return null;var n=this.props,r=n.children,i=n.className,a=o(n,["children","className"]);Object.keys(t.propTypes).forEach(function(e){return delete a[e]});var s=void 0;e===C?s=this.props.exitedClassName:e===k?s=this.props.enteringClassName:e===A?s=this.props.enteredClassName:e===E&&(s=this.props.exitingClassName);var l=b.default.Children.only(r);return b.default.cloneElement(l,u({},a,{className:(0,p.default)(l.props.className,i,s)}))},t}(b.default.Component);M.propTypes={in:v.default.bool,mountOnEnter:v.default.bool,unmountOnExit:v.default.bool,transitionAppear:v.default.bool,timeout:v.default.number,exitedClassName:v.default.string,exitingClassName:v.default.string,enteredClassName:v.default.string,enteringClassName:v.default.string,onEnter:v.default.func,onEntering:v.default.func,onEntered:v.default.func,onExit:v.default.func,onExiting:v.default.func,onExited:v.default.func},M.displayName="Transition",M.defaultProps={in:!1,unmountOnExit:!1,transitionAppear:!1,timeout:5e3,onEnter:l,onEntering:l,onEntered:l,onExit:l,onExiting:l,onExited:l},t.default=M},function(e,t){},function(e,t,n){"use strict";var r=n(1056),o=function(e){return e&&e.__esModule?e:{default:e}}(r);e.exports={CheckedSelect:o.default}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l),c=n(2),p=r(c),f=n(98),d=r(f),h=n(18),m=r(h),g=n(1057),v=r(g),y=n(1058),b=r(y),w=n(1059),x=r(w),_=n(1060),S=r(_);n(823);var C=function(e){function t(e,n){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.handleFilterOptions=r.handleFilterOptions.bind(r),r.toggleSelection=r.toggleSelection.bind(r),r.clearAllOptionsIsSelectedFlags=r.clearAllOptionsIsSelectedFlags.bind(r),r.clearVisibleOptions=r.clearVisibleOptions.bind(r),r.getResetValue=r.getResetValue.bind(r),r.setValue=r.setValue.bind(r),r.handleAddAll=r.handleAddAll.bind(r),r.handleClearAll=r.handleClearAll.bind(r),r.renderMenu=r.renderMenu.bind(r),r.getSelectComponent=r.getSelectComponent.bind(r),r.getSelectAsyncComponent=r.getSelectAsyncComponent.bind(r),r}return a(t,e),s(t,[{key:"handleFilterOptions",value:function(e,t,n){var r=this;return this._options=e,this.props.value.length&&(n=this.props.value),this.props.ignoreAccents&&(t=(0,S.default)(t)),this.props.ignoreCase&&(t=t.toLowerCase()),n&&(n=n.map(function(e){return e[r.props.valueKey]})),this._visibleOptions=e.filter(function(e){if(n&&n.indexOf(e[r.props.valueKey])>-1&&(e.isSelected=!e.disabled),!t)return!0;var o=String(e[r.props.valueKey]),i=String(e[r.props.labelKey]);return r.props.ignoreAccents&&("label"!==r.props.matchProp&&(o=(0,S.default)(o)),"value"!==r.props.matchProp&&(i=(0,S.default)(i))),r.props.ignoreCase&&("label"!==r.props.matchProp&&(o=o.toLowerCase()),"value"!==r.props.matchProp&&(i=i.toLowerCase())),"start"===r.props.matchPos?"label"!==r.props.matchProp&&o.substr(0,t.length)===t||"value"!==r.props.matchProp&&i.substr(0,t.length)===t:"label"!==r.props.matchProp&&o.indexOf(t)>=0||"value"!==r.props.matchProp&&i.indexOf(t)>=0}),this._visibleOptions}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(this.props.value!==e.value){var n=e.value.map(function(t){return t[e.valueKey]});this.clearAllOptionsIsSelectedFlags(),this._visibleOptions.forEach(function(e){n.indexOf(e[t.props.valueKey])>-1&&(e.isSelected=!0)})}}},{key:"toggleSelection",value:function(e){var t=this,n=this.props.value,r=n.find(function(n){return n[t.props.valueKey]===e[0][t.props.valueKey]});r?(n=n.filter(function(e){return r[t.props.valueKey]!==e[t.props.valueKey]}),this._visibleOptions.map(function(e){return r[t.props.valueKey]===e[t.props.valueKey]&&(e.isSelected=!1),e})):n=n.concat(e),this.props.onChange(n)}},{key:"renderClearButton",value:function(){return null}},{key:"addVisibleOptions",value:function(){var e=this,t=this.props.value,n=t.map(function(t){return t[e.props.valueKey]}),r=this._visibleOptions.filter(function(t){return!t.disabled&&-1===n.indexOf(t[e.props.valueKey])});return t.concat(r)}},{key:"clearVisibleOptions",value:function(){var e=this,t=this._visibleOptions.map(function(t){return t[e.props.valueKey]});return this.props.value.filter(function(n){return-1===t.indexOf(n[e.props.valueKey])})}},{key:"getResetValue",value:function(){return void 0!==this.props.resetValue?this.props.resetValue:this.props.multi?[]:null}},{key:"setValue",value:function(e){var t=this;this.props.simpleValue&&e&&(e=this.props.multi?e.map(function(e){return e[t.props.valueKey]}).join(this.props.delimiter):e[this.props.valueKey]),this.props.onChange(e)}},{key:"clearAllOptionsIsSelectedFlags",value:function(){this._options.map(function(e){e.isSelected=!1})}},{key:"setVisibleOptionsIsSelectedFlags",value:function(e){this._visibleOptions.forEach(function(t){return t.isSelected=e})}},{key:"handleAddAll",value:function(){this.setVisibleOptionsIsSelectedFlags(!0);var e=this.addVisibleOptions();this.setValue(e)}},{key:"handleClearAll",value:function(){this.setVisibleOptionsIsSelectedFlags(!1);var e=this.clearVisibleOptions();this.setValue(e)}},{key:"renderMenu",value:function(e){var t=this,n=this.props;return this._visibleOptions.map(function(r,o){var i=e.valueArray&&e.valueArray.indexOf(r)>-1,a=r===e.focusedOption,s=(0,m.default)(e.optionClassName,{"Select-option":!0,"is-selected":i,"is-focused":a,"is-disabled":r.disabled});return 0===o?u.default.createElement("div",{key:"option-"+o+"-"+r[e.valueKey]},u.default.createElement(x.default,{onAddAll:t.handleAddAll,onClearAll:t.handleClearAll,addAllTitle:n.addAllTitle,clearAllTitle:n.clearAllTitle}),u.default.createElement(v.default,{className:s,option:r,onFocus:e.onFocus,onSelect:e.onSelect,children:e.children})):u.default.createElement("div",{key:"option-"+o+"-"+r[e.valueKey]},u.default.createElement(v.default,{className:s,option:r,onFocus:e.onFocus,onSelect:e.onSelect,children:e.children}))})}},{key:"getSelectComponent",value:function(){return u.default.createElement(d.default,{onChange:this.toggleSelection,clearRenderer:this.renderClearButton,closeOnSelect:!1,disabled:this.props.disabled,multi:!0,menuRenderer:this.renderMenu,optionComponent:v.default,options:this.props.options,valueComponent:b.default,filterOptions:this.handleFilterOptions,placeholder:this.props.placeholder})}},{key:"getSelectAsyncComponent",value:function(){return u.default.createElement(d.default.Async,{loadOptions:this.props.loadOptions,cache:this.props.cache,onChange:this.toggleSelection,clearRenderer:this.renderClearButton,closeOnSelect:!1,disabled:this.props.disabled,multi:!0,menuRenderer:this.renderMenu,optionComponent:v.default,valueComponent:b.default,filterOptions:this.handleFilterOptions,placeholder:this.props.placeholder})}},{key:"render",value:function(){return this.props.async?this.getSelectAsyncComponent():this.getSelectComponent()}}]),t}(u.default.Component);C.propTypes={addAllTitle:p.default.string,async:p.default.bool,cache:p.default.any,clearAllTitle:p.default.string,disabled:p.default.bool,ignoreAccents:p.default.bool,ignoreCase:p.default.bool,loadOptions:p.default.func,matchPos:p.default.string,matchProp:p.default.string,onChange:p.default.func,options:p.default.array,placeholder:p.default.string,value:p.default.any,valueKey:p.default.string},C.defaultProps={addAllTitle:"Add all",async:!1,cache:{},clearAllTitle:"Clear",disabled:!1,ignoreAccents:!0,ignoreCase:!0,label:"",matchPos:"any",matchProp:"any",options:[],placeholder:"Please select ..",valueKey:"value"},t.default=C},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l),c=n(2),p=r(c),f=n(18),d=r(f),h=function(e){function t(e,n){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.handleMouseDown=r.handleMouseDown.bind(r),r.handleMouseEnter=r.handleMouseEnter.bind(r),r.handleMouseMove=r.handleMouseMove.bind(r),r}return a(t,e),s(t,[{key:"blockEvent",value:function(e){e.preventDefault(),e.stopPropagation(),"A"===e.target.tagName&&"href"in e.target&&(e.target.target?window.open(e.target.href,e.target.target):window.location.href=e.target.href)}},{key:"handleMouseDown",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.onSelect(this.props.option,e)}},{key:"handleMouseEnter",value:function(e){this.props.onFocus(this.props.option,e)}},{key:"handleMouseMove",value:function(e){this.props.isFocused||this.props.onFocus(this.props.option,e)}},{key:"renderMarker",value:function(){var e={width:".7em",height:".7em"};return u.default.createElement("span",null,u.default.createElement("img",{style:e,src:this.props.option.isSelected?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAMAAABrrFhUAAAAzFBMVEUAAABmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmbop8NfAAAAQ3RSTlMAAQIDBAUGBwgJCwwODxASExQVFhcaGxwdHiQmJyowOEZeYWlwc4iRmrS5vsDDxcfKzM7P1dna4uTo6e3v8fP19/n7iNWGAAAAA9hJREFUeNrt3Nd2E0EQhOGRLJIBkREmY3JOxoDBskS//ztxYYyTtNqdndDdVfUAc87330+HwHEcx3Ecx3Ecx3Ecx5ndmYsjZP7DDyLy+fEAlD98JfvbugzpH72Vg00niP53crjZBNsPWOCEH67AKT9YgQV+qAIL/UAFlvhhCiz1gxRo8EMUaPQDFFjhd19gpd95gRZ+1wVa+R0XaOl3W6C132mBDn6XBTr5HRbo6HdXoLPfWYEIv6sCUX5HBSL9bgpE+50U6OF3UaCX30GBnn7zBXr7jRdI4DddIInfcIFEfrMFkvmNFkjoN1kgqd9ggcR+cwWS+40VyOA3VSCL31CBTH4zBbL5jRTI6DdRIKtfZHYb2y+yewnbL/JtiO0XeQLul98DbL/IdXC/3AP3yw1w/+4A2y+b4P7tIbZ/Osb2z++A+zfop59++umnn3766aeffvrpp59++umnn3766aeffvobN7g6WQf2rz2disjXR6j+K9//Pfv6HKR/svf/4Z9jRP/syNM7Y2x/fAEv/tgCfvxxBTz5Ywr48ncv4M3ftYA/f7cCHv1dCvj0ty/g1d+2gF9/uwKe/W0K+PavLuDdv6qAf39zAQR/UwEM//ICKP5lBXD8iwsg+RcVwPKfLoDmP1kAz3+8AKL/aAFM/2EBVP9BAVz/fgFkv8jOGNsvsvMR219w9NNPP/30008//fTTH79b4P71X9j+8Abcfx/cH16A+8MWuD9Mwf3hE7g/PAf3h5vg/hBegvvD2hdsfwjnt7H9IVzYxvZbKJD7/7P2Avn/f+suUOL/u+YCZf7/6y1Q6v6B1gLl7j/oLFDy/oXGAmXvf+grUPr+ibYC5e+/6CpQ4/6NpgJ17v/oKVDr/pGWAvXuP+koUPP+lYYCde9/1S9Q+/5Z7QL177/VLaDh/l3NAjru/9UroOX+Ya0Ceu4/1img6f5ljQK67n+WL6Dt/mnpAvruv5YtoPH+bckCKu//Fiyg01+ugFZ/qQJ6/WUKaPaXKKDbn7+Adn/uAvr9eQtY8OcsYMOfr4AVf64Cdvx5Cljy5yhgy5++gDV/6gL2/GkLWPSnLGDTn66AVX+qAnb9aQpY9qcoYNvfv4B1f98C9v39Cnjw9yngwx9fwIs/toAff1wBT/6YAr783Qt483ct4M/frYBHf5cCPv3tC3j1ty3g19+ugGd/mwK+/asLePevKuDf31wAwd9UAMO/vACKf1kBHP/iAkj+RQWw/KcLoPlPFsDzHy+A6A/h7PsD/49rAXKDzbnIH5k/GwXUDe9uPNgYBo7jOI7jOI7jOI7jOI7TuL/OhrIas3WI7wAAAABJRU5ErkJggg==":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAMAAABrrFhUAAABklBMVEUAAABmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmYZKwwjAAAAhXRSTlMAAQIDBAUGBwgJCgsMDQ8QERMUFRYXGRobHB0eHyAhIiQlJicqKy4vMzU3ODs8PT9AQUNGSktOT1BSVFVXW11hYmRmZ2hxc3R1d3t8fn+Cg4iJjo+RkpeYmpueoKKjpaaoqq+wsrS3ub7AwcPHzM7P0dPZ2tze4OLk5ujr7e/x8/X3+fv9Thn5agAABcFJREFUeNrt2ulbE1cUBvBzJxmMIQYlLqWItihEQQUVq9CCsYALls0qBWmhuAQRlMU0skQWyf2/+8FCQebcSSDtwz3znq/n8OH9PTNzl0BUZCnHPRo7nBUtCyn67ypS09Q1spDXh7wWx7tv1h4rdfjopZ6MtqlyT5qOly797VltYy13nihBeudaWttb861HDhY//GNO212bD6L7j++m1rWA6t/vJ/H6qhZSPzv7iJ94o+VUtq7o7U63llWjZUXlL5/W0mqpuoj8yTUtsH4qOP99LbPGQoW9/kNaas0U8iEIvdBya6Hcf/MzrSXXst/xwJ3TsmvNLOBMaem1bHoL1ISWXwuGL+EzHYSaYVfDezoYNcbkr9VBKe89YSQXGAD9rdcHMB2c/HrJ3QvQXsgiOnTrQkXYocNaKhQ719y/VMjpeO8BeNN3Ae2sJDsqdsd/O7fnhmTcb+2oJ5vqzB8+ef766jlOmsczF8m2SkyaI3Xufnk+GodTDllYV82Xurvuim+YJhe/ITsrajzZ9O98ALKGwZcu2VrqF5PAjl9MGg1jw4osrpQh2YN/x+b5qUGyu37go+W3fzes4Yeek+1leAZat2b62JFJZT0A8d+B+a1roA1uYuWI/flJ8WvBP1vbenbgO5JQ0VWfzdAw139MMuoqe7z58ohwx6BcWAgAsbvi40RECa7bLCU/H7GJiKiFuzRQYgBojMn4hIhohGm2yMlPZ7i3nIiI+z8gVxAAzfFHwgh3BpCUn+4wKWuJTjOtpCiAGJPyJtFlphURBUDMTWk3exv8QVZ+6veOOU406N3pEwbQzNx2sUtkmzCAc8ybTpQOwjeQ/woqeufdqBIGEGIAQsTchyaEASgGoIzbCMaFARB7Ncw0YgEBiAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD+V4BV70ZFQACOUsa7cVJYfocBcGnGu1EtDCDMADj02rvRIAygggFQNOrd6BAGcME7Zp6o17vzVBjALe+YC0St3p0VYQC/ecccIUoyL8cxWQBr3im7iBIMQJOo/JV8SpdpTYoC6GJS1hDRMtMrlwTAhYwQ0YBmXw8xVc9kzBARXWGaG2E5AMx2V/cQEcWZpr4rJv9FLuIlIiL6xHTzUlZCJ8MBRImI3QtqPSEEIMUFnP3SP8v1dYuI/FVsvts+a4TOS7gVcBe1+Q3gdwlaZyPW51cv2XTprZkT7IietX4tHObDXdseesUPTVkuMMhHyznbU+f5Kf3e5rdAPTcka9sx+NYwl7X3SxiZNORaD+2YrDMM6rytq+H3OVOs1K7ZadOo/tPGn0nCj42ZVt1d06eMwzp/17ZvoWrOmSNd/+oPeszjeqPLpvsBt2XJJ8+bPQ/MivarySY7TkeR5LBvFp3Y82cNuoBaedrRUH2yInY4K56oSrb1fSgkSLcH3IAOTk0rr1Pz+8DkX/P+nsU/BwUgyXw9GgOS/z77/ewIRP4hwwryKAD5XyjTGvqr/AUgZN5B/i48/5zrt4eW/QxMuf47yYeC8084heyl5a4Fz1Rhp4lGoTuiewWfp+ISd8W52mJ+TZN3MkoXebnbsCIq/ma7KvZaIdwjKP/Yvq6zTk0Lif8xud/Lpbq3AuJnb6gD3K+df2V5/PlGdcArxsquZWvTb/TVlOSa9WzvJwvTfx6ud0p31Ry/MmDTg7A+0pJQJb9vdxPJ1t7R1zOZ1cMaO/suPTbYfvl0MXuevwFWcDKfbC6LzAAAAABJRU5ErkJggg=="}),"")}},{key:"render",value:function(){var e=this.props,t=e.option,n=e.instancePrefix,r=e.optionIndex,o=(0,d.default)(this.props.className,t.className);return t.disabled?u.default.createElement("div",{className:o,onMouseDown:this.blockEvent,onClick:this.blockEvent},this.renderMarker(),this.props.option.label):u.default.createElement("div",{className:o,style:t.style,role:"option",onMouseDown:this.handleMouseDown,onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,id:n+"-option-"+r,title:this.props.option.title},this.renderMarker(),this.props.option.label)}}]),t}(u.default.Component);h.propTypes={children:p.default.node,className:p.default.string,ignoreAccents:p.default.bool,ignoreCase:p.default.bool,isDisabled:p.default.bool,isFocused:p.default.bool,isSelected:p.default.bool,matchPos:p.default.string,matchProp:p.default.string,onFocus:p.default.func,onSelect:p.default.func,option:p.default.object.isRequired,valueKey:p.default.string},t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l),c=n(2),p=r(c),f=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"render",value:function(){return null}}]),t}(u.default.Component);f.propTypes={children:p.default.node,disabled:p.default.bool,id:p.default.string,value:p.default.object.isRequired},t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l),c=n(2),p=r(c),f=function(e){function t(e,n){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.addAll=r.addAll.bind(r),r.clearAll=r.clearAll.bind(r),r}return a(t,e),s(t,[{key:"addAll",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.onAddAll()}},{key:"clearAll",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.onClearAll()}},{key:"render",value:function(){var e={fontColor:"inherit",textAlign:"center",padding:"1em",borderBottom:"1px solid #ccc"},t={borderRadius:"0.3em",fontColor:"inherit",backgroundColor:"white",border:"1px solid #ccc",padding:"0.5em",textAlign:"center",textDecoration:"none",fontSize:"smaller",cursor:"pointer",marginLeft:"0.3em"};return u.default.createElement("div",{style:e},u.default.createElement("button",{onClick:this.addAll,style:t},this.props.addAllTitle),u.default.createElement("button",{onClick:this.clearAll,style:t},this.props.clearAllTitle))}}]),t}(u.default.Component);f.propTypes={onAddAll:p.default.func,onClearAll:p.default.func,addAllTitle:p.default.string,clearAllTitle:p.default.string},t.default=f},function(e,t,n){"use strict";function r(e){for(var t=0;t<o.length;t++)e=e.replace(o[t].letters,o[t].base);return e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}]},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjQsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyMHB4IiB2aWV3Qm94PSIwIDAgMjAgMjAiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDIwIDIwIiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxsaW5lIGZpbGw9Im5vbmUiIHgxPSI2Ljc5MiIgeTE9IjUuNjY3IiB4Mj0iNi43OTIiIHkyPSIxMi4xMjUiLz4NCjxwb2x5Z29uIGZpbGw9IiMzMzMzMzMiIHBvaW50cz0iMCw1IDAsMCA1LDAgIi8+DQo8cG9seWdvbiBmaWxsPSIjMzMzMzMzIiBwb2ludHM9IjE0Ljk5OSwwIDIwLDAgMjAsNSAiLz4NCjxwb2x5Z29uIGZpbGw9IiMzMzMzMzMiIHBvaW50cz0iMjAsMTUgMjAsMjAgMTUsMjAgIi8+DQo8cG9seWdvbiBmaWxsPSIjMzMzMzMzIiBwb2ludHM9IjUsMjAgMCwyMCAwLDE1ICIvPg0KPHJlY3QgeD0iMy43NSIgeT0iNC43MDgiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzMzMzMyIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHdpZHRoPSIxMi41IiBoZWlnaHQ9IjEwLjU4MyIvPg0KPC9zdmc+DQo="},function(e,t,n){"use strict";function r(e,t,n,r,o,a,s){var l=r.map(o),u="sample"===a?"SAMPLE_DATA_":"PATIENT_DATA_",c={CLINICAL:{},CNA:{},MUTATIONS:{},MRNA:{},PROTEIN:{},FUSION:{}},p={amp:"Amplification",gain:"Gain",hetloss:"Shallow Deletion",homdel:"Deep Deletion"},f={};f=s?{inframe:"Inframe Mutation (putative passenger)",inframe_rec:"Inframe Mutation (putative driver)",missense:"Missense Mutation (putative passenger)",missense_rec:"Missense Mutation (putative driver)",promoter:"Promoter Mutation",promoter_rec:"Promoter Mutation",trunc:"Truncating mutation (putative passenger)",trunc_rec:"Truncating mutation (putative driver)"}:{inframe:"Inframe Mutation",inframe_rec:"Inframe Mutation",missense:"Missense Mutation",missense_rec:"Missense Mutation",promoter:"Promoter Mutation",promoter_rec:"Promoter Mutation",trunc:"Truncating mutation",trunc_rec:"Truncating mutation"};var d={up:"mRNA Upregulation",down:"mRNA Downregulation"},h={down:"Protein Downregulation",up:"Protein Upregulation"},m={true:"Fusion"},g=!0,v=!1,y=void 0;try{for(var b,w=e[Symbol.iterator]();!(g=(b=w.next()).done);g=!0){var x=b.value,_=x.data,S=_[0].gene;void 0===c.CNA[S]&&(c.CNA[S]={}),void 0===c.MUTATIONS[S]&&(c.MUTATIONS[S]={}),void 0===c.MRNA[S]&&(c.MRNA[S]={}),void 0===c.PROTEIN[S]&&(c.PROTEIN[S]={}),void 0===c.FUSION[S]&&(c.FUSION[S]={});var C=!0,k=!1,A=void 0;try{for(var E,M=_[Symbol.iterator]();!(C=(E=M.next()).done);C=!0){var T=E.value,O="sample"===a?T.sample:T.patient;c.CNA[S][O]="",c.MUTATIONS[S][O]="",c.MRNA[S][O]="",c.PROTEIN[S][O]="",c.FUSION[S][O]="",void 0!==T.disp_cna&&(c.CNA[S][O]=p[T.disp_cna]?p[T.disp_cna]:T.disp_cna),void 0!==T.disp_fusion&&(c.FUSION[S][O]=m[T.disp_fusion+""]?m[T.disp_fusion+""]:T.disp_fusion),void 0!==T.disp_mrna&&(c.MRNA[S][O]=d[T.disp_mrna]?d[T.disp_mrna]:T.disp_mrna),void 0!==T.disp_prot&&(c.PROTEIN[S][O]=h[T.disp_prot]?h[T.disp_prot]:T.disp_prot),void 0!==T.disp_mut&&(c.MUTATIONS[S][O]=f[T.disp_mut]?f[T.disp_mut]:T.disp_mut)}}catch(e){k=!0,A=e}finally{try{!C&&M.return&&M.return()}finally{if(k)throw A}}}}catch(e){v=!0,y=e}finally{try{!g&&w.return&&w.return()}finally{if(v)throw y}}var I=!0,P=!1,j=void 0;try{for(var D,N=t[Symbol.iterator]();!(I=(D=N.next()).done);I=!0){var R=D.value,F=R.data,L=R.label;void 0===c.CLINICAL[L]&&(c.CLINICAL[L]={});var z=!0,B=!1,q=void 0;try{for(var V,U=F[Symbol.iterator]();!(z=(V=U.next()).done);z=!0){var H=V.value,G="sample"===a?H.sample:H.patient;c.CLINICAL[L][G]="",void 0!==H.attr_val&&(c.CLINICAL[L][G]=H.attr_val)}}catch(e){B=!0,q=e}finally{try{!z&&U.return&&U.return()}finally{if(B)throw q}}}}catch(e){P=!0,j=e}finally{try{!I&&N.return&&N.return()}finally{if(P)throw j}}var W=!0,Z=!1,Y=void 0;try{for(var X,K=n[Symbol.iterator]();!(W=(X=K.next()).done);W=!0){var Q=X.value,J=Q.label,$="HEATMAP "+Q.molecularAlterationType+" "+Q.datatype,ee=Q.data,te=!0,ne=!1,re=void 0;try{for(var oe,ie=ee[Symbol.iterator]();!(te=(oe=ie.next()).done);te=!0){var ae=oe.value;void 0===c[$]&&(c[$]={}),void 0===c[$][J]&&(c[$][J]={});var se="sample"===a?ae.sample:ae.patient;c[$][J][se]=null===ae.profile_data?"":ae.profile_data}}catch(e){ne=!0,re=e}finally{try{!te&&ie.return&&ie.return()}finally{if(ne)throw re}}}}catch(e){Z=!0,Y=e}finally{try{!W&&K.return&&K.return()}finally{if(Z)throw Y}}for(var le="track_name\ttrack_type",ue=0;ue<l.length;ue++)le+="\t"+l[ue];le+="\n",Object.keys(c).forEach(function(e){Object.keys(c[e]).forEach(function(t){le+=t+"\t"+e;for(var n=0;n<l.length;n++)le+="\t"+c[e][t][l[n]];le+="\n"})}),(0,i.default)(le,u+"oncoprint.tsv")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(170),i=function(e){return e&&e.__esModule?e:{default:e}}(o)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=n(1),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l),c=n(10),p=n(8),f=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":s(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},d=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.focused=!1,n.mouseInside=!1,n.initialShow=!1,n.initialShow=!0===e.showByDefault,n.onFocus=n.onFocus.bind(n),n.onBlur=n.onBlur.bind(n),n.onMouseEnter=n.onMouseEnter.bind(n),n.onMouseLeave=n.onMouseLeave.bind(n),n}return i(t,e),a(t,[{key:"componentWillUpdate",value:function(e){e.show!==this.props.show&&(this.initialShow=!1)}},{key:"onFocus",value:function(){this.focused=!0}},{key:"onBlur",value:function(){this.focused=!1}},{key:"onMouseEnter",value:function(){this.initialShow=!1,this.mouseInside=!0}},{key:"onMouseLeave",value:function(){this.initialShow=!1,this.mouseInside=!1}},{key:"render",value:function(){return u.createElement("div",{style:this.style,onFocus:this.onFocus,onBlur:this.onBlur,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},this.props.children)}},{key:"fadeInStyle",get:function(){return{WebkitTransition:"opacity "+this.props.fadeInSeconds+"s",MozTransition:"opacity "+this.props.fadeInSeconds+"s",OTransition:"opacity "+this.props.fadeInSeconds+"s",transition:"opacity "+this.props.fadeInSeconds+"s",opacity:1}}},{key:"fadeOutStyle",get:function(){return{WebkitTransition:"opacity "+this.props.fadeOutSeconds+"s",MozTransition:"opacity "+this.props.fadeOutSeconds+"s",OTransition:"opacity "+this.props.fadeOutSeconds+"s",transition:"opacity "+this.props.fadeOutSeconds+"s",opacity:0}}},{key:"style",get:function(){return this.show?this.fadeInStyle:this.fadeOutStyle}},{key:"show",get:function(){return this.props.show||this.focused||this.mouseInside||this.initialShow}}]),t}(u.Component);d.defaultProps={fadeInSeconds:.2,fadeOutSeconds:.6},f([p.observable],d.prototype,"focused",void 0),f([p.observable],d.prototype,"mouseInside",void 0),f([p.computed],d.prototype,"fadeInStyle",null),f([p.computed],d.prototype,"fadeOutStyle",null),f([p.computed],d.prototype,"style",null),f([p.computed],d.prototype,"show",null),f([p.action],d.prototype,"onMouseEnter",null),f([p.action],d.prototype,"onMouseLeave",null),d=f([c.observer],d),t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(1),p=o(c),f=n(3),d=o(f),h=n(10),m=n(18),g=r(m);n(1065);var v=n(50),y=r(v),b=n(168),w=r(b),x=n(8),_=n(272),S=r(_),C=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},k=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"render",value:function(){return p.createElement("a",{href:this.props.href||"study?id="+this.props.study.studyId,target:"_blank",style:{cursor:"pointer"},onClick:this.props.onClick||function(){}},this.props.study.name)}}]),t}(p.Component),A=function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.queryFormVisible=!1,e.queryStoreInitialized=!1,e.handleModifyQueryClick=e.handleModifyQueryClick.bind(e),e}return s(t,e),l(t,[{key:"handleModifyQueryClick",value:function(){this.queryStoreInitialized=!0,this.queryFormVisible=!this.queryFormVisible}},{key:"render",value:function(){if(this.props.store.totalAlterationStats.isError||this.props.store.studies.isError)return null;var e=this.props.store.totalAlterationStats.isComplete&&this.props.store.studies.isComplete,t=e?this.props.store.totalAlterationStats.result.alteredSampleCount/this.props.store.totalAlterationStats.result.sampleCount*100:0;return p.createElement("div",null,p.createElement("div",{className:"query-summary"},p.createElement("div",{className:"query-summary__leftItems"},p.createElement("div",null,p.createElement("button",{id:"modifyQueryBtn",onClick:this.handleModifyQueryClick,className:(0,g.default)("btn btn-primary",{disabled:!e})},this.queryFormVisible?"Cancel Modify Query":"Modify Query")),p.createElement(w.default,{isLoading:!1===e}),e&&(1===this.props.store.studies.result.length?this.singleStudyUI:this.multipleStudyUI)),e&&p.createElement("div",{className:"query-summary__alterationData"},p.createElement("h4",null,"Gene Set / Pathway is altered in ",this.props.store.totalAlterationStats.result.alteredSampleCount," (",d.round(t,1),"%) of queried samples"))),this.queryStoreInitialized&&p.createElement("div",{style:{marginTop:10},className:(0,g.default)({hidden:!this.queryFormVisible})},p.createElement(S.default,{showDownloadTab:!1,store:this.props.queryStore})))}},{key:"singleStudyUI",get:function(){return p.createElement("div",null,p.createElement("h4",null,p.createElement(k,{study:this.props.store.studies.result[0]})),p.createElement("span",null,window.serverVars.caseSetProperties.case_set_name," (",p.createElement("strong",null,this.props.store.samples.result.length)," samples) / ",p.createElement("strong",{"data-test":"QuerySummaryGeneCount"},this.props.store.hugoGeneSymbols.length)," Genes"))}},{key:"multipleStudyUI",get:function(){return p.createElement("div",null,p.createElement("span",null,"Querying ",this.props.store.samples.result.length," samples in ",this.props.store.studies.result.length," studies ",p.createElement(y.default,{placement:"bottom",overlay:this.studyList,destroyTooltipOnHide:!0},p.createElement("i",{className:"fa fa-info-circle"}))))}},{key:"studyList",get:function(){return p.createElement("div",{className:"cbioportal-frontend"},p.createElement("ul",{className:"list-unstyled",style:{marginBottom:0}},this.props.store.studies.result.map(function(e){return p.createElement("li",null,p.createElement(k,{href:"study?id="+e.studyId,study:e}))})))}}]),t}(p.Component);C([x.observable],A.prototype,"queryFormVisible",void 0),C([x.observable],A.prototype,"queryStoreInitialized",void 0),A=C([h.observer],A),t.default=A},function(e,t){}]));
//# sourceMappingURL=0.81d06bed97dbf0df0eb0.chunk.js.map